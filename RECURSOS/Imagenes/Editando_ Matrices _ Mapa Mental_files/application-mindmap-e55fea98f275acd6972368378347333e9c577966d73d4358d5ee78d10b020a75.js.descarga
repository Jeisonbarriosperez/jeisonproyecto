function track_goal(e,t=!1){if((t||!first_load)&&"undefined"!=typeof gtag)return gtag("event","page_view",{page_path:e});first_load=!1}function track_resource_search_modal(){track_goal("/resources/search")}function track_course_search_modal(){track_goal("/courses/search")}function track_event(e,t,n){if("undefined"!=typeof gtag)return gtag("event",t,Object.assign({event_category:e},n||{}))}function is_touch_device(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}function hide_popup(){$(".modal").modal("hide")}function roundToWithThousands(e,t,n){var i=1*unFormat(e,t);if("number"==typeof i&&"none"!=n)if(n<=0){var a=-n;i=+(Math.round(i+"e+"+a)+"e-"+a)}else{var s="1e+"+(a=n);i=+Math.round(i/s)*s}return i=fmtChartJS(e,i,"none")}function unFormat(e,t){if("."==e.decimalSeparator&&""==e.thousandSeparator||"string"!=typeof t)return t;var n=""+t;if(""!=e.thousandSeparator)for(;n.indexOf(e.thousandSeparator)>=0;)n=""+n.replace(e.thousandSeparator,"");return"."!=e.decimalSeparator&&(n=""+n.replace(e.decimalSeparator,".")),1*n}function fmtChartJSPerso(e,t,n){switch(n){case"SampleJS_Format":return_value="number"==typeof t?"My Format : "+t.toString()+" $":t+"XX";break;case"Change_Month":return_value="string"==typeof t?t.toString()+" 2014":t.toString()+"YY";break;default:return_value=t}return return_value}function fmtChartJS(e,t,n){var i;if("notformatted"==n)i=t;else if("none"==n&&"number"==typeof t){if("none"!=e.roundNumber)if(e.roundNumber<=0){var a=-e.roundNumber;t=+(Math.round(t+"e+"+a)+"e-"+a)}else{var s="1e+"+(a=e.roundNumber);t=+Math.round(t/s)*s}if("."!=e.decimalSeparator||""!=e.thousandSeparator){if(i=t.toString().replace(/\./g,e.decimalSeparator),""!=e.thousandSeparator){var o=i,r="",l=o.indexOf(e.decimalSeparator);l>=0&&(r=(r=o.substring(l+1,o.length)).split("").reverse().join(""),o=o.substring(0,l)),i=o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e.thousandSeparator),""!=(r=r.split("").reverse().join(""))&&(i=i+e.decimalSeparator+r)}}else i=t}else i="none"!=n&&"notformatted"!=n?fmtChartJSPerso(e,t,n):t;return i}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function tmplbis(e,t){for(var n=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+["mean","varianz","stddev","cv","median"].join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");n.test(e);)e=e.replace(n,function(e,n,i,a,s){if(a)var o=a;else o=2;var r=addParameters2Function(t,i,"mathFunctions");return isNumber(r)?"<%="+n+Math.round(Math.pow(10,o)*r)/Math.pow(10,o)+s+"%>":"<%= %>"});var i=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e)?cachebis[e]=cachebis[e]||tmplbis(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?i(t):i}function createCursorDiv(){if(0==cursorDivCreated){var e=document.createElement("divCursor");e.id="divCursor",e.style.position="absolute",document.body.appendChild(e),cursorDivCreated=!0}}function resetChartCursorDiv(){cursorDivCreated=!1}function addResponsiveChart(e,t,n,i){initChartResize();var a=resizeGraph(t,i);"undefined"!=typeof t.prevWidth&&(resizeCtx(t,a.newWidth,a.newHeight),t.prevWidth=a.newWidth),t.prevWidth=a.newWidth,t.prevHeight=a.newHeight,jsGraphResize[jsGraphResize.length]=[e,t.tpchart,t,n,i]}function initChartResize(){0==initChartJsResize&&window.addEventListener("resize",chartJsResize)}function getMaximumWidth(e){return e.parentNode.clientWidth}function getMaximumHeight(e){return e.parentNode.clientHeight}function resizeCtx(e,t,n){window.devicePixelRatio?(e.canvas.style.width=t/window.devicePixelRatio+"px",e.canvas.style.height=n/window.devicePixelRatio+"px",e.canvas.height=n/window.devicePixelRatio*window.devicePixelRatio,e.canvas.width=t/window.devicePixelRatio*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio)):(e.canvas.height=n,e.canvas.width=t)}function resizeGraph(e,t){"undefined"==typeof t.maintainAspectRatio&&(t.maintainAspectRatio=!0);var n=e.canvas;"undefined"==typeof e.aspectRatio&&(e.aspectRatio=n.width/n.height);var i=getMaximumWidth(n),a=t.maintainAspectRatio?i/e.aspectRatio:getMaximumHeight(n);return{newWidth:parseInt(i),newHeight:parseInt(a)}}function chartJsResize(){for(var e=0;e<jsGraphResize.length;e++)"undefined"!=typeof jsGraphResize[e][2].firstPass&&5==jsGraphResize[e][2].firstPass&&(jsGraphResize[e][2].firstPass=6),subUpdateChart(jsGraphResize[e][2],jsGraphResize[e][3],jsGraphResize[e][4])}function testRedraw(e,t,n){return 2==e.firstPass||4==e.firstPass||9==e.firstPass?(e.firstPass=6,subUpdateChart(e,t,n),!0):(e.firstPass=5,!1)}function updateChart(e,t,n,i,a){5==e.firstPass&&(e.runanimationcompletefunction=a,i?e.firstPass=0:(n.responsive,e.firstPass=7),subUpdateChart(e,t,n))}function subUpdateChart(e,t,n){if(dynamicFunction(t,n,e))if("undefined"==typeof e.firstPass){e.firstPass=1;var i=resizeGraph(e,n);n.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),e.runanimationcompletefunction=!0,redrawGraph(e,t,n)}else if(0==e.firstPass){e.firstPass=1;i=resizeGraph(e,n);n.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,t,n)}else if(1==e.firstPass||2==e.firstPass)e.firstPass=2;else if(3==e.firstPass||4==e.firstPass)e.firstPass=4;else if(5==e.firstPass)e.firstPass=1,redrawGraph(e,t,n);else if(6==e.firstPass){(i=resizeGraph(e,n)).newWidth!=e.prevWidth||i.newHeight!=e.prevHeight?(e.firstPass=3,e.clearRect(0,0,e.canvas.width,e.canvas.height),n.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,t,n)):e.firstPass=5}else if(7==e.firstPass){i=resizeGraph(e,n);e.firstPass=3,e.clearRect(0,0,e.canvas.width,e.canvas.height),n.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,t,n)}}function redrawGraph(e,t,n){var i=new Chart(e);switch(e.tpchart){case"Bar":i.Bar(t,n);break;case"Pie":i.Pie(t,n);break;case"Doughnut":i.Doughnut(t,n);break;case"Radar":i.Radar(t,n);break;case"PolarArea":i.PolarArea(t,n);break;case"HorizontalBar":i.HorizontalBar(t,n);break;case"StackedBar":i.StackedBar(t,n);break;case"HorizontalStackedBar":i.HorizontalStackedBar(t,n);break;case"Line":i.Line(t,n)}}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(e,t){this.x=e,this.y=t,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function mergeChartConfig(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}function sleep(e){var t=new Date;for(t.setTime(t.getTime()+e);(new Date).getTime()<t.getTime(););}function saveCanvas(e,t,n){cvSave=e.getImageData(0,0,e.canvas.width,e.canvas.height);var i=mergeChartConfig(n,{savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1});if(i.clearRect=!1,redrawGraph(e,t,i),"NewWindow"==n.savePngOutput){var a=e.canvas.toDataURL();e.putImageData(cvSave,0,0),window.open(a,"_blank")}if("CurrentWindow"==n.savePngOutput){a=e.canvas.toDataURL();e.putImageData(cvSave,0,0),window.location.href=a}if("Save"==n.savePngOutput){a=e.canvas.toDataURL();var s=document.createElement("a");s.href=a,s.download=n.savePngName+".png",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}function dynamicFunction(e,t,n){if(isIE()<9&&0!=isIE())return!0;if(t.dynamicDisplay){if(""==n.canvas.id){var i=(new Date).getTime();n.canvas.id="Canvas_"+i}if("undefined"==typeof dynamicDisplay[n.canvas.id]?(dynamicDisplayList[dynamicDisplayList.length]=n.canvas.id,dynamicDisplay[n.canvas.id]=[n,!1,!1,e,t,n.canvas],dynamicDisplay[n.canvas.id][1]=isScrolledIntoView(n.canvas),window.onscroll=scrollFunction):0==dynamicDisplay[n.canvas.id][2]&&(dynamicDisplay[n.canvas.id][1]=isScrolledIntoView(n.canvas)),0==dynamicDisplay[n.canvas.id][1]&&0==dynamicDisplay[n.canvas.id][2])return!1;dynamicDisplay[n.canvas.id][2]=!0}return!0}function isScrolledIntoView(e){var t=0,n=0;for(elem=e;elem;)t+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft,n+=elem.offsetTop-elem.scrollTop+elem.clientTop,elem=elem.offsetParent;return t+e.width/2>=window.pageXOffset&&t+e.width/2<=window.pageXOffset+window.innerWidth&&n+e.height/2>=window.pageYOffset&&n+e.height/2<=window.pageYOffset+window.innerHeight}function scrollFunction(){for(var e=0;e<dynamicDisplayList.length;e++)isScrolledIntoView(dynamicDisplay[dynamicDisplayList[e]][5])&&0==dynamicDisplay[dynamicDisplayList[e]][2]&&(dynamicDisplay[dynamicDisplayList[e]][1]=!0,redrawGraph(dynamicDisplay[dynamicDisplayList[e]][0],dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]))}function clearAnnotate(e){jsGraphAnnotate[e]=[]}function drawDividerLabel(e,t){e.save();var n=t.padding||5,i=t.height||15,a=t.bgColor||"#cccddd",s=t.textColor||"#000",o=t.fontFamily||"Arial",r=t.fontSize||12,l=t.fontStyle||"normal normal",c=0,d=0,u=0;e.font=l+" "+r+"px "+o;var _=e.measureText(t.text).width+n,h=t.arrowWidth||10,p=t.x-h-_<=100,f=p?"left":"right";c=p?t.x+h:t.x-h-_,d=p?c:t.x-h,u=t.y-i/2,e.fillStyle=a,e.textBaseline="top",e.beginPath(),e.moveTo(t.x,t.y),p?(e.lineTo(c,t.y+i/2),e.lineTo(c,u)):(e.lineTo(c+_,t.y+i/2),e.lineTo(c+_,u)),e.fill(),e.fillRect(c,u,_,i),e.fillStyle=s,e.textAlign=f,e.fillText(t.text,d,u),e.restore()}function getMousePos(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function doMouseAction(config,ctx,event,data,action,funct){var onData=!1;if("annotate"==action){var annotateDIV=document.getElementById("divCursor"),show=!1;annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":config.annotateFontSize+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle}for("annotate"==action&&(show=!1,annotateDIV.style.display=show?"":"none"),canvas_pos=getMousePos(ctx.canvas,event),i=0;i<jsGraphAnnotate[ctx.ChartNewId].length;i++){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])),distance>jsGraphAnnotate[ctx.ChartNewId][i][3]&&distance<jsGraphAnnotate[ctx.ChartNewId][i][4]){for(angle=Math.acos((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])/distance),canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2]&&(angle=-angle);angle<0;)angle+=2*Math.PI;for(;angle>2*Math.PI;)angle-=2*Math.PI;angle<config.startAngle*(Math.PI/360)&&(angle+=2*Math.PI),(angle>jsGraphAnnotate[ctx.ChartNewId][i][5]&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]-2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]-2*Math.PI||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]+2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]+2*Math.PI)&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV5),v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][8]/jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV6),v6=roundToWithThousands(config,v6,config.roundPct),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7),v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV12),v13=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][12],config.fmtV13),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop)))}}else"RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0]?canvas_pos.x>jsGraphAnnotate[ctx.ChartNewId][i][1]&&canvas_pos.x<jsGraphAnnotate[ctx.ChartNewId][i][3]&&canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2]&&canvas_pos.y>jsGraphAnnotate[ctx.ChartNewId][i][4]&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV5),v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][7]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV6),v6=roundToWithThousands(config,v6,config.roundPct),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7),v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop))):"POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]&&(distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])),distance<10&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV5),v6=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV6),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV7),v8=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][5]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV8),v8=roundToWithThousands(config,v8,config.roundPct),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop))));"annotate"==action&&(annotateDIV.style.display=show?"":"none")}0==onData&&"annotate"!=action&&funct(event,ctx,config,data,null)}function animationCorrection(e,t,n,i,a,s){var o=e,r=0;if(-1!=a){o<1&&i<n.animationStartWithDataset-1&&n.animationStartWithDataset-1!=-1&&(o=1),o<1&&a<n.animationStartWithData-1&&n.animationStartWithData-1!=-1&&(o=1);var l=1,c=e;if(o<1&&n.animationByDataset){o=0,l=0;var d=n.animationStartWithDataset-1;n.animationStartWithDataset-1==-1&&(d=0);var u=n.animationSteps/(t.datasets.length-d);if(e>=(i-d+1)*u/n.animationSteps)o=1;else if(e>=(i-d)*u/n.animationSteps){var _=e-(i-d)*u/n.animationSteps;n.animationLeftToRight?c=_*(t.datasets.length-d):o=_*(t.datasets.length-d),l=1}}if(1==l&&o<1&&n.animationLeftToRight){o=0;var h=n.animationStartWithData-1;n.animationStartWithData-1==-1&&(h=0);var p=n.animationSteps/(t.datasets[i].data.length-h-1+s);c>=(a-h)*p/n.animationSteps&&(o=1,c<=(a+1-h)*p/n.animationSteps&&(r=(t.datasets[i].data.length-h-1)*(c-(a-h)*p/n.animationSteps)))}}else o<1&&i<n.animationStartWithData-1&&(o=1);return{mainVal:o,subVal:r,animVal:o+r}}function drawLegend(e,t,n,i,a){1==n.legendBorders&&(i.save(),i.beginPath(),i.lineWidth=n.legendBordersWidth,i.strokeStyle=n.legendBordersColors,i.moveTo(e.xLegendBorderPos,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos+e.legendBorderHeight),i.lineTo(e.xLegendBorderPos+e.legendBorderWidth,e.yLegendBorderPos+e.legendBorderHeight),i.lineTo(e.xLegendBorderPos+e.legendBorderWidth,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos+e.legendBorderWidth,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos+e.legendBorderHeight),i.stroke(),i.closePath(),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=n.legendFillColor,i.fill(),i.restore()),nbcols=e.nbLegendCols-1,ypos=e.yFirstLegendTextPos-(n.legendFontSize+n.legendSpaceBetweenTextVertical),xpos=0,e.drawLegendOnData?fromi=t.datasets.length:fromi=t.length;for(var s=fromi-1;s>=0;s--)orderi=s,e.reverseLegend&&(e.drawLegendOnData?orderi=t.datasets.length-s-1:orderi=t.length-s-1),e.drawLegendOnData?tpof=typeof t.datasets[orderi].title:tpof=typeof t[orderi].title,"string"==tpof&&(e.drawLegendOnData?lgtxt=fmtChartJS(n,t.datasets[orderi].title,n.fmtLegend).trim():lgtxt=fmtChartJS(n,t[orderi].title,n.fmtLegend).trim(),""!=lgtxt&&(nbcols++,nbcols==e.nbLegendCols?(nbcols=0,xpos=e.xFirstLegendTextPos,ypos+=n.legendFontSize+n.legendSpaceBetweenTextVertical):xpos+=e.widestLegend+n.legendSpaceBetweenTextHorizontal,i.save(),i.beginPath(),e.drawLegendOnData?"function"==typeof t.datasets[orderi].strokeColor?i.strokeStyle=t.datasets[orderi].strokeColor("STROKECOLOR",t,n,orderi,-1,1,-1,a,i,-1,-1,-1,-1):"string"==typeof t.datasets[orderi].strokeColor?i.strokeStyle=t.datasets[orderi].strokeColor:i.strokeStyle=n.defaultStrokeColor:"function"==typeof t[orderi].color?i.strokeStyle=t[orderi].color("COLOR",t,n,orderi,-1,1,t[orderi].value,a,i,1,1,1,1):"string"==typeof t[orderi].color?i.strokeStyle=t[orderi].color:i.strokeStyle=n.defaultStrokeColor,e.legendBox?(i.lineWidth=1,i.moveTo(xpos,ypos),i.lineTo(xpos+n.legendBlockSize,ypos),i.lineTo(xpos+n.legendBlockSize,ypos-n.legendFontSize),i.lineTo(xpos,ypos-n.legendFontSize),i.lineTo(xpos,ypos),i.closePath(),e.drawLegendOnData?"function"==typeof t.datasets[orderi].fillColor?i.fillStyle=t.datasets[orderi].fillColor("LEGENDFILLCOLOR",t,n,orderi,-1,1,-1,a,i,xpos,ypos,xpos+n.legendBlockSize,ypos-n.legendFontSize):"string"==typeof t.datasets[orderi].fillColor?i.fillStyle=t.datasets[orderi].fillColor:i.fillStyle=n.defaultFillColor:"function"==typeof t[orderi].color?i.fillStyle=t[orderi].color("LEGENDFILLCOLOR",t,n,orderi,-1,1,-1,a,i,xpos,ypos-n.legendFontSize,xpos+n.legendBlockSize,ypos):"string"==typeof t[orderi].color?i.fillStyle=t[orderi].color:i.fillStyle=n.defaultFillColor,i.fill()):(i.lineWidth=n.legendColorIndicatorStrokeWidth?n.legendColorIndicatorStrokeWidth:n.datasetStrokeWidth,n.legendColorIndicatorStrokeWidth&&n.legendColorIndicatorStrokeWidth>n.legendFontSize&&(i.lineWidth=n.legendFontSize),i.moveTo(xpos+2,ypos-n.legendFontSize/2),i.lineTo(xpos+2+n.legendBlockSize,ypos-n.legendFontSize/2)),i.stroke(),i.restore(),i.save(),i.beginPath(),i.font=n.legendFontStyle+" "+n.legendFontSize+"px "+n.legendFontFamily,i.fillStyle=n.legendFontColor,i.textAlign="left",i.textBaseline="bottom",i.translate(xpos+n.legendBlockSize+n.legendSpaceBetweenBoxAndText,ypos),i.fillText(lgtxt,0,0),i.stroke(),i.restore()))}function clamp(e,t,n){return e<t?e=t:e>n&&(e=n),e}function get_values_from_hsl(e){var t=e.substr(4,e.length);return t=(t=t.substr(0,t.length-1)).split(","),{h:parseFloat(t[0]),s:parseFloat(t[1]),l:parseFloat(t[2])}}function hsl(e,t,n){return"hsl("+e+","+t+","+n+")"}function do_redirect(e,t){void 0!==t&&t||top==self?window.location.href=e:top.location=e}function do_redirect_new_tab(e){window.open(e,"_blank").focus()}function decimal_round(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function truncate_number(e){return Math.floor(10*e)/10}function pad_number(e,t){for(var n=(e>0?e:-e)+"",i="",a=t-n.length;a>0;a--)i+="0";return i+=n,e>=0?i:"-"+i}function only_allow_numbers(e){var t=e[0].selectionStart,n=e[0].selectionEnd;e.val(e.val().replace(/[^0-9]+/,"")),e[0].setSelectionRange(t,n)}function is_using_msie(){return"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&(null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)||/Edge\/./i.test(navigator.userAgent))}function popover_with_class(e){return'<div class="popover '+e+'"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-header"></h3><div class="popover-body"></div></div></div>'}function truncateString(e,t){return e.length>t?e.substring(0,t-1)+"\u2026":e}function sort_topics(e){var t=_.select(e,function(e){return e["default"]}),n=_.select(e,function(e){return!e["default"]});return t.concat(_.sortBy(n,function(e){return e.position?e.position:e.name.toLowerCase()}))}function encodeS3URI(e){return encodeURI(e).replace(/\+/gim,"%2B").replace(/\!/gim,"%21").replace(/\"/gim,"%22").replace(/\#/gim,"%23").replace(/\$/gim,"%24").replace(/\&/gim,"%26").replace(/\'/gim,"%27").replace(/\(/gim,"%28").replace(/\)/gim,"%29").replace(/\*/gim,"%2A").replace(/\+/gim,"%2B").replace(/\,/gim,"%2C").replace(/\:/gim,"%3A").replace(/\;/gim,"%3B").replace(/\=/gim,"%3D").replace(/\?/gim,"%3F").replace(/\@/gim,"%40")}function update_cart_notifier(e){e=parseInt(e,10);$("#cart_notifier_count").text(e).toggleClass("hidden",0===e),$("#cart_icon").removeClass("hidden")}function move_cursor_to_end(e){if(e.focus(),"number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}}function params_from_url(e){var t=e.indexOf("?");if(-1==t||t==e.length-1)return{};for(var n=e.indexOf("#"),i=(-1==n?e.substr(t+1):e.substr(t+1,n-t-1)).split("&"),a={},s=0;s<i.length;s++){var o=i[s].split("="),r=decodeURIComponent(o[0]),l=o[1]?decodeURIComponent(o[1]):"";if(r.endsWith("[]")){var c=r.slice(0,-2);a[c]||(a[c]=[]),""!==l&&a[c].push(l)}else a[r]=l}return a}function params_to_url(e){return $.param(e)}function window_location_object(e){return full_url=[window.location.protocol,"//",window.location.hostname,":",window.location.port,e],full_url.join("")}
/* ISC License (ISC). Copyright 2017 Michal Zalecki */
function storageFactory(e){function t(){try{var t="__goconqr_throwaway_key_for_testing__";return e().setItem(t,t),e().removeItem(t),!0}catch(n){return!1}}function n(){t()?e().clear():(stroage_cookies.forEach(function(e){return Cookies.remove(e)}),u=[])}function i(n){return t()?e().getItem(n):Cookies.get(n)||null}function a(n){return t()?e().key(n):u[n]||null}function s(n){t()?e().removeItem(n):Cookies.remove(n)}function o(n,i){t()?e().setItem(n,i):(Cookies.set(n,i,{path:"/",secure:!0,expires:1,same_site:"lax"}),u.push(n))}function r(n,i,a){t()?e().setItem(n,JSON.stringify({value:i,expiry:(new Date).getTime()+a})):Cookies.set(n,i,{path:"/",secure:!0,expires:Math.ceil(a/d),same_site:"lax"})}function l(n){if(t()){var i=e().getItem(n);if(!i)return null;var a=JSON.parse(i);return(new Date).getTime()>a.expiry?(e().removeItem(n),null):a.value}return Cookies.get(n)||null}function c(){return t()?e().length:u.length}e=e||function(){return Storage};var d=864e5,u=[];return{getItem:i,setItem:o,removeItem:s,clear:n,key:a,get length(){return c()},setItemWithExpiry:r,getItemWithExpiry:l}}
/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.9
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function FastClick(e){"use strict";var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var a=Node.prototype.removeEventListener;"click"===t?a.call(e,t,n.hijacked||n,i):a.call(e,t,n,i)},e.addEventListener=function(t,n,i){var a=Node.prototype.addEventListener;"click"===t?a.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):a.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}function extend(e,t,n){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__super__=t.prototype,_.extend(e.prototype,n),t.prototype}var CONSOLE=function(e){return e.enabled=!1,e.log=function(t){e.enabled&&"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log(t)},e.ielog=function(t){if(e.enabled&&"undefined"!=typeof console&&"undefined"!=typeof console.log){for(var n in console.log("====   IE object output:  ===="),t)console.log("["+n+"]="+t[n]);console.log("==== end IE object output ====")}},e}(CONSOLE||{});for(var k in"undefined"==typeof window.console&&(window.console=CONSOLE),"serviceWorker"in navigator&&(navigator.serviceWorker.controller?CONSOLE.log("Active GoConqr service worker found, no need to register"):navigator.serviceWorker.register("/serviceworker.js",{scope:"/"}).then(function(){CONSOLE.log("GoConqr service worker successfully registered.")})["catch"](function(e){CONSOLE.log("[GoConqr] Failed to register service worker."+e)})),
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t,n){var i,a,s=(n=n||we).createElement("script");if(s.text=e,t)for(i in xe)(a=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,a);n.head.appendChild(s).parentNode.removeChild(s)}function i(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?he[pe.call(e)]||"object":typeof e}function a(e){var t=!!e&&"length"in e&&e.length,n=i(e);return!be(e)&&!ye(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return be(t)?Te.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?Te.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Te.grep(e,function(e){return _e.call(t,e)>-1!==n}):Te.filter(t,e,n)}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return Te.each(e.match($e)||[],function(e,n){t[n]=!0}),t}function c(e){return e}function d(e){throw e}function u(e,t,n,i){var a;try{e&&be(a=e.promise)?a.call(e).done(t).fail(n):e&&be(a=e.then)?a.call(e,t,n):t.apply(undefined,[e].slice(i))}catch(e){n.apply(undefined,[e])}}function _(){we.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),Te.ready()}function h(e,t){return t.toUpperCase()}function p(e){return e.replace(je,"ms-").replace(Le,h)}function f(){this.expando=Te.expando+f.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:He.test(e)?JSON.parse(e):e)}function g(e,t,n){var i;if(n===undefined&&1===e.nodeType)if(i="data-"+t.replace(Ve,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=m(n)}catch(a){}qe.set(e,t,n)}else n=undefined;return n}function v(e,t,n,i){var a,s,o=20,r=i?function(){return i.cur()}:function(){return Te.css(e,t,"")},l=r(),c=n&&n[3]||(Te.cssNumber[t]?"":"px"),d=e.nodeType&&(Te.cssNumber[t]||"px"!==c&&+l)&&Ue.exec(Te.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;o--;)Te.style(e,t,d+c),(1-s)*(1-(s=r()/l||.5))<=0&&(o=0),d/=s;d*=2,Te.style(e,t,d+c),n=n||[]}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}function b(e){var t,n=e.ownerDocument,i=e.nodeName,a=Ke[i];return a||(t=n.body.appendChild(n.createElement(i)),a=Te.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),Ke[i]=a,a)}function y(e,t){for(var n,i,a=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(a[s]=Fe.get(i,"display")||null,a[s]||(i.style.display="")),""===i.style.display&&Qe(i)&&(a[s]=b(i))):"none"!==n&&(a[s]="none",Fe.set(i,"display",n)));for(s=0;s<o;s++)null!=a[s]&&(e[s].style.display=a[s]);return e}function w(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],t===undefined||t&&s(e,t)?Te.merge([e],n):n}function x(e,t){for(var n=0,i=e.length;n<i;n++)Fe.set(e[n],"globalEval",!t||Fe.get(t[n],"globalEval"))}function S(e,t,n,a,s){for(var o,r,l,c,d,u,_=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===i(o))Te.merge(h,o.nodeType?[o]:o);else if(st.test(o)){for(r=r||_.appendChild(t.createElement("div")),l=(nt.exec(o)||["",""])[1].toLowerCase(),c=at[l]||at._default,r.innerHTML=c[1]+Te.htmlPrefilter(o)+c[2],u=c[0];u--;)r=r.lastChild;Te.merge(h,r.childNodes),(r=_.firstChild).textContent=""}else h.push(t.createTextNode(o));for(_.textContent="",p=0;o=h[p++];)if(a&&Te.inArray(o,a)>-1)s&&s.push(o);else if(d=Xe(o),r=w(_.appendChild(o),"script"),d&&x(r),n)for(u=0;o=r[u++];)it.test(o.type||"")&&n.push(o);return _}function T(){return!0}function M(){return!1}function C(e,t){return e===k()==("focus"===t)}function k(){try{return we.activeElement}catch(e){}}function E(e,t,n,i,a,s){var o,r;if("object"==typeof t){for(r in"string"!=typeof n&&(i=i||n,n=undefined),t)E(e,r,n,i,t[r],s);return e}if(null==i&&null==a?(a=n,i=n=undefined):null==a&&("string"==typeof n?(a=i,i=undefined):(a=i,i=n,n=undefined)),!1===a)a=M;else if(!a)return e;return 1===s&&(o=a,(a=function(e){return Te().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=Te.guid++)),e.each(function(){Te.event.add(this,t,a,i,n)})}function A(e,t,n){n?(Fe.set(e,t,!1),Te.event.add(e,t,{namespace:!1,handler:function(e){var i,a,s=Fe.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(Te.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=ce.call(arguments),Fe.set(this,t,s),i=n(this,t),this[t](),s!==(a=Fe.get(this,t))||i?Fe.set(this,t,!1):a={},s!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else s.length&&(Fe.set(this,t,{value:Te.event.trigger(Te.extend(s[0],Te.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):Fe.get(e,t)===undefined&&Te.event.add(e,t,T)}function I(e,t){return s(e,"table")&&s(11!==t.nodeType?t:t.firstChild,"tr")&&Te(e).children("tbody")[0]||e}function D(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function P(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function R(e,t){var n,i,a,s,o,r;if(1===t.nodeType){if(Fe.hasData(e)&&(r=Fe.get(e).events))for(a in Fe.remove(t,"handle events"),r)for(n=0,i=r[a].length;n<i;n++)Te.event.add(t,a,r[a][n]);qe.hasData(e)&&(s=qe.access(e),o=Te.extend({},s),qe.set(t,o))}}function $(e,t){var n=t.nodeName.toLowerCase();"input"===n&&tt.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function O(e,t,i,a){t=de(t);var s,o,r,l,c,d,u=0,_=e.length,h=_-1,p=t[0],f=be(p);if(f||_>1&&"string"==typeof p&&!ve.checkClone&&dt.test(p))return e.each(function(n){var s=e.eq(n);f&&(t[0]=p.call(this,n,s.html())),O(s,t,i,a)});if(_&&(o=(s=S(t,e[0].ownerDocument,!1,e,a)).firstChild,1===s.childNodes.length&&(s=o),o||a)){for(l=(r=Te.map(w(s,"script"),D)).length;u<_;u++)c=s,u!==h&&(c=Te.clone(c,!0,!0),l&&Te.merge(r,w(c,"script"))),i.call(e[u],c,u);if(l)for(d=r[r.length-1].ownerDocument,Te.map(r,P),u=0;u<l;u++)c=r[u],it.test(c.type||"")&&!Fe.access(c,"globalEval")&&Te.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?Te._evalUrl&&!c.noModule&&Te._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):n(c.textContent.replace(ut,""),c,d))}return e}function z(e,t,n){for(var i,a=t?Te.filter(t,e):e,s=0;null!=(i=a[s]);s++)n||1!==i.nodeType||Te.cleanData(w(i)),i.parentNode&&(n&&Xe(i)&&x(w(i,"script")),i.parentNode.removeChild(i));return e}function N(e,t,n){var i,a,s,o,r=e.style;return(n=n||ht(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||Xe(e)||(o=Te.style(e,t)),!ve.pixelBoxStyles()&&_t.test(o)&&ft.test(t)&&(i=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=i,r.minWidth=a,r.maxWidth=s)),o!==undefined?o+"":o}function j(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function L(e){for(var t=e[0].toUpperCase()+e.slice(1),n=mt.length;n--;)if((e=mt[n]+t)in gt)return e}function B(e){var t=Te.cssProps[e]||vt[e];return t||(e in gt?e:vt[e]=L(e)||e)}function F(e,t,n){var i=Ue.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function q(e,t,n,i,a,s){var o="width"===t?1:0,r=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=Te.css(e,n+We[o],!0,a)),i?("content"===n&&(l-=Te.css(e,"padding"+We[o],!0,a)),"margin"!==n&&(l-=Te.css(e,"border"+We[o]+"Width",!0,a))):(l+=Te.css(e,"padding"+We[o],!0,a),"padding"!==n?l+=Te.css(e,"border"+We[o]+"Width",!0,a):r+=Te.css(e,"border"+We[o]+"Width",!0,a));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-r-.5))||0),l}function H(e,t,n){var i=ht(e),a=(!ve.boxSizingReliable()||n)&&"border-box"===Te.css(e,"boxSizing",!1,i),o=a,r=N(e,t,i),l="offset"+t[0].toUpperCase()+t.slice(1);if(_t.test(r)){if(!n)return r;r="auto"}return(!ve.boxSizingReliable()&&a||!ve.reliableTrDimensions()&&s(e,"tr")||"auto"===r||!parseFloat(r)&&"inline"===Te.css(e,"display",!1,i))&&e.getClientRects().length&&(a="border-box"===Te.css(e,"boxSizing",!1,i),(o=l in e)&&(r=e[l])),(r=parseFloat(r)||0)+q(e,t,n||(a?"border":"content"),o,i,r)+"px"}function V(e,t,n,i,a){return new V.prototype.init(e,t,n,i,a)}function G(){Tt&&(!1===we.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(G):e.setTimeout(G,Te.fx.interval),Te.fx.tick())}function U(){return e.setTimeout(function(){St=undefined}),St=Date.now()}function W(e,t){var n,i=0,a={height:e};for(t=t?1:0;i<4;i+=2-t)a["margin"+(n=We[i])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function Y(e,t,n){for(var i,a=(Q.tweeners[t]||[]).concat(Q.tweeners["*"]),s=0,o=a.length;s<o;s++)if(i=a[s].call(n,t,e))return i}function X(e,t,n){var i,a,s,o,r,l,c,d,u="width"in t||"height"in t,_=this,h={},p=e.style,f=e.nodeType&&Qe(e),m=Fe.get(e,"fxshow");for(i in n.queue||(null==(o=Te._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,_.always(function(){_.always(function(){o.unqueued--,Te.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[i],Mt.test(a)){if(delete t[i],s=s||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||m[i]===undefined)continue;f=!0}h[i]=m&&m[i]||Te.style(e,i)}if((l=!Te.isEmptyObject(t))||!Te.isEmptyObject(h))for(i in u&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Fe.get(e,"display")),"none"===(d=Te.css(e,"display"))&&(c?d=c:(y([e],!0),c=e.style.display||c,d=Te.css(e,"display"),y([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===Te.css(e,"float")&&(l||(_.done(function(){p.display=c}),null==c&&(d=p.display,c="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",_.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(m?"hidden"in m&&(f=m.hidden):m=Fe.access(e,"fxshow",{display:c}),s&&(m.hidden=!f),f&&y([e],!0),_.done(function(){for(i in f||y([e]),Fe.remove(e,"fxshow"),h)Te.style(e,i,h[i])})),l=Y(f?m[i]:0,i,_),i in m||(m[i]=l.start,f&&(l.end=l.start,l.start=0))}function J(e,t){var n,i,a,s,o;for(n in e)if(a=t[i=p(n)],s=e[n],Array.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(o=Te.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=a);else t[i]=a}function Q(e,t,n){var i,a,s=0,o=Q.prefilters.length,r=Te.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=St||U(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(i);return r.notifyWith(e,[c,i,n]),i<1&&o?n:(o||r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:Te.extend({},t),opts:Te.extend(!0,{specialEasing:{},easing:Te.easing._default},n),originalProperties:t,originalOptions:n,startTime:St||U(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Te.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),d=c.props;for(J(d,c.opts.specialEasing);s<o;s++)if(i=Q.prefilters[s].call(c,e,d,c.opts))return be(i.stop)&&(Te._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return Te.map(d,Y,c),be(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Te.fx.timer(Te.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function K(e){return(e.match($e)||[]).join(" ")}function Z(e){return e.getAttribute&&e.getAttribute("class")||""}function ee(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($e)||[]}function te(e,t,n,a){var s;if(Array.isArray(t))Te.each(t,function(t,i){n||Nt.test(e)?a(e,i):te(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,a)});else if(n||"object"!==i(t))a(e,t);else for(s in t)te(e+"["+s+"]",t[s],n,a)}function ne(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,s=t.toLowerCase().match($e)||[];if(be(n))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function ie(e,t,n,i){function a(r){var l;return s[r]=!0,Te.each(e[r]||[],function(e,r){var c=r(t,n,i);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var s={},o=e===Xt;return a(t.dataTypes[0])||!s["*"]&&a("*")}function ae(e,t){var n,i,a=Te.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&Te.extend(!0,e,i),e}function se(e,t,n){for(var i,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in r)if(r[a]&&r[a].test(i)){l.unshift(a);break}if(l[0]in n)s=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}function oe(e,t,n,i){var a,s,o,r,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=d.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(a in c)if((r=a.split(" "))[1]===s&&(o=c[l+" "+r[0]]||c["* "+r[0]])){!0===o?o=c[a]:!0!==c[a]&&(s=r[0],d.unshift(r[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}var re=[],le=Object.getPrototypeOf,ce=re.slice,de=re.flat?function(e){return re.flat.call(e)}:function(e){return re.concat.apply([],e)},ue=re.push,_e=re.indexOf,he={},pe=he.toString,fe=he.hasOwnProperty,me=fe.toString,ge=me.call(Object),ve={},be=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},ye=function(e){return null!=e&&e===e.window},we=e.document,xe={type:!0,src:!0,nonce:!0,noModule:!0},Se="3.5.1",Te=function(e,t){return new Te.fn.init(e,t)};Te.fn=Te.prototype={jquery:Se,constructor:Te,length:0,toArray:function(){return ce.call(this)},get:function(e){return null==e?ce.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Te.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Te.each(this,e)},map:function(e){return this.pushStack(Te.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ce.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Te.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(Te.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ue,sort:re.sort,splice:re.splice},Te.extend=Te.fn.extend=function(){var e,t,n,i,a,s,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||be(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(e=arguments[r]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(c&&i&&(Te.isPlainObject(i)||(a=Array.isArray(i)))?(n=o[t],s=a&&!Array.isArray(n)?[]:a||Te.isPlainObject(n)?n:{},a=!1,o[t]=Te.extend(c,s,i)):i!==undefined&&(o[t]=i));return o},Te.extend({expando:"jQuery"+(Se+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==pe.call(e))&&(!(t=le(e))||"function"==typeof(n=fe.call(t,"constructor")&&t.constructor)&&me.call(n)===ge)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){n(e,{nonce:t&&t.nonce},i)},each:function(e,t){var n,i=0;if(a(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?Te.merge(n,"string"==typeof e?[e]:e):ue.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:_e.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;i<n;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,n){for(var i=[],a=0,s=e.length,o=!n;a<s;a++)!t(e[a],a)!==o&&i.push(e[a]);return i},map:function(e,t,n){var i,s,o=0,r=[];if(a(e))for(i=e.length;o<i;o++)null!=(s=t(e[o],o,n))&&r.push(s);else for(o in e)null!=(s=t(e[o],o,n))&&r.push(s);return de(r)},guid:1,support:ve}),"function"==typeof Symbol&&(Te.fn[Symbol.iterator]=re[Symbol.iterator]),Te.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){he["[object "+t+"]"]=t.toLowerCase()});var Me=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(e){function t(e,t,n,i){var a,s,o,r,l,c,d,_=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&(P(t),t=t||R,O)){if(11!==p&&(l=be.exec(e)))if(a=l[1]){if(9===p){if(!(o=t.getElementById(a)))return n;if(o.id===a)return n.push(o),n}else if(_&&(o=_.getElementById(a))&&L(t,o)&&o.id===a)return n.push(o),n}else{if(l[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(x.qsa&&!W[e+" "]&&(!z||!z.test(e))&&(1!==p||"object"!==t.nodeName.toLowerCase())){if(d=e,_=t,1===p&&(ue.test(e)||de.test(e))){for((_=ye.test(e)&&u(t.parentNode)||t)===t&&x.scope||((r=t.getAttribute("id"))?r=r.replace(Se,Te):t.setAttribute("id",r=B)),s=(c=C(e)).length;s--;)c[s]=(r?"#"+r:":scope")+" "+h(c[s]);d=c.join(",")}try{return Z.apply(n,_.querySelectorAll(d)),n}catch(f){W(e,!0)}finally{r===B&&t.removeAttribute("id")}}}return E(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function a(e){var t=R.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function d(e){return i(function(t){return t=+t,i(function(n,i){for(var a,s=e([],n.length,t),o=s.length;o--;)n[a=s[o]]&&(n[a]=!(i[a]=n[a]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function _(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,a=t.next,s=a||i,o=n&&"parentNode"===s,r=H++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,l){var c,d,u,_=[q,r];if(l){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(d=(u=t[B]||(t[B]={}))[t.uniqueID]||(u[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=d[s])&&c[0]===q&&c[1]===r)return _[2]=c[2];if(d[s]=_,_[2]=e(t,n,l))return!0}return!1}}function f(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var a=0,s=n.length;a<s;a++)t(e,n[a],i);return i}function g(e,t,n,i,a){for(var s,o=[],r=0,l=e.length,c=null!=t;r<l;r++)(s=e[r])&&(n&&!n(s,i,a)||(o.push(s),c&&t.push(r)));return o}function v(e,t,n,a,s,o){return a&&!a[B]&&(a=v(a)),s&&!s[B]&&(s=v(s,o)),i(function(i,o,r,l){var c,d,u,_=[],h=[],p=o.length,f=i||m(t||"*",r.nodeType?[r]:r,[]),v=!e||!i&&t?f:g(f,_,e,r,l),b=n?s||(i?e:p||a)?[]:o:v;if(n&&n(v,b,r,l),a)for(c=g(b,h),a(c,[],r,l),d=c.length;d--;)(u=c[d])&&(b[h[d]]=!(v[h[d]]=u));if(i){if(s||e){if(s){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(v[d]=u);s(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=s?te(i,u):_[d])>-1&&(i[c]=!(o[c]=u))}}else b=g(b===o?b.splice(p,b.length):b),s?s(null,o,b,l):Z.apply(o,b)})}function b(e){for(var t,n,i,a=e.length,s=S.relative[e[0].type],o=s||S.relative[" "],r=s?1:0,l=p(function(e){return e===t},o,!0),c=p(function(e){return te(t,e)>-1},o,!0),d=[function(e,n,i){var a=!s&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,a}];r<a;r++)if(n=S.relative[e[r].type])d=[p(f(d),n)];else{if((n=S.filter[e[r].type].apply(null,e[r].matches))[B]){for(i=++r;i<a&&!S.relative[e[i].type];i++);return v(r>1&&f(d),r>1&&h(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(le,"$1"),n,r<i&&b(e.slice(r,i)),i<a&&b(e=e.slice(i)),i<a&&h(e))}d.push(n)}return f(d)}function y(e,n){var a=n.length>0,s=e.length>0,o=function(i,o,r,l,c){var d,u,_,h=0,p="0",f=i&&[],m=[],v=A,b=i||s&&S.find.TAG("*",c),y=q+=null==v?1:Math.random()||.1,w=b.length;for(c&&(A=o==R||o||c);p!==w&&null!=(d=b[p]);p++){if(s&&d){for(u=0,o||d.ownerDocument==R||(P(d),r=!O);_=e[u++];)if(_(d,o||R,r)){l.push(d);break}c&&(q=y)}a&&((d=!_&&d)&&h--,i&&f.push(d))}if(h+=p,a&&p!==h){for(u=0;_=n[u++];)_(f,m,o,r);if(i){if(h>0)for(;p--;)f[p]||m[p]||(m[p]=Q.call(l));m=g(m)}Z.apply(l,m),c&&!i&&m.length>0&&h+n.length>1&&t.uniqueSort(l)}return c&&(q=y,A=v),f};return a?i(o):o}var w,x,S,T,M,C,k,E,A,I,D,P,R,$,O,z,N,j,L,B="sizzle"+1*new Date,F=e.document,q=0,H=0,V=n(),G=n(),U=n(),W=n(),Y=function(e,t){return e===t&&(D=!0),0},X={}.hasOwnProperty,J=[],Q=J.pop,K=J.push,Z=J.push,ee=J.slice,te=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ae="(?:\\\\[\\da-fA-F]{1,6}"+ie+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",se="\\["+ie+"*("+ae+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+ie+"*\\]",oe=":("+ae+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",re=new RegExp(ie+"+","g"),le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ce=new RegExp("^"+ie+"*,"+ie+"*"),de=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp(ie+"|>"),_e=new RegExp(oe),he=new RegExp("^"+ae+"$"),pe={ID:new RegExp("^#("+ae+")"),CLASS:new RegExp("^\\.("+ae+")"),TAG:new RegExp("^("+ae+"|[*])"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/HTML$/i,me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=new RegExp("\\\\[\\da-fA-F]{1,6}"+ie+"?|\\\\([^\\r\\n\\f])","g"),xe=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Me=function(){P()},Ce=p(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Z.apply(J=ee.call(F.childNodes),F.childNodes),J[F.childNodes.length].nodeType}catch(ke){Z={apply:J.length?function(e,t){K.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}for(w in x=t.support={},M=t.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!fe.test(t||n&&n.nodeName||"HTML")},P=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!=R&&9===i.nodeType&&i.documentElement?($=(R=i).documentElement,O=!M(R),F!=R&&(n=R.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Me,!1):n.attachEvent&&n.attachEvent("onunload",Me)),x.scope=a(function(e){return $.appendChild(e).appendChild(R.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),x.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=a(function(e){return e.appendChild(R.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(R.getElementsByClassName),x.getById=a(function(e){return $.appendChild(e).id=B,!R.getElementsByName||!R.getElementsByName(B).length}),x.getById?(S.filter.ID=function(e){var t=e.replace(we,xe);return function(e){return e.getAttribute("id")===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}}):(S.filter.ID=function(e){var t=e.replace(we,xe);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n,i,a,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(a=t.getElementsByName(e),i=0;s=a[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),S.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},S.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&O)return t.getElementsByClassName(e)},N=[],z=[],(x.qsa=ve.test(R.querySelectorAll))&&(a(function(e){var t;$.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||z.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll("[id~="+B+"-]").length||z.push("~="),(t=R.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||z.push("\\["+ie+"*name"+ie+"*="+ie+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||z.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||z.push(".#.+[+~]"),e.querySelectorAll("\\\f"),z.push("[\\r\\n\\f]")}),a(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=R.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&z.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&z.push(":enabled",":disabled"),$.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&z.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),z.push(",.*:")})),(x.matchesSelector=ve.test(j=$.matches||$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&a(function(e){x.disconnectedMatch=j.call(e,"*"),j.call(e,"[s!='']:x"),N.push("!=",oe)}),z=z.length&&new RegExp(z.join("|")),N=N.length&&new RegExp(N.join("|")),t=ve.test($.compareDocumentPosition),L=t||ve.test($.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!x.sortDetached&&t.compareDocumentPosition(e)===n?e==R||e.ownerDocument==F&&L(F,e)?-1:t==R||t.ownerDocument==F&&L(F,t)?1:I?te(I,e)-te(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,i=0,a=e.parentNode,s=t.parentNode,r=[e],l=[t];if(!a||!s)return e==R?-1:t==R?1:a?-1:s?1:I?te(I,e)-te(I,t):0;if(a===s)return o(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;r[i]===l[i];)i++;return i?o(r[i],l[i]):r[i]==F?-1:l[i]==F?1:0},R):R},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(P(e),x.matchesSelector&&O&&!W[n+" "]&&(!N||!N.test(n))&&(!z||!z.test(n)))try{var i=j.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(ke){W(n,!0)}return t(n,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!=R&&P(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=R&&P(e);var n=S.attrHandle[t.toLowerCase()],i=n&&X.call(S.attrHandle,t.toLowerCase())?n(e,t,!O):undefined;return i!==undefined?i:x.attributes||!O?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(Se,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,a=0;if(D=!x.detectDuplicates,I=!x.sortStable&&e.slice(0),e.sort(Y),D){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return I=null,e},T=t.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=T(t);return n},(S=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(we,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&_e.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(a){var s=t.attr(a,e);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(re," ")+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,_,h,p,f=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=r&&t.nodeName.toLowerCase(),v=!l&&!r,b=!1;if(m){if(s){for(;f;){for(_=t;_=_[f];)if(r?_.nodeName.toLowerCase()===g:1===_.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&v){for(b=(h=(c=(d=(u=(_=m)[B]||(_[B]={}))[_.uniqueID]||(u[_.uniqueID]={}))[e]||[])[0]===q&&c[1])&&c[2],_=h&&m.childNodes[h];_=++h&&_&&_[f]||(b=h=0)||p.pop();)if(1===_.nodeType&&++b&&_===t){d[e]=[q,h,b];break}}else if(v&&(b=h=(c=(d=(u=(_=t)[B]||(_[B]={}))[_.uniqueID]||(u[_.uniqueID]={}))[e]||[])[0]===q&&c[1]),!1===b)for(;(_=++h&&_&&_[f]||(b=h=0)||p.pop())&&((r?_.nodeName.toLowerCase()!==g:1!==_.nodeType)||!++b||(v&&((d=(u=_[B]||(_[B]={}))[_.uniqueID]||(u[_.uniqueID]={}))[e]=[q,b]),_!==t)););return(b-=a)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,n){var a,s=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[B]?s(n):s.length>1?(a=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=s(e,n),o=a.length;o--;)e[i=te(e,a[o])]=!(t[i]=a[o])}):function(e){return s(e,0,a)}):s}},pseudos:{not:i(function(e){var t=[],n=[],a=k(e.replace(le,"$1"));return a[B]?i(function(e,t,n,i){for(var s,o=a(e,null,i,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))}):function(e,i,s){return t[0]=e,a(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,xe),function(t){return(t.textContent||T(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,xe).toLowerCase(),function(t){var n;do{if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===$},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,n){return[n<0?n+t:n]}),even:d(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:d(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:d(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:d(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=S.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[w]=r(w);for(w in{submit:!0,reset:!0})S.pseudos[w]=l(w);return _.prototype=S.filters=S.pseudos,S.setFilters=new _,C=t.tokenize=function(e,n){var i,a,s,o,r,l,c,d=G[e+" "];if(d)return n?0:d.slice(0);for(r=e,l=[],c=S.preFilter;r;){for(o in i&&!(a=ce.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=de.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(le," ")}),r=r.slice(i.length)),S.filter)!(a=pe[o].exec(r))||c[o]&&!(a=c[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return n?r.length:r?t.error(e):G(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],a=[],s=U[e+" "];if(!s){for(t||(t=C(e)),n=t.length;n--;)(s=b(t[n]))[B]?i.push(s):a.push(s);(s=U(e,y(a,i))).selector=e}return s},E=t.select=function(e,t,n,i){var a,s,o,r,l,c="function"==typeof e&&e,d=!i&&C(e=c.selector||e);if(n=n||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&O&&S.relative[s[1].type]){if(!(t=(S.find.ID(o.matches[0].replace(we,xe),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=pe.needsContext.test(e)?0:s.length;a--&&(o=s[a],!S.relative[r=o.type]);)if((l=S.find[r])&&(i=l(o.matches[0].replace(we,xe),ye.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(a,1),!(e=i.length&&h(s)))return Z.apply(n,i),n;break}}return(c||k(e,d))(i,t,!O,n,!t||ye.test(e)&&u(t.parentNode)||t),n},x.sortStable=B.split("").sort(Y).join("")===B,x.detectDuplicates=!!D,P(),x.sortDetached=a(function(e){return 1&e.compareDocumentPosition(R.createElement("fieldset"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(ne,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Te.find=Me,Te.expr=Me.selectors,Te.expr[":"]=Te.expr.pseudos,Te.uniqueSort=Te.unique=Me.uniqueSort,Te.text=Me.getText,Te.isXMLDoc=Me.isXML,Te.contains=Me.contains,Te.escapeSelector=Me.escape;var Ce=function(e,t,n){for(var i=[],a=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Te(e).is(n))break;i.push(e)}return i},ke=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ee=Te.expr.match.needsContext,Ae=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Te.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Te.find.matchesSelector(i,e)?[i]:[]:Te.find.matches(e,Te.grep(t,function(e){return 1===e.nodeType}))},Te.fn.extend({find:function(e){var t,n,i=this.length,a=this;if("string"!=typeof e)return this.pushStack(Te(e).filter(function(){for(t=0;t<i;t++)if(Te.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)Te.find(e,a[t],n);return i>1?Te.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&Ee.test(e)?Te(e):e||[],!1).length}});var Ie,De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Te.fn.init=function(e,t,n){var i,a;if(!e)return this;if(n=n||Ie,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:De.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof Te?t[0]:t,Te.merge(this,Te.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:we,!0)),Ae.test(i[1])&&Te.isPlainObject(t))for(i in t)be(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(a=we.getElementById(i[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):be(e)?n.ready!==undefined?n.ready(e):e(Te):Te.makeArray(e,this)}).prototype=Te.fn,Ie=Te(we);var Pe=/^(?:parents|prev(?:Until|All))/,Re={children:!0,contents:!0,next:!0,prev:!0};Te.fn.extend({has:function(e){var t=Te(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Te.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,a=this.length,s=[],o="string"!=typeof e&&Te(e);if(!Ee.test(e))for(;i<a;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&Te.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?Te.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?_e.call(Te(e),this[0]):_e.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Te.uniqueSort(Te.merge(this.get(),Te(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Te.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ce(e,"parentNode")},parentsUntil:function(e,t,n){return Ce(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Ce(e,"nextSibling")},prevAll:function(e){return Ce(e,"previousSibling")},nextUntil:function(e,t,n){return Ce(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ce(e,"previousSibling",n)},siblings:function(e){return ke((e.parentNode||{}).firstChild,e)},children:function(e){return ke(e.firstChild)},contents:function(e){return null!=e.contentDocument&&le(e.contentDocument)?e.contentDocument:(s(e,"template")&&(e=e.content||e),Te.merge([],e.childNodes))}},function(e,t){Te.fn[e]=function(n,i){var a=Te.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=Te.filter(i,a)),this.length>1&&(Re[e]||Te.uniqueSort(a),Pe.test(e)&&a.reverse()),this.pushStack(a)}});var $e=/[^\x20\t\r\n\f]+/g;Te.Callbacks=function(e){e="string"==typeof e?l(e):Te.extend({},e);var t,n,a,s,o=[],r=[],c=-1,d=function(){for(s=s||e.once,a=t=!0;r.length;c=-1)for(n=r.shift();++c<o.length;)!1===o[c].apply(n[0],n[1])&&e.stopOnFalse&&(c=o.length,n=!1);e.memory||(n=!1),t=!1,s&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(c=o.length-1,r.push(n)),function a(t){Te.each(t,function(t,n){be(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==i(n)&&a(n)})}(arguments),n&&!t&&d()),this},remove:function(){return Te.each(arguments,function(e,t){for(var n;(n=Te.inArray(t,o,n))>-1;)o.splice(n,1),n<=c&&c--}),this},has:function(e){return e?Te.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=r=[],n||t||(o=n=""),this},locked:function(){return!!s},fireWith:function(e,n){return s||(n=[e,(n=n||[]).slice?n.slice():n],r.push(n),t||d()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},Te.extend({Deferred:function(t){var n=[["notify","progress",Te.Callbacks("memory"),Te.Callbacks("memory"),2],["resolve","done",Te.Callbacks("once memory"),Te.Callbacks("once memory"),0,"resolved"],["reject","fail",Te.Callbacks("once memory"),Te.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var e=arguments;return Te.Deferred(function(t){Te.each(n,function(n,i){var a=be(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=a&&a.apply(this,arguments);e&&be(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,i,a){function s(t,n,i,a){return function(){var r=this,l=arguments,u=function(){var e,u;if(!(t<o)){if((e=i.apply(r,l))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,be(u)?a?u.call(e,s(o,n,c,a),s(o,n,d,a)):(o++,u.call(e,s(o,n,c,a),s(o,n,d,a),s(o,n,c,n.notifyWith))):(i!==c&&(r=undefined,l=[e]),(a||n.resolveWith)(r,l))}},_=a?u:function(){try{u()}catch(e){Te.Deferred.exceptionHook&&Te.Deferred.exceptionHook(e,_.stackTrace),t+1>=o&&(i!==d&&(r=undefined,l=[e]),n.rejectWith(r,l))}};t?_():(Te.Deferred.getStackHook&&(_.stackTrace=Te.Deferred.getStackHook()),e.setTimeout(_))}}var o=0;return Te.Deferred(function(e){n[0][3].add(s(0,e,be(a)?a:c,e.notifyWith)),n[1][3].add(s(0,e,be(t)?t:c)),n[2][3].add(s(0,e,be(i)?i:d))}).promise()},promise:function(e){return null!=e?Te.extend(e,a):a}},s={};return Te.each(n,function(e,t){var o=t[2],r=t[5];a[t[1]]=o.add,r&&o.add(function(){i=r},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?undefined:this,arguments),this},s[t[0]+"With"]=o.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),a=ce.call(arguments),s=Te.Deferred(),o=function(e){return function(n){i[e]=this,a[e]=arguments.length>1?ce.call(arguments):n,--t||s.resolveWith(i,a)}};if(t<=1&&(u(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||be(a[n]&&a[n].then)))return s.then();for(;n--;)u(a[n],o(n),s.reject);return s.promise()}});var Oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Te.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Oe.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},Te.readyException=function(t){e.setTimeout(function(){throw t})};var ze=Te.Deferred();Te.fn.ready=function(e){return ze.then(e)["catch"](function(e){Te.readyException(e)}),this},Te.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Te.readyWait:Te.isReady)||(Te.isReady=!0,!0!==e&&--Te.readyWait>0||ze.resolveWith(we,[Te]))}}),Te.ready.then=ze.then,"complete"===we.readyState||"loading"!==we.readyState&&!we.documentElement.doScroll?e.setTimeout(Te.ready):(we.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var Ne=function(e,t,n,a,s,o,r){var l=0,c=e.length,d=null==n;if("object"===i(n))for(l in s=!0,n)Ne(e,t,l,n[l],!0,o,r);else if(a!==undefined&&(s=!0,be(a)||(r=!0),d&&(r?(t.call(e,a),t=null):(d=t,t=function(e,t,n){return d.call(Te(e),n)})),t))for(;l<c;l++)t(e[l],n,r?a:a.call(e[l],l,t(e[l],n)));return s?e:d?t.call(e):c?t(e[0],n):o},je=/^-ms-/,Le=/-([a-z])/g,Be=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};f.uid=1,f.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Be(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,a=this.cache(e);if("string"==typeof t)a[p(t)]=n;else for(i in t)a[p(i)]=t[i];return a},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][p(t)]},access:function(e,t,n){return t===undefined||t&&"string"==typeof t&&n===undefined?this.get(e,t):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,i=e[this.expando];if(i!==undefined){if(t!==undefined){n=(t=Array.isArray(t)?t.map(p):(t=p(t))in i?[t]:t.match($e)||[]).length;for(;n--;)delete i[t[n]]}(t===undefined||Te.isEmptyObject(i))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!Te.isEmptyObject(t)}};var Fe=new f,qe=new f,He=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ve=/[A-Z]/g;Te.extend({hasData:function(e){return qe.hasData(e)||Fe.hasData(e)},data:function(e,t,n){return qe.access(e,t,n)},removeData:function(e,t){qe.remove(e,t)},_data:function(e,t,n){return Fe.access(e,t,n)},_removeData:function(e,t){Fe.remove(e,t)}}),Te.fn.extend({data:function(e,t){var n,i,a,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length&&(a=qe.get(s),1===s.nodeType&&!Fe.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=p(i.slice(5)),g(s,i,a[i]));Fe.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){qe.set(this,e)}):Ne(this,function(t){var n;if(s&&t===undefined)return(n=qe.get(s,e))!==undefined?n:(n=g(s,e))!==undefined?n:void 0;this.each(function(){qe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){qe.remove(this,e)})}}),Te.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Fe.get(e,t),n&&(!i||Array.isArray(n)?i=Fe.access(e,t,Te.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=Te.queue(e,t),i=n.length,a=n.shift(),s=Te._queueHooks(e,t),o=function(){Te.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete s.stop,a.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Fe.get(e,n)||Fe.access(e,n,{empty:Te.Callbacks("once memory").add(function(){Fe.remove(e,[t+"queue",n])})})}}),Te.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Te.queue(this[0],e):t===undefined?this:this.each(function(){var n=Te.queue(this,e,t);Te._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Te.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Te.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=Te.Deferred(),s=this,o=this.length,r=function(){--i||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";o--;)(n=Fe.get(s[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),a.promise(t)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ue=new RegExp("^(?:([+-])=|)("+Ge+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Ye=we.documentElement,Xe=function(e){return Te.contains(e.ownerDocument,e)},Je={composed:!0};Ye.getRootNode&&(Xe=function(e){return Te.contains(e.ownerDocument,e)||e.getRootNode(Je)===e.ownerDocument});var Qe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&Xe(e)&&"none"===Te.css(e,"display")},Ke={};Te.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Qe(this)?Te(this).show():Te(this).hide()})}});var Ze,et,tt=/^(?:checkbox|radio)$/i,nt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,it=/^$|^module$|\/(?:java|ecma)script/i;Ze=we.createDocumentFragment().appendChild(we.createElement("div")),(et=we.createElement("input")).setAttribute("type","radio"),et.setAttribute("checked","checked"),et.setAttribute("name","t"),Ze.appendChild(et),ve.checkClone=Ze.cloneNode(!0).cloneNode(!0).lastChild.checked,Ze.innerHTML="<textarea>x</textarea>",ve.noCloneChecked=!!Ze.cloneNode(!0).lastChild.defaultValue,Ze.innerHTML="<option></option>",ve.option=!!Ze.lastChild;var at={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,
at.th=at.td,ve.option||(at.optgroup=at.option=[1,"<select multiple='multiple'>","</select>"]);var st=/<|&#?\w+;/,ot=/^key/,rt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,lt=/^([^.]*)(?:\.(.+)|)/;Te.event={global:{},add:function(e,t,n,i,a){var s,o,r,l,c,d,u,_,h,p,f,m=Fe.get(e);if(Be(e))for(n.handler&&(n=(s=n).handler,a=s.selector),a&&Te.find.matchesSelector(Ye,a),n.guid||(n.guid=Te.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==Te&&Te.event.triggered!==t.type?Te.event.dispatch.apply(e,arguments):undefined}),c=(t=(t||"").match($e)||[""]).length;c--;)h=f=(r=lt.exec(t[c])||[])[1],p=(r[2]||"").split(".").sort(),h&&(u=Te.event.special[h]||{},h=(a?u.delegateType:u.bindType)||h,u=Te.event.special[h]||{},d=Te.extend({type:h,origType:f,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&Te.expr.match.needsContext.test(a),namespace:p.join(".")},s),(_=l[h])||((_=l[h]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(h,o)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?_.splice(_.delegateCount++,0,d):_.push(d),Te.event.global[h]=!0)},remove:function(e,t,n,i,a){var s,o,r,l,c,d,u,_,h,p,f,m=Fe.hasData(e)&&Fe.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match($e)||[""]).length;c--;)if(h=f=(r=lt.exec(t[c])||[])[1],p=(r[2]||"").split(".").sort(),h){for(u=Te.event.special[h]||{},_=l[h=(i?u.delegateType:u.bindType)||h]||[],r=r[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=_.length;s--;)d=_[s],!a&&f!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(_.splice(s,1),d.selector&&_.delegateCount--,u.remove&&u.remove.call(e,d));o&&!_.length&&(u.teardown&&!1!==u.teardown.call(e,p,m.handle)||Te.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)Te.event.remove(e,h+t[c],n,i,!0);Te.isEmptyObject(l)&&Fe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,a,s,o,r=new Array(arguments.length),l=Te.event.fix(e),c=(Fe.get(this,"events")||Object.create(null))[l.type]||[],d=Te.event.special[l.type]||{};for(r[0]=l,t=1;t<arguments.length;t++)r[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(o=Te.event.handlers.call(this,l,c),t=0;(a=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,(i=((Te.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,r))!==undefined&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,a,s,o,r=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},n=0;n<l;n++)o[a=(i=t[n]).selector+" "]===undefined&&(o[a]=i.needsContext?Te(a,this).index(c)>-1:Te.find(a,this,null,[c]).length),o[a]&&s.push(i);s.length&&r.push({elem:c,handlers:s})}return c=this,l<t.length&&r.push({elem:c,handlers:t.slice(l)}),r},addProp:function(e,t){Object.defineProperty(Te.Event.prototype,e,{enumerable:!0,configurable:!0,get:be(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Te.expando]?e:new Te.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return tt.test(t.type)&&t.click&&s(t,"input")&&A(t,"click",T),!1},trigger:function(e){var t=this||e;return tt.test(t.type)&&t.click&&s(t,"input")&&A(t,"click"),!0},_default:function(e){var t=e.target;return tt.test(t.type)&&t.click&&s(t,"input")&&Fe.get(t,"click")||s(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Te.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Te.Event=function(e,t){if(!(this instanceof Te.Event))return new Te.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?T:M,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Te.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Te.expando]=!0},Te.Event.prototype={constructor:Te.Event,isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Te.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ot.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&rt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Te.event.addProp),Te.each({focus:"focusin",blur:"focusout"},function(e,t){Te.event.special[e]={setup:function(){return A(this,e,C),!1},trigger:function(){return A(this,e),!0},delegateType:t}}),Te.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Te.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,s=e.handleObj;return a&&(a===i||Te.contains(i,a))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),Te.fn.extend({on:function(e,t,n,i){return E(this,e,t,n,i)},one:function(e,t,n,i){return E(this,e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Te(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=M),this.each(function(){Te.event.remove(this,e,n,t)})}});var ct=/<script|<style|<link/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Te.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,a,s,o,r=e.cloneNode(!0),l=Xe(e);if(!(ve.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Te.isXMLDoc(e)))for(o=w(r),i=0,a=(s=w(e)).length;i<a;i++)$(s[i],o[i]);if(t)if(n)for(s=s||w(e),o=o||w(r),i=0,a=s.length;i<a;i++)R(s[i],o[i]);else R(e,r);return(o=w(r,"script")).length>0&&x(o,!l&&w(e,"script")),r},cleanData:function(e){for(var t,n,i,a=Te.event.special,s=0;(n=e[s])!==undefined;s++)if(Be(n)){if(t=n[Fe.expando]){if(t.events)for(i in t.events)a[i]?Te.event.remove(n,i):Te.removeEvent(n,i,t.handle);n[Fe.expando]=undefined}n[qe.expando]&&(n[qe.expando]=undefined)}}}),Te.fn.extend({detach:function(e){return z(this,e,!0)},remove:function(e){return z(this,e)},text:function(e){return Ne(this,function(e){return e===undefined?Te.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return O(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||I(this,e).appendChild(e)})},prepend:function(){return O(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=I(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Te.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Te.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ct.test(e)&&!at[(nt.exec(e)||["",""])[1].toLowerCase()]){e=Te.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(Te.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return O(this,arguments,function(t){var n=this.parentNode;Te.inArray(this,e)<0&&(Te.cleanData(w(this)),n&&n.replaceChild(t,this))},e)}}),Te.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Te.fn[e]=function(e){for(var n,i=[],a=Te(e),s=a.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),Te(a[o])[t](n),ue.apply(i,n.get());return this.pushStack(i)}});var _t=new RegExp("^("+Ge+")(?!px)[a-z%]+$","i"),ht=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},pt=function(e,t,n){var i,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in i=n.call(e),t)e.style[a]=s[a];return i},ft=new RegExp(We.join("|"),"i");!function(){function t(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ye.appendChild(c).appendChild(d);var t=e.getComputedStyle(d);i="1%"!==t.top,l=12===n(t.marginLeft),d.style.right="60%",o=36===n(t.right),a=36===n(t.width),d.style.position="absolute",s=12===n(d.offsetWidth/3),Ye.removeChild(c),d=null}}function n(e){return Math.round(parseFloat(e))}var i,a,s,o,r,l,c=we.createElement("div"),d=we.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",ve.clearCloneStyle="content-box"===d.style.backgroundClip,Te.extend(ve,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,i,a;return null==r&&(t=we.createElement("table"),n=we.createElement("tr"),i=we.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",i.style.height="9px",Ye.appendChild(t).appendChild(n).appendChild(i),a=e.getComputedStyle(n),r=parseInt(a.height)>3,Ye.removeChild(t)),r}}))}();var mt=["Webkit","Moz","ms"],gt=we.createElement("div").style,vt={},bt=/^(none|table(?!-c[ea]).+)/,yt=/^--/,wt={position:"absolute",visibility:"hidden",display:"block"},xt={letterSpacing:"0",fontWeight:"400"};Te.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=N(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=p(t),l=yt.test(t),c=e.style;if(l||(t=B(r)),o=Te.cssHooks[t]||Te.cssHooks[r],n===undefined)return o&&"get"in o&&(a=o.get(e,!1,i))!==undefined?a:c[t];"string"===(s=typeof n)&&(a=Ue.exec(n))&&a[1]&&(n=v(e,t,a),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=a&&a[3]||(Te.cssNumber[r]?"":"px")),ve.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&(n=o.set(e,n,i))===undefined||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var a,s,o,r=p(t);return yt.test(t)||(t=B(r)),(o=Te.cssHooks[t]||Te.cssHooks[r])&&"get"in o&&(a=o.get(e,!0,n)),a===undefined&&(a=N(e,t,i)),"normal"===a&&t in xt&&(a=xt[t]),""===n||n?(s=parseFloat(a),!0===n||isFinite(s)?s||0:a):a}}),Te.each(["height","width"],function(e,t){Te.cssHooks[t]={get:function(e,n,i){if(n)return!bt.test(Te.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,i):pt(e,wt,function(){return H(e,t,i)})},set:function(e,n,i){var a,s=ht(e),o=!ve.scrollboxSize()&&"absolute"===s.position,r=(o||i)&&"border-box"===Te.css(e,"boxSizing",!1,s),l=i?q(e,t,i,r,s):0;return r&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-q(e,t,"border",!1,s)-.5)),l&&(a=Ue.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=Te.css(e,t)),F(e,n,l)}}}),Te.cssHooks.marginLeft=j(ve.reliableMarginLeft,function(e,t){if(t)return(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-pt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Te.each({margin:"",padding:"",border:"Width"},function(e,t){Te.cssHooks[e+t]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];i<4;i++)a[e+We[i]+t]=s[i]||s[i-2]||s[0];return a}},"margin"!==e&&(Te.cssHooks[e+t].set=F)}),Te.fn.extend({css:function(e,t){return Ne(this,function(e,t,n){var i,a,s={},o=0;if(Array.isArray(t)){for(i=ht(e),a=t.length;o<a;o++)s[t[o]]=Te.css(e,t[o],!1,i);return s}return n!==undefined?Te.style(e,t,n):Te.css(e,t)},e,t,arguments.length>1)}}),Te.Tween=V,V.prototype={constructor:V,init:function(e,t,n,i,a,s){this.elem=e,this.prop=n,this.easing=a||Te.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(Te.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.options.duration?this.pos=t=Te.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Te.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){Te.fx.step[e.prop]?Te.fx.step[e.prop](e):1!==e.elem.nodeType||!Te.cssHooks[e.prop]&&null==e.elem.style[B(e.prop)]?e.elem[e.prop]=e.now:Te.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Te.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Te.fx=V.prototype.init,Te.fx.step={};var St,Tt,Mt=/^(?:toggle|show|hide)$/,Ct=/queueHooks$/;Te.Animation=Te.extend(Q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,Ue.exec(t),n),n}]},tweener:function(e,t){be(e)?(t=e,e=["*"]):e=e.match($e);for(var n,i=0,a=e.length;i<a;i++)n=e[i],Q.tweeners[n]=Q.tweeners[n]||[],Q.tweeners[n].unshift(t)},prefilters:[X],prefilter:function(e,t){t?Q.prefilters.unshift(e):Q.prefilters.push(e)}}),Te.speed=function(e,t,n){var i=e&&"object"==typeof e?Te.extend({},e):{complete:n||!n&&t||be(e)&&e,duration:e,easing:n&&t||t&&!be(t)&&t};return Te.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in Te.fx.speeds?i.duration=Te.fx.speeds[i.duration]:i.duration=Te.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){be(i.old)&&i.old.call(this),i.queue&&Te.dequeue(this,i.queue)},i},Te.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Qe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=Te.isEmptyObject(e),s=Te.speed(t,n,i),o=function(){var t=Q(this,Te.extend({},e),s);(a||Fe.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=Te.timers,o=Fe.get(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&Ct.test(a)&&i(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(n),t=!1,s.splice(a,1));!t&&n||Te.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Fe.get(this),i=n[e+"queue"],a=n[e+"queueHooks"],s=Te.timers,o=i?i.length:0;for(n.finish=!0,Te.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Te.each(["toggle","show","hide"],function(e,t){var n=Te.fn[t];Te.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(W(t,!0),e,i,a)}}),Te.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Te.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Te.timers=[],Te.fx.tick=function(){var e,t=0,n=Te.timers;for(St=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Te.fx.stop(),St=undefined},Te.fx.timer=function(e){Te.timers.push(e),Te.fx.start()},Te.fx.interval=13,Te.fx.start=function(){Tt||(Tt=!0,G())},Te.fx.stop=function(){Tt=null},Te.fx.speeds={slow:600,fast:200,_default:400},Te.fn.delay=function(t,n){return t=Te.fx&&Te.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var a=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(a)}})},function(){var e=we.createElement("input"),t=we.createElement("select").appendChild(we.createElement("option"));e.type="checkbox",ve.checkOn=""!==e.value,ve.optSelected=t.selected,(e=we.createElement("input")).value="t",e.type="radio",ve.radioValue="t"===e.value}();var kt,Et=Te.expr.attrHandle;Te.fn.extend({attr:function(e,t){return Ne(this,Te.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Te.removeAttr(this,e)})}}),Te.extend({attr:function(e,t,n){var i,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?Te.prop(e,t,n):(1===s&&Te.isXMLDoc(e)||(a=Te.attrHooks[t.toLowerCase()]||(Te.expr.match.bool.test(t)?kt:undefined)),n!==undefined?null===n?void Te.removeAttr(e,t):a&&"set"in a&&(i=a.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(i=a.get(e,t))?i:null==(i=Te.find.attr(e,t))?undefined:i)},attrHooks:{type:{set:function(e,t){if(!ve.radioValue&&"radio"===t&&s(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,a=t&&t.match($e);if(a&&1===e.nodeType)for(;n=a[i++];)e.removeAttribute(n)}}),kt={set:function(e,t,n){return!1===t?Te.removeAttr(e,n):e.setAttribute(n,n),n}},Te.each(Te.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Et[t]||Te.find.attr;Et[t]=function(e,t,i){var a,s,o=t.toLowerCase();return i||(s=Et[o],Et[o]=a,a=null!=n(e,t,i)?o:null,Et[o]=s),a}});var At=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;Te.fn.extend({prop:function(e,t){return Ne(this,Te.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Te.propFix[e]||e]})}}),Te.extend({prop:function(e,t,n){var i,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&Te.isXMLDoc(e)||(t=Te.propFix[t]||t,a=Te.propHooks[t]),n!==undefined?a&&"set"in a&&(i=a.set(e,n,t))!==undefined?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=Te.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ve.optSelected||(Te.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Te.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Te.propFix[this.toLowerCase()]=this}),Te.fn.extend({addClass:function(e){var t,n,i,a,s,o,r,l=0;if(be(e))return this.each(function(t){Te(this).addClass(e.call(this,t,Z(this)))});if((t=ee(e)).length)for(;n=this[l++];)if(a=Z(n),i=1===n.nodeType&&" "+K(a)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a!==(r=K(i))&&n.setAttribute("class",r)}return this},removeClass:function(e){var t,n,i,a,s,o,r,l=0;if(be(e))return this.each(function(t){Te(this).removeClass(e.call(this,t,Z(this)))});if(!arguments.length)return this.attr("class","");if((t=ee(e)).length)for(;n=this[l++];)if(a=Z(n),i=1===n.nodeType&&" "+K(a)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");a!==(r=K(i))&&n.setAttribute("class",r)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):be(e)?this.each(function(n){Te(this).toggleClass(e.call(this,n,Z(this),t),t)}):this.each(function(){var t,a,s,o;if(i)for(a=0,s=Te(this),o=ee(e);t=o[a++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else e!==undefined&&"boolean"!==n||((t=Z(this))&&Fe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Fe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+K(Z(n))+" ").indexOf(t)>-1)return!0;return!1}});var Dt=/\r/g;Te.fn.extend({val:function(e){var t,n,i,a=this[0];return arguments.length?(i=be(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=i?e.call(this,n,Te(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=Te.map(a,function(e){return null==e?"":e+""})),(t=Te.valHooks[this.type]||Te.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,a,"value")!==undefined||(this.value=a))})):a?(t=Te.valHooks[a.type]||Te.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&(n=t.get(a,"value"))!==undefined?n:"string"==typeof(n=a.value)?n.replace(Dt,""):null==n?"":n:void 0}}),Te.extend({valHooks:{option:{get:function(e){var t=Te.find.attr(e,"value");return null!=t?t:K(Te.text(e))}},select:{get:function(e){var t,n,i,a=e.options,o=e.selectedIndex,r="select-one"===e.type,l=r?null:[],c=r?o+1:a.length;for(i=o<0?c:r?o:0;i<c;i++)if(((n=a[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!s(n.parentNode,"optgroup"))){if(t=Te(n).val(),r)return t;l.push(t)}return l},set:function(e,t){for(var n,i,a=e.options,s=Te.makeArray(t),o=a.length;o--;)((i=a[o]).selected=Te.inArray(Te.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),Te.each(["radio","checkbox"],function(){Te.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Te.inArray(Te(e).val(),t)>-1}},ve.checkOn||(Te.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ve.focusin="onfocusin"in e;var Pt=/^(?:focusinfocus|focusoutblur)$/,Rt=function(e){e.stopPropagation()};Te.extend(Te.event,{trigger:function(t,n,i,a){var s,o,r,l,c,d,u,_,h=[i||we],p=fe.call(t,"type")?t.type:t,f=fe.call(t,"namespace")?t.namespace.split("."):[];if(o=_=r=i=i||we,3!==i.nodeType&&8!==i.nodeType&&!Pt.test(p+Te.event.triggered)&&(p.indexOf(".")>-1&&(p=(f=p.split(".")).shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,(t=t[Te.expando]?t:new Te.Event(p,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=i),n=null==n?[t]:Te.makeArray(n,[t]),u=Te.event.special[p]||{},a||!u.trigger||!1!==u.trigger.apply(i,n))){if(!a&&!u.noBubble&&!ye(i)){for(l=u.delegateType||p,Pt.test(l+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),r=o;r===(i.ownerDocument||we)&&h.push(r.defaultView||r.parentWindow||e)}for(s=0;(o=h[s++])&&!t.isPropagationStopped();)_=o,t.type=s>1?l:u.bindType||p,(d=(Fe.get(o,"events")||Object.create(null))[t.type]&&Fe.get(o,"handle"))&&d.apply(o,n),(d=c&&o[c])&&d.apply&&Be(o)&&(t.result=d.apply(o,n),!1===t.result&&t.preventDefault());return t.type=p,a||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),n)||!Be(i)||c&&be(i[p])&&!ye(i)&&((r=i[c])&&(i[c]=null),Te.event.triggered=p,t.isPropagationStopped()&&_.addEventListener(p,Rt),i[p](),t.isPropagationStopped()&&_.removeEventListener(p,Rt),Te.event.triggered=undefined,r&&(i[c]=r)),t.result}},simulate:function(e,t,n){var i=Te.extend(new Te.Event,n,{type:e,isSimulated:!0});Te.event.trigger(i,null,t)}}),Te.fn.extend({trigger:function(e,t){return this.each(function(){Te.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Te.event.trigger(e,t,n,!0)}}),ve.focusin||Te.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Te.event.simulate(t,e.target,Te.event.fix(e))};Te.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,a=Fe.access(i,t);a||i.addEventListener(e,n,!0),Fe.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,a=Fe.access(i,t)-1;a?Fe.access(i,t,a):(i.removeEventListener(e,n,!0),Fe.remove(i,t))}}});var $t=e.location,Ot={guid:Date.now()},zt=/\?/;Te.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=undefined}return n&&!n.getElementsByTagName("parsererror").length||Te.error("Invalid XML: "+t),n};var Nt=/\[\]$/,jt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;Te.param=function(e,t){var n,i=[],a=function(e,t){var n=be(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!Te.isPlainObject(e))Te.each(e,function(){a(this.name,this.value)});else for(n in e)te(n,e[n],t,a);return i.join("&")},Te.fn.extend({serialize:function(){return Te.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Te.prop(this,"elements");return e?Te.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Te(this).is(":disabled")&&Bt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=Te(this).val();return null==n?null:Array.isArray(n)?Te.map(n,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}}):{name:t.name,value:n.replace(jt,"\r\n")}}).get()}});var Ft=/%20/g,qt=/#.*$/,Ht=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Wt=/^\/\//,Yt={},Xt={},Jt="*/".concat("*"),Qt=we.createElement("a");Qt.href=$t.href,Te.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$t.href,type:"GET",isLocal:Gt.test($t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Te.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ae(ae(e,Te.ajaxSettings),t):ae(Te.ajaxSettings,e)},ajaxPrefilter:ne(Yt),ajaxTransport:ne(Xt),ajax:function(t,n){function i(t,n,i,r){var c,_,h,y,w,x=n;d||(d=!0,l&&e.clearTimeout(l),a=undefined,o=r||"",S.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(y=se(p,S,i)),!c&&Te.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),y=oe(p,y,S,c),c?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(Te.lastModified[s]=w),(w=S.getResponseHeader("etag"))&&(Te.etag[s]=w)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=y.state,_=y.data,c=!(h=y.error))):(h=x,!t&&x||(x="error",t<0&&(t=0))),S.status=t,S.statusText=(n||x)+"",c?g.resolveWith(f,[_,x,S]):g.rejectWith(f,[S,x,h]),S.statusCode(b),b=undefined,u&&m.trigger(c?"ajaxSuccess":"ajaxError",[S,p,c?_:h]),v.fireWith(f,[S,x]),u&&(m.trigger("ajaxComplete",[S,p]),--Te.active||Te.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=undefined),n=n||{};var a,s,o,r,l,c,d,u,_,h,p=Te.ajaxSetup({},n),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?Te(f):Te.event,g=Te.Deferred(),v=Te.Callbacks("once memory"),b=p.statusCode||{},y={},w={},x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(d){if(!r)for(r={};t=Vt.exec(o);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?o:null},setRequestHeader:function(e,t){return null==d&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==d&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return a&&a.abort(t),i(0,t),this}};if(g.promise(S),p.url=((t||p.url||$t.href)+"").replace(Wt,$t.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match($e)||[""],null==p.crossDomain){c=we.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Qt.protocol+"//"+Qt.host!=c.protocol+"//"+c.host}catch(T){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Te.param(p.data,p.traditional)),ie(Yt,p,n,S),d)return S;for(_ in(u=Te.event&&p.global)&&0==Te.active++&&Te.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ut.test(p.type),s=p.url.replace(qt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ft,"+")):(h=p.url.slice(s.length),p.data&&(p.processData||"string"==typeof p.data)&&(s+=(zt.test(s)?"&":"?")+p.data,delete p.data),!1===p.cache&&(s=s.replace(Ht,"$1"),h=(zt.test(s)?"&":"?")+"_="+Ot.guid+++h),p.url=s+h),p.ifModified&&(Te.lastModified[s]&&S.setRequestHeader("If-Modified-Since",Te.lastModified[s]),Te.etag[s]&&S.setRequestHeader("If-None-Match",Te.etag[s])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Jt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(_,p.headers[_]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||d))return S.abort();if(x="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),a=ie(Xt,p,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,p]),d)return S;p.async&&p.timeout>0&&(l=e.setTimeout(function(){S.abort("timeout")},p.timeout));try{d=!1,a.send(y,i)}catch(T){if(d)throw T;i(-1,T)}}else i(-1,"No Transport");return S},getJSON:function(e,t,n){return Te.get(e,t,n,"json")},getScript:function(e,t){return Te.get(e,undefined,t,"script")}}),Te.each(["get","post"],function(e,t){Te[t]=function(e,n,i,a){return be(n)&&(a=a||i,i=n,n=undefined),Te.ajax(Te.extend({url:e,type:t,dataType:a,data:n,success:i},Te.isPlainObject(e)&&e))}}),Te.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),Te._evalUrl=function(e,t,n){return Te.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){Te.globalEval(e,t,n)}})},Te.fn.extend({wrapAll:function(e){var t;return this[0]&&(be(e)&&(e=e.call(this[0])),t=Te(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return be(e)?this.each(function(t){Te(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Te(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=be(e);return this.each(function(n){Te(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Te(this).replaceWith(this.childNodes)}),this}}),Te.expr.pseudos.hidden=function(e){return!Te.expr.pseudos.visible(e)},Te.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Te.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Kt={0:200,1223:204
},Zt=Te.ajaxSettings.xhr();ve.cors=!!Zt&&"withCredentials"in Zt,ve.ajax=Zt=!!Zt,Te.ajaxTransport(function(t){var n,i;if(ve.cors||Zt&&!t.crossDomain)return{send:function(a,s){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)r.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=i=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Kt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=n(),i=r.onerror=r.ontimeout=n("error"),r.onabort!==undefined?r.onabort=i:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{r.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),Te.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Te.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Te.globalEval(e),e}}}),Te.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Te.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,a){t=Te("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),we.head.appendChild(t[0])},abort:function(){n&&n()}}});var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;Te.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||Te.expando+"_"+Ot.guid++;return this[e]=!0,e}}),Te.ajaxPrefilter("json jsonp",function(t,n,i){var a,s,o,r=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=be(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(nn,"$1"+a):!1!==t.jsonp&&(t.url+=(zt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||Te.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},i.always(function(){s===undefined?Te(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=n.jsonpCallback,tn.push(a)),o&&be(s)&&s(o[0]),o=s=undefined}),"script"}),ve.createHTMLDocument=((en=we.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),Te.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(ve.createHTMLDocument?((i=(t=we.implementation.createHTMLDocument("")).createElement("base")).href=we.location.href,t.head.appendChild(i)):t=we),s=!n&&[],(a=Ae.exec(e))?[t.createElement(a[1])]:(a=S([e],t,s),s&&s.length&&Te(s).remove(),Te.merge([],a.childNodes)));var i,a,s},Te.fn.load=function(e,t,n){var i,a,s,o=this,r=e.indexOf(" ");return r>-1&&(i=K(e.slice(r)),e=e.slice(0,r)),be(t)?(n=t,t=undefined):t&&"object"==typeof t&&(a="POST"),o.length>0&&Te.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?Te("<div>").append(Te.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},Te.expr.pseudos.animated=function(e){return Te.grep(Te.timers,function(t){return e===t.elem}).length},Te.offset={setOffset:function(e,t,n){var i,a,s,o,r,l,c=Te.css(e,"position"),d=Te(e),u={};"static"===c&&(e.style.position="relative"),r=d.offset(),s=Te.css(e,"top"),l=Te.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(i=d.position()).top,a=i.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),be(t)&&(t=t.call(e,n,Te.extend({},r))),null!=t.top&&(u.top=t.top-r.top+o),null!=t.left&&(u.left=t.left-r.left+a),"using"in t?t.using.call(e,u):("number"==typeof u.top&&(u.top+="px"),"number"==typeof u.left&&(u.left+="px"),d.css(u))}},Te.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){Te.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],a={top:0,left:0};if("fixed"===Te.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Te.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((a=Te(e).offset()).top+=Te.css(e,"borderTopWidth",!0),a.left+=Te.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-Te.css(i,"marginTop",!0),left:t.left-a.left-Te.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Te.css(e,"position");)e=e.offsetParent;return e||Ye})}}),Te.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Te.fn[e]=function(i){return Ne(this,function(e,i,a){var s;if(ye(e)?s=e:9===e.nodeType&&(s=e.defaultView),a===undefined)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:a,n?a:s.pageYOffset):e[i]=a},e,i,arguments.length)}}),Te.each(["top","left"],function(e,t){Te.cssHooks[t]=j(ve.pixelPosition,function(e,n){if(n)return n=N(e,t),_t.test(n)?Te(e).position()[t]+"px":n})}),Te.each({Height:"height",Width:"width"},function(e,t){Te.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Te.fn[i]=function(a,s){var o=arguments.length&&(n||"boolean"!=typeof a),r=n||(!0===a||!0===s?"margin":"border");return Ne(this,function(t,n,a){var s;return ye(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):a===undefined?Te.css(t,n,r):Te.style(t,n,a,r)},t,o?a:undefined,o)}})}),Te.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Te.fn[t]=function(e){return this.on(t,e)}}),Te.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Te.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Te.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var an=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Te.proxy=function(e,t){var n,i,a;return"string"==typeof t&&(n=e[t],t=e,e=n),be(e)?(i=ce.call(arguments,2),(a=function(){return e.apply(t||this,i.concat(ce.call(arguments)))}).guid=e.guid=e.guid||Te.guid++,a):undefined},Te.holdReady=function(e){e?Te.readyWait++:Te.ready(!0)},Te.isArray=Array.isArray,Te.parseJSON=JSON.parse,Te.nodeName=s,Te.isFunction=be,Te.isWindow=ye,Te.camelCase=p,Te.type=i,Te.now=Date.now,Te.isNumeric=function(e){var t=Te.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},Te.trim=function(e){return null==e?"":(e+"").replace(an,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return Te});var sn=e.jQuery,on=e.$;return Te.noConflict=function(t){return e.$===Te&&(e.$=on),t&&e.jQuery===Te&&(e.jQuery=sn),Te},void 0===t&&(e.jQuery=e.$=Te),Te}),
/*
 Copyright (C) Federico Zivolo 2019
 Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,function(){"use strict";function e(e){return e&&"[object Function]"==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function n(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function i(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var a=t(e),s=a.overflow,o=a.overflowX,r=a.overflowY;return/(auto|scroll|overlay)/.test(s+r+o)?e:i(n(e))}function a(e){return e&&e.referenceNode?e.referenceNode:e}function s(e){return 11===e?ae:10===e?se:ae||se}function o(e){if(!e)return document.documentElement;for(var n=s(10)?document.body:null,i=e.offsetParent||null;i===n&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var a=i&&i.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===t(i,"position")?o(i):i:e?e.ownerDocument.documentElement:document.documentElement}function r(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||o(e.firstElementChild)===e)}function l(e){return null===e.parentNode?e:l(e.parentNode)}function c(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,a=n?t:e,s=document.createRange();s.setStart(i,0),s.setEnd(a,0);var d=s.commonAncestorContainer;if(e!==d&&t!==d||i.contains(a))return r(d)?d:o(d);var u=l(e);return u.host?c(u.host,t):c(e,l(t).host)}function d(e){var t="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[t]}return e[t]}function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=d(t,"top"),a=d(t,"left"),s=n?-1:1;return e.top+=i*s,e.bottom+=i*s,e.left+=a*s,e.right+=a*s,e}function _(e,t){var n="x"===t?"Left":"Top",i="Left"==n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function h(e,t,n,i){return ee(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],s(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function p(e){var t=e.body,n=e.documentElement,i=s(10)&&getComputedStyle(n);return{height:h("Height",t,n,i),width:h("Width",t,n,i)}}function f(e){return ce({},e,{right:e.left+e.width,bottom:e.top+e.height})}function m(e){var n={};try{if(s(10)){n=e.getBoundingClientRect();var i=d(e,"top"),a=d(e,"left");n.top+=i,n.left+=a,n.bottom+=i,n.right+=a}else n=e.getBoundingClientRect()}catch(t){}var o={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},r="HTML"===e.nodeName?p(e.ownerDocument):{},l=r.width||e.clientWidth||o.width,c=r.height||e.clientHeight||o.height,u=e.offsetWidth-l,h=e.offsetHeight-c;if(u||h){var m=t(e);u-=_(m,"x"),h-=_(m,"y"),o.width-=u,o.height-=h}return f(o)}function g(e,n){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=s(10),r="HTML"===n.nodeName,l=m(e),c=m(n),d=i(e),_=t(n),h=parseFloat(_.borderTopWidth,10),p=parseFloat(_.borderLeftWidth,10);a&&r&&(c.top=ee(c.top,0),c.left=ee(c.left,0));var g=f({top:l.top-c.top-h,left:l.left-c.left-p,width:l.width,height:l.height});if(g.marginTop=0,g.marginLeft=0,!o&&r){var v=parseFloat(_.marginTop,10),b=parseFloat(_.marginLeft,10);g.top-=h-v,g.bottom-=h-v,g.left-=p-b,g.right-=p-b,g.marginTop=v,g.marginLeft=b}return(o&&!a?n.contains(d):n===d&&"BODY"!==d.nodeName)&&(g=u(g,n)),g}function v(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=g(e,n),a=ee(n.clientWidth,window.innerWidth||0),s=ee(n.clientHeight,window.innerHeight||0),o=t?0:d(n),r=t?0:d(n,"left");return f({top:o-i.top+i.marginTop,left:r-i.left+i.marginLeft,width:a,height:s})}function b(e){var i=e.nodeName;if("BODY"===i||"HTML"===i)return!1;if("fixed"===t(e,"position"))return!0;var a=n(e);return!!a&&b(a)}function y(e){if(!e||!e.parentElement||s())return document.documentElement;for(var n=e.parentElement;n&&"none"===t(n,"transform");)n=n.parentElement;return n||document.documentElement}function w(e,t,s,o){var r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],l={top:0,left:0},d=r?y(e):c(e,a(t));if("viewport"===o)l=v(d,r);else{var u;"scrollParent"===o?"BODY"===(u=i(n(t))).nodeName&&(u=e.ownerDocument.documentElement):u="window"===o?e.ownerDocument.documentElement:o;var _=g(u,d,r);if("HTML"!==u.nodeName||b(d))l=_;else{var h=p(e.ownerDocument),f=h.height,m=h.width;l.top+=_.top-_.marginTop,l.bottom=f+_.top,l.left+=_.left-_.marginLeft,l.right=m+_.left}}var w="number"==typeof(s=s||0);return l.left+=w?s:s.left||0,l.top+=w?s:s.top||0,l.right-=w?s:s.right||0,l.bottom-=w?s:s.bottom||0,l}function x(e){return e.width*e.height}function S(e,t,n,i,a){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=w(n,i,s,a),r={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},l=Object.keys(r).map(function(e){return ce({key:e},r[e],{area:x(r[e])})}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight}),d=0<c.length?c[0].key:l[0].key,u=e.split("-")[1];return d+(u?"-"+u:"")}function T(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return g(n,i?y(t):c(t,a(n)),i)}function M(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function C(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function k(e,t,n){n=n.split("-")[0];var i=M(e),a={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(n),o=s?"top":"left",r=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return a[o]=t[o]+t[l]/2-i[l]/2,a[r]=n===r?t[r]-i[c]:t[C(r)],a}function E(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function A(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=E(e,function(e){return e[t]===n});return e.indexOf(i)}function I(t,n,i){return(void 0===i?t:t.slice(0,A(t,"name",i))).forEach(function(t){t["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t["function"]||t.fn;t.enabled&&e(i)&&(n.offsets.popper=f(n.offsets.popper),n.offsets.reference=f(n.offsets.reference),n=i(n,t))}),n}function D(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=T(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=S(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=k(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=I(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function P(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function R(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var a=t[i],s=a?""+a+n:e;if("undefined"!=typeof document.body.style[s])return s}return null}function $(){return this.state.isDestroyed=!0,P(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[R("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function O(e){var t=e.ownerDocument;return t?t.defaultView:window}function z(e,t,n,a){var s="BODY"===e.nodeName,o=s?e.ownerDocument.defaultView:e;o.addEventListener(t,n,{passive:!0}),s||z(i(o.parentNode),t,n,a),a.push(o)}function N(e,t,n,a){n.updateBound=a,O(e).addEventListener("resize",n.updateBound,{passive:!0});var s=i(e);return z(s,"scroll",n.updateBound,n.scrollParents),n.scrollElement=s,n.eventsEnabled=!0,n}function j(){this.state.eventsEnabled||(this.state=N(this.reference,this.options,this.state,this.scheduleUpdate))}function L(e,t){return O(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function B(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=L(this.reference,this.state))}function F(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function q(e,t){Object.keys(t).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&F(t[n])&&(i="px"),e.style[n]=t[n]+i})}function H(e,t){Object.keys(t).forEach(function(n){!1===t[n]?e.removeAttribute(n):e.setAttribute(n,t[n])})}function V(e,t){var n=e.offsets,i=n.popper,a=n.reference,s=Z,o=function(e){return e},r=s(a.width),l=s(i.width),c=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),u=t?c||d||r%2==l%2?s:K:o,_=t?s:o;return{left:u(1==r%2&&1==l%2&&!d&&t?i.left-1:i.left),top:_(i.top),bottom:_(i.bottom),right:u(i.right)}}function G(e,t,n){var i=E(e,function(e){return e.name===t}),a=!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order});if(!a){var s="`"+t+"`";console.warn("`"+n+"` modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return a}function U(e){return"end"===e?"start":"start"===e?"end":e}function W(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=_e.indexOf(e),i=_e.slice(n+1).concat(_e.slice(0,n));return t?i.reverse():i}function Y(e,t,n,i){var a=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+a[1],o=a[2];if(!s)return e;if(0===o.indexOf("%")){var r;switch(o){case"%p":r=n;break;case"%":case"%r":default:r=i}return f(r)[t]/100*s}return"vh"===o||"vw"===o?("vh"===o?ee(document.documentElement.clientHeight,window.innerHeight||0):ee(document.documentElement.clientWidth,window.innerWidth||0))/100*s:s}function X(e,t,n,i){var a=[0,0],s=-1!==["right","left"].indexOf(i),o=e.split(/(\+|\-)/).map(function(e){return e.trim()}),r=o.indexOf(E(o,function(e){return-1!==e.search(/,|\s/)}));o[r]&&-1===o[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1===r?[o]:[o.slice(0,r).concat([o[r].split(l)[0]]),[o[r].split(l)[1]].concat(o.slice(r+1))];return(c=c.map(function(e,i){var a=(1===i?!s:s)?"height":"width",o=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)},[]).map(function(e){return Y(e,a,t,n)})})).forEach(function(e,t){e.forEach(function(n,i){F(n)&&(a[t]+=n*("-"===e[i-1]?-1:1))})}),a}function J(e,t){var n,i=t.offset,a=e.placement,s=e.offsets,o=s.popper,r=s.reference,l=a.split("-")[0];return n=F(+i)?[+i,0]:X(i,o,r,l),"left"===l?(o.top+=n[0],o.left-=n[1]):"right"===l?(o.top+=n[0],o.left+=n[1]):"top"===l?(o.left+=n[0],o.top-=n[1]):"bottom"===l&&(o.left+=n[0],o.top+=n[1]),e.popper=o,e}var Q=Math.min,K=Math.floor,Z=Math.round,ee=Math.max,te="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,ne=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(te&&0<=navigator.userAgent.indexOf(e[t]))return 1;return 0}(),ie=te&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},ne))}},ae=te&&!(!window.MSInputMethodContext||!document.documentMode),se=te&&/MSIE 10/.test(navigator.userAgent),oe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},re=function(){function e(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),le=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ce=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de=te&&/Firefox/i.test(navigator.userAgent),ue=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],_e=ue.slice(3),he={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},pe=function(){function t(n,i){var a=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};oe(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(a.update)},this.update=ie(this.update.bind(this)),this.options=ce({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n&&n.jquery?n[0]:n,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(ce({},t.Defaults.modifiers,s.modifiers)).forEach(function(e){a.options.modifiers[e]=ce({},t.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ce({name:e},a.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(a.reference,a.popper,a.options,t,a.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return re(t,[{key:"update",value:function(){return D.call(this)}},{key:"destroy",value:function(){return $.call(this)}},{key:"enableEventListeners",value:function(){return j.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),t}();return pe.Utils=("undefined"==typeof window?global:window).PopperUtils,pe.placements=ue,pe.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var a=e.offsets,s=a.reference,o=a.popper,r=-1!==["bottom","top"].indexOf(n),l=r?"left":"top",c=r?"width":"height",d={start:le({},l,s[l]),end:le({},l,s[l]+s[c]-o[c])};e.offsets.popper=ce({},o,d[i])}return e}},offset:{order:200,enabled:!0,fn:J,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||o(e.instance.popper);e.instance.reference===n&&(n=o(n));var i=R("transform"),a=e.instance.popper.style,s=a.top,r=a.left,l=a[i];a.top="",a.left="",a[i]="";var c=w(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);a.top=s,a.left=r,a[i]=l,t.boundaries=c;var d=t.priority,u=e.offsets.popper,_={primary:function(e){var n=u[e];return u[e]<c[e]&&!t.escapeWithReference&&(n=ee(u[e],c[e])),le({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=u[n];return u[e]>c[e]&&!t.escapeWithReference&&(i=Q(u[n],c[e]-("right"===e?u.width:u.height))),le({},n,i)}};return d.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";u=ce({},u,_[t](e))}),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,a=e.placement.split("-")[0],s=K,o=-1!==["top","bottom"].indexOf(a),r=o?"right":"bottom",l=o?"left":"top",c=o?"width":"height";return n[r]<s(i[l])&&(e.offsets.popper[l]=s(i[l])-n[c]),n[l]>s(i[r])&&(e.offsets.popper[l]=s(i[r])),e}},arrow:{order:500,enabled:!0,fn:function(e,n){var i;if(!G(e.instance.modifiers,"arrow","keepTogether"))return e;var a=n.element;if("string"==typeof a){if(!(a=e.instance.popper.querySelector(a)))return e}else if(!e.instance.popper.contains(a))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var s=e.placement.split("-")[0],o=e.offsets,r=o.popper,l=o.reference,c=-1!==["left","right"].indexOf(s),d=c?"height":"width",u=c?"Top":"Left",_=u.toLowerCase(),h=c?"left":"top",p=c?"bottom":"right",m=M(a)[d];l[p]-m<r[_]&&(e.offsets.popper[_]-=r[_]-(l[p]-m)),l[_]+m>r[p]&&(e.offsets.popper[_]+=l[_]+m-r[p]),e.offsets.popper=f(e.offsets.popper);var g=l[_]+l[d]/2-m/2,v=t(e.instance.popper),b=parseFloat(v["margin"+u],10),y=parseFloat(v["border"+u+"Width"],10),w=g-e.offsets.popper[_]-b-y;return w=ee(Q(r[d]-m,w),0),e.arrowElement=a,e.offsets.arrow=(le(i={},_,Z(w)),le(i,h,""),i),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(P(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=w(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],a=C(i),s=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case he.FLIP:o=[i,a];break;case he.CLOCKWISE:o=W(i);break;case he.COUNTERCLOCKWISE:o=W(i,!0);break;default:o=t.behavior}return o.forEach(function(r,l){if(i!==r||o.length===l+1)return e;i=e.placement.split("-")[0],a=C(i);var c=e.offsets.popper,d=e.offsets.reference,u=K,_="left"===i&&u(c.right)>u(d.left)||"right"===i&&u(c.left)<u(d.right)||"top"===i&&u(c.bottom)>u(d.top)||"bottom"===i&&u(c.top)<u(d.bottom),h=u(c.left)<u(n.left),p=u(c.right)>u(n.right),f=u(c.top)<u(n.top),m=u(c.bottom)>u(n.bottom),g="left"===i&&h||"right"===i&&p||"top"===i&&f||"bottom"===i&&m,v=-1!==["top","bottom"].indexOf(i),b=!!t.flipVariations&&(v&&"start"===s&&h||v&&"end"===s&&p||!v&&"start"===s&&f||!v&&"end"===s&&m),y=!!t.flipVariationsByContent&&(v&&"start"===s&&p||v&&"end"===s&&h||!v&&"start"===s&&m||!v&&"end"===s&&f),w=b||y;(_||g||w)&&(e.flipped=!0,(_||g)&&(i=o[l+1]),w&&(s=U(s)),e.placement=i+(s?"-"+s:""),e.offsets.popper=ce({},e.offsets.popper,k(e.instance.popper,e.offsets.reference,e.placement)),e=I(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,o=-1!==["left","right"].indexOf(n),r=-1===["top","left"].indexOf(n);return a[o?"left":"top"]=s[n]-(r?a[o?"width":"height"]:0),e.placement=C(t),e.offsets.popper=f(a),e}},hide:{order:800,enabled:!0,fn:function(e){if(!G(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=E(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,a=e.offsets.popper,s=E(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var r,l,c=void 0===s?t.gpuAcceleration:s,d=o(e.instance.popper),u=m(d),_={position:a.position},h=V(e,2>window.devicePixelRatio||!de),p="bottom"===n?"top":"bottom",f="right"===i?"left":"right",g=R("transform");if(l="bottom"==p?"HTML"===d.nodeName?-d.clientHeight+h.bottom:-u.height+h.bottom:h.top,r="right"==f?"HTML"===d.nodeName?-d.clientWidth+h.right:-u.width+h.right:h.left,c&&g)_[g]="translate3d("+r+"px, "+l+"px, 0)",_[p]=0,_[f]=0,_.willChange="transform";else{var v="bottom"==p?-1:1,b="right"==f?-1:1;_[p]=l*v,_[f]=r*b,_.willChange=p+", "+f}var y={"x-placement":e.placement};return e.attributes=ce({},y,e.attributes),e.styles=ce({},_,e.styles),e.arrowStyles=ce({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return q(e.instance.popper,e.styles),H(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&q(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,a){var s=T(a,t,e,n.positionFixed),o=S(n.placement,s,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),q(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},pe}),
/*!
  * Bootstrap util.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Util=t(e.jQuery)}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function n(e){return null==e?""+e:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function i(){return{bindType:r,delegateType:r,handle:function(e){return o["default"](e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function a(e){var t=this,n=!1;return o["default"](this).one(d.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||d.triggerTransitionEnd(t)},e),this}function s(){o["default"].fn.emulateTransitionEnd=a,o["default"].event.special[d.TRANSITION_END]=i()}var o=t(e),r="transitionend",l=1e6,c=1e3,d={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(Math.random()*l)}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var n=e.getAttribute("href");t=n&&"#"!==n?n.trim():""}try{return document.querySelector(t)?t:null}catch(_){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var t=o["default"](e).css("transition-duration"),n=o["default"](e).css("transition-delay"),i=parseFloat(t),a=parseFloat(n);return i||a?(t=t.split(",")[0],n=n.split(",")[0],(parseFloat(t)+parseFloat(n))*c):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){o["default"](e).trigger(r)},supportsTransitionEnd:function(){return Boolean(r)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,i){for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var s=i[a],o=t[a],r=o&&d.isElement(o)?"element":n(o);if(!new RegExp(s).test(r))throw new Error(e.toUpperCase()+': Option "'+a+'" provided type "'+r+'" but expected type "'+s+'".')}},findShadowRoot:function(e){if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){var t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d.findShadowRoot(e.parentNode):null},jQueryDetection:function(){if("undefined"==typeof o["default"])throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=o["default"].fn.jquery.split(" ")[0].split("."),t=1,n=2,i=9,a=1,s=4;if(e[0]<n&&e[1]<i||e[0]===t&&e[1]===i&&e[2]<a||e[0]>=s)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};return d.jQueryDetection(),s(),d}),
/*!
  * Bootstrap dropdown.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Dropdown=t(e.jQuery,e.Popper,e.Util)}(this,function(e,t,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var r=i(e),l=i(t),c=i(n),d="dropdown",u="4.6.0",_="bs.dropdown",h="."+_,p=".data-api",f=r["default"].fn[d],m=27,g=32,v=9,b=38,y=40,w=3,x=new RegExp(b+"|"+y+"|"+m),S="hide"+h,T="hidden"+h,M="show"+h,C="shown"+h,k="click"+h,E="click"+h+p,A="keydown"+h+p,I="keyup"+h+p,D="disabled",P="show",R="dropup",$="dropright",O="dropleft",z="dropdown-menu-right",N="position-static",j='[data-toggle="dropdown"]',L=".dropdown form",B=".dropdown-menu",F=".navbar-nav",q=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",H="top-start",V="top-end",G="bottom-start",U="bottom-end",W="right-start",Y="left-start",X={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},J={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Q=function(){function e(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=e.prototype;return t.toggle=function(){if(!this._element.disabled&&!r["default"](this._element).hasClass(D)){var t=r["default"](this._menu).hasClass(P);e._clearMenus(),t||this.show(!0)}},t.show=function(t){if(void 0===t&&(t=!1),!(this._element.disabled||r["default"](this._element).hasClass(D)||r["default"](this._menu).hasClass(P))){var n={relatedTarget:this._element},i=r["default"].Event(M,n),a=e._getParentFromElement(this._element);if(r["default"](a).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar&&t){if("undefined"==typeof l["default"])throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var s=this._element;"parent"===this._config.reference?s=a:c["default"].isElement(this._config.reference)&&(s=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(s=this._config.reference[0])),"scrollParent"!==this._config.boundary&&r["default"](a).addClass(N),this._popper=new l["default"](s,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===r["default"](a).closest(F).length&&r["default"](document.body).children().on("mouseover",null,r["default"].noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),r["default"](this._menu).toggleClass(P),r["default"](a).toggleClass(P).trigger(r["default"].Event(C,n))}}},t.hide=function(){if(!this._element.disabled&&!r["default"](this._element).hasClass(D)&&r["default"](this._menu).hasClass(P)){var t={relatedTarget:this._element},n=r["default"].Event(S,t),i=e._getParentFromElement(this._element);r["default"](i).trigger(n),n.isDefaultPrevented()||(this._popper&&this._popper.destroy(),r["default"](this._menu).toggleClass(P),r["default"](i).toggleClass(P).trigger(r["default"].Event(T,t)))}},t.dispose=function(){r["default"].removeData(this._element,_),r["default"](this._element).off(h),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;r["default"](this._element).on(k,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(e){return e=o({},this.constructor.Default,r["default"](this._element).data(),e),c["default"].typeCheckConfig(d,e,this.constructor.DefaultType),e},t._getMenuElement=function(){if(!this._menu){var t=e._getParentFromElement(this._element);t&&(this._menu=t.querySelector(B))}return this._menu},t._getPlacement=function(){var e=r["default"](this._element.parentNode),t=G;return e.hasClass(R)?t=r["default"](this._menu).hasClass(z)?V:H:e.hasClass($)?t=W:e.hasClass(O)?t=Y:r["default"](this._menu).hasClass(z)&&(t=U),t},t._detectNavbar=function(){return r["default"](this._element).closest(".navbar").length>0},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=o({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),o({},e,this._config.popperConfig)},e._jQueryInterface=function(t){return this.each(function(){var n=r["default"](this).data(_);if(n||(n=new e(this,"object"==typeof t?t:null),r["default"](this).data(_,n)),"string"==typeof t){if("undefined"==typeof n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},e._clearMenus=function(t){if(!t||t.which!==w&&("keyup"!==t.type||t.which===v))for(var n=[].slice.call(document.querySelectorAll(j)),i=0,a=n.length;i<a;i++){var s=e._getParentFromElement(n[i]),o=r["default"](n[i]).data(_),l={relatedTarget:n[i]};if(t&&"click"===t.type&&(l.clickEvent=t),o){var c=o._menu;if(r["default"](s).hasClass(P)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&t.which===v)&&r["default"].contains(s,t.target))){var d=r["default"].Event(S,l);r["default"](s).trigger(d),d.isDefaultPrevented()||("ontouchstart"in document.documentElement&&r["default"](document.body).children().off("mouseover",null,r["default"].noop),n[i].setAttribute("aria-expanded","false"),o._popper&&o._popper.destroy(),r["default"](c).removeClass(P),r["default"](s).removeClass(P).trigger(r["default"].Event(T,l)))}}}},e._getParentFromElement=function(e){var t,n=c["default"].getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},e._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(t.which===g||t.which!==m&&(t.which!==y&&t.which!==b||r["default"](t.target).closest(B).length)):x.test(t.which))&&!this.disabled&&!r["default"](this).hasClass(D)){var n=e._getParentFromElement(this),i=r["default"](n).hasClass(P);if(i||t.which!==m){if(t.preventDefault(),t.stopPropagation(),!i||t.which===m||t.which===g)return t.which===m&&r["default"](n.querySelector(j)).trigger("focus"),void r["default"](this).trigger("click");var a=[].slice.call(n.querySelectorAll(q)).filter(function(e){return r["default"](e).is(":visible")});if(0!==a.length){var s=a.indexOf(t.target);t.which===b&&s>0&&s--,t.which===y&&s<a.length-1&&s++,s<0&&(s=0),a[s].focus()}}}},s(e,null,[{key:"VERSION",get:function(){return u}},{key:"Default",get:function(){return X}},{key:"DefaultType",get:function(){return J}}]),e}();return r["default"](document).on(A,j,Q._dataApiKeydownHandler).on(A,B,Q._dataApiKeydownHandler).on(E+" "+I,Q._clearMenus).on(E,j,function(e){e.preventDefault(),e.stopPropagation(),Q._jQueryInterface.call(r["default"](this),"toggle")}).on(E,L,function(e){e.stopPropagation()}),r["default"].fn[d]=Q._jQueryInterface,r["default"].fn[d].Constructor=Q,r["default"].fn[d].noConflict=function(){return r["default"].fn[d]=f,Q._jQueryInterface},Q}),
/*!
  * Bootstrap tab.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Tab=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=n(e),o=n(t),r="tab",l="4.6.0",c="bs.tab",d="."+c,u=".data-api",_=s["default"].fn[r],h="hide"+d,p="hidden"+d,f="show"+d,m="shown"+d,g="click"+d+u,v="dropdown-menu",b="active",y="disabled",w="fade",x="show",S=".dropdown",T=".nav, .list-group",M=".active",C="> li > .active",k='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',E=".dropdown-toggle",A="> .dropdown-menu .active",I=function(){function e(e){this._element=e}var t=e.prototype;return t.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&s["default"](this._element).hasClass(b)||s["default"](this._element).hasClass(y))){var t,n,i=s["default"](this._element).closest(T)[0],a=o["default"].getSelectorFromElement(this._element);if(i){var r="UL"===i.nodeName||"OL"===i.nodeName?C:M;n=(n=s["default"].makeArray(s["default"](i).find(r)))[n.length-1]}var l=s["default"].Event(h,{relatedTarget:this._element}),c=s["default"].Event(f,{relatedTarget:n});if(n&&s["default"](n).trigger(l),s["default"](this._element).trigger(c),!c.isDefaultPrevented()&&!l.isDefaultPrevented()){a&&(t=document.querySelector(a)),this._activate(this._element,i);var d=function(){var t=s["default"].Event(p,{relatedTarget:e._element}),i=s["default"].Event(m,{relatedTarget:n});s["default"](n).trigger(t),s["default"](e._element).trigger(i)};t?this._activate(t,t.parentNode,d):d()}}},t.dispose=function(){s["default"].removeData(this._element,c),this._element=null},t._activate=function(e,t,n){var i=this,a=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?s["default"](t).children(M):s["default"](t).find(C))[0],r=n&&a&&s["default"](a).hasClass(w),l=function(){return i._transitionComplete(e,a,n)};if(a&&r){var c=o["default"].getTransitionDurationFromElement(a);s["default"](a).removeClass(x).one(o["default"].TRANSITION_END,l).emulateTransitionEnd(c)}else l()},t._transitionComplete=function(e,t,n){if(t){s["default"](t).removeClass(b);var i=s["default"](t.parentNode).find(A)[0];i&&s["default"](i).removeClass(b),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(s["default"](e).addClass(b),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),o["default"].reflow(e),e.classList.contains(w)&&e.classList.add(x),e.parentNode&&s["default"](e.parentNode).hasClass(v)){var a=s["default"](e).closest(S)[0];if(a){var r=[].slice.call(a.querySelectorAll(E));s["default"](r).addClass(b)}e.setAttribute("aria-expanded",!0)}n&&n()},e._jQueryInterface=function(t){return this.each(function(){var n=s["default"](this),i=n.data(c);if(i||(i=new e(this),n.data(c,i)),"string"==typeof t){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},a(e,null,[{key:"VERSION",get:function(){return l}}]),e}();return s["default"](document).on(g,k,function(e){e.preventDefault(),I._jQueryInterface.call(s["default"](this),"show")}),s["default"].fn[r]=I._jQueryInterface,s["default"].fn[r].Constructor=I,s["default"].fn[r].noConflict=function(){return s["default"].fn[r]=_,I._jQueryInterface},I}),
/*!
  * Bootstrap collapse.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Collapse=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var o=n(e),r=n(t),l="collapse",c="4.6.0",d="bs.collapse",u="."+d,_=".data-api",h=o["default"].fn[l],p={toggle:!0,parent:""},f={toggle:"boolean",parent:"(string|element)"},m="show"+u,g="shown"+u,v="hide"+u,b="hidden"+u,y="click"+u+_,w="show",x="collapse",S="collapsing",T="collapsed",M="width",C="height",k=".show, .collapsing",E='[data-toggle="collapse"]',A=function(){function e(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(E)),i=0,a=n.length;i<a;i++){var s=n[i],o=r["default"].getSelectorFromElement(s),l=[].slice.call(document.querySelectorAll(o)).filter(function(t){return t===e});null!==o&&l.length>0&&(this._selector=o,this._triggerArray.push(s))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=e.prototype;return t.toggle=function(){o["default"](this._element).hasClass(w)?this.hide():this.show()},t.show=function(){var t,n,i=this;if(!this._isTransitioning&&!o["default"](this._element).hasClass(w)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(k)).filter(function(e){return"string"==typeof i._config.parent?e.getAttribute("data-parent")===i._config.parent:e.classList.contains(x)})).length&&(t=null),!(t&&(n=o["default"](t).not(this._selector).data(d))&&n._isTransitioning))){var a=o["default"].Event(m);if(o["default"](this._element).trigger(a),!a.isDefaultPrevented()){t&&(e._jQueryInterface.call(o["default"](t).not(this._selector),"hide"),n||o["default"](t).data(d,null));var s=this._getDimension();o["default"](this._element).removeClass(x).addClass(S),this._element.style[s]=0,this._triggerArray.length&&o["default"](this._triggerArray).removeClass(T).attr("aria-expanded",!0),this.setTransitioning(!0);var l=function(){o["default"](i._element).removeClass(S).addClass(x+" "+w),i._element.style[s]="",i.setTransitioning(!1),o["default"](i._element).trigger(g)},c="scroll"+(s[0].toUpperCase()+s.slice(1)),u=r["default"].getTransitionDurationFromElement(this._element);o["default"](this._element).one(r["default"].TRANSITION_END,l).emulateTransitionEnd(u),this._element.style[s]=this._element[c]+"px"}}},t.hide=function(){var e=this;if(!this._isTransitioning&&o["default"](this._element).hasClass(w)){var t=o["default"].Event(v);if(o["default"](this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",r["default"].reflow(this._element),o["default"](this._element).addClass(S).removeClass(x+" "+w);var i=this._triggerArray.length;if(i>0)for(var a=0;a<i;a++){var s=this._triggerArray[a],l=r["default"].getSelectorFromElement(s);if(null!==l)o["default"]([].slice.call(document.querySelectorAll(l))).hasClass(w)||o["default"](s).addClass(T).attr("aria-expanded",!1)}this.setTransitioning(!0);var c=function(){e.setTransitioning(!1),o["default"](e._element).removeClass(S).addClass(x).trigger(b)};this._element.style[n]="";var d=r["default"].getTransitionDurationFromElement(this._element);o["default"](this._element).one(r["default"].TRANSITION_END,c).emulateTransitionEnd(d)}}},t.setTransitioning=function(e){this._isTransitioning=e},t.dispose=function(){o["default"].removeData(this._element,d),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(e){return(e=s({},p,e)).toggle=Boolean(e.toggle),r["default"].typeCheckConfig(l,e,f),e},t._getDimension=function(){return o["default"](this._element).hasClass(M)?M:C},t._getParent=function(){var t,n=this;r["default"].isElement(this._config.parent)?(t=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',a=[].slice.call(t.querySelectorAll(i));return o["default"](a).each(function(t,i){n._addAriaAndCollapsedClass(e._getTargetFromElement(i),[i])}),t},t._addAriaAndCollapsedClass=function(e,t){var n=o["default"](e).hasClass(w);t.length&&o["default"](t).toggleClass(T,!n).attr("aria-expanded",n)},e._getTargetFromElement=function(e){var t=r["default"].getSelectorFromElement(e);return t?document.querySelector(t):null},e._jQueryInterface=function(t){return this.each(function(){var n=o["default"](this),i=n.data(d),a=s({},p,n.data(),"object"==typeof t&&t?t:{});if(!i&&a.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(a.toggle=!1),i||(i=new e(this,a),n.data(d,i)),"string"==typeof t){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},a(e,null,[{key:"VERSION",get:function(){return c}},{key:"Default",get:function(){return p}}]),e}();return o["default"](document).on(y,E,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var t=o["default"](this),n=r["default"].getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(n));o["default"](i).each(function(){var e=o["default"](this),n=e.data(d)?"toggle":t.data();A._jQueryInterface.call(e,n)})}),o["default"].fn[l]=A._jQueryInterface,o["default"].fn[l].Constructor=A,o["default"].fn[l].noConflict=function(){return o["default"].fn[l]=h,A._jQueryInterface},A}),
/*!
  * Bootstrap modal.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Modal=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var o=n(e),r=n(t),l="modal",c="4.6.0",d="bs.modal",u="."+d,_=".data-api",h=o["default"].fn[l],p=27,f={backdrop:!0,keyboard:!0,focus:!0,show:!0},m={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},g="hide"+u,v="hidePrevented"+u,b="hidden"+u,y="show"+u,w="shown"+u,x="focusin"+u,S="resize"+u,T="click.dismiss"+u,M="keydown.dismiss"+u,C="mouseup.dismiss"+u,k="mousedown.dismiss"+u,E="click"+u+_,A="modal-dialog-scrollable",I="modal-scrollbar-measure",D="modal-backdrop",P="modal-open",R="fade",$="show",O="modal-static",z=".modal-dialog",N=".modal-body",j='[data-toggle="modal"]',L='[data-dismiss="modal"]',B=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",F=".sticky-top",q=function(){function e(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(z),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=e.prototype;return t.toggle=function(e){return this._isShown?this.hide():this.show(e)},t.show=function(e){var t=this;if(!this._isShown&&!this._isTransitioning){o["default"](this._element).hasClass(R)&&(this._isTransitioning=!0);var n=o["default"].Event(y,{relatedTarget:e});o["default"](this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),o["default"](this._element).on(T,L,function(e){return t.hide(e)}),o["default"](this._dialog).on(k,function(){o["default"](t._element).one(C,function(e){o["default"](e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},t.hide=function(e){var t=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var n=o["default"].Event(g);if(o["default"](this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=o["default"](this._element).hasClass(R);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),o["default"](document).off(x),o["default"](this._element).removeClass($),o["default"](this._element).off(T),o["default"](this._dialog).off(k),i){var a=r["default"].getTransitionDurationFromElement(this._element);o["default"](this._element).one(r["default"].TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(a)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(e){return o["default"](e).off(u)}),o["default"](document).off(x),o["default"].removeData(this._element,d),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(e){return e=s({},f,e),r["default"].typeCheckConfig(l,e,m),e},t._triggerBackdropTransition=function(){var e=this,t=o["default"].Event(v);if(o["default"](this._element).trigger(t),!t.isDefaultPrevented()){var n=this._element.scrollHeight>document.documentElement.clientHeight;n||(this._element.style.overflowY="hidden"),this._element.classList.add(O);var i=r["default"].getTransitionDurationFromElement(this._dialog);o["default"](this._element).off(r["default"].TRANSITION_END),o["default"](this._element).one(r["default"].TRANSITION_END,function(){e._element.classList.remove(O),n||o["default"](e._element).one(r["default"].TRANSITION_END,function(){e._element.style.overflowY=""}).emulateTransitionEnd(e._element,i)}).emulateTransitionEnd(i),this._element.focus()}},t._showElement=function(e){var t=this,n=o["default"](this._element).hasClass(R),i=this._dialog?this._dialog.querySelector(N):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),o["default"](this._dialog).hasClass(A)&&i?i.scrollTop=0:this._element.scrollTop=0,n&&r["default"].reflow(this._element),o["default"](this._element).addClass($),this._config.focus&&this._enforceFocus();var a=o["default"].Event(w,{relatedTarget:e}),s=function(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,o["default"](t._element).trigger(a)};if(n){var l=r["default"].getTransitionDurationFromElement(this._dialog);o["default"](this._dialog).one(r["default"].TRANSITION_END,s).emulateTransitionEnd(l)}else s()},t._enforceFocus=function(){var e=this;o["default"](document).off(x).on(x,function(t){document!==t.target&&e._element!==t.target&&0===o["default"](e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown?o["default"](this._element).on(M,function(t){e._config.keyboard&&t.which===p?(t.preventDefault(),e.hide()):e._config.keyboard||t.which!==p||e._triggerBackdropTransition()}):this._isShown||o["default"](this._element).off(M)},t._setResizeEvent=function(){var e=this;this._isShown?o["default"](window).on(S,function(t){return e.handleUpdate(t)}):o["default"](window).off(S)},t._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){o["default"](document.body).removeClass(P),e._resetAdjustments(),e._resetScrollbar(),o["default"](e._element).trigger(b)})},t._removeBackdrop=function(){this._backdrop&&(o["default"](this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(e){var t=this,n=o["default"](this._element).hasClass(R)?R:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=D,n&&this._backdrop.classList.add(n),o["default"](this._backdrop).appendTo(document.body),o["default"](this._element).on(T,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._triggerBackdropTransition():t.hide())}),n&&r["default"].reflow(this._backdrop),o["default"](this._backdrop).addClass($),!e)return;if(!n)return void e();var i=r["default"].getTransitionDurationFromElement(this._backdrop);o["default"](this._backdrop).one(r["default"].TRANSITION_END,e).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){o["default"](this._backdrop).removeClass($);var a=function(){t._removeBackdrop(),e&&e()};if(o["default"](this._element).hasClass(R)){var s=r["default"].getTransitionDurationFromElement(this._backdrop);o["default"](this._backdrop).one(r["default"].TRANSITION_END,a).emulateTransitionEnd(s)}else a()}else e&&e()},t._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(e.left+e.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(B)),n=[].slice.call(document.querySelectorAll(F));o["default"](t).each(function(t,n){var i=n.style.paddingRight,a=o["default"](n).css("padding-right");o["default"](n).data("padding-right",i).css("padding-right",parseFloat(a)+e._scrollbarWidth+"px")}),o["default"](n).each(function(t,n){var i=n.style.marginRight,a=o["default"](n).css("margin-right");o["default"](n).data("margin-right",i).css("margin-right",parseFloat(a)-e._scrollbarWidth+"px")});var i=document.body.style.paddingRight,a=o["default"](document.body).css("padding-right");o["default"](document.body).data("padding-right",i).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}o["default"](document.body).addClass(P)},t._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(B));o["default"](e).each(function(e,t){var n=o["default"](t).data("padding-right");o["default"](t).removeData("padding-right"),t.style.paddingRight=n||""});var t=[].slice.call(document.querySelectorAll(""+F));o["default"](t).each(function(e,t){var n=o["default"](t).data("margin-right");void 0!==n&&o["default"](t).css("margin-right",n).removeData("margin-right")});var n=o["default"](document.body).data("padding-right");o["default"](document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var e=document.createElement("div");e.className=I,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},e._jQueryInterface=function(t,n){return this.each(function(){var i=o["default"](this).data(d),a=s({},f,o["default"](this).data(),"object"==typeof t&&t?t:{});if(i||(i=new e(this,a),o["default"](this).data(d,i)),"string"==typeof t){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t](n)}else a.show&&i.show(n)})},a(e,null,[{key:"VERSION",get:function(){return c}},{key:"Default",get:function(){return f}}]),e}();return o["default"](document).on(E,j,function(e){var t,n=this,i=r["default"].getSelectorFromElement(this);i&&(t=document.querySelector(i));var a=o["default"](t).data(d)?"toggle":s({},o["default"](t).data(),o["default"](this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=o["default"](t).one(y,function(e){e.isDefaultPrevented()||l.one(b,function(){o["default"](n).is(":visible")&&n.focus()})});q._jQueryInterface.call(o["default"](t),a,this)}),o["default"].fn[l]=q._jQueryInterface,o["default"].fn[l].Constructor=q,o["default"].fn[l].noConflict=function(){return o["default"].fn[l]=h,q._jQueryInterface},q}),
/*!
  * Bootstrap alert.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Alert=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=n(e),o=n(t),r="alert",l="4.6.0",c="bs.alert",d="."+c,u=".data-api",_=s["default"].fn[r],h='[data-dismiss="alert"]',p="close"+d,f="closed"+d,m="click"+d+u,g="alert",v="fade",b="show",y=function(){function e(e){this._element=e}var t=e.prototype;return t.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},t.dispose=function(){s["default"].removeData(this._element,c),this._element=null},t._getRootElement=function(e){var t=o["default"].getSelectorFromElement(e),n=!1;return t&&(n=document.querySelector(t)),n||(n=s["default"](e).closest("."+g)[0]),n},t._triggerCloseEvent=function(e){var t=s["default"].Event(p);return s["default"](e).trigger(t),t},t._removeElement=function(e){var t=this;if(s["default"](e).removeClass(b),s["default"](e).hasClass(v)){var n=o["default"].getTransitionDurationFromElement(e);s["default"](e).one(o["default"].TRANSITION_END,function(n){return t._destroyElement(e,n)}).emulateTransitionEnd(n)}else this._destroyElement(e)},t._destroyElement=function(e){s["default"](e).detach().trigger(f).remove()},e._jQueryInterface=function(t){return this.each(function(){var n=s["default"](this),i=n.data(c);i||(i=new e(this),n.data(c,i)),"close"===t&&i[t](this)})},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},a(e,null,[{key:"VERSION",get:function(){return l}}]),e}();return s["default"](document).on(m,h,y._handleDismiss(new y)),s["default"].fn[r]=y._jQueryInterface,s["default"].fn[r].Constructor=y,s["default"].fn[r].noConflict=function(){return s["default"].fn[r]=_,y._jQueryInterface},y}),
/*!
  * Bootstrap button.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Button=t(e.jQuery)}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var a=t(e),s="button",o="4.6.0",r="bs.button",l="."+r,c=".data-api",d=a["default"].fn[s],u="active",_="btn",h="focus",p='[data-toggle^="button"]',f='[data-toggle="buttons"]',m='[data-toggle="button"]',g='[data-toggle="buttons"] .btn',v='input:not([type="hidden"])',b=".active",y=".btn",w="click"+l+c,x="focus"+l+c+" blur"+l+c,S="load"+l+c,T=function(){function e(e){this._element=e,this.shouldAvoidTriggerChange=!1}var t=e.prototype;return t.toggle=function(){var e=!0,t=!0,n=a["default"](this._element).closest(f)[0];if(n){var i=this._element.querySelector(v);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(u))e=!1;else{var s=n.querySelector(b);s&&a["default"](s).removeClass(u)}e&&("checkbox"!==i.type&&"radio"!==i.type||(i.checked=!this._element.classList.contains(u)),this.shouldAvoidTriggerChange||a["default"](i).trigger("change")),i.focus(),t=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(u)),e&&a["default"](this._element).toggleClass(u))},t.dispose=function(){a["default"].removeData(this._element,r),this._element=null},e._jQueryInterface=function(t,n){return this.each(function(){var i=a["default"](this),s=i.data(r);s||(s=new e(this),i.data(r,s)),s.shouldAvoidTriggerChange=n,"toggle"===t&&s[t]()})},i(e,null,[{key:"VERSION",get:function(){return o}}]),e}();return a["default"](document).on(w,p,function(e){var t=e.target,n=t;if(a["default"](t).hasClass(_)||(t=a["default"](t).closest(y)[0]),!t||t.hasAttribute("disabled")||t.classList.contains("disabled"))e.preventDefault();else{var i=t.querySelector(v);if(i&&(i.hasAttribute("disabled")||i.classList.contains("disabled")))return void e.preventDefault();"INPUT"!==n.tagName&&"LABEL"===t.tagName||T._jQueryInterface.call(a["default"](t),"toggle","INPUT"===n.tagName)}}).on(x,p,function(e){var t=a["default"](e.target).closest(y)[0];a["default"](t).toggleClass(h,/^focus(in)?$/.test(e.type))}),a["default"](window).on(S,function(){for(var e=[].slice.call(document.querySelectorAll(g)),t=0,n=e.length;t<n;t++){var i=e[t],a=i.querySelector(v);a.checked||a.hasAttribute("checked")?i.classList.add(u):i.classList.remove(u)}for(var s=0,o=(e=[].slice.call(document.querySelectorAll(m))).length;s<o;s++){var r=e[s];"true"===r.getAttribute("aria-pressed")?r.classList.add(u):r.classList.remove(u)}}),a["default"].fn[s]=T._jQueryInterface,a["default"].fn[s].Constructor=T,a["default"].fn[s].noConflict=function(){return a["default"].fn[s]=d,T._jQueryInterface},T}),
/*!
  * Bootstrap scrollspy.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).ScrollSpy=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var o=n(e),r=n(t),l="scrollspy",c="4.6.0",d="bs.scrollspy",u="."+d,_=".data-api",h=o["default"].fn[l],p={offset:10,method:"auto",target:""},f={offset:"number",method:"string",target:"(string|element)"},m="activate"+u,g="scroll"+u,v="load"+u+_,b="dropdown-item",y="active",w='[data-spy="scroll"]',x=".nav, .list-group",S=".nav-link",T=".nav-item",M=".list-group-item",C=".dropdown",k=".dropdown-item",E=".dropdown-toggle",A="offset",I="position",D=function(){function e(e,t){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+S+","+this._config.target+" "+M+","+this._config.target+" "+k,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,o["default"](this._scrollElement).on(g,function(e){return n._process(e)}),this.refresh(),this._process()}var t=e.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?A:I,n="auto"===this._config.method?t:this._config.method,i=n===I?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,a=r["default"].getSelectorFromElement(e);if(a&&(t=document.querySelector(a)),t){var s=t.getBoundingClientRect();if(s.width||s.height)return[o["default"](t)[n]().top+i,a]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){o["default"].removeData(this._element,d),o["default"](this._scrollElement).off(u),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(e){if("string"!=typeof(e=s({},p,"object"==typeof e&&e?e:{})).target&&r["default"].isElement(e.target)){var t=o["default"](e.target).attr("id");t||(t=r["default"].getUID(l),o["default"](e.target).attr("id",t)),e.target="#"+t}return r["default"].typeCheckConfig(l,e,f),e},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var a=this._offsets.length;a--;){this._activeTarget!==this._targets[a]&&e>=this._offsets[a]&&("undefined"==typeof this._offsets[a+1]||e<this._offsets[a+1])&&this._activate(this._targets[a])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=o["default"]([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(b)?(n.closest(C).find(E).addClass(y),n.addClass(y)):(n.addClass(y),n.parents(x).prev(S+", "+M).addClass(y),n.parents(x).prev(T).children(S).addClass(y)),o["default"](this._scrollElement).trigger(m,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(e){return e.classList.contains(y)}).forEach(function(e){return e.classList.remove(y)})},e._jQueryInterface=function(t){return this.each(function(){var n=o["default"](this).data(d);if(n||(n=new e(this,"object"==typeof t&&t),o["default"](this).data(d,n)),"string"==typeof t){if("undefined"==typeof n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},a(e,null,[{key:"VERSION",get:function(){return c}},{key:"Default",get:function(){return p}}]),e}();return o["default"](window).on(v,function(){for(var e=[].slice.call(document.querySelectorAll(w)),t=e.length;t--;){var n=o["default"](e[t]);D._jQueryInterface.call(n,n.data())}}),o["default"].fn[l]=D._jQueryInterface,o["default"].fn[l].Constructor=D,o["default"].fn[l].noConflict=function(){return o["default"].fn[l]=h,D._jQueryInterface},D}),
/*!
  * Bootstrap toast.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Toast=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var o=n(e),r=n(t),l="toast",c="4.6.0",d="bs.toast",u="."+d,_=o["default"].fn[l],h="click.dismiss"+u,p="hide"+u,f="hidden"+u,m="show"+u,g="shown"+u,v="fade",b="hide",y="show",w="showing",x={animation:"boolean",autohide:"boolean",delay:"number"},S={animation:!0,autohide:!0,delay:500},T='[data-dismiss="toast"]',M=function(){function e(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var t=e.prototype;return t.show=function(){var e=this,t=o["default"].Event(m);if(o["default"](this._element).trigger(t),!t.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add(v);var n=function(){e._element.classList.remove(w),e._element.classList.add(y),o["default"](e._element).trigger(g),e._config.autohide&&(e._timeout=setTimeout(function(){e.hide()},e._config.delay))};if(this._element.classList.remove(b),r["default"].reflow(this._element),this._element.classList.add(w),this._config.animation){var i=r["default"].getTransitionDurationFromElement(this._element);o["default"](this._element).one(r["default"].TRANSITION_END,n).emulateTransitionEnd(i)}else n()}},t.hide=function(){if(this._element.classList.contains(y)){var e=o["default"].Event(p);o["default"](this._element).trigger(e),e.isDefaultPrevented()||this._close()}},t.dispose=function(){this._clearTimeout(),this._element.classList.contains(y)&&this._element.classList.remove(y),o["default"](this._element).off(h),o["default"].removeData(this._element,d),this._element=null,this._config=null},t._getConfig=function(e){return e=s({},S,o["default"](this._element).data(),"object"==typeof e&&e?e:{}),r["default"].typeCheckConfig(l,e,this.constructor.DefaultType),e},t._setListeners=function(){var e=this;o["default"](this._element).on(h,T,function(){return e.hide()})},t._close=function(){var e=this,t=function(){e._element.classList.add(b),o["default"](e._element).trigger(f)};if(this._element.classList.remove(y),this._config.animation){var n=r["default"].getTransitionDurationFromElement(this._element);o["default"](this._element).one(r["default"].TRANSITION_END,t).emulateTransitionEnd(n)}else t()},t._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},e._jQueryInterface=function(t){return this.each(function(){var n=o["default"](this),i=n.data(d);if(i||(i=new e(this,"object"==typeof t&&t),n.data(d,i)),"string"==typeof t){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t](this)}})},a(e,null,[{key:"VERSION",get:function(){return c}},{key:"DefaultType",get:function(){return x}},{key:"Default",get:function(){return S}}]),e}();return o["default"].fn[l]=M._jQueryInterface,o["default"].fn[l].Constructor=M,o["default"].fn[l].noConflict=function(){return o["default"].fn[l]=_,M._jQueryInterface},M}),
/*!
  * Bootstrap tooltip.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Tooltip=t(e.jQuery,e.Popper,e.Util)}(this,function(e,t,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function r(e,t){var n=e.nodeName.toLowerCase();if(-1!==t.indexOf(n))return-1===_.indexOf(n)||Boolean(e.nodeValue.match(p)||e.nodeValue.match(f));for(var i=t.filter(function(e){return e instanceof RegExp}),a=0,s=i.length;a<s;a++)if(n.match(i[a]))return!0;return!1}function l(e,t,n){if(0===e.length)return e;if(n&&"function"==typeof n)return n(e);for(var i=(new window.DOMParser).parseFromString(e,"text/html"),a=Object.keys(t),s=[].slice.call(i.body.querySelectorAll("*")),o=function(e){var n=s[e],i=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var o=[].slice.call(n.attributes),l=[].concat(t["*"]||[],t[i]||[]);o.forEach(function(e){r(e,l)||n.removeAttribute(e.nodeName)})},l=0,c=s.length;l<c;l++)o(l);return i.body.innerHTML}var c=i(e),d=i(t),u=i(n),_=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],h={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},p=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,f=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,m="tooltip",g="4.6.0",v="bs.tooltip",b="."+v,y=c["default"].fn[m],w="bs-tooltip",x=new RegExp("(^|\\s)"+w+"\\S+","g"),S=["sanitize","whiteList","sanitizeFn"],T={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},M={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},C={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:h,popperConfig:null},k="show",E="out",A={HIDE:"hide"+b,HIDDEN:"hidden"+b,SHOW:"show"+b,SHOWN:"shown"+b,INSERTED:"inserted"+b,CLICK:"click"+b,FOCUSIN:"focusin"+b,FOCUSOUT:"focusout"+b,MOUSEENTER:"mouseenter"+b,MOUSELEAVE:"mouseleave"+b},I="fade",D="show",P=".tooltip-inner",R=".arrow",$="hover",O="focus",z="click",N="manual",j=function(){function e(e,t){if("undefined"==typeof d["default"])throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var t=e.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=c["default"](e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),c["default"](e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(c["default"](this.getTipElement()).hasClass(D))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),c["default"].removeData(this.element,this.constructor.DATA_KEY),c["default"](this.element).off(this.constructor.EVENT_KEY),c["default"](this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&c["default"](this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===c["default"](this.element).css("display"))throw new Error("Please use show on visible elements");var t=c["default"].Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){c["default"](this.element).trigger(t);var n=u["default"].findShadowRoot(this.element),i=c["default"].contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var a=this.getTipElement(),s=u["default"].getUID(this.constructor.NAME);a.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&c["default"](a).addClass(I);var o="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,r=this._getAttachment(o);this.addAttachmentClass(r);var l=this._getContainer();c["default"](a).data(this.constructor.DATA_KEY,this),c["default"].contains(this.element.ownerDocument.documentElement,this.tip)||c["default"](a).appendTo(l),c["default"](this.element).trigger(this.constructor.Event.INSERTED),this._popper=new d["default"](this.element,a,this._getPopperConfig(r)),c["default"](a).addClass(D),c["default"](a).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&c["default"](document.body).children().on("mouseover",null,c["default"].noop);var _=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,c["default"](e.element).trigger(e.constructor.Event.SHOWN),t===E&&e._leave(null,e)};if(c["default"](this.tip).hasClass(I)){var h=u["default"].getTransitionDurationFromElement(this.tip);c["default"](this.tip).one(u["default"].TRANSITION_END,_).emulateTransitionEnd(h)}else _()}},t.hide=function(e){var t=this,n=this.getTipElement(),i=c["default"].Event(this.constructor.Event.HIDE),a=function(){t._hoverState!==k&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),c["default"](t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if(c["default"](this.element).trigger(i),!i.isDefaultPrevented()){if(c["default"](n).removeClass(D),"ontouchstart"in document.documentElement&&c["default"](document.body).children().off("mouseover",null,c["default"].noop),this._activeTrigger[z]=!1,this._activeTrigger[O]=!1,this._activeTrigger[$]=!1,c["default"](this.tip).hasClass(I)){var s=u["default"].getTransitionDurationFromElement(n);c["default"](n).one(u["default"].TRANSITION_END,a).emulateTransitionEnd(s)}else a();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(e){c["default"](this.getTipElement()).addClass(w+"-"+e)},t.getTipElement=function(){return this.tip=this.tip||c["default"](this.config.template)[0],this.tip},t.setContent=function(){var e=this.getTipElement();this.setElementContent(c["default"](e.querySelectorAll(P)),this.getTitle()),c["default"](e).removeClass(I+" "+D)},t.setElementContent=function(e,t){"object"!=typeof t||!t.nodeType&&!t.jquery?this.config.html?(this.config.sanitize&&(t=l(t,this.config.whiteList,this.config.sanitizeFn)),e.html(t)):e.text(t):this.config.html?c["default"](t).parent().is(e)||e.empty().append(t):e.text(c["default"](t).text())},t.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},t._getPopperConfig=function(e){var t=this;return o({},{placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:R},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}},this.config.popperConfig)},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=o({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:u["default"].isElement(this.config.container)?c["default"](this.config.container):c["default"](document).find(this.config.container)},t._getAttachment=function(e){return M[e.toUpperCase()]},t._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)c["default"](e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(t!==N){var n=t===$?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,i=t===$?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;c["default"](e.element).on(n,e.config.selector,function(t){return e._enter(t)}).on(i,e.config.selector,function(t){return e._leave(t)})}}),this._hideModalHandler=function(){e.element&&e.hide()},c["default"](this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=o({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(e,t){var n=this.constructor.DATA_KEY;(t=t||c["default"](e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),c["default"](e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?O:$]=!0),c["default"](t.getTipElement()).hasClass(D)||t._hoverState===k?t._hoverState=k:(clearTimeout(t._timeout),t._hoverState=k,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===k&&t.show()},t.config.delay.show):t.show())},t._leave=function(e,t){var n=this.constructor.DATA_KEY;(t=t||c["default"](e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),c["default"](e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?O:$]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=E,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){t._hoverState===E&&t.hide()},t.config.delay.hide):t.hide())},t._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},t._getConfig=function(e){var t=c["default"](this.element).data();return Object.keys(t).forEach(function(e){-1!==S.indexOf(e)&&delete t[e]}),"number"==typeof(e=o({},this.constructor.Default,t,"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),u["default"].typeCheckConfig(m,e,this.constructor.DefaultType),e.sanitize&&(e.template=l(e.template,e.whiteList,e.sanitizeFn)),e},t._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},t._cleanTipClass=function(){var e=c["default"](this.getTipElement()),t=e.attr("class").match(x);null!==t&&t.length&&e.removeClass(t.join(""))},t._handlePopperPlacementChange=function(e){this.tip=e.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},t._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(c["default"](e).removeClass(I),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},e._jQueryInterface=function(t){return this.each(function(){var n=c["default"](this),i=n.data(v),a="object"==typeof t&&t;if((i||!/dispose|hide/.test(t))&&(i||(i=new e(this,a),n.data(v,i)),"string"==typeof t)){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},s(e,null,[{key:"VERSION",get:function(){return g}},{key:"Default",get:function(){return C}},{key:"NAME",get:function(){return m}},{key:"DATA_KEY",get:function(){return v}},{key:"Event",get:function(){return A}},{key:"EVENT_KEY",get:function(){return b}},{key:"DefaultType",get:function(){return T}}]),e}();return c["default"].fn[m]=j._jQueryInterface,c["default"].fn[m].Constructor=j,c["default"].fn[m].noConflict=function(){return c["default"].fn[m]=y,j._jQueryInterface},j}),
/*!
  * Bootstrap carousel.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./util.js")):"function"==typeof define&&define.amd?define(["jquery","./util"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Carousel=t(e.jQuery,e.Util)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var o=n(e),r=n(t),l="carousel",c="4.6.0",d="bs.carousel",u="."+d,_=".data-api",h=o["default"].fn[l],p=37,f=39,m=500,g=40,v={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},b={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},y="next",w="prev",x="left",S="right",T="slide"+u,M="slid"+u,C="keydown"+u,k="mouseenter"+u,E="mouseleave"+u,A="touchstart"+u,I="touchmove"+u,D="touchend"+u,P="pointerdown"+u,R="pointerup"+u,$="dragstart"+u,O="load"+u+_,z="click"+u+_,N="carousel",j="active",L="slide",B="carousel-item-right",F="carousel-item-left",q="carousel-item-next",H="carousel-item-prev",V="pointer-event",G=".active",U=".active.carousel-item",W=".carousel-item",Y=".carousel-item img",X=".carousel-item-next, .carousel-item-prev",J=".carousel-indicators",Q="[data-slide], [data-slide-to]",K='[data-ride="carousel"]',Z={TOUCH:"touch",PEN:"pen"},ee=function(){function e(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector(J),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=e.prototype;return t.next=function(){this._isSliding||this._slide(y)},t.nextWhenVisible=function(){var e=o["default"](this._element);!document.hidden&&e.is(":visible")&&"hidden"!==e.css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(w)},t.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(X)&&(r["default"].triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(e){var t=this;this._activeElement=this._element.querySelector(U);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)o["default"](this._element).one(M,function(){return t.to(e)});else{if(n===e)return this.pause(),void this.cycle();var i=e>n?y:w;this._slide(i,this._items[e])}},t.dispose=function(){o["default"](this._element).off(u),o["default"].removeData(this._element,d),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(e){return e=s({},v,e),r["default"].typeCheckConfig(l,e,b),e},t._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);if(!(e<=g)){var t=e/this.touchDeltaX;this.touchDeltaX=0,t>0&&this.prev(),t<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&o["default"](this._element).on(C,function(t){return e._keydown(t)}),"hover"===this._config.pause&&o["default"](this._element).on(k,function(t){return e.pause(t)}).on(E,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var t=function(t){e._pointerEvent&&Z[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},n=function(t){t.originalEvent.touches&&t.originalEvent.touches.length>1?e.touchDeltaX=0:e.touchDeltaX=t.originalEvent.touches[0].clientX-e.touchStartX},i=function(t){e._pointerEvent&&Z[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},m+e._config.interval))};o["default"](this._element.querySelectorAll(Y)).on($,function(e){return e.preventDefault()}),this._pointerEvent?(o["default"](this._element).on(P,function(e){return t(e)}),o["default"](this._element).on(R,function(e){return i(e)}),this._element.classList.add(V)):(o["default"](this._element).on(A,function(e){return t(e)}),o["default"](this._element).on(I,function(e){return n(e)}),o["default"](this._element).on(D,function(e){return i(e)}))}},t._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case p:e.preventDefault(),this.prev();break;case f:e.preventDefault(),this.next()}},t._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(W)):[],this._items.indexOf(e)},t._getItemByDirection=function(e,t){var n=e===y,i=e===w,a=this._getItemIndex(t),s=this._items.length-1;if((i&&0===a||n&&a===s)&&!this._config.wrap)return t;var o=(a+(e===w?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},t._triggerSlideEvent=function(e,t){var n=this._getItemIndex(e),i=this._getItemIndex(this._element.querySelector(U)),a=o["default"].Event(T,{relatedTarget:e,direction:t,from:i,to:n});return o["default"](this._element).trigger(a),a},t._setActiveIndicatorElement=function(e){if(this._indicatorsElement){var t=[].slice.call(this._indicatorsElement.querySelectorAll(G));o["default"](t).removeClass(j);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&o["default"](n).addClass(j)}},t._updateInterval=function(){var e=this._activeElement||this._element.querySelector(U);if(e){var t=parseInt(e.getAttribute("data-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval}},t._slide=function(e,t){var n,i,a,s=this,l=this._element.querySelector(U),c=this._getItemIndex(l),d=t||l&&this._getItemByDirection(e,l),u=this._getItemIndex(d),_=Boolean(this._interval);if(e===y?(n=F,i=q,a=x):(n=B,i=H,a=S),d&&o["default"](d).hasClass(j))this._isSliding=!1;else if(!this._triggerSlideEvent(d,a).isDefaultPrevented()&&l&&d){this._isSliding=!0,_&&this.pause(),this._setActiveIndicatorElement(d),this._activeElement=d;var h=o["default"].Event(M,{relatedTarget:d,direction:a,from:c,to:u});if(o["default"](this._element).hasClass(L)){o["default"](d).addClass(i),r["default"].reflow(d),o["default"](l).addClass(n),o["default"](d).addClass(n);var p=r["default"].getTransitionDurationFromElement(l);o["default"](l).one(r["default"].TRANSITION_END,function(){o["default"](d).removeClass(n+" "+i).addClass(j),o["default"](l).removeClass(j+" "+i+" "+n),s._isSliding=!1,setTimeout(function(){return o["default"](s._element).trigger(h)},0)}).emulateTransitionEnd(p)}else o["default"](l).removeClass(j),o["default"](d).addClass(j),this._isSliding=!1,o["default"](this._element).trigger(h);_&&this.cycle()}},e._jQueryInterface=function(t){return this.each(function(){var n=o["default"](this).data(d),i=s({},v,o["default"](this).data());"object"==typeof t&&(i=s({},i,t));var a="string"==typeof t?t:i.slide;if(n||(n=new e(this,i),o["default"](this).data(d,n)),"number"==typeof t)n.to(t);else if("string"==typeof a){if("undefined"==typeof n[a])throw new TypeError('No method named "'+a+'"');n[a]()}else i.interval&&i.ride&&(n.pause(),n.cycle())})},e._dataApiClickHandler=function(t){var n=r["default"].getSelectorFromElement(this);if(n){var i=o["default"](n)[0];if(i&&o["default"](i).hasClass(N)){var a=s({},o["default"](i).data(),o["default"](this).data()),l=this.getAttribute("data-slide-to");l&&(a.interval=!1),e._jQueryInterface.call(o["default"](i),a),l&&o["default"](i).data(d).to(l),t.preventDefault()}}},a(e,null,[{key:"VERSION",get:function(){return c}},{key:"Default",get:function(){return v}}]),e}();return o["default"](document).on(z,Q,ee._dataApiClickHandler),o["default"](window).on(O,function(){for(var e=[].slice.call(document.querySelectorAll(K)),t=0,n=e.length;t<n;t++){var i=o["default"](e[t]);ee._jQueryInterface.call(i,i.data())}}),o["default"].fn[l]=ee._jQueryInterface,o["default"].fn[l].Constructor=ee,o["default"].fn[l].noConflict=function(){return o["default"].fn[l]=h,ee._jQueryInterface},ee}),
/*!
  * Bootstrap popover.js v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("./tooltip.js")):"function"==typeof define&&define.amd?define(["jquery","./tooltip"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Popover=t(e.jQuery,e.Tooltip)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var r=n(e),l=n(t),c="popover",d="4.6.0",u="bs.popover",_="."+u,h=r["default"].fn[c],p="bs-popover",f=new RegExp("(^|\\s)"+p+"\\S+","g"),m=s({},l["default"].Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),g=s({},l["default"].DefaultType,{content:"(string|element|function)"}),v="fade",b="show",y=".popover-header",w=".popover-body",x={HIDE:"hide"+_,HIDDEN:"hidden"+_,SHOW:"show"+_,SHOWN:"shown"+_,INSERTED:"inserted"+_,CLICK:"click"+_,FOCUSIN:"focusin"+_,FOCUSOUT:"focusout"+_,MOUSEENTER:"mouseenter"+_,MOUSELEAVE:"mouseleave"+_},S=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.isWithContent=function(){return this.getTitle()||this._getContent()},n.addAttachmentClass=function(e){r["default"](this.getTipElement()).addClass(p+"-"+e)},n.getTipElement=function(){return this.tip=this.tip||r["default"](this.config.template)[0],this.tip},n.setContent=function(){var e=r["default"](this.getTipElement());this.setElementContent(e.find(y),this.getTitle());var t=this._getContent();"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find(w),t),e.removeClass(v+" "+b)},n._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},n._cleanTipClass=function(){var e=r["default"](this.getTipElement()),t=e.attr("class").match(f);null!==t&&t.length>0&&e.removeClass(t.join(""))},t._jQueryInterface=function(e){return this.each(function(){var n=r["default"](this).data(u),i="object"==typeof e?e:null;if((n||!/dispose|hide/.test(e))&&(n||(n=new t(this,i),r["default"](this).data(u,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},a(t,null,[{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return m}},{key:"NAME",get:function(){return c}},{key:"DATA_KEY",get:function(){return u}},{key:"Event",get:function(){return x}},{key:"EVENT_KEY",get:function(){return _}},{key:"DefaultType",get:function(){return g}}]),t}(l["default"]);return r["default"].fn[c]=S._jQueryInterface,r["default"].fn[c].Constructor=S,r["default"].fn[c].noConflict=function(){return r["default"].fn[c]=h,S._jQueryInterface},S}),function(e,t){"use strict";var n;e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,i){var a=e.Event(n);return t.trigger(a,i),!1!==a.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(i){var a,s,o,r,l,c;if(n.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){a=i.data("ujs:submit-button-formmethod")||i.attr("method"),s=i.data("ujs:submit-button-formaction")||i.attr("action"),o=e(i[0]).serializeArray();var d=i.data("ujs:submit-button");d&&(o.push(d),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(a=i.data("method"),s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(a=i.data("method")||"get",s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(a=i.data("method"),s=n.href(i),o=i.data("params")||null);return c={type:a||"GET",data:o,dataType:l,beforeSend:function(e,a){if(a.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),!n.fire(i,"ajax:beforeSend",[e,a]))return!1;i.trigger("ajax:send",e)},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(s)},r&&(c.xhrFields={withCredentials:r}),s&&(c.url=s),n.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var a=n.href(i),s=i.data("method"),o=i.attr("target"),r=n.csrfToken(),l=n.csrfParam(),c=e('<form method="post" action="'+a+'"></form>'),d='<input name="_method" value="'+s+'" type="hidden" />';l===t||r===t||n.isCrossDomain(a)||(d+='<input name="'+l+'" value="'+r+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(d).appendTo("body"),c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",(i=e.data("disable-with"))!==t&&(e.data("ujs:enable-with",e[n]()),e[n](i)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,i=e.data("confirm"),a=!1;if(!i)return!0;if(n.fire(e,"confirm")){try{a=n.confirm(i)}catch(s){(console.error||console.log).call(console,s.stack||s)}t=n.fire(e,"confirm:complete",[a])}return a&&t},blankInputs:function(t,n,i){var a,s,o,r=e(),l=n||"input,textarea",c=t.find(l),d={};return c.each(function(){(a=e(this)).is("input[type=radio]")?(o=a.attr("name"),d[o]||(0===t.find('input[type=radio]:checked[name="'+o+'"]').length&&(s=t.find('input[type=radio][name="'+o+'"]'),r=r.add(s)),d[o]=o)):(a.is("input[type=checkbox],input[type=radio]")?a.is(":checked"):!!a.val())===i&&(r=r.add(a))}),!!r.length&&r},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");i!==t&&(e.data("ujs:enable-with",e.html()),e.html(i)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),i.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(e(this))}),i.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(e(this))}),i.on("click.rails",n.linkClickSelector,function(t){var i=e(this),a=i.data("method"),s=i.data("params"),o=t.metaKey||t.ctrlKey;if(!n.allowAction(i))return n.stopEverything(t);if(!o&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(o&&(!a||"GET"===a)&&!s)return!0;var r=n.handleRemote(i);return!1===r?n.enableElement(i):r.fail(function(){n.enableElement(i)}),!1}return a?(n.handleMethod(i),!1):void 0}),i.on("click.rails",n.buttonClickSelector,function(t){var i=e(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var a=n.handleRemote(i);return!1===a?n.enableFormElement(i):a.fail(function(){n.enableFormElement(i)}),!1}),i.on("change.rails",n.inputChangeSelector,function(t){var i=e(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.on("submit.rails",n.formSubmitSelector,function(i){var a,s,o=e(this),r=n.isRemote(o);if(!n.allowAction(o))return n.stopEverything(i);if(o.attr("novalidate")===t)if(o.data("ujs:formnovalidate-button")===t){if((a=n.blankInputs(o,n.requiredInputSelector,!1))&&n.fire(o,"ajax:aborted:required",[a]))return n.stopEverything(i)}else o.data("ujs:formnovalidate-button",t);if(r){if(s=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.on("click.rails",n.formInputClickSelector,function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var a=i.attr("name"),s=a?{name:a,value:i.val()}:null,o=i.closest("form");0===o.length&&(o=e("#"+i.attr("form"))),o.data("ujs:submit-button",s),o.data("ujs:formnovalidate-button",i.attr("formnovalidate")),o.data("ujs:submit-button-formaction",i.attr("formaction")),o.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.on("ajax:send.rails",n.formSubmitSelector,function(t){this===t.target&&n.disableFormElements(e(this))}),i.on("ajax:complete.rails",n.formSubmitSelector,function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),I18n_settings)I18n_settings.hasOwnProperty(k)&&(I18n[k]=I18n_settings[k]);delete I18n_settings,String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return t<this.length?t|=0:t=this.length,this.substr(t-e.length,e.length)===e}),Object.values||(Object.values=function(e){Object.keys(e).map(function(t){return e[t]})}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var s=t[a];if(e.call(i,s,a,t))return s;a++}return undefined}}),("undefined"!=typeof window?window:this).Routes=(()=>{const e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);let t;!function(e){e[e.GROUP=1]="GROUP",e[e.CAT=2]="CAT",e[e.SYMBOL=3]="SYMBOL",e[e.OR=4]="OR",e[e.STAR=5]="STAR",e[e.LITERAL=6]="LITERAL",e[e.SLASH=7]="SLASH",e[e.DOT=8]="DOT"}(t||(t={}));const n="undefined"!=typeof window,i={CJS:{define(e){module.exports=e},isSupported:()=>"object"==typeof module},AMD:{define(e){define([],function(){return e})},isSupported:()=>"function"==typeof define&&!!define.amd},UMD:{define(e){if(i.AMD.isSupported())i.AMD.define(e);else if(i.CJS.isSupported())try{i.CJS.define(e)}catch(t){if("TypeError"!==t.name)throw t}},isSupported:()=>i.AMD.isSupported()||i.CJS.isSupported()},ESM:{define(){},isSupported:()=>!0},NIL:{define(){},isSupported:()=>!0},DTS:{define(e){i.ESM.define(e)},isSupported:()=>i.ESM.isSupported()}};class a extends Error{constructor(...e){super(`Route missing required keys: ${e.join(", ")}`),this.keys=e,Object.setPrototypeOf(this,Object.getPrototypeOf(this)),this.name=a.name}}const s=/[^a-zA-Z0-9\-._~!$&'()*+,;=:@]/g,o=["anchor","trailing_slash","subdomain","host","port","protocol"];class r{constructor(){this.configuration={prefix:"",default_url_options:{},special_options_key:"_options",serializer:this.default_serializer.bind(this)}}default_serializer(t,n){if(this.is_nullable(t))return"";if(!n&&!this.is_object(t))throw new Error("Url parameters should be a javascript hash");n=n||"";const i=[];if(this.is_array(t))for(const e of t)i.push(this.default_serializer(e,n+"[]"));else if(this.is_object(t))for(let a in t){if(!e(t,a))continue;let s=t[a];this.is_nullable(s)&&n&&(s=""),this.is_not_nullable(s)&&(n&&(a=n+"["+a+"]"),i.push(this.default_serializer(s,a)))}else this.is_not_nullable(t)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(""+t));return i.join("&")}serialize(e){return this.configuration.serializer(e)}extract_options(e,t){const n=t[t.length-1];return t.length>e&&0===n||this.is_object(n)&&!this.looks_like_serialized_model(n)?(this.is_object(n)&&delete n[this.configuration.special_options_key],{args:t.slice(0,t.length-1),options:n}):{args:t,options:{}}}looks_like_serialized_model(e){return this.is_object(e)&&!(this.configuration.special_options_key in e)&&("id"in e||"to_param"in e||"toParam"in e)}path_identifier(e){const t=this.unwrap_path_identifier(e);return this.is_nullable(t)||!1===t?"":""+t}unwrap_path_identifier(e){let t=e;return this.is_object(e)?(t="to_param"in e?e.to_param:"toParam"in e?e.toParam:"id"in e?e.id:e,this.is_callable(t)?t.call(e):t):e}partition_parameters(t,n,i,a){let{args:s,options:o}=this.extract_options(t.length,a);if(s.length>t.length)throw new Error("Too many parameters provided for path");let r=s.length>n.length;const l={...this.configuration.default_url_options};for(const n in o){const i=o[n];e(o,n)&&(r=!0,t.includes(n)&&(l[n]=i))}o={...this.configuration.default_url_options,...i,...o};const c={};let d={};for(const t in o){if(!e(o,t))continue;const a=o[t];if("params"===t){if(!this.is_object(a))throw new Error("params value should always be an object");d={...d,...a}}else this.is_reserved_option(t)?c[t]=a:this.is_nullable(a)||a===i[t]&&!n.includes(t)||(d[t]=a)}const u=r?t:n;let _=0;for(const t of u)if(_<s.length){const n=s[_];e(l,t)||(d[t]=n,++_)}return{keyword_parameters:c,query_parameters:d}}build_route(t,n,i,s,o,r){const{keyword_parameters:l,query_parameters:c}=this.partition_parameters(t,n,i,r),d=n.filter(t=>!e(c,t)||this.is_nullable(c[t]));if(d.length)throw new a(...d);let u=this.get_prefix()+this.visit(s,c);l.trailing_slash&&(u=u.replace(/(.*?)[/]?$/,"$1/"));const _=this.serialize(c);return _.length&&(u+="?"+_),u+=l.anchor?"#"+l.anchor:"",o&&(u=this.route_url(l)+u),u}visit(e,n,i=!1){switch(e[0]){case t.GROUP:return this.visit(e[1],n,!0);case t.CAT:return this.visit_cat(e,n,i);case t.SYMBOL:return this.visit_symbol(e,n,i);case t.STAR:return this.visit_globbing(e[1],n,!0);case t.LITERAL:case t.SLASH:case t.DOT:return e[1];default:throw new Error("Unknown Rails node type")}}is_not_nullable(e){return!this.is_nullable(e)}is_nullable(e){return e===undefined||null===e}visit_cat([e,t,n],i,a){const s=this.visit(t,i,a);let o=this.visit(n,i,a);return a&&(this.is_optional_node(t[0])&&!s||this.is_optional_node(n[0])&&!o)?"":("/"===s[s.length-1]&&"/"===o[0]&&(o=o.substring(1)),s+o)}visit_symbol([e,t],n,i){const s=this.path_identifier(n[t]);if(delete n[t],s.length)return this.encode_segment(s);if(i)return"";throw new a(t)}encode_segment(e){return e.replace(s,e=>encodeURIComponent(e))}is_optional_node(e){return[t.STAR,t.SYMBOL,t.CAT].includes(e)}build_path_spec(e,n=!1){let i;switch(e[0]){case t.GROUP:return"("+this.build_path_spec(e[1])+")";case t.CAT:return this.build_path_spec(e[1])+this.build_path_spec(e[2]);case t.STAR:return this.build_path_spec(e[1],!0);case t.SYMBOL:return i=e[1],n?(i.startsWith("*")?"":"*")+i:":"+i;case t.SLASH:case t.DOT:case t.LITERAL:return e[1];default:throw new Error("Unknown Rails node type")}}visit_globbing(e,t,n){const i=e[1];let a=t[i];if(delete t[i],this.is_nullable(a))return this.visit(e,t,n);this.is_array(a)&&(a=a.join("/"));const s=this.path_identifier(a);return encodeURI(s)}get_prefix(){const e=this.configuration.prefix;return e.match("/$")?e.substring(0,e.length-1):e}route(e,t,n=!1){const i=[],a=[],s={};for(const[t,{r:n,d:o}]of Object.entries(e))a.push(t),n&&i.push(t),this.is_not_nullable(o)&&(s[t]=o);const o=(...e)=>this.build_route(a,i,s,t,n,e);return o.requiredParams=(()=>i),o.toString=(()=>this.build_path_spec(t)),o}route_url(e){const t=e.host||this.current_host();if(!t)return"";const n=e.subdomain?e.subdomain+".":"",i=e.protocol||this.current_protocol();let a=e.port||(e.host?undefined:this.current_port());return i+"://"+n+t+(a=a?":"+a:"")}current_host(){var e;return n&&(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.hostname)||""}current_protocol(){var e,t;return n&&(null===(t=null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)||void 0===t?void 0:t.replace(/:$/,""))||"http"}current_port(){var e;return n&&(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.port)||""}is_object(e){return"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}is_array(e){return e instanceof Array}is_callable(e){return"function"==typeof e&&!!e.call}is_reserved_option(e){return o.includes(e)}configure(e){return this.configuration={...this.configuration,...e},this.configuration}config(){return{...this.configuration}}is_module_supported(e){return i[e].isSupported()}ensure_module_supported(e){if(!this.is_module_supported(e))throw new Error(`${e} is not supported by runtime`)}define_module(e,t){this.ensure_module_supported(e),i[e].define(t)}}const l=new r,c={r:(e,t,n)=>l.route(e,t,n)},d={...c,configure:e=>l.configure(e),config:()=>l.config(),serialize:e=>l.serialize(e),...{abuse_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"abuse_reports"],[1,[2,[8,"."],[3,"format"]]]]]]),accept_group_requests_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"requests"],[2,[7,"/"],[2,[6,"accept"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),accept_invite_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"accept_invite"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),acceptable_use_policy_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"acceptable_use_policy"],[1,[2,[8,"."],[3,"format"]]]]]]),account_info_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"account_info"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),action_abuse_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"abuse_reports"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"action"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),actions_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"actions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),add_courses_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),add_criteria_admin_advertising_email_campaign_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_criteria"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),add_groups_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),add_study_aids_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),add_study_aids_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),add_suggested_tags_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"add_suggested_tags_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),add_suggested_tags_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"add_suggested_tags"],[1,[2,[8,"."],[3,"format"]]]]]]]]),add_users_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_users"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),add_users_perform_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"add_users_perform"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_abuse_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"abuse_reports"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_admin_tag_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"admin_tag_reports"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_advertising_email_campaign_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_advertising_email_campaigns_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_announcement_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_announcements_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"announcements"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_blacklist_term_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"blacklist_terms"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_blacklist_terms_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"blacklist_terms"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_browser_push_notifications_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"browser_push"],[2,[7,"/"],[2,[6,"notifications"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_config_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"config"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_export_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"export"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_faq_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_faq_groups_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_faq_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_faq_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_faq_question_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"questions"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_faq_questions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"questions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_featured_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"featured_study_aids"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_featured_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"featured_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_import_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"import"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_library_custom_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"custom_filter_lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_custom_filter_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"custom_filter_lists"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_library_custom_filter_option_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"custom_filter_options"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_custom_filter_options_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"custom_filter_options"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_library_exam_level_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"exam_levels"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_exam_levels_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"exam_levels"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_filter_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_library_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_subject_topic_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"subject_topics"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_library_subject_topics_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"subject_topics"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_library_subjects_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"subjects"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_marketing_delivery_jobs_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_jobs"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_marketing_delivery_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_marketing_delivery_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_lists"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_marketing_template_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"templates"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_marketing_templates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"templates"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_payments_billing_detail_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"billing_details"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_payments_countries_vat_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"countries"],[2,[7,"/"],[2,[6,"vat"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_payments_country_vat_path:c.r({locale:{},country_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"countries"],[2,[7,"/"],[2,[3,"country_id"],[2,[7,"/"],[2,[6,"vat"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),admin_payments_country_vat_index_path:c.r({locale:{},country_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"countries"],[2,[7,"/"],[2,[3,"country_id"],[2,[7,"/"],[2,[6,"vat"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),admin_payments_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_payments_institution_institution_plans_path:c.r({locale:{},institution_id:{r:!0},format:{}
},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"institution_plans"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),admin_payments_institutions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_payments_plan_template_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"plan_templates"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),admin_payments_plan_templates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"plan_templates"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_payments_user_plan_downgrade_path:c.r({locale:{},user_id:{r:!0},plan_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[2,[7,"/"],[2,[3,"plan_id"],[2,[7,"/"],[2,[6,"downgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]]]),admin_payments_user_plan_downgrade_plan_path:c.r({locale:{},user_id:{r:!0},plan_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[2,[7,"/"],[2,[3,"plan_id"],[2,[7,"/"],[2,[6,"downgrade_plan"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]]]),admin_payments_user_plans_path:c.r({locale:{},user_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),admin_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"reports"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_resource_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_review_hide_path:c.r({locale:{},admin_review_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin_reviews"],[2,[7,"/"],[2,[3,"admin_review_id"],[2,[7,"/"],[2,[6,"hide"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_review_unhide_path:c.r({locale:{},admin_review_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin_reviews"],[2,[7,"/"],[2,[3,"admin_review_id"],[2,[7,"/"],[2,[6,"unhide"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_root_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[1,[2,[8,"."],[3,"format"]]]]]]),admin_sidekiq_web_path:c.r({locale:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[6,"sidekiq"]]]]]),admin_spam_result_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"spam_results"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_spam_results_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"spam_results"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_stats_pages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"stats_pages"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_suspended_users_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"suspended_users"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_user_exports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"user_exports"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_user_targetting_entity_criteria_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"user_targetting_entity_criteria"],[1,[2,[8,"."],[3,"format"]]]]]]]]),admin_user_targetting_entity_criterion_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"user_targetting_entity_criteria"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),admin_users_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[1,[2,[8,"."],[3,"format"]]]]]]]]),advertising_email_campaign_delivery_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaign_deliveries"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),alert_actions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"alert"],[2,[7,"/"],[2,[6,"actions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),all_activity_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"all_activity"],[1,[2,[8,"."],[3,"format"]]]]]]),all_for_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"all_for"],[1,[2,[8,"."],[3,"format"]]]]]]]]),amp_cookie_consent_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"amp"],[2,[7,"/"],[2,[6,"cookie_consent"],[1,[2,[8,"."],[3,"format"]]]]]]]]),analytics_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"analytics"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),analytics_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"analytics"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),annotation_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"annotations"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),annotations_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"annotations"],[1,[2,[8,"."],[3,"format"]]]]]]),announcements_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"announcements"],[1,[2,[8,"."],[3,"format"]]]]]]),anonymous_session_data_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"anonymous_session_data"],[1,[2,[8,"."],[3,"format"]]]]]]),archive_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"archive"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),archived_subjects_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[6,"archive"],[1,[2,[8,"."],[3,"format"]]]]]]]]),attach_attachments_path:c.r({locale:{},type:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"type"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attach"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),attach_media_course_course_module_path:c.r({locale:{},course_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attach_media"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),attach_study_aid_course_course_module_path:c.r({locale:{},course_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attach_study_aid"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),attachment_numbers_mind_map_node_path:c.r({locale:{},mind_map_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"mind_map_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attachment_numbers"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),attempts_smart_link_share_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_link_shares"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attempts"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),authorise_3d_secure_payments_three_d_secure_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"three_d_secure"],[2,[7,"/"],[2,[6,"authorise_3d_secure"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),available_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"available"],[1,[2,[8,"."],[3,"format"]]]]]]),avatar_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"avatar"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),background_jobs_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"background_jobs"],[1,[2,[8,"."],[3,"format"]]]]]]),batch_create_all_completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[2,[7,"/"],[2,[6,"batch_create_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),batch_create_completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[2,[7,"/"],[2,[6,"batch_create"],[1,[2,[8,"."],[3,"format"]]]]]]]]),batch_create_flowchart_connections_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"connections"],[2,[7,"/"],[2,[6,"batch_create"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_create_flowchart_nodes_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[6,"batch_create"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_destroy_all_completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[2,[7,"/"],[2,[6,"batch_destroy_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),batch_destroy_completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]),batch_destroy_flash_card_deck_flash_cards_path:c.r({locale:{},flash_card_deck_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"flash_card_deck_id"],[2,[7,"/"],[2,[6,"flash_cards"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_destroy_flowchart_connections_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"connections"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_destroy_flowchart_nodes_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_destroy_mind_map_nodes_path:c.r({locale:{},mind_map_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"mind_map_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_destroy_note_note_page_clippings_path:c.r({locale:{},note_id:{r:!0},note_page_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[3,"note_page_id"],[2,[7,"/"],[2,[6,"clippings"],[2,[7,"/"],[2,[6,"batch_destroy"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),batch_set_properties_slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"batch_set_properties"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),batch_update_flash_card_deck_flash_cards_path:c.r({locale:{},flash_card_deck_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"flash_card_deck_id"],[2,[7,"/"],[2,[6,"flash_cards"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_update_flowchart_connections_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"connections"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_update_flowchart_nodes_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_update_note_note_page_clippings_path:c.r({locale:{},note_id:{r:!0},note_page_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[3,"note_page_id"],[2,[7,"/"],[2,[6,"clippings"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),batch_update_note_note_pages_path:c.r({locale:{},note_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),batch_update_quiz_quiz_questions_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[6,"batch_update"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),browser_push_notification_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"browser_push"],[2,[7,"/"],[2,[6,"notifications"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),browser_push_subscriptions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"browser_push"],[2,[7,"/"],[2,[6,"subscriptions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),cancel_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"cancel"],[1,[2,[8,"."],[3,"format"]]]]]]]]),cancel_account_popup_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"cancel"],[1,[2,[8,"."],[3,"format"]]]]]]]]),cancel_downgrade_payments_billing_detail_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"billing_details"],[2,[7,"/"],[2,[6,"cancel_downgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),cancel_invite_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"cancel_invite"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),cancel_user_registration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"cancel"],[1,[2,[8,"."],[3,"format"]]]]]]]]),certificate_popup_course_award_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_awards"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"certificate_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),certificates_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"certificates"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),challenge_3d_secure_payments_three_d_secure_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"three_d_secure"],[2,[7,"/"],[2,[6,"challenge_3d_secure"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),change_admins_perform_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"change_admins_perform"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),change_admins_popup_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"change_admins_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),change_current_institution_memberships_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"memberships"],[2,[7,"/"],[2,[6,"change_current"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),change_email_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"change_email"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),change_super_admins_perform_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"change_super_admins_perform"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),change_super_admins_popup_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"change_super_admins_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),charge_payments_billing_detail_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"billing_details"],[2,[7,"/"],[2,[6,"charge"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),check_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"check"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),clone_admin_faq_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"clone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),clone_admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"clone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),clone_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"clone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),clone_popup_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"clone_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),clone_quiz_quiz_questions_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[6,"clone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),clone_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"clone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),clone_to_quiz_popup_quiz_quiz_questions_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[6,"clone_to_quiz_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),cohort_study_aid_performance_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"cohort_study_aid_performance_reports"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),comment_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"comment"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),comments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[1,[2,[8,"."],[3,"format"]]]]]]),company_info_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"company_info"],[1,[2,[8,"."],[3,"format"]]]]]]),completion_marker_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"completion_markers"],[1,[2,[8,"."],[3,"format"]]]]]]),config_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"config"],[1,[2,[8,"."],[3,"format"]]]]]]]]),confirm_downgrade_payments_payments_path:c.r({locale:{},plan_type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[3,"plan_type"],[2,[7,"/"],[2,[6,"confirm_downgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),confirm_profile_registration_profile_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"registration_profile"],[2,[7,"/"],[2,[6,"confirm_profile"],[1,[2,[8,"."],[3,"format"]]]]]]]]),confirm_reupgrade_payments_payments_path:c.r({locale:{},plan_type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[3,"plan_type"],[2,[7,"/"],[2,[6,"confirm_reupgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),confirm_upgrade_payments_payments_path:c.r({locale:{},plan_type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[3,"plan_type"],[2,[7,"/"],[2,[6,"confirm_upgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[1,[2,[8,"."],[3,"format"]]]]]]),contextual_navigation_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"contextual_navigation"],[1,[2,[8,"."],[3,"format"]]]]]]),contributors_public_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"contributors"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),conversations_private_messages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[2,[7,"/"],[2,[6,"conversations"],[1,[2,[8,"."],[3,"format"]]]]]]]]),convert_to_note_mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"convert_to_note"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),convert_to_note_popup_mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"convert_to_note_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),correct_answers_quiz_quiz_question_path:c.r({locale:{},quiz_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"correct_answers"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),counts_library_contents_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"contents"],[2,[7,"/"],[2,[6,"counts"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),course_assignment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_assignments"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),course_assignments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_assignments"],[1,[2,[8,"."],[3,"format"]]]]]]),course_attachments_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"attachments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),course_award_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_awards"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),course_course_module_path:c.r({locale:{},course_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),course_course_module_attachment_path:c.r({locale:{},course_id:{r:!0},course_module_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"course_module_id"],[2,[7,"/"],[2,[6,"attachment"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),course_course_modules_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),course_public_course_shares_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"public_course_shares"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),courses_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[1,[2,[8,"."],[3,"format"]]]]]]),courses_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),create_and_attach_annotation_mind_map_node_path:c.r({locale:{},mind_map_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"mind_map_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"create_and_attach_annotation"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),csp_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"csp_reports"],[1,[2,[8,"."],[3,"format"]]]]]]),current_profiles_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[6,"current"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dashboard_path:c.r({locale:{},format:{}},[2,[7,"/"],[2,[1,[3,"locale"]],[1,[2,[8,"."],[3,"format"]]]]]),dashboard_recently_edited_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"dashboard"],[2,[7,"/"],[2,[6,"recently_edited_resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dashboard_recently_viewed_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"dashboard"],[2,[7,"/"],[2,[6,"recently_viewed_resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dashboard_suggested_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"dashboard"],[2,[7,"/"],[2,[6,"suggested_resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),data_capture_form_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"forms"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),data_capture_form_field_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"form_fields"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),data_capture_form_fields_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"form_fields"],[1,[2,[8,"."],[3,"format"]]]]]]]]),data_capture_forms_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"forms"],[1,[2,[8,"."],[3,"format"]]]]]]]]),data_capture_link_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),data_capture_link_callback_test_path:c.r({locale:{},link_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[3,"link_id"],[2,[7,"/"],[2,[6,"callback_test"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),data_capture_link_form_submission_path:c.r({locale:{},link_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[3,"link_id"],[2,[7,"/"],[2,[6,"form_submissions"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),data_capture_link_form_submissions_path:c.r({locale:{},link_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[3,"link_id"],[2,[7,"/"],[2,[6,"form_submissions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),data_capture_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[1,[2,[8,"."],[3,"format"]]]]]]]]),data_capture_user_course_results_consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"data_capture_user_course_results"],[1,[2,[8,"."],[3,"format"]]]]]]]]),decline_invite_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"decline_invite"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_media_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"delete"],[1,[2,[8,"."],[3,"format"]]]]]]]]),delete_popup_comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_folder_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"folders"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_group_group_topic_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"group_topics"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),delete_popup_poll_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"polls"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_poll_choice_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"poll_choices"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_share_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"share_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),delete_popup_subject_path:c.r({locale:{},id:{r:!0},format:{}
},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"delete_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),delete_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"delete"],[1,[2,[8,"."],[3,"format"]]]]]]]]),demote_admin_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"demote"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),destroy_user_session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_out"],[1,[2,[8,"."],[3,"format"]]]]]]]]),detach_attachment_course_course_module_path:c.r({locale:{},course_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"detach_attachment"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),detach_attachment_popup_course_course_module_path:c.r({locale:{},course_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"detach_attachment_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),detach_attachments_path:c.r({locale:{},type:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"type"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"detach"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),directory_path:c.r({locale:{},type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"directory"],[2,[7,"/"],[2,[3,"type"],[1,[2,[8,"."],[3,"format"]]]]]]]]),discover_groups_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[6,"discover"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dismiss_all_announcements_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[6,"dismiss_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dismiss_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"dismiss"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),dismiss_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"dismiss"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),dismiss_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"dismiss"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),dismiss_related_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"related_resources"],[2,[7,"/"],[2,[6,"dismiss"],[1,[2,[8,"."],[3,"format"]]]]]]]]),dismiss_starter_checklist_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"dismiss_starter_checklist"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),dismiss_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"dismiss"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_admin_advertising_email_campaign_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_announcement_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),edit_admin_blacklist_term_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"blacklist_terms"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),edit_admin_faq_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_featured_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"featured_study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),edit_admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_marketing_delivery_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_marketing_template_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"templates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_payments_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_payments_plan_template_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"plan_templates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),edit_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_course_assignment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_assignments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_external_private_share_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_flash_card_deck_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_flowchart_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_group_invites_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"invites"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),edit_group_membership_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"memberships"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),edit_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_interests_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit_interests"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_levels_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit_levels"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_media_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]),edit_meta_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"edit_meta_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),edit_mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_ms_teams_assignment_submission_study_aid_outcomes_path:c.r({locale:{},assignment_id:{r:!0},submission_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"assignments"],[2,[7,"/"],[2,[3,"assignment_id"],[2,[7,"/"],[2,[6,"submissions"],[2,[7,"/"],[2,[3,"submission_id"],[2,[7,"/"],[2,[6,"study_aid_outcomes"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]]]),edit_note_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_payments_billing_detail_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"billing_details"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_quiz_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_rails_conductor_inbound_email_path:c.r({id:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]),edit_share_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"share_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_slide_set_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_smart_link_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_user_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]),edit_user_password_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"password"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),edit_user_registration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"edit"],[1,[2,[8,"."],[3,"format"]]]]]]]]),email_preferences_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"email_preferences"],[1,[2,[8,"."],[3,"format"]]]]]]]]),embed_button_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"embed_button"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),embed_button_public_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"embed_button"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),embed_popup_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"embed_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),export_to_csv_admin_payments_payments_path:c.r({locale:{},report_class:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"show"],[2,[7,"/"],[2,[3,"report_class"],[2,[7,"/"],[2,[6,"export_to_csv"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),export_to_csv_admin_reports_path:c.r({locale:{},report_class:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"show"],[2,[7,"/"],[2,[3,"report_class"],[2,[7,"/"],[2,[6,"export_to_csv"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),external_private_share_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),external_private_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[1,[2,[8,"."],[3,"format"]]]]]]),failure_3d_secure_payments_three_d_secure_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"three_d_secure"],[2,[7,"/"],[2,[6,"failure_3d_secure"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),faq_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),faq_group_question_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),feature_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"feature"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),feedback_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"feedback"],[1,[2,[8,"."],[3,"format"]]]]]]),fetch_comments_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"fetch_comments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),fetch_ids_status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[6,"fetch_ids"],[1,[2,[8,"."],[3,"format"]]]]]]]]),fetch_likes_comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"fetch_likes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),fetch_likes_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"fetch_likes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),fetch_media_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"fetch"],[1,[2,[8,"."],[3,"format"]]]]]]]]),fetch_reporters_abuse_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"abuse_reports"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"fetch_reporters"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),fetch_status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[6,"fetch"],[1,[2,[8,"."],[3,"format"]]]]]]]]),fetch_suggested_activity_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"suggested_activity"],[1,[2,[8,"."],[3,"format"]]]]]]),flash_card_deck_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),flash_card_deck_assessments_path:c.r({locale:{},flash_card_deck_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"flash_card_deck_id"],[2,[7,"/"],[2,[6,"assessments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),flash_card_deck_flash_card_path:c.r({locale:{},flash_card_deck_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"flash_card_deck_id"],[2,[7,"/"],[2,[6,"flash_cards"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),flash_card_deck_flash_cards_path:c.r({locale:{},flash_card_deck_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"flash_card_deck_id"],[2,[7,"/"],[2,[6,"flash_cards"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),flash_card_decks_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[1,[2,[8,"."],[3,"format"]]]]]]),flowchart_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),flowchart_connection_path:c.r({locale:{},flowchart_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"connections"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),flowchart_connections_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"connections"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),flowchart_node_path:c.r({locale:{},flowchart_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),flowchart_nodes_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),flowcharts_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[1,[2,[8,"."],[3,"format"]]]]]]),folder_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"folders"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),folder_resources_subject_path:c.r({locale:{},id:{r:!0},folder_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"folder_resources"],[2,[7,"/"],[2,[3,"folder_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),folder_subject_path:c.r({locale:{},id:{r:!0},folder_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"folders"],[2,[7,"/"],[2,[3,"folder_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),folders_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"folders"],[1,[2,[8,"."],[3,"format"]]]]]]),friend_share_popup_user_study_aid_performance_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"user_study_aid_performance_reports"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"friend_share_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),friends_activity_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends_activity"],[1,[2,[8,"."],[3,"format"]]]]]]),friends_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"friends"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),friends_typeahead_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"friends_typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]]]),get_courses_consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"get_courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]),get_json_study_aids_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"json"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),get_resources_consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"get_resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),group_courses_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_current_membership_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"membership"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_existing_invite_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"existing_invites"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),group_existing_invites_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"existing_invites"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_group_topic_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"group_topics"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),group_group_topics_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"group_topics"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_guidelines_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"group_guidelines"],[1,[2,[8,"."],[3,"format"]]]]]]),group_invitees_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"invitees"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_invites_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"invites"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_members_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"members"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),group_membership_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"memberships"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),group_requests_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"requests"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),groups_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[1,[2,[8,"."],[3,"format"]]]]]]),groups_activity_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups_activity"],[1,[2,[8,"."],[3,"format"]]]]]]),groups_admin_stats_pages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"stats_pages"],[2,[7,"/"],[2,[6,"groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),groups_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),groups_typeahead_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"groups_typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]]]),heatmap_analytics_for_date_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"heatmap_analytics_for_date"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),heatmap_analytics_for_date_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"heatmap_analytics_for_date"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),hide_group_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"hide_group"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),hide_user_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"hide_user"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),image_dmz_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"image_dmz"],[1,[2,[8,"."],[3,"format"]]]]]]),image_view_flowchart_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"image_view"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),image_view_mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"image_view"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),import_media_flowchart_nodes_path:c.r({locale:{},flowchart_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"flowchart_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[6,"import_media"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),import_popup_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"import_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),in_subject_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"in_subject"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),index_faq_faq_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"faq"],[1,[2,[8,"."],[3,"format"]]]]]]),institution_contact_payments_compare_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"compare"],[2,[7,"/"],[2,[6,"institution_contact"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),institution_invite_path:c.r({locale:{},institution_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"invites"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),institution_invite_accept_path:c.r({locale:{},institution_invite_id:{r:!0},uuid:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institution_invites"],[2,[7,"/"],[2,[3,"institution_invite_id"],[2,[7,"/"],[2,[3,"uuid"],[2,[7,"/"],[2,[6,"accept"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),institution_invites_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"invites"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),institution_membership_path:c.r({locale:{},institution_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"memberships"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),institution_memberships_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"memberships"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),institution_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institution_profiles"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),institution_user_institution_user_plans_path:c.r({locale:{},institution_id:{r:!0},user_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"institution_user_plans"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),invite_by_email_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"invite_by_email"],[1,[2,[8,"."],[3,"format"]]]]]]]]),invites_received_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"invites_received"],[1,[2,[8,"."],[3,"format"]]]]]]]]),invites_sent_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"invites_sent"],[1,[2,[8,"."],[3,"format"]]]]]]]]),issue_invite_to_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"issue_invite_to"],[1,[2,[8,"."],[3,"format"]]]]]]]]),kill_alert_action_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"alert"],[2,[7,"/"],[2,[6,"actions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"kill"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),kill_all_alert_actions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"alert"],[2,[7,"/"],[2,[6,"actions"],[2,[7,"/"],[2,[6,"kill_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),kill_many_alert_actions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"alert"],[2,[7,"/"],[2,[6,"actions"],[2,[7,"/"],[2,[6,"kill_many"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),last_created_resource_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"last_created_resource"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),last_deck_attempt_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"last_deck_attempt"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),leave_conversation_private_messages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[2,[7,"/"],[2,[6,"leave_conversation"],[1,[2,[8,"."],[3,"format"]]]]]]]]),leave_popup_institution_membership_path:c.r({locale:{},institution_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"memberships"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"leave_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),library_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"library"],[1,[2,[8,"."],[3,"format"]]]]]]),library_contents_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"contents"],[1,[2,[8,"."],[3,"format"]]]]]]]]),like_comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"like"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),like_list_comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"like_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),like_list_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"like_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),like_status_update_path:c.r({
locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"like"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),link_course_data_capture_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[6,"link_course"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),link_resource_data_capture_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[6,"link_resource"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),linked_items_external_private_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[6,"linked_items"],[1,[2,[8,"."],[3,"format"]]]]]]]]),linked_items_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"linked_items"],[1,[2,[8,"."],[3,"format"]]]]]]]]),list_courses_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[6,"list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),list_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"list"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),list_groups_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[6,"list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),list_reported_comments_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"list_reported_comments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),list_reported_discussions_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"list_reported_discussions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),list_subjects_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[6,"list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),list_tags_path:c.r({locale:{},tag:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"tags"],[2,[7,"/"],[2,[3,"tag"],[1,[2,[8,"."],[3,"format"]]]]]]]]),listing_admin_announcements_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[6,"listing"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),listing_announcements_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[6,"listing"],[1,[2,[8,"."],[3,"format"]]]]]]]]),listing_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"listing"],[1,[2,[8,"."],[3,"format"]]]]]]]]),log_completion_marker_course_course_completion_markers_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_completion_markers"],[2,[7,"/"],[2,[6,"log_completion_marker"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),mail_feedback_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"feedback"],[1,[2,[8,"."],[3,"format"]]]]]]),make_payment_payments_payments_path:c.r({locale:{},plan_type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[3,"plan_type"],[2,[7,"/"],[2,[6,"make_payment"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),manage_modules_popup_course_course_modules_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[6,"manage_modules_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),manage_profile_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"manage_profile"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),manage_users_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"manage_users"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),mark_as_completed_admin_abuse_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"abuse_reports"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"mark_as_completed"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),mathjax_path:c.r({uri:{r:!0},format:{}},[2,[7,"/"],[2,[6,"mathjax"],[2,[7,"/"],[2,[5,[3,"uri"]],[1,[2,[8,"."],[3,"format"]]]]]]]),media_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),media_index_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[1,[2,[8,"."],[3,"format"]]]]]]),media_popup_media_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"media_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),media_show_path:c.r({locale:{},media_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[3,"media_id"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),mind_map_node_path:c.r({locale:{},mind_map_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"mind_map_id"],[2,[7,"/"],[2,[6,"nodes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),mind_map_nodes_path:c.r({locale:{},mind_map_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"mind_map_id"],[2,[7,"/"],[2,[6,"nodes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),mind_maps_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[1,[2,[8,"."],[3,"format"]]]]]]),move_all_study_aid_folders_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aid_folders"],[2,[7,"/"],[2,[6,"move_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),move_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"move_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),move_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"move"],[1,[2,[8,"."],[3,"format"]]]]]]]]),move_study_aids_topic_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"move_study_aids_topic"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),move_study_aids_topic_popup_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"move_study_aids_topic_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),move_topic_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"move_topic_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),move_topic_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"move_topic"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_activities_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"activities"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_assignment_submission_path:c.r({locale:{},assignment_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"assignments"],[2,[7,"/"],[2,[3,"assignment_id"],[2,[7,"/"],[2,[6,"submission"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),ms_teams_assignment_submission_attempt_outcomes_path:c.r({locale:{},assignment_id:{r:!0},submission_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"assignments"],[2,[7,"/"],[2,[3,"assignment_id"],[2,[7,"/"],[2,[6,"submissions"],[2,[7,"/"],[2,[3,"submission_id"],[2,[7,"/"],[2,[6,"attempt_outcomes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),ms_teams_assignment_submission_study_aid_outcomes_path:c.r({locale:{},assignment_id:{r:!0},submission_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"assignments"],[2,[7,"/"],[2,[3,"assignment_id"],[2,[7,"/"],[2,[6,"submissions"],[2,[7,"/"],[2,[3,"submission_id"],[2,[7,"/"],[2,[6,"study_aid_outcomes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),ms_teams_assignments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"assignments"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_configuration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"configuration"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_individual_subscriptions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"individual_subscriptions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_institution_memberships_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"memberships"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),ms_teams_institution_subscriptions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"institution_subscriptions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_institution_users_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"users"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),ms_teams_permissions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"permissions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_personal_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"personal"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_registration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"registration"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"reports"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_reports_class_overview_path:c.r({locale:{},class_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"classes"],[2,[7,"/"],[2,[3,"class_id"],[2,[7,"/"],[2,[6,"overview"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),ms_teams_reports_class_study_aid_path:c.r({locale:{},class_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"classes"],[2,[7,"/"],[2,[3,"class_id"],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),ms_teams_sso_session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"sso_session"],[1,[2,[8,"."],[3,"format"]]]]]]]]),ms_teams_study_aid_study_aid_readers_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"study_aid_readers"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),ms_teams_subscription_notifications_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"subscription_notifications"],[1,[2,[8,"."],[3,"format"]]]]]]]]),mutual_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"mutual"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),my_activity_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"my_activity"],[1,[2,[8,"."],[3,"format"]]]]]]),new_admin_advertising_email_campaign_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_announcement_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"announcements"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_admin_blacklist_term_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"blacklist_terms"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_admin_export_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"export"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_admin_faq_list_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_featured_study_aid_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"featured_study_aids"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_admin_import_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"import"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_admin_library_filter_list_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_marketing_delivery_job_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_jobs"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_marketing_delivery_list_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"delivery_lists"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_marketing_template_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"marketing"],[2,[7,"/"],[2,[6,"templates"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_payments_institution_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_payments_institution_institution_plan_path:c.r({locale:{},institution_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"institution_plans"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),new_admin_payments_plan_template_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"plan_templates"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_admin_payments_user_plan_path:c.r({locale:{},user_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),new_admin_resource_list_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_comment_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_course_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_course_assignment_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"course_assignments"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_course_public_course_share_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"public_course_shares"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_data_capture_link_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"links"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_external_private_share_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_group_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_media_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_ms_teams_sso_session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"sso_session"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_ms_teams_study_aid_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_ms_teams_subscription_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ms_teams"],[2,[7,"/"],[2,[6,"subscriptions"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_payments_referrals_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"referrals"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_quiz_quiz_question_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),new_rails_conductor_inbound_email_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),new_rails_conductor_inbound_email_source_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[6,"sources"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]),new_share_list_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"share_lists"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_smart_link_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_subject_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_user_announcements_dashboard_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"new_user_announcements"],[1,[2,[8,"."],[3,"format"]]]]]]),new_user_confirmation_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"confirmation"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_user_password_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"password"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),new_user_registration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_user_session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_in"],[1,[2,[8,"."],[3,"format"]]]]]]]]),new_user_unlock_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"unlock"],[2,[7,"/"],[2,[6,"new"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),not_found_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"not_found"],[1,[2,[8,"."],[3,"format"]]]]]]]]),note_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),note_note_page_path:c.r({locale:{},note_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),note_note_page_clipping_path:c.r({locale:{},note_id:{r:!0},note_page_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[3,"note_page_id"],[2,[7,"/"],[2,[6,"clippings"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),note_note_page_clippings_path:c.r({locale:{},note_id:{r:!0},note_page_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[2,[7,"/"],[2,[3,"note_page_id"],[2,[7,"/"],[2,[6,"clippings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),note_note_pages_path:c.r({locale:{},note_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"note_id"],[2,[7,"/"],[2,[6,"note_pages"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),notes_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notes"],[1,[2,[8,"."],[3,"format"]]]]]]),notifications_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"notifications"],[1,[2,[8,"."],[3,"format"]]]]]]]]),participants_typeahead_private_messages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[2,[7,"/"],[2,[6,"participants_typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]]]),password_reset_required_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"password_reset_required"],[1,[2,[8,"."],[3,"format"]]]]]]]]),pay_payments_payments_path:c.r({locale:{},plan_type:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[3,"plan_type"],[2,[7,"/"],[2,[6,"pay"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),payment_history_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"payment_history"],[1,[2,[8,"."],[3,"format"]]]]]]]]),payment_plan_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"payment_plan"],[1,[2,[8,"."],[3,"format"]]]]]]]]),payments_billing_detail_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"billing_details"],[1,[2,[8,"."],[3,"format"]]]]]]]]),payments_compare_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"compare"],[1,[2,[8,"."],[3,"format"]]]]]]]]),payments_referrals_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"referrals"],[1,[2,[8,"."],[3,"format"]]]]]]]]),payments_upgrades_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"upgrades"],[1,[2,[8,"."],[3,"format"]]]]]]]]),perform_downgrade_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"perform_downgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),perform_password_reset_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"perform_password_reset"],[1,[2,[8,"."],[3,"format"]]]]]]]]),perform_reupgrade_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"perform_reupgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),perform_upgrade_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"perform_upgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),ping_dashboard_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"ping"],[1,[2,[8,"."],[3,"format"]]]]]]),poll_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"polls"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),poll_votes_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"poll_votes"],[1,[2,[8,"."],[3,"format"]]]]]]),popup_attachments_path:c.r({locale:{},type:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"type"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"attach"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),popup_payments_downgrades_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"downgrades"],[2,[7,"/"],[2,[6,"popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),popup_payments_upgrades_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"upgrades"],[2,[7,"/"],[2,[6,"popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),print_flash_card_deck_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"print"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),privacy_policy_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"privacy_policy"],[1,[2,[8,"."],[3,"format"]]]]]]),private_message_messages_path:c.r({locale:{},private_message_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[2,[7,"/"],[2,[3,"private_message_id"],[2,[7,"/"],[2,[6,"messages"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),private_message_notifications_profiles_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[6,"private_message_notifications"],[1,[2,[8,"."],[3,"format"]]]]]]]]),private_messages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[1,[2,[8,"."],[3,"format"]]]]]]),profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),prompt_payments_upgrades_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"upgrades"],[2,[7,"/"],[2,[6,"prompt"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),public_and_institution_groups_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"public_and_institution_groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),public_courses_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"public_courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),public_study_aids_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"public_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),question_consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"question"],[1,[2,[8,"."],[3,"format"]]]]]]]]),quick_send_popup_private_messages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"private_messages"],[2,[7,"/"],[2,[6,"quick_send_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),quiz_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),quiz_assessment_path:c.r({locale:{},quiz_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"assessments"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),quiz_assessments_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"assessments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),quiz_quiz_question_path:c.r({locale:{},quiz_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),quiz_quiz_questions_path:c.r({locale:{},quiz_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"quiz_id"],[2,[7,"/"],[2,[6,"quiz_questions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),quiz_results_summary_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"quiz_results_summary"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),quizzes_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[1,[2,[8,"."],[3,"format"]]]]]]),quota_media_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"quota"],[1,[2,[8,"."],[3,"format"]]]]]]]]),rails_blob_representation_path:c.r({signed_blob_id:{r:!0},variation_key:{r:!0},filename:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"representations"],[2,[7,"/"],[2,[6,"redirect"],[2,[7,"/"],[2,[3,"signed_blob_id"],[2,[7,"/"],[2,[3,"variation_key"],[2,[7,"/"],[2,[5,[3,"filename"]],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]]),rails_blob_representation_proxy_path:c.r({signed_blob_id:{r:!0},variation_key:{r:!0},filename:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"representations"],[2,[7,"/"],[2,[6,"proxy"],[2,[7,"/"],[2,[3,"signed_blob_id"],[2,[7,"/"],[2,[3,"variation_key"],[2,[7,"/"],[2,[5,[3,"filename"]],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]]),rails_conductor_inbound_email_path:c.r({id:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),rails_conductor_inbound_email_reroute_path:c.r({inbound_email_id:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[3,"inbound_email_id"],[2,[7,"/"],[2,[6,"reroute"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),rails_conductor_inbound_email_sources_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[6,"sources"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),rails_conductor_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"conductor"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_direct_uploads_path:c.r({format:{}
},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"direct_uploads"],[1,[2,[8,"."],[3,"format"]]]]]]]]]),rails_disk_service_path:c.r({encoded_key:{r:!0},filename:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"disk"],[2,[7,"/"],[2,[3,"encoded_key"],[2,[7,"/"],[2,[5,[3,"filename"]],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),rails_mailgun_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"mailgun"],[2,[7,"/"],[2,[6,"inbound_emails"],[2,[7,"/"],[2,[6,"mime"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]),rails_mandrill_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"mandrill"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_mandrill_inbound_health_check_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"mandrill"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_postmark_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"postmark"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_relay_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"relay"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_sendgrid_inbound_emails_path:c.r({format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"action_mailbox"],[2,[7,"/"],[2,[6,"sendgrid"],[2,[7,"/"],[2,[6,"inbound_emails"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),rails_service_blob_path:c.r({signed_id:{r:!0},filename:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"blobs"],[2,[7,"/"],[2,[6,"redirect"],[2,[7,"/"],[2,[3,"signed_id"],[2,[7,"/"],[2,[5,[3,"filename"]],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]),rails_service_blob_proxy_path:c.r({signed_id:{r:!0},filename:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"blobs"],[2,[7,"/"],[2,[6,"proxy"],[2,[7,"/"],[2,[3,"signed_id"],[2,[7,"/"],[2,[5,[3,"filename"]],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]),rating_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"rating"],[1,[2,[8,"."],[3,"format"]]]]]]),refresh_count_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"refresh_count"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),refresh_user_types_profiles_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[6,"refresh_user_types"],[1,[2,[8,"."],[3,"format"]]]]]]]]),refund_policy_payments_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"refund_policy"],[1,[2,[8,"."],[3,"format"]]]]]]]]),registration_confirm_profile_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"confirm_profile"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),registration_profile_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"registration_profile"],[1,[2,[8,"."],[3,"format"]]]]]]),registration_refresh_user_types_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"step_1"],[2,[7,"/"],[2,[6,"user_types"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),registration_step_0_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"step_0"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),registration_step_1_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"step_1"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),registration_step_2_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"step_2"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),registration_step_3_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_up"],[2,[7,"/"],[2,[6,"step_3"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),reject_group_requests_path:c.r({locale:{},group_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"requests"],[2,[7,"/"],[2,[6,"reject"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),related_folder_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"folders"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"related"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),related_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"related"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_courses_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),remove_criteria_admin_advertising_email_campaign_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"advertising"],[2,[7,"/"],[2,[6,"email_campaigns"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_criteria"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),remove_friend_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_friend"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_friend_popup_friend_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_friend_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_groups_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),remove_invite_popup_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_invite_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_member_perform_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_member_perform"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_member_popup_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_member_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),remove_property_property_slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_property_property"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),remove_property_slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_property"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),remove_study_aids_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"remove_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),rename_folder_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"folders"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"rename"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),rename_group_group_topic_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"group_topics"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"rename"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),rename_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"rename"],[1,[2,[8,"."],[3,"format"]]]]]]]]),report_as_inappropriate_popup_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"report_as_inappropriate_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),report_as_inappropriate_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"report_as_inappropriate"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),reporters_list_abuse_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"abuse_reports"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"reporters_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),reports_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"reports"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),resend_institution_invite_path:c.r({locale:{},institution_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"institution_id"],[2,[7,"/"],[2,[6,"invites"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"resend"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),resend_invite_popup_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"resend_invite_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),resend_to_all_external_private_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[6,"resend_to_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),resend_to_all_popup_external_private_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[6,"resend_to_all_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),resend_to_all_popup_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"resend_to_all_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),resend_to_all_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"resend_to_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]),reset_password_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"reset_password"],[1,[2,[8,"."],[3,"format"]]]]]]]]),reset_password_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"reset_password"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),reset_password_popup_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"reset_password_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),resource_lists_summary_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"resource_lists_summary"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),resource_results_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"resource_results"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),resource_results_popup_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"resource_results_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),restore_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"restore"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),results_public_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"results"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),revoke_admin_admin_payments_user_plans_path:c.r({locale:{},user_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[2,[7,"/"],[2,[6,"revoke_admin"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),revoke_admin_plan_admin_payments_user_plans_path:c.r({locale:{},user_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"user_id"],[2,[7,"/"],[2,[6,"plans"],[2,[7,"/"],[2,[6,"revoke_admin_plan"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]]]),root_path:c.r({locale:{},format:{}},[2,[7,"/"],[2,[1,[3,"locale"]],[1,[2,[8,"."],[3,"format"]]]]]),sar_export_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"sar_export"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),search_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[1,[2,[8,"."],[3,"format"]]]]]]),search_admin_users_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"search"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),search_courses_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"courses"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_groups_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_popup_external_private_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"external_private_shares"],[2,[7,"/"],[2,[6,"search_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_popup_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"search_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_subjects_typeahead_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects_typeahead"],[2,[7,"/"],[2,[6,"search"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_suggested_subjects_typeahead_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects_typeahead"],[2,[7,"/"],[2,[6,"search_suggested"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_typeahead_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_typeahead_exam_levels_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"exam_levels"],[2,[7,"/"],[2,[6,"search_typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]]]),search_unauthenticated_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"unauthenticated"],[2,[7,"/"],[2,[6,"resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),search_users_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"search"],[2,[7,"/"],[2,[6,"users"],[1,[2,[8,"."],[3,"format"]]]]]]]]),send_cancelation_code_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"cancelation_code"],[1,[2,[8,"."],[3,"format"]]]]]]]]),send_email_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"send_email"],[1,[2,[8,"."],[3,"format"]]]]]]]]),send_email_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"send_email"],[1,[2,[8,"."],[3,"format"]]]]]]]]),send_invite_by_email_friends_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"friends"],[2,[7,"/"],[2,[6,"send_invite_by_email"],[1,[2,[8,"."],[3,"format"]]]]]]]]),session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"session"],[1,[2,[8,"."],[3,"format"]]]]]]]]),set_property_property_slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"set_property_property"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),set_property_slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"set_property"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),set_user_switch_user_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"switch_user"],[2,[7,"/"],[2,[6,"set_user"],[1,[2,[8,"."],[3,"format"]]]]]]]]),settings_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),settings_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),settings_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),settings_perform_institution_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"institutions"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"settings_perform"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),settings_status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[6,"settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_friend_list_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"share_friend_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_group_list_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"share_group_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"share_lists"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_lists_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"share_lists"],[1,[2,[8,"."],[3,"format"]]]]]]),share_popup_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"share_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_with_friends_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"share_with_friends"],[1,[2,[8,"."],[3,"format"]]]]]]]]),share_with_groups_public_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[6,"share_with_groups"],[1,[2,[8,"."],[3,"format"]]]]]]]]),shared_study_aids_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"shared_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),show_admin_payments_payments_path:c.r({locale:{},report_class:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"show"],[2,[7,"/"],[2,[3,"report_class"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),show_admin_reports_path:c.r({locale:{},report_class:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"show"],[2,[7,"/"],[2,[3,"report_class"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),show_course_module_public_course_path:c.r({locale:{},id:{r:!0},course_module_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[3,"course_module_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),show_meta_popup_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"show_meta_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),show_note_page_public_path:c.r({locale:{},id:{r:!0},note_page_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"note_page"],[2,[7,"/"],[2,[3,"note_page_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),show_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),show_public_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),show_question_public_path:c.r({locale:{},id:{r:!0},question_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"question"],[2,[7,"/"],[2,[3,"question_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),show_slide_public_path:c.r({locale:{},id:{r:!0},slide_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"slide"],[2,[7,"/"],[2,[3,"slide_id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),show_study_aids_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"show_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),sidebar_library_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"sidebar"],[1,[2,[8,"."],[3,"format"]]]]]]]]),sign_in_popup_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_in_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),sitemap_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"sitemap"],[1,[2,[8,"."],[3,"format"]]]]]]),slide_set_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),slide_set_slide_path:c.r({locale:{},slide_set_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),slide_set_slides_path:c.r({locale:{},slide_set_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"slide_set_id"],[2,[7,"/"],[2,[6,"slides"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),slide_sets_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[1,[2,[8,"."],[3,"format"]]]]]]),smart_link_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),smart_link_share_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_link_shares"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),smart_link_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_link_shares"],[1,[2,[8,"."],[3,"format"]]]]]]),smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[1,[2,[8,"."],[3,"format"]]]]]]),smart_shares_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_shares"],[1,[2,[8,"."],[3,"format"]]]]]]),social_share_popup_public_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"c"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"social_share_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),starter_checklist_completion_markers_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"starter_checklist_completion_markers"],[1,[2,[8,"."],[3,"format"]]]]]]),statistics_admin_spam_results_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"spam_results"],[2,[7,"/"],[2,[6,"statistics"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),stats_details_admin_users_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"stats_details"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[1,[2,[8,"."],[3,"format"]]]]]]),study_aid_breakdown_rating_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"rating"],[2,[7,"/"],[2,[6,"study_aid_breakdown"],[1,[2,[8,"."],[3,"format"]]]]]]]]),study_aid_comments_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"comments"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aid_comments_page_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"comments_page"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aid_kill_alerts_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"kill_alerts"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aid_log_view_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"log_view"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aid_version_path:c.r({locale:{},study_aid_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"study_aid_id"],[2,[7,"/"],[2,[6,"version"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aids_admin_stats_pages_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"stats_pages"],[2,[7,"/"],[2,[6,"study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),study_aids_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),study_aids_group_group_topic_path:c.r({locale:{},group_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"group_id"],[2,[7,"/"],[2,[6,"group_topics"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),subject_flash_card_deck_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_flash_card_decks_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"flash_card_decks"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_flowchart_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_flowcharts_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"flowcharts"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_folders_dropdown_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"folders_dropdown"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_folders_position_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"folders_position"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_mind_map_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_mind_maps_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"mind_maps"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_note_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"notes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_notes_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"notes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_quiz_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_quizzes_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"quizzes"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subject_slide_set_path:c.r({locale:{},subject_id:{r:!0},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),subject_slide_sets_path:c.r({locale:{},subject_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"subject_id"],[2,[7,"/"],[2,[6,"slide_sets"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),subjects_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[1,[2,[8,"."],[3,"format"]]]]]]),success_3d_secure_payments_three_d_secure_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"three_d_secure"],[2,[7,"/"],[2,[6,"success_3d_secure"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),success_action_redirect_media_index_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"media"],[2,[7,"/"],[2,[6,"success_action_redirect"],[1,[2,[8,"."],[3,"format"]]]]]]]]),success_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"success"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),suggested_content_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"suggested_content"],[1,[2,[8,"."],[3,"format"]]]]]]),
suggested_content_resources_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"suggested_content"],[2,[7,"/"],[2,[6,"resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]),summary_attempts_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"summary_attempts"],[1,[2,[8,"."],[3,"format"]]]]]]]]),summary_details_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"summary_details"],[1,[2,[8,"."],[3,"format"]]]]]]]]),summary_list_smart_links_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"smart_links"],[2,[7,"/"],[2,[6,"summary_list"],[1,[2,[8,"."],[3,"format"]]]]]]]]),suspend_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"suspend"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),suspend_popup_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"suspend_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),table_admin_blacklist_terms_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"blacklist_terms"],[2,[7,"/"],[2,[6,"table"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),table_admin_featured_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"featured_study_aids"],[2,[7,"/"],[2,[6,"table"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),tags_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"tags"],[1,[2,[8,"."],[3,"format"]]]]]]),tags_typeahead_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"tags_typeahead"],[1,[2,[8,"."],[3,"format"]]]]]]),terms_and_conditions_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"terms_and_conditions"],[1,[2,[8,"."],[3,"format"]]]]]]),terms_and_conditions_payments_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"terms_and_conditions"],[1,[2,[8,"."],[3,"format"]]]]]]]]),toggle_notification_subscriptions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"notification_subscriptions"],[2,[7,"/"],[2,[6,"toggle"],[1,[2,[8,"."],[3,"format"]]]]]]]]),top_resources_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"top_resources"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),undo_demote_admin_study_aid_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"undo_demote"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),unenroll_course_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unenroll"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unfeature_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unfeature"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unhide_group_from_settings_status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[6,"unhide_group_from_settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]),unhide_group_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unhide_group"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unhide_user_from_settings_status_updates_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[6,"unhide_user_from_settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]),unhide_user_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unhide_user"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unlike_comment_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"comments"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unlike"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unlike_status_update_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"status_updates"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unlike"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unlink_third_party_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"unlink_third_party"],[1,[2,[8,"."],[3,"format"]]]]]]]]),unpin_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"unpin_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),unread_count_alert_actions_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"alert"],[2,[7,"/"],[2,[6,"actions"],[2,[7,"/"],[2,[6,"unread_count"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unreadable_study_aid_clippings_public_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unreadable_study_aid_clippings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unshare_study_aids_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unshare_study_aids"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),unsubscribe_marketing_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"unsubscribe_marketing"],[1,[2,[8,"."],[3,"format"]]]]]]),unsuspend_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unsuspend"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),unsuspend_popup_admin_user_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"unsuspend_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),update_all_data_capture_form_fields_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"data_capture"],[2,[7,"/"],[2,[6,"form_fields"],[2,[7,"/"],[2,[6,"update_all"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_avatar_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_avatar"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_config_flash_card_deck_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_config"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_config_flowchart_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flowcharts"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_config"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_config_mind_map_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"mind_maps"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_config"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_config_slide_set_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_config"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_courses_positions_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_courses_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),update_custom_filter_lists_positions_admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_custom_filter_lists_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_email_preferences_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"update_email_preferences"],[1,[2,[8,"."],[3,"format"]]]]]]]]),update_exam_levels_positions_admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_exam_levels_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_from_study_aid_popup_study_aids_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"study_aids"],[2,[7,"/"],[2,[6,"update_from_study_aid_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]),update_groups_positions_admin_faq_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_groups_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_groups_positions_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_groups_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),update_interests_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_interests"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_notifications_account_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"account"],[2,[7,"/"],[2,[6,"update_notifications"],[1,[2,[8,"."],[3,"format"]]]]]]]]),update_options_positions_admin_library_custom_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"custom_filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_options_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_positions_course_course_modules_path:c.r({locale:{},course_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"courses"],[2,[7,"/"],[2,[3,"course_id"],[2,[7,"/"],[2,[6,"course_modules"],[2,[7,"/"],[2,[6,"update_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),update_positions_slide_set_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"slide_sets"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_profile_privacy_user_config_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"user_config"],[2,[7,"/"],[2,[6,"update_profile_privacy"],[1,[2,[8,"."],[3,"format"]]]]]]]]),update_questions_positions_admin_faq_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_questions_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_rails_disk_service_path:c.r({encoded_token:{r:!0},format:{}},[2,[7,"/"],[2,[6,"rails"],[2,[7,"/"],[2,[6,"active_storage"],[2,[7,"/"],[2,[6,"disk"],[2,[7,"/"],[2,[3,"encoded_token"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),update_settings_quiz_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"quizzes"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_settings"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_study_aids_positions_admin_resource_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"resource_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_study_aids_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]),update_subgroups_positions_admin_faq_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"faq"],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_subgroups_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_subjects_positions_admin_library_filter_list_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"filter_lists"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_subjects_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),update_time_zone_profile_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"profiles"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_time_zone"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),update_topics_positions_admin_library_subject_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"admin"],[2,[7,"/"],[2,[6,"library"],[2,[7,"/"],[2,[6,"subjects"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"update_topics_positions"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]]]]),upgrade_complete_payments_payments_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"upgrade_complete"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),upgrade_payments_referrals_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"payments"],[2,[7,"/"],[2,[6,"referrals"],[2,[7,"/"],[2,[6,"upgrade"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),upload_flash_card_deck_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"flash_card_decks"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"upload"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),user_config_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"user_config"],[1,[2,[8,"."],[3,"format"]]]]]]),user_confirmation_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"confirmation"],[1,[2,[8,"."],[3,"format"]]]]]]]]),user_course_results_consumption_reports_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"reports"],[2,[7,"/"],[2,[6,"user_course_results"],[1,[2,[8,"."],[3,"format"]]]]]]]]),user_facebook_omniauth_authorize_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"facebook"],[1,[2,[8,"."],[3,"format"]]]]]]]]]),user_facebook_omniauth_callback_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"facebook"],[2,[7,"/"],[2,[6,"callback"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),user_google_oauth2_omniauth_authorize_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"google_oauth2"],[1,[2,[8,"."],[3,"format"]]]]]]]]]),user_google_oauth2_omniauth_callback_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"google_oauth2"],[2,[7,"/"],[2,[6,"callback"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),user_microsoft_graph_auth_omniauth_authorize_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"microsoft_graph_auth"],[1,[2,[8,"."],[3,"format"]]]]]]]]]),user_microsoft_graph_auth_omniauth_callback_path:c.r({format:{}},[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"auth"],[2,[7,"/"],[2,[6,"microsoft_graph_auth"],[2,[7,"/"],[2,[6,"callback"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]]),user_password_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"password"],[1,[2,[8,"."],[3,"format"]]]]]]]]),user_registration_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[1,[2,[8,"."],[3,"format"]]]]]]),user_results_popup_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"user_results_popup"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),user_results_summary_group_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"groups"],[2,[7,"/"],[2,[3,"id"],[2,[7,"/"],[2,[6,"user_results_summary"],[1,[2,[8,"."],[3,"format"]]]]]]]]]]),user_session_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"sign_in"],[1,[2,[8,"."],[3,"format"]]]]]]]]),user_study_aid_performance_report_path:c.r({locale:{},id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"user_study_aid_performance_reports"],[2,[7,"/"],[2,[3,"id"],[1,[2,[8,"."],[3,"format"]]]]]]]]),user_unlock_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"users"],[2,[7,"/"],[2,[6,"unlock"],[1,[2,[8,"."],[3,"format"]]]]]]]]),video_popup_page_path:c.r({locale:{},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"video_popup"],[1,[2,[8,"."],[3,"format"]]]]]]),view_node_public_path:c.r({locale:{},node_id:{r:!0},format:{}},[2,[1,[2,[7,"/"],[3,"locale"]]],[2,[7,"/"],[2,[6,"p"],[2,[7,"/"],[2,[3,"node_id"],[2,[7,"/"],[2,[6,"view_node"],[1,[2,[8,"."],[3,"format"]]]]]]]]]])}};return l.define_module("NIL",d),d})(),
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof define&&define.amd?define(t):e.Mustache=t}(this,function(){function e(e,t){return v.call(e,t)}function t(t){return!e(p,t)}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return w[e]})}function a(e){this.string=e,this.tail=e,this.pos=0}function s(e,t){this.view=e,this.parent=t,this._cache={}}function o(){this.clearCache()}function r(e,t,n,i){for(var a,s,o,l="",c=0,d=e.length;c<d;++c)switch(s=(a=e[c])[1],a[0]){case"#":if("object"==typeof(o=n.lookup(s)))if(y(o))for(var _=0,h=o.length;_<h;++_)l+=r(a[4],t,n.push(o[_]),i);else o&&(l+=r(a[4],t,n.push(o),i));else if("function"==typeof o){var p=null==i?null:i.slice(a[3],a[5]);null!=(o=o.call(n.view,p,function(e){return t.render(e,n)}))&&(l+=o)}else o&&(l+=r(a[4],t,n,i));break;case"^":(!(o=n.lookup(s))||y(o)&&0===o.length)&&(l+=r(a[4],t,n,i));break;case">":"function"==typeof(o=t.getPartial(s))&&(l+=o(n));break;case"&":null!=(o=n.lookup(s))&&(l+=o);break;case"name":null!=(o=n.lookup(s))&&(l+=u.escape(o));break;case"text":l+=s}return l}function l(e){for(var t,n=[],i=n,a=[],s=0,o=e.length;s<o;++s)switch((t=e[s])[0]){case"#":case"^":a.push(t),i.push(t),i=t[4]=[];break;case"/":a.pop()[5]=t[2],i=a.length>0?a[a.length-1][4]:n;break;default:i.push(t)}return n}function c(e){for(var t,n,i=[],a=0,s=e.length;a<s;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(n=t,i.push(t)));return i}function d(e){return[new RegExp(n(e[0])+"\\s*"),new RegExp("\\s*"+n(e[1]))]}var u={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};u.Scanner=a,u.Context=s,u.Writer=o;var _=/\s*/,h=/\s+/,p=/\S/,f=/\s*=/,m=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/,v=RegExp.prototype.test,b=Object.prototype.toString,y=Array.isArray||function(e){return"[object Array]"===b.call(e)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};u.escape=i,a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},a.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},s.make=function(e){return e instanceof s?e:new s(e)},s.prototype.push=function(e){return new s(e,this)},s.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var n=this;n;){if(e.indexOf(".")>0){t=n.view;for(var i=e.split("."),a=0;t&&a<i.length;)t=t[i[a++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},o.prototype.clearCache=function(){this._cache={},this._partialCache={}},o.prototype.compile=function(e,t){var n=this._cache[e];if(!n){var i=u.parse(e,t);n=this._cache[e]=this.compileTokens(i,e)}return n},o.prototype.compilePartial=function(e,t,n){var i=this.compile(t,n);return this._partialCache[e]=i,i},o.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},o.prototype.compileTokens=function(e,t){var n=this;return function(i,a){if(a)if("function"==typeof a)n._loadPartial=a;else for(var o in a)n.compilePartial(o,a[o]);return r(e,n,s.make(i),t)}},o.prototype.render=function(e,t,n){return this.compile(e)(t,n)},u.parse=function(e,i){function s(){if(M&&!C)for(;T.length;)delete S[T.pop()];else T=[];M=!1,C=!1}if(e=e||"","string"==typeof(i=i||u.tags)&&(i=i.split(h)),2!==i.length)throw new Error("Invalid tags: "+i.join(", "));for(var o,r,p,v,b,y=d(i),w=new a(e),x=[],S=[],T=[],M=!1,C=!1;!w.eos();){if(o=w.pos,p=w.scanUntil(y[0]))for(var k=0,E=p.length;k<E;++k)t(v=p.charAt(k))?T.push(S.length):C=!0,S.push(["text",v,o,o+1]),o+=1,"\n"==v&&s();if(!w.scan(y[0]))break;if(M=!0,r=w.scan(g)||"name",w.scan(_),"="===r?(p=w.scanUntil(f),w.scan(f),w.scanUntil(y[1])):"{"===r?(p=w.scanUntil(new RegExp("\\s*"+n("}"+i[1]))),w.scan(m),w.scanUntil(y[1]),r="&"):p=w.scanUntil(y[1]),!w.scan(y[1]))throw new Error("Unclosed tag at "+w.pos);if(b=[r,p,o,w.pos],S.push(b),"#"===r||"^"===r)x.push(b);else if("/"===r){if(0===x.length)throw new Error('Unopened section "'+p+'" at '+o);if((A=x.pop())[1]!==p)throw new Error('Unclosed section "'+A[1]+'" at '+o)}else if("name"===r||"{"===r||"&"===r)C=!0;else if("="===r){if(2!==(i=p.split(h)).length)throw new Error("Invalid tags at "+o+": "+i.join(", "));y=d(i)}}var A;if(A=x.pop())throw new Error('Unclosed section "'+A[1]+'" at '+w.pos);return l(S=c(S))};var x=new o;return u.clearCache=function(){return x.clearCache()},u.compile=function(e,t){return x.compile(e,t)},u.compilePartial=function(e,t,n){return x.compilePartial(e,t,n)},u.compileTokens=function(e,t){return x.compileTokens(e,t)},u.render=function(e,t,n){return x.render(e,t,n)},u.to_html=function(e,t,n,i){var a=u.render(e,t,n);if("function"!=typeof i)return a;i(a)},u}()),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/abuse_report_entry"]=Mustache.compile('<tr {{^completed}}class="new_row"{{/completed}}>\n\t<td class="new">{{^completed}}&#8226;{{/completed}}</td>\n\t<td>{{report_type}}</td>\n    <td>{{{asset_link}}}</td>\n    <td>{{{group_link}}}</td>\n    <td>{{{reported_by}}}</td>\n    <td>{{reported_at}}</td>\n    <td class="reason">\n    \t{{#reason_truncated}}\n    \t  <span class="reason_truncated">{{reason_truncated}} <a href="#" class="show_more">({{show_more}})</a></span>\n    \t{{/reason_truncated}}\n    \t<span class="reason_full" {{#reason_truncated}}style="display: none"{{/reason_truncated}}>{{reason}}</span>\n    </td>\n    <td>\n    \t{{#completed}}\n    \t\t<i class="icon-ok"></i>\n    \t\t{{{completed_by}}}\n    \t{{/completed}}\n    \t{{^completed}}\n    \t\t<a href="#" class="mark_as_completed" data-id="{{id}}">{{ mark_as_completed }}</a>\n    \t\t<img src="/assets/loading_small.gif" class="loading_spinner" style="display: none">\n    \t{{/completed}}\n    </td>\n</tr>'),Mustache.compilePartial("admin/abuse_report_entry",'<tr {{^completed}}class="new_row"{{/completed}}>\n\t<td class="new">{{^completed}}&#8226;{{/completed}}</td>\n\t<td>{{report_type}}</td>\n    <td>{{{asset_link}}}</td>\n    <td>{{{group_link}}}</td>\n    <td>{{{reported_by}}}</td>\n    <td>{{reported_at}}</td>\n    <td class="reason">\n    \t{{#reason_truncated}}\n    \t  <span class="reason_truncated">{{reason_truncated}} <a href="#" class="show_more">({{show_more}})</a></span>\n    \t{{/reason_truncated}}\n    \t<span class="reason_full" {{#reason_truncated}}style="display: none"{{/reason_truncated}}>{{reason}}</span>\n    </td>\n    <td>\n    \t{{#completed}}\n    \t\t<i class="icon-ok"></i>\n    \t\t{{{completed_by}}}\n    \t{{/completed}}\n    \t{{^completed}}\n    \t\t<a href="#" class="mark_as_completed" data-id="{{id}}">{{ mark_as_completed }}</a>\n    \t\t<img src="/assets/loading_small.gif" class="loading_spinner" style="display: none">\n    \t{{/completed}}\n    </td>\n</tr>'),this.SMT["admin/abuse_report_entry"]=function(e){return e||(e={}),SMTCache["admin/abuse_report_entry"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/entity_criteria"]=Mustache.compile('<div class="criteria_entry">\n  <span class="value">{{{name}}}</span>\n  <span class="delete" data-id="{{id}}">x</span>\n  <input type="hidden" name="values[]" value="{{value}}">\n</div>\n'),Mustache.compilePartial("admin/entity_criteria",'<div class="criteria_entry">\n  <span class="value">{{{name}}}</span>\n  <span class="delete" data-id="{{id}}">x</span>\n  <input type="hidden" name="values[]" value="{{value}}">\n</div>\n'),this.SMT["admin/entity_criteria"]=function(e){return e||(e={}),SMTCache["admin/entity_criteria"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/resource_list_course"]=Mustache.compile('<tr data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{title}}</a>\n  </td>\n    <td>\n    {{enrolled_count}}\n  </td>\n\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>\n'),Mustache.compilePartial("admin/resource_list_course",'<tr data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{title}}</a>\n  </td>\n    <td>\n    {{enrolled_count}}\n  </td>\n\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>\n'),this.SMT["admin/resource_list_course"]=function(e){return e||(e={}),SMTCache["admin/resource_list_course"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/resource_list_group"]=Mustache.compile('<tr data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{name}}</a>\n  </td>\n    <td>\n    {{members_count}}\n  </td>\n\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>'),Mustache.compilePartial("admin/resource_list_group",'<tr data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{name}}</a>\n  </td>\n    <td>\n    {{members_count}}\n  </td>\n\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>'),this.SMT["admin/resource_list_group"]=function(e){return e||(e={}),SMTCache["admin/resource_list_group"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/resource_list_study_aid"]=Mustache.compile('<tr {{#private}}class="private"{{/private}} data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="icon">\n    <img alt="{{type}}" src="/assets/{{icon}}" title="{{type}}">\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{title}}</a>\n    {{#private}}<i class="icon-lock"></i>{{/private}}\n  </td>\n  <td>\n    {{{author_url}}}\n  </td>\n  <td class="suggestions_count">\n    {{suggestions_count}} / {{suggestions_viewed_count}}\n  </td>\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>\n'),Mustache.compilePartial("admin/resource_list_study_aid",'<tr {{#private}}class="private"{{/private}} data-id="{{id}}">\n  <td class="drag_icon">\n    <i class="icon-ellipsis-vertical"></i>\n  </td>\n  <td class="icon">\n    <img alt="{{type}}" src="/assets/{{icon}}" title="{{type}}">\n  </td>\n  <td class="title">\n    <a href="{{url}}">{{title}}</a>\n    {{#private}}<i class="icon-lock"></i>{{/private}}\n  </td>\n  <td>\n    {{{author_url}}}\n  </td>\n  <td class="suggestions_count">\n    {{suggestions_count}} / {{suggestions_viewed_count}}\n  </td>\n  <td class="delete">\n    <a>(x)</a>\n  </td>\n</tr>\n'),this.SMT["admin/resource_list_study_aid"]=function(e){return e||(e={}),SMTCache["admin/resource_list_study_aid"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/faq/edit_controls"]=Mustache.compile('<a href="#" class="afl_item_edit"></a>\n<a href="#" class="afl_item_remove"></a>\n<a href="{{link}}" class="afl_item_link"></a>\n'),Mustache.compilePartial("admin/faq/edit_controls",'<a href="#" class="afl_item_edit"></a>\n<a href="#" class="afl_item_remove"></a>\n<a href="{{link}}" class="afl_item_link"></a>\n'),this.SMT["admin/faq/edit_controls"]=function(e){return e||(e={}),SMTCache["admin/faq/edit_controls"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/faq/group_view"]=Mustache.compile('<div class="boxed">\n\t<div class="afl_group_head">\n\t\t<span class="afl_group_drag_handle afl_drag_handle"></span>\n\t\t<h2 class="afl_name">\n\t\t\t{{name}}\n\t\t</h2>\n\t\t<span class="afl_edit_fields" style="display: none" >\n\t\t\t<input type="text" class="afl_name_edit main group_title afl_edit_field" value="{{name}}" placeholder="Group name">\n\t\t</span>\n\t\t<span class="group_edit_controls afl_edit_controls">\n\t\t\t{{> admin/faq/edit_controls }}\n\t\t</span>\n\t\t<a href="#" class="afl_new_group_question btn btn-info btn-xs">New Question</a>\n\t</div>\n\t<span class="afl_group_questions">\n\t\t<div class="items questions sortable_questions"></div>\n\t</span>\n\t<span class="afl_subgroups">\n\t\t<div class="items subgroups sortable_subgroups"></div>\n\t\t<div class="afl_add_group_container">\n\t\t\t<input class="afl_add_subgroup_name" placeholder="Add New Subgroup" type="text" data-id="{{id}}">\n\t\t\t<span class="errors" style="display: none"></span>\n\t\t</div>\n\t</span>\n</div>\n'),Mustache.compilePartial("admin/faq/group_view",'<div class="boxed">\n\t<div class="afl_group_head">\n\t\t<span class="afl_group_drag_handle afl_drag_handle"></span>\n\t\t<h2 class="afl_name">\n\t\t\t{{name}}\n\t\t</h2>\n\t\t<span class="afl_edit_fields" style="display: none" >\n\t\t\t<input type="text" class="afl_name_edit main group_title afl_edit_field" value="{{name}}" placeholder="Group name">\n\t\t</span>\n\t\t<span class="group_edit_controls afl_edit_controls">\n\t\t\t{{> admin/faq/edit_controls }}\n\t\t</span>\n\t\t<a href="#" class="afl_new_group_question btn btn-info btn-xs">New Question</a>\n\t</div>\n\t<span class="afl_group_questions">\n\t\t<div class="items questions sortable_questions"></div>\n\t</span>\n\t<span class="afl_subgroups">\n\t\t<div class="items subgroups sortable_subgroups"></div>\n\t\t<div class="afl_add_group_container">\n\t\t\t<input class="afl_add_subgroup_name" placeholder="Add New Subgroup" type="text" data-id="{{id}}">\n\t\t\t<span class="errors" style="display: none"></span>\n\t\t</div>\n\t</span>\n</div>\n'),this.SMT["admin/faq/group_view"]=function(e){return e||(e={}),SMTCache["admin/faq/group_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/faq/question_form"]=Mustache.compile('<div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 class="modal-title">\n          {{#id}}Edit Question{{/id}}\n          {{^id}}New Question{{/id}}\n        </h2>\n      </div>\n      <div class="modal-body">\n      \t<div class="row">\n      \t\t<div class="col-12 col-md-6">\n\t\t      \t<form>\n\t\t      \t\t<label for="question_{{id}}_title">Question title:</label>\n\t\t\t      \t<input type="text" name="question[title]" id="question_{{id}}_title" value="{{title}}" placeholder="Question title">\n\n\t\t\t\t\t<label for="question_{{id}}_body">Question contents:</label>\n\t\t\t\t\t<textarea name="question[body]" id="question_{{id}}_body" placeholder="Question Contents">{{body}}</textarea>\n\n\t\t\t\t\t<input type="submit" class="btn btn-success" value="{{#id}}Save Changes{{/id}}{{^id}}Create{{/id}}">\n\t\t\t\t\t<a href="#" class="btn btn-cancel">Cancel</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-md-6">\n\t\t\t\t<div class="faq_question">\n\t\t\t\t\t<h2 class="question_preview_title"></h2>\n\t\t\t\t\t<div class="question_preview"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n      </div>\n    </div>\n</div>'),Mustache.compilePartial("admin/faq/question_form",'<div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 class="modal-title">\n          {{#id}}Edit Question{{/id}}\n          {{^id}}New Question{{/id}}\n        </h2>\n      </div>\n      <div class="modal-body">\n      \t<div class="row">\n      \t\t<div class="col-12 col-md-6">\n\t\t      \t<form>\n\t\t      \t\t<label for="question_{{id}}_title">Question title:</label>\n\t\t\t      \t<input type="text" name="question[title]" id="question_{{id}}_title" value="{{title}}" placeholder="Question title">\n\n\t\t\t\t\t<label for="question_{{id}}_body">Question contents:</label>\n\t\t\t\t\t<textarea name="question[body]" id="question_{{id}}_body" placeholder="Question Contents">{{body}}</textarea>\n\n\t\t\t\t\t<input type="submit" class="btn btn-success" value="{{#id}}Save Changes{{/id}}{{^id}}Create{{/id}}">\n\t\t\t\t\t<a href="#" class="btn btn-cancel">Cancel</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-md-6">\n\t\t\t\t<div class="faq_question">\n\t\t\t\t\t<h2 class="question_preview_title"></h2>\n\t\t\t\t\t<div class="question_preview"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n      </div>\n    </div>\n</div>'),this.SMT["admin/faq/question_form"]=function(e){return e||(e={}),SMTCache["admin/faq/question_form"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/faq/question_view"]=Mustache.compile('<span class="afl_question_drag_handle afl_drag_handle"></span>\n<span class="afl_option_name afl_name">\n\t{{title}}\n</span>\n<span class="question_edit_controls afl_edit_controls">\n\t{{> admin/faq/edit_controls }}\n</span>'),Mustache.compilePartial("admin/faq/question_view",'<span class="afl_question_drag_handle afl_drag_handle"></span>\n<span class="afl_option_name afl_name">\n\t{{title}}\n</span>\n<span class="question_edit_controls afl_edit_controls">\n\t{{> admin/faq/edit_controls }}\n</span>'),this.SMT["admin/faq/question_view"]=function(e){return e||(e={}),SMTCache["admin/faq/question_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/faq/subgroup_view"]=Mustache.compile('<span class="afl_subgroup_drag_handle afl_drag_handle"></span>\n<div class="afl_subgroup_head">\n\t<span class="afl_option_name afl_name">\n\t\t{{name}}\n\t</span>\n\t<span class="afl_edit_fields" style="display: none">\n\t\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Option name">\n\t</span>\n\t<span class="option_edit_controls afl_edit_controls">\n\t\t{{> admin/faq/edit_controls }}\n\t</span>\n\t<a href="#" class="afl_new_subgroup_question btn btn-info btn-xs">New Question</a>\n</div>\n\n<span class="afl_subgroup_questions">\n\t<div class="items questions sortable_questions"></div>\n</span>'),Mustache.compilePartial("admin/faq/subgroup_view",'<span class="afl_subgroup_drag_handle afl_drag_handle"></span>\n<div class="afl_subgroup_head">\n\t<span class="afl_option_name afl_name">\n\t\t{{name}}\n\t</span>\n\t<span class="afl_edit_fields" style="display: none">\n\t\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Option name">\n\t</span>\n\t<span class="option_edit_controls afl_edit_controls">\n\t\t{{> admin/faq/edit_controls }}\n\t</span>\n\t<a href="#" class="afl_new_subgroup_question btn btn-info btn-xs">New Question</a>\n</div>\n\n<span class="afl_subgroup_questions">\n\t<div class="items questions sortable_questions"></div>\n</span>'),this.SMT["admin/faq/subgroup_view"]=function(e){return e||(e={}),SMTCache["admin/faq/subgroup_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/custom_filter_list_view"]=Mustache.compile('<div class="boxed">\n\t<div class="afl_custom_filter_head">\n\t\t<span class="afl_custom_filter_drag_handle afl_drag_handle"></span>\n        <a class="afl_custom_sort afl_sort_icon" href="#" title="Reset Sort (Alphabetically)">\n        </a>\n\t\t<h2 class="afl_name">\n\t\t\t{{name}}\n\t\t</h2>\n\t\t<span class="afl_edit_fields" style="display: none" >\n\t\t\t<input type="text" class="afl_name_edit main custom_filter_title afl_edit_field" value="{{name}}" placeholder="Custom filter level name">\n\t\t</span>\n\t\t<span class="custom_filter_list_edit_controls afl_edit_controls">\n\t\t\t{{> admin/library/edit_controls }}\n\t\t</span>\n\t</div>\n\t<span class="afl_custom_filter_options">\n\t\t<div class="list"></div>\n\t\t<div class="afl_add_filter_container">\n\t\t\t<input class="afl_add_filter afl_add_filter_name" name="afl_add_option" placeholder="Add New Option" type="text">\n\t\t\t<input class="afl_add_filter afl_add_filter_variants" name="afl_add_option_variants" placeholder="Variants (optional, comma separated)" type="text">\n\t\t\t<span class="errors" style="display: none"></span>\n\t\t</div>\n\t</span>\n</div>\n'),Mustache.compilePartial("admin/library/custom_filter_list_view",'<div class="boxed">\n\t<div class="afl_custom_filter_head">\n\t\t<span class="afl_custom_filter_drag_handle afl_drag_handle"></span>\n        <a class="afl_custom_sort afl_sort_icon" href="#" title="Reset Sort (Alphabetically)">\n        </a>\n\t\t<h2 class="afl_name">\n\t\t\t{{name}}\n\t\t</h2>\n\t\t<span class="afl_edit_fields" style="display: none" >\n\t\t\t<input type="text" class="afl_name_edit main custom_filter_title afl_edit_field" value="{{name}}" placeholder="Custom filter level name">\n\t\t</span>\n\t\t<span class="custom_filter_list_edit_controls afl_edit_controls">\n\t\t\t{{> admin/library/edit_controls }}\n\t\t</span>\n\t</div>\n\t<span class="afl_custom_filter_options">\n\t\t<div class="list"></div>\n\t\t<div class="afl_add_filter_container">\n\t\t\t<input class="afl_add_filter afl_add_filter_name" name="afl_add_option" placeholder="Add New Option" type="text">\n\t\t\t<input class="afl_add_filter afl_add_filter_variants" name="afl_add_option_variants" placeholder="Variants (optional, comma separated)" type="text">\n\t\t\t<span class="errors" style="display: none"></span>\n\t\t</div>\n\t</span>\n</div>\n'),this.SMT["admin/library/custom_filter_list_view"]=function(e){return e||(e={}),SMTCache["admin/library/custom_filter_list_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/custom_filter_option_view"]=Mustache.compile('<span class="afl_custom_option_drag_handle afl_drag_handle"></span>\n<span class="afl_option_name afl_name">\n\t{{name}}\n\t<span class="afl_variants">\n\t\t{{variants}}\n\t</span>\n</span>\n<span class="afl_edit_fields" style="display: none">\n\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Option name">\n\t<input type="text" class="afl_variant_edit sub afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n</span>\n<span class="option_edit_controls afl_edit_controls">\n\t{{> admin/library/edit_controls }}\n</span>\n\n\n'),Mustache.compilePartial("admin/library/custom_filter_option_view",'<span class="afl_custom_option_drag_handle afl_drag_handle"></span>\n<span class="afl_option_name afl_name">\n\t{{name}}\n\t<span class="afl_variants">\n\t\t{{variants}}\n\t</span>\n</span>\n<span class="afl_edit_fields" style="display: none">\n\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Option name">\n\t<input type="text" class="afl_variant_edit sub afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n</span>\n<span class="option_edit_controls afl_edit_controls">\n\t{{> admin/library/edit_controls }}\n</span>\n\n\n'),this.SMT["admin/library/custom_filter_option_view"]=function(e){return e||(e={}),SMTCache["admin/library/custom_filter_option_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/edit_controls"]=Mustache.compile('<a href="#" class="afl_item_edit"></a>\n<a href="#" class="afl_item_remove"></a>\n<a href="{{link}}" class="afl_item_link"></a>\n'),Mustache.compilePartial("admin/library/edit_controls",'<a href="#" class="afl_item_edit"></a>\n<a href="#" class="afl_item_remove"></a>\n<a href="{{link}}" class="afl_item_link"></a>\n'),this.SMT["admin/library/edit_controls"]=function(e){return e||(e={}),SMTCache["admin/library/edit_controls"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/exam_level_view"]=Mustache.compile('<span class="afl_exam_level_drag_handle afl_drag_handle"></span>\n<div class="afl_exam_level_head">\n\t<span class="afl_exam_level_name afl_name">\n\t\t{{name}}\n\t\t<span class="afl_variants">\n\t\t\t{{variants}}\n\t\t</span>\n\t</span>\n\t<span class="afl_edit_fields" style="display: none" >\n\t\t<input type="text" class="afl_name_edit main afl_edit_field" value="{{name}}" placeholder="Exam level name">\n\t\t<input type="text" class="afl_variant_edit main afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n\t</span>\n\t<span class="exam_level_edit_controls afl_edit_controls">\n\t\t{{> admin/library/edit_controls }}\n\t</span>\n</div>\n'),Mustache.compilePartial("admin/library/exam_level_view",'<span class="afl_exam_level_drag_handle afl_drag_handle"></span>\n<div class="afl_exam_level_head">\n\t<span class="afl_exam_level_name afl_name">\n\t\t{{name}}\n\t\t<span class="afl_variants">\n\t\t\t{{variants}}\n\t\t</span>\n\t</span>\n\t<span class="afl_edit_fields" style="display: none" >\n\t\t<input type="text" class="afl_name_edit main afl_edit_field" value="{{name}}" placeholder="Exam level name">\n\t\t<input type="text" class="afl_variant_edit main afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n\t</span>\n\t<span class="exam_level_edit_controls afl_edit_controls">\n\t\t{{> admin/library/edit_controls }}\n\t</span>\n</div>\n'),this.SMT["admin/library/exam_level_view"]=function(e){return e||(e={}),SMTCache["admin/library/exam_level_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/subject_view"]=Mustache.compile('<span class="afl_subject_drag_handle afl_drag_handle"></span>\n<div class="afl_subject_head">\n\t<span class="afl_subject_name afl_name">\n\t\t{{name}}\n\t\t<span class="afl_variants">\n\t\t\t{{variants}}\n\t\t</span>\n\t</span>\n\t<span class="afl_edit_fields" style="display: none" >\n\t\t<input type="text" class="afl_name_edit main afl_edit_field" value="{{name}}" placeholder="Subject name">\n\t\t<input type="text" class="afl_variant_edit main afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n\t</span>\n\t<span class="subject_edit_controls afl_edit_controls">\n\t\t{{> admin/library/edit_controls }}\n\t</span>\n</div>\n<ul class="afl_subject_topics">\n</ul>\n<div class="afl_add_topic_container">\n\t<input class="afl_add_sub" name="afl_add_subject_topic" placeholder="Add New Topic" type="text">\n\t<input class="afl_add_sub" name="afl_add_subject_topic_variants" placeholder="Variants (optional, comma separated)" type="text">\n</div>\n\n'),Mustache.compilePartial("admin/library/subject_view",'<span class="afl_subject_drag_handle afl_drag_handle"></span>\n<div class="afl_subject_head">\n\t<span class="afl_subject_name afl_name">\n\t\t{{name}}\n\t\t<span class="afl_variants">\n\t\t\t{{variants}}\n\t\t</span>\n\t</span>\n\t<span class="afl_edit_fields" style="display: none" >\n\t\t<input type="text" class="afl_name_edit main afl_edit_field" value="{{name}}" placeholder="Subject name">\n\t\t<input type="text" class="afl_variant_edit main afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n\t</span>\n\t<span class="subject_edit_controls afl_edit_controls">\n\t\t{{> admin/library/edit_controls }}\n\t</span>\n</div>\n<ul class="afl_subject_topics">\n</ul>\n<div class="afl_add_topic_container">\n\t<input class="afl_add_sub" name="afl_add_subject_topic" placeholder="Add New Topic" type="text">\n\t<input class="afl_add_sub" name="afl_add_subject_topic_variants" placeholder="Variants (optional, comma separated)" type="text">\n</div>\n\n'),this.SMT["admin/library/subject_view"]=function(e){return e||(e={}),SMTCache["admin/library/subject_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/library/topic_view"]=Mustache.compile('<span class="afl_topic_drag_handle afl_drag_handle"></span>\n<span class="afl_topic_name afl_name">\n\t{{name}}\n\t<span class="afl_variants">\n\t\t{{variants}}\n\t</span>\n</span>\n<span class="afl_edit_fields" style="display: none">\n\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Topic name">\n\t<input type="text" class="afl_variant_edit sub afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n</span>\n<span class="topic_edit_controls afl_edit_controls">\n\t{{> admin/library/edit_controls }}\n</span>\n\n\n'),Mustache.compilePartial("admin/library/topic_view",'<span class="afl_topic_drag_handle afl_drag_handle"></span>\n<span class="afl_topic_name afl_name">\n\t{{name}}\n\t<span class="afl_variants">\n\t\t{{variants}}\n\t</span>\n</span>\n<span class="afl_edit_fields" style="display: none">\n\t<input type="text" class="afl_name_edit sub afl_edit_field" value="{{name}}" placeholder="Topic name">\n\t<input type="text" class="afl_variant_edit sub afl_edit_field" value="{{variants}}" placeholder="Variants (optional, comma separated)">\n</span>\n<span class="topic_edit_controls afl_edit_controls">\n\t{{> admin/library/edit_controls }}\n</span>\n\n\n'),this.SMT["admin/library/topic_view"]=function(e){return e||(e={}),SMTCache["admin/library/topic_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["admin/vat/row"]=Mustache.compile('<div class="row">\n\n  <div class="col-12 col-lg-8 offset-lg-2">\n\n    <div class="row display_view">\n\n      <div class="col-4">\n        <span class="rate">\n          {{ rate }}\n        </span>\n      </div>\n      <div class="col-4">\n        <span class="start_date">{{ start_date }}</span>\n      </div>\n      <div class="col-4 action_buttons">\n        <span class=\'edit_btn btn btn-info\'>{{ edit_text }}</span>\n        <span class=\'delete_btn btn btn-default\'>\n          <i class="icon-trash"></i>\n        </span>\n      </div>\n\n    </div>\n\n    <div class="row edit_view" style="display:none">\n      <div class="col-4">\n        <input type="text" name="rate" class="rate" value={{ rate }} >\n      </div>\n\n      <div class="col-4">\n        <input type="text" name="start_date_picker" class="datepicker" value={{ start_date }} >\n        <input type="hidden" name="start_date" class="sortable_start_date" value={{ sortable_start_date }}>\n      </div>\n\n      <div class="col-4 action_buttons">\n        <span class=\'save_btn btn btn-success\'>{{ save_text }}</span>\n        <span class=\'cancel_btn btn btn-default\'>{{ cancel_text }}</span>\n      </div>\n    </div>\n\n    <div class="error_content"></div>\n\n  </div>\n\n\n</div>\n'),Mustache.compilePartial("admin/vat/row",'<div class="row">\n\n  <div class="col-12 col-lg-8 offset-lg-2">\n\n    <div class="row display_view">\n\n      <div class="col-4">\n        <span class="rate">\n          {{ rate }}\n        </span>\n      </div>\n      <div class="col-4">\n        <span class="start_date">{{ start_date }}</span>\n      </div>\n      <div class="col-4 action_buttons">\n        <span class=\'edit_btn btn btn-info\'>{{ edit_text }}</span>\n        <span class=\'delete_btn btn btn-default\'>\n          <i class="icon-trash"></i>\n        </span>\n      </div>\n\n    </div>\n\n    <div class="row edit_view" style="display:none">\n      <div class="col-4">\n        <input type="text" name="rate" class="rate" value={{ rate }} >\n      </div>\n\n      <div class="col-4">\n        <input type="text" name="start_date_picker" class="datepicker" value={{ start_date }} >\n        <input type="hidden" name="start_date" class="sortable_start_date" value={{ sortable_start_date }}>\n      </div>\n\n      <div class="col-4 action_buttons">\n        <span class=\'save_btn btn btn-success\'>{{ save_text }}</span>\n        <span class=\'cancel_btn btn btn-default\'>{{ cancel_text }}</span>\n      </div>\n    </div>\n\n    <div class="error_content"></div>\n\n  </div>\n\n\n</div>\n'),this.SMT["admin/vat/row"]=function(e){return e||(e={}),SMTCache["admin/vat/row"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["ads/google_dfp_ad"]=Mustache.compile("<div class=\"ad_wrapper\">\n  <div id='{{ id }}'\n       class='{{ clazz }}'\n       data-gpt-path='/66015196/{{ ad_unit_id }}'\n       {{#custom}}\n         data-custom-{{ key }}='{{ value }}'\n       {{/custom}}\n       {{#out_of_page}}\n         data-gpt-outwith='true'\n       {{/out_of_page}}\n       {{^out_of_page}}\n         data-gpt-size='[{{ width }}, {{ height }}]'\n         data-gpt-sizes='{{ sizes }}'>\n       {{/out_of_page}}\n  </div>\n  <div class=\"ad_actions {{actions_position}}\">\n    {{^hide_remove_ads_link}}\n      <a class=\"remove_ads {{#auth_user}}upgrade_btn{{/auth_user}}{{^auth_user}}show_sign_in_modal{{/auth_user}}\">\n        {{remove_ads_text}}\n      </a>\n    {{/hide_remove_ads_link}}\n    {{#closable}}\n      <a class=\"close_ad\">\n        {{close_ad_text}}\n      </a>\n    {{/closable}}\n  </div>\n</div>\n"),Mustache.compilePartial("ads/google_dfp_ad","<div class=\"ad_wrapper\">\n  <div id='{{ id }}'\n       class='{{ clazz }}'\n       data-gpt-path='/66015196/{{ ad_unit_id }}'\n       {{#custom}}\n         data-custom-{{ key }}='{{ value }}'\n       {{/custom}}\n       {{#out_of_page}}\n         data-gpt-outwith='true'\n       {{/out_of_page}}\n       {{^out_of_page}}\n         data-gpt-size='[{{ width }}, {{ height }}]'\n         data-gpt-sizes='{{ sizes }}'>\n       {{/out_of_page}}\n  </div>\n  <div class=\"ad_actions {{actions_position}}\">\n    {{^hide_remove_ads_link}}\n      <a class=\"remove_ads {{#auth_user}}upgrade_btn{{/auth_user}}{{^auth_user}}show_sign_in_modal{{/auth_user}}\">\n        {{remove_ads_text}}\n      </a>\n    {{/hide_remove_ads_link}}\n    {{#closable}}\n      <a class=\"close_ad\">\n        {{close_ad_text}}\n      </a>\n    {{/closable}}\n  </div>\n</div>\n"),this.SMT["ads/google_dfp_ad"]=function(e){return e||(e={}),SMTCache["ads/google_dfp_ad"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["ads/interstitial_google_dfp_ad"]=Mustache.compile('<div class="inner">\n  <div class="ad_wrapper">\n    <div id=\'{{ id }}\'\n         class=\'{{ clazz }}\'\n         data-gpt-path=\'/66015196/{{ ad_unit_id }}\'\n         {{#custom}}\n           data-custom-{{ key }}=\'{{ value }}\'\n         {{/custom}}\n         data-gpt-size=\'[{{ width }}, {{ height }}]\'\n         data-gpt-sizes=\'{{ sizes }}\'>\n    </div>\n  </div>\n  <div class="ad_actions">\n    <a class="remove_ads btn btn-success">\n      {{remove_ads_text}}\n    </a>\n    <a class="close_ad btn btn-default disabled">\n      <span class="resume_in" data-countdown={{countdown_from}}>\n        {{resume_in_text}}\n      </span>\n      <span class="resume_action">\n        {{resume_text}}\n      </span>\n    </a>\n  </div>\n</div>\n<div class="clearfix"></div>\n'),Mustache.compilePartial("ads/interstitial_google_dfp_ad",'<div class="inner">\n  <div class="ad_wrapper">\n    <div id=\'{{ id }}\'\n         class=\'{{ clazz }}\'\n         data-gpt-path=\'/66015196/{{ ad_unit_id }}\'\n         {{#custom}}\n           data-custom-{{ key }}=\'{{ value }}\'\n         {{/custom}}\n         data-gpt-size=\'[{{ width }}, {{ height }}]\'\n         data-gpt-sizes=\'{{ sizes }}\'>\n    </div>\n  </div>\n  <div class="ad_actions">\n    <a class="remove_ads btn btn-success">\n      {{remove_ads_text}}\n    </a>\n    <a class="close_ad btn btn-default disabled">\n      <span class="resume_in" data-countdown={{countdown_from}}>\n        {{resume_in_text}}\n      </span>\n      <span class="resume_action">\n        {{resume_text}}\n      </span>\n    </a>\n  </div>\n</div>\n<div class="clearfix"></div>\n'),this.SMT["ads/interstitial_google_dfp_ad"]=function(e){return e||(e={}),SMTCache["ads/interstitial_google_dfp_ad"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["alerts/action_alert_entry"]=Mustache.compile('<a href="{{ url }}" class="{{additional_classes}}">\n  <div class="nav_po_section">\n    <div class="notification_icon">\n\n      {{#unread}}\n        <span class="kill_action_alert" data-toggle="tooltip" title="{{ tool_tip }}">\n          <div class="sprite bg-icon-exclamation_circle"></div>\n        </span>\n      {{/unread}}\n    </div>\n    {{{ performer_avatar }}}\n    <div class="nav_po_section_body">\n      <div class="nav_po_section_content">\n        <div class="nav_po_section_headline tex2jax_ignore {{performer_badge_classes}}">\n          {{ performer_name }}\n          {{{ icon_image }}}\n        </div>\n        {{ content }}\n        <div class="nav_po_section_time">\n          {{ time_ago }}\n        </div>\n      </div>\n\n    </div>\n  </div>\n</a>\n'),Mustache.compilePartial("alerts/action_alert_entry",'<a href="{{ url }}" class="{{additional_classes}}">\n  <div class="nav_po_section">\n    <div class="notification_icon">\n\n      {{#unread}}\n        <span class="kill_action_alert" data-toggle="tooltip" title="{{ tool_tip }}">\n          <div class="sprite bg-icon-exclamation_circle"></div>\n        </span>\n      {{/unread}}\n    </div>\n    {{{ performer_avatar }}}\n    <div class="nav_po_section_body">\n      <div class="nav_po_section_content">\n        <div class="nav_po_section_headline tex2jax_ignore {{performer_badge_classes}}">\n          {{ performer_name }}\n          {{{ icon_image }}}\n        </div>\n        {{ content }}\n        <div class="nav_po_section_time">\n          {{ time_ago }}\n        </div>\n      </div>\n\n    </div>\n  </div>\n</a>\n'),this.SMT["alerts/action_alert_entry"]=function(e){return e||(e={}),SMTCache["alerts/action_alert_entry"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["alerts/popover"]=Mustache.compile('<div class="popover_header">\n  <span class="popover_dropdown_title">\n    {{ alerts_title }}\n  </span>\n  <span id="mark_all_as_read">\n  \t{{ mark_all_as_read }}\n  \t<div class="sprite bg-icon-exclamation_circle_small"></div>\n  </span>\n</div>\n<div id="notification_content">\n</div>\n<div id="notification_footer" style="display:none">\n  <span class="notification_loading_text">\n\t{{ loading_notifications }}\n  </span>\n  <img alt="Loading" src="/assets/loading_dark.gif">\n</div>\n'),Mustache.compilePartial("alerts/popover",'<div class="popover_header">\n  <span class="popover_dropdown_title">\n    {{ alerts_title }}\n  </span>\n  <span id="mark_all_as_read">\n  \t{{ mark_all_as_read }}\n  \t<div class="sprite bg-icon-exclamation_circle_small"></div>\n  </span>\n</div>\n<div id="notification_content">\n</div>\n<div id="notification_footer" style="display:none">\n  <span class="notification_loading_text">\n\t{{ loading_notifications }}\n  </span>\n  <img alt="Loading" src="/assets/loading_dark.gif">\n</div>\n'),this.SMT["alerts/popover"]=function(e){return e||(e={}),SMTCache["alerts/popover"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["comments/comment"]=Mustache.compile('{{#reports_context}}\n  {{> status_updates/reported_info}}\n{{/reports_context}}\n\n<div class="status_comment {{number_likes_class}} {{#highlighted}}highlighted{{/highlighted}} {{#deleted}}deleted{{/deleted}}" data-id="{{id}}">\n\n  {{#deleted}}<div class="deleted_info">{{deleted_comment_text}}</div>{{/deleted}}\n\n  <div class="avatar">{{{ commenter_avatar }}}</div>\n  <div class="comment_box">\n    <div class="user_info">\n      {{#can_delete_comment}}{{^deleted}}\n        <span class="comment_remove" title="{{comment_remove_text}}">\xd7</span>\n      {{/deleted}}{{/can_delete_comment}}\n      <span class="user_name">{{{ commenter_profile_link }}}</span>\n      <span class="comment_body">\n        {{{ body }}}\n      </span>\n    </div>\n\n    {{#link_preview}}\n      {{> link_preview/preview }}\n    {{/link_preview}}\n\n\n    {{^reports_context}}{{^deleted}}\n      <div>\n        <span class="comment_actions">\n            <span class="comment_like">\n              <a href="#" title="{{like}}" class="comment_like_link" data-comment-id="{{ id }}">\n                {{#liked}}{{ liked_button_text }}{{/liked}}\n                {{^liked}}{{ like_button_text  }}{{/liked}}\n              </a>\n            </span>\n\n            <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n\n            <span class="comment_reply">\n              <a href="#" title="{{reply}}" class="comment_reply_link" data-comment-id="{{ id }}">\n                {{reply}}\n              </a>\n            </span>\n\n            {{#group_status}}{{^own_comment}}\n              <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n              {{^reported}}\n                <span class="status_comment_report">\n              <a>{{ report_text }}</a>\n                </span>\n            {{/reported}}\n            {{#reported}}\n                <span class="status_comment_report reported">\n                  <span class="sprite bg-icon-exclamation_small" title="{{ reported_text }}"></span>\n                  {{ reported_text }}\n                </span>\n            {{/reported}}\n            {{/own_comment}}{{/group_status}}\n        </span>\n\n        <span class="comment_likes">\n          <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n\n          <span class="likes" data-type="comment" data-id="{{ id }}">\n            <a href="#" class="liked_others" title="{{like_text_plain}}">\n              <span class="sprite bg-icon-thumb_small_up" title="{{ like_button_text }}"></span>\n              {{ total_likes }}\n            </a>\n          </span>\n        </span>\n\n        <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n      </div>\n    {{/deleted}}{{/reports_context}}\n\n    <div class="comment_date">{{ date }}</div>\n\n  </div>\n\n</div>\n\n{{^reported_by}}\n<div class="status_comments replies_zone" data-depth="{{nested_depth}}" data-parent-id="{{id}}">\n\n  {{#remaining_replies}}\n    <a href="#" class="view_previous_replies">\n      <span class="sprite bg-icon-balloon_small_left"></span>\n      <span>\n      \t{{#view_reply_count}}\n      \t\t{{ view_replies_with_count }}\n      \t{{/view_reply_count}}\n      \t{{^view_reply_count}}\n      \t\t{{ view_previous_replies }}\n      \t{{/view_reply_count}}\n      </span>\n      <img src="/assets/loading_small.gif" alt="{{loading_text}}" style="display: none" class="loading">\n    </a>\n  {{/remaining_replies}}\n\n  {{#nested_comments}}\n    <div class="nested_comments">\n      {{> comments/comment}}\n    </div>\n  {{/nested_comments}}\n\n  <div class="nested_reply_input"></div>\n</div>\n{{/reported_by}}\n'),Mustache.compilePartial("comments/comment",'{{#reports_context}}\n  {{> status_updates/reported_info}}\n{{/reports_context}}\n\n<div class="status_comment {{number_likes_class}} {{#highlighted}}highlighted{{/highlighted}} {{#deleted}}deleted{{/deleted}}" data-id="{{id}}">\n\n  {{#deleted}}<div class="deleted_info">{{deleted_comment_text}}</div>{{/deleted}}\n\n  <div class="avatar">{{{ commenter_avatar }}}</div>\n  <div class="comment_box">\n    <div class="user_info">\n      {{#can_delete_comment}}{{^deleted}}\n        <span class="comment_remove" title="{{comment_remove_text}}">\xd7</span>\n      {{/deleted}}{{/can_delete_comment}}\n      <span class="user_name">{{{ commenter_profile_link }}}</span>\n      <span class="comment_body">\n        {{{ body }}}\n      </span>\n    </div>\n\n    {{#link_preview}}\n      {{> link_preview/preview }}\n    {{/link_preview}}\n\n\n    {{^reports_context}}{{^deleted}}\n      <div>\n        <span class="comment_actions">\n            <span class="comment_like">\n              <a href="#" title="{{like}}" class="comment_like_link" data-comment-id="{{ id }}">\n                {{#liked}}{{ liked_button_text }}{{/liked}}\n                {{^liked}}{{ like_button_text  }}{{/liked}}\n              </a>\n            </span>\n\n            <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n\n            <span class="comment_reply">\n              <a href="#" title="{{reply}}" class="comment_reply_link" data-comment-id="{{ id }}">\n                {{reply}}\n              </a>\n            </span>\n\n            {{#group_status}}{{^own_comment}}\n              <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n              {{^reported}}\n                <span class="status_comment_report">\n              <a>{{ report_text }}</a>\n                </span>\n            {{/reported}}\n            {{#reported}}\n                <span class="status_comment_report reported">\n                  <span class="sprite bg-icon-exclamation_small" title="{{ reported_text }}"></span>\n                  {{ reported_text }}\n                </span>\n            {{/reported}}\n            {{/own_comment}}{{/group_status}}\n        </span>\n\n        <span class="comment_likes">\n          <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n\n          <span class="likes" data-type="comment" data-id="{{ id }}">\n            <a href="#" class="liked_others" title="{{like_text_plain}}">\n              <span class="sprite bg-icon-thumb_small_up" title="{{ like_button_text }}"></span>\n              {{ total_likes }}\n            </a>\n          </span>\n        </span>\n\n        <span role="presentation" aria-hidden="true" class="divider"> \xb7 </span>\n      </div>\n    {{/deleted}}{{/reports_context}}\n\n    <div class="comment_date">{{ date }}</div>\n\n  </div>\n\n</div>\n\n{{^reported_by}}\n<div class="status_comments replies_zone" data-depth="{{nested_depth}}" data-parent-id="{{id}}">\n\n  {{#remaining_replies}}\n    <a href="#" class="view_previous_replies">\n      <span class="sprite bg-icon-balloon_small_left"></span>\n      <span>\n      \t{{#view_reply_count}}\n      \t\t{{ view_replies_with_count }}\n      \t{{/view_reply_count}}\n      \t{{^view_reply_count}}\n      \t\t{{ view_previous_replies }}\n      \t{{/view_reply_count}}\n      </span>\n      <img src="/assets/loading_small.gif" alt="{{loading_text}}" style="display: none" class="loading">\n    </a>\n  {{/remaining_replies}}\n\n  {{#nested_comments}}\n    <div class="nested_comments">\n      {{> comments/comment}}\n    </div>\n  {{/nested_comments}}\n\n  <div class="nested_reply_input"></div>\n</div>\n{{/reported_by}}\n'),this.SMT["comments/comment"]=function(e){return e||(e={}),SMTCache["comments/comment"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["comments/comment_input"]=Mustache.compile('<div class="status_comment_input">\n  <div class="comment_box">\n    <textarea maxlength="2000" placeholder="{{ comment_placeholder }}"></textarea>\n    {{#show_save_button}}\n      <div class="save_btn btn btn-success" style="display: none">\n        <span class="label">{{save_label}}</span>\n        <img src="/assets/loading_small.gif" class="loading_spinner" style="display: none">\n      </div>\n    {{/show_save_button}}\n  </div>\n</div>\n'),Mustache.compilePartial("comments/comment_input",'<div class="status_comment_input">\n  <div class="comment_box">\n    <textarea maxlength="2000" placeholder="{{ comment_placeholder }}"></textarea>\n    {{#show_save_button}}\n      <div class="save_btn btn btn-success" style="display: none">\n        <span class="label">{{save_label}}</span>\n        <img src="/assets/loading_small.gif" class="loading_spinner" style="display: none">\n      </div>\n    {{/show_save_button}}\n  </div>\n</div>\n'),this.SMT["comments/comment_input"]=function(e){return e||(e={}),SMTCache["comments/comment_input"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/actions"]=Mustache.compile('{{#course_report}}\n  <span class="view_associated_study_aids_report">\n    <a href="{{ view_associated_study_aids_report_url }}">{{ view_associated_study_aids_report_label }}</a>\n  </span>\n{{/course_report}}\n<div class="btn btn-primary" id="export_report_csv">{{ export_csv_button_label }}</div>\n{{#show_data_capture_actions}}\n  <div class="btn btn-primary" id="export_data_capture_csv">{{ export_data_capture_csv_button_label }}</div>\n  <div class="btn btn-primary" id="export_data_capture_and_report_csv">{{ export_data_capture_and_report_csv_button_label }}</div>\n{{/show_data_capture_actions}}\n'),Mustache.compilePartial("consumption_reports/actions",'{{#course_report}}\n  <span class="view_associated_study_aids_report">\n    <a href="{{ view_associated_study_aids_report_url }}">{{ view_associated_study_aids_report_label }}</a>\n  </span>\n{{/course_report}}\n<div class="btn btn-primary" id="export_report_csv">{{ export_csv_button_label }}</div>\n{{#show_data_capture_actions}}\n  <div class="btn btn-primary" id="export_data_capture_csv">{{ export_data_capture_csv_button_label }}</div>\n  <div class="btn btn-primary" id="export_data_capture_and_report_csv">{{ export_data_capture_and_report_csv_button_label }}</div>\n{{/show_data_capture_actions}}\n'),this.SMT["consumption_reports/actions"]=function(e){return e||(e={}),SMTCache["consumption_reports/actions"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/course_report_container"]=Mustache.compile('<div class="course_report_container">\n  <h2>{{course_report_title}}</h2>\n</div>\n'),Mustache.compilePartial("consumption_reports/course_report_container",'<div class="course_report_container">\n  <h2>{{course_report_title}}</h2>\n</div>\n'),this.SMT["consumption_reports/course_report_container"]=function(e){return e||(e={}),SMTCache["consumption_reports/course_report_container"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/date"]=Mustache.compile('{{#date}}\n  <span class="date">{{ date }}</span>\n{{/date}}\n\n{{^date}}-{{/date}}'),Mustache.compilePartial("consumption_reports/date",'{{#date}}\n  <span class="date">{{ date }}</span>\n{{/date}}\n\n{{^date}}-{{/date}}'),this.SMT["consumption_reports/date"]=function(e){return e||(e={}),SMTCache["consumption_reports/date"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/reports_container"]=Mustache.compile('<ul class="nav nav-tabs" role="tablist">\n  <li class="nav-item" role="presentation">\n    <a class="nav-link {{#attempts_tab_active}}active{{/attempts_tab_active}}"\n       id="report_attempts_container_tab"\n       href="#report_attempts_container"\n       data-toggle="tab"\n       role="tab"\n       aria-controls="report_attempts_container"\n       aria-selected="{{attempts_tab_active}}">\n      {{attempts_label}}\n    </a>\n  </li>\n  <li class="nav-item" role="presentation">\n    <a class="nav-link {{#views_tab_active}}active{{/views_tab_active}}"\n       id="report_views_container_tab"\n       href="#report_views_container"\n       data-toggle="tab"\n       role="tab"\n       aria-controls="report_views_container"\n       aria-selected="{{views_tab_active}}">\n      {{views_label}}\n    </a>\n  </li>\n</ul>\n<div class="tab-content">\n  <div class="tab-pane fade report_attempts_container {{#attempts_tab_active}}show active{{/attempts_tab_active}}"\n       id="report_attempts_container"\n       role="tabpanel"\n       aria-labelledby="report_attempts_container_tab">\n   </div>\n  <div class="tab-pane fade report_views_container {{#views_tab_active}}show active{{/views_tab_active}}"\n       id="report_views_container"\n       role="tabpanel"\n       aria-labelledby="report_attempts_container_tab">\n  </div>\n</div>\n'),Mustache.compilePartial("consumption_reports/reports_container",'<ul class="nav nav-tabs" role="tablist">\n  <li class="nav-item" role="presentation">\n    <a class="nav-link {{#attempts_tab_active}}active{{/attempts_tab_active}}"\n       id="report_attempts_container_tab"\n       href="#report_attempts_container"\n       data-toggle="tab"\n       role="tab"\n       aria-controls="report_attempts_container"\n       aria-selected="{{attempts_tab_active}}">\n      {{attempts_label}}\n    </a>\n  </li>\n  <li class="nav-item" role="presentation">\n    <a class="nav-link {{#views_tab_active}}active{{/views_tab_active}}"\n       id="report_views_container_tab"\n       href="#report_views_container"\n       data-toggle="tab"\n       role="tab"\n       aria-controls="report_views_container"\n       aria-selected="{{views_tab_active}}">\n      {{views_label}}\n    </a>\n  </li>\n</ul>\n<div class="tab-content">\n  <div class="tab-pane fade report_attempts_container {{#attempts_tab_active}}show active{{/attempts_tab_active}}"\n       id="report_attempts_container"\n       role="tabpanel"\n       aria-labelledby="report_attempts_container_tab">\n   </div>\n  <div class="tab-pane fade report_views_container {{#views_tab_active}}show active{{/views_tab_active}}"\n       id="report_views_container"\n       role="tabpanel"\n       aria-labelledby="report_attempts_container_tab">\n  </div>\n</div>\n'),this.SMT["consumption_reports/reports_container"]=function(e){return e||(e={}),SMTCache["consumption_reports/reports_container"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/study_aid"]=Mustache.compile('{{#group_context_id}}\n  <a href="#" class="study_aid" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}" data-is-data-capture="{{ is_data_capture }}">\n    {{ study_aid_title }}\n  </a>\n{{/group_context_id}}\n\n{{^group_context_id}}\n  <a href="#" class="study_aid" data-study-aid-id="{{ study_aid_id }}" data-is-data-capture="{{ is_data_capture }}">\n    {{ study_aid_title }}\n  </a>\n{{/group_context_id}}\n'),Mustache.compilePartial("consumption_reports/study_aid",'{{#group_context_id}}\n  <a href="#" class="study_aid" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}" data-is-data-capture="{{ is_data_capture }}">\n    {{ study_aid_title }}\n  </a>\n{{/group_context_id}}\n\n{{^group_context_id}}\n  <a href="#" class="study_aid" data-study-aid-id="{{ study_aid_id }}" data-is-data-capture="{{ is_data_capture }}">\n    {{ study_aid_title }}\n  </a>\n{{/group_context_id}}\n'),this.SMT["consumption_reports/study_aid"]=function(e){return e||(e={}),SMTCache["consumption_reports/study_aid"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/user"]=Mustache.compile('{{#is_data_capture}}\n  <i class="view_data_capture_details" data-user-id="{{ user_id }}">\n    <div class="sprite bg-icon-clipboard" title="{{ view_data_capture_details_text }}"></div>\n  </i>\n{{/is_data_capture}}\n{{#group_context_id}}\n  <a href="#"\n     class="user"\n     data-user-id="{{ user_id }}"\n     data-is-eps="{{ is_eps }}"\n     data-is-data-capture="{{ is_data_capture }}"\n     data-group-context-id="{{ group_context_id }}"\n     data-eps-id="{{ eps_id }}">\n    {{ user_name }}\n  </a>\n{{/group_context_id}}\n{{^group_context_id}}\n  <a href="#"\n     class="user"\n     data-user-id="{{ user_id }}"\n     data-is-eps="{{ is_eps }}"\n     data-is-data-capture="{{ is_data_capture }}"\n     data-eps-id="{{ eps_id }}">\n    {{ user_name }}\n  </a>\n{{/group_context_id}}\n'),Mustache.compilePartial("consumption_reports/user",'{{#is_data_capture}}\n  <i class="view_data_capture_details" data-user-id="{{ user_id }}">\n    <div class="sprite bg-icon-clipboard" title="{{ view_data_capture_details_text }}"></div>\n  </i>\n{{/is_data_capture}}\n{{#group_context_id}}\n  <a href="#"\n     class="user"\n     data-user-id="{{ user_id }}"\n     data-is-eps="{{ is_eps }}"\n     data-is-data-capture="{{ is_data_capture }}"\n     data-group-context-id="{{ group_context_id }}"\n     data-eps-id="{{ eps_id }}">\n    {{ user_name }}\n  </a>\n{{/group_context_id}}\n{{^group_context_id}}\n  <a href="#"\n     class="user"\n     data-user-id="{{ user_id }}"\n     data-is-eps="{{ is_eps }}"\n     data-is-data-capture="{{ is_data_capture }}"\n     data-eps-id="{{ eps_id }}">\n    {{ user_name }}\n  </a>\n{{/group_context_id}}\n'),this.SMT["consumption_reports/user"]=function(e){return e||(e={}),SMTCache["consumption_reports/user"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/filters/multiple_users_multiple_resources"]=Mustache.compile('<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="best" selected="selected">{{ best_score_label }}</option>\n    <option value="recent">{{ most_recent_attempt_label }}</option>\n    <option value="average">{{ average_label }}</option>\n  </select>\n</p>'),Mustache.compilePartial("consumption_reports/filters/multiple_users_multiple_resources",'<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="best" selected="selected">{{ best_score_label }}</option>\n    <option value="recent">{{ most_recent_attempt_label }}</option>\n    <option value="average">{{ average_label }}</option>\n  </select>\n</p>'),this.SMT["consumption_reports/filters/multiple_users_multiple_resources"]=function(e){return e||(e={}),SMTCache["consumption_reports/filters/multiple_users_multiple_resources"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/filters/multiple_users_single_resource"]=Mustache.compile('<p>\n  <label>{{ sort_by_label }}</label>\n  <select id="sort_by">\n    <option value="name" selected="selected">{{ name_label }}</option>\n    <option value="score">{{ score_label }}</option>\n  </select>\n</p>\n\n<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="best" selected="selected">{{ best_score_label }}</option>\n    <option value="recent">{{ most_recent_attempt_label }}</option>\n  </select>\n</p>'),Mustache.compilePartial("consumption_reports/filters/multiple_users_single_resource",'<p>\n  <label>{{ sort_by_label }}</label>\n  <select id="sort_by">\n    <option value="name" selected="selected">{{ name_label }}</option>\n    <option value="score">{{ score_label }}</option>\n  </select>\n</p>\n\n<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="best" selected="selected">{{ best_score_label }}</option>\n    <option value="recent">{{ most_recent_attempt_label }}</option>\n  </select>\n</p>'),this.SMT["consumption_reports/filters/multiple_users_single_resource"]=function(e){return e||(e={}),SMTCache["consumption_reports/filters/multiple_users_single_resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/filters/single_user_multiple_resources"]=Mustache.compile('<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="recent" selected="selected">{{ most_recent_attempt_label }}</option>\n    <option value="best" >{{ best_score_label }}</option>\n  </select>\n</p>'),Mustache.compilePartial("consumption_reports/filters/single_user_multiple_resources",'<p>\n  <label>{{ show_label }}</label>\n  <select id="show_by">\n    <option value="recent" selected="selected">{{ most_recent_attempt_label }}</option>\n    <option value="best" >{{ best_score_label }}</option>\n  </select>\n</p>'),this.SMT["consumption_reports/filters/single_user_multiple_resources"]=function(e){return e||(e={}),SMTCache["consumption_reports/filters/single_user_multiple_resources"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/table/row"]=Mustache.compile("{{ content }}"),Mustache.compilePartial("consumption_reports/table/row","{{ content }}"),this.SMT["consumption_reports/table/row"]=function(e){return e||(e={}),SMTCache["consumption_reports/table/row"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/table/table"]=Mustache.compile("<table>\n  <thead></thead>\n  <tbody></tbody>\n  <tfoot></tfoot>\n</table>"),Mustache.compilePartial("consumption_reports/table/table","<table>\n  <thead></thead>\n  <tbody></tbody>\n  <tfoot></tfoot>\n</table>"),this.SMT["consumption_reports/table/table"]=function(e){return e||(e={}),SMTCache["consumption_reports/table/table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/table/tbody/cell"]=Mustache.compile('<span class="body_cell">\n\n  {{#is_attempt_action}}\n\n    {{#has_attempted}}\n      <span class="{{ result_state }}">\n        {{#is_correct}}\u2713{{/is_correct}}\n        {{#is_partially_correct}}x ({{ partial_score }}){{/is_partially_correct}}\n        {{#is_incorrect}}x{{/is_incorrect}}\n      </span>\n    {{/has_attempted}}\n\n    {{^has_attempted}}-{{/has_attempted}}\n\n  {{/is_attempt_action}}\n\n  {{^is_percentage}}\n\n    {{^is_view}}\n\n      {{#is_total}}\n        <span class="questions_score">{{ questions_score }}/{{ questions_score_possible }}</span>\n      {{/is_total}}\n\n    {{/is_view}}\n\n    {{#is_view}}\n\n      {{#is_total}}\n        <span class="total">{{ value }}</span>\n      {{/is_total}}\n\n      {{#is_date}}\n        {{>consumption_reports/date}}\n      {{/is_date}}\n\n      {{#user_id}}\n        {{#study_aid_id}}\n          <span class="value">\n            {{#group_context_id}}\n              <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}">{{ value }}</a>\n            {{/group_context_id}}\n            {{^group_context_id}}\n              <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}">{{ value }}</a>\n            {{/group_context_id}}\n          </span>\n        {{/study_aid_id}}\n      {{/user_id}}\n\n    {{/is_view}}\n\n  {{/is_percentage}}\n\n\n  {{#is_percentage}}\n\n    {{#is_total}}\n      <span class="total percentage">{{ value }}%</span>\n    {{/is_total}}\n\n    {{^is_total}}\n\n      {{#has_attempted}}\n        <span class="percentage">\n          {{#group_context_id}}\n            <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}">{{ value }}%</a>\n          {{/group_context_id}}\n          {{^group_context_id}}\n            <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}">{{ value }}%</a>\n          {{/group_context_id}}\n        </span>\n      {{/has_attempted}}\n\n      {{^has_attempted}}-{{/has_attempted}}\n\n    {{/is_total}}\n\n  {{/is_percentage}}\n\n\n  {{#is_user}}\n    {{>consumption_reports/user}}\n  {{/is_user}}\n\n\n  {{#is_question}}\n    <a href="#" class="question" data-question-id="{{ question_id }}" data-study-aid-type="{{ study_aid_type }}">{{ question }}</a>\n  {{/is_question}}\n\n  {{#is_course_module}}\n    <a href="#" class="course_module" data-course-module-id="{{ course_module_id }}">{{ course_module_title }}</a>\n  {{/is_course_module}}\n\n  {{ content }}\n\n</span>\n'),
Mustache.compilePartial("consumption_reports/table/tbody/cell",'<span class="body_cell">\n\n  {{#is_attempt_action}}\n\n    {{#has_attempted}}\n      <span class="{{ result_state }}">\n        {{#is_correct}}\u2713{{/is_correct}}\n        {{#is_partially_correct}}x ({{ partial_score }}){{/is_partially_correct}}\n        {{#is_incorrect}}x{{/is_incorrect}}\n      </span>\n    {{/has_attempted}}\n\n    {{^has_attempted}}-{{/has_attempted}}\n\n  {{/is_attempt_action}}\n\n  {{^is_percentage}}\n\n    {{^is_view}}\n\n      {{#is_total}}\n        <span class="questions_score">{{ questions_score }}/{{ questions_score_possible }}</span>\n      {{/is_total}}\n\n    {{/is_view}}\n\n    {{#is_view}}\n\n      {{#is_total}}\n        <span class="total">{{ value }}</span>\n      {{/is_total}}\n\n      {{#is_date}}\n        {{>consumption_reports/date}}\n      {{/is_date}}\n\n      {{#user_id}}\n        {{#study_aid_id}}\n          <span class="value">\n            {{#group_context_id}}\n              <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}">{{ value }}</a>\n            {{/group_context_id}}\n            {{^group_context_id}}\n              <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}">{{ value }}</a>\n            {{/group_context_id}}\n          </span>\n        {{/study_aid_id}}\n      {{/user_id}}\n\n    {{/is_view}}\n\n  {{/is_percentage}}\n\n\n  {{#is_percentage}}\n\n    {{#is_total}}\n      <span class="total percentage">{{ value }}%</span>\n    {{/is_total}}\n\n    {{^is_total}}\n\n      {{#has_attempted}}\n        <span class="percentage">\n          {{#group_context_id}}\n            <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}" data-group-context-id="{{ group_context_id }}">{{ value }}%</a>\n          {{/group_context_id}}\n          {{^group_context_id}}\n            <a href="#" data-user-id="{{ user_id }}" data-study-aid-id="{{ study_aid_id }}">{{ value }}%</a>\n          {{/group_context_id}}\n        </span>\n      {{/has_attempted}}\n\n      {{^has_attempted}}-{{/has_attempted}}\n\n    {{/is_total}}\n\n  {{/is_percentage}}\n\n\n  {{#is_user}}\n    {{>consumption_reports/user}}\n  {{/is_user}}\n\n\n  {{#is_question}}\n    <a href="#" class="question" data-question-id="{{ question_id }}" data-study-aid-type="{{ study_aid_type }}">{{ question }}</a>\n  {{/is_question}}\n\n  {{#is_course_module}}\n    <a href="#" class="course_module" data-course-module-id="{{ course_module_id }}">{{ course_module_title }}</a>\n  {{/is_course_module}}\n\n  {{ content }}\n\n</span>\n'),this.SMT["consumption_reports/table/tbody/cell"]=function(e){return e||(e={}),SMTCache["consumption_reports/table/tbody/cell"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/table/tfoot/cell"]=Mustache.compile('<span class="footer_cell">\n\n  {{#is_total}}\n\n    {{#has_attempted}}\n      <span class="score">{{ score }}/{{ score_possible }}</span>\n      {{#percentage}}\n        ({{ percentage }}%)\n      {{/percentage}}\n    {{/has_attempted}}\n\n    {{^has_attempted}}-{{/has_attempted}}\n\n  {{/is_total}}\n\n\n  {{ content }}\n\n</span>\n'),Mustache.compilePartial("consumption_reports/table/tfoot/cell",'<span class="footer_cell">\n\n  {{#is_total}}\n\n    {{#has_attempted}}\n      <span class="score">{{ score }}/{{ score_possible }}</span>\n      {{#percentage}}\n        ({{ percentage }}%)\n      {{/percentage}}\n    {{/has_attempted}}\n\n    {{^has_attempted}}-{{/has_attempted}}\n\n  {{/is_total}}\n\n\n  {{ content }}\n\n</span>\n'),this.SMT["consumption_reports/table/tfoot/cell"]=function(e){return e||(e={}),SMTCache["consumption_reports/table/tfoot/cell"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["consumption_reports/table/thead/cell"]=Mustache.compile('<span class="header_cell">\n\n  {{#is_user}}\n    {{>consumption_reports/user}}\n  {{/is_user}}\n\n\n  {{#is_study_aid}}\n    {{>consumption_reports/study_aid}}\n  {{/is_study_aid}}\n\n\n  {{#is_date}}\n    {{>consumption_reports/date}}\n  {{/is_date}}\n\n\n  {{ content }}\n\n</span>\n'),Mustache.compilePartial("consumption_reports/table/thead/cell",'<span class="header_cell">\n\n  {{#is_user}}\n    {{>consumption_reports/user}}\n  {{/is_user}}\n\n\n  {{#is_study_aid}}\n    {{>consumption_reports/study_aid}}\n  {{/is_study_aid}}\n\n\n  {{#is_date}}\n    {{>consumption_reports/date}}\n  {{/is_date}}\n\n\n  {{ content }}\n\n</span>\n'),this.SMT["consumption_reports/table/thead/cell"]=function(e){return e||(e={}),SMTCache["consumption_reports/table/thead/cell"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/choose_course_module_template"]=Mustache.compile('<div class="row">\n  <div class="col-12">\n    <h2 class="choose_template_instructions">\n      {{ instructions_txt }}\n    </h2>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-12">\n    <div class="template" data-template="resource_only">\n      <img src="/assets/courses/icon-template-resource@302.png"/>\n      <p>{{ resource_only_txt }}</p>\n    </div>\n    <div class="template" data-template="text_only">\n      <img src="/assets/courses/icon-template-text@302.png"/>\n      <p>{{ text_only_txt }}</p>\n    </div>\n    <div class="template" data-template="media_only">\n      <img src="/assets/courses/icon-template-media@302.png"/>\n      <p>{{ media_only_txt }}</p>\n    </div>\n  </div>\n</div>\n\n<div class="course_template_separator"></div>\n\n<div class="row">\n  <div class="col-12">\n    <div class="template" data-template="resource_above_text">\n      <img src="/assets/courses/icon-template-resource-on-text@302.png"/>\n      <p>{{ resource_above_text_txt }}</p>\n    </div>\n    <div class="template" data-template="media_above_text">\n      <img src="/assets/courses/icon-template-media-on-text@302.png"/>\n      <p>{{ media_above_text_txt }}</p>\n    </div>\n    {{#show_data_capture_form}}\n      <div class="template" data-template="data_capture_form">\n        <img src="/assets/courses/icon-template-form@302.png"/>\n        <p>{{ data_capture_form_txt }}</p>\n      </div>\n    {{/show_data_capture_form}}\n  </div>\n</div>\n'),Mustache.compilePartial("courses/choose_course_module_template",'<div class="row">\n  <div class="col-12">\n    <h2 class="choose_template_instructions">\n      {{ instructions_txt }}\n    </h2>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-12">\n    <div class="template" data-template="resource_only">\n      <img src="/assets/courses/icon-template-resource@302.png"/>\n      <p>{{ resource_only_txt }}</p>\n    </div>\n    <div class="template" data-template="text_only">\n      <img src="/assets/courses/icon-template-text@302.png"/>\n      <p>{{ text_only_txt }}</p>\n    </div>\n    <div class="template" data-template="media_only">\n      <img src="/assets/courses/icon-template-media@302.png"/>\n      <p>{{ media_only_txt }}</p>\n    </div>\n  </div>\n</div>\n\n<div class="course_template_separator"></div>\n\n<div class="row">\n  <div class="col-12">\n    <div class="template" data-template="resource_above_text">\n      <img src="/assets/courses/icon-template-resource-on-text@302.png"/>\n      <p>{{ resource_above_text_txt }}</p>\n    </div>\n    <div class="template" data-template="media_above_text">\n      <img src="/assets/courses/icon-template-media-on-text@302.png"/>\n      <p>{{ media_above_text_txt }}</p>\n    </div>\n    {{#show_data_capture_form}}\n      <div class="template" data-template="data_capture_form">\n        <img src="/assets/courses/icon-template-form@302.png"/>\n        <p>{{ data_capture_form_txt }}</p>\n      </div>\n    {{/show_data_capture_form}}\n  </div>\n</div>\n'),this.SMT["courses/choose_course_module_template"]=function(e){return e||(e={}),SMTCache["courses/choose_course_module_template"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/close_course_button"]=Mustache.compile('<a class="close_resource" title="{{ close_btn_text }}">\n  <div class="sprite bg-icon-close_resource"></div>\n</a>\n'),Mustache.compilePartial("courses/close_course_button",'<a class="close_resource" title="{{ close_btn_text }}">\n  <div class="sprite bg-icon-close_resource"></div>\n</a>\n'),this.SMT["courses/close_course_button"]=function(e){return e||(e={}),SMTCache["courses/close_course_button"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_actions"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog" role="document" aria-labelledby="actions_modal_title">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 id="actions_modal_title">{{ title }}</h2>\n      </div>\n      <div class="modal-body">\n      \t<div id="actions_list">\n\t        <div class="action" data-action="{{#edit_mode}}play{{/edit_mode}}{{^edit_mode}}edit{{/edit_mode}}">\n\t            <div class="action_icon">\n\t              {{#edit_mode}}\n\t                <div class="icon">{{{ icon_play }}}</div>\n\t                <div class="title">{{ title_play }}</div>\n\t              {{/edit_mode}}\n\t              {{^edit_mode}}\n\t                <div class="icon">{{{ icon_edit }}}</div>\n\t                <div class="title">{{ title_edit }}</div>\n\t              {{/edit_mode}}\n\t            </div>\n\t        \t<div class="action_text">\n\t              {{#edit_mode}}\n\t                {{{ description_play }}}\n\t              {{/edit_mode}}\n\t              {{^edit_mode}}\n\t                {{{ description_edit }}}\n\t              {{/edit_mode}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action" data-action="assign">\n\t        \t<div class="action_icon">\n        \t\t\t<div class="icon">{{{ icon_assign }}}</div>\n        \t\t\t<div class="title">{{ title_assign }}</div>\n            \t</div>\n\t        \t<div class="action_text">\n              \t\t{{{ description_assign }}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_social }}}</div>\n\t              <div class="title">{{ title_social }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{^private}}{{{ description_social }}}{{/private}}\n\t              {{#private}}{{{ description_social_disabled }}}{{/private}}\n\t            </div>\n\t        </div>\n\t\t    <div class="action eps {{^can_eps}}disabled{{/can_eps}}" data-action="eps">\n\t        \t<div class="action_icon">\n\t        \t\t<div class="icon">{{{ icon_eps }}}</div>\n\t        \t\t<div class="title">{{ title_eps }}</div>\n\t            </div>\n\t        \t<div class="action_text">\n\t        \t\t{{#can_eps}}{{{ description_eps }}}{{/can_eps}}\n\t        \t\t{{^can_eps}}\n\t        \t\t\t{{#institution_member}}\n\t        \t\t\t\t{{#is_author}}{{{ description_eps_disabled_permission }}}{{/is_author}}\n\t        \t\t\t\t{{^is_author}}{{{ description_eps_disabled_author }}}{{/is_author}}\n\t        \t\t\t{{/institution_member}}\n\t        \t\t\t{{^institution_member}}{{{ description_eps_disabled_upgrade }}}{{/institution_member}}\n        \t\t\t{{/can_eps}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action data_capture {{^can_data_capture}}disabled{{/can_data_capture}}" data-action="data_capture">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_data_capture }}}</div>\n\t              <div class="title">{{ title_data_capture }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{#can_data_capture}}{{{ description_data_capture }}}{{/can_data_capture}}\n\t              {{^can_data_capture}}\n\t                {{#institution_member}}\n\t                  {{#is_author}}{{{ description_data_capture_disabled_permission }}}{{/is_author}}\n\t                  {{^is_author}}{{{ description_data_capture_disabled_author }}}{{/is_author}}\n\t                {{/institution_member}}\n\t                {{^institution_member}}{{{ description_data_capture_disabled_upgrade }}}{{/institution_member}}\n\t              {{/can_data_capture}}\n\t            </div>\n\t        </div>\n\t        <div class="action reports {{^can_perform_report}}disabled{{/can_perform_report}}" data-action="reports">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_reports }}}</div>\n\t              <div class="title">{{ title_reports }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{#can_perform_report}}{{{ description_reports }}}{{/can_perform_report}}\n\t              {{^can_perform_report}}\n\t                {{#institution_member}}\n\t                  {{#is_author}}{{{ description_reports_disabled_permission }}}{{/is_author}}\n\t                  {{^is_author}}{{{ description_reports_disabled_author }}}{{/is_author}}\n\t                {{/institution_member}}\n\t                {{^institution_member}}{{{ description_reports_disabled_upgrade }}}{{/institution_member}}\n\t              {{/can_perform_report}}\n\t            </div>\n\t        </div>\n\t        <div class="action" data-action="delete">\n\t        \t<div class="action_icon">\n\t        \t\t<div class="icon">{{{ icon_delete }}}</div>\n\t        \t\t<div class="title">{{ title_delete }}</div>\n\t            </div>\n\t        \t<div class="action_text">\n              \t\t{{{ description_delete }}}\n\t        \t</div>\n\t        </div>\n\t    </div>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("courses/course_actions",'<div class="modal" role="dialog">\n  <div class="modal-dialog" role="document" aria-labelledby="actions_modal_title">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 id="actions_modal_title">{{ title }}</h2>\n      </div>\n      <div class="modal-body">\n      \t<div id="actions_list">\n\t        <div class="action" data-action="{{#edit_mode}}play{{/edit_mode}}{{^edit_mode}}edit{{/edit_mode}}">\n\t            <div class="action_icon">\n\t              {{#edit_mode}}\n\t                <div class="icon">{{{ icon_play }}}</div>\n\t                <div class="title">{{ title_play }}</div>\n\t              {{/edit_mode}}\n\t              {{^edit_mode}}\n\t                <div class="icon">{{{ icon_edit }}}</div>\n\t                <div class="title">{{ title_edit }}</div>\n\t              {{/edit_mode}}\n\t            </div>\n\t        \t<div class="action_text">\n\t              {{#edit_mode}}\n\t                {{{ description_play }}}\n\t              {{/edit_mode}}\n\t              {{^edit_mode}}\n\t                {{{ description_edit }}}\n\t              {{/edit_mode}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action" data-action="assign">\n\t        \t<div class="action_icon">\n        \t\t\t<div class="icon">{{{ icon_assign }}}</div>\n        \t\t\t<div class="title">{{ title_assign }}</div>\n            \t</div>\n\t        \t<div class="action_text">\n              \t\t{{{ description_assign }}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_social }}}</div>\n\t              <div class="title">{{ title_social }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{^private}}{{{ description_social }}}{{/private}}\n\t              {{#private}}{{{ description_social_disabled }}}{{/private}}\n\t            </div>\n\t        </div>\n\t\t    <div class="action eps {{^can_eps}}disabled{{/can_eps}}" data-action="eps">\n\t        \t<div class="action_icon">\n\t        \t\t<div class="icon">{{{ icon_eps }}}</div>\n\t        \t\t<div class="title">{{ title_eps }}</div>\n\t            </div>\n\t        \t<div class="action_text">\n\t        \t\t{{#can_eps}}{{{ description_eps }}}{{/can_eps}}\n\t        \t\t{{^can_eps}}\n\t        \t\t\t{{#institution_member}}\n\t        \t\t\t\t{{#is_author}}{{{ description_eps_disabled_permission }}}{{/is_author}}\n\t        \t\t\t\t{{^is_author}}{{{ description_eps_disabled_author }}}{{/is_author}}\n\t        \t\t\t{{/institution_member}}\n\t        \t\t\t{{^institution_member}}{{{ description_eps_disabled_upgrade }}}{{/institution_member}}\n        \t\t\t{{/can_eps}}\n\t        \t</div>\n\t        </div>\n\t        <div class="action data_capture {{^can_data_capture}}disabled{{/can_data_capture}}" data-action="data_capture">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_data_capture }}}</div>\n\t              <div class="title">{{ title_data_capture }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{#can_data_capture}}{{{ description_data_capture }}}{{/can_data_capture}}\n\t              {{^can_data_capture}}\n\t                {{#institution_member}}\n\t                  {{#is_author}}{{{ description_data_capture_disabled_permission }}}{{/is_author}}\n\t                  {{^is_author}}{{{ description_data_capture_disabled_author }}}{{/is_author}}\n\t                {{/institution_member}}\n\t                {{^institution_member}}{{{ description_data_capture_disabled_upgrade }}}{{/institution_member}}\n\t              {{/can_data_capture}}\n\t            </div>\n\t        </div>\n\t        <div class="action reports {{^can_perform_report}}disabled{{/can_perform_report}}" data-action="reports">\n\t            <div class="action_icon">\n\t              <div class="icon">{{{ icon_reports }}}</div>\n\t              <div class="title">{{ title_reports }}</div>\n\t              </div>\n\t            <div class="action_text">\n\t              {{#can_perform_report}}{{{ description_reports }}}{{/can_perform_report}}\n\t              {{^can_perform_report}}\n\t                {{#institution_member}}\n\t                  {{#is_author}}{{{ description_reports_disabled_permission }}}{{/is_author}}\n\t                  {{^is_author}}{{{ description_reports_disabled_author }}}{{/is_author}}\n\t                {{/institution_member}}\n\t                {{^institution_member}}{{{ description_reports_disabled_upgrade }}}{{/institution_member}}\n\t              {{/can_perform_report}}\n\t            </div>\n\t        </div>\n\t        <div class="action" data-action="delete">\n\t        \t<div class="action_icon">\n\t        \t\t<div class="icon">{{{ icon_delete }}}</div>\n\t        \t\t<div class="title">{{ title_delete }}</div>\n\t            </div>\n\t        \t<div class="action_text">\n              \t\t{{{ description_delete }}}\n\t        \t</div>\n\t        </div>\n\t    </div>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["courses/course_actions"]=function(e){return e||(e={}),SMTCache["courses/course_actions"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_assignment_tile"]=Mustache.compile('<a {{#has_started}}href="{{ url }}"{{/has_started}} class="attached_course attach_preview {{^has_started}}disabled{{/has_started}}">\n  <span class="link_images course"></span>\n  <span class="link_content">\n    <div class="link_title">\n    \t{{ title }}\n    </div>\n    <div class="description">{{ description }}</div>\n    {{^has_started}}\n      <div class="start_time">{{ start_time }}</div>\n    {{/has_started}}\n  </span>\n</a>\n\n{{#show_actions}}\n  {{#can_create_assignment}}\n    {{^has_started}}\n      <a class="edit_assignment">\n        <div class="sprite bg-icon-gear"></div>\n      </a>\n    {{/has_started}}\n  {{/can_create_assignment}}\n  {{#can_destroy_assignment}}\n    <a class="delete_assignment">\n      <div class="sprite bg-icon-trash"></div>\n    </a>\n  {{/can_destroy_assignment}}\n{{/show_actions}}\n'),Mustache.compilePartial("courses/course_assignment_tile",'<a {{#has_started}}href="{{ url }}"{{/has_started}} class="attached_course attach_preview {{^has_started}}disabled{{/has_started}}">\n  <span class="link_images course"></span>\n  <span class="link_content">\n    <div class="link_title">\n    \t{{ title }}\n    </div>\n    <div class="description">{{ description }}</div>\n    {{^has_started}}\n      <div class="start_time">{{ start_time }}</div>\n    {{/has_started}}\n  </span>\n</a>\n\n{{#show_actions}}\n  {{#can_create_assignment}}\n    {{^has_started}}\n      <a class="edit_assignment">\n        <div class="sprite bg-icon-gear"></div>\n      </a>\n    {{/has_started}}\n  {{/can_create_assignment}}\n  {{#can_destroy_assignment}}\n    <a class="delete_assignment">\n      <div class="sprite bg-icon-trash"></div>\n    </a>\n  {{/can_destroy_assignment}}\n{{/show_actions}}\n'),this.SMT["courses/course_assignment_tile"]=function(e){return e||(e={}),SMTCache["courses/course_assignment_tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_contents"]=Mustache.compile('<div class="course_module_contents">\n  {{#is_edit_mode}}\n    {{{ toolbar }}}\n    <textarea id="course_contents_editor_{{ id }}">{{{ contents }}}</textarea>\n  {{/is_edit_mode}}\n  {{^is_edit_mode}}\n    <div class=\'overlay\'></div>\n    <div class=\'contents\'>\n      <div class="clearfix">\n        <a href="#" class=\'close\'>\n          {{ close_txt }}\n        </a>\n      </div>\n      {{{ contents }}}\n    </div>\n  {{/is_edit_mode}}\n  {{#show_contents_button}}\n    <div class="course_module_contents_button">\n    </div>\n  {{/show_contents_button}}\n</div>\n'),Mustache.compilePartial("courses/course_module_contents",'<div class="course_module_contents">\n  {{#is_edit_mode}}\n    {{{ toolbar }}}\n    <textarea id="course_contents_editor_{{ id }}">{{{ contents }}}</textarea>\n  {{/is_edit_mode}}\n  {{^is_edit_mode}}\n    <div class=\'overlay\'></div>\n    <div class=\'contents\'>\n      <div class="clearfix">\n        <a href="#" class=\'close\'>\n          {{ close_txt }}\n        </a>\n      </div>\n      {{{ contents }}}\n    </div>\n  {{/is_edit_mode}}\n  {{#show_contents_button}}\n    <div class="course_module_contents_button">\n    </div>\n  {{/show_contents_button}}\n</div>\n'),this.SMT["courses/course_module_contents"]=function(e){return e||(e={}),SMTCache["courses/course_module_contents"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_media"]=Mustache.compile('<div class="course_module_media">\n  {{#attachment}}\n    {{#is_image}}\n      <div class="image_trash_wrapper">\n        {{#is_edit_mode}}\n          <a class="remove_media">\n            <div class="sprite bg-icon-trash"></div>\n          </a>\n        {{/is_edit_mode}}\n        <img src="{{ attachment }}" class="image" />\n      </div>\n    {{/is_image}}\n    {{^is_image}}\n      {{#is_video}}\n        <div class="video_container hidden">\n          <video id="video_{{ id }}" class="video-js" controls="" poster="{{ media_thumb_url }}" preload="auto" controlslist="nodownload">\n            <source src="{{ attachment }}" type="{{ media_format }}">\n          </video>\n        </div>\n      {{/is_video}}\n      {{#is_audio}}\n        <div class="media_placeholder">\n          <div class="audio_container">\n          </div>\n        </div>\n      {{/is_audio}}\n      {{#is_embed_media}}\n        {{{ attachment }}}\n      {{/is_embed_media}}\n      {{#is_document}}\n        <div class="course_document_container {{#is_edit_mode}}course_document_container_edit{{/is_edit_mode}}">\n\t\t  \t<iframe src="{{media_viewer_url}}?file={{ media_url }}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n        </div>\n      {{/is_document}}\n      {{#is_edit_mode}}\n        <a class="remove_media">\n          <div class="sprite bg-icon-trash"></div>\n        </a>\n      {{/is_edit_mode}}\n    {{/is_image}}\n  {{/attachment}}\n  {{^attachment}}\n    <div class="media_placeholder {{#is_edit_mode}}import_media{{/is_edit_mode}}">\n      {{#is_edit_mode}}\n        <h3 class="media_placeholder_text">\n          {{{ media_placeholder_text }}}\n        </h3>\n      {{/is_edit_mode}}\n    </div>\n  {{/attachment}}\n</div>\n'),Mustache.compilePartial("courses/course_module_media",'<div class="course_module_media">\n  {{#attachment}}\n    {{#is_image}}\n      <div class="image_trash_wrapper">\n        {{#is_edit_mode}}\n          <a class="remove_media">\n            <div class="sprite bg-icon-trash"></div>\n          </a>\n        {{/is_edit_mode}}\n        <img src="{{ attachment }}" class="image" />\n      </div>\n    {{/is_image}}\n    {{^is_image}}\n      {{#is_video}}\n        <div class="video_container hidden">\n          <video id="video_{{ id }}" class="video-js" controls="" poster="{{ media_thumb_url }}" preload="auto" controlslist="nodownload">\n            <source src="{{ attachment }}" type="{{ media_format }}">\n          </video>\n        </div>\n      {{/is_video}}\n      {{#is_audio}}\n        <div class="media_placeholder">\n          <div class="audio_container">\n          </div>\n        </div>\n      {{/is_audio}}\n      {{#is_embed_media}}\n        {{{ attachment }}}\n      {{/is_embed_media}}\n      {{#is_document}}\n        <div class="course_document_container {{#is_edit_mode}}course_document_container_edit{{/is_edit_mode}}">\n\t\t  \t<iframe src="{{media_viewer_url}}?file={{ media_url }}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n        </div>\n      {{/is_document}}\n      {{#is_edit_mode}}\n        <a class="remove_media">\n          <div class="sprite bg-icon-trash"></div>\n        </a>\n      {{/is_edit_mode}}\n    {{/is_image}}\n  {{/attachment}}\n  {{^attachment}}\n    <div class="media_placeholder {{#is_edit_mode}}import_media{{/is_edit_mode}}">\n      {{#is_edit_mode}}\n        <h3 class="media_placeholder_text">\n          {{{ media_placeholder_text }}}\n        </h3>\n      {{/is_edit_mode}}\n    </div>\n  {{/attachment}}\n</div>\n'),this.SMT["courses/course_module_media"]=function(e){return e||(e={}),SMTCache["courses/course_module_media"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_media_above_text"]=Mustache.compile('<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_media}}\n  {{>courses/course_module_contents}}\n</div>\n'),Mustache.compilePartial("courses/course_module_media_above_text",'<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_media}}\n  {{>courses/course_module_contents}}\n</div>\n'),this.SMT["courses/course_module_media_above_text"]=function(e){return e||(e={}),SMTCache["courses/course_module_media_above_text"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_media_only"]=Mustache.compile('<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_media}}\n</div>\n'),Mustache.compilePartial("courses/course_module_media_only",'<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_media}}\n</div>\n'),this.SMT["courses/course_module_media_only"]=function(e){return e||(e={}),SMTCache["courses/course_module_media_only"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_resource"]=Mustache.compile('<div class="course_module_resource">\n  {{#attachment}}\n    <iframe src="{{{ attachment }}}" class="resource" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n    {{#is_edit_mode}}\n      <a class="remove_resource">\n        <div class="sprite bg-icon-trash"></div>\n      </a>\n    {{/is_edit_mode}}\n  {{/attachment}}\n  {{^attachment}}\n    <div class="resource_placeholder {{#is_edit_mode}}import_resource{{/is_edit_mode}}">\n      {{#is_edit_mode}}\n        <h3 class="resource_placeholder_text">\n          {{{ resource_placeholder_text }}}\n        </h3>\n      {{/is_edit_mode}}\n    </div>\n  {{/attachment}}\n</div>\n'),Mustache.compilePartial("courses/course_module_resource",'<div class="course_module_resource">\n  {{#attachment}}\n    <iframe src="{{{ attachment }}}" class="resource" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n    {{#is_edit_mode}}\n      <a class="remove_resource">\n        <div class="sprite bg-icon-trash"></div>\n      </a>\n    {{/is_edit_mode}}\n  {{/attachment}}\n  {{^attachment}}\n    <div class="resource_placeholder {{#is_edit_mode}}import_resource{{/is_edit_mode}}">\n      {{#is_edit_mode}}\n        <h3 class="resource_placeholder_text">\n          {{{ resource_placeholder_text }}}\n        </h3>\n      {{/is_edit_mode}}\n    </div>\n  {{/attachment}}\n</div>\n'),this.SMT["courses/course_module_resource"]=function(e){return e||(e={}),SMTCache["courses/course_module_resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_resource_above_text"]=Mustache.compile('<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_resource}}\n  {{>courses/course_module_contents}}\n</div>\n'),Mustache.compilePartial("courses/course_module_resource_above_text",'<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_resource}}\n  {{>courses/course_module_contents}}\n</div>\n'),this.SMT["courses/course_module_resource_above_text"]=function(e){return e||(e={}),SMTCache["courses/course_module_resource_above_text"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_resource_only"]=Mustache.compile('<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_resource}}\n</div>\n'),Mustache.compilePartial("courses/course_module_resource_only",'<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_resource}}\n</div>\n'),this.SMT["courses/course_module_resource_only"]=function(e){return e||(e={}),SMTCache["courses/course_module_resource_only"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_text_only"]=Mustache.compile('<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_contents}}\n</div>'),Mustache.compilePartial("courses/course_module_text_only",'<div class="course_module {{ template }}" data-id="{{ id }}">\n  {{>courses/course_module_title}}\n  {{>courses/course_module_contents}}\n</div>'),this.SMT["courses/course_module_text_only"]=function(e){return e||(e={}),SMTCache["courses/course_module_text_only"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/course_module_title"]=Mustache.compile('<div class="embed_footer">\n  <div class="control_row">\n    <div class="col_side"></div>\n    <div class="col_controls">\n      <h1 class="study_aid_title">{{ title }}</h1>\n    </div>\n    <div class="col_side"></div>\n  </div>\n</div>\n'),Mustache.compilePartial("courses/course_module_title",'<div class="embed_footer">\n  <div class="control_row">\n    <div class="col_side"></div>\n    <div class="col_controls">\n      <h1 class="study_aid_title">{{ title }}</h1>\n    </div>\n    <div class="col_side"></div>\n  </div>\n</div>\n'),this.SMT["courses/course_module_title"]=function(e){return e||(e={}),SMTCache["courses/course_module_title"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["courses/course_tile"]=Mustache.compile('<a href="{{ url }}" class="attached_course attach_preview {{#select_course}}select_course{{/select_course}}" data-id="{{id}}">\n  <span class="link_images course"></span>\n  <span class="link_content">\n    <div class="link_title">{{ title }}</div>\n    {{#version}}<div class="badge version_badge">{{version}}</div>{{/version}}\n    <div class="description">{{ description }}</div>\n  </span>\n</a>\n'),Mustache.compilePartial("courses/course_tile",'<a href="{{ url }}" class="attached_course attach_preview {{#select_course}}select_course{{/select_course}}" data-id="{{id}}">\n  <span class="link_images course"></span>\n  <span class="link_content">\n    <div class="link_title">{{ title }}</div>\n    {{#version}}<div class="badge version_badge">{{version}}</div>{{/version}}\n    <div class="description">{{ description }}</div>\n  </span>\n</a>\n'),this.SMT["courses/course_tile"]=function(e){return e||(e={}),SMTCache["courses/course_tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/instructions_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{{ body }}}</p>\n      </div>\n      <div class="modal-footer">\n        {{#show_proceed}}\n          <a href="#" class="btn btn-success btn-proceed" data-dismiss="modal">{{ proceed_text }}</a>\n        {{/show_proceed}}\n        <a href="#" class="btn btn-cancel btn-finish" data-dismiss="modal">{{ finish_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("courses/instructions_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{{ body }}}</p>\n      </div>\n      <div class="modal-footer">\n        {{#show_proceed}}\n          <a href="#" class="btn btn-success btn-proceed" data-dismiss="modal">{{ proceed_text }}</a>\n        {{/show_proceed}}\n        <a href="#" class="btn btn-cancel btn-finish" data-dismiss="modal">{{ finish_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["courses/instructions_modal"]=function(e){return e||(e={}),SMTCache["courses/instructions_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/meta_details"]=Mustache.compile('<div>\n  <div class="hidden">\n    <div id="course_module_id">{{ course_module_id }}</div>\n    <div id="course_id">{{ course_id }}</div>\n    <div id="current_user_is_author">{{ is_author }}</div>\n  </div>\n  <div class="titlebar">\n    <h1 class="study_aid_title" title={{ title }}">\n      {{ title }}\n    </h1>\n  </div>\n  <div class="content">\n    <div class="meta_row">\n      <div class="avatar_sidebar">\n        <div class="avatar">\n          <a href="{{ author_profile_url }}"><img alt="{{ author_name }}" title="{{ author_name }}" src="{{ author_avatar_url }}" width="45" height="45"></a>\n        </div>\n      </div>\n      <div class="meta_details">\n        {{{ updated_at_meta }}}\n      </div>\n    </div>\n    {{#description}}\n      <div id="study_aid_description">\n        <div class="review_heading">\n          <div class="title">\n            <h3>{{ description_label }}</h3>\n          </div>\n        </div>\n        <span class="description_text" itemprop="description">\n          {{ description }}\n        </span>\n      </div>\n    {{/description}}\n  <div>\n  <div class="study_aid_tags">\n    <div class="sprite bg-icon-price_tag"></div>\n    {{^tags}}\n      <span class="no_tags_placeholder">{{ no_tags_label }}</span>\n    {{/tags}}\n    <ul class="tag_list">\n      {{#tags}}\n        <li><a rel="nofollow" target="_top" href="/tags/{{.}}">{{.}}</a></li>\n      {{/tags}}\n    </ul>\n  </div>\n</div>\n'),Mustache.compilePartial("courses/meta_details",'<div>\n  <div class="hidden">\n    <div id="course_module_id">{{ course_module_id }}</div>\n    <div id="course_id">{{ course_id }}</div>\n    <div id="current_user_is_author">{{ is_author }}</div>\n  </div>\n  <div class="titlebar">\n    <h1 class="study_aid_title" title={{ title }}">\n      {{ title }}\n    </h1>\n  </div>\n  <div class="content">\n    <div class="meta_row">\n      <div class="avatar_sidebar">\n        <div class="avatar">\n          <a href="{{ author_profile_url }}"><img alt="{{ author_name }}" title="{{ author_name }}" src="{{ author_avatar_url }}" width="45" height="45"></a>\n        </div>\n      </div>\n      <div class="meta_details">\n        {{{ updated_at_meta }}}\n      </div>\n    </div>\n    {{#description}}\n      <div id="study_aid_description">\n        <div class="review_heading">\n          <div class="title">\n            <h3>{{ description_label }}</h3>\n          </div>\n        </div>\n        <span class="description_text" itemprop="description">\n          {{ description }}\n        </span>\n      </div>\n    {{/description}}\n  <div>\n  <div class="study_aid_tags">\n    <div class="sprite bg-icon-price_tag"></div>\n    {{^tags}}\n      <span class="no_tags_placeholder">{{ no_tags_label }}</span>\n    {{/tags}}\n    <ul class="tag_list">\n      {{#tags}}\n        <li><a rel="nofollow" target="_top" href="/tags/{{.}}">{{.}}</a></li>\n      {{/tags}}\n    </ul>\n  </div>\n</div>\n'),this.SMT["courses/meta_details"]=function(e){return e||(e={}),SMTCache["courses/meta_details"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/sidebar_course_module"]=Mustache.compile('<a class="course_module {{#show_tracking}}{{#disabled}}disabled{{/disabled}}{{/show_tracking}}"\n   data-id="{{ id }}"\n   {{#show_tracking}}{{#disabled}}title="{{ sequence_label }}"{{/disabled}}{{/show_tracking}}\n   href="{{display_link}}" >\n\n  {{#is_edit_mode}}\n    <div class="course_module_move">\n      <img src="/assets/move_handle.png" />\n    </div>\n  {{/is_edit_mode}}\n\n  {{^is_edit_mode}}\n  {{^is_first}}\n    <div class="course_module_track up {{#show_tracking}}{{#completed}}completed{{/completed}}{{/show_tracking}}"></div>\n  {{/is_first}}\n  {{/is_edit_mode}}\n\n  <div class="course_module_image">\n    <img src="/assets/courses/icon-courseoverview-{{image}}@50.png" />\n  </div>\n\n  <div class="course_module_title">\n    {{#title}} {{title}} {{/title}}\n    {{^title}} &nbsp; {{/title}}\n  </div>\n\n  {{^is_edit_mode}}\n  {{^is_last}}\n    <div class="course_module_track down {{#show_tracking}}{{#completed}}completed{{/completed}}{{/show_tracking}}"></div>\n  {{/is_last}}\n  {{/is_edit_mode}}\n\n</a>\n'),Mustache.compilePartial("courses/sidebar_course_module",'<a class="course_module {{#show_tracking}}{{#disabled}}disabled{{/disabled}}{{/show_tracking}}"\n   data-id="{{ id }}"\n   {{#show_tracking}}{{#disabled}}title="{{ sequence_label }}"{{/disabled}}{{/show_tracking}}\n   href="{{display_link}}" >\n\n  {{#is_edit_mode}}\n    <div class="course_module_move">\n      <img src="/assets/move_handle.png" />\n    </div>\n  {{/is_edit_mode}}\n\n  {{^is_edit_mode}}\n  {{^is_first}}\n    <div class="course_module_track up {{#show_tracking}}{{#completed}}completed{{/completed}}{{/show_tracking}}"></div>\n  {{/is_first}}\n  {{/is_edit_mode}}\n\n  <div class="course_module_image">\n    <img src="/assets/courses/icon-courseoverview-{{image}}@50.png" />\n  </div>\n\n  <div class="course_module_title">\n    {{#title}} {{title}} {{/title}}\n    {{^title}} &nbsp; {{/title}}\n  </div>\n\n  {{^is_edit_mode}}\n  {{^is_last}}\n    <div class="course_module_track down {{#show_tracking}}{{#completed}}completed{{/completed}}{{/show_tracking}}"></div>\n  {{/is_last}}\n  {{/is_edit_mode}}\n\n</a>\n'),this.SMT["courses/sidebar_course_module"]=function(e){return e||(e={}),SMTCache["courses/sidebar_course_module"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/sidebar_course_module_collection"]=Mustache.compile('<div class="course_title_container">\n\n  <div class="course_title">\n    <a href="{{ overview_url }}">{{ course_title }}</a>\n  </div>\n\n  <div class="course_actions {{^is_edit_mode}}text-center{{/is_edit_mode}}">\n    {{#is_edit_mode}}\n      <a href="#" class="btn btn-info {{^show_manage_modules}}disabled{{/show_manage_modules}}" id="manage_modules">\n        {{ manage_modules_label }}\n      </a>\n      <a href="#" class="btn btn-success" id="add_new">\n        <i class="icon-plus"></i>\n        {{ add_new_label }}\n      </a>\n    {{/is_edit_mode}}\n  </div>\n\n</div>\n\n<div class="course_modules"></div>\n'),Mustache.compilePartial("courses/sidebar_course_module_collection",'<div class="course_title_container">\n\n  <div class="course_title">\n    <a href="{{ overview_url }}">{{ course_title }}</a>\n  </div>\n\n  <div class="course_actions {{^is_edit_mode}}text-center{{/is_edit_mode}}">\n    {{#is_edit_mode}}\n      <a href="#" class="btn btn-info {{^show_manage_modules}}disabled{{/show_manage_modules}}" id="manage_modules">\n        {{ manage_modules_label }}\n      </a>\n      <a href="#" class="btn btn-success" id="add_new">\n        <i class="icon-plus"></i>\n        {{ add_new_label }}\n      </a>\n    {{/is_edit_mode}}\n  </div>\n\n</div>\n\n<div class="course_modules"></div>\n'),this.SMT["courses/sidebar_course_module_collection"]=function(e){return e||(e={}),SMTCache["courses/sidebar_course_module_collection"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["courses/sidebar_data_capture_form"]=Mustache.compile('<div class="course_module data_capture_form" data-id="{{ id }}">\n  <div class="course_module_move">\n    <img src="/assets/move_handle.png" />\n  </div>\n  <div class="course_module_title">\n    {{data_capture_form_txt}}\n  </div>\n</div>\n'),Mustache.compilePartial("courses/sidebar_data_capture_form",'<div class="course_module data_capture_form" data-id="{{ id }}">\n  <div class="course_module_move">\n    <img src="/assets/move_handle.png" />\n  </div>\n  <div class="course_module_title">\n    {{data_capture_form_txt}}\n  </div>\n</div>\n'),this.SMT["courses/sidebar_data_capture_form"]=function(e){return e||(e={}),SMTCache["courses/sidebar_data_capture_form"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["dashboard/activity_head"]=Mustache.compile('<div class="activity_head clearfix {{ classes }}">\n\n  <a href="#" id="activity_settings" title="{{ feed_settings }}">\n    <div class="sprite bg-icon-gear"></div>\n  </a>\n\n  <div class="activity_filter dropdown">\n    <a aria-expanded="true" aria-haspopup="true" class="filter_btn dropdown-toggle" data-toggle="dropdown" id="activity_filter">\n      <div class="filter_with_caret_icon_group"></div>\n    </a>\n\n    <ul aria-labelledby="activity_filter" class="dropdown-menu dropdown-menu-right activity_filter_options">\n      {{#filter_options}}\n        <li class="">\n          <a href="{{ route }}" data-filter="{{ data_filter }}">{{ name }}</a>\n        </li>\n      {{/filter_options}}\n    </ul>\n  </div>\n\n</div>\n'),Mustache.compilePartial("dashboard/activity_head",'<div class="activity_head clearfix {{ classes }}">\n\n  <a href="#" id="activity_settings" title="{{ feed_settings }}">\n    <div class="sprite bg-icon-gear"></div>\n  </a>\n\n  <div class="activity_filter dropdown">\n    <a aria-expanded="true" aria-haspopup="true" class="filter_btn dropdown-toggle" data-toggle="dropdown" id="activity_filter">\n      <div class="filter_with_caret_icon_group"></div>\n    </a>\n\n    <ul aria-labelledby="activity_filter" class="dropdown-menu dropdown-menu-right activity_filter_options">\n      {{#filter_options}}\n        <li class="">\n          <a href="{{ route }}" data-filter="{{ data_filter }}">{{ name }}</a>\n        </li>\n      {{/filter_options}}\n    </ul>\n  </div>\n\n</div>\n'),this.SMT["dashboard/activity_head"]=function(e){return e||(e={}),SMTCache["dashboard/activity_head"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["dashboard/mobile_resource_activity"]=Mustache.compile('<div id="recently_edited">\n  <h2>{{recently_edited_text}}</h2>\n</div>\n<div id="recently_viewed">\n  <h2>{{recently_viewed_text}}</h2>\n</div>\n<div id="suggested">\n  <h2>{{suggested_text}}</h2>\n</div>\n<div id="resource_actions"></div>\n<div id="actions_overlay"></div>\n'),Mustache.compilePartial("dashboard/mobile_resource_activity",'<div id="recently_edited">\n  <h2>{{recently_edited_text}}</h2>\n</div>\n<div id="recently_viewed">\n  <h2>{{recently_viewed_text}}</h2>\n</div>\n<div id="suggested">\n  <h2>{{suggested_text}}</h2>\n</div>\n<div id="resource_actions"></div>\n<div id="actions_overlay"></div>\n'),this.SMT["dashboard/mobile_resource_activity"]=function(e){return e||(e={}),SMTCache["dashboard/mobile_resource_activity"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["dashboard/status_update_list"]=Mustache.compile("<div class='status_list {{additional_classes}}'>\n  <ul class=\"status_updates\"></ul>\n</div>\n"),Mustache.compilePartial("dashboard/status_update_list","<div class='status_list {{additional_classes}}'>\n  <ul class=\"status_updates\"></ul>\n</div>\n"),this.SMT["dashboard/status_update_list"]=function(e){return e||(e={}),SMTCache["dashboard/status_update_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["dashboard/status_update_main"]=Mustache.compile('<div id="status_updates_container">\n\n\n</div>\n\n{{> shared/fetch_more }}\n'),Mustache.compilePartial("dashboard/status_update_main",'<div id="status_updates_container">\n\n\n</div>\n\n{{> shared/fetch_more }}\n'),this.SMT["dashboard/status_update_main"]=function(e){return e||(e={}),SMTCache["dashboard/status_update_main"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flash_card_decks/answer_side"]=Mustache.compile('<div class="flash_card_edit_side_title">\n  {{ answer_title }}\n</div>\n<div class="flash_card_edit_side flash_card_edit_side_answer">\n  <input type="hidden" class="layout_option" value="{{ answer_side_layout }}" id="flash_card_{{ id }}_answer_layout">\n\n  <div class="side_template side_template_{{ id }}">\n\n    <div class="audio_controls  {{ answer_audio_class }}">\n      <div class="flash_card_audio_remove" title="{{ audio_remove_text }}">\n        <div class="icon-trash"></div>\n      </div>\n      <div class="flash_card_audio_play" title={{ audio_play_text }}">\n        <div class="icon-play"></div>\n      </div>\n      <div class="flash_card_audio_attach" title={{ audio_attach_text }}">\n        <div class="icon-headphones"></div>\n      </div>\n      <div class="flash_card_audio_close" title={{ audio_close_text }}">\n        <div class="icon-remove"></div>\n      </div>\n      {{#has_answer_audio}}\n        <div class="audio_player_wrapper">\n          {{{ answer_audio_player_html }}}\n        </div>\n      {{/has_answer_audio}}\n    </div>\n    <div class="dummy_text_preview_container {{ answer_side_layout }}">\n      <div class="dummy_textarea no-print">{{ answer }}</div>\n    </div>\n    <div class="text_preview_container {{ answer_side_layout }}">\n      <textarea class="fc_answer_input flash_card_text_input" id="flash_card_{{ id }}_answer" maxlength: "1100">{{{ answer }}}</textarea>\n    </div>\n\n    <div class="img_preview_container {{ answer_side_layout }} {{ touch_class }}">\n      {{#has_answer_image}}\n        <img class="img_preview" src="{{ answer_image_url }}" />\n      {{/has_answer_image}}\n      {{^has_answer_image}}\n        <img class="img_preview" />\n      {{/has_answer_image}}\n    </div>\n  </div>\n</div>\n\n{{{ image_controls_html }}}\n'),Mustache.compilePartial("flash_card_decks/answer_side",'<div class="flash_card_edit_side_title">\n  {{ answer_title }}\n</div>\n<div class="flash_card_edit_side flash_card_edit_side_answer">\n  <input type="hidden" class="layout_option" value="{{ answer_side_layout }}" id="flash_card_{{ id }}_answer_layout">\n\n  <div class="side_template side_template_{{ id }}">\n\n    <div class="audio_controls  {{ answer_audio_class }}">\n      <div class="flash_card_audio_remove" title="{{ audio_remove_text }}">\n        <div class="icon-trash"></div>\n      </div>\n      <div class="flash_card_audio_play" title={{ audio_play_text }}">\n        <div class="icon-play"></div>\n      </div>\n      <div class="flash_card_audio_attach" title={{ audio_attach_text }}">\n        <div class="icon-headphones"></div>\n      </div>\n      <div class="flash_card_audio_close" title={{ audio_close_text }}">\n        <div class="icon-remove"></div>\n      </div>\n      {{#has_answer_audio}}\n        <div class="audio_player_wrapper">\n          {{{ answer_audio_player_html }}}\n        </div>\n      {{/has_answer_audio}}\n    </div>\n    <div class="dummy_text_preview_container {{ answer_side_layout }}">\n      <div class="dummy_textarea no-print">{{ answer }}</div>\n    </div>\n    <div class="text_preview_container {{ answer_side_layout }}">\n      <textarea class="fc_answer_input flash_card_text_input" id="flash_card_{{ id }}_answer" maxlength: "1100">{{{ answer }}}</textarea>\n    </div>\n\n    <div class="img_preview_container {{ answer_side_layout }} {{ touch_class }}">\n      {{#has_answer_image}}\n        <img class="img_preview" src="{{ answer_image_url }}" />\n      {{/has_answer_image}}\n      {{^has_answer_image}}\n        <img class="img_preview" />\n      {{/has_answer_image}}\n    </div>\n  </div>\n</div>\n\n{{{ image_controls_html }}}\n'),this.SMT["flash_card_decks/answer_side"]=function(e){return e||(e={}),SMTCache["flash_card_decks/answer_side"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flash_card_decks/flash_card"]=Mustache.compile('<div class="flash_card_set existing_flash_card" id="flash_card_set_{{ id }}" data-id="{{ id }}">\n  <div class="side_edit">\n\n    <div class="placeholder">\n      <div class="outer">\n        <div class="inner">\n          <a href="#" class="drag_icon">\n            <img src="/assets/move_handle.png">\n          </a>\n          <input type="hidden" class="position_flash_cards" value="{{ position }}" id="flash_card_{{ id }}_position"/>\n        </div>\n      </div>\n    </div>\n\n    <div class="side" data-side="question" id="side_question_{{ id }}">\n      {{> flash_card_decks/question_side}}\n    </div>\n\n    <div class="side" data-side="answer" id="side_answer_{{ id }}">\n      {{> flash_card_decks/answer_side}}\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("flash_card_decks/flash_card",'<div class="flash_card_set existing_flash_card" id="flash_card_set_{{ id }}" data-id="{{ id }}">\n  <div class="side_edit">\n\n    <div class="placeholder">\n      <div class="outer">\n        <div class="inner">\n          <a href="#" class="drag_icon">\n            <img src="/assets/move_handle.png">\n          </a>\n          <input type="hidden" class="position_flash_cards" value="{{ position }}" id="flash_card_{{ id }}_position"/>\n        </div>\n      </div>\n    </div>\n\n    <div class="side" data-side="question" id="side_question_{{ id }}">\n      {{> flash_card_decks/question_side}}\n    </div>\n\n    <div class="side" data-side="answer" id="side_answer_{{ id }}">\n      {{> flash_card_decks/answer_side}}\n    </div>\n  </div>\n</div>\n'),this.SMT["flash_card_decks/flash_card"]=function(e){return e||(e={}),SMTCache["flash_card_decks/flash_card"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flash_card_decks/question_side"]=Mustache.compile('<div class="flash_card_edit_side_title">\n  {{ question_title }}\n</div>\n<div class="flash_card_edit_side flash_card_edit_side_question">\n  <input type="hidden" class="layout_option" value="{{ question_side_layout }}" id="flash_card_{{ id }}_question_layout">\n\n  <div class="side_template side_template_{{ id }}">\n\n    <div class="audio_controls  {{ question_audio_class }}">\n      <div class="flash_card_audio_remove" title="{{ audio_remove_text }}">\n        <div class="icon-trash"></div>\n      </div>\n      <div class="flash_card_audio_play" title={{ audio_play_text }}">\n        <div class="icon-play"></div>\n      </div>\n      <div class="flash_card_audio_attach" title={{ audio_attach_text }}">\n        <div class="icon-headphones"></div>\n      </div>\n      <div class="flash_card_audio_close" title={{ audio_close_text }}">\n        <div class="icon-remove"></div>\n      </div>\n      {{#has_question_audio}}\n        <div class="audio_player_wrapper">\n          {{{ question_audio_player_html }}}\n        </div>\n      {{/has_question_audio}}\n    </div>\n    <div class="dummy_text_preview_container {{ question_side_layout }}">\n      <div class="dummy_textarea no-print">{{ question }}</div>\n    </div>\n    <div class="text_preview_container {{ question_side_layout }}">\n      <textarea class="fc_question_input flash_card_text_input" id="flash_card_{{ id }}_question" maxlength: "1100">{{{ question }}}</textarea>\n    </div>\n\n    <div class="img_preview_container {{ question_side_layout }} {{ touch_class }}">\n      {{#has_question_image}}\n        <img class="img_preview" src="{{ question_image_url }}" />\n      {{/has_question_image}}\n      {{^has_question_image}}\n        <img class="img_preview" />\n      {{/has_question_image}}\n    </div>\n  </div>\n</div>\n\n{{{ image_controls_html }}}\n'),Mustache.compilePartial("flash_card_decks/question_side",'<div class="flash_card_edit_side_title">\n  {{ question_title }}\n</div>\n<div class="flash_card_edit_side flash_card_edit_side_question">\n  <input type="hidden" class="layout_option" value="{{ question_side_layout }}" id="flash_card_{{ id }}_question_layout">\n\n  <div class="side_template side_template_{{ id }}">\n\n    <div class="audio_controls  {{ question_audio_class }}">\n      <div class="flash_card_audio_remove" title="{{ audio_remove_text }}">\n        <div class="icon-trash"></div>\n      </div>\n      <div class="flash_card_audio_play" title={{ audio_play_text }}">\n        <div class="icon-play"></div>\n      </div>\n      <div class="flash_card_audio_attach" title={{ audio_attach_text }}">\n        <div class="icon-headphones"></div>\n      </div>\n      <div class="flash_card_audio_close" title={{ audio_close_text }}">\n        <div class="icon-remove"></div>\n      </div>\n      {{#has_question_audio}}\n        <div class="audio_player_wrapper">\n          {{{ question_audio_player_html }}}\n        </div>\n      {{/has_question_audio}}\n    </div>\n    <div class="dummy_text_preview_container {{ question_side_layout }}">\n      <div class="dummy_textarea no-print">{{ question }}</div>\n    </div>\n    <div class="text_preview_container {{ question_side_layout }}">\n      <textarea class="fc_question_input flash_card_text_input" id="flash_card_{{ id }}_question" maxlength: "1100">{{{ question }}}</textarea>\n    </div>\n\n    <div class="img_preview_container {{ question_side_layout }} {{ touch_class }}">\n      {{#has_question_image}}\n        <img class="img_preview" src="{{ question_image_url }}" />\n      {{/has_question_image}}\n      {{^has_question_image}}\n        <img class="img_preview" />\n      {{/has_question_image}}\n    </div>\n  </div>\n</div>\n\n{{{ image_controls_html }}}\n'),this.SMT["flash_card_decks/question_side"]=function(e){return e||(e={}),SMTCache["flash_card_decks/question_side"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flowcharts/sidebar/section"]=Mustache.compile('<div class="flowchart-sidebar__list">\n  <div class="flowchart-sidebar__heading">\n  \t{{ title }}\n  </div>\n  \n  <ul>\n  \t{{{ list }}}\n  </ul>\n</div>\n'),Mustache.compilePartial("flowcharts/sidebar/section",'<div class="flowchart-sidebar__list">\n  <div class="flowchart-sidebar__heading">\n  \t{{ title }}\n  </div>\n  \n  <ul>\n  \t{{{ list }}}\n  </ul>\n</div>\n'),this.SMT["flowcharts/sidebar/section"]=function(e){return e||(e={}),SMTCache["flowcharts/sidebar/section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flowcharts/sidebar/shape"]=Mustache.compile('<li title="{{title}}">\n  <span data-shape="{{shape}}">\n\t<svg version="1.1" width="{{width}}" height="{{height}}" xmlns="http://www.w3.org/2000/svg">\n\t\t{{{html}}}\n\t</svg>\n  </span>\n</li>'),Mustache.compilePartial("flowcharts/sidebar/shape",'<li title="{{title}}">\n  <span data-shape="{{shape}}">\n\t<svg version="1.1" width="{{width}}" height="{{height}}" xmlns="http://www.w3.org/2000/svg">\n\t\t{{{html}}}\n\t</svg>\n  </span>\n</li>'),this.SMT["flowcharts/sidebar/shape"]=function(e){return e||(e={}),SMTCache["flowcharts/sidebar/shape"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["flowcharts/sidebar/text"]=Mustache.compile('<li title="{{title}}" class="{{title}}">\n  <span data-shape="text">\n\tAbc\n  </span>\n</li>'),Mustache.compilePartial("flowcharts/sidebar/text",'<li title="{{title}}" class="{{title}}">\n  <span data-shape="text">\n\tAbc\n  </span>\n</li>'),this.SMT["flowcharts/sidebar/text"]=function(e){return e||(e={}),SMTCache["flowcharts/sidebar/text"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["friends/friend_tile"]=Mustache.compile('<div class="friend-tile">\n  <a class="-fill" href="{{ profile_link }}">\n    <span class="friend-tile__avatar">{{{ avatar }}}</span>\n  </a>\n  {{#invite_id}}\n  <div class="friend__tile__actions pull-right">\n    {{#is_sent_invite}}\n    <button class="action_cancel btn btn-danger btn-xs" data-invite-id="{{ invite_id }}">{{ cancel_text }}</button>\n    {{/is_sent_invite}}\n    {{^is_sent_invite}}\n    <button class="action_accept btn btn-success btn-xs" data-invite-id="{{ invite_id }}">{{ accept_text }}</button>\n    <button class="action_decline btn btn-danger btn-xs" data-invite-id="{{ invite_id }}">{{ decline_text }}</button>\n    {{/is_sent_invite}}\n  </div>\n  {{/invite_id}}\n  <div class="friend-tile__name -truncate-text">\n    {{ full_name }}\n  </div>\n  <div class="friend-tile__usertype -truncate-text">\n    {{ user_type }}\n  </div>\n</div>\n'),Mustache.compilePartial("friends/friend_tile",'<div class="friend-tile">\n  <a class="-fill" href="{{ profile_link }}">\n    <span class="friend-tile__avatar">{{{ avatar }}}</span>\n  </a>\n  {{#invite_id}}\n  <div class="friend__tile__actions pull-right">\n    {{#is_sent_invite}}\n    <button class="action_cancel btn btn-danger btn-xs" data-invite-id="{{ invite_id }}">{{ cancel_text }}</button>\n    {{/is_sent_invite}}\n    {{^is_sent_invite}}\n    <button class="action_accept btn btn-success btn-xs" data-invite-id="{{ invite_id }}">{{ accept_text }}</button>\n    <button class="action_decline btn btn-danger btn-xs" data-invite-id="{{ invite_id }}">{{ decline_text }}</button>\n    {{/is_sent_invite}}\n  </div>\n  {{/invite_id}}\n  <div class="friend-tile__name -truncate-text">\n    {{ full_name }}\n  </div>\n  <div class="friend-tile__usertype -truncate-text">\n    {{ user_type }}\n  </div>\n</div>\n'),this.SMT["friends/friend_tile"]=function(e){return e||(e={}),SMTCache["friends/friend_tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/choose_group_topic"]=Mustache.compile('<div id="choose_group_topic" class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ description }}</p>\n        <select id="group_topic_id" name="group_topic_id">\n          {{#group_topics}}\n            <option value="{{id}}">{{name}}</option>\n          {{/group_topics}}\n        </select>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class=\'btn btn-success\' id=\'confirm_group_topic\' data-dismiss="modal">{{ confirm }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("groups/choose_group_topic",'<div id="choose_group_topic" class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ description }}</p>\n        <select id="group_topic_id" name="group_topic_id">\n          {{#group_topics}}\n            <option value="{{id}}">{{name}}</option>\n          {{/group_topics}}\n        </select>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class=\'btn btn-success\' id=\'confirm_group_topic\' data-dismiss="modal">{{ confirm }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["groups/choose_group_topic"]=function(e){return e||(e={}),SMTCache["groups/choose_group_topic"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/discover_group_collection_view"]=Mustache.compile('<div class="dashboard_title_container clearfix">\n  <h1>{{{title}}}</h1>\n</div>\n<div class="discover_group_list"></div>\n'),Mustache.compilePartial("groups/discover_group_collection_view",'<div class="dashboard_title_container clearfix">\n  <h1>{{{title}}}</h1>\n</div>\n<div class="discover_group_list"></div>\n'),this.SMT["groups/discover_group_collection_view"]=function(e){return e||(e={}),SMTCache["groups/discover_group_collection_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/icon_tile"]=Mustache.compile('<i class="icon-globe"></i>'),Mustache.compilePartial("groups/icon_tile",'<i class="icon-globe"></i>'),this.SMT["groups/icon_tile"]=function(e){return e||(e={}),SMTCache["groups/icon_tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/info"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ description }}</p>\n        <p>{{ additional_info }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("groups/info",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ description }}</p>\n        <p>{{ additional_info }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["groups/info"]=function(e){return e||(e={}),SMTCache["groups/info"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/institution_group_collection_view"]=Mustache.compile('<div class="institution_group_list">\n</div>\n\n'),Mustache.compilePartial("groups/institution_group_collection_view",'<div class="institution_group_list">\n</div>\n\n'),this.SMT["groups/institution_group_collection_view"]=function(e){return e||(e={}),SMTCache["groups/institution_group_collection_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["groups/invite_tile"]=Mustache.compile('<div class="invite_resource">\n  <div class="tile invite_tile">\n    <div class="tile_header">\n      <div class="tile_title">\n        <h3>\n          {{ invite_prompt }} {{name}}\n        </h3>\n      </div>\n    </div>\n    <div class="tile_footer">\n      <div class=\'controls\'>\n        <a href="{{accept_url}}" class=\'btn btn-success accept_group_invite\'>{{ accept }}</a>\n        <a href="{{reject_url}}" class=\'btn btn-danger reject_group_invite\'>{{ reject }}</a>\n      </div>\n    </div>\n    <div class="clear">\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("groups/invite_tile",'<div class="invite_resource">\n  <div class="tile invite_tile">\n    <div class="tile_header">\n      <div class="tile_title">\n        <h3>\n          {{ invite_prompt }} {{name}}\n        </h3>\n      </div>\n    </div>\n    <div class="tile_footer">\n      <div class=\'controls\'>\n        <a href="{{accept_url}}" class=\'btn btn-success accept_group_invite\'>{{ accept }}</a>\n        <a href="{{reject_url}}" class=\'btn btn-danger reject_group_invite\'>{{ reject }}</a>\n      </div>\n    </div>\n    <div class="clear">\n    </div>\n  </div>\n</div>\n'),this.SMT["groups/invite_tile"]=function(e){return e||(e={}),SMTCache["groups/invite_tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["groups/tile"]=Mustache.compile('<div class="resource">\n  <div class="tile discover_group_tile">\n    <a href="{{url}}">\n      <div class="tile_header">\n        <span class="additional_info">\n          <p class="{{ type }}">\n            {{{ member_info }}} | {{{ study_aid_info }}}\n            <span class="sprite"></span>\n          </p>\n        </span>\n\n        <div class="logo_and_title">\n          <div class="group_logo_holder" {{#logo}}style="background: none"{{/logo}}>\n            <img class="group_logo" src="{{logo}}" style="{{^logo}}display: none{{/logo}}">\n          </div>\n\n          <div class="tile_title">\n            <h3>\n              {{name}}\n            </h3>\n          </div>\n        </div>\n      </div>\n    </a>\n    <div class="tile_footer">\n      <div>{{description}}</div>\n      <div class="actions_inline">\n        {{^is_member}}\n          <div class="request_to_join_button_set">\n            {{^requested_to_join}}\n              <span class="btn btn-xs btn-info request_to_join_btn" data-id="{{id}}">{{join_prompt_text}}</span>\n            {{/requested_to_join}}\n            <div class="requested_to_join btn actionbutton disabled btn-xs btn-default" {{^requested_to_join}}style="display:none"{{/requested_to_join}}>\n              <i class="icon-ok"></i>\n              {{request_sent_text}}\n            </div>\n          </div>\n        {{/is_member}}\n\n  \t\t  <a class="edit hidden"><div class="sprite bg-icon-gear"></div></a>\n\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("groups/tile",'<div class="resource">\n  <div class="tile discover_group_tile">\n    <a href="{{url}}">\n      <div class="tile_header">\n        <span class="additional_info">\n          <p class="{{ type }}">\n            {{{ member_info }}} | {{{ study_aid_info }}}\n            <span class="sprite"></span>\n          </p>\n        </span>\n\n        <div class="logo_and_title">\n          <div class="group_logo_holder" {{#logo}}style="background: none"{{/logo}}>\n            <img class="group_logo" src="{{logo}}" style="{{^logo}}display: none{{/logo}}">\n          </div>\n\n          <div class="tile_title">\n            <h3>\n              {{name}}\n            </h3>\n          </div>\n        </div>\n      </div>\n    </a>\n    <div class="tile_footer">\n      <div>{{description}}</div>\n      <div class="actions_inline">\n        {{^is_member}}\n          <div class="request_to_join_button_set">\n            {{^requested_to_join}}\n              <span class="btn btn-xs btn-info request_to_join_btn" data-id="{{id}}">{{join_prompt_text}}</span>\n            {{/requested_to_join}}\n            <div class="requested_to_join btn actionbutton disabled btn-xs btn-default" {{^requested_to_join}}style="display:none"{{/requested_to_join}}>\n              <i class="icon-ok"></i>\n              {{request_sent_text}}\n            </div>\n          </div>\n        {{/is_member}}\n\n  \t\t  <a class="edit hidden"><div class="sprite bg-icon-gear"></div></a>\n\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["groups/tile"]=function(e){return e||(e={}),SMTCache["groups/tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/active_filter"]=Mustache.compile('<div class="library_active_filter_title library_filter_title">{{ title }}</div>\n<ul class="library_active_filter_mains"></ul>'),Mustache.compilePartial("library/active_filter",'<div class="library_active_filter_title library_filter_title">{{ title }}</div>\n<ul class="library_active_filter_mains"></ul>'),this.SMT["library/active_filter"]=function(e){return e||(e={}),SMTCache["library/active_filter"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/active_filter_main"]=Mustache.compile('<span class="library_active_filter_main tag">\n    <span class="library_active_filter_name">{{ name }}</span>\n    <a href="#" class="library_active_filter_remove"></a>\n</span>\n<ul class="library_active_filter_topics"></ul>'),Mustache.compilePartial("library/active_filter_main",'<span class="library_active_filter_main tag">\n    <span class="library_active_filter_name">{{ name }}</span>\n    <a href="#" class="library_active_filter_remove"></a>\n</span>\n<ul class="library_active_filter_topics"></ul>'),this.SMT["library/active_filter_main"]=function(e){return e||(e={}),SMTCache["library/active_filter_main"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/active_filter_topic"]=Mustache.compile('<span class="library_active_filter_topic tag">\n    <span class="library_active_filter_name">{{ name }}</span>\n    <a href="#" class="library_active_filter_remove"></a>\n</span>'),Mustache.compilePartial("library/active_filter_topic",'<span class="library_active_filter_topic tag">\n    <span class="library_active_filter_name">{{ name }}</span>\n    <a href="#" class="library_active_filter_remove"></a>\n</span>'),this.SMT["library/active_filter_topic"]=function(e){return e||(e={}),SMTCache["library/active_filter_topic"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/active_filters"]=Mustache.compile('<div class="library_active_filters library_filter_box">\n\t{{#active}}<a class="library_filter_clear_all" href="#">{{ active_filters_clear }}</a>{{/active}}\n\t<div class="library_filter_title">\n\t\t{{#active}}{{ active_filters_title }}{{/active}}\n\t</div>\n    <ul class="library_active_filter_list"></ul>\n</div>'),Mustache.compilePartial("library/active_filters",'<div class="library_active_filters library_filter_box">\n\t{{#active}}<a class="library_filter_clear_all" href="#">{{ active_filters_clear }}</a>{{/active}}\n\t<div class="library_filter_title">\n\t\t{{#active}}{{ active_filters_title }}{{/active}}\n\t</div>\n    <ul class="library_active_filter_list"></ul>\n</div>'),this.SMT["library/active_filters"]=function(e){return e||(e={}),SMTCache["library/active_filters"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/filter"]=Mustache.compile('<div class="library_filter library_filter_box">\n  <div class="library_filter_title">{{ title }}</div>\n  <ul class="library_filter_subjects"></ul>\n  <ul class="library_filter_custom" class="hidden"></ul>\n  <div class="actions clearfix">\n    <a class="show_more btn-all" href="#" style="display: none;">\n      {{show_more_label}}\n    </a>\n    <a class="show_less btn-all" href="#" style="display: none;">\n      {{show_less_label}}\n    </a>\n  </div>\n</div>\n'),Mustache.compilePartial("library/filter",'<div class="library_filter library_filter_box">\n  <div class="library_filter_title">{{ title }}</div>\n  <ul class="library_filter_subjects"></ul>\n  <ul class="library_filter_custom" class="hidden"></ul>\n  <div class="actions clearfix">\n    <a class="show_more btn-all" href="#" style="display: none;">\n      {{show_more_label}}\n    </a>\n    <a class="show_less btn-all" href="#" style="display: none;">\n      {{show_less_label}}\n    </a>\n  </div>\n</div>\n'),this.SMT["library/filter"]=function(e){return e||(e={}),SMTCache["library/filter"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/filter_main"]=Mustache.compile('<div class="library_main_container">\n    <input id="check_{{key}}_{{id}}" type="checkbox" name="{{key}}_id" value="{{id}}" {{#active}}checked="checked"{{/active}}>\n    <label for="check_{{key}}_{{id}}">\n      {{name}}\n      <span class="resource_count" data-{{key}}-id={{id}}>\n      </span>\n    </label>\n    <span class="expand_topics"><i class="fa icon-plus"></i></span>\n    <span class="collapse_topics"><i class="fa icon-minus"></i></span>\n</div>\n{{#has_topics}}\n<span class="library_topics_container {{#active}}active{{/active}} {{#topic_active}}topic_active{{/topic_active}}">\n    <ul class="library_topics"></ul>\n</span>\n{{/has_topics}}\n'),Mustache.compilePartial("library/filter_main",'<div class="library_main_container">\n    <input id="check_{{key}}_{{id}}" type="checkbox" name="{{key}}_id" value="{{id}}" {{#active}}checked="checked"{{/active}}>\n    <label for="check_{{key}}_{{id}}">\n      {{name}}\n      <span class="resource_count" data-{{key}}-id={{id}}>\n      </span>\n    </label>\n    <span class="expand_topics"><i class="fa icon-plus"></i></span>\n    <span class="collapse_topics"><i class="fa icon-minus"></i></span>\n</div>\n{{#has_topics}}\n<span class="library_topics_container {{#active}}active{{/active}} {{#topic_active}}topic_active{{/topic_active}}">\n    <ul class="library_topics"></ul>\n</span>\n{{/has_topics}}\n'),this.SMT["library/filter_main"]=function(e){return e||(e={}),SMTCache["library/filter_main"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/filter_topic"]=Mustache.compile('<input id="check_{{parent_key}}_topic_{{id}}" type="checkbox" name="{{parent_key}}_topic_id" value="{{id}}" {{#active}}checked="checked"{{/active}}>\n<label for="check_{{parent_key}}_topic_{{id}}">\n  {{name}}\n  <span class="resource_count" data-topic-id={{id}}></span>\n</label>'),Mustache.compilePartial("library/filter_topic",'<input id="check_{{parent_key}}_topic_{{id}}" type="checkbox" name="{{parent_key}}_topic_id" value="{{id}}" {{#active}}checked="checked"{{/active}}>\n<label for="check_{{parent_key}}_topic_{{id}}">\n  {{name}}\n  <span class="resource_count" data-topic-id={{id}}></span>\n</label>'),this.SMT["library/filter_topic"]=function(e){return e||(e={}),SMTCache["library/filter_topic"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/filters"]=Mustache.compile('<div id="library_filters" class="sidebar_filter"></div>\n'),Mustache.compilePartial("library/filters",'<div id="library_filters" class="sidebar_filter"></div>\n'),this.SMT["library/filters"]=function(e){return e||(e={}),SMTCache["library/filters"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/tile"]=Mustache.compile('<div class="resource">\n\t<div class="tile subject_tile">\n\t\t<a href="{{url}}">\n\t\t\t<div class="tile_header">\n\t      <div class="tile_title">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<div class="tile_footer">\n\t\t\t<i class="subject_icon {{icon}}"></i>\n\t\t\t<span class="additional_info">\n\t\t\t\t<p>{{{ additional_info }}}</p>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n'),Mustache.compilePartial("library/tile",'<div class="resource">\n\t<div class="tile subject_tile">\n\t\t<a href="{{url}}">\n\t\t\t<div class="tile_header">\n\t      <div class="tile_title">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<div class="tile_footer">\n\t\t\t<i class="subject_icon {{icon}}"></i>\n\t\t\t<span class="additional_info">\n\t\t\t\t<p>{{{ additional_info }}}</p>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n'),this.SMT["library/tile"]=function(e){return e||(e={}),SMTCache["library/tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/empty_list"]=Mustache.compile('<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  <div class="results_container">\n    <div class="empty_list">\n      <div class="empty_list_heading">\n        {{empty_list_heading}}\n      </div>\n      <div class="empty_list_body">\n        {{empty_list_prompt}}\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("library/empty_list",'<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  <div class="results_container">\n    <div class="empty_list">\n      <div class="empty_list_heading">\n        {{empty_list_heading}}\n      </div>\n      <div class="empty_list_body">\n        {{empty_list_prompt}}\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["library/empty_list"]=function(e){return e||(e={}),SMTCache["library/empty_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/library_page"]=Mustache.compile('<div id="library_content"></div>\n<div id="resource_actions"></div>\n<div id="actions_overlay"></div>\n'),Mustache.compilePartial("library/library_page",'<div id="library_content"></div>\n<div id="resource_actions"></div>\n<div id="actions_overlay"></div>\n'),this.SMT["library/library_page"]=function(e){return e||(e={}),SMTCache["library/library_page"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/library_resource"]=Mustache.compile('<div class="resource-tile resource col-lg-{{grid_cols}} {{#is_deleted}}deleted_resource{{/is_deleted}}" data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      <span class="resource-tile__author -truncate-text">\n        {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n      </span>\n      <span class="resource_search_ratings">\n        <span id="rating_{{id}}"></span>\n      </span>\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),Mustache.compilePartial("library/library_resource",'<div class="resource-tile resource col-lg-{{grid_cols}} {{#is_deleted}}deleted_resource{{/is_deleted}}" data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      <span class="resource-tile__author -truncate-text">\n        {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n      </span>\n      <span class="resource_search_ratings">\n        <span id="rating_{{id}}"></span>\n      </span>\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),this.SMT["library/library_resource"]=function(e){return e||(e={}),SMTCache["library/library_resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/loading"]=Mustache.compile('<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  <div class="results_container">\n    <div class="loading_list">\n      <div class="loading_list_heading">\n        {{{loading_list_heading}}}\n      </div>\n      <div class="loading_list_body">\n        {{loading_list_prompt}}\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("library/loading",'<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  <div class="results_container">\n    <div class="loading_list">\n      <div class="loading_list_heading">\n        {{{loading_list_heading}}}\n      </div>\n      <div class="loading_list_body">\n        {{loading_list_prompt}}\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["library/loading"]=function(e){return e||(e={}),SMTCache["library/loading"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["library/results_list"]=Mustache.compile('<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  {{^user}}\n    <div class="unauth_blurb">\n      <p class="unauth_blurb_info">{{unauth_blurb_info}}</p>\n      <p class="unauth_blurb_prompt">{{unauth_blurb_prompt}}</p>\n    </div>\n  {{/user}}\n  <div class="results_container">\n  </div>\n</div>\n{{> search/fetch_more }}\n'),Mustache.compilePartial("library/results_list",'<div class="suggested_resource_results_list">\n  <div class="library results_heading">\n    <h1>\n      {{heading}}\n    </h1>\n  </div>\n  {{^user}}\n    <div class="unauth_blurb">\n      <p class="unauth_blurb_info">{{unauth_blurb_info}}</p>\n      <p class="unauth_blurb_prompt">{{unauth_blurb_prompt}}</p>\n    </div>\n  {{/user}}\n  <div class="results_container">\n  </div>\n</div>\n{{> search/fetch_more }}\n'),this.SMT["library/results_list"]=function(e){return e||(e={}),SMTCache["library/results_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["link_preview/preview"]=Mustache.compile('<{{#editing}}div{{/editing}}{{^editing}}a href="{{url}}" target="_blank"{{/editing}} class="link_preview attach_preview">\n\n  {{#editing}}\n\t\t<span class="link_images">\n\t\t\t  {{#show_image_nav}}\n\t\t\t\t<span class="image_nav">\n\t\t\t\t\t<a class="previous"><i class="icon-chevron-left"></i></a><a class="next"><i class="icon-chevron-right"></i></a>\n\t\t\t\t</span>\n\t\t\t  {{/show_image_nav}}\n\t\t\t  {{#images}}\n\t\t\t\t<img src="{{url}}" class="image">\n\t\t\t  {{/images}}\n\t\t</span>\n  {{/editing}}\n\n  {{^editing}}\n  \t{{#image}}\n  \t\t<span class="link_images">\n  \t\t\t<img src="{{image}}" class="image">\n\t\t</span>\n  \t{{/image}}\n  {{/editing}}\n\n\t<span class="link_content">\n\n\t\t{{#editing}}\n\t\t\t<span class="preview_remove">\xd7</span>\n\t\t{{/editing}}\n\n\t\t<div class="link_title">\n\t\t\t{{#editing}}<a href="{{url}}" target="_blank">{{title}}</a>{{/editing}}\n\t\t\t{{^editing}}{{title}}{{/editing}}\n\t\t</div>\n\n\t\t<div class="description">\n\t\t\t{{ description }}\n\t\t</div>\n\n\t\t<div class="provider">\n\t\t\t{{ site_name }}\n\t\t</div>\n\n\t</span>\n</{{#editing}}div{{/editing}}{{^editing}}a{{/editing}}>\n'),Mustache.compilePartial("link_preview/preview",'<{{#editing}}div{{/editing}}{{^editing}}a href="{{url}}" target="_blank"{{/editing}} class="link_preview attach_preview">\n\n  {{#editing}}\n\t\t<span class="link_images">\n\t\t\t  {{#show_image_nav}}\n\t\t\t\t<span class="image_nav">\n\t\t\t\t\t<a class="previous"><i class="icon-chevron-left"></i></a><a class="next"><i class="icon-chevron-right"></i></a>\n\t\t\t\t</span>\n\t\t\t  {{/show_image_nav}}\n\t\t\t  {{#images}}\n\t\t\t\t<img src="{{url}}" class="image">\n\t\t\t  {{/images}}\n\t\t</span>\n  {{/editing}}\n\n  {{^editing}}\n  \t{{#image}}\n  \t\t<span class="link_images">\n  \t\t\t<img src="{{image}}" class="image">\n\t\t</span>\n  \t{{/image}}\n  {{/editing}}\n\n\t<span class="link_content">\n\n\t\t{{#editing}}\n\t\t\t<span class="preview_remove">\xd7</span>\n\t\t{{/editing}}\n\n\t\t<div class="link_title">\n\t\t\t{{#editing}}<a href="{{url}}" target="_blank">{{title}}</a>{{/editing}}\n\t\t\t{{^editing}}{{title}}{{/editing}}\n\t\t</div>\n\n\t\t<div class="description">\n\t\t\t{{ description }}\n\t\t</div>\n\n\t\t<div class="provider">\n\t\t\t{{ site_name }}\n\t\t</div>\n\n\t</span>\n</{{#editing}}div{{/editing}}{{^editing}}a{{/editing}}>\n'),this.SMT["link_preview/preview"]=function(e){return e||(e={}),SMTCache["link_preview/preview"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["media_library/item"]=Mustache.compile('<div {{#error_message}}title="{{ error_message }}"{{/error_message}}>\n  <span class="ml_thumbnail">\n    {{^polling}}{{#thumb_url}}<img src="{{thumb_url}}">{{/thumb_url}}{{^thumb_url}}<img src="/assets/icon_media_{{type}}.png" class="ml_placeholder">{{/thumb_url}}{{/polling}}\n    {{#error_message}}<span class=\'ml_error_message\'>{{ error_message }}</span>{{/error_message}}\n  </span>\n  <span class="ml_overlay ml_ol_{{type}}{{#polling}} ml_ol_polling{{/polling}}{{#pending_delete}} ml_ol_deleting{{/pending_delete}}">\n  <span class="ml_filesize">{{{ filesize_text }}}</span>\n  <span class="ml_type"><i class=\'{{ type_icon_class }}\'></i></span>\n  </span>\n  {{#edit}}\n    {{^polling}}\n      <span class="ml_play_icon ml_play_{{type}}">\n        {{#playable}}\n          <i class="icon-play"></i>\n        {{/playable}}\n        {{^playable}}\n          <i class="icon-search"></i>\n        {{/playable}}\n      </span>\n    {{/polling}}\n  {{/edit}}\n  <span class="ml_name">{{ name }}</span>\n  <span class="ml_name_edit" style=\'display: none\'><input name=\'media[name]\' type=\'text\' value=\'{{name}}\' maxlength="255"></span>\n</div>\n'),Mustache.compilePartial("media_library/item",'<div {{#error_message}}title="{{ error_message }}"{{/error_message}}>\n  <span class="ml_thumbnail">\n    {{^polling}}{{#thumb_url}}<img src="{{thumb_url}}">{{/thumb_url}}{{^thumb_url}}<img src="/assets/icon_media_{{type}}.png" class="ml_placeholder">{{/thumb_url}}{{/polling}}\n    {{#error_message}}<span class=\'ml_error_message\'>{{ error_message }}</span>{{/error_message}}\n  </span>\n  <span class="ml_overlay ml_ol_{{type}}{{#polling}} ml_ol_polling{{/polling}}{{#pending_delete}} ml_ol_deleting{{/pending_delete}}">\n  <span class="ml_filesize">{{{ filesize_text }}}</span>\n  <span class="ml_type"><i class=\'{{ type_icon_class }}\'></i></span>\n  </span>\n  {{#edit}}\n    {{^polling}}\n      <span class="ml_play_icon ml_play_{{type}}">\n        {{#playable}}\n          <i class="icon-play"></i>\n        {{/playable}}\n        {{^playable}}\n          <i class="icon-search"></i>\n        {{/playable}}\n      </span>\n    {{/polling}}\n  {{/edit}}\n  <span class="ml_name">{{ name }}</span>\n  <span class="ml_name_edit" style=\'display: none\'><input name=\'media[name]\' type=\'text\' value=\'{{name}}\' maxlength="255"></span>\n</div>\n'),this.SMT["media_library/item"]=function(e){return e||(e={}),SMTCache["media_library/item"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["mind_maps/tooltip"]=Mustache.compile('<table class="mm_tt_table">\n  <tbody>\n    {{#has_mind_maps}}\n      <tr>\n        <td class="sa_type_icon">{{ mind_map_icon }}</td>\n        <td class="name">{{ mind_maps_text }}</td>\n        <td class="number">{{ mind_maps_no }}</td>\n      </tr>\n    {{/has_mind_maps}}\n    {{#has_flash_card_decks}}\n      <tr>\n        <td class="sa_type_icon">{{ flash_card_deck_icon }}</td>\n        <td class="name">{{ flash_card_decks_text }}</td>\n        <td class="number">{{ flash_card_decks_no }}</td>\n      </tr>\n    {{/has_flash_card_decks}}\n    {{#has_notes}}\n      <tr>\n        <td class="sa_type_icon">{{ note_icon }}</td>\n        <td class="name">{{ notes_text }}</td>\n        <td class="number">{{ notes_no }}</td>\n      </tr>\n    {{/has_notes}}\n    {{#has_quizzes}}\n      <tr>\n        <td class="sa_type_icon">{{ quiz_icon }}</td>\n        <td class="name">{{ quizzes_text }}</td>\n        <td class="number">{{ quizzes_no }}</td>\n      </tr>\n    {{/has_quizzes}}\n    {{#has_slide_sets}}\n      <tr>\n        <td class="sa_type_icon">{{ slide_set_icon }}</td>\n        <td class="name">{{ slide_sets_text }}</td>\n        <td class="number">{{ slide_sets_no }}</td>\n      </tr>\n    {{/has_slide_sets}}\n    {{#has_flowcharts}}\n      <tr>\n        <td class="sa_type_icon">{{ flowchart_icon }}</td>\n        <td class="name">{{ flowcharts_text }}</td>\n        <td class="number">{{ flowcharts_no }}</td>\n      </tr>\n    {{/has_flowcharts}}\n  </tbody>\n</table>\n'),Mustache.compilePartial("mind_maps/tooltip",'<table class="mm_tt_table">\n  <tbody>\n    {{#has_mind_maps}}\n      <tr>\n        <td class="sa_type_icon">{{ mind_map_icon }}</td>\n        <td class="name">{{ mind_maps_text }}</td>\n        <td class="number">{{ mind_maps_no }}</td>\n      </tr>\n    {{/has_mind_maps}}\n    {{#has_flash_card_decks}}\n      <tr>\n        <td class="sa_type_icon">{{ flash_card_deck_icon }}</td>\n        <td class="name">{{ flash_card_decks_text }}</td>\n        <td class="number">{{ flash_card_decks_no }}</td>\n      </tr>\n    {{/has_flash_card_decks}}\n    {{#has_notes}}\n      <tr>\n        <td class="sa_type_icon">{{ note_icon }}</td>\n        <td class="name">{{ notes_text }}</td>\n        <td class="number">{{ notes_no }}</td>\n      </tr>\n    {{/has_notes}}\n    {{#has_quizzes}}\n      <tr>\n        <td class="sa_type_icon">{{ quiz_icon }}</td>\n        <td class="name">{{ quizzes_text }}</td>\n        <td class="number">{{ quizzes_no }}</td>\n      </tr>\n    {{/has_quizzes}}\n    {{#has_slide_sets}}\n      <tr>\n        <td class="sa_type_icon">{{ slide_set_icon }}</td>\n        <td class="name">{{ slide_sets_text }}</td>\n        <td class="number">{{ slide_sets_no }}</td>\n      </tr>\n    {{/has_slide_sets}}\n    {{#has_flowcharts}}\n      <tr>\n        <td class="sa_type_icon">{{ flowchart_icon }}</td>\n        <td class="name">{{ flowcharts_text }}</td>\n        <td class="number">{{ flowcharts_no }}</td>\n      </tr>\n    {{/has_flowcharts}}\n  </tbody>\n</table>\n'),this.SMT["mind_maps/tooltip"]=function(e){return e||(e={}),SMTCache["mind_maps/tooltip"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["modals/confirm_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("modals/confirm_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["modals/confirm_modal"]=function(e){return e||(e={}),SMTCache["modals/confirm_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["modals/generic_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{{ text }}}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ ok_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("modals/generic_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{{ text }}}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ ok_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["modals/generic_modal"]=function(e){return e||(e={}),SMTCache["modals/generic_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["ms_teams/private_share_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text_1 }}</p>\n        <p>{{ text_2 }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok btn-success" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("ms_teams/private_share_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text_1 }}</p>\n        <p>{{ text_2 }}</p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok btn-success" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["ms_teams/private_share_modal"]=function(e){return e||(e={}),SMTCache["ms_teams/private_share_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["ms_teams/share_failed_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ impacted_users_intro }}</p>\n        <ul class="teams_share_failed_users">\n          {{#impacted_users}}\n            <li>{{.}}</li>\n          {{/impacted_users}}\n        </ul>\n        <p class="text-center">\n          <a href="{{ invite_friends_url }}" target="_blank">{{ invite_cta }}</a>\n        </p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok btn-success" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("ms_teams/share_failed_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ impacted_users_intro }}</p>\n        <ul class="teams_share_failed_users">\n          {{#impacted_users}}\n            <li>{{.}}</li>\n          {{/impacted_users}}\n        </ul>\n        <p class="text-center">\n          <a href="{{ invite_friends_url }}" target="_blank">{{ invite_cta }}</a>\n        </p>\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-ok btn-success" data-dismiss="modal">{{ ok_text }}</a>\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["ms_teams/share_failed_modal"]=function(e){return e||(e={}),SMTCache["ms_teams/share_failed_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["ms_teams/subscription_prompt_modal"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text }}</p>\n      </div>\n      <div class="modal-footer">\n        <ul class="teams_subscribe_options">\n          <li>\n            <a href="#" class="btn btn-success" data-dismiss="modal">{{ subscribe_cta }}</a>\n          </li>\n          <li>\n            <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("ms_teams/subscription_prompt_modal",'<div class="modal" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>{{ header }}</h2>\n      </div>\n      <div class="modal-body">\n        <p>{{ text }}</p>\n      </div>\n      <div class="modal-footer">\n        <ul class="teams_subscribe_options">\n          <li>\n            <a href="#" class="btn btn-success" data-dismiss="modal">{{ subscribe_cta }}</a>\n          </li>\n          <li>\n            <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ cancel_text }}</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["ms_teams/subscription_prompt_modal"]=function(e){return e||(e={}),SMTCache["ms_teams/subscription_prompt_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["navigation/create_buttons"]=Mustache.compile('<div id="create_study_aid_button" class="btn btn-create nav-popup">\n  {{ create_button_text }}\n</div>\n<div class="create_study_aid_button_starter_checklist_helper"></div>\n\n<div id="create_popover_content" style="display: none">\n  <ul>\n\n    <li>\n      <a href="{{ create_slide_set_context_path }}" class="create create_slide_set" rel="nofollow">\n        <div class="text">{{ create_slide_set_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_flash_card_deck_context_path }}" class="create create_flash_card_deck" rel="nofollow">\n        <div class="text">{{ create_flash_card_deck_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_mind_map_context_path }}" class="create create_mind_map" rel="nofollow">\n        <div class="text">{{ create_mind_map_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_note_context_path }}" class="create create_note" rel="nofollow">\n        <div class="text">{{ create_note_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_quiz_context_path }}" class="create create_quiz" rel="nofollow">\n        <div class="text">{{ create_quiz_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_flowchart_context_path }}" class="create create_flowchart" rel="nofollow">\n        <div class="text">{{ create_flowchart_text }}</div>\n      </a>\n    </li>\n  </ul>\n\n  <ul class=\'course_section\'>\n    <li>\n      <a href="#" class="create_course">\n        <div class="text">{{ create_course_text }}</div>\n      </a>\n    </li>\n  </ul>\n</div>\n'),Mustache.compilePartial("navigation/create_buttons",'<div id="create_study_aid_button" class="btn btn-create nav-popup">\n  {{ create_button_text }}\n</div>\n<div class="create_study_aid_button_starter_checklist_helper"></div>\n\n<div id="create_popover_content" style="display: none">\n  <ul>\n\n    <li>\n      <a href="{{ create_slide_set_context_path }}" class="create create_slide_set" rel="nofollow">\n        <div class="text">{{ create_slide_set_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_flash_card_deck_context_path }}" class="create create_flash_card_deck" rel="nofollow">\n        <div class="text">{{ create_flash_card_deck_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_mind_map_context_path }}" class="create create_mind_map" rel="nofollow">\n        <div class="text">{{ create_mind_map_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_note_context_path }}" class="create create_note" rel="nofollow">\n        <div class="text">{{ create_note_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_quiz_context_path }}" class="create create_quiz" rel="nofollow">\n        <div class="text">{{ create_quiz_text }}</div>\n      </a>\n    </li>\n\n    <li>\n      <a href="{{ create_flowchart_context_path }}" class="create create_flowchart" rel="nofollow">\n        <div class="text">{{ create_flowchart_text }}</div>\n      </a>\n    </li>\n  </ul>\n\n  <ul class=\'course_section\'>\n    <li>\n      <a href="#" class="create_course">\n        <div class="text">{{ create_course_text }}</div>\n      </a>\n    </li>\n  </ul>\n</div>\n'),this.SMT["navigation/create_buttons"]=function(e){return e||(e={}),SMTCache["navigation/create_buttons"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/board_note_page_view"]=Mustache.compile('<div class=\'note_page_preview\'>\n  <a class=\'note_page_link\' href=\'/p/{{note_id}}/note_page/{{id}}\'>\n    <div class="note_page_view_inner">\n      {{#is_mobile_device}}\n        <div class="handle">\n          <div class="sprite bg-icon-arrow_move move_note_page"></div>\n        </div>\n      {{/is_mobile_device}}\n      {{#edit_mode}}\n        <div class="sprite bg-icon-trash_ellipse remove_note_page"></div>\n      {{/edit_mode}}\n    </div>\n    <div class="note_page_preview_overlay">\n      <div class="inner_fade"></div>\n    </div>\n  </a>\n</div>\n'),Mustache.compilePartial("notes/board_note_page_view",'<div class=\'note_page_preview\'>\n  <a class=\'note_page_link\' href=\'/p/{{note_id}}/note_page/{{id}}\'>\n    <div class="note_page_view_inner">\n      {{#is_mobile_device}}\n        <div class="handle">\n          <div class="sprite bg-icon-arrow_move move_note_page"></div>\n        </div>\n      {{/is_mobile_device}}\n      {{#edit_mode}}\n        <div class="sprite bg-icon-trash_ellipse remove_note_page"></div>\n      {{/edit_mode}}\n    </div>\n    <div class="note_page_preview_overlay">\n      <div class="inner_fade"></div>\n    </div>\n  </a>\n</div>\n'),this.SMT["notes/board_note_page_view"]=function(e){return e||(e={}),SMTCache["notes/board_note_page_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_document_view"]=Mustache.compile('<div class="clipping documentclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <iframe src="/pdf/viewer.html?file={{url}}" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>\n</div>'),Mustache.compilePartial("notes/clipping_document_view",'<div class="clipping documentclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <iframe src="/pdf/viewer.html?file={{url}}" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>\n</div>'),this.SMT["notes/clipping_document_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_document_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_image_view"]=Mustache.compile('<div class="clipping imageclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <img src="{{image.url}}" />\n</div>'),Mustache.compilePartial("notes/clipping_image_view",'<div class="clipping imageclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <img src="{{image.url}}" />\n</div>'),this.SMT["notes/clipping_image_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_image_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_shared_edit"]=Mustache.compile('<div class="clipping_handle"></div>\n<div class="sprite bg-icon-trash trash_bin no-print"></div>\n'),Mustache.compilePartial("notes/clipping_shared_edit",'<div class="clipping_handle"></div>\n<div class="sprite bg-icon-trash trash_bin no-print"></div>\n'),this.SMT["notes/clipping_shared_edit"]=function(e){return e||(e={}),SMTCache["notes/clipping_shared_edit"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_study_aid_view"]=Mustache.compile('<div class="clipping studyaidclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <a class="attached_resource attach_preview">\n\n    <span class="link_images {{study_aid_type}}"></span>\n\n    <span class="link_content">\n\n      <div class="link_title">\n        {{study_aid_title}}\n      </div>\n\n      <div class="description">\n        {{ study_aid_description }}\n      </div>\n\n      <div class="author">\n        {{ type_create_by }} <span class="author_name">{{author_name}}</span>\n      </div>\n\n    </span>\n  </a>\n</div>\n\n\n'),Mustache.compilePartial("notes/clipping_study_aid_view",'<div class="clipping studyaidclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <a class="attached_resource attach_preview">\n\n    <span class="link_images {{study_aid_type}}"></span>\n\n    <span class="link_content">\n\n      <div class="link_title">\n        {{study_aid_title}}\n      </div>\n\n      <div class="description">\n        {{ study_aid_description }}\n      </div>\n\n      <div class="author">\n        {{ type_create_by }} <span class="author_name">{{author_name}}</span>\n      </div>\n\n    </span>\n  </a>\n</div>\n\n\n'),this.SMT["notes/clipping_study_aid_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_study_aid_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_text_view"]=Mustache.compile('<div class="clipping textclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n    <textarea id="clipping_{{id}}">{{{contents}}}</textarea>\n  {{/edit_mode}}\n  {{^edit_mode}}\n    <div class="clipping_display">{{{contents}}}</div>\n  {{/edit_mode}}\n</div>\n'),Mustache.compilePartial("notes/clipping_text_view",'<div class="clipping textclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n    <textarea id="clipping_{{id}}">{{{contents}}}</textarea>\n  {{/edit_mode}}\n  {{^edit_mode}}\n    <div class="clipping_display">{{{contents}}}</div>\n  {{/edit_mode}}\n</div>\n'),this.SMT["notes/clipping_text_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_text_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_title_view"]=Mustache.compile('<div class="clipping titleclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n    <input type="text" id="clipping_{{id}}" value="{{contents}}" />\n  {{/edit_mode}}\n  {{^edit_mode}}\n    <div class="clipping_display">{{contents}}</div>\n  {{/edit_mode}}\n</div>\n'),Mustache.compilePartial("notes/clipping_title_view",'<div class="clipping titleclipping">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n    <input type="text" id="clipping_{{id}}" value="{{contents}}" />\n  {{/edit_mode}}\n  {{^edit_mode}}\n    <div class="clipping_display">{{contents}}</div>\n  {{/edit_mode}}\n</div>\n'),this.SMT["notes/clipping_title_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_title_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_video_upload_view"]=Mustache.compile("<div class=\"clipping videouploadclipping media-loading\">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n\n  <video id='video-{{ uid }}' class='video-js' controls='' poster='{{ thumb_url }}' preload=\"auto\" controlslist=\"nodownload\">\n    <source src = '{{ url }}' type = '{{ format }}'/>\n  </video>\n\n</div>\n"),Mustache.compilePartial("notes/clipping_video_upload_view","<div class=\"clipping videouploadclipping media-loading\">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n\n  <video id='video-{{ uid }}' class='video-js' controls='' poster='{{ thumb_url }}' preload=\"auto\" controlslist=\"nodownload\">\n    <source src = '{{ url }}' type = '{{ format }}'/>\n  </video>\n\n</div>\n"),this.SMT["notes/clipping_video_upload_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_video_upload_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/clipping_video_view"]=Mustache.compile('<div class="clipping videoclipping media-loading">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <div class="video_expand">{{{embed_code}}}</div>\n  <div class="video_link only-print">{{url}}</div>\n</div>'),Mustache.compilePartial("notes/clipping_video_view",'<div class="clipping videoclipping media-loading">\n  {{#edit_mode}}\n    {{>notes/clipping_shared_edit}}\n  {{/edit_mode}}\n  <div class="video_expand">{{{embed_code}}}</div>\n  <div class="video_link only-print">{{url}}</div>\n</div>'),this.SMT["notes/clipping_video_view"]=function(e){return e||(e={}),SMTCache["notes/clipping_video_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_document_view"]=Mustache.compile("<p>{{name}}</p>"),Mustache.compilePartial("notes/note_page_document_view","<p>{{name}}</p>"),this.SMT["notes/note_page_document_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_document_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_image_view"]=Mustache.compile('<img src="{{image.url}}" class="note_page_image_clipping" />'),Mustache.compilePartial("notes/note_page_image_view",'<img src="{{image.url}}" class="note_page_image_clipping" />'),this.SMT["notes/note_page_image_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_image_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_study_aid_view"]=Mustache.compile('<div class="study_aid_image composite_image {{ study_aid_type }}"></div>\n<h2>\n    {{ study_aid_title }}\n</h2>\n<p>\n    {{ type_create_by }} {{author_name}}. \n    {{ study_aid_description }}\n</p>'),Mustache.compilePartial("notes/note_page_study_aid_view",'<div class="study_aid_image composite_image {{ study_aid_type }}"></div>\n<h2>\n    {{ study_aid_title }}\n</h2>\n<p>\n    {{ type_create_by }} {{author_name}}. \n    {{ study_aid_description }}\n</p>'),this.SMT["notes/note_page_study_aid_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_study_aid_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_text_view"]=Mustache.compile("<p>{{{contents}}}</p>"),Mustache.compilePartial("notes/note_page_text_view","<p>{{{contents}}}</p>"),this.SMT["notes/note_page_text_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_text_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_view"]=Mustache.compile("<h2>{{{contents}}}</h2>"),Mustache.compilePartial("notes/note_page_title_view","<h2>{{{contents}}}</h2>"),this.SMT["notes/note_page_title_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_video_view"]=Mustache.compile('<img src="{{video_image}}" class="note_page_video_clipping" />'),Mustache.compilePartial("notes/note_page_video_view",'<img src="{{video_image}}" class="note_page_video_clipping" />'),this.SMT["notes/note_page_video_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_video_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/progress"]=Mustache.compile('<div class="note_progress_text">\n  {{ page_number }}/{{ total_pages }}\n</div>\n'),Mustache.compilePartial("notes/progress",'<div class="note_progress_text">\n  {{ page_number }}/{{ total_pages }}\n</div>\n'),this.SMT["notes/progress"]=function(e){return e||(e={}),SMTCache["notes/progress"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/sidebar_note_page_view"]=Mustache.compile('<div class="note_page_view_inner"></div>\n<div class="note_page_position">\n  {{number}}\n</div>\n<div class="note_page_preview_overlay {{#active}}active{{/active}} {{#has_image}}has_image{{/has_image}}">\n\t<div class="inner_fade"></div>\n</div>\n<div class="note_page_preview_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),Mustache.compilePartial("notes/sidebar_note_page_view",'<div class="note_page_view_inner"></div>\n<div class="note_page_position">\n  {{number}}\n</div>\n<div class="note_page_preview_overlay {{#active}}active{{/active}} {{#has_image}}has_image{{/has_image}}">\n\t<div class="inner_fade"></div>\n</div>\n<div class="note_page_preview_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),this.SMT["notes/sidebar_note_page_view"]=function(e){return e||(e={}),SMTCache["notes/sidebar_note_page_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_text_image_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<p>{{{ text }}}</p>\n'),Mustache.compilePartial("notes/note_page_text_image_view",'<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<p>{{{ text }}}</p>\n'),this.SMT["notes/note_page_text_image_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_text_image_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_text_video_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<p>{{{ text }}}</p>\n'),Mustache.compilePartial("notes/note_page_text_video_view",'<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<p>{{{ text }}}</p>\n'),this.SMT["notes/note_page_text_video_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_text_video_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_image_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<h2>{{ title }}</h2>\n'),Mustache.compilePartial("notes/note_page_title_image_view",'<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<h2>{{ title }}</h2>\n'),this.SMT["notes/note_page_title_image_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_image_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_text_image_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n'),Mustache.compilePartial("notes/note_page_title_text_image_view",'<div class="composite_image" style="background-image:url({{ image.url }})"></div>\n<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n'),this.SMT["notes/note_page_title_text_image_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_text_image_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_text_video_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n'),Mustache.compilePartial("notes/note_page_title_text_video_view",'<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n'),this.SMT["notes/note_page_title_text_video_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_text_video_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_text_view"]=Mustache.compile("<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n"),Mustache.compilePartial("notes/note_page_title_text_view","<h2>{{ title }}</h2>\n<p>{{{ text }}}</p>\n"),this.SMT["notes/note_page_title_text_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_text_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["notes/note_page_title_video_view"]=Mustache.compile('<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<h2>{{ title }}</h2>'),Mustache.compilePartial("notes/note_page_title_video_view",'<div class="composite_image" style="background-image:url({{ video_image }})"></div>\n<h2>{{ title }}</h2>'),this.SMT["notes/note_page_title_video_view"]=function(e){return e||(e={}),SMTCache["notes/note_page_title_video_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/data_capture/form_builder_view"]=Mustache.compile('<div class=\'container\'>\n  <div id="form_container_view">\n    <div class="form_header_wrapper">\n      <div id="form_header_section">\n        <h3 class="form_title">{{ title }}</h3>\n        <span class="form_buttons">\n          <div id="delete_form" class="sprite bg-icon-trash_ellipse"></div>\n        </span>\n      </div>\n    </div>\n    <div class="form_content_wrapper">\n      <div id="data_capture_form">\n        <ul class="form_errors alert alert-danger hidden"></ul>\n        <div class="row">\n          <div class="col-12">\n            <textarea maxlength="255" class=\'form_description\' placeholder="{{ enter_description }}">{{ description }}</textarea>\n            <div class=\'text-right\'>\n              {{ max_description }}\n            </div>\n          </div>\n        </div>\n        <hr/>\n        <div class="row form_field_headers">\n          <div class="col-md-1 d-none d-md-block">\n          </div>\n          <div class="col-4">\n            <b>{{ prompt }}</b>\n            <a href="#" class="what_is_this" data-placement="top" data-title="{{ prompt_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n          </div>\n          <div class="col-4">\n            <b>{{ response_type }}</b>\n            <a href="#" class="what_is_this" data-placement="top" data-title="{{ response_type_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n          </div>\n          <div class="col-4 col-md-3">\n          </div>\n        </div>\n        <div id=\'form_fields\'>\n        </div>\n        <div class="row">\n          <div class="col-12">\n            <div id=\'add_form_field\'>\n              <i class=\'icon-plus\'></i>\n              {{ add_field }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id="form_footer">\n        <div id="form_buttons">\n          <input class="btn btn-success form_submit" type="button" value="{{ save }}">\n          <div class="cancel_form btn btn-cancel">{{ cancel }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("payments/data_capture/form_builder_view",'<div class=\'container\'>\n  <div id="form_container_view">\n    <div class="form_header_wrapper">\n      <div id="form_header_section">\n        <h3 class="form_title">{{ title }}</h3>\n        <span class="form_buttons">\n          <div id="delete_form" class="sprite bg-icon-trash_ellipse"></div>\n        </span>\n      </div>\n    </div>\n    <div class="form_content_wrapper">\n      <div id="data_capture_form">\n        <ul class="form_errors alert alert-danger hidden"></ul>\n        <div class="row">\n          <div class="col-12">\n            <textarea maxlength="255" class=\'form_description\' placeholder="{{ enter_description }}">{{ description }}</textarea>\n            <div class=\'text-right\'>\n              {{ max_description }}\n            </div>\n          </div>\n        </div>\n        <hr/>\n        <div class="row form_field_headers">\n          <div class="col-md-1 d-none d-md-block">\n          </div>\n          <div class="col-4">\n            <b>{{ prompt }}</b>\n            <a href="#" class="what_is_this" data-placement="top" data-title="{{ prompt_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n          </div>\n          <div class="col-4">\n            <b>{{ response_type }}</b>\n            <a href="#" class="what_is_this" data-placement="top" data-title="{{ response_type_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n          </div>\n          <div class="col-4 col-md-3">\n          </div>\n        </div>\n        <div id=\'form_fields\'>\n        </div>\n        <div class="row">\n          <div class="col-12">\n            <div id=\'add_form_field\'>\n              <i class=\'icon-plus\'></i>\n              {{ add_field }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id="form_footer">\n        <div id="form_buttons">\n          <input class="btn btn-success form_submit" type="button" value="{{ save }}">\n          <div class="cancel_form btn btn-cancel">{{ cancel }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["payments/data_capture/form_builder_view"]=function(e){return e||(e={}),SMTCache["payments/data_capture/form_builder_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/data_capture/form_field_option_view"]=Mustache.compile("<div class='form_field_option'>\n  <input maxlength='255' type='text'>\n  <div class=\"sprite bg-icon-trash remove_form_field_option\"></div>\n</div>\n"),Mustache.compilePartial("payments/data_capture/form_field_option_view","<div class='form_field_option'>\n  <input maxlength='255' type='text'>\n  <div class=\"sprite bg-icon-trash remove_form_field_option\"></div>\n</div>\n"),this.SMT["payments/data_capture/form_field_option_view"]=function(e){return e||(e={}),SMTCache["payments/data_capture/form_field_option_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/data_capture/form_field_view"]=Mustache.compile('<div class="row">\n  <div class="col-md-1 d-none d-md-block">\n    <span class=\'form_field_number\'> {{ position }}</span>\n  </div>\n  <div class="col-4">\n    <input type=\'text\' value=\'{{ label }}\' name=\'label\' maxlength=\'255\'>\n  </div>\n  <div class="col-4">\n    <select name=\'type\'>\n      <option value=\'Payments::DataCapture::TextField\'>{{ text }}</option>\n      <option value=\'Payments::DataCapture::TextAreaField\'>{{ textarea }}</option>\n      <option value=\'Payments::DataCapture::EmailField\'>{{ email }}</option>\n      <option value=\'Payments::DataCapture::DateField\'>{{ date }}</option>\n      <option value=\'Payments::DataCapture::SelectField\'>{{ dropdown }}</option>\n      <option value=\'Payments::DataCapture::CheckboxField\'>{{ checkboxes }}</option>\n    </select>\n    <div class="form_field_options">\n      <div class=\'add_form_field_option\'>\n        <i class=\'icon-plus\'></i>\n        <span class=\'add_option\'></span>\n      </div>\n    </div>\n  </div>\n  <div class="col-4 col-md-3">\n    <div class="field_attributes_and_destroy">\n      <div class="field_attributes">\n        <div class=\'primary-wrapper\'>\n          <label>\n            <input class type="radio" name="primary" {{#primary}}checked{{/primary}}> {{ primary_text }}\n          </label>\n          <a href="#" class="what_is_this" data-placement="top" data-title="{{ primary_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n        </div>\n        <div class=\'mandatory-wrapper\'>\n          <label>\n            <input class type="checkbox" name="mandatory" {{#mandatory}}checked{{/mandatory}}> {{ mandatory_text }}\n          </label>\n          <a href="#" class="what_is_this" data-placement="top" data-title="{{ mandatory_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n        </div>\n      </div>\n\n      <div class="sprite bg-icon-trash remove_form_field"></div>\n    </div>\n  </div>\n</div>\n'),
Mustache.compilePartial("payments/data_capture/form_field_view",'<div class="row">\n  <div class="col-md-1 d-none d-md-block">\n    <span class=\'form_field_number\'> {{ position }}</span>\n  </div>\n  <div class="col-4">\n    <input type=\'text\' value=\'{{ label }}\' name=\'label\' maxlength=\'255\'>\n  </div>\n  <div class="col-4">\n    <select name=\'type\'>\n      <option value=\'Payments::DataCapture::TextField\'>{{ text }}</option>\n      <option value=\'Payments::DataCapture::TextAreaField\'>{{ textarea }}</option>\n      <option value=\'Payments::DataCapture::EmailField\'>{{ email }}</option>\n      <option value=\'Payments::DataCapture::DateField\'>{{ date }}</option>\n      <option value=\'Payments::DataCapture::SelectField\'>{{ dropdown }}</option>\n      <option value=\'Payments::DataCapture::CheckboxField\'>{{ checkboxes }}</option>\n    </select>\n    <div class="form_field_options">\n      <div class=\'add_form_field_option\'>\n        <i class=\'icon-plus\'></i>\n        <span class=\'add_option\'></span>\n      </div>\n    </div>\n  </div>\n  <div class="col-4 col-md-3">\n    <div class="field_attributes_and_destroy">\n      <div class="field_attributes">\n        <div class=\'primary-wrapper\'>\n          <label>\n            <input class type="radio" name="primary" {{#primary}}checked{{/primary}}> {{ primary_text }}\n          </label>\n          <a href="#" class="what_is_this" data-placement="top" data-title="{{ primary_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n        </div>\n        <div class=\'mandatory-wrapper\'>\n          <label>\n            <input class type="checkbox" name="mandatory" {{#mandatory}}checked{{/mandatory}}> {{ mandatory_text }}\n          </label>\n          <a href="#" class="what_is_this" data-placement="top" data-title="{{ mandatory_tooltip }}" data-toggle="tooltip" data-original-title="" title=""><i class="icon-question-sign"></i></a>\n        </div>\n      </div>\n\n      <div class="sprite bg-icon-trash remove_form_field"></div>\n    </div>\n  </div>\n</div>\n'),this.SMT["payments/data_capture/form_field_view"]=function(e){return e||(e={}),SMTCache["payments/data_capture/form_field_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/report_hooks/button"]=Mustache.compile('<a href="{{ link }}" class="{{ classes }}" title="{{ title }}" target="_blank">\n  {{ title }}\n</a>\n'),Mustache.compilePartial("payments/report_hooks/button",'<a href="{{ link }}" class="{{ classes }}" title="{{ title }}" target="_blank">\n  {{ title }}\n</a>\n'),this.SMT["payments/report_hooks/button"]=function(e){return e||(e={}),SMTCache["payments/report_hooks/button"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/report_hooks/button_no_permission"]=Mustache.compile('<a href="#" class="{{ classes }} reports_no_permission" title="{{ title }}">\n  {{ title }}\n</a>\n'),Mustache.compilePartial("payments/report_hooks/button_no_permission",'<a href="#" class="{{ classes }} reports_no_permission" title="{{ title }}">\n  {{ title }}\n</a>\n'),this.SMT["payments/report_hooks/button_no_permission"]=function(e){return e||(e={}),SMTCache["payments/report_hooks/button_no_permission"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/report_hooks/icon"]=Mustache.compile('<a href="{{ link }}" target="_blank">\n  <div class="sprite bg-icon-chart_pie_separate"></div>\n</a>\n'),Mustache.compilePartial("payments/report_hooks/icon",'<a href="{{ link }}" target="_blank">\n  <div class="sprite bg-icon-chart_pie_separate"></div>\n</a>\n'),this.SMT["payments/report_hooks/icon"]=function(e){return e||(e={}),SMTCache["payments/report_hooks/icon"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/report_hooks/icon_no_permission"]=Mustache.compile('<a href="#" class="reports_no_permission" title="{{ title }}">\n  <div class="sprite bg-icon-chart_pie_separate"></div>\n</a>\n'),Mustache.compilePartial("payments/report_hooks/icon_no_permission",'<a href="#" class="reports_no_permission" title="{{ title }}">\n  <div class="sprite bg-icon-chart_pie_separate"></div>\n</a>\n'),this.SMT["payments/report_hooks/icon_no_permission"]=function(e){return e||(e={}),SMTCache["payments/report_hooks/icon_no_permission"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/share_lists/empty_table"]=Mustache.compile('<tr>\n  <td colspan="4" style="text-align: center">\n    {{ empty_message }}\n    <div class="action_buttons">\n      <a id="eps_create_share_list">\n         {{ new_list_text }}\n      </a>\n    </div>\n  </td>\n</tr>\n'),Mustache.compilePartial("payments/share_lists/empty_table",'<tr>\n  <td colspan="4" style="text-align: center">\n    {{ empty_message }}\n    <div class="action_buttons">\n      <a id="eps_create_share_list">\n         {{ new_list_text }}\n      </a>\n    </div>\n  </td>\n</tr>\n'),this.SMT["payments/share_lists/empty_table"]=function(e){return e||(e={}),SMTCache["payments/share_lists/empty_table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/share_lists/share_list"]=Mustache.compile('<td>\n  <a href="#" class="update_share_list">{{ name }}</a>\n</td>\n<td class="report_hook"></td>\n<td>\n  <a href="#" class="resource_smart_link" title="{{ create_resource_smart_link_text }}">\n    <div class="sprite bg-icon-document_view"></div>\n  </a>\n</td>\n<td>\n  <a href="#" class="course_smart_link" title="{{ create_course_smart_link_text }}">\n    <div class="sprite bg-icon-courses"></div>\n  </a>\n</td>\n'),Mustache.compilePartial("payments/share_lists/share_list",'<td>\n  <a href="#" class="update_share_list">{{ name }}</a>\n</td>\n<td class="report_hook"></td>\n<td>\n  <a href="#" class="resource_smart_link" title="{{ create_resource_smart_link_text }}">\n    <div class="sprite bg-icon-document_view"></div>\n  </a>\n</td>\n<td>\n  <a href="#" class="course_smart_link" title="{{ create_course_smart_link_text }}">\n    <div class="sprite bg-icon-courses"></div>\n  </a>\n</td>\n'),this.SMT["payments/share_lists/share_list"]=function(e){return e||(e={}),SMTCache["payments/share_lists/share_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/share_lists/table"]=Mustache.compile('<table class="share_list_table">\n  <thead>\n    <tr>\n      <th>\n        {{ lists_heading }}\n        <a href="#" class="what_is_this" data-placement="top" data-title="{{ lists_tooltip }}" data-toggle="tooltip" data-original-title="" title="">\n          <i class="icon-question-sign"></i>\n        </a>\n      </th>\n      <th colspan="3">{{ actions_heading }}</th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n'),Mustache.compilePartial("payments/share_lists/table",'<table class="share_list_table">\n  <thead>\n    <tr>\n      <th>\n        {{ lists_heading }}\n        <a href="#" class="what_is_this" data-placement="top" data-title="{{ lists_tooltip }}" data-toggle="tooltip" data-original-title="" title="">\n          <i class="icon-question-sign"></i>\n        </a>\n      </th>\n      <th colspan="3">{{ actions_heading }}</th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n'),this.SMT["payments/share_lists/table"]=function(e){return e||(e={}),SMTCache["payments/share_lists/table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/shared/pagination"]=Mustache.compile('<div class="search_results_controls" style:"display: none;">\n  <div class="page_info"></div>\n  <div class="pagination" style:"display: none;">\n    <button class="search_prev btn btn-info btn-sm">\n      {{ previous_text }}\n    </button>\n    <button class="search_next btn btn-info btn-sm">\n      {{ next_text }}\n    </button>\n  </div>\n</div>\n'),Mustache.compilePartial("payments/shared/pagination",'<div class="search_results_controls" style:"display: none;">\n  <div class="page_info"></div>\n  <div class="pagination" style:"display: none;">\n    <button class="search_prev btn btn-info btn-sm">\n      {{ previous_text }}\n    </button>\n    <button class="search_next btn btn-info btn-sm">\n      {{ next_text }}\n    </button>\n  </div>\n</div>\n'),this.SMT["payments/shared/pagination"]=function(e){return e||(e={}),SMTCache["payments/shared/pagination"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/empty_table"]=Mustache.compile('<tr>\n  <td colspan="2" style="text-align: center">\n    {{ empty_message }}\n    <div class="action_buttons" style="margin-top: 1em">\n      <a class="eps_create_smartlink" data-type="StudyAid">\n        {{ create_resource_text }}\n      </a>\n      <a class="eps_create_smartlink" data-type="Course">\n        {{ create_course_text }}\n      </a>\n    </div>\n  </td>\n</tr>\n'),Mustache.compilePartial("payments/smart_links/empty_table",'<tr>\n  <td colspan="2" style="text-align: center">\n    {{ empty_message }}\n    <div class="action_buttons" style="margin-top: 1em">\n      <a class="eps_create_smartlink" data-type="StudyAid">\n        {{ create_resource_text }}\n      </a>\n      <a class="eps_create_smartlink" data-type="Course">\n        {{ create_course_text }}\n      </a>\n    </div>\n  </td>\n</tr>\n'),this.SMT["payments/smart_links/empty_table"]=function(e){return e||(e={}),SMTCache["payments/smart_links/empty_table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/eps_summary_detail_table"]=Mustache.compile('<div class="table_wrapper">\n  <table class="share_list_table">\n    <colgroup>\n       <col span="1" style="width: 40%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n    </colgroup>\n    <thead>\n      <tr>\n        <th></th>\n        <th>{{ view_count_heading }}</th>\n        {{#attemptable}}\n          <th>{{ score_heading }}</th>\n        {{/attemptable}}\n        <th>{{ resend_heading }}</th>\n        <th>{{ report_heading }}</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>\n<div class="full_report_link"></div>\n<div class="resend_to_all">\n  <a href="#" class="btn btn-info">\n    {{ resend_to_all_text }}\n  </a>\n</div>\n<div class="summary_detail_close">\n  {{ close_text }}\n</div>\n'),Mustache.compilePartial("payments/smart_links/eps_summary_detail_table",'<div class="table_wrapper">\n  <table class="share_list_table">\n    <colgroup>\n       <col span="1" style="width: 40%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n       <col span="1" style="width: 15%;">\n    </colgroup>\n    <thead>\n      <tr>\n        <th></th>\n        <th>{{ view_count_heading }}</th>\n        {{#attemptable}}\n          <th>{{ score_heading }}</th>\n        {{/attemptable}}\n        <th>{{ resend_heading }}</th>\n        <th>{{ report_heading }}</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>\n<div class="full_report_link"></div>\n<div class="resend_to_all">\n  <a href="#" class="btn btn-info">\n    {{ resend_to_all_text }}\n  </a>\n</div>\n<div class="summary_detail_close">\n  {{ close_text }}\n</div>\n'),this.SMT["payments/smart_links/eps_summary_detail_table"]=function(e){return e||(e={}),SMTCache["payments/smart_links/eps_summary_detail_table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/eps_summary_detail_table_row"]=Mustache.compile('<tr>\n  <td class="eps_share_name">{{ name }}</td>\n  <td>{{ view_count }}</td>\n  {{#attemptable}}\n    <td>{{ score }}</td>\n  {{/attemptable}}\n  <td>\n    <a class="resend_eps"><div class="sprite bg-icon-mail" data-id="{{ id }}"></div></a>\n  </td>\n  <td class="report_hook"></td>\n</tr>\n'),Mustache.compilePartial("payments/smart_links/eps_summary_detail_table_row",'<tr>\n  <td class="eps_share_name">{{ name }}</td>\n  <td>{{ view_count }}</td>\n  {{#attemptable}}\n    <td>{{ score }}</td>\n  {{/attemptable}}\n  <td>\n    <a class="resend_eps"><div class="sprite bg-icon-mail" data-id="{{ id }}"></div></a>\n  </td>\n  <td class="report_hook"></td>\n</tr>\n'),this.SMT["payments/smart_links/eps_summary_detail_table_row"]=function(e){return e||(e={}),SMTCache["payments/smart_links/eps_summary_detail_table_row"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/summary_table"]=Mustache.compile('<table class="eps_summary_table share_list_table">\n  <colgroup>\n     <col span="1" style="width: 10%;">\n     <col span="1" style="width: 45%;">\n     <col span="1" style="width: 15%;">\n     <col span="1" style="width: 20%;">\n     <col span="1" style="width: 10%;">\n  </colgroup>\n  <thead>\n    <tr>\n      <th></th>\n      <th>{{ shared_with_heading }}</th>\n      <th>{{ date_shared_heading }}</th>\n      <th>{{ expires_at_heading }}</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n'),Mustache.compilePartial("payments/smart_links/summary_table",'<table class="eps_summary_table share_list_table">\n  <colgroup>\n     <col span="1" style="width: 10%;">\n     <col span="1" style="width: 45%;">\n     <col span="1" style="width: 15%;">\n     <col span="1" style="width: 20%;">\n     <col span="1" style="width: 10%;">\n  </colgroup>\n  <thead>\n    <tr>\n      <th></th>\n      <th>{{ shared_with_heading }}</th>\n      <th>{{ date_shared_heading }}</th>\n      <th>{{ expires_at_heading }}</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n'),this.SMT["payments/smart_links/summary_table"]=function(e){return e||(e={}),SMTCache["payments/smart_links/summary_table"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/summary_table_row"]=Mustache.compile('<tr data-group-id="{{ group_id }}"\n  data-shared-date="{{ shared_date }}"\n  data-share-list-id="{{ share_list_id }}"\n  data-key="{{ key }}">\n  <td class="text-center"><img src="{{ logo }}" class="eps_share_logo"></td>\n  <td class="eps_share_title">{{ name }}</td>\n  <td><span class="eps_share_date">{{ date }}</span></td>\n  <td>\n    <span class="eps_expires_at">\n      {{#expires_at}}\n        {{ expires_at }}\n      {{/expires_at}}\n      {{^expires_at}}\n        {{ expires_at_not_set_text }}\n      {{/expires_at}}\n    </span>\n    {{^expired}}\n      <a class="change_expires_at">\n        &nbsp;&nbsp;\n        <i class="icon-pencil" title="{{ edit_text }}"></i>\n      </a>\n    {{/expired}}\n    <input type="text" class="flatpickr" style="display: none" value="{{ expires_at }}">\n  </td>\n  <td>\n    <a class="eps_share_details">\n      {{ details_link }}\n    </a>\n  </td>\n</tr>\n<tr>\n  <td colspan="5" data-key="{{ key }}" class="eps_summary_details"></td>\n</tr>\n'),Mustache.compilePartial("payments/smart_links/summary_table_row",'<tr data-group-id="{{ group_id }}"\n  data-shared-date="{{ shared_date }}"\n  data-share-list-id="{{ share_list_id }}"\n  data-key="{{ key }}">\n  <td class="text-center"><img src="{{ logo }}" class="eps_share_logo"></td>\n  <td class="eps_share_title">{{ name }}</td>\n  <td><span class="eps_share_date">{{ date }}</span></td>\n  <td>\n    <span class="eps_expires_at">\n      {{#expires_at}}\n        {{ expires_at }}\n      {{/expires_at}}\n      {{^expires_at}}\n        {{ expires_at_not_set_text }}\n      {{/expires_at}}\n    </span>\n    {{^expired}}\n      <a class="change_expires_at">\n        &nbsp;&nbsp;\n        <i class="icon-pencil" title="{{ edit_text }}"></i>\n      </a>\n    {{/expired}}\n    <input type="text" class="flatpickr" style="display: none" value="{{ expires_at }}">\n  </td>\n  <td>\n    <a class="eps_share_details">\n      {{ details_link }}\n    </a>\n  </td>\n</tr>\n<tr>\n  <td colspan="5" data-key="{{ key }}" class="eps_summary_details"></td>\n</tr>\n'),this.SMT["payments/smart_links/summary_table_row"]=function(e){return e||(e={}),SMTCache["payments/smart_links/summary_table_row"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/table_row"]=Mustache.compile('<tr data-shared-id="{{ shared_id }}" data-shared-type="{{ shared_type }}" class="view_shares">\n  <td class="resource_name">\n    <img src="{{ image_path }}"/> {{ title }}\n  </td>\n  <td class="resource_link">\n    <a href="{{ resource_path }}" target="_blank" class="icon-external-link"></a>\n  </td>\n</tr>\n<tr class="smart_share_summary">\n  <td colspan="2" id="smart_share_summary_{{ shared_type }}_{{ shared_id }}"></td>\n</tr>\n'),Mustache.compilePartial("payments/smart_links/table_row",'<tr data-shared-id="{{ shared_id }}" data-shared-type="{{ shared_type }}" class="view_shares">\n  <td class="resource_name">\n    <img src="{{ image_path }}"/> {{ title }}\n  </td>\n  <td class="resource_link">\n    <a href="{{ resource_path }}" target="_blank" class="icon-external-link"></a>\n  </td>\n</tr>\n<tr class="smart_share_summary">\n  <td colspan="2" id="smart_share_summary_{{ shared_type }}_{{ shared_id }}"></td>\n</tr>\n'),this.SMT["payments/smart_links/table_row"]=function(e){return e||(e={}),SMTCache["payments/smart_links/table_row"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["payments/smart_links/viewers"]=Mustache.compile('<div>\n  <span class="progress_label">\n    {{ viewers_heading_text }}\n  </span>\n  <span class="progress_wrapper">\n    <span class="progress_inner" style="width:{{ percent }}%">\n    </span>\n  </span>\n  <span class="progress_totals">\n    {{ total_viewers }} / {{ total_links }}\n  </span>\n</div>\n'),Mustache.compilePartial("payments/smart_links/viewers",'<div>\n  <span class="progress_label">\n    {{ viewers_heading_text }}\n  </span>\n  <span class="progress_wrapper">\n    <span class="progress_inner" style="width:{{ percent }}%">\n    </span>\n  </span>\n  <span class="progress_totals">\n    {{ total_viewers }} / {{ total_links }}\n  </span>\n</div>\n'),this.SMT["payments/smart_links/viewers"]=function(e){return e||(e={}),SMTCache["payments/smart_links/viewers"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["polls/choice_form"]=Mustache.compile('<div class="poll_choice_wrapper" {{#id}}data-id="{{id}}"{{/id}}>\n\n\t<input class="poll_choice_position" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][position]" type="hidden" value="{{position}}">\n\t{{#id}}<input name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][id]" type="hidden" value="{{id}}">{{/id}}\n\n\t<div class="poll_choice_actions">\n\t  <a class="disabled" data-id="{{#id}}{{id}}{{/id}}{{^id}}-1{{/id}}" id="remove_choice" title="{{label_remove_choice}}">\n      <div class="sprite bg-icon-trash_ellipse"></div>\n\t  </a>\n\t  <a class="drag_icon" title="{{ label_choice_order }}">\n\t\t\t<img alt="move" src="/assets/icon_subjects_handle.png" />\n\t  </a>\n\t</div>\n\n\t{{#id}}<input class="poll_choice_destroy_{{id}}" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][_destroy]" type="hidden" value="0">{{/id}}\n\n\t<div class="poll_choice_input">\n\t  <input maxlength="80" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][choice_text]" size="80" type="text" value="{{choice_text}}">\n\t</div>\n\n</div>\n'),Mustache.compilePartial("polls/choice_form",'<div class="poll_choice_wrapper" {{#id}}data-id="{{id}}"{{/id}}>\n\n\t<input class="poll_choice_position" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][position]" type="hidden" value="{{position}}">\n\t{{#id}}<input name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][id]" type="hidden" value="{{id}}">{{/id}}\n\n\t<div class="poll_choice_actions">\n\t  <a class="disabled" data-id="{{#id}}{{id}}{{/id}}{{^id}}-1{{/id}}" id="remove_choice" title="{{label_remove_choice}}">\n      <div class="sprite bg-icon-trash_ellipse"></div>\n\t  </a>\n\t  <a class="drag_icon" title="{{ label_choice_order }}">\n\t\t\t<img alt="move" src="/assets/icon_subjects_handle.png" />\n\t  </a>\n\t</div>\n\n\t{{#id}}<input class="poll_choice_destroy_{{id}}" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][_destroy]" type="hidden" value="0">{{/id}}\n\n\t<div class="poll_choice_input">\n\t  <input maxlength="80" name="{{ model_name }}[poll_attributes][poll_choices_attributes][{{index}}][choice_text]" size="80" type="text" value="{{choice_text}}">\n\t</div>\n\n</div>\n'),this.SMT["polls/choice_form"]=function(e){return e||(e={}),SMTCache["polls/choice_form"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["polls/form"]=Mustache.compile('<div class="poll_editable_container" {{^has_poll}}style="display: none;"{{/has_poll}}>\n\n  <input id="with_poll" name="with_poll" type="hidden" value="{{#has_poll}}1{{/has_poll}}{{^has_poll}}0{{/has_poll}}">\n  {{#has_poll}}\n    <input class="destroy_poll" name="{{ model_name }}[poll_attributes][_destroy]" type="hidden" value="0">\n    <input name="{{ model_name }}[poll_attributes][id]" type="hidden" value="{{id}}">\n  {{/has_poll}}\n\n  <h3>\n    <img src="/assets/attach_icon_poll.png">\n    {{ label_poll_title }}\n    <a class="preview_remove">\n      &times;\n    </a>\n  </h3>\n\n  <div class="poll_field">\n    <label for="{{ model_name }}_poll_attributes_active">{{ label_active }}</label>\n    <input id="{{ model_name }}_poll_attributes_active" name="{{ model_name }}[poll_attributes][active]" type="hidden" value="0">\n    <input {{#active}}checked="checked"{{/active}} name="{{ model_name }}[poll_attributes][active]" type="checkbox" value="1">\n  </div>\n\n  <div class="poll_field">\n    <label for="date_picker_runtime">{{ label_end_time }}</label>\n    <input class="datepicker" name="date_picker_runtime" type="text" value="{{ runtime_date }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(1i)]" type="hidden" value="{{ runtime_year }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(2i)]" type="hidden" value="{{ runtime_month }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(3i)]" type="hidden" value="{{ runtime_day }}">\n  </div>\n\n  <div class="poll_field">\n    <label for="{{ model_name }}_poll_attributes_description">{{ label_question }}</label>\n    <input maxlength="150" id="{{ model_name }}_poll_attributes_description" name="{{ model_name }}[poll_attributes][description]" size="150" type="text" value="{{description}}">\n  </div>\n\n  <div class="poll_field poll_choices">\n\n  <div class="poll_choices_title_add">\n    <label for="{{ model_name }}_poll_attributes_poll_choices">{{ label_choices }}</label>\n    <a id="add_choice">\n      {{ label_add_choice }}\n    </a>\n  </div>\n\n  <div class="poll_choices_sortable">\n\n    {{#poll_choices}}\n    {{>polls/choice_form}}\n    {{/poll_choices}}\n\n  </div>\n\n  </div>\n\n  {{#has_poll}}\n  <div class="modal small_modal fade in remove_poll_modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ label_remove_poll_title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ label_remove_poll_prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning confirm_remove_poll">\n            {{ label_remove_poll_confirm }}\n          </div>\n          <div class="btn btn-cancel cancel_remove_poll">\n            {{ label_cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  {{/has_poll}}\n\n</div>\n'),Mustache.compilePartial("polls/form",'<div class="poll_editable_container" {{^has_poll}}style="display: none;"{{/has_poll}}>\n\n  <input id="with_poll" name="with_poll" type="hidden" value="{{#has_poll}}1{{/has_poll}}{{^has_poll}}0{{/has_poll}}">\n  {{#has_poll}}\n    <input class="destroy_poll" name="{{ model_name }}[poll_attributes][_destroy]" type="hidden" value="0">\n    <input name="{{ model_name }}[poll_attributes][id]" type="hidden" value="{{id}}">\n  {{/has_poll}}\n\n  <h3>\n    <img src="/assets/attach_icon_poll.png">\n    {{ label_poll_title }}\n    <a class="preview_remove">\n      &times;\n    </a>\n  </h3>\n\n  <div class="poll_field">\n    <label for="{{ model_name }}_poll_attributes_active">{{ label_active }}</label>\n    <input id="{{ model_name }}_poll_attributes_active" name="{{ model_name }}[poll_attributes][active]" type="hidden" value="0">\n    <input {{#active}}checked="checked"{{/active}} name="{{ model_name }}[poll_attributes][active]" type="checkbox" value="1">\n  </div>\n\n  <div class="poll_field">\n    <label for="date_picker_runtime">{{ label_end_time }}</label>\n    <input class="datepicker" name="date_picker_runtime" type="text" value="{{ runtime_date }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(1i)]" type="hidden" value="{{ runtime_year }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(2i)]" type="hidden" value="{{ runtime_month }}">\n    <input name="{{ model_name }}[poll_attributes][runtime(3i)]" type="hidden" value="{{ runtime_day }}">\n  </div>\n\n  <div class="poll_field">\n    <label for="{{ model_name }}_poll_attributes_description">{{ label_question }}</label>\n    <input maxlength="150" id="{{ model_name }}_poll_attributes_description" name="{{ model_name }}[poll_attributes][description]" size="150" type="text" value="{{description}}">\n  </div>\n\n  <div class="poll_field poll_choices">\n\n  <div class="poll_choices_title_add">\n    <label for="{{ model_name }}_poll_attributes_poll_choices">{{ label_choices }}</label>\n    <a id="add_choice">\n      {{ label_add_choice }}\n    </a>\n  </div>\n\n  <div class="poll_choices_sortable">\n\n    {{#poll_choices}}\n    {{>polls/choice_form}}\n    {{/poll_choices}}\n\n  </div>\n\n  </div>\n\n  {{#has_poll}}\n  <div class="modal small_modal fade in remove_poll_modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ label_remove_poll_title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ label_remove_poll_prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning confirm_remove_poll">\n            {{ label_remove_poll_confirm }}\n          </div>\n          <div class="btn btn-cancel cancel_remove_poll">\n            {{ label_cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  {{/has_poll}}\n\n</div>\n'),this.SMT["polls/form"]=function(e){return e||(e={}),SMTCache["polls/form"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["private_messages/attachment"]=Mustache.compile("<div class='pm_attachment'>\n  <div class='attachment_detail'>\n    <h3>\n      <img src='/assets/icon_{{ study_aid_type }}.png'>\n      {{#title}}\n        {{ title }}\n      {{/title}}\n      {{^title}}\n        {{ untitled_text }}\n       {{/title}}\n    </h3>\n    <span class='softmeta {{ author_badge_classes }}'>\n      {{ author_name }}\n    </span>\n    {{#cannot_be_read_by_all}}\n      <div class='share_information'>\" +\n        {{ cannot_be_viewed_by_all_text }}\n        <span class='btn btn-xs btn-info manage_shares' data-id='{{ sa_ids }}'>{{ manage_shares_text }}</span>\n      </div>\n    {{/cannot_be_read_by_all}}\n  </div>\n</div>\n"),Mustache.compilePartial("private_messages/attachment","<div class='pm_attachment'>\n  <div class='attachment_detail'>\n    <h3>\n      <img src='/assets/icon_{{ study_aid_type }}.png'>\n      {{#title}}\n        {{ title }}\n      {{/title}}\n      {{^title}}\n        {{ untitled_text }}\n       {{/title}}\n    </h3>\n    <span class='softmeta {{ author_badge_classes }}'>\n      {{ author_name }}\n    </span>\n    {{#cannot_be_read_by_all}}\n      <div class='share_information'>\" +\n        {{ cannot_be_viewed_by_all_text }}\n        <span class='btn btn-xs btn-info manage_shares' data-id='{{ sa_ids }}'>{{ manage_shares_text }}</span>\n      </div>\n    {{/cannot_be_read_by_all}}\n  </div>\n</div>\n"),this.SMT["private_messages/attachment"]=function(e){return e||(e={}),SMTCache["private_messages/attachment"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["private_messages/conversation"]=Mustache.compile("<div data-conversation-id='{{ id }}' class='conversation {{ selected_class }} {{ unread_class }}'>\n  <div class='message_icon'>\n    <div class='sprite bg-icon-{{ mail_icon_class }}'></div>\n  </div>\n  <div class='status-wrapper-text'>\n    <div class='participant-list-wrapper text'>\n      <div class='user_link participant-list text'>\n        {{{ participant_list }}}\n      </div>\n    </div>\n  </div>\n  <div class='status-wrapper text'>\n    {{#status_icon_class}}\n      <div class='sprite status_icon bg-icon-{{ status_icon_class }}'></div>\n    {{/status_icon_class}}\n    <div class='status-summary text'>\n      {{ body }}\n    </div>\n  </div>\n  <div class='status-time text'>\n    {{ last_updated_in_words }}\n  </div>\n</div>\n"),Mustache.compilePartial("private_messages/conversation","<div data-conversation-id='{{ id }}' class='conversation {{ selected_class }} {{ unread_class }}'>\n  <div class='message_icon'>\n    <div class='sprite bg-icon-{{ mail_icon_class }}'></div>\n  </div>\n  <div class='status-wrapper-text'>\n    <div class='participant-list-wrapper text'>\n      <div class='user_link participant-list text'>\n        {{{ participant_list }}}\n      </div>\n    </div>\n  </div>\n  <div class='status-wrapper text'>\n    {{#status_icon_class}}\n      <div class='sprite status_icon bg-icon-{{ status_icon_class }}'></div>\n    {{/status_icon_class}}\n    <div class='status-summary text'>\n      {{ body }}\n    </div>\n  </div>\n  <div class='status-time text'>\n    {{ last_updated_in_words }}\n  </div>\n</div>\n"),this.SMT["private_messages/conversation"]=function(e){return e||(e={}),SMTCache["private_messages/conversation"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["private_messages/message"]=Mustache.compile("<div class='messages_container' data-message-id='{{ id }}'>\n  <div class='avatar_container'>\n    {{{ avatar }}}\n  </div>\n  <div class='message_box'>\n    <div class='message_header'>\n      <div class='tex2jax_ignore'>\n        <span class='user_link'>{{{ author_name }}}</span>\n        <span class='sent'>{{ last_updated }}</span>\n      </div>\n    </div>\n    <div class='message_body'>\n      <div class='message_text'>{{ message_text }}</div>\n    </div>\n      <div class='attachments {{ attachment_css }}'>\n        <div class='dashboard_tiles'></div>\n    </div>\n  </div>\n</div>\n"),Mustache.compilePartial("private_messages/message","<div class='messages_container' data-message-id='{{ id }}'>\n  <div class='avatar_container'>\n    {{{ avatar }}}\n  </div>\n  <div class='message_box'>\n    <div class='message_header'>\n      <div class='tex2jax_ignore'>\n        <span class='user_link'>{{{ author_name }}}</span>\n        <span class='sent'>{{ last_updated }}</span>\n      </div>\n    </div>\n    <div class='message_body'>\n      <div class='message_text'>{{ message_text }}</div>\n    </div>\n      <div class='attachments {{ attachment_css }}'>\n        <div class='dashboard_tiles'></div>\n    </div>\n  </div>\n</div>\n"),this.SMT["private_messages/message"]=function(e){return e||(e={}),SMTCache["private_messages/message"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["private_messages/participant"]=Mustache.compile("<span data-participant-id='{{ id }}' class='participant {{ removable_css }}'>\n  <a href='{{ user_profile_path }}'>\n    <div class='recipient_avatar' title='{{ profile_name }}'>{{{ avatar }}}</div>\n    <div class='user_name user_link {{ profile_badge_classes }} data-badges='{{ profile_badge_classes }}'>\n       {{ profile_name }}\n    </div>\n  </a>\n\n  {{#has_removable_css}}\n    <div class='delete-button'>\n      <i class='icon-remove'></i>\n    </div>\n  {{/has_removable_css}}\n</span>\n"),Mustache.compilePartial("private_messages/participant","<span data-participant-id='{{ id }}' class='participant {{ removable_css }}'>\n  <a href='{{ user_profile_path }}'>\n    <div class='recipient_avatar' title='{{ profile_name }}'>{{{ avatar }}}</div>\n    <div class='user_name user_link {{ profile_badge_classes }} data-badges='{{ profile_badge_classes }}'>\n       {{ profile_name }}\n    </div>\n  </a>\n\n  {{#has_removable_css}}\n    <div class='delete-button'>\n      <i class='icon-remove'></i>\n    </div>\n  {{/has_removable_css}}\n</span>\n"),this.SMT["private_messages/participant"]=function(e){return e||(e={}),SMTCache["private_messages/participant"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["private_messages/send_message"]=Mustache.compile("<div class='row'>\n  <div class='col-lg-12'>\n    <div class='participants tex2jax_ignore'>\n      <span id='current-participants'></span>\n      <span id='add-new-participant' class='input-append invite_user_typeahead'>\n        <span class='sprite bg-icon-plus_ellipse'></span>\n        <span><input name='input-participants' id='participants-typeahead' class='typeahead shrink' autocomplete='off' /></span>\n        <span id='new-participant-btn'>\n          <a href='#'>{{ add_recipients_text }}</a>\n        </span>\n      </span>\n    </div>\n  </div>\n</div>\n<div class='row'>\n  <div class='col-lg-12' id='pm_message_form'>\n    <div class='bubble_title'>\n      <textarea name='body' placeholder='{{ body_placeholder_text }}'>{{ body_txt }}</textarea>\n    </div>\n  </div>\n</div>\n<div class='message-footer'>\n  <ul class='alert alert-danger errors hidden'></ul>\n  <div class='send_group'>\n    <span class='attachment_notification'>\n      {{#has_attachments}}\n        {{ attachment_text }}\n        <a class='remove_attachment' href='#'>{{ remove_attachment_text }}</a>\n      {{/has_attachments}}\n    </span>\n    <a class='btn btn-attach btn-info' id='attach'>{{ attach_text }}</a>\n    <a class='btn btn-reply btn-success' id='send-message'>{{ send_translation }}</a>\n  </div>\n</div>\n"),Mustache.compilePartial("private_messages/send_message","<div class='row'>\n  <div class='col-lg-12'>\n    <div class='participants tex2jax_ignore'>\n      <span id='current-participants'></span>\n      <span id='add-new-participant' class='input-append invite_user_typeahead'>\n        <span class='sprite bg-icon-plus_ellipse'></span>\n        <span><input name='input-participants' id='participants-typeahead' class='typeahead shrink' autocomplete='off' /></span>\n        <span id='new-participant-btn'>\n          <a href='#'>{{ add_recipients_text }}</a>\n        </span>\n      </span>\n    </div>\n  </div>\n</div>\n<div class='row'>\n  <div class='col-lg-12' id='pm_message_form'>\n    <div class='bubble_title'>\n      <textarea name='body' placeholder='{{ body_placeholder_text }}'>{{ body_txt }}</textarea>\n    </div>\n  </div>\n</div>\n<div class='message-footer'>\n  <ul class='alert alert-danger errors hidden'></ul>\n  <div class='send_group'>\n    <span class='attachment_notification'>\n      {{#has_attachments}}\n        {{ attachment_text }}\n        <a class='remove_attachment' href='#'>{{ remove_attachment_text }}</a>\n      {{/has_attachments}}\n    </span>\n    <a class='btn btn-attach btn-info' id='attach'>{{ attach_text }}</a>\n    <a class='btn btn-reply btn-success' id='send-message'>{{ send_translation }}</a>\n  </div>\n</div>\n"),this.SMT["private_messages/send_message"]=function(e){return e||(e={}),SMTCache["private_messages/send_message"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/certificates_list"]=Mustache.compile('<div class="col-12 cert">\n  <div class="sprite bg-icon-cert"></div>\n  {{#display_delete}}\n    <span data-award-id="{{ award_id }}" class="delete"></span>\n  {{/display_delete}}\n  <div class="cert_header">\n    <a class="cert_name" data-award-id="{{ award_id }}">\n      {{ certificate_name }}\n    </a>\n    {{ cert_for_text }}\n    {{#show_course_link}}\n      <a href="{{ course_link }}" class="course_name">\n        {{ course_name }}\n      </a>\n    {{/show_course_link}}\n    {{^show_course_link}}\n      {{ course_name }}\n    {{/show_course_link}}\n  </div>\n  <div class="cert_desc">\n    {{ certificate_description }}\n  </div>\n  <div class="cert_footer">\n    {{ cert_assigned_by_text }} &nbsp;\n    <a href="{{ author_profile_link }}" class="course_author">\n      {{ author_name }}\n    </a>\n    {{ cert_from_text }} &nbsp;\n    {{#show_institution_link}}\n      <a href="{{ institution_link }}" class="course_author_inst">\n        {{ institution_name }}\n      </a>\n    {{/show_institution_link}}\n    {{^show_institution_link}}\n      {{ institution_name }} \n    {{/show_institution_link}}\n  </div>\n</div>\n'),Mustache.compilePartial("profiles/certificates_list",'<div class="col-12 cert">\n  <div class="sprite bg-icon-cert"></div>\n  {{#display_delete}}\n    <span data-award-id="{{ award_id }}" class="delete"></span>\n  {{/display_delete}}\n  <div class="cert_header">\n    <a class="cert_name" data-award-id="{{ award_id }}">\n      {{ certificate_name }}\n    </a>\n    {{ cert_for_text }}\n    {{#show_course_link}}\n      <a href="{{ course_link }}" class="course_name">\n        {{ course_name }}\n      </a>\n    {{/show_course_link}}\n    {{^show_course_link}}\n      {{ course_name }}\n    {{/show_course_link}}\n  </div>\n  <div class="cert_desc">\n    {{ certificate_description }}\n  </div>\n  <div class="cert_footer">\n    {{ cert_assigned_by_text }} &nbsp;\n    <a href="{{ author_profile_link }}" class="course_author">\n      {{ author_name }}\n    </a>\n    {{ cert_from_text }} &nbsp;\n    {{#show_institution_link}}\n      <a href="{{ institution_link }}" class="course_author_inst">\n        {{ institution_name }}\n      </a>\n    {{/show_institution_link}}\n    {{^show_institution_link}}\n      {{ institution_name }} \n    {{/show_institution_link}}\n  </div>\n</div>\n'),this.SMT["profiles/certificates_list"]=function(e){return e||(e={}),SMTCache["profiles/certificates_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/friends_list"]=Mustache.compile('{{#is_owner}}\n  {{#has_no_friends}}\n    <div class="alert alert-block alert-info">\n      <a class="close" data-dismiss="alert">&times;</a>\n      <h4 class="alert-heading">\n        {{ add_friends_1_text }}\n      </h4>\n      <p>{{ add_friends_2_text }}</p>\n    </div>\n  {{/has_no_friends}}\n  {{^has_no_friends}}\n    <h3>{{ existing_friends_text }}</h3>\n  {{/has_no_friends}}\n{{/is_owner}}\n{{^is_owner}}\n  {{#is_stranger}}\n    <h3>{{ mutual_friends_text }}</h3>\n  {{/is_stranger}}\n{{/is_owner}}\n<div class="row {{#is_owner}}mine{{/is_owner}}{{^is_owner}}not_mine{{/is_owner}}"></div>\n'),Mustache.compilePartial("profiles/friends_list",'{{#is_owner}}\n  {{#has_no_friends}}\n    <div class="alert alert-block alert-info">\n      <a class="close" data-dismiss="alert">&times;</a>\n      <h4 class="alert-heading">\n        {{ add_friends_1_text }}\n      </h4>\n      <p>{{ add_friends_2_text }}</p>\n    </div>\n  {{/has_no_friends}}\n  {{^has_no_friends}}\n    <h3>{{ existing_friends_text }}</h3>\n  {{/has_no_friends}}\n{{/is_owner}}\n{{^is_owner}}\n  {{#is_stranger}}\n    <h3>{{ mutual_friends_text }}</h3>\n  {{/is_stranger}}\n{{/is_owner}}\n<div class="row {{#is_owner}}mine{{/is_owner}}{{^is_owner}}not_mine{{/is_owner}}"></div>\n'),this.SMT["profiles/friends_list"]=function(e){return e||(e={}),SMTCache["profiles/friends_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/invites_list"]=Mustache.compile('<h3>{{ title }}</h3>\n<div class="row"></div>\n'),Mustache.compilePartial("profiles/invites_list",'<h3>{{ title }}</h3>\n<div class="row"></div>\n'),this.SMT["profiles/invites_list"]=function(e){return e||(e={}),SMTCache["profiles/invites_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/prompt_view"]=Mustache.compile('<div class="user-profile__friend-prompt">\n  <div class="prompt">\n    <p>{{prompt}}</p>\n  </div>\n  <form accept-charset="UTF-8" action="{{url}}" data-remote="true" class="invite_friend" method="post">\n\t    <span class="invite_user_typeahead">\n\t      <input autocomplete="off" name="name" placeholder="{{placeholder}}" type="text" value="" spellcheck="false" dir="auto" class="typeahead">\n\t      <div class="invite_message">\n\t        <span class="help-inline invite_error_message"></span>\n\t      </div>\n\t    </span>\n\t    <span class="invite_submit">\n\t    \t<input class="btn btn-info btn-xs" id="issue_invite_button" name="commit" title="{{submit_title}}" type="submit" value="{{submit}}">\n\t    </span>\n    </div>\n  </form>\n</div>\n'),Mustache.compilePartial("profiles/prompt_view",'<div class="user-profile__friend-prompt">\n  <div class="prompt">\n    <p>{{prompt}}</p>\n  </div>\n  <form accept-charset="UTF-8" action="{{url}}" data-remote="true" class="invite_friend" method="post">\n\t    <span class="invite_user_typeahead">\n\t      <input autocomplete="off" name="name" placeholder="{{placeholder}}" type="text" value="" spellcheck="false" dir="auto" class="typeahead">\n\t      <div class="invite_message">\n\t        <span class="help-inline invite_error_message"></span>\n\t      </div>\n\t    </span>\n\t    <span class="invite_submit">\n\t    \t<input class="btn btn-info btn-xs" id="issue_invite_button" name="commit" title="{{submit_title}}" type="submit" value="{{submit}}">\n\t    </span>\n    </div>\n  </form>\n</div>\n'),this.SMT["profiles/prompt_view"]=function(e){return e||(e={}),SMTCache["profiles/prompt_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/public_course_list"]=Mustache.compile('<h3>\n  {{ public_courses_text }}\n  <span>{{ public_courses_count }}</span>\n</h3>\n<div class="user-profile__courses__public row"></div>\n'),Mustache.compilePartial("profiles/public_course_list",'<h3>\n  {{ public_courses_text }}\n  <span>{{ public_courses_count }}</span>\n</h3>\n<div class="user-profile__courses__public row"></div>\n'),this.SMT["profiles/public_course_list"]=function(e){return e||(e={}),SMTCache["profiles/public_course_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["profiles/public_study_aids_list"]=Mustache.compile('<h3>\n  {{ public_study_aids_text }}\n  <span>{{ public_study_aids_count }}</span>\n</h3>\n<div class="user-profile__resources__public row"></div>\n'),Mustache.compilePartial("profiles/public_study_aids_list",'<h3>\n  {{ public_study_aids_text }}\n  <span>{{ public_study_aids_count }}</span>\n</h3>\n<div class="user-profile__resources__public row"></div>\n'),this.SMT["profiles/public_study_aids_list"]=function(e){return e||(e={}),SMTCache["profiles/public_study_aids_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/answer_label"]=Mustache.compile('<span class="answer_label">{{{ content }}}</span>\n'),Mustache.compilePartial("quizzes/answer_label",'<span class="answer_label">{{{ content }}}</span>\n'),this.SMT["quizzes/answer_label"]=function(e){return e||(e={}),SMTCache["quizzes/answer_label"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/drag_and_drop_input"]=Mustache.compile('<input id="{{ id }}" name="{{ name }}" type="hidden" class="" />\n'),Mustache.compilePartial("quizzes/drag_and_drop_input",'<input id="{{ id }}" name="{{ name }}" type="hidden" class="" />\n'),this.SMT["quizzes/drag_and_drop_input"]=function(e){return e||(e={}),SMTCache["quizzes/drag_and_drop_input"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/image_label"]=Mustache.compile('<span class="image_label image_label_pin {{ input_type }} {{#classes}}{{.}} {{/classes}}" style="left:{{pixel_x}}px;top:{{pixel_y}}px;" data-input-id="{{ input_id }}" data-x="{{x}}" data-y="{{y}}" data-view-cid="{{ view_cid }}" data-zone-key="{{ zone_key }}">\n\n  <span class="pin"><span class="index_for_print">{{index_for_print}}</span></span>\n\n</span>\n<span class="image_label image_label_answer {{ input_type }} {{#classes}}{{.}} {{/classes}}" style="left:{{pixel_x}}px;top:{{pixel_y}}px;" data-input-id="{{ input_id }}" data-x="{{x}}" data-y="{{y}}" data-view-cid="{{ view_cid }}" data-zone-key="{{ zone_key }}">\n\n  <span class="answer_wrapper">\n    <span class="clear {{^answer_content }}hidden{{/answer_content}}">\u274c</span>\n    <span class="answer_input_field"></span>\n    <span class="label_content_wrapper">{{{ answer_content }}}</span>\n  </span>\n\n</span>\n'),Mustache.compilePartial("quizzes/image_label",'<span class="image_label image_label_pin {{ input_type }} {{#classes}}{{.}} {{/classes}}" style="left:{{pixel_x}}px;top:{{pixel_y}}px;" data-input-id="{{ input_id }}" data-x="{{x}}" data-y="{{y}}" data-view-cid="{{ view_cid }}" data-zone-key="{{ zone_key }}">\n\n  <span class="pin"><span class="index_for_print">{{index_for_print}}</span></span>\n\n</span>\n<span class="image_label image_label_answer {{ input_type }} {{#classes}}{{.}} {{/classes}}" style="left:{{pixel_x}}px;top:{{pixel_y}}px;" data-input-id="{{ input_id }}" data-x="{{x}}" data-y="{{y}}" data-view-cid="{{ view_cid }}" data-zone-key="{{ zone_key }}">\n\n  <span class="answer_wrapper">\n    <span class="clear {{^answer_content }}hidden{{/answer_content}}">\u274c</span>\n    <span class="answer_input_field"></span>\n    <span class="label_content_wrapper">{{{ answer_content }}}</span>\n  </span>\n\n</span>\n'),this.SMT["quizzes/image_label"]=function(e){return e||(e={}),SMTCache["quizzes/image_label"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/question_label"]=Mustache.compile('<span class="image_label" style="left:{{ x }}px;top:{{ y }}px;">\n  <span class="pin"></span>\n</span>\n'),Mustache.compilePartial("quizzes/question_label",'<span class="image_label" style="left:{{ x }}px;top:{{ y }}px;">\n  <span class="pin"></span>\n</span>\n'),this.SMT["quizzes/question_label"]=function(e){return e||(e={}),SMTCache["quizzes/question_label"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/text_field_input"]=Mustache.compile('<input name="{{ name }}" type="text" id="{{ id }}" class="" />\n'),Mustache.compilePartial("quizzes/text_field_input",'<input name="{{ name }}" type="text" id="{{ id }}" class="" />\n'),this.SMT["quizzes/text_field_input"]=function(e){return e||(e={}),SMTCache["quizzes/text_field_input"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/blank_drag_and_drop_answer_view"]=Mustache.compile('<div class="col-1 answer_image_container">\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="checkbox" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/blank_drag_and_drop_answer_view",'<div class="col-1 answer_image_container">\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="checkbox" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),this.SMT["quizzes/edit/answer_views/blank_drag_and_drop_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/blank_drag_and_drop_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/blank_dropdown_answer_view"]=Mustache.compile('<div class="col-1 answer_image_container">\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="radio" name="question_{{question_id}}_group" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/blank_dropdown_answer_view",'<div class="col-1 answer_image_container">\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="radio" name="question_{{question_id}}_group" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),this.SMT["quizzes/edit/answer_views/blank_dropdown_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/blank_dropdown_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/blank_text_field_answer_view"]=Mustache.compile('<div class="col-1"></div>\n\n<div class="col-8">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n\n  <div class="case_sensitive">\n    <label>\n      <input type="checkbox" class="case_sensitive_input" {{#case_sensitive}}checked="checked"{{/case_sensitive}}/>\n      <span class="case_sensitive_text {{#case_sensitive}}selected{{/case_sensitive}}">{{case_sensitive_text}}</span>\n    </label>\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/blank_text_field_answer_view",'<div class="col-1"></div>\n\n<div class="col-8">\n  {{>quizzes/edit/answer_views/text_field_answer}}\n</div>\n\n<div class="col-3 answer_actions_container">\n\n  <div class="case_sensitive">\n    <label>\n      <input type="checkbox" class="case_sensitive_input" {{#case_sensitive}}checked="checked"{{/case_sensitive}}/>\n      <span class="case_sensitive_text {{#case_sensitive}}selected{{/case_sensitive}}">{{case_sensitive_text}}</span>\n    </label>\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),this.SMT["quizzes/edit/answer_views/blank_text_field_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/blank_text_field_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/checkbox_answer_view"]=Mustache.compile('<div class="col-2 answer_media_container">\n  <div class="answer_image_container">\n    {{>quizzes/edit/answer_views/image_answer}}\n  </div>\n  <div class="answer_audio_container">\n    {{>quizzes/edit/audio_attachment_section}}\n  </div>\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/textarea_answer}}\n</div>\n\n<div class="col-2 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="checkbox" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/checkbox_answer_view",'<div class="col-2 answer_media_container">\n  <div class="answer_image_container">\n    {{>quizzes/edit/answer_views/image_answer}}\n  </div>\n  <div class="answer_audio_container">\n    {{>quizzes/edit/audio_attachment_section}}\n  </div>\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/textarea_answer}}\n</div>\n\n<div class="col-2 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="checkbox" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),this.SMT["quizzes/edit/answer_views/checkbox_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/checkbox_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/correct_answer"]=Mustache.compile('<span class="correct_answer_image">\n  <div class="sprite bg-icon-tick"></div>\n</span>\n\n'),Mustache.compilePartial("quizzes/edit/answer_views/correct_answer",'<span class="correct_answer_image">\n  <div class="sprite bg-icon-tick"></div>\n</span>\n\n'),this.SMT["quizzes/edit/answer_views/correct_answer"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/correct_answer"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/image_answer"]=Mustache.compile('<div class="upload_image_answer_container" {{#image_url}}style="display:none;"{{/image_url}}>\n    <label for="image_answer_{{number}}">\n    <div class="sprite bg-icon-image_plus_md upload_image" title="{{attach_image_text}}"></div>\n  </label>\n  <input type="hidden" id="image_answer_{{number}}" />\n</div>\n<div class="image_answer_container" {{^image_url}}style="display:none;"{{/image_url}}>\n  <img src="{{#image_url}}{{image_url}}{{/image_url}}" />\n  <a class="remove_image">{{remove_image_text}}</a>\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/image_answer",'<div class="upload_image_answer_container" {{#image_url}}style="display:none;"{{/image_url}}>\n    <label for="image_answer_{{number}}">\n    <div class="sprite bg-icon-image_plus_md upload_image" title="{{attach_image_text}}"></div>\n  </label>\n  <input type="hidden" id="image_answer_{{number}}" />\n</div>\n<div class="image_answer_container" {{^image_url}}style="display:none;"{{/image_url}}>\n  <img src="{{#image_url}}{{image_url}}{{/image_url}}" />\n  <a class="remove_image">{{remove_image_text}}</a>\n</div>\n'),this.SMT["quizzes/edit/answer_views/image_answer"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/image_answer"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/multiple_choice_answer_view"]=Mustache.compile('<div class="col-2 answer_media_container">\n  <div class="answer_image_container">\n    {{>quizzes/edit/answer_views/image_answer}}\n  </div>\n  <div class="answer_audio_container">\n    {{>quizzes/edit/audio_attachment_section}}\n  </div>\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/textarea_answer}}\n</div>\n\n<div class="col-2 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="radio" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/multiple_choice_answer_view",'<div class="col-2 answer_media_container">\n  <div class="answer_image_container">\n    {{>quizzes/edit/answer_views/image_answer}}\n  </div>\n  <div class="answer_audio_container">\n    {{>quizzes/edit/audio_attachment_section}}\n  </div>\n</div>\n\n<div class="col-8 answer_textarea_container">\n  {{>quizzes/edit/answer_views/textarea_answer}}\n</div>\n\n<div class="col-2 answer_actions_container">\n  <div class="correct_answer">\n\n    <label>\n      <input type="radio" class="correct_answer_input" {{#is_correct}}checked="checked"{{/is_correct}}/>\n      <span class="correct_answer_text {{#is_correct}}selected{{/is_correct}}">{{correct_text}}</span>\n      {{>quizzes/edit/answer_views/correct_answer}}\n    </label>\n\n  </div>\n\n  {{>quizzes/edit/answer_views/remove_answer}}\n</div>\n'),this.SMT["quizzes/edit/answer_views/multiple_choice_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/multiple_choice_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/remove_answer"]=Mustache.compile('<div class="remove_answer remove_child">\n  <div class="sprite bg-icon-trash remove_answer_image" title="{{remove_answer_text}}"></div>\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/remove_answer",'<div class="remove_answer remove_child">\n  <div class="sprite bg-icon-trash remove_answer_image" title="{{remove_answer_text}}"></div>\n</div>\n'),this.SMT["quizzes/edit/answer_views/remove_answer"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/remove_answer"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/text_field_answer"]=Mustache.compile('<input type="text" value="{{answer}}" class="answer_field" maxlength="40" />\n'),Mustache.compilePartial("quizzes/edit/answer_views/text_field_answer",'<input type="text" value="{{answer}}" class="answer_field" maxlength="40" />\n'),this.SMT["quizzes/edit/answer_views/text_field_answer"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/text_field_answer"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/textarea_answer"]=Mustache.compile('<textarea class="answer_field" maxlength="65535">{{answer}}</textarea>\n'),Mustache.compilePartial("quizzes/edit/answer_views/textarea_answer",'<textarea class="answer_field" maxlength="65535">{{answer}}</textarea>\n'),this.SMT["quizzes/edit/answer_views/textarea_answer"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/textarea_answer"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answer_views/true_or_false_answer_view"]=Mustache.compile('<div class="col-12">\n\n  <div class="answer_true_or_false">\n    <input type="radio" name="question_true_or_false" value="true" id="true_or_false_true_input" class="true_or_false_true_input" {{^is_new}}{{#true_or_false}}checked="checked"{{/true_or_false}}{{/is_new}} />\n\n    <label for="true_or_false_true_input" class="true_or_false_true_text">{{true_text}}</label>\n  </div>\n\n  <div class="answer_true_or_false">\n    <input type="radio" name="question_true_or_false" value="false" id=\'true_or_false_false_input\' class="true_or_false_false_input" {{^is_new}}{{^true_or_false}}checked="checked"{{/true_or_false}}{{/is_new}} />\n\n    <label for="true_or_false_false_input" class="true_or_false_false_text">{{false_text}}</label>\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/answer_views/true_or_false_answer_view",'<div class="col-12">\n\n  <div class="answer_true_or_false">\n    <input type="radio" name="question_true_or_false" value="true" id="true_or_false_true_input" class="true_or_false_true_input" {{^is_new}}{{#true_or_false}}checked="checked"{{/true_or_false}}{{/is_new}} />\n\n    <label for="true_or_false_true_input" class="true_or_false_true_text">{{true_text}}</label>\n  </div>\n\n  <div class="answer_true_or_false">\n    <input type="radio" name="question_true_or_false" value="false" id=\'true_or_false_false_input\' class="true_or_false_false_input" {{^is_new}}{{^true_or_false}}checked="checked"{{/true_or_false}}{{/is_new}} />\n\n    <label for="true_or_false_false_input" class="true_or_false_false_text">{{false_text}}</label>\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/answer_views/true_or_false_answer_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answer_views/true_or_false_answer_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/answers_input_section"]=Mustache.compile('<div class="edit_answers_section">\n  <h3>{{answer_prompt}}</h3>\n\n  <div class="question_answers_container">\n\n    <div id="question_answers_container"></div>\n\n    <div class="question_answer row" id="add_question_answer">\n      <div class="col-2">\n        <div class="sprite bg-icon-plus_24 add_answer_box_plus_img"></div>\n      </div>\n      <div class="col-8">\n        <div class="add_answer_box">\n          <span>{{add_answer_prompt}}</span>\n        </div>\n      </div>\n      <div class="col-2"></div>\n    </div>\n\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/answers_input_section",'<div class="edit_answers_section">\n  <h3>{{answer_prompt}}</h3>\n\n  <div class="question_answers_container">\n\n    <div id="question_answers_container"></div>\n\n    <div class="question_answer row" id="add_question_answer">\n      <div class="col-2">\n        <div class="sprite bg-icon-plus_24 add_answer_box_plus_img"></div>\n      </div>\n      <div class="col-8">\n        <div class="add_answer_box">\n          <span>{{add_answer_prompt}}</span>\n        </div>\n      </div>\n      <div class="col-2"></div>\n    </div>\n\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/answers_input_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/answers_input_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/audio_attachment_section"]=Mustache.compile('<div class="attach_audio_container" {{#audio_url}}style="display:none;"{{/audio_url}}>\n  <div class="attach_audio" title="{{attach_audio_text}}">\n    <div class="icon-headphones"></div>\n    <div class="icon-plus"></div>\n  </div>\n</div>\n\n<div class="audio_attachment_container" {{^audio_url}}style="display:none;"{{/audio_url}}>\n  {{>shared/audio_player}}\n  <a class="audio_remove">{{remove_audio_text}}</a>\n</div>\n'),Mustache.compilePartial("quizzes/edit/audio_attachment_section",'<div class="attach_audio_container" {{#audio_url}}style="display:none;"{{/audio_url}}>\n  <div class="attach_audio" title="{{attach_audio_text}}">\n    <div class="icon-headphones"></div>\n    <div class="icon-plus"></div>\n  </div>\n</div>\n\n<div class="audio_attachment_container" {{^audio_url}}style="display:none;"{{/audio_url}}>\n  {{>shared/audio_player}}\n  <a class="audio_remove">{{remove_audio_text}}</a>\n</div>\n'),this.SMT["quizzes/edit/audio_attachment_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/audio_attachment_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["quizzes/edit/create_blank"]=Mustache.compile('<div class="create_blank">\n  <span class="blank_length">\n    <span class="blank_length_count">0</span>\n    <div class="sprite bg-icon-information_italic blank_length_info_image" title="{{ blank_length_info_text }}"></div>\n  </span>\n  <span class="create_blanks_btn btn btn-primary">{{ add_blank_text }}</span>\n</div>\n'),Mustache.compilePartial("quizzes/edit/create_blank",'<div class="create_blank">\n  <span class="blank_length">\n    <span class="blank_length_count">0</span>\n    <div class="sprite bg-icon-information_italic blank_length_info_image" title="{{ blank_length_info_text }}"></div>\n  </span>\n  <span class="create_blanks_btn btn btn-primary">{{ add_blank_text }}</span>\n</div>\n'),this.SMT["quizzes/edit/create_blank"]=function(e){return e||(e={}),SMTCache["quizzes/edit/create_blank"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/fill_the_blanks_question_input_section"]=Mustache.compile("{{>quizzes/edit/question_input_section}}\n\n<div class=\"row supplementary_info\">\n  <div class=\"col-12 col-md-8 offset-md-2 text-center\">\n    <div>\n      <p>{{next_step_prompt}}</p>\n      <span class='add_blanks_btn btn btn-info'>{{add_blanks_text}}</span>\n      <p class='text-muted'>\n        <small>{{note_prompt}}</small>\n      </p>\n    </div>\n  </div>\n</div>\n"),Mustache.compilePartial("quizzes/edit/fill_the_blanks_question_input_section","{{>quizzes/edit/question_input_section}}\n\n<div class=\"row supplementary_info\">\n  <div class=\"col-12 col-md-8 offset-md-2 text-center\">\n    <div>\n      <p>{{next_step_prompt}}</p>\n      <span class='add_blanks_btn btn btn-info'>{{add_blanks_text}}</span>\n      <p class='text-muted'>\n        <small>{{note_prompt}}</small>\n      </p>\n    </div>\n  </div>\n</div>\n"),this.SMT["quizzes/edit/fill_the_blanks_question_input_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/fill_the_blanks_question_input_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/label_image_question_input_section"]=Mustache.compile('<div class="edit_question_section">\n\n  <h3>{{question_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-2 col-sm-1">\n      <div class="question_audio_container"></div>\n    </div>\n    <div class="col-10 col-sm-11 question_textarea_container">\n      <textarea cols="40" rows="20" maxlength="65535">{{question}}</textarea>\n    </div>\n  </div>\n\n</div>\n\n<div class="edit_question_section label_image_question_input">\n\n  <h3>{{image_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-1"></div>\n    <div class="col-11 question_image_container"></div>\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/label_image_question_input_section",'<div class="edit_question_section">\n\n  <h3>{{question_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-2 col-sm-1">\n      <div class="question_audio_container"></div>\n    </div>\n    <div class="col-10 col-sm-11 question_textarea_container">\n      <textarea cols="40" rows="20" maxlength="65535">{{question}}</textarea>\n    </div>\n  </div>\n\n</div>\n\n<div class="edit_question_section label_image_question_input">\n\n  <h3>{{image_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-1"></div>\n    <div class="col-11 question_image_container"></div>\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/label_image_question_input_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/label_image_question_input_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/question_container_view"]=Mustache.compile('<div class="container">\n  <div class="row">\n    <div class="col-12 col-lg-10 offset-lg-1 {{question_type}}">\n      <div id="question_container_view">\n        <div class="question_header_wrapper">\n          <div class="question_header_section">\n            <h3 class=\'question_title\'><span class="question_title_number">{{number}}</span> - {{i18n_type}}</h3>\n\n            <span class="question_buttons">\n              <span class="sprite bg-icon-gear_ellipse question_settings" title="{{question_settings}}"></span>\n              {{^is_new}}\n                <span class="sprite bg-icon-trash_ellipse remove_question" title="{{delete_question}}"></span>\n              {{/is_new}}\n            </span>\n\n          </div>\n        </div>\n\n        <div class="question_content_wrapper">\n\n          <div id="question_form">\n\n            <ul class="question_errors alert alert-danger"></ul>\n\n            <div id="question_settings_section"></div>\n\n            <div id="question_input_section"></div>\n\n            <div id="answer_input_section"></div>\n\n            <div id="question_explanation_section"></div>\n\n            <div id="question_footer">\n              <div id="question_form_buttons">\n\n                <div id="moving_loading_icon" style="display: none">\n                  <img alt="{{loading}}" src="/assets/loading.gif" />\n                </div>\n\n                <input class="btn btn-success question_submit" {{^is_new}}disabled=\'true\'{{/is_new}} type="button" value="{{save}}" />\n\n                <div class="cancel_question btn btn-cancel {{^is_new}}disabled{{/is_new}}">{{cancel}}</div>\n\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("quizzes/edit/question_container_view",'<div class="container">\n  <div class="row">\n    <div class="col-12 col-lg-10 offset-lg-1 {{question_type}}">\n      <div id="question_container_view">\n        <div class="question_header_wrapper">\n          <div class="question_header_section">\n            <h3 class=\'question_title\'><span class="question_title_number">{{number}}</span> - {{i18n_type}}</h3>\n\n            <span class="question_buttons">\n              <span class="sprite bg-icon-gear_ellipse question_settings" title="{{question_settings}}"></span>\n              {{^is_new}}\n                <span class="sprite bg-icon-trash_ellipse remove_question" title="{{delete_question}}"></span>\n              {{/is_new}}\n            </span>\n\n          </div>\n        </div>\n\n        <div class="question_content_wrapper">\n\n          <div id="question_form">\n\n            <ul class="question_errors alert alert-danger"></ul>\n\n            <div id="question_settings_section"></div>\n\n            <div id="question_input_section"></div>\n\n            <div id="answer_input_section"></div>\n\n            <div id="question_explanation_section"></div>\n\n            <div id="question_footer">\n              <div id="question_form_buttons">\n\n                <div id="moving_loading_icon" style="display: none">\n                  <img alt="{{loading}}" src="/assets/loading.gif" />\n                </div>\n\n                <input class="btn btn-success question_submit" {{^is_new}}disabled=\'true\'{{/is_new}} type="button" value="{{save}}" />\n\n                <div class="cancel_question btn btn-cancel {{^is_new}}disabled{{/is_new}}">{{cancel}}</div>\n\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'),this.SMT["quizzes/edit/question_container_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/question_container_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/question_explanation_section"]=Mustache.compile('<div class="edit_question_section">\n\n  <h3>{{question_explanation_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-1"></div>\n    <div class="col-11">\n      <textarea maxlength="65535">{{explanation}}</textarea>\n    </div>\n\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/question_explanation_section",'<div class="edit_question_section">\n\n  <h3>{{question_explanation_prompt}}</h3>\n\n  <div class="row">\n    <div class="col-1"></div>\n    <div class="col-11">\n      <textarea maxlength="65535">{{explanation}}</textarea>\n    </div>\n\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/question_explanation_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/question_explanation_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/question_image_section"]=Mustache.compile('<div class="upload_image_question_container" {{#image_url}}style="display:none;"{{/image_url}}>\n  <label for="image_question">\n    <div class="sprite bg-icon-image_plus_md upload_image" title="{{attach_image_text}}"></div>\n    <p class="label_image_upload_prompt text-muted"><small>{{label_image_upload_prompt}}</small></p>\n  </label>\n  <input type="hidden" id="image_question" />\n</div>\n<div class="image_question_container" {{^image_url}}style="display:none;"{{/image_url}}>\n  <img src="{{#image_url}}{{image_url}}{{/image_url}}" class=\'uploaded_image\' />\n  <a class="remove_image">{{remove_image_text}}</a>\n</div>\n'),Mustache.compilePartial("quizzes/edit/question_image_section",'<div class="upload_image_question_container" {{#image_url}}style="display:none;"{{/image_url}}>\n  <label for="image_question">\n    <div class="sprite bg-icon-image_plus_md upload_image" title="{{attach_image_text}}"></div>\n    <p class="label_image_upload_prompt text-muted"><small>{{label_image_upload_prompt}}</small></p>\n  </label>\n  <input type="hidden" id="image_question" />\n</div>\n<div class="image_question_container" {{^image_url}}style="display:none;"{{/image_url}}>\n  <img src="{{#image_url}}{{image_url}}{{/image_url}}" class=\'uploaded_image\' />\n  <a class="remove_image">{{remove_image_text}}</a>\n</div>\n'),this.SMT["quizzes/edit/question_image_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/question_image_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/question_input_section"]=Mustache.compile('<div class="edit_question_section">\n\n  <h3>{{question_prompt}}</h3>\n\n  <div class="row">\n\n    <div class="col-2 question_media_container">\n      <div class="question_image_container"></div>\n      <div class="question_audio_container"></div>\n    </div>\n\n    <div class="col-10 question_textarea_container">\n      <textarea cols="40" rows="20" placeholder="{{question_placeholder}}" maxlength="65535">{{question}}</textarea>\n    </div>\n\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/question_input_section",'<div class="edit_question_section">\n\n  <h3>{{question_prompt}}</h3>\n\n  <div class="row">\n\n    <div class="col-2 question_media_container">\n      <div class="question_image_container"></div>\n      <div class="question_audio_container"></div>\n    </div>\n\n    <div class="col-10 question_textarea_container">\n      <textarea cols="40" rows="20" placeholder="{{question_placeholder}}" maxlength="65535">{{question}}</textarea>\n    </div>\n\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/question_input_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/question_input_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/question_settings_section"]=Mustache.compile('<div class="edit_question_section">\n\n  <h3>{{question_settings_prompt}}</h3>\n\n  <div class="question_settings_container">\n\n    {{#show_time_allowed}}\n      <div class="timing">\n        <h4>{{ timing_heading }}</h4>\n        <div class="control-group">\n          <label for="quiz_question_time_allowed">\n            {{time_allowed_prompt}}\n          </label>\n          <input type="text" id="quiz_question_time_allowed" value="{{time_allowed}}" />\n          <div class="sprite bg-icon-information_italic info_image" title="{{time_allowed_info}}"></div>\n        </div>\n      </div>\n    {{/show_time_allowed}}\n\n    <div class="scoring">\n      <h4>{{ scoring_heading }}</h4>\n      <div class="control-group">\n        <label for="quiz_question_score">\n          {{score_prompt}}\n        </label>\n        <input type="text" id="quiz_question_score" size="4" maxlength="4" value="{{score}}" />\n      </div>\n      {{#show_partial_scoring}}\n        <div class="scoring_checkbox_wrapper">\n          <div>\n            <input type="checkbox" id="quiz_question_partial_scoring" {{#partial_scoring}}checked="checked"{{/partial_scoring}} />\n            <label for="quiz_question_partial_scoring">\n              {{partial_scoring_prompt}}\n            </label>\n            <div class="sprite bg-icon-information_italic info_image" title="{{partial_scoring_info}}"></div>\n          </div>\n          {{#show_negative_scoring}}\n            <div>\n              <input\n              type="checkbox"\n              id="quiz_question_negative_scoring"\n              {{#negative_scoring}}checked="checked"{{/negative_scoring}}\n              {{#negative_scoring_disabled}}disabled{{/negative_scoring_disabled}} />\n\n              <label for="quiz_question_negative_scoring">\n                {{negative_scoring_prompt}}\n              </label>\n              <div class="sprite bg-icon-information_italic info_image" title="{{negative_scoring_info}}"></div>\n            </div>\n          {{/show_negative_scoring}}\n        </div>\n      {{/show_partial_scoring}}\n    </div>\n\n    {{#show_randomise_answers}}\n      <div class="ordering">\n        <h4>{{ ordering_heading }}</h4>\n        <input type="checkbox" id="quiz_question_randomise_answers" {{#randomise_answers}}checked="checked"{{/randomise_answers}} />\n        <label for="quiz_question_randomise_answers">\n          {{randomise_answers_prompt}}\n        </label>\n      </div>\n    {{/show_randomise_answers}}\n\n  </div>\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/question_settings_section",'<div class="edit_question_section">\n\n  <h3>{{question_settings_prompt}}</h3>\n\n  <div class="question_settings_container">\n\n    {{#show_time_allowed}}\n      <div class="timing">\n        <h4>{{ timing_heading }}</h4>\n        <div class="control-group">\n          <label for="quiz_question_time_allowed">\n            {{time_allowed_prompt}}\n          </label>\n          <input type="text" id="quiz_question_time_allowed" value="{{time_allowed}}" />\n          <div class="sprite bg-icon-information_italic info_image" title="{{time_allowed_info}}"></div>\n        </div>\n      </div>\n    {{/show_time_allowed}}\n\n    <div class="scoring">\n      <h4>{{ scoring_heading }}</h4>\n      <div class="control-group">\n        <label for="quiz_question_score">\n          {{score_prompt}}\n        </label>\n        <input type="text" id="quiz_question_score" size="4" maxlength="4" value="{{score}}" />\n      </div>\n      {{#show_partial_scoring}}\n        <div class="scoring_checkbox_wrapper">\n          <div>\n            <input type="checkbox" id="quiz_question_partial_scoring" {{#partial_scoring}}checked="checked"{{/partial_scoring}} />\n            <label for="quiz_question_partial_scoring">\n              {{partial_scoring_prompt}}\n            </label>\n            <div class="sprite bg-icon-information_italic info_image" title="{{partial_scoring_info}}"></div>\n          </div>\n          {{#show_negative_scoring}}\n            <div>\n              <input\n              type="checkbox"\n              id="quiz_question_negative_scoring"\n              {{#negative_scoring}}checked="checked"{{/negative_scoring}}\n              {{#negative_scoring_disabled}}disabled{{/negative_scoring_disabled}} />\n\n              <label for="quiz_question_negative_scoring">\n                {{negative_scoring_prompt}}\n              </label>\n              <div class="sprite bg-icon-information_italic info_image" title="{{negative_scoring_info}}"></div>\n            </div>\n          {{/show_negative_scoring}}\n        </div>\n      {{/show_partial_scoring}}\n    </div>\n\n    {{#show_randomise_answers}}\n      <div class="ordering">\n        <h4>{{ ordering_heading }}</h4>\n        <input type="checkbox" id="quiz_question_randomise_answers" {{#randomise_answers}}checked="checked"{{/randomise_answers}} />\n        <label for="quiz_question_randomise_answers">\n          {{randomise_answers_prompt}}\n        </label>\n      </div>\n    {{/show_randomise_answers}}\n\n  </div>\n\n</div>\n'),this.SMT["quizzes/edit/question_settings_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/question_settings_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/sidebar_data_capture_view"]=Mustache.compile('<div class="question_view_inner">\n  <div class="question_title">\n    {{ title }}\n  </div>\n</div>\n<div class="question_view_overlay"></div>\n<div class="question_view_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),Mustache.compilePartial("quizzes/edit/sidebar_data_capture_view",'<div class="question_view_inner">\n  <div class="question_title">\n    {{ title }}\n  </div>\n</div>\n<div class="question_view_overlay"></div>\n<div class="question_view_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),this.SMT["quizzes/edit/sidebar_data_capture_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/sidebar_data_capture_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/sidebar_question_view"]=Mustache.compile('<div class="question_view_inner">\n  <div class="question_title">\n    {{sanitized_question}}\n  </div>\n  <div class="question_type">\n    {{i18n_type}}\n  </div>\n  <div class="question_settings">\n    <span class="question_score">\n      <div class="sprite bg-icon-medal_premium"></div>\n      <span>{{score}}</span>\n    </span>\n    <span class="question_time">\n      <div class="sprite bg-icon-clock"></div>\n      <span>{{time_allowed}}</span>\n    </span>\n  </div>\n  <div class="question_selector">\n    <input type="checkbox" name="quiz_question_ids_to_copy[]" class="select_question" value="{{ id }}">\n  </div>\n</div>\n<div class="question_number">\n  {{number}}\n</div>\n<div class="question_view_overlay"></div>\n<div class="question_view_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),Mustache.compilePartial("quizzes/edit/sidebar_question_view",'<div class="question_view_inner">\n  <div class="question_title">\n    {{sanitized_question}}\n  </div>\n  <div class="question_type">\n    {{i18n_type}}\n  </div>\n  <div class="question_settings">\n    <span class="question_score">\n      <div class="sprite bg-icon-medal_premium"></div>\n      <span>{{score}}</span>\n    </span>\n    <span class="question_time">\n      <div class="sprite bg-icon-clock"></div>\n      <span>{{time_allowed}}</span>\n    </span>\n  </div>\n  <div class="question_selector">\n    <input type="checkbox" name="quiz_question_ids_to_copy[]" class="select_question" value="{{ id }}">\n  </div>\n</div>\n<div class="question_number">\n  {{number}}\n</div>\n<div class="question_view_overlay"></div>\n<div class="question_view_handle">\n  <i class="icon-ellipsis-vertical"></i>\n</div>\n'),this.SMT["quizzes/edit/sidebar_question_view"]=function(e){return e||(e={}),SMTCache["quizzes/edit/sidebar_question_view"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["quizzes/edit/zone_answers_input_section"]=Mustache.compile('<div class="edit_answers_section {{question_type_class}}">\n  <h3>{{answer_prompt}}</h3>\n\n  <span class="delete_zone_btn btn btn-warning">{{delete_zone}}</span>\n\n  <div id="question_answers_container"></div>\n\n  {{^disallow_additional_answers}}\n  <div class="question_answer row" id="add_question_answer">\n    <div class="col-2">\n      <div class="sprite bg-icon-plus_24 add_answer_field_plus_img"></div>\n    </div>\n    <div class="col-8">\n      <div class="add_answer_field">\n        <span>{{add_answer_prompt}}</span>\n      </div>\n    </div>\n    <div class="col-2"></div>\n  </div>\n  {{/disallow_additional_answers}}\n\n</div>\n'),Mustache.compilePartial("quizzes/edit/zone_answers_input_section",'<div class="edit_answers_section {{question_type_class}}">\n  <h3>{{answer_prompt}}</h3>\n\n  <span class="delete_zone_btn btn btn-warning">{{delete_zone}}</span>\n\n  <div id="question_answers_container"></div>\n\n  {{^disallow_additional_answers}}\n  <div class="question_answer row" id="add_question_answer">\n    <div class="col-2">\n      <div class="sprite bg-icon-plus_24 add_answer_field_plus_img"></div>\n    </div>\n    <div class="col-8">\n      <div class="add_answer_field">\n        <span>{{add_answer_prompt}}</span>\n      </div>\n    </div>\n    <div class="col-2"></div>\n  </div>\n  {{/disallow_additional_answers}}\n\n</div>\n'),this.SMT["quizzes/edit/zone_answers_input_section"]=function(e){return e||(e={}),SMTCache["quizzes/edit/zone_answers_input_section"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["ratings/ratings_breakdown"]=Mustache.compile('<div class="title">{{title}}</div>\n<table class="ratings_breakdown">\n  <tr class="5_star">\n    <td class="total_ratings {{#no_5_star_ratings}}no_ratings{{/no_5_star_ratings}}">{{total_5_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_5.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="4_star">\n    <td class="total_ratings {{#no_4_star_ratings}}no_ratings{{/no_4_star_ratings}}">{{total_4_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_4.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="3_star">\n    <td class="total_ratings {{#no_3_star_ratings}}no_ratings{{/no_3_star_ratings}}">{{total_3_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_3.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="2_star">\n    <td class="total_ratings {{#no_2_star_ratings}}no_ratings{{/no_2_star_ratings}}">{{total_2_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_2.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class = "1_star">\n    <td class="total_ratings {{#no_1_star_ratings}}no_ratings{{/no_1_star_ratings}}">{{total_1_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_1.png"></td>\n  </tr>\n</table>\n'),Mustache.compilePartial("ratings/ratings_breakdown",'<div class="title">{{title}}</div>\n<table class="ratings_breakdown">\n  <tr class="5_star">\n    <td class="total_ratings {{#no_5_star_ratings}}no_ratings{{/no_5_star_ratings}}">{{total_5_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_5.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="4_star">\n    <td class="total_ratings {{#no_4_star_ratings}}no_ratings{{/no_4_star_ratings}}">{{total_4_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_4.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="3_star">\n    <td class="total_ratings {{#no_3_star_ratings}}no_ratings{{/no_3_star_ratings}}">{{total_3_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_3.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class="2_star">\n    <td class="total_ratings {{#no_2_star_ratings}}no_ratings{{/no_2_star_ratings}}">{{total_2_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_2.png"></td>\n  </tr>\n  <tr class="spacer"></span>\n  <tr class = "1_star">\n    <td class="total_ratings {{#no_1_star_ratings}}no_ratings{{/no_1_star_ratings}}">{{total_1_star_ratings}}</td>\n    <td class="bar_wrapper"><span class="bar_bg"><span class="percentage"></span></span></td>\n    <td class="star_rating"><img src="/assets/ratings/icon_stars_1.png"></td>\n  </tr>\n</table>\n'),this.SMT["ratings/ratings_breakdown"]=function(e){return e||(e={}),SMTCache["ratings/ratings_breakdown"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["ratings/user_rating"]=Mustache.compile('<div class="user_rating_message" style="display: none"></div>\n<div class="{{ icon_size }}_icon_size rating_container">\n\t<span class="user_rating"></span>\n  {{^hide_total_rating_count}}\n    <span class="total_ratings">{{ total_ratings }}<span>\n  {{/hide_total_rating_count}}\n</div>\n'),Mustache.compilePartial("ratings/user_rating",'<div class="user_rating_message" style="display: none"></div>\n<div class="{{ icon_size }}_icon_size rating_container">\n\t<span class="user_rating"></span>\n  {{^hide_total_rating_count}}\n    <span class="total_ratings">{{ total_ratings }}<span>\n  {{/hide_total_rating_count}}\n</div>\n'),this.SMT["ratings/user_rating"]=function(e){return e||(e={}),SMTCache["ratings/user_rating"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/fetch_more"]=Mustache.compile('<div id="fetch_more_results">\n  <span class="fetch"><a href="#">{{ load_more_text }}</a></span>\n\n  <span class="fetching" style="display:none">\n    {{ loading_text }}\n  </span>\n</div>\n'),Mustache.compilePartial("search/fetch_more",'<div id="fetch_more_results">\n  <span class="fetch"><a href="#">{{ load_more_text }}</a></span>\n\n  <span class="fetching" style="display:none">\n    {{ loading_text }}\n  </span>\n</div>\n'),this.SMT["search/fetch_more"]=function(e){return e||(e={}),SMTCache["search/fetch_more"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/empty_list"]=Mustache.compile('<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  </a>\n  <div class="results_container">\n    <div class="no_results_container">\n      <div class="expecting_to_find">{{{expecting_to_find_text}}}</div>\n      <div class="reasons">{{{reasons_text}}}</div>\n      <div class="suggested_actions">{{{suggested_actions_text}}}</div>\n    </div>\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),Mustache.compilePartial("search/empty_list",'<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  </a>\n  <div class="results_container">\n    <div class="no_results_container">\n      <div class="expecting_to_find">{{{expecting_to_find_text}}}</div>\n      <div class="reasons">{{{reasons_text}}}</div>\n      <div class="suggested_actions">{{{suggested_actions_text}}}</div>\n    </div>\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),this.SMT["search/empty_list"]=function(e){return e||(e={}),SMTCache["search/empty_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/pagination_controls"]=Mustache.compile('<div class="gc_pagination search_results_pagination">\n  {{{ page_listing }}}\n</div>\n'),Mustache.compilePartial("search/pagination_controls",'<div class="gc_pagination search_results_pagination">\n  {{{ page_listing }}}\n</div>\n'),this.SMT["search/pagination_controls"]=function(e){return e||(e={}),SMTCache["search/pagination_controls"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/results_list"]=Mustache.compile('<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  \t<span class="show_all">\n      {{show_all_text}}\n  \t</span>\n  </a>\n  <div class="results_container">\n  </div>\n  <div class="clearfix"></div>\n  <div class="pagination_container">\n  </div>\n</div>\n'),Mustache.compilePartial("search/results_list",'<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  \t<span class="show_all">\n      {{show_all_text}}\n  \t</span>\n  </a>\n  <div class="results_container">\n  </div>\n  <div class="clearfix"></div>\n  <div class="pagination_container">\n  </div>\n</div>\n'),this.SMT["search/results_list"]=function(e){return e||(e={}),SMTCache["search/results_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/results_summary"]=Mustache.compile('<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  \t<span class="show_all">\n  \t\t{{show_all_text}}\n  \t</span>\n  </a>\n  <div class="results_container">\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),Mustache.compilePartial("search/results_summary",'<div class="search_results_summary">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  \t<span class="show_all">\n  \t\t{{show_all_text}}\n  \t</span>\n  </a>\n  <div class="results_container">\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),this.SMT["search/results_summary"]=function(e){return e||(e={}),SMTCache["search/results_summary"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/search_page"]=Mustache.compile('<div class="col-lg-8 col-12" id="center_container">\n  <div id="center_section">\n    <div id="search_page_container" class="search_container">\n      <div id="search_results">\n        <div id="resource_results_summary"></div>\n        <div id="user_results_summary"></div>\n        <div id="group_results_summary"></div>\n        <div id="course_results_summary"></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="right_sidebar_container" class="sidebar_container col-lg-4 col-12">\n</div>\n{{#is_mobile}}\n  <div id="resource_actions"></div>\n  <div id="actions_overlay"></div>\n{{/is_mobile}}\n'),Mustache.compilePartial("search/search_page",'<div class="col-lg-8 col-12" id="center_container">\n  <div id="center_section">\n    <div id="search_page_container" class="search_container">\n      <div id="search_results">\n        <div id="resource_results_summary"></div>\n        <div id="user_results_summary"></div>\n        <div id="group_results_summary"></div>\n        <div id="course_results_summary"></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="right_sidebar_container" class="sidebar_container col-lg-4 col-12">\n</div>\n{{#is_mobile}}\n  <div id="resource_actions"></div>\n  <div id="actions_overlay"></div>\n{{/is_mobile}}\n'),this.SMT["search/search_page"]=function(e){return e||(e={}),SMTCache["search/search_page"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/service_unavailable"]=Mustache.compile('<div class="search_results_summary service_unavailable">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  </a>\n  <div class="results_container">\n    {{unavailable_text}}\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),
Mustache.compilePartial("search/service_unavailable",'<div class="search_results_summary service_unavailable">\n\t<a href="#" class="results_type_filter" data-type="{{search_type}}">\n    <span class="sprite"></span>\n  \t<span class="results_heading">\n      {{{heading}}}\n  \t</span>\n  </a>\n  <div class="results_container">\n    {{unavailable_text}}\n  </div>\n  <div class="clearfix"></div>\n</div>\n'),this.SMT["search/service_unavailable"]=function(e){return e||(e={}),SMTCache["search/service_unavailable"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["search/sidebar_filters"]=Mustache.compile('\n<form>\n  <input type="text" id="sidebar_search_field" class="search_field searchfilter" value="{{q}}">\n  <span class="search_button">\n    <i class="fa icon-search"></i>\n  </span>\n</form>\n\n<div id="accordion" class="searchfilters sidebar_filter" role="tablist" aria-multiselectable="true">\n  <div class="panel panel-default searchfilter" data-type="resource">\n    <div class="panel-heading" role="tab" id="headingOne">\n      <a class="collapsed panel_heading_resources" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">\n        <span class="sprite"></span>\n        {{resources_title}}\n          <span class="resultcount">\n            (\n              <span id="resource_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">\n      <form class="resource_scope" action="">\n        <input id="radio_all_resources" type="radio" name="resource_scope" value="all"><label for="radio_all_resources">{{all_resources_label}}</label>\n        <input id="radio_public_resources" type="radio" name="resource_scope" value="public"><label for="radio_public_resources">{{public_resources_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_resources" type="radio" name="resource_scope" value="my_campus"><label for="radio_my_campus_resources">{{my_campus_resources_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_pinned_resources" type="radio" name="resource_scope" value="my_pins"><label for="radio_my_pinned_resources">{{my_pinned_resources_label}}</label>\n        <input id="radio_my_resources" type="radio" name="resource_scope" value="my_own"><label for="radio_my_resources">{{my_own_resources_label}}</label>\n        <input id="radio_my_groups_resources" type="radio" name="resource_scope" value="my_groups"><label for="radio_my_groups_resources">{{my_groups_resources_label}}</label>\n      </form>\n\n      <form class="resources_check" action="">\n        <input id="check_mindmaps" type="checkbox" name="resource_study_aid_type" value="MindMap" checked><label for="check_mindmaps">{{type_mind_map_label}}</label>\n        <input id="check_flashcarddecks" type="checkbox" name="resource_study_aid_type" value="FlashCardDeck" checked><label for="check_flashcarddecks">{{type_flash_card_deck_label}}</label>\n        <input id="check_quizzes" type="checkbox" name="resource_study_aid_type" value="Quiz" checked><label for="check_quizzes">{{type_quiz_label}}</label>\n        <input id="check_notes" type="checkbox" name="resource_study_aid_type" value="Note" checked><label for="check_notes">{{type_note_label}}</label>\n        <input id="check_slidesets" type="checkbox" name="resource_study_aid_type" value="SlideSet" checked><label for="check_slidesets">{{type_slide_set_label}}</label>\n      \t<input id="check_flowcharts"  type="checkbox" name="resource_study_aid_type" value="Flowchart" checked><label for="check_flowcharts">{{type_flowchart_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="user">\n    <div class="panel-heading" role="tab" id="headingTwo">\n      <a class="collapsed panel_heading_users" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">\n        <span class="sprite"></span>\n        {{users_title}}\n          <span class="resultcount">\n            (\n              <span id="user_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">\n      <form class="user_scope">\n        <input id="radio_all_profiles" type="radio" name="user_scope" value="all"><label for="radio_all_profiles">{{all_users_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_profiles" type="radio" name="user_scope" value="my_campus"><label for="radio_my_campus_profiles">{{my_campus_users_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_friends_profiles" type="radio" name="user_scope" value="my_friends"><label for="radio_my_friends_profiles">{{my_friends_users_label}}</label>\n      </form>\n\n      <form class="profiles_check">\n        <input id="check_students" type="checkbox" name="user_classification" value="student" checked><label for="check_students">{{classification_student_label}}</label>\n        <input id="check_educators" type="checkbox" name="user_classification" value="educator" checked><label for="check_educators">{{classification_educator_label}}</label>\n        <input id="check_professionals" type="checkbox" name="user_classification" value="professional" checked><label for="check_professionals">{{classification_professional_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="group">\n    <div class="panel-heading" role="tab" id="headingThree">\n      <a class="collapsed panel_heading_groups" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">\n        <span class="sprite"></span>\n        {{groups_title}}\n          <span class="resultcount">\n            (\n              <span id="group_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">\n      <form class="group_scope" action="">\n        <input id="radio_all_groups" type="radio" name="group_scope" value="all"><label for="radio_all_groups">{{all_groups_label}}</label>\n        <input id="radio_public_groups" type="radio" name="group_scope" value="public"><label for="radio_public_groups">{{public_groups_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_groups" type="radio" name="group_scope" value="my_campus"><label for="radio_my_campus_groups">{{my_campus_groups_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_groups" type="radio" name="group_scope" value="my_own"><label for="radio_my_groups">{{my_own_groups_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="course">\n    <div class="panel-heading" role="tab" id="headingFour">\n      <a class="collapsed panel_heading_courses" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">\n        <span class="sprite"></span>\n        {{courses_title}}\n          <span class="resultcount">\n            (\n              <span id="course_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">\n      <form class="course_scope" action="">\n        <input id="radio_all_courses" type="radio" name="course_scope" value="all"><label for="radio_all_courses">{{all_courses_label}}</label>\n        <input id="radio_public_courses" type="radio" name="course_scope" value="public"><label for="radio_public_courses">{{public_courses_label}}</label>\n        <input id="radio_my_group_courses" type="radio" name="course_scope" value="my_groups"><label for="radio_my_group_courses">{{my_groups_courses_label}}</label>\n        <input id="radio_my_started_courses" type="radio" name="course_scope" value="my_started"><label for="radio_my_started_courses">{{my_started_courses_label}}</label>\n        <input id="radio_my_authored_courses" type="radio" name="course_scope" value="my_own"><label for="radio_my_authored_courses">{{my_authored_courses_label}}</label>\n      </form>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("search/sidebar_filters",'\n<form>\n  <input type="text" id="sidebar_search_field" class="search_field searchfilter" value="{{q}}">\n  <span class="search_button">\n    <i class="fa icon-search"></i>\n  </span>\n</form>\n\n<div id="accordion" class="searchfilters sidebar_filter" role="tablist" aria-multiselectable="true">\n  <div class="panel panel-default searchfilter" data-type="resource">\n    <div class="panel-heading" role="tab" id="headingOne">\n      <a class="collapsed panel_heading_resources" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">\n        <span class="sprite"></span>\n        {{resources_title}}\n          <span class="resultcount">\n            (\n              <span id="resource_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">\n      <form class="resource_scope" action="">\n        <input id="radio_all_resources" type="radio" name="resource_scope" value="all"><label for="radio_all_resources">{{all_resources_label}}</label>\n        <input id="radio_public_resources" type="radio" name="resource_scope" value="public"><label for="radio_public_resources">{{public_resources_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_resources" type="radio" name="resource_scope" value="my_campus"><label for="radio_my_campus_resources">{{my_campus_resources_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_pinned_resources" type="radio" name="resource_scope" value="my_pins"><label for="radio_my_pinned_resources">{{my_pinned_resources_label}}</label>\n        <input id="radio_my_resources" type="radio" name="resource_scope" value="my_own"><label for="radio_my_resources">{{my_own_resources_label}}</label>\n        <input id="radio_my_groups_resources" type="radio" name="resource_scope" value="my_groups"><label for="radio_my_groups_resources">{{my_groups_resources_label}}</label>\n      </form>\n\n      <form class="resources_check" action="">\n        <input id="check_mindmaps" type="checkbox" name="resource_study_aid_type" value="MindMap" checked><label for="check_mindmaps">{{type_mind_map_label}}</label>\n        <input id="check_flashcarddecks" type="checkbox" name="resource_study_aid_type" value="FlashCardDeck" checked><label for="check_flashcarddecks">{{type_flash_card_deck_label}}</label>\n        <input id="check_quizzes" type="checkbox" name="resource_study_aid_type" value="Quiz" checked><label for="check_quizzes">{{type_quiz_label}}</label>\n        <input id="check_notes" type="checkbox" name="resource_study_aid_type" value="Note" checked><label for="check_notes">{{type_note_label}}</label>\n        <input id="check_slidesets" type="checkbox" name="resource_study_aid_type" value="SlideSet" checked><label for="check_slidesets">{{type_slide_set_label}}</label>\n      \t<input id="check_flowcharts"  type="checkbox" name="resource_study_aid_type" value="Flowchart" checked><label for="check_flowcharts">{{type_flowchart_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="user">\n    <div class="panel-heading" role="tab" id="headingTwo">\n      <a class="collapsed panel_heading_users" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">\n        <span class="sprite"></span>\n        {{users_title}}\n          <span class="resultcount">\n            (\n              <span id="user_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">\n      <form class="user_scope">\n        <input id="radio_all_profiles" type="radio" name="user_scope" value="all"><label for="radio_all_profiles">{{all_users_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_profiles" type="radio" name="user_scope" value="my_campus"><label for="radio_my_campus_profiles">{{my_campus_users_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_friends_profiles" type="radio" name="user_scope" value="my_friends"><label for="radio_my_friends_profiles">{{my_friends_users_label}}</label>\n      </form>\n\n      <form class="profiles_check">\n        <input id="check_students" type="checkbox" name="user_classification" value="student" checked><label for="check_students">{{classification_student_label}}</label>\n        <input id="check_educators" type="checkbox" name="user_classification" value="educator" checked><label for="check_educators">{{classification_educator_label}}</label>\n        <input id="check_professionals" type="checkbox" name="user_classification" value="professional" checked><label for="check_professionals">{{classification_professional_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="group">\n    <div class="panel-heading" role="tab" id="headingThree">\n      <a class="collapsed panel_heading_groups" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">\n        <span class="sprite"></span>\n        {{groups_title}}\n          <span class="resultcount">\n            (\n              <span id="group_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">\n      <form class="group_scope" action="">\n        <input id="radio_all_groups" type="radio" name="group_scope" value="all"><label for="radio_all_groups">{{all_groups_label}}</label>\n        <input id="radio_public_groups" type="radio" name="group_scope" value="public"><label for="radio_public_groups">{{public_groups_label}}</label>\n        {{#campus_user}}\n          <input id="radio_my_campus_groups" type="radio" name="group_scope" value="my_campus"><label for="radio_my_campus_groups">{{my_campus_groups_label}}</label>\n        {{/campus_user}}\n        <input id="radio_my_groups" type="radio" name="group_scope" value="my_own"><label for="radio_my_groups">{{my_own_groups_label}}</label>\n      </form>\n    </div>\n  </div>\n  <div class="panel panel-default searchfilter" data-type="course">\n    <div class="panel-heading" role="tab" id="headingFour">\n      <a class="collapsed panel_heading_courses" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">\n        <span class="sprite"></span>\n        {{courses_title}}\n          <span class="resultcount">\n            (\n              <span id="course_count">0</span>\n            )\n          </span>\n      </a>\n    </div>\n    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">\n      <form class="course_scope" action="">\n        <input id="radio_all_courses" type="radio" name="course_scope" value="all"><label for="radio_all_courses">{{all_courses_label}}</label>\n        <input id="radio_public_courses" type="radio" name="course_scope" value="public"><label for="radio_public_courses">{{public_courses_label}}</label>\n        <input id="radio_my_group_courses" type="radio" name="course_scope" value="my_groups"><label for="radio_my_group_courses">{{my_groups_courses_label}}</label>\n        <input id="radio_my_started_courses" type="radio" name="course_scope" value="my_started"><label for="radio_my_started_courses">{{my_started_courses_label}}</label>\n        <input id="radio_my_authored_courses" type="radio" name="course_scope" value="my_own"><label for="radio_my_authored_courses">{{my_authored_courses_label}}</label>\n      </form>\n    </div>\n  </div>\n</div>\n'),this.SMT["search/sidebar_filters"]=function(e){return e||(e={}),SMTCache["search/sidebar_filters"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["share_lists/entry"]=Mustache.compile('<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_identifier" name="payments_share_list[share_list_entries_attributes][{{ index }}][identifier]" type="text" value="{{ identifier }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_first_name" name="payments_share_list[share_list_entries_attributes][{{ index }}][first_name]" type="text" value="{{ first_name }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_last_name" name="payments_share_list[share_list_entries_attributes][{{ index }}][last_name]" type="text" value="{{ last_name }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_email" name="payments_share_list[share_list_entries_attributes][{{ index }}][email]" type="email" value="{{ email }}" />\n</td>\n<td>\n  <div class="sprite bg-icon-trash remove_entry" title="{{ remove_entry_label }}"></div>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}__destroy" name="payments_share_list[share_list_entries_attributes][{{ index }}][_destroy]" type="hidden" class="entry_destroy" />\n  {{#id}}<input name="payments_share_list[share_list_entries_attributes][{{ index }}][id]" type="hidden" value="{{id}}" />{{/id}}\n</td>\n'),Mustache.compilePartial("share_lists/entry",'<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_identifier" name="payments_share_list[share_list_entries_attributes][{{ index }}][identifier]" type="text" value="{{ identifier }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_first_name" name="payments_share_list[share_list_entries_attributes][{{ index }}][first_name]" type="text" value="{{ first_name }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_last_name" name="payments_share_list[share_list_entries_attributes][{{ index }}][last_name]" type="text" value="{{ last_name }}" />\n</td>\n<td>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}_email" name="payments_share_list[share_list_entries_attributes][{{ index }}][email]" type="email" value="{{ email }}" />\n</td>\n<td>\n  <div class="sprite bg-icon-trash remove_entry" title="{{ remove_entry_label }}"></div>\n  <input id="payments_share_list_share_list_entries_attributes_{{ index }}__destroy" name="payments_share_list[share_list_entries_attributes][{{ index }}][_destroy]" type="hidden" class="entry_destroy" />\n  {{#id}}<input name="payments_share_list[share_list_entries_attributes][{{ index }}][id]" type="hidden" value="{{id}}" />{{/id}}\n</td>\n'),this.SMT["share_lists/entry"]=function(e){return e||(e={}),SMTCache["share_lists/entry"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/audio_player"]=Mustache.compile('<div class="audio_player {{label_class}}">\n  <div class="custom_player {{#use_native}}hidden{{/use_native}}">\n    <div class="sprite bg-icon-speaker_volume speaker_icon"></div>\n    <div class="custom_play icon-play" title="{{play_label}}"></div>\n    <div class="custom_pause icon-pause hidden" title="{{pause_label}}"></div>\n    {{#full_player}}\n      <div class="timer_and_seek {{#stack_timer}}stacked{{/stack_timer}}">\n        {{^hide_timer}}\n          <div class="custom_timer" title="{{timer_label}}">--:-- / --:--</div>\n        {{/hide_timer}}\n        <div class="custom_seek" title="{{current_time}}">\n          <input type="range" step="0.01" min="0" max="1" value="0">\n        </div>\n      </div>\n      <div class="custom_volume">\n        <i class="icon-volume-up" title="{{volume_label}}"></i>\n        <input type="range" step="0.05" min="0" max="1" value="1.0">\n      </div>\n    {{/full_player}}\n  </div>\n  <audio\n    class="{{^use_native}}hidden{{/use_native}}"\n    src="{{#audio_url}}{{audio_url}}{{/audio_url}}"\n    controls="true">\n    {{audio_unsupported_text}}\n  </audio>\n</div>\n'),Mustache.compilePartial("shared/audio_player",'<div class="audio_player {{label_class}}">\n  <div class="custom_player {{#use_native}}hidden{{/use_native}}">\n    <div class="sprite bg-icon-speaker_volume speaker_icon"></div>\n    <div class="custom_play icon-play" title="{{play_label}}"></div>\n    <div class="custom_pause icon-pause hidden" title="{{pause_label}}"></div>\n    {{#full_player}}\n      <div class="timer_and_seek {{#stack_timer}}stacked{{/stack_timer}}">\n        {{^hide_timer}}\n          <div class="custom_timer" title="{{timer_label}}">--:-- / --:--</div>\n        {{/hide_timer}}\n        <div class="custom_seek" title="{{current_time}}">\n          <input type="range" step="0.01" min="0" max="1" value="0">\n        </div>\n      </div>\n      <div class="custom_volume">\n        <i class="icon-volume-up" title="{{volume_label}}"></i>\n        <input type="range" step="0.05" min="0" max="1" value="1.0">\n      </div>\n    {{/full_player}}\n  </div>\n  <audio\n    class="{{^use_native}}hidden{{/use_native}}"\n    src="{{#audio_url}}{{audio_url}}{{/audio_url}}"\n    controls="true">\n    {{audio_unsupported_text}}\n  </audio>\n</div>\n'),this.SMT["shared/audio_player"]=function(e){return e||(e={}),SMTCache["shared/audio_player"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/error_messages_alert"]=Mustache.compile('<div class=\'alert alert-danger alert-dismissible\'>\n  <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n  <ul class="errors">\n    {{#error_messages}}\n      <li>{{{ . }}}</li>\n    {{/error_messages}}\n  </ul>\n</div>\n'),Mustache.compilePartial("shared/error_messages_alert",'<div class=\'alert alert-danger alert-dismissible\'>\n  <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n  <ul class="errors">\n    {{#error_messages}}\n      <li>{{{ . }}}</li>\n    {{/error_messages}}\n  </ul>\n</div>\n'),this.SMT["shared/error_messages_alert"]=function(e){return e||(e={}),SMTCache["shared/error_messages_alert"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/fetch_more"]=Mustache.compile('<div id="fetch_more_updates">\n  <span class="fetch"><a href="#">{{ load_more_text }}</a></span>\n\n  <span class="fetching" style="display:none">\n    {{ loading_text }}\n  </span>\n</div>\n'),Mustache.compilePartial("shared/fetch_more",'<div id="fetch_more_updates">\n  <span class="fetch"><a href="#">{{ load_more_text }}</a></span>\n\n  <span class="fetching" style="display:none">\n    {{ loading_text }}\n  </span>\n</div>\n'),this.SMT["shared/fetch_more"]=function(e){return e||(e={}),SMTCache["shared/fetch_more"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/info_tooltip"]=Mustache.compile('<a href="#" class="what_is_this" data-placement="{{placement}}" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n  <i class="icon-question-sign"></i>\n</a>\n'),Mustache.compilePartial("shared/info_tooltip",'<a href="#" class="what_is_this" data-placement="{{placement}}" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n  <i class="icon-question-sign"></i>\n</a>\n'),this.SMT["shared/info_tooltip"]=function(e){return e||(e={}),SMTCache["shared/info_tooltip"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/option"]=Mustache.compile('<option value="{{ value }}">{{ content }}</option>\n'),Mustache.compilePartial("shared/option",'<option value="{{ value }}">{{ content }}</option>\n'),this.SMT["shared/option"]=function(e){return e||(e={}),SMTCache["shared/option"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/popup_image"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog-image">\n    <div class="modal-content">\n\n      <div class="modal-header">\n        <button class="close_modal" data-dismiss="modal" type="button" title="{{close_text}}">\n          <span aria-hidden="true">\xd7</span>\n        </button>\n      </div>\n\n      <div class="modal-body">\n        <div class="popup_image_container">\n          <img src="{{url}}" class="popup_image_content">\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("shared/popup_image",'<div class="modal" role="dialog">\n  <div class="modal-dialog-image">\n    <div class="modal-content">\n\n      <div class="modal-header">\n        <button class="close_modal" data-dismiss="modal" type="button" title="{{close_text}}">\n          <span aria-hidden="true">\xd7</span>\n        </button>\n      </div>\n\n      <div class="modal-body">\n        <div class="popup_image_container">\n          <img src="{{url}}" class="popup_image_content">\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'),this.SMT["shared/popup_image"]=function(e){return e||(e={}),SMTCache["shared/popup_image"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/report_content_modal"]=Mustache.compile('<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{ prompt }}\n\n\t\t  <div>\n\t          <input type="radio" name="report_type" id="report_type_spam" value="spam">\n\t          <label for="report_type_spam">{{report_as_spam}}</label>\n          </div>\n\n\t\t  <div>\n            <input type="radio" name="report_type" id="report_type_inappropriate" value="inappropriate">\n            <label for="report_type_inappropriate">{{report_as_inappropriate}}</label>\n          </div>\n\n          {{#requires_reason}}\n          <div>\n          \t<label for="report_reason">\n          \t\t{{prompt_reason}}\n          \t</label>\n          \t<textarea name="reason" id="report_reason"></textarea>\n          </div>\n          {{/requires_reason}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-danger disabled" id="confirm_report">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),Mustache.compilePartial("shared/report_content_modal",'<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{ prompt }}\n\n\t\t  <div>\n\t          <input type="radio" name="report_type" id="report_type_spam" value="spam">\n\t          <label for="report_type_spam">{{report_as_spam}}</label>\n          </div>\n\n\t\t  <div>\n            <input type="radio" name="report_type" id="report_type_inappropriate" value="inappropriate">\n            <label for="report_type_inappropriate">{{report_as_inappropriate}}</label>\n          </div>\n\n          {{#requires_reason}}\n          <div>\n          \t<label for="report_reason">\n          \t\t{{prompt_reason}}\n          \t</label>\n          \t<textarea name="reason" id="report_reason"></textarea>\n          </div>\n          {{/requires_reason}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-danger disabled" id="confirm_report">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),this.SMT["shared/report_content_modal"]=function(e){return e||(e={}),SMTCache["shared/report_content_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/select_tag"]=Mustache.compile('<select name="{{ name }}" id="{{ id }}" class="label_select {{ classes }}" style="{{ style }}">\n  {{ >shared/option }}\n  {{ #options }}\n    {{ >shared/option }}\n  {{ /options }}\n</select>\n'),Mustache.compilePartial("shared/select_tag",'<select name="{{ name }}" id="{{ id }}" class="label_select {{ classes }}" style="{{ style }}">\n  {{ >shared/option }}\n  {{ #options }}\n    {{ >shared/option }}\n  {{ /options }}\n</select>\n'),this.SMT["shared/select_tag"]=function(e){return e||(e={}),SMTCache["shared/select_tag"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/success_alert"]=Mustache.compile('<div class=\'alert alert-success alert-dismissible fade in\'>\n  <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n  {{ success_message }}\n</div>\n'),Mustache.compilePartial("shared/success_alert",'<div class=\'alert alert-success alert-dismissible fade in\'>\n  <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n  {{ success_message }}\n</div>\n'),this.SMT["shared/success_alert"]=function(e){return e||(e={}),SMTCache["shared/success_alert"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/topic_study_aids_list"]=Mustache.compile('<div class="col-lg-12 topic_header {{#default_topic}}default_topic_header{{/default_topic}}">\n  <h2><span class="topic_name" data-id="{{ topic_id }}" data-name="{{ name }}">{{ name }}</span>\n    <span class="invisible delete_topic_btn">\n      <div class="sprite bg-icon-trash_ellipse btn_remove_topic"></div>\n    </span>\n  </h2>\n  <span class="edit_topic hidden">\n    <form  method="post" class="change_topic_name" data-remote="true" {{#action}}action={{action}}{{/action}}>\n      <input class="edit_topic_name"\n        type="text"\n        name="{{#default_topic}}{{#in_group}}group_topic[name]{{/in_group}}{{^in_group}}topic_name{{/in_group}}{{/default_topic}}{{^default_topic}}folder[name]{{/default_topic}}"\n        maxlength="60"\n        value="{{ name }}">\n      {{#default_topic}}\n        {{#in_group}}\n          <input type="hidden" name="group_topic[group_id]" value="{{ group_id }}">\n        {{/in_group}}\n        {{^in_group}}\n          <input type="hidden" name="topic_subject" value="{{ subject_id }}">\n        {{/in_group}}\n      {{/default_topic}}\n    </form>\n  </span>\n</div>\n<div class="study_aid_contents">\n  <div class="study_aid_contents_inner tex2jax_ignore" data-id="{{ topic_id }}"></div>\n  {{#deferred_fetch}}\n    {{^isLoaded}}\n      <div class="col-lg-12">\n        {{> shared/fetch_more }}\n      </div>\n    {{/isLoaded}}\n  {{/deferred_fetch}}\n</div>\n'),
Mustache.compilePartial("shared/topic_study_aids_list",'<div class="col-lg-12 topic_header {{#default_topic}}default_topic_header{{/default_topic}}">\n  <h2><span class="topic_name" data-id="{{ topic_id }}" data-name="{{ name }}">{{ name }}</span>\n    <span class="invisible delete_topic_btn">\n      <div class="sprite bg-icon-trash_ellipse btn_remove_topic"></div>\n    </span>\n  </h2>\n  <span class="edit_topic hidden">\n    <form  method="post" class="change_topic_name" data-remote="true" {{#action}}action={{action}}{{/action}}>\n      <input class="edit_topic_name"\n        type="text"\n        name="{{#default_topic}}{{#in_group}}group_topic[name]{{/in_group}}{{^in_group}}topic_name{{/in_group}}{{/default_topic}}{{^default_topic}}folder[name]{{/default_topic}}"\n        maxlength="60"\n        value="{{ name }}">\n      {{#default_topic}}\n        {{#in_group}}\n          <input type="hidden" name="group_topic[group_id]" value="{{ group_id }}">\n        {{/in_group}}\n        {{^in_group}}\n          <input type="hidden" name="topic_subject" value="{{ subject_id }}">\n        {{/in_group}}\n      {{/default_topic}}\n    </form>\n  </span>\n</div>\n<div class="study_aid_contents">\n  <div class="study_aid_contents_inner tex2jax_ignore" data-id="{{ topic_id }}"></div>\n  {{#deferred_fetch}}\n    {{^isLoaded}}\n      <div class="col-lg-12">\n        {{> shared/fetch_more }}\n      </div>\n    {{/isLoaded}}\n  {{/deferred_fetch}}\n</div>\n'),this.SMT["shared/topic_study_aids_list"]=function(e){return e||(e={}),SMTCache["shared/topic_study_aids_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["shared/push_notifications_dialog"]=Mustache.compile('<div class="push_notifications_dialog">\n  <a href="#" class="close" title="{{ close_text }}">\xd7</a>\n    <div class="motivation">\n      {{ motivation_text }}\n    </div>\n    <div class="actions">\n      <div class="btn btn-success enable" title="{{ enable_text }}">{{ enable_text }}</div>\n      <div class="btn btn-default decline" title="{{ decline_text }}">{{ decline_text }}</div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("shared/push_notifications_dialog",'<div class="push_notifications_dialog">\n  <a href="#" class="close" title="{{ close_text }}">\xd7</a>\n    <div class="motivation">\n      {{ motivation_text }}\n    </div>\n    <div class="actions">\n      <div class="btn btn-success enable" title="{{ enable_text }}">{{ enable_text }}</div>\n      <div class="btn btn-default decline" title="{{ decline_text }}">{{ decline_text }}</div>\n    </div>\n  </div>\n</div>\n'),this.SMT["shared/push_notifications_dialog"]=function(e){return e||(e={}),SMTCache["shared/push_notifications_dialog"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/caption"]=Mustache.compile("<span class='property_contents'>{{ caption }}</span>"),Mustache.compilePartial("slides/caption","<span class='property_contents'>{{ caption }}</span>"),this.SMT["slides/caption"]=function(e){return e||(e={}),SMTCache["slides/caption"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/caption_placeholder"]=Mustache.compile('<span class="caption_controls">\n    <a href="#" class="add_caption"><i class=\'icon-plus\'></i> {{ add_caption }}</a>\n</span>'),Mustache.compilePartial("slides/caption_placeholder",'<span class="caption_controls">\n    <a href="#" class="add_caption"><i class=\'icon-plus\'></i> {{ add_caption }}</a>\n</span>'),this.SMT["slides/caption_placeholder"]=function(e){return e||(e={}),SMTCache["slides/caption_placeholder"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/copy"]=Mustache.compile("<div class='property_contents'>\n\n    {{{ copy }}}\n\n</div>"),Mustache.compilePartial("slides/copy","<div class='property_contents'>\n\n    {{{ copy }}}\n\n</div>"),this.SMT["slides/copy"]=function(e){return e||(e={}),SMTCache["slides/copy"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/document"]=Mustache.compile('<span class=\'property_contents\' data-url=\'{{url}}\' data-media-id="{{media_id}}">\n\t<div class="slide_doc_outer">\n\t\t<div class="slide_doc_inner">\n\t\t\t<iframe class="slide_document" src="{{media_viewer_url}}?file={{ url }}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n\t\t</div>\n\t</div>\n</span>'),Mustache.compilePartial("slides/document",'<span class=\'property_contents\' data-url=\'{{url}}\' data-media-id="{{media_id}}">\n\t<div class="slide_doc_outer">\n\t\t<div class="slide_doc_inner">\n\t\t\t<iframe class="slide_document" src="{{media_viewer_url}}?file={{ url }}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n\t\t</div>\n\t</div>\n</span>'),this.SMT["slides/document"]=function(e){return e||(e={}),SMTCache["slides/document"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/embed"]=Mustache.compile("<span class='property_contents' data-url='{{url}}' data-media-id=\"{{media_id}}\">{{{code}}}</span>"),Mustache.compilePartial("slides/embed","<span class='property_contents' data-url='{{url}}' data-media-id=\"{{media_id}}\">{{{code}}}</span>"),this.SMT["slides/embed"]=function(e){return e||(e={}),SMTCache["slides/embed"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/image"]=Mustache.compile('<img src="{{ url }}" class="slide_image" data-media-id="{{media_id}}" />'),Mustache.compilePartial("slides/image",'<img src="{{ url }}" class="slide_image" data-media-id="{{media_id}}" />'),this.SMT["slides/image"]=function(e){return e||(e={}),SMTCache["slides/image"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/media"]=Mustache.compile('{{#media_1}}\n    <span class="slide_property_options">\n        {{{media_controls}}}\n        {{{media_1}}}\n    </span>\n    {{{caption_placeholder}}}\n{{/media_1}}\n\n{{^media_1}}\n    {{{media_placeholder}}}\n{{/media_1}}'),Mustache.compilePartial("slides/media",'{{#media_1}}\n    <span class="slide_property_options">\n        {{{media_controls}}}\n        {{{media_1}}}\n    </span>\n    {{{caption_placeholder}}}\n{{/media_1}}\n\n{{^media_1}}\n    {{{media_placeholder}}}\n{{/media_1}}'),this.SMT["slides/media"]=function(e){return e||(e={}),SMTCache["slides/media"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/media_2"]=Mustache.compile('{{#media_2}}\n    <span class="slide_property_options">\n        {{{media_controls}}}\n        {{{media_2}}}\n    </span>\n\t{{{caption_placeholder}}}\n{{/media_2}}\n\n{{^media_2}}\n    {{{media_placeholder}}}\n{{/media_2}}'),Mustache.compilePartial("slides/media_2",'{{#media_2}}\n    <span class="slide_property_options">\n        {{{media_controls}}}\n        {{{media_2}}}\n    </span>\n\t{{{caption_placeholder}}}\n{{/media_2}}\n\n{{^media_2}}\n    {{{media_placeholder}}}\n{{/media_2}}'),this.SMT["slides/media_2"]=function(e){return e||(e={}),SMTCache["slides/media_2"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/media_controls"]=Mustache.compile('<span class="media_controls">\n  {{{ resource_text_edit }}}\n\t<a href="#" class="btn btn-cancel btn-sm media_remove"><img src="/assets/icons/trash_slideresource.png" class="slide_action_icon"/></a>\n</span>'),Mustache.compilePartial("slides/media_controls",'<span class="media_controls">\n  {{{ resource_text_edit }}}\n\t<a href="#" class="btn btn-cancel btn-sm media_remove"><img src="/assets/icons/trash_slideresource.png" class="slide_action_icon"/></a>\n</span>'),this.SMT["slides/media_controls"]=function(e){return e||(e={}),SMTCache["slides/media_controls"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/media_placeholder"]=Mustache.compile('<div class="slide_placeholder media">\n\t<a href="#" class="btn insert_media_btn"><i class="icon-music"></i><i class="icon-youtube-play"></i> {{ insert_media }}</a>\n</div>'),Mustache.compilePartial("slides/media_placeholder",'<div class="slide_placeholder media">\n\t<a href="#" class="btn insert_media_btn"><i class="icon-music"></i><i class="icon-youtube-play"></i> {{ insert_media }}</a>\n</div>'),this.SMT["slides/media_placeholder"]=function(e){return e||(e={}),SMTCache["slides/media_placeholder"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/media_print_placeholder"]=Mustache.compile('<span class="print_ph" style="display: none">\n  {{#thumbnail}}\n    <div>\n      <img src=\'{{ thumbnail }}\'>\n      <br/>\n      <br/>\n    </div>\n  {{/thumbnail}}\n  {{^thumbnail}} <i class="icon-youtube-play"></i> {{/thumbnail}}\n\t{{ print_media }}\n\t<br/>\n\t{{ url }}\n</span>'),Mustache.compilePartial("slides/media_print_placeholder",'<span class="print_ph" style="display: none">\n  {{#thumbnail}}\n    <div>\n      <img src=\'{{ thumbnail }}\'>\n      <br/>\n      <br/>\n    </div>\n  {{/thumbnail}}\n  {{^thumbnail}} <i class="icon-youtube-play"></i> {{/thumbnail}}\n\t{{ print_media }}\n\t<br/>\n\t{{ url }}\n</span>'),this.SMT["slides/media_print_placeholder"]=function(e){return e||(e={}),SMTCache["slides/media_print_placeholder"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/next"]=Mustache.compile('<div class="next_container">\n    <a href="#" class="next">\n        <i class="icon-chevron-down" aria-hidden="true"></i>\n    </a>\n</div>'),Mustache.compilePartial("slides/next",'<div class="next_container">\n    <a href="#" class="next">\n        <i class="icon-chevron-down" aria-hidden="true"></i>\n    </a>\n</div>'),this.SMT["slides/next"]=function(e){return e||(e={}),SMTCache["slides/next"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/previous"]=Mustache.compile('<div class="previous_container">\n    <a href="#" class="previous">\n        <i class="icon-chevron-up" aria-hidden="true"></i>\n    </a>\n</div>'),Mustache.compilePartial("slides/previous",'<div class="previous_container">\n    <a href="#" class="previous">\n        <i class="icon-chevron-up" aria-hidden="true"></i>\n    </a>\n</div>'),this.SMT["slides/previous"]=function(e){return e||(e={}),SMTCache["slides/previous"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resource_move"]=Mustache.compile('<div class="resource_move">\n  <i class="icon-ellipsis-vertical"></i>\n</div>'),Mustache.compilePartial("slides/resource_move",'<div class="resource_move">\n  <i class="icon-ellipsis-vertical"></i>\n</div>'),this.SMT["slides/resource_move"]=function(e){return e||(e={}),SMTCache["slides/resource_move"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resource_placeholder"]=Mustache.compile('<a class="slide_placeholder resource insert_resource_btn" href="#">\n\t<i class="icon-plus"></i> {{ insert_resource }}\n</a>'),Mustache.compilePartial("slides/resource_placeholder",'<a class="slide_placeholder resource insert_resource_btn" href="#">\n\t<i class="icon-plus"></i> {{ insert_resource }}\n</a>'),this.SMT["slides/resource_placeholder"]=function(e){return e||(e={}),SMTCache["slides/resource_placeholder"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resource_text"]=Mustache.compile("{{{ text }}}"),Mustache.compilePartial("slides/resource_text","{{{ text }}}"),this.SMT["slides/resource_text"]=function(e){return e||(e={}),SMTCache["slides/resource_text"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resource_text_edit"]=Mustache.compile('<a href="#" class="btn btn-cancel btn-sm resource_text_edit"><img src="/assets/icons/pencil_slideresource.png" class="slide_action_icon"/></a>'),Mustache.compilePartial("slides/resource_text_edit",'<a href="#" class="btn btn-cancel btn-sm resource_text_edit"><img src="/assets/icons/pencil_slideresource.png" class="slide_action_icon"/></a>'),this.SMT["slides/resource_text_edit"]=function(e){return e||(e={}),SMTCache["slides/resource_text_edit"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resources"]=Mustache.compile('<span class="property_data" data-key="study_aids_1">\n\t{{#study_aids_1}}\n\t\t<span class="slide_property_options study_aid">\n        {{{.}}}\n        {{{media_controls}}}\n        {{{resource_move}}}\n\t    </span>\n\t{{/study_aids_1}}\n  {{#show_add_study_aids_1}}\n\t  {{{ resource_placeholder }}}\n  {{/show_add_study_aids_1}}\n</span>'),Mustache.compilePartial("slides/resources",'<span class="property_data" data-key="study_aids_1">\n\t{{#study_aids_1}}\n\t\t<span class="slide_property_options study_aid">\n        {{{.}}}\n        {{{media_controls}}}\n        {{{resource_move}}}\n\t    </span>\n\t{{/study_aids_1}}\n  {{#show_add_study_aids_1}}\n\t  {{{ resource_placeholder }}}\n  {{/show_add_study_aids_1}}\n</span>'),this.SMT["slides/resources"]=function(e){return e||(e={}),SMTCache["slides/resources"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/resources_2"]=Mustache.compile('<span class="property_data" data-key="study_aids_2">\n\t{{#study_aids_2}}\n\t\t<span class="slide_property_options study_aid">\n        {{{.}}}\n        {{{media_controls}}}\n        {{{resource_move}}}\n\t    </span>\n\t{{/study_aids_2}}\n  {{#show_add_study_aids_2}}\n\t  {{{ resource_placeholder }}}\n  {{/show_add_study_aids_2}}\n</span>'),Mustache.compilePartial("slides/resources_2",'<span class="property_data" data-key="study_aids_2">\n\t{{#study_aids_2}}\n\t\t<span class="slide_property_options study_aid">\n        {{{.}}}\n        {{{media_controls}}}\n        {{{resource_move}}}\n\t    </span>\n\t{{/study_aids_2}}\n  {{#show_add_study_aids_2}}\n\t  {{{ resource_placeholder }}}\n  {{/show_add_study_aids_2}}\n</span>'),this.SMT["slides/resources_2"]=function(e){return e||(e={}),SMTCache["slides/resources_2"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/study_aid"]=Mustache.compile('<a class="resource popup_resource {{#private}}private_embed{{/private}}" {{#link}}data-id="{{id}}" href="{{link}}"{{/link}}>\n    {{#private}}\n        <i class="icon-lock"></i>\n        <span class="title">{{ text }}</span>\n    {{/private}}\n    {{^private}}\n        <span class="title property" data-key="study_aid_text" data-type="study_aids">\n            <span class="property_contents">{{ text }}</span>\n        </span>\n    {{/private}}\n    {{#type_by}}\n        <span class="meta">{{{ type_by }}}</span>\n    {{/type_by}}\n</a>'),Mustache.compilePartial("slides/study_aid",'<a class="resource popup_resource {{#private}}private_embed{{/private}}" {{#link}}data-id="{{id}}" href="{{link}}"{{/link}}>\n    {{#private}}\n        <i class="icon-lock"></i>\n        <span class="title">{{ text }}</span>\n    {{/private}}\n    {{^private}}\n        <span class="title property" data-key="study_aid_text" data-type="study_aids">\n            <span class="property_contents">{{ text }}</span>\n        </span>\n    {{/private}}\n    {{#type_by}}\n        <span class="meta">{{{ type_by }}}</span>\n    {{/type_by}}\n</a>'),this.SMT["slides/study_aid"]=function(e){return e||(e={}),SMTCache["slides/study_aid"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_c"]=Mustache.compile('<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 property slide_col single_col" data-key=\'copy_1\' data-type=\'copy\'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),Mustache.compilePartial("slides/t_c",'<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 property slide_col single_col" data-key=\'copy_1\' data-type=\'copy\'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),this.SMT["slides/t_c"]=function(e){return e||(e={}),SMTCache["slides/t_c"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_c_c"]=Mustache.compile("<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_2' data-type='copy'>\n            {{{copy_2}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),Mustache.compilePartial("slides/t_c_c","<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_2' data-type='copy'>\n            {{{copy_2}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),this.SMT["slides/t_c_c"]=function(e){return e||(e={}),SMTCache["slides/t_c_c"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_c_e"]=Mustache.compile("<div class=\"slide\">\n    {{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n\t\t<div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),Mustache.compilePartial("slides/t_c_e","<div class=\"slide\">\n    {{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n\t\t<div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),this.SMT["slides/t_c_e"]=function(e){return e||(e={}),SMTCache["slides/t_c_e"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_c_r"]=Mustache.compile("<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='study_aids_1' data-type='study_aids'>\n        \t{{#study_aids_1}}\n        \t\t{{{.}}}\n        \t{{/study_aids_1}}\n        </div>\n    </div>\n    {{{ next }}} \n</div>"),Mustache.compilePartial("slides/t_c_r","<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='study_aids_1' data-type='study_aids'>\n        \t{{#study_aids_1}}\n        \t\t{{{.}}}\n        \t{{/study_aids_1}}\n        </div>\n    </div>\n    {{{ next }}} \n</div>"),this.SMT["slides/t_c_r"]=function(e){return e||(e={}),SMTCache["slides/t_c_r"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_e"]=Mustache.compile('<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 slide_col single_col">\n\t\t\t<div class="col-12 slide_col">\n\t        \t<span class="property" data-key=\'media_1\' data-type=\'media\'>\n\t        \t\t{{{media_1}}}\n\t        \t</span>\n\t        \t<span class="property" data-key=\'media_1_caption\' data-type=\'caption\'>\n\t        \t\t{{{media_1_caption}}}\n\t        \t</span>\n\t        </div>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),Mustache.compilePartial("slides/t_e",'<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 slide_col single_col">\n\t\t\t<div class="col-12 slide_col">\n\t        \t<span class="property" data-key=\'media_1\' data-type=\'media\'>\n\t        \t\t{{{media_1}}}\n\t        \t</span>\n\t        \t<span class="property" data-key=\'media_1_caption\' data-type=\'caption\'>\n\t        \t\t{{{media_1_caption}}}\n\t        \t</span>\n\t        </div>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),this.SMT["slides/t_e"]=function(e){return e||(e={}),SMTCache["slides/t_e"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_e_c"]=Mustache.compile("<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),Mustache.compilePartial("slides/t_e_c","<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='copy_1' data-type='copy'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),this.SMT["slides/t_e_c"]=function(e){return e||(e={}),SMTCache["slides/t_e_c"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_e_e"]=Mustache.compile("<div class=\"slide\">\n    {{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_2' data-type='media'>\n        \t\t{{{media_2}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_2_caption' data-type='caption'>\n        \t\t{{{media_2_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),Mustache.compilePartial("slides/t_e_e","<div class=\"slide\">\n    {{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_2' data-type='media'>\n        \t\t{{{media_2}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_2_caption' data-type='caption'>\n        \t\t{{{media_2_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),this.SMT["slides/t_e_e"]=function(e){return e||(e={}),SMTCache["slides/t_e_e"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_e_r"]=Mustache.compile("<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='study_aids_1' data-type='study_aids'>\n        \t{{#study_aids_1}}\n        \t\t{{{.}}}\n        \t{{/study_aids_1}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),Mustache.compilePartial("slides/t_e_r","<div class=\"slide\">\n\t{{{ previous }}}\n    <div class=\"row\">\n        <div class=\"col-12 property slide_col slide_title\" data-key='title' data-type='title'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-12 col-md-6 slide_col\">\n        \t<span class=\"property\" data-key='media_1' data-type='media'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class=\"property\" data-key='media_1_caption' data-type='caption'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n        <div class=\"col-12 col-md-6 property slide_col\" data-key='study_aids_1' data-type='study_aids'>\n        \t{{#study_aids_1}}\n        \t\t{{{.}}}\n        \t{{/study_aids_1}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>"),this.SMT["slides/t_e_r"]=function(e){return e||(e={}),SMTCache["slides/t_e_r"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_r_c"]=Mustache.compile('<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 property slide_col" data-key=\'copy_1\' data-type=\'copy\'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),Mustache.compilePartial("slides/t_r_c",'<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 property slide_col" data-key=\'copy_1\' data-type=\'copy\'>\n            {{{copy_1}}}\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),this.SMT["slides/t_r_c"]=function(e){return e||(e={}),SMTCache["slides/t_r_c"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/t_r_e"]=Mustache.compile('<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 slide_col">\n        \t<span class="property" data-key=\'media_1\' data-type=\'media\'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class="property" data-key=\'media_1_caption\' data-type=\'caption\'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),Mustache.compilePartial("slides/t_r_e",'<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 slide_col">\n        \t<span class="property" data-key=\'media_1\' data-type=\'media\'>\n        \t\t{{{media_1}}}\n        \t</span>\n        \t<span class="property" data-key=\'media_1_caption\' data-type=\'caption\'>\n        \t\t{{{media_1_caption}}}\n        \t</span>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),this.SMT["slides/t_r_e"]=function(e){return e||(e={}),SMTCache["slides/t_r_e"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["slides/t_r_r"]=Mustache.compile('<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_2\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_2}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_2}}\n            </div>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),Mustache.compilePartial("slides/t_r_r",'<div class="slide">\n\t{{{ previous }}}\n    <div class="row">\n        <div class="col-12 property slide_col slide_title" data-key=\'title\' data-type=\'title\'>\n            {{{title}}}\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_1\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_1}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_1}}\n            </div>\n        </div>\n        <div class="col-12 col-md-6 slide_col">\n            <div class="property" data-key=\'study_aids_2\' data-type=\'study_aids\'>\n\t        \t{{#study_aids_2}}\n\t        \t\t{{{.}}}\n\t        \t{{/study_aids_2}}\n            </div>\n        </div>\n    </div>\n    {{{ next }}}\n</div>'),this.SMT["slides/t_r_r"]=function(e){return e||(e={}),SMTCache["slides/t_r_r"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/title"]=Mustache.compile('<h1 class="{{align}}">\n    <span class="property_contents">{{ title }}</span>\n</h1>\n<span class="title_controls">\n    <a href="#" class="add_title"><i class=\'icon-plus\'></i> {{ add_title }}</a>\n</span>'),Mustache.compilePartial("slides/title",'<h1 class="{{align}}">\n    <span class="property_contents">{{ title }}</span>\n</h1>\n<span class="title_controls">\n    <a href="#" class="add_title"><i class=\'icon-plus\'></i> {{ add_title }}</a>\n</span>'),this.SMT["slides/title"]=function(e){return e||(e={}),SMTCache["slides/title"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["slides/video"]=Mustache.compile("<video id='video-{{ uid }}' class='video-js' controls='' poster='{{ thumb_url }}' preload=\"auto\" controlslist=\"nodownload\">\n  <source src = '{{ url }}' type = '{{ format }}'/>\n</video>\n"),Mustache.compilePartial("slides/video","<video id='video-{{ uid }}' class='video-js' controls='' poster='{{ thumb_url }}' preload=\"auto\" controlslist=\"nodownload\">\n  <source src = '{{ url }}' type = '{{ format }}'/>\n</video>\n"),this.SMT["slides/video"]=function(e){return e||(e={}),SMTCache["slides/video"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/actions_bar"]=Mustache.compile('<span class="article_title">{{ title }}</span>\n<div class="article_tile_small create_tile">\n  <a href="/slide_sets" data-method="post" data-remote="true" rel="nofollow"  title="{{ slide_set_title }}" id="slides_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_slide_set"></div>\n  </a>\n\n  <a href="/flash_card_decks" data-method="post" data-remote="true" rel="nofollow"  title="{{ flash_card_deck_title }}" id="flash_cards_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_flash_card_deck"></div>\n  </a>\n\n  <a href="/mind_maps" data-method="post" data-remote="true" rel="nofollow"  title="{{ mind_map_title }}" id="mind_map_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_mind_map"></div>\n  </a>\n\n  <a href="/notes" data-method="post" data-remote="true" rel="nofollow"  title="{{ note_title }}" id="note_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_note"></div>\n  </a>\n\n  <a href="/quizzes" data-method="post" data-remote="true" rel="nofollow"  title="{{ quiz_title }}" id="quiz_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_quiz"></div>\n  </a>\n\n  <a href="/flowcharts" data-method="post" data-remote="true" rel="nofollow"  title="{{ flowchart_title }}" id="flowchart_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_flowchart"></div>\n  </a>\n</div>\n'),Mustache.compilePartial("status_updates/actions_bar",'<span class="article_title">{{ title }}</span>\n<div class="article_tile_small create_tile">\n  <a href="/slide_sets" data-method="post" data-remote="true" rel="nofollow"  title="{{ slide_set_title }}" id="slides_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_slide_set"></div>\n  </a>\n\n  <a href="/flash_card_decks" data-method="post" data-remote="true" rel="nofollow"  title="{{ flash_card_deck_title }}" id="flash_cards_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_flash_card_deck"></div>\n  </a>\n\n  <a href="/mind_maps" data-method="post" data-remote="true" rel="nofollow"  title="{{ mind_map_title }}" id="mind_map_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_mind_map"></div>\n  </a>\n\n  <a href="/notes" data-method="post" data-remote="true" rel="nofollow"  title="{{ note_title }}" id="note_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_note"></div>\n  </a>\n\n  <a href="/quizzes" data-method="post" data-remote="true" rel="nofollow"  title="{{ quiz_title }}" id="quiz_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_quiz"></div>\n  </a>\n\n  <a href="/flowcharts" data-method="post" data-remote="true" rel="nofollow"  title="{{ flowchart_title }}" id="flowchart_link">\n  \t<div class="tile_sprite bg-tile-small-icon_grid_resource_flowchart"></div>\n  </a>\n</div>\n'),this.SMT["status_updates/actions_bar"]=function(e){return e||(e={}),SMTCache["status_updates/actions_bar"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_attempt_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n{{#study_aid_attempts}}\n\t<div class="score">\n\t  {{^one_user}}<span class="agg_avatar">{{{ user_icon }}}</span>{{/one_user}}\n\t  <div class="score_pie">\n\t    <canvas width="50" height="50" ></canvas>\n\t  </div>\n\t  <div class="score_display">{{ percentage_score }}</div>\n\t  <div class="score_value" style=\'display: none\'>{{ score }}</div>\n\t</div>\n{{/study_aid_attempts}}\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}\n'),Mustache.compilePartial("status_updates/aggregated_attempt_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n{{#study_aid_attempts}}\n\t<div class="score">\n\t  {{^one_user}}<span class="agg_avatar">{{{ user_icon }}}</span>{{/one_user}}\n\t  <div class="score_pie">\n\t    <canvas width="50" height="50" ></canvas>\n\t  </div>\n\t  <div class="score_display">{{ percentage_score }}</div>\n\t  <div class="score_value" style=\'display: none\'>{{ score }}</div>\n\t</div>\n{{/study_aid_attempts}}\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}\n'),this.SMT["status_updates/aggregated_attempt_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_attempt_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_comment_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n\n'),Mustache.compilePartial("status_updates/aggregated_comment_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n\n'),this.SMT["status_updates/aggregated_comment_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_comment_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_group_comment_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n'),Mustache.compilePartial("status_updates/aggregated_group_comment_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n'),this.SMT["status_updates/aggregated_group_comment_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_group_comment_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_group_discussion_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n'),Mustache.compilePartial("status_updates/aggregated_group_discussion_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n'),this.SMT["status_updates/aggregated_group_discussion_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_group_discussion_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_group_share_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n\n<ul>\n\t{{#study_aids}}\n\t\t<li class="attached_small study_aid">\n\t\t\t{{> status_updates/attached_resource_small }}\n\t\t</li>\n\t{{/study_aids}}\n</ul>\n\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}'),Mustache.compilePartial("status_updates/aggregated_group_share_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n\n<ul>\n\t{{#study_aids}}\n\t\t<li class="attached_small study_aid">\n\t\t\t{{> status_updates/attached_resource_small }}\n\t\t</li>\n\t{{/study_aids}}\n</ul>\n\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}'),this.SMT["status_updates/aggregated_group_share_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_group_share_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_published_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n\n<ul>\n\t{{#study_aids}}\n\t\t<li class="attached_small study_aid">\n\t\t\t{{> status_updates/attached_resource_small }}\n\t\t</li>\n\t{{/study_aids}}\n</ul>\n\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}\n'),Mustache.compilePartial("status_updates/aggregated_published_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n\n<ul>\n\t{{#study_aids}}\n\t\t<li class="attached_small study_aid">\n\t\t\t{{> status_updates/attached_resource_small }}\n\t\t</li>\n\t{{/study_aids}}\n</ul>\n\n{{#plus_text}}\n  <div class="plus_more">{{plus_text}}</div>\n{{/plus_text}}\n'),this.SMT["status_updates/aggregated_published_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_published_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/aggregated_status_update"]=Mustache.compile("<ul>\n  {{#status_updates_presenters}}\n    <li>{{ message }} - {{ id }}</li>\n  {{/status_updates_presenters}}\n</ul>\n"),Mustache.compilePartial("status_updates/aggregated_status_update","<ul>\n  {{#status_updates_presenters}}\n    <li>{{ message }} - {{ id }}</li>\n  {{/status_updates_presenters}}\n</ul>\n"),this.SMT["status_updates/aggregated_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/aggregated_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/attached_image"]=Mustache.compile('<div class="attached_image_container">\n  <span class="media_controls">\n    <a href="#" class="btn btn-cancel btn-sm remove_image" title="{{remove_image_text}}">\n      <div class="sprite bg-icon-trash"></div>\n    </a>\n  </span>\n\n  <img src="{{image_url}}" class="attached_img">\n\n  <input class="media_id" name="{{model_name}}[media_id]" type="hidden" value="{{media_id}}">\n</div>\n'),Mustache.compilePartial("status_updates/attached_image",'<div class="attached_image_container">\n  <span class="media_controls">\n    <a href="#" class="btn btn-cancel btn-sm remove_image" title="{{remove_image_text}}">\n      <div class="sprite bg-icon-trash"></div>\n    </a>\n  </span>\n\n  <img src="{{image_url}}" class="attached_img">\n\n  <input class="media_id" name="{{model_name}}[media_id]" type="hidden" value="{{media_id}}">\n</div>\n'),this.SMT["status_updates/attached_image"]=function(e){return e||(e={}),SMTCache["status_updates/attached_image"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/attached_resource"]=Mustache.compile('<{{#editing}}div{{/editing}}{{^editing}}{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}} href="{{url}}" data-id="{{id}}"{{/editing}} class="attached_resource attach_preview{{#unreadable}} unreadable{{/unreadable}}">\n\n\t<span class="link_images {{study_aid_type}}"></span>\n\n\t<span class="link_content">\n\n\t\t{{#editing}}\n\t\t\t<input type="hidden" name="status_update[attached_resource_id]" value="{{id}}">\n\t\t\t<span class="preview_remove">\xd7</span>\n\t\t{{/editing}}\n\n\t\t<div class="link_title">\n\t\t\t{{#editing}}<{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}} href="{{url}}" target="_blank">{{title}}</a>{{/editing}}\n\t\t\t{{^editing}}{{title}}{{/editing}}\n\t\t</div>\n\n\t\t{{^unreadable}}\n\t\t\t{{#short_description}}\n\t\t\t<div class="description">\n\t\t\t\t{{ short_description }}\n\t\t\t</div>\n\t\t\t{{/short_description}}\n\n\t\t\t<div class="author">\n\t\t\t\t{{ type }} {{ created_by_text }} <span class="author_name">{{ author_name }}</span>\n\t\t\t</div>\n\t\t{{/unreadable}}\n\n\t</span>\n</{{#editing}}div{{/editing}}{{^editing}}{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}}{{/editing}}>\n'),Mustache.compilePartial("status_updates/attached_resource",'<{{#editing}}div{{/editing}}{{^editing}}{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}} href="{{url}}" data-id="{{id}}"{{/editing}} class="attached_resource attach_preview{{#unreadable}} unreadable{{/unreadable}}">\n\n\t<span class="link_images {{study_aid_type}}"></span>\n\n\t<span class="link_content">\n\n\t\t{{#editing}}\n\t\t\t<input type="hidden" name="status_update[attached_resource_id]" value="{{id}}">\n\t\t\t<span class="preview_remove">\xd7</span>\n\t\t{{/editing}}\n\n\t\t<div class="link_title">\n\t\t\t{{#editing}}<{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}} href="{{url}}" target="_blank">{{title}}</a>{{/editing}}\n\t\t\t{{^editing}}{{title}}{{/editing}}\n\t\t</div>\n\n\t\t{{^unreadable}}\n\t\t\t{{#short_description}}\n\t\t\t<div class="description">\n\t\t\t\t{{ short_description }}\n\t\t\t</div>\n\t\t\t{{/short_description}}\n\n\t\t\t<div class="author">\n\t\t\t\t{{ type }} {{ created_by_text }} <span class="author_name">{{ author_name }}</span>\n\t\t\t</div>\n\t\t{{/unreadable}}\n\n\t</span>\n</{{#editing}}div{{/editing}}{{^editing}}{{#unreadable}}div{{/unreadable}}{{^unreadable}}a{{/unreadable}}{{/editing}}>\n'),this.SMT["status_updates/attached_resource"]=function(e){return e||(e={}),SMTCache["status_updates/attached_resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/attached_resource_small"]=Mustache.compile('<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-view" href="{{url}}">\n    {{view_text}}\n  </a>\n\n  <span class="link_images {{study_aid_type}}"></span>\n\n  <div class="suggested_title">\n    {{{study_aid_link}}}\n  </div>\n</div>\n'),Mustache.compilePartial("status_updates/attached_resource_small",'<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-view" href="{{url}}">\n    {{view_text}}\n  </a>\n\n  <span class="link_images {{study_aid_type}}"></span>\n\n  <div class="suggested_title">\n    {{{study_aid_link}}}\n  </div>\n</div>\n'),this.SMT["status_updates/attached_resource_small"]=function(e){return e||(e={}),SMTCache["status_updates/attached_resource_small"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/attempt_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n<div class="score">\n  <div class="score_pie">\n    <canvas width="70" height="70" ></canvas>\n  </div>\n  <div class="score_display">{{ percentage_score }}</div>\n  <div class="score_value" style=\'display: none\'>{{ score }}</div>\n</div>\n'),Mustache.compilePartial("status_updates/attempt_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n<div class="score">\n  <div class="score_pie">\n    <canvas width="70" height="70" ></canvas>\n  </div>\n  <div class="score_display">{{ percentage_score }}</div>\n  <div class="score_value" style=\'display: none\'>{{ score }}</div>\n</div>\n'),this.SMT["status_updates/attempt_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/attempt_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/base_discussion_status_update"]=Mustache.compile('<div class="message">\n  <div class="title">\n    {{^single_status}}\n      <a href="{{{ link }}}" title="{{ title }}" data-id="{{id}}">{{ title }}</a>\n    {{/single_status}}\n    {{#single_status}}\n      {{ title }}\n    {{/single_status}}\n  </div>\n  <div class="body_preview">{{{ escaped_body }}}</div>\n\n  {{#media}}\n    <div class="attached_image_container">\n      <img src="{{ image_url }}" class="attached_img popup_image" data-image-url="{{ image_url }}">\n    </div>\n  {{/media}}\n\n  {{#link_preview}}\n    {{> link_preview/preview }}\n  {{/link_preview}}\n\n  {{#poll}}\n    <div class="preview_poll poll_view {{#poll_closed}}closed{{/poll_closed}}">\n        <div class="poll_intro">\n          <span class="poll_icon">\n            <img src="/assets/attach_icon_poll_64.png">\n          </span>\n          <span class="poll_preview_text">\n            <span class="poll_intro_title">{{ poll_preview_title }}</span>\n            <span class="poll_description">{{ poll_description }}</span>\n          </span>\n        </div>\n    </div>\n  {{/poll}}\n\n  {{#attached_resource}}\n    {{> status_updates/attached_resource }}\n  {{/attached_resource}}\n\n</div>\n'),Mustache.compilePartial("status_updates/base_discussion_status_update",'<div class="message">\n  <div class="title">\n    {{^single_status}}\n      <a href="{{{ link }}}" title="{{ title }}" data-id="{{id}}">{{ title }}</a>\n    {{/single_status}}\n    {{#single_status}}\n      {{ title }}\n    {{/single_status}}\n  </div>\n  <div class="body_preview">{{{ escaped_body }}}</div>\n\n  {{#media}}\n    <div class="attached_image_container">\n      <img src="{{ image_url }}" class="attached_img popup_image" data-image-url="{{ image_url }}">\n    </div>\n  {{/media}}\n\n  {{#link_preview}}\n    {{> link_preview/preview }}\n  {{/link_preview}}\n\n  {{#poll}}\n    <div class="preview_poll poll_view {{#poll_closed}}closed{{/poll_closed}}">\n        <div class="poll_intro">\n          <span class="poll_icon">\n            <img src="/assets/attach_icon_poll_64.png">\n          </span>\n          <span class="poll_preview_text">\n            <span class="poll_intro_title">{{ poll_preview_title }}</span>\n            <span class="poll_description">{{ poll_description }}</span>\n          </span>\n        </div>\n    </div>\n  {{/poll}}\n\n  {{#attached_resource}}\n    {{> status_updates/attached_resource }}\n  {{/attached_resource}}\n\n</div>\n'),this.SMT["status_updates/base_discussion_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/base_discussion_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/comment_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n<div class="comment_preview">\n  <blockquote>{{ comment }}</blockquote>\n</div>\n{{{ comment_link }}}\n'),Mustache.compilePartial("status_updates/comment_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n<div class="comment_preview">\n  <blockquote>{{ comment }}</blockquote>\n</div>\n{{{ comment_link }}}\n'),this.SMT["status_updates/comment_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/comment_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/confirm_feature_modal"]=Mustache.compile('<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning" id="confirm_feature_btn">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),Mustache.compilePartial("status_updates/confirm_feature_modal",'<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning" id="confirm_feature_btn">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),this.SMT["status_updates/confirm_feature_modal"]=function(e){return e||(e={}),SMTCache["status_updates/confirm_feature_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/create_status_update"]=Mustache.compile('<form accept-charset="UTF-8" action="/en/status_updates{{#id}}/{{id}}{{/id}}" class="new_status_update" method="post" data-remote="true">\n\n  {{#id}}<input name="_method" type="hidden" value="put">{{/id}}\n\n  <div class="su_title">\n  \t<input id="status_update_title" name="status_update[title]" placeholder="{{ placeholder_title }}" maxlength="100" size="30" type="text" {{#title}}value="{{title}}"{{/title}}>\n  </div>\n\n  <div class="create_main">\n\n    <div class="su_body">\n    \t<textarea cols="40" id="status_update_body" name="status_update[body]" placeholder="{{ placeholder_body }}" rows="20">{{body}}</textarea>\n    </div>\n\n    <div class="su_images">\n      <input class="image_input_field hidden" type="file" accept="image/gif, image/jpeg, image/png" >\n    </div>\n\n    <div class="link_previews"></div>\n\n    <div class="su_polls"></div>\n\n    <div class="su_attached_resources"></div>\n\n    <div class="actions_inline">\n      <div class="su_attach_icons">\n        <a class="attach_image" title="{{label_attach_images}}"></a>\n        <a class="attach_poll {{#poll}}active{{/poll}}" title="{{label_add_poll}}"></a>\n        <a class="attach_resource {{#attached_resource}}active{{/attached_resource}}" title="{{label_attach_resource}}"></a>\n      </div>\n\n      <img src="/assets/loading_small.gif" style="display:none" class="loading_icon">\n    \t{{#id}}\n    \t\t<button class="btn btn-cancel" name="cancel">{{ label_cancel }}</button>\n    \t{{/id}}\n    \t<input class="btn btn-success" name="commit" type="submit" value="{{ label_submit }}">\n    </div>\n\n  </div>\n\n</form>\n'),Mustache.compilePartial("status_updates/create_status_update",'<form accept-charset="UTF-8" action="/en/status_updates{{#id}}/{{id}}{{/id}}" class="new_status_update" method="post" data-remote="true">\n\n  {{#id}}<input name="_method" type="hidden" value="put">{{/id}}\n\n  <div class="su_title">\n  \t<input id="status_update_title" name="status_update[title]" placeholder="{{ placeholder_title }}" maxlength="100" size="30" type="text" {{#title}}value="{{title}}"{{/title}}>\n  </div>\n\n  <div class="create_main">\n\n    <div class="su_body">\n    \t<textarea cols="40" id="status_update_body" name="status_update[body]" placeholder="{{ placeholder_body }}" rows="20">{{body}}</textarea>\n    </div>\n\n    <div class="su_images">\n      <input class="image_input_field hidden" type="file" accept="image/gif, image/jpeg, image/png" >\n    </div>\n\n    <div class="link_previews"></div>\n\n    <div class="su_polls"></div>\n\n    <div class="su_attached_resources"></div>\n\n    <div class="actions_inline">\n      <div class="su_attach_icons">\n        <a class="attach_image" title="{{label_attach_images}}"></a>\n        <a class="attach_poll {{#poll}}active{{/poll}}" title="{{label_add_poll}}"></a>\n        <a class="attach_resource {{#attached_resource}}active{{/attached_resource}}" title="{{label_attach_resource}}"></a>\n      </div>\n\n      <img src="/assets/loading_small.gif" style="display:none" class="loading_icon">\n    \t{{#id}}\n    \t\t<button class="btn btn-cancel" name="cancel">{{ label_cancel }}</button>\n    \t{{/id}}\n    \t<input class="btn btn-success" name="commit" type="submit" value="{{ label_submit }}">\n    </div>\n\n  </div>\n\n</form>\n'),this.SMT["status_updates/create_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/create_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/group_comment_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}{{#display_comment}}:{{/display_comment}}\n</div>\n{{#display_comment}}\n<div class="comment_preview">\n  <blockquote>{{ comment }}</blockquote>\n</div>\n{{/display_comment}}\n{{{ comment_link }}}'),Mustache.compilePartial("status_updates/group_comment_status_update",'<div class="message">\n  {{{ message }}}{{#display_comment}}:{{/display_comment}}\n</div>\n{{#display_comment}}\n<div class="comment_preview">\n  <blockquote>{{ comment }}</blockquote>\n</div>\n{{/display_comment}}\n{{{ comment_link }}}'),this.SMT["status_updates/group_comment_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/group_comment_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/group_course_assignment_status_update"]=Mustache.compile('<div class="message">{{ message }}</div>\n\n{{>courses/course_tile}}\n'),Mustache.compilePartial("status_updates/group_course_assignment_status_update",'<div class="message">{{ message }}</div>\n\n{{>courses/course_tile}}\n'),this.SMT["status_updates/group_course_assignment_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/group_course_assignment_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/group_discussion_status_update"]=Mustache.compile("{{> status_updates/base_discussion_status_update }}"),Mustache.compilePartial("status_updates/group_discussion_status_update","{{> status_updates/base_discussion_status_update }}"),this.SMT["status_updates/group_discussion_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/group_discussion_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/group_share_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n{{#resource}}\n\t{{> status_updates/attached_resource }}\n{{/resource}}'),Mustache.compilePartial("status_updates/group_share_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n{{#resource}}\n\t{{> status_updates/attached_resource }}\n{{/resource}}'),this.SMT["status_updates/group_share_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/group_share_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/hide_status_update_modal"]=Mustache.compile('<div class="modal small_modal fade in" class="hide_status_update">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning" id="confirm_hide">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),Mustache.compilePartial("status_updates/hide_status_update_modal",'<div class="modal small_modal fade in" class="hide_status_update">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <div class="modal-body">\n          {{{ prompt }}}\n        </div>\n        <div class="modal-footer">\n          <div class="btn btn-warning" id="confirm_hide">\n            {{ confirm }}\n          </div>\n          <div class="btn btn-cancel" id="cancel_button">\n            {{ cancel }}\n          </div>\n        </div>\n      </div>\n    </div>\n</div>'),this.SMT["status_updates/hide_status_update_modal"]=function(e){return e||(e={}),SMTCache["status_updates/hide_status_update_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/institution_discussion_status_update"]=Mustache.compile("{{> status_updates/base_discussion_status_update }}"),Mustache.compilePartial("status_updates/institution_discussion_status_update","{{> status_updates/base_discussion_status_update }}"),this.SMT["status_updates/institution_discussion_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/institution_discussion_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/no_filter_results"]=Mustache.compile('<div id="user_joined_area">\n  <div id="user_join_date">\n    {{ joined_site_date }}\n  </div>\n  <hr>\n</div>\n'),Mustache.compilePartial("status_updates/no_filter_results",'<div id="user_joined_area">\n  <div id="user_join_date">\n    {{ joined_site_date }}\n  </div>\n  <hr>\n</div>\n'),this.SMT["status_updates/no_filter_results"]=function(e){return e||(e={}),SMTCache["status_updates/no_filter_results"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/published_status_update"]=Mustache.compile('<div class="message">\n  {{{ message }}}\n</div>\n{{#resource}}\n\t{{> status_updates/attached_resource }}\n{{/resource}}\n{{#is_copy}}\n  <div class="copy_link">{{{ copy_message }}}</div>\n{{/is_copy}}\n'),Mustache.compilePartial("status_updates/published_status_update",'<div class="message">\n  {{{ message }}}\n</div>\n{{#resource}}\n\t{{> status_updates/attached_resource }}\n{{/resource}}\n{{#is_copy}}\n  <div class="copy_link">{{{ copy_message }}}</div>\n{{/is_copy}}\n'),this.SMT["status_updates/published_status_update"]=function(e){return e||(e={}),SMTCache["status_updates/published_status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["status_updates/report_actions_modal"]=Mustache.compile('<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <form method="post" accept-charset="UTF-8" action="{{form_path}}" data-remote="true">\n\t        <input type="hidden" name="_method" value="put">\n\t        <div class="modal-body">\n\t          {{ prompt }}\n\n\t\t\t  <div class="option dismiss">\n\t          \t<input type="checkbox" name="report_actions[]" id="report_actions_dismiss" value="dismiss">\n\t          \t<label for="report_actions_dismiss">{{report_dismiss}}</label>\n\t          </div>\n\n\t\t\t  <div class="option">\n\t\t\t  \t{{#deleted}}<div class="info_needed disabled" title="{{deleted_content_warning}}">{{/deleted}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_delete" value="delete" {{#deleted}}disabled="disabled"{{/deleted}}>\n\t          \t  <label for="report_actions_delete">{{report_delete}}</label>\n\t          \t{{#deleted}}</div>{{/deleted}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t\t\t  \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_remove_user" value="remove_user" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_remove_user">{{report_remove_user}}</label>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t          \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_remove_user_content" value="remove_user_content" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_remove_user_content">{{report_remove_user_content}}</label>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t          \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_forward" value="forward" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_forward">{{report_forward}}</label>\n\t          \t  <div id="report_content_reason" style="display: none">\n\t          \t  \t<label for="report_reason_text">{{reason_prompt}}</label>\n\t          \t  \t<textarea name="reason" id="report_reason_text" maxlength="250"></textarea>\n\t          \t  </div>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\t        </div>\n\t        <div class="modal-footer">\n\t          <input type="submit" class="btn btn-info" id="confirm_report_action" value="{{confirm}}" disabled="disabled">\n\t          <div class="btn btn-cancel" id="cancel_button">\n\t            {{ cancel }}\n\t          </div>\n\t        </div>\n        </form>\n      </div>\n    </div>\n</div>'),Mustache.compilePartial("status_updates/report_actions_modal",'<div class="modal small_modal fade in">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2 class="modal-title">\n            {{ title }}\n          </h2>\n        </div>\n        <form method="post" accept-charset="UTF-8" action="{{form_path}}" data-remote="true">\n\t        <input type="hidden" name="_method" value="put">\n\t        <div class="modal-body">\n\t          {{ prompt }}\n\n\t\t\t  <div class="option dismiss">\n\t          \t<input type="checkbox" name="report_actions[]" id="report_actions_dismiss" value="dismiss">\n\t          \t<label for="report_actions_dismiss">{{report_dismiss}}</label>\n\t          </div>\n\n\t\t\t  <div class="option">\n\t\t\t  \t{{#deleted}}<div class="info_needed disabled" title="{{deleted_content_warning}}">{{/deleted}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_delete" value="delete" {{#deleted}}disabled="disabled"{{/deleted}}>\n\t          \t  <label for="report_actions_delete">{{report_delete}}</label>\n\t          \t{{#deleted}}</div>{{/deleted}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t\t\t  \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_remove_user" value="remove_user" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_remove_user">{{report_remove_user}}</label>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t          \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_remove_user_content" value="remove_user_content" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_remove_user_content">{{report_remove_user_content}}</label>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\n\t\t\t  <div class="option">\n\t          \t{{#own_content}}<div class="info_needed disabled" title="{{own_content_warning}}">{{/own_content}}\n\t          \t  <input type="checkbox" name="report_actions[]" id="report_actions_forward" value="forward" {{#own_content}}disabled="disabled"{{/own_content}}>\n\t          \t  <label for="report_actions_forward">{{report_forward}}</label>\n\t          \t  <div id="report_content_reason" style="display: none">\n\t          \t  \t<label for="report_reason_text">{{reason_prompt}}</label>\n\t          \t  \t<textarea name="reason" id="report_reason_text" maxlength="250"></textarea>\n\t          \t  </div>\n\t          \t{{#own_content}}</div>{{/own_content}}\n\t          </div>\n\t        </div>\n\t        <div class="modal-footer">\n\t          <input type="submit" class="btn btn-info" id="confirm_report_action" value="{{confirm}}" disabled="disabled">\n\t          <div class="btn btn-cancel" id="cancel_button">\n\t            {{ cancel }}\n\t          </div>\n\t        </div>\n        </form>\n      </div>\n    </div>\n</div>'),this.SMT["status_updates/report_actions_modal"]=function(e){return e||(e={}),SMTCache["status_updates/report_actions_modal"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/reported_info"]=Mustache.compile('<div class="reported_info">\n\t<span class="report_actions">\n\t\t<a href="#" class="btn btn-sm btn-default">{{ take_action }}</a>\n\t</span>\n\t<div class="sprite bg-icon-exclamation"></div>\n\t<span class="report_type">{{report_type}}</span>\n\t<br/>\n\t{{{reported_by}}} {{reported_on}}\n\t{{#reported_comment_link}}\n\t  <br/>\n\t  <a href="{{reported_comment_link}}">{{ view_reported_status }}</a>\n\t{{/reported_comment_link}}\n</div>\n'),Mustache.compilePartial("status_updates/reported_info",'<div class="reported_info">\n\t<span class="report_actions">\n\t\t<a href="#" class="btn btn-sm btn-default">{{ take_action }}</a>\n\t</span>\n\t<div class="sprite bg-icon-exclamation"></div>\n\t<span class="report_type">{{report_type}}</span>\n\t<br/>\n\t{{{reported_by}}} {{reported_on}}\n\t{{#reported_comment_link}}\n\t  <br/>\n\t  <a href="{{reported_comment_link}}">{{ view_reported_status }}</a>\n\t{{/reported_comment_link}}\n</div>\n'),this.SMT["status_updates/reported_info"]=function(e){return e||(e={}),SMTCache["status_updates/reported_info"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/status_update"]=Mustache.compile('<li class="status_update {{type_str}} {{ like_class }} {{#is_discussion}}discussion{{/is_discussion}} {{^actions}}no_comments{{/actions}} {{#aggregated}}aggregated{{/aggregated}} {{#single_status}}single_status{{/single_status}} {{#deleted}}deleted{{/deleted}}" {{#aggregated}}data-cid="{{cid}}"{{/aggregated}}>\n\n  {{#deleted}}<div class="deleted_info">{{deleted_status_text}}</div>{{/deleted}}\n\n  {{#reported_by}}\n    {{> status_updates/reported_info}}\n  {{/reported_by}}\n\n  {{^deleted}}\n  <div class="status_update_options hidden">\n\n    {{#is_discussion}}{{#can_manage}}\n      <a class=\'edit_discussion\'>\n        <div class="sprite bg-icon-pencil_small"></div>\n        {{#is_announcement}}{{ edit_announcement }}{{/is_announcement}}\n        {{^is_announcement}}{{ edit_discussion }}{{/is_announcement}}\n      </a>\n    {{/can_manage}}{{/is_discussion}}\n\n    {{#group_context}}{{#is_discussion}}{{#is_group_admin}}\n    \t{{#featured}}\n\t      <a class=\'unfeature_group_discussion\'>\n          <div class="sprite bg-icon-star_small"></div>\n\t        {{ unfeature_discussion }}\n\t      </a>\n    \t{{/featured}}\n    \t{{^featured}}\n\t      <a class=\'feature_group_discussion\'>\n          <div class="sprite bg-icon-star_small"></div>\n\t        {{ feature_discussion }}\n\t      </a>\n    \t{{/featured}}\n    {{/is_group_admin}}{{/is_discussion}}{{/group_context}}\n\n    {{#can_manage}}\n      <a class=\'from_others\'>\n        <div class="sprite bg-icon-eye__exclamation"></div>\n        {{{ user_hide }}}\n      </a>\n    {{/can_manage}}\n\n    {{#group_status}}{{^group_context}}\n      <a class=\'hide_by_group\'>\n        <div class="sprite bg-icon-eye__exclamation"></div>\n        {{{ group_hide }}}\n      </a>\n    {{/group_context}}{{/group_status}}\n\n    {{^group_context}}\n      {{^own_status}}{{#one_user}}\n        <a class="hide_by_user" title=\'{{user_hide_tooltip}}\'>\n          <div class="sprite bg-icon-eye__exclamation"></div>\n          {{user_hide_tooltip}}\n        </a>\n      {{/one_user}}{{/own_status}}\n    {{/group_context}}\n\n    {{^aggregated}}\n      <a class=\'notification_setting\'>\n        <div class="sprite bg-icon-gear_small"></div>\n        {{#notifications_on}}{{ stop_notifications_text }}{{/notifications_on}}\n        {{^notifications_on}}{{ start_notifications_text }}{{/notifications_on}}\n      </a>\n    {{/aggregated}}\n  </div>\n  {{/deleted}}\n\n  <div class="status_container">\n    <div class="status {{#featured}}featured{{/featured}}">\n\n      {{#aggregated}}<ul class="aggregated_updates" style="display: none"></ul>{{/aggregated}}\n\n      <div class="status_icons">\n\n\t      {{#featured}}<span class="featured_icon status_icon badge badge-info">{{featured_text}}</span>{{/featured}}\n\n\t      {{^aggregated}}{{^notifications_on}}{{#own_status}}\n\t        <span class="status_notifications_off status_icon" title="{{notifications_off_tooltip}}"></span>\n\t      {{/own_status}}{{/notifications_on}}{{/aggregated}}\n\n      </div>\n\n      <div class="content">\n\n        <div class="heading">\n  \t      <div class="avatar">\n  \t        {{{ user_avatar }}}\n  \t      </div>\n\n          <span class="user_link">{{{ user_link }}}</span>\n\n          {{#group_status}}\n            {{^group_context}}\n              <span class="group_link">{{{ in_group }}}</span>\n            {{/group_context}}\n            {{#is_group_discussion_status_update}}\n              <div>{{ started_discussion_text }}</div>\n            {{/is_group_discussion_status_update}}\n          {{/group_status}}\n\n          {{^deleted}}{{{ status_update_settings_content }}}{{/deleted}}\n        </div>\n\n        <div class="main">\n\n          {{{ status_update_content }}}\n\n          <div class="update_date">\n            {{ update_date }}\n            {{#edited}}{{ edited_text }}{{/edited}}\n\n            {{#show_activity_summary}}\n            <span class="activity_summary {{^any_activity}}hidden{{/any_activity}}">\n              <span class="atv_container">\n                  <span class="atv_count like_count {{^total_likes}}hidden{{/total_likes}}">\n                    <div class="sprite bg-icon-thumb_small_up" title="{{likes_text}}"></div>\n                    <span class="value">{{ total_likes }}</span>\n                  </span>\n                  <span class="atv_count comment_count {{^total_comments}}hidden{{/total_comments}}">\n                    <div class="sprite bg-icon-balloon_small_left" title="{{comments_text}}"></div>\n                    <span class="value">{{ total_comments }}</span>\n                  </span>\n              </span>\n            </span>\n            {{/show_activity_summary}}\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n\n    {{#actions}}\n    <div class="status_actions">\n\n      <div class="like_section">\n\n        <span class="status_like">\n          <div class="sprite bg-icon-thumb_small_up" title="{{ like_button_text }}"></div>\n          <a class="like_label">{{ like_button_text }}</a>\n          <a class="liked_label">{{ liked_button_text }}</a>\n        </span>\n\n        {{#like_text}}\n          |\n          <span class="likes {{ number_likes_class }}" data-type="status_update" data-id="{{id}}">\n            <span class="number_likes">\n              {{{ like_text }}}\n            </span>\n          </span>\n          {{#group_status}}{{^own_status}}|{{/own_status}}{{/group_status}}\n        {{/like_text}}\n\n        {{#group_status}}{{^own_status}}\n          {{^like_text}}&nbsp;&nbsp;{{/like_text}}\n\t      {{^reported}}\n\t\t      <span class="status_report">\n\t\t\t\t<a>{{ report_text }}</a>\n\t\t      </span>\n\t\t  {{/reported}}\n\t\t  {{#reported}}\n\t\t      <span class="status_report reported">\n            <div class="sprite bg-icon-exclamation_small" title="{{ reported_text }}"></div>\n\t\t\t\t    {{ reported_text }}\n\t\t      </span>\n\t\t  {{/reported}}\n        {{/own_status}}{{/group_status}}\n\n      </div>\n\n      {{#collapse_comment_section}}\n        <a href="#" class="view_comments">\n          <div class="sprite bg-icon-balloon_small_left"></div>\n          <span>{{ view_comments }}</span>\n        </a>\n      {{/collapse_comment_section}}\n\n      <div class="comment_zone" style="{{#collapse_comment_section}}display:none{{/collapse_comment_section}}">\n        {{#remaining_comments}}\n          <a href="#" class="view_previous_comments">\n            <div class="sprite bg-icon-balloon_small_left"></div>\n            <span>{{ view_previous_comments }}</span>\n            <img src="/assets/loading_small.gif" alt="{{loading_text}}" style=\'display: none\' class=\'loading\'>\n          </a>\n        {{/remaining_comments}}\n\n\t\t<div class="comments_inner_container">\n          {{#comments}}\n            <div class="status_comments" data-depth="0" data-root-id="{{id}}">\n              {{> comments/comment}}\n              <div class="nested_reply_input"></div>\n            </div>\n          {{/comments}}\n        </div>\n\n        {{> comments/comment_input}}\n      </div>\n\n    </div>\n    {{/actions}}\n  </div>\n\n  {{#aggregated}}\n    <div class="view_all">\n      {{{ view_all_link }}}\n      <img src="/assets/loading_small.gif" alt="{{loading_text}}" style=\'display: none\' class=\'loading\'>\n    </div>\n  {{/aggregated}}\n</li>\n'),Mustache.compilePartial("status_updates/status_update",'<li class="status_update {{type_str}} {{ like_class }} {{#is_discussion}}discussion{{/is_discussion}} {{^actions}}no_comments{{/actions}} {{#aggregated}}aggregated{{/aggregated}} {{#single_status}}single_status{{/single_status}} {{#deleted}}deleted{{/deleted}}" {{#aggregated}}data-cid="{{cid}}"{{/aggregated}}>\n\n  {{#deleted}}<div class="deleted_info">{{deleted_status_text}}</div>{{/deleted}}\n\n  {{#reported_by}}\n    {{> status_updates/reported_info}}\n  {{/reported_by}}\n\n  {{^deleted}}\n  <div class="status_update_options hidden">\n\n    {{#is_discussion}}{{#can_manage}}\n      <a class=\'edit_discussion\'>\n        <div class="sprite bg-icon-pencil_small"></div>\n        {{#is_announcement}}{{ edit_announcement }}{{/is_announcement}}\n        {{^is_announcement}}{{ edit_discussion }}{{/is_announcement}}\n      </a>\n    {{/can_manage}}{{/is_discussion}}\n\n    {{#group_context}}{{#is_discussion}}{{#is_group_admin}}\n    \t{{#featured}}\n\t      <a class=\'unfeature_group_discussion\'>\n          <div class="sprite bg-icon-star_small"></div>\n\t        {{ unfeature_discussion }}\n\t      </a>\n    \t{{/featured}}\n    \t{{^featured}}\n\t      <a class=\'feature_group_discussion\'>\n          <div class="sprite bg-icon-star_small"></div>\n\t        {{ feature_discussion }}\n\t      </a>\n    \t{{/featured}}\n    {{/is_group_admin}}{{/is_discussion}}{{/group_context}}\n\n    {{#can_manage}}\n      <a class=\'from_others\'>\n        <div class="sprite bg-icon-eye__exclamation"></div>\n        {{{ user_hide }}}\n      </a>\n    {{/can_manage}}\n\n    {{#group_status}}{{^group_context}}\n      <a class=\'hide_by_group\'>\n        <div class="sprite bg-icon-eye__exclamation"></div>\n        {{{ group_hide }}}\n      </a>\n    {{/group_context}}{{/group_status}}\n\n    {{^group_context}}\n      {{^own_status}}{{#one_user}}\n        <a class="hide_by_user" title=\'{{user_hide_tooltip}}\'>\n          <div class="sprite bg-icon-eye__exclamation"></div>\n          {{user_hide_tooltip}}\n        </a>\n      {{/one_user}}{{/own_status}}\n    {{/group_context}}\n\n    {{^aggregated}}\n      <a class=\'notification_setting\'>\n        <div class="sprite bg-icon-gear_small"></div>\n        {{#notifications_on}}{{ stop_notifications_text }}{{/notifications_on}}\n        {{^notifications_on}}{{ start_notifications_text }}{{/notifications_on}}\n      </a>\n    {{/aggregated}}\n  </div>\n  {{/deleted}}\n\n  <div class="status_container">\n    <div class="status {{#featured}}featured{{/featured}}">\n\n      {{#aggregated}}<ul class="aggregated_updates" style="display: none"></ul>{{/aggregated}}\n\n      <div class="status_icons">\n\n\t      {{#featured}}<span class="featured_icon status_icon badge badge-info">{{featured_text}}</span>{{/featured}}\n\n\t      {{^aggregated}}{{^notifications_on}}{{#own_status}}\n\t        <span class="status_notifications_off status_icon" title="{{notifications_off_tooltip}}"></span>\n\t      {{/own_status}}{{/notifications_on}}{{/aggregated}}\n\n      </div>\n\n      <div class="content">\n\n        <div class="heading">\n  \t      <div class="avatar">\n  \t        {{{ user_avatar }}}\n  \t      </div>\n\n          <span class="user_link">{{{ user_link }}}</span>\n\n          {{#group_status}}\n            {{^group_context}}\n              <span class="group_link">{{{ in_group }}}</span>\n            {{/group_context}}\n            {{#is_group_discussion_status_update}}\n              <div>{{ started_discussion_text }}</div>\n            {{/is_group_discussion_status_update}}\n          {{/group_status}}\n\n          {{^deleted}}{{{ status_update_settings_content }}}{{/deleted}}\n        </div>\n\n        <div class="main">\n\n          {{{ status_update_content }}}\n\n          <div class="update_date">\n            {{ update_date }}\n            {{#edited}}{{ edited_text }}{{/edited}}\n\n            {{#show_activity_summary}}\n            <span class="activity_summary {{^any_activity}}hidden{{/any_activity}}">\n              <span class="atv_container">\n                  <span class="atv_count like_count {{^total_likes}}hidden{{/total_likes}}">\n                    <div class="sprite bg-icon-thumb_small_up" title="{{likes_text}}"></div>\n                    <span class="value">{{ total_likes }}</span>\n                  </span>\n                  <span class="atv_count comment_count {{^total_comments}}hidden{{/total_comments}}">\n                    <div class="sprite bg-icon-balloon_small_left" title="{{comments_text}}"></div>\n                    <span class="value">{{ total_comments }}</span>\n                  </span>\n              </span>\n            </span>\n            {{/show_activity_summary}}\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n\n    {{#actions}}\n    <div class="status_actions">\n\n      <div class="like_section">\n\n        <span class="status_like">\n          <div class="sprite bg-icon-thumb_small_up" title="{{ like_button_text }}"></div>\n          <a class="like_label">{{ like_button_text }}</a>\n          <a class="liked_label">{{ liked_button_text }}</a>\n        </span>\n\n        {{#like_text}}\n          |\n          <span class="likes {{ number_likes_class }}" data-type="status_update" data-id="{{id}}">\n            <span class="number_likes">\n              {{{ like_text }}}\n            </span>\n          </span>\n          {{#group_status}}{{^own_status}}|{{/own_status}}{{/group_status}}\n        {{/like_text}}\n\n        {{#group_status}}{{^own_status}}\n          {{^like_text}}&nbsp;&nbsp;{{/like_text}}\n\t      {{^reported}}\n\t\t      <span class="status_report">\n\t\t\t\t<a>{{ report_text }}</a>\n\t\t      </span>\n\t\t  {{/reported}}\n\t\t  {{#reported}}\n\t\t      <span class="status_report reported">\n            <div class="sprite bg-icon-exclamation_small" title="{{ reported_text }}"></div>\n\t\t\t\t    {{ reported_text }}\n\t\t      </span>\n\t\t  {{/reported}}\n        {{/own_status}}{{/group_status}}\n\n      </div>\n\n      {{#collapse_comment_section}}\n        <a href="#" class="view_comments">\n          <div class="sprite bg-icon-balloon_small_left"></div>\n          <span>{{ view_comments }}</span>\n        </a>\n      {{/collapse_comment_section}}\n\n      <div class="comment_zone" style="{{#collapse_comment_section}}display:none{{/collapse_comment_section}}">\n        {{#remaining_comments}}\n          <a href="#" class="view_previous_comments">\n            <div class="sprite bg-icon-balloon_small_left"></div>\n            <span>{{ view_previous_comments }}</span>\n            <img src="/assets/loading_small.gif" alt="{{loading_text}}" style=\'display: none\' class=\'loading\'>\n          </a>\n        {{/remaining_comments}}\n\n\t\t<div class="comments_inner_container">\n          {{#comments}}\n            <div class="status_comments" data-depth="0" data-root-id="{{id}}">\n              {{> comments/comment}}\n              <div class="nested_reply_input"></div>\n            </div>\n          {{/comments}}\n        </div>\n\n        {{> comments/comment_input}}\n      </div>\n\n    </div>\n    {{/actions}}\n  </div>\n\n  {{#aggregated}}\n    <div class="view_all">\n      {{{ view_all_link }}}\n      <img src="/assets/loading_small.gif" alt="{{loading_text}}" style=\'display: none\' class=\'loading\'>\n    </div>\n  {{/aggregated}}\n</li>\n'),this.SMT["status_updates/status_update"]=function(e){return e||(e={}),SMTCache["status_updates/status_update"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/status_update_settings"]=Mustache.compile('<span class="status_hide settings"><i class="icon-caret-down status_hide_settings"></i></span>\n'),Mustache.compilePartial("status_updates/status_update_settings",'<span class="status_hide settings"><i class="icon-caret-down status_hide_settings"></i></span>\n'),this.SMT["status_updates/status_update_settings"]=function(e){return e||(e={}),SMTCache["status_updates/status_update_settings"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/suggested_activities_list"]=Mustache.compile('<div class="suggested_title">\n  {{{ intro_text }}}\n  {{#tooltip_text}}\n    <a href="#" class="what_is_this" data-placement="bottom" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n      <i class="icon-question-sign"></i>\n    </a>\n  {{/tooltip_text}}\n\n  <ul class="suggested_updates">\n  </ul>\n\n  {{#see_more_text}}\n    <div class="see_more">\n      <a href="{{ see_more_link }}">{{ see_more_text }} &hellip;</a>\n    </div>\n    <div class="clearfix">\n  {{/see_more_text}}\n</div>\n'),Mustache.compilePartial("status_updates/suggested_activities_list",'<div class="suggested_title">\n  {{{ intro_text }}}\n  {{#tooltip_text}}\n    <a href="#" class="what_is_this" data-placement="bottom" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n      <i class="icon-question-sign"></i>\n    </a>\n  {{/tooltip_text}}\n\n  <ul class="suggested_updates">\n  </ul>\n\n  {{#see_more_text}}\n    <div class="see_more">\n      <a href="{{ see_more_link }}">{{ see_more_text }} &hellip;</a>\n    </div>\n    <div class="clearfix">\n  {{/see_more_text}}\n</div>\n'),this.SMT["status_updates/suggested_activities_list"]=function(e){return e||(e={}),SMTCache["status_updates/suggested_activities_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/suggested_course"]=Mustache.compile('<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-view" href="{{url}}">\n    {{view_text}}\n  </a>\n\n  <span class="link_images course"></span>\n\n  <div class="suggested_title">\n    {{{course_link}}}\n  </div>\n</div>\n'),Mustache.compilePartial("status_updates/suggested_course",'<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-view" href="{{url}}">\n    {{view_text}}\n  </a>\n\n  <span class="link_images course"></span>\n\n  <div class="suggested_title">\n    {{{course_link}}}\n  </div>\n</div>\n'),this.SMT["status_updates/suggested_course"]=function(e){return e||(e={}),SMTCache["status_updates/suggested_course"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/suggested_group"]=Mustache.compile('<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-request" href="{{url}}">\n    {{request_text}}\n  </a>\n\n  <span class="link_images">\n  \t<img src="{{group_logo}}" class="group_logo">\n  </span>\n\n  <div class="suggested_title">\n    {{{group_link}}}\n  </div>\n</div>\n'),Mustache.compilePartial("status_updates/suggested_group",'<div>\n  {{#dismissable}}\n\t  <a class="dismiss" title="{{dismiss_text}}">\n\t    <img src="/assets/icon_tile_dismiss.png">\n\t  </a>\n  {{/dismissable}}\n\n  <a class="btn-activity btn-request" href="{{url}}">\n    {{request_text}}\n  </a>\n\n  <span class="link_images">\n  \t<img src="{{group_logo}}" class="group_logo">\n  </span>\n\n  <div class="suggested_title">\n    {{{group_link}}}\n  </div>\n</div>\n'),this.SMT["status_updates/suggested_group"]=function(e){return e||(e={}),SMTCache["status_updates/suggested_group"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["status_updates/suggested_status_update_friendship"]=Mustache.compile('<div>\n\t<a class="dismiss" title="{{dismiss}}">\n    <img src="/assets/icon_tile_dismiss.png">\n  </a>\n\n  <div class="friender">\n    {{{ message }}}\n  </div>\n\n  <div class="friendee">\n    <a class="btn-activity btn-invite">\n      {{invite_text}}\n    </a>\n\n    <span class="friend_avatar">{{{friend_avatar}}}</span>\n\n    <div class="friend_text">\n      <span class="friend_link">{{{friend_link}}}</span>\n      <span class="friend_info">{{friend_info}}</span>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("status_updates/suggested_status_update_friendship",'<div>\n\t<a class="dismiss" title="{{dismiss}}">\n    <img src="/assets/icon_tile_dismiss.png">\n  </a>\n\n  <div class="friender">\n    {{{ message }}}\n  </div>\n\n  <div class="friendee">\n    <a class="btn-activity btn-invite">\n      {{invite_text}}\n    </a>\n\n    <span class="friend_avatar">{{{friend_avatar}}}</span>\n\n    <div class="friend_text">\n      <span class="friend_link">{{{friend_link}}}</span>\n      <span class="friend_info">{{friend_info}}</span>\n    </div>\n  </div>\n</div>\n'),this.SMT["status_updates/suggested_status_update_friendship"]=function(e){return e||(e={}),SMTCache["status_updates/suggested_status_update_friendship"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["study_aids/actions_list"]=Mustache.compile('<div id="actions_list" data-id="{{ study_aid_id }}">\n  <div class="action {{^can_manage}}disabled{{/can_manage}}" data-action="{{#edit_mode}}play{{/edit_mode}}{{^edit_mode}}edit{{/edit_mode}}">\n    <div class="action_icon">\n      {{#edit_mode}}\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      {{/edit_mode}}\n      {{^edit_mode}}\n        <div class="icon">{{{ icon_edit }}}</div>\n        <div class="title">{{ title_edit }}</div>\n      {{/edit_mode}}\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#edit_mode}}\n          {{{ description_play }}}\n        {{/edit_mode}}\n        {{^edit_mode}}\n          {{#can_manage}}{{{ description_edit }}}{{/can_manage}}\n          {{^can_manage}}{{{ description_edit_disabled }}}{{/can_manage}}\n        {{/edit_mode}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_edit_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action {{^can_clone}}disabled{{/can_clone}}" data-action="copy">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_copy }}}</div>\n      <div class="title">{{ title_copy }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_clone}}{{{ description_copy }}}{{/can_clone}}\n        {{^can_clone}}\n          {{#user_can_clone}}{{ description_copy_disabled_author }}{{/user_can_clone}}\n          {{^user_can_clone}}{{{ description_copy_disabled_upgrade }}}{{/user_can_clone}}\n        {{/can_clone}}\n      {{/signed_in}}\n      {{^signed_in}}\n        {{{ description_copy_unauth }}}\n      {{/signed_in}}\n    </div>\n  </div>\n  {{^pinned_by}}\n    <div class="action pin {{#authored_by}}disabled{{/authored_by}} {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_pin }}}</div>\n        <div class="title">{{ title_pin }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{^authored_by}}{{{ description_pin }}}{{/authored_by}}\n          {{#authored_by}}{{{ description_pin_disabled }}}{{/authored_by}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/pinned_by}}\n  {{#pinned_by}}\n    <div class="action" data-action="unpin">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_unpin }}}</div>\n        <div class="title">{{ title_unpin }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_unpin }}}\n    </div>\n  </div>\n  {{/pinned_by}}\n  <div class="action {{^pinned_by}}{{^authored_by}}disabled{{/authored_by}}{{/pinned_by}}" data-action="move">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_move }}}</div>\n      <div class="title">{{ title_move }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}{{{ description_move }}}{{/signed_in}}\n      {{^signed_in}}{{{ description_move_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_social }}}</div>\n      <div class="title">{{ title_social }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}{{{ description_social }}}{{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_social_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_social_unauth }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n\n  {{#teams_frame}}\n    <div class="action teams_submit" data-action="teams_submit">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_teams_submit }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#user_can_teams_submit}}{{{ description_teams_submit }}}{{/user_can_teams_submit}}\n          {{^user_can_teams_submit}}{{{ description_teams_submit_disabled }}}{{/user_can_teams_submit}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_teams_submit_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/teams_frame}}\n\n  <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_share }}}</div>\n      <div class="title">{{ title_share }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_share}}{{{ description_share }}}{{/can_share}}\n        {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action eps {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_eps}}disabled{{/can_eps}}{{/signed_in}}" data-action="eps">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_eps }}}</div>\n      <div class="title">{{ title_eps }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_eps}}{{{ description_eps }}}{{/can_eps}}\n        {{^can_eps}}\n          {{#institution_member}}\n            {{#authored_by}}{{{ description_eps_disabled_permission }}}{{/authored_by}}\n            {{^authored_by}}{{{ description_eps_disabled_author }}}{{/authored_by}}\n          {{/institution_member}}\n          {{^institution_member}}{{{ description_eps_disabled_upgrade }}}{{/institution_member}}\n        {{/can_eps}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_eps_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  {{#show_data_capture}}\n    <div class="action data_capture {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_data_capture}}disabled{{/can_data_capture}}{{/signed_in}}" data-action="data_capture">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_data_capture }}}</div>\n        <div class="title">{{ title_data_capture }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_data_capture}}{{{ description_data_capture }}}{{/can_data_capture}}\n          {{^can_data_capture}}\n            {{#institution_member}}\n              {{#authored_by}}{{{ description_data_capture_disabled_permission }}}{{/authored_by}}\n              {{^authored_by}}{{{ description_data_capture_disabled_author }}}{{/authored_by}}\n            {{/institution_member}}\n            {{^institution_member}}{{{ description_data_capture_disabled_upgrade }}}{{/institution_member}}\n          {{/can_data_capture}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_data_capture_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/show_data_capture}}\n  <div class="action reports {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_report}}disabled{{/can_report}}{{/signed_in}}" data-action="reports">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_reports }}}</div>\n      <div class="title">{{ title_reports }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_report}}{{{ description_reports }}}{{/can_report}}\n        {{^can_report}}\n          {{#institution_member}}\n            {{#authored_by}}{{{ description_reports_disabled_permission }}}{{/authored_by}}\n            {{^authored_by}}{{{ description_reports_disabled_author }}}{{/authored_by}}\n          {{/institution_member}}\n          {{^institution_member}}{{{ description_reports_disabled_upgrade }}}{{/institution_member}}\n        {{/can_report}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_reports_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action email {{#private}}disabled{{/private}} {{^signed_in}}disabled{{/signed_in}}" data-action="email">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_email }}}</div>\n      <div class="title">{{ title_email }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}\n        {{#signed_in}}{{{ description_email }}}{{/signed_in}}\n        {{^signed_in}}{{{ description_email_unauth }}}{{/signed_in}}\n      {{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_email_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_email_private }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n  <div class="action {{^signed_in}}disabled{{/signed_in}}" data-action="print">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_print }}}</div>\n      <div class="title">{{ title_print }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}{{{ description_print }}}{{/signed_in}}\n      {{^signed_in}}{{{ description_print_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action {{^can_manage}}disabled{{/can_manage}}" data-action="delete">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_delete }}}</div>\n      <div class="title">{{ title_delete }}</div>\n    </div>\n    <div class="action_text">\n      {{#can_manage}}{{{ description_delete }}}{{/can_manage}}\n      {{^can_manage}}{{{ description_delete_disabled }}}{{/can_manage}}\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("study_aids/actions_list",'<div id="actions_list" data-id="{{ study_aid_id }}">\n  <div class="action {{^can_manage}}disabled{{/can_manage}}" data-action="{{#edit_mode}}play{{/edit_mode}}{{^edit_mode}}edit{{/edit_mode}}">\n    <div class="action_icon">\n      {{#edit_mode}}\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      {{/edit_mode}}\n      {{^edit_mode}}\n        <div class="icon">{{{ icon_edit }}}</div>\n        <div class="title">{{ title_edit }}</div>\n      {{/edit_mode}}\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#edit_mode}}\n          {{{ description_play }}}\n        {{/edit_mode}}\n        {{^edit_mode}}\n          {{#can_manage}}{{{ description_edit }}}{{/can_manage}}\n          {{^can_manage}}{{{ description_edit_disabled }}}{{/can_manage}}\n        {{/edit_mode}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_edit_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action {{^can_clone}}disabled{{/can_clone}}" data-action="copy">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_copy }}}</div>\n      <div class="title">{{ title_copy }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_clone}}{{{ description_copy }}}{{/can_clone}}\n        {{^can_clone}}\n          {{#user_can_clone}}{{ description_copy_disabled_author }}{{/user_can_clone}}\n          {{^user_can_clone}}{{{ description_copy_disabled_upgrade }}}{{/user_can_clone}}\n        {{/can_clone}}\n      {{/signed_in}}\n      {{^signed_in}}\n        {{{ description_copy_unauth }}}\n      {{/signed_in}}\n    </div>\n  </div>\n  {{^pinned_by}}\n    <div class="action pin {{#authored_by}}disabled{{/authored_by}} {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_pin }}}</div>\n        <div class="title">{{ title_pin }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{^authored_by}}{{{ description_pin }}}{{/authored_by}}\n          {{#authored_by}}{{{ description_pin_disabled }}}{{/authored_by}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/pinned_by}}\n  {{#pinned_by}}\n    <div class="action" data-action="unpin">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_unpin }}}</div>\n        <div class="title">{{ title_unpin }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_unpin }}}\n    </div>\n  </div>\n  {{/pinned_by}}\n  <div class="action {{^pinned_by}}{{^authored_by}}disabled{{/authored_by}}{{/pinned_by}}" data-action="move">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_move }}}</div>\n      <div class="title">{{ title_move }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}{{{ description_move }}}{{/signed_in}}\n      {{^signed_in}}{{{ description_move_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_social }}}</div>\n      <div class="title">{{ title_social }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}{{{ description_social }}}{{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_social_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_social_unauth }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n\n  {{#teams_frame}}\n    <div class="action teams_submit" data-action="teams_submit">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_teams_submit }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#user_can_teams_submit}}{{{ description_teams_submit }}}{{/user_can_teams_submit}}\n          {{^user_can_teams_submit}}{{{ description_teams_submit_disabled }}}{{/user_can_teams_submit}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_teams_submit_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/teams_frame}}\n\n  <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_share }}}</div>\n      <div class="title">{{ title_share }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_share}}{{{ description_share }}}{{/can_share}}\n        {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action eps {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_eps}}disabled{{/can_eps}}{{/signed_in}}" data-action="eps">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_eps }}}</div>\n      <div class="title">{{ title_eps }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_eps}}{{{ description_eps }}}{{/can_eps}}\n        {{^can_eps}}\n          {{#institution_member}}\n            {{#authored_by}}{{{ description_eps_disabled_permission }}}{{/authored_by}}\n            {{^authored_by}}{{{ description_eps_disabled_author }}}{{/authored_by}}\n          {{/institution_member}}\n          {{^institution_member}}{{{ description_eps_disabled_upgrade }}}{{/institution_member}}\n        {{/can_eps}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_eps_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  {{#show_data_capture}}\n    <div class="action data_capture {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_data_capture}}disabled{{/can_data_capture}}{{/signed_in}}" data-action="data_capture">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_data_capture }}}</div>\n        <div class="title">{{ title_data_capture }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_data_capture}}{{{ description_data_capture }}}{{/can_data_capture}}\n          {{^can_data_capture}}\n            {{#institution_member}}\n              {{#authored_by}}{{{ description_data_capture_disabled_permission }}}{{/authored_by}}\n              {{^authored_by}}{{{ description_data_capture_disabled_author }}}{{/authored_by}}\n            {{/institution_member}}\n            {{^institution_member}}{{{ description_data_capture_disabled_upgrade }}}{{/institution_member}}\n          {{/can_data_capture}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_data_capture_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n  {{/show_data_capture}}\n  <div class="action reports {{^signed_in}}disabled{{/signed_in}} {{#signed_in}}{{^can_report}}disabled{{/can_report}}{{/signed_in}}" data-action="reports">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_reports }}}</div>\n      <div class="title">{{ title_reports }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_report}}{{{ description_reports }}}{{/can_report}}\n        {{^can_report}}\n          {{#institution_member}}\n            {{#authored_by}}{{{ description_reports_disabled_permission }}}{{/authored_by}}\n            {{^authored_by}}{{{ description_reports_disabled_author }}}{{/authored_by}}\n          {{/institution_member}}\n          {{^institution_member}}{{{ description_reports_disabled_upgrade }}}{{/institution_member}}\n        {{/can_report}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_reports_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action email {{#private}}disabled{{/private}} {{^signed_in}}disabled{{/signed_in}}" data-action="email">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_email }}}</div>\n      <div class="title">{{ title_email }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}\n        {{#signed_in}}{{{ description_email }}}{{/signed_in}}\n        {{^signed_in}}{{{ description_email_unauth }}}{{/signed_in}}\n      {{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_email_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_email_private }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n  <div class="action {{^signed_in}}disabled{{/signed_in}}" data-action="print">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_print }}}</div>\n      <div class="title">{{ title_print }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}{{{ description_print }}}{{/signed_in}}\n      {{^signed_in}}{{{ description_print_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action {{^can_manage}}disabled{{/can_manage}}" data-action="delete">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_delete }}}</div>\n      <div class="title">{{ title_delete }}</div>\n    </div>\n    <div class="action_text">\n      {{#can_manage}}{{{ description_delete }}}{{/can_manage}}\n      {{^can_manage}}{{{ description_delete_disabled }}}{{/can_manage}}\n    </div>\n  </div>\n</div>\n'),this.SMT["study_aids/actions_list"]=function(e){return e||(e={}),SMTCache["study_aids/actions_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/embed"]=Mustache.compile("<iframe width='100%'\n  height='600px'\n  scrolling='{{ scrolling }}'\n  src='{{ src }}'\n  style='border: 1px solid #ccc'\n  allowfullscreen\n  webkitallowfullscreen\n  mozallowfullscreen\n  oallowfullscreen\n  msallowfullscreen>\n</iframe>\n<a href='{{ link_url }}'>{{ author_name }}</a>\n"),Mustache.compilePartial("study_aids/embed","<iframe width='100%'\n  height='600px'\n  scrolling='{{ scrolling }}'\n  src='{{ src }}'\n  style='border: 1px solid #ccc'\n  allowfullscreen\n  webkitallowfullscreen\n  mozallowfullscreen\n  oallowfullscreen\n  msallowfullscreen>\n</iframe>\n<a href='{{ link_url }}'>{{ author_name }}</a>\n"),this.SMT["study_aids/embed"]=function(e){return e||(e={}),SMTCache["study_aids/embed"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/embed_popup"]=Mustache.compile("<div\n  {{^prod}}\n    data-env='{{ rails_env }}'\n  {{/prod}}\n  class='goconqr-popup-embed'\n  data-id='{{ id }}'\n  data-type='{{ type }}'>\n</div>\n<script type='text/javascript' src='{{ root }}/embed.min.js'></script>\n"),Mustache.compilePartial("study_aids/embed_popup","<div\n  {{^prod}}\n    data-env='{{ rails_env }}'\n  {{/prod}}\n  class='goconqr-popup-embed'\n  data-id='{{ id }}'\n  data-type='{{ type }}'>\n</div>\n<script type='text/javascript' src='{{ root }}/embed.min.js'></script>\n"),this.SMT["study_aids/embed_popup"]=function(e){return e||(e={}),SMTCache["study_aids/embed_popup"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/mobile_actions_list"]=Mustache.compile('<div id="actions_list" data-id="{{ study_aid_id }}">\n  {{^edit_mode}}\n    <div class="action" data-action="info">\n      <div class="action_icon">\n        <div class="icon"><span class="fa icon-info"></span></div>\n        <div class="title">{{ title_info }}</div>\n      </div>\n      <div class="action_text">{{{ description_info }}}</div>\n    </div>\n  {{/edit_mode}}\n  {{#can_manage}}\n    <div class="action" data-action="rename">\n      <div class="action_icon">\n          <div class="icon">{{{ icon_rename }}}</div>\n          <div class="title">{{ title_rename }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_rename }}}\n      </div>\n    </div>\n  {{/can_manage}}\n  {{#edit_mode}}\n    <div class="action" data-action="play">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_play }}}\n      </div>\n    </div>\n  {{/edit_mode}}\n  {{^edit_mode}}\n    {{#can_manage}}\n      <div class="action" data-action="edit">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_edit }}}</div>\n          <div class="title">{{ title_edit }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_edit }}}\n        </div>\n      </div>\n    {{/can_manage}}\n  {{/edit_mode}}\n  <div class="action {{^can_clone}}disabled {{^user_can_clone}}upgrade-link{{/user_can_clone}}{{/can_clone}}" data-prompt="copy_and_edit" data-action="copy">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_copy }}}</div>\n      <div class="title">{{ title_copy }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_clone}}{{{ description_copy }}}{{/can_clone}}\n        {{^can_clone}}\n          {{#user_can_clone}}{{ description_copy_disabled_author }}{{/user_can_clone}}\n          {{^user_can_clone}}{{{ description_copy_disabled_upgrade }}}{{/user_can_clone}}\n        {{/can_clone}}\n      {{/signed_in}}\n      {{^signed_in}}\n        {{{ description_copy_unauth }}}\n      {{/signed_in}}\n    </div>\n  </div>\n  {{#authored_by}}\n    <div class="action" data-action="move">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_move }}}</div>\n        <div class="title">{{ title_move }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_move }}}\n      </div>\n    </div>\n  {{/authored_by}}\n  {{^authored_by}}\n    {{^pinned_by}}\n      <div class="action pin {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_pin }}}</div>\n          <div class="title">{{ title_pin }}</div>\n        </div>\n        <div class="action_text">\n          {{#signed_in}}{{{ description_pin }}}{{/signed_in}}\n          {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n        </div>\n      </div>\n    {{/pinned_by}}\n    {{#pinned_by}}\n      <div class="action" data-action="unpin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unpin }}}</div>\n          <div class="title">{{ title_unpin }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unpin }}}\n        </div>\n      </div>\n    {{/pinned_by}}\n  {{/authored_by}}\n  <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_social }}}</div>\n      <div class="title">{{ title_social }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}{{{ description_social }}}{{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_social_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_social_unauth }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n\n  <div class="action share_to_teams" data-action="share_to_teams">\n    <div class="action_icon">\n      <div class="icon">\n        <img src="/assets/social/microsoft/ms_icon_black_30x30.png" width="20" height="20"/>\n      </div>\n      <div class="title">{{ title_share_to_teams }}</div>\n    </div>\n    <div class="action_text">\n      {{{ description_share_to_teams }}}\n    </div>\n  </div>\n  <div class="teams-share-button"></div>\n  <div>\n  <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_share }}}</div>\n      <div class="title">{{ title_share }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_share}}{{{ description_share }}}{{/can_share}}\n        {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action email {{#private}}disabled{{/private}} {{^signed_in}}disabled{{/signed_in}}" data-action="email">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_email }}}</div>\n      <div class="title">{{ title_email }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}\n        {{#signed_in}}{{{ description_email }}}{{/signed_in}}\n        {{^signed_in}}{{{ description_email_unauth }}}{{/signed_in}}\n      {{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_email_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_email_private }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n  {{#can_manage}}\n    {{#private}}\n      <div class="action" data-action="public">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_public }}}</div>\n          <div class="title">{{ title_public }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_public }}}\n        </div>\n      </div>\n    {{/private}}\n    {{^private}}\n      <div class="action {{^user_can_private}}upgrade-link{{/user_can_private}}" data-prompt="private_quota" data-action="private">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_private }}}</div>\n          <div class="title">{{ title_private}}</div>\n        </div>\n        <div class="action_text">\n          {{#user_can_private}}{{{ description_private }}}{{/user_can_private}}\n          {{^user_can_private}}{{{ description_private_disabled }}}{{/user_can_private}}\n        </div>\n      </div>\n    {{/private}}\n\n    {{^copyable}}\n      <div class="action" data-action="unlock">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unlock }}}</div>\n          <div class="title">{{ title_unlock }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unlock }}}\n        </div>\n      </div>\n    {{/copyable}}\n    {{#copyable}}\n      <div class="action {{^user_can_lock}}upgrade-link{{/user_can_lock}}" data-prompt="lock_for_copy" data-action="lock">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_lock }}}</div>\n          <div class="title">{{ title_lock}}</div>\n        </div>\n        <div class="action_text">\n          {{#user_can_lock}}{{{ description_lock }}}{{/user_can_lock}}\n          {{^user_can_lock}}{{{ description_lock_disabled }}}{{/user_can_lock}}\n        </div>\n      </div>\n    {{/copyable}}\n  {{/can_manage}}\n  {{#authored_by}}\n    <div class="action" data-action="delete">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_delete }}}</div>\n        <div class="title">{{ title_delete }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_delete }}}\n      </div>\n    </div>\n  {{/authored_by}}\n</div>\n'),
Mustache.compilePartial("study_aids/mobile_actions_list",'<div id="actions_list" data-id="{{ study_aid_id }}">\n  {{^edit_mode}}\n    <div class="action" data-action="info">\n      <div class="action_icon">\n        <div class="icon"><span class="fa icon-info"></span></div>\n        <div class="title">{{ title_info }}</div>\n      </div>\n      <div class="action_text">{{{ description_info }}}</div>\n    </div>\n  {{/edit_mode}}\n  {{#can_manage}}\n    <div class="action" data-action="rename">\n      <div class="action_icon">\n          <div class="icon">{{{ icon_rename }}}</div>\n          <div class="title">{{ title_rename }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_rename }}}\n      </div>\n    </div>\n  {{/can_manage}}\n  {{#edit_mode}}\n    <div class="action" data-action="play">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_play }}}\n      </div>\n    </div>\n  {{/edit_mode}}\n  {{^edit_mode}}\n    {{#can_manage}}\n      <div class="action" data-action="edit">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_edit }}}</div>\n          <div class="title">{{ title_edit }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_edit }}}\n        </div>\n      </div>\n    {{/can_manage}}\n  {{/edit_mode}}\n  <div class="action {{^can_clone}}disabled {{^user_can_clone}}upgrade-link{{/user_can_clone}}{{/can_clone}}" data-prompt="copy_and_edit" data-action="copy">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_copy }}}</div>\n      <div class="title">{{ title_copy }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_clone}}{{{ description_copy }}}{{/can_clone}}\n        {{^can_clone}}\n          {{#user_can_clone}}{{ description_copy_disabled_author }}{{/user_can_clone}}\n          {{^user_can_clone}}{{{ description_copy_disabled_upgrade }}}{{/user_can_clone}}\n        {{/can_clone}}\n      {{/signed_in}}\n      {{^signed_in}}\n        {{{ description_copy_unauth }}}\n      {{/signed_in}}\n    </div>\n  </div>\n  {{#authored_by}}\n    <div class="action" data-action="move">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_move }}}</div>\n        <div class="title">{{ title_move }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_move }}}\n      </div>\n    </div>\n  {{/authored_by}}\n  {{^authored_by}}\n    {{^pinned_by}}\n      <div class="action pin {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_pin }}}</div>\n          <div class="title">{{ title_pin }}</div>\n        </div>\n        <div class="action_text">\n          {{#signed_in}}{{{ description_pin }}}{{/signed_in}}\n          {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n        </div>\n      </div>\n    {{/pinned_by}}\n    {{#pinned_by}}\n      <div class="action" data-action="unpin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unpin }}}</div>\n          <div class="title">{{ title_unpin }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unpin }}}\n        </div>\n      </div>\n    {{/pinned_by}}\n  {{/authored_by}}\n  <div class="action social {{#private}}disabled{{/private}}" data-action="social">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_social }}}</div>\n      <div class="title">{{ title_social }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}{{{ description_social }}}{{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_social_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_social_unauth }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n\n  <div class="action share_to_teams" data-action="share_to_teams">\n    <div class="action_icon">\n      <div class="icon">\n        <img src="/assets/social/microsoft/ms_icon_black_30x30.png" width="20" height="20"/>\n      </div>\n      <div class="title">{{ title_share_to_teams }}</div>\n    </div>\n    <div class="action_text">\n      {{{ description_share_to_teams }}}\n    </div>\n  </div>\n  <div class="teams-share-button"></div>\n  <div>\n  <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_share }}}</div>\n      <div class="title">{{ title_share }}</div>\n    </div>\n    <div class="action_text">\n      {{#signed_in}}\n        {{#can_share}}{{{ description_share }}}{{/can_share}}\n        {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n      {{/signed_in}}\n      {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n    </div>\n  </div>\n  <div class="action email {{#private}}disabled{{/private}} {{^signed_in}}disabled{{/signed_in}}" data-action="email">\n    <div class="action_icon">\n      <div class="icon">{{{ icon_email }}}</div>\n      <div class="title">{{ title_email }}</div>\n    </div>\n    <div class="action_text">\n      {{^private}}\n        {{#signed_in}}{{{ description_email }}}{{/signed_in}}\n        {{^signed_in}}{{{ description_email_unauth }}}{{/signed_in}}\n      {{/private}}\n      {{#private}}\n        {{#authored_by}}{{{ description_email_disabled }}}{{/authored_by}}\n        {{^authored_by}}{{{ description_email_private }}}{{/authored_by}}\n      {{/private}}\n    </div>\n  </div>\n  {{#can_manage}}\n    {{#private}}\n      <div class="action" data-action="public">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_public }}}</div>\n          <div class="title">{{ title_public }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_public }}}\n        </div>\n      </div>\n    {{/private}}\n    {{^private}}\n      <div class="action {{^user_can_private}}upgrade-link{{/user_can_private}}" data-prompt="private_quota" data-action="private">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_private }}}</div>\n          <div class="title">{{ title_private}}</div>\n        </div>\n        <div class="action_text">\n          {{#user_can_private}}{{{ description_private }}}{{/user_can_private}}\n          {{^user_can_private}}{{{ description_private_disabled }}}{{/user_can_private}}\n        </div>\n      </div>\n    {{/private}}\n\n    {{^copyable}}\n      <div class="action" data-action="unlock">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unlock }}}</div>\n          <div class="title">{{ title_unlock }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unlock }}}\n        </div>\n      </div>\n    {{/copyable}}\n    {{#copyable}}\n      <div class="action {{^user_can_lock}}upgrade-link{{/user_can_lock}}" data-prompt="lock_for_copy" data-action="lock">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_lock }}}</div>\n          <div class="title">{{ title_lock}}</div>\n        </div>\n        <div class="action_text">\n          {{#user_can_lock}}{{{ description_lock }}}{{/user_can_lock}}\n          {{^user_can_lock}}{{{ description_lock_disabled }}}{{/user_can_lock}}\n        </div>\n      </div>\n    {{/copyable}}\n  {{/can_manage}}\n  {{#authored_by}}\n    <div class="action" data-action="delete">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_delete }}}</div>\n        <div class="title">{{ title_delete }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_delete }}}\n      </div>\n    </div>\n  {{/authored_by}}\n</div>\n'),this.SMT["study_aids/mobile_actions_list"]=function(e){return e||(e={}),SMTCache["study_aids/mobile_actions_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/mobile_resource_actions"]=Mustache.compile('{{#on_dash}}\n  <h2>\n    <span class="truncate-text">\n      {{title}}\n    </span>\n    <span class="close">\n      &times;\n    </span>\n  </h2>\n{{/on_dash}}\n{{#teams_frame}}\n  {{> study_aids/teams_actions_list }}\n{{/teams_frame}}\n{{^teams_frame}}\n  {{> study_aids/mobile_actions_list }}\n{{/teams_frame}}\n'),Mustache.compilePartial("study_aids/mobile_resource_actions",'{{#on_dash}}\n  <h2>\n    <span class="truncate-text">\n      {{title}}\n    </span>\n    <span class="close">\n      &times;\n    </span>\n  </h2>\n{{/on_dash}}\n{{#teams_frame}}\n  {{> study_aids/teams_actions_list }}\n{{/teams_frame}}\n{{^teams_frame}}\n  {{> study_aids/mobile_actions_list }}\n{{/teams_frame}}\n'),this.SMT["study_aids/mobile_resource_actions"]=function(e){return e||(e={}),SMTCache["study_aids/mobile_resource_actions"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/resource_actions"]=Mustache.compile('<div class="modal" role="dialog">\n  <div class="modal-dialog" role="document" aria-labelledby="actions_modal_title">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 id="actions_modal_title">{{ title }}</h2>\n      </div>\n      <div class="modal-body">\n        {{> study_aids/actions_list }}\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("study_aids/resource_actions",'<div class="modal" role="dialog">\n  <div class="modal-dialog" role="document" aria-labelledby="actions_modal_title">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2 id="actions_modal_title">{{ title }}</h2>\n      </div>\n      <div class="modal-body">\n        {{> study_aids/actions_list }}\n      </div>\n      <div class="modal-footer">\n        <a href="#" class="btn btn-cancel" data-dismiss="modal">{{ close }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["study_aids/resource_actions"]=function(e){return e||(e={}),SMTCache["study_aids/resource_actions"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/resource_tile_mobile"]=Mustache.compile('<div class="resource-tile-mobile resource" data-id="{{id}}">\n  <div class="resource-tile__content">\n    {{#user_has_pinned}}<div class="resource-tile__pin"></div>{{/user_has_pinned}}\n    <a class="resource-tile__link" href="{{url}}"></a>\n    <div class="resource-tile__img">\n      <div class="{{study_aid_type}} link_images"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">\n        {{ title }}\n      </div>\n      {{#show_updated_at}}\n        <span class="resource-tile__updated -truncate-text">\n          {{ updated_time_ago }}\n        </span>\n      {{/show_updated_at}}\n      {{^show_updated_at}}\n        {{#description}}\n          <div class="resource-tile__description">\n            {{ description }}\n          </div>\n        {{/description}}\n        {{^description}}\n          <span class="resource-tile__author -truncate-text">\n            {{ by_text }}\n            {{ author_name }}\n          </span>\n        {{/description}}\n      {{/show_updated_at}}\n    </div>\n    <div class="resource-tile__actions">\n      <i class="fa icon-ellipsis-vertical"></i>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("study_aids/resource_tile_mobile",'<div class="resource-tile-mobile resource" data-id="{{id}}">\n  <div class="resource-tile__content">\n    {{#user_has_pinned}}<div class="resource-tile__pin"></div>{{/user_has_pinned}}\n    <a class="resource-tile__link" href="{{url}}"></a>\n    <div class="resource-tile__img">\n      <div class="{{study_aid_type}} link_images"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">\n        {{ title }}\n      </div>\n      {{#show_updated_at}}\n        <span class="resource-tile__updated -truncate-text">\n          {{ updated_time_ago }}\n        </span>\n      {{/show_updated_at}}\n      {{^show_updated_at}}\n        {{#description}}\n          <div class="resource-tile__description">\n            {{ description }}\n          </div>\n        {{/description}}\n        {{^description}}\n          <span class="resource-tile__author -truncate-text">\n            {{ by_text }}\n            {{ author_name }}\n          </span>\n        {{/description}}\n      {{/show_updated_at}}\n    </div>\n    <div class="resource-tile__actions">\n      <i class="fa icon-ellipsis-vertical"></i>\n    </div>\n  </div>\n</div>\n'),this.SMT["study_aids/resource_tile_mobile"]=function(e){return e||(e={}),SMTCache["study_aids/resource_tile_mobile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/resource_tile_new"]=Mustache.compile('<div class="resource-tile resource col-lg-{{grid_cols}}\n  {{#is_deleted}}deleted_resource{{/is_deleted}}\n  {{#no_data_capture}}no_data_capture{{/no_data_capture}}\n  {{#copy_not_permitted}}copy_not_permitted{{/copy_not_permitted}}"\n  data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#dismissable}}\n      <a class="dismiss resource-tile__dismiss" title="{{dismiss_text}}">\n        <img src="/assets/icon_tile_dismiss.png">\n      </a>\n    {{/dismissable}}\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{#attempted_by}}<div class="resource-tile__tick"></div>{{/attempted_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      {{#show_description}}\n        <div class="resource-tile__description -truncate-text">{{description}}</div>\n      {{/show_description}}\n      {{^show_description}}\n        <span class="resource-tile__author -truncate-text">\n          {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n        </span>\n        {{^hide_ratings}}\n          <span class="resource_search_ratings">\n            <span id="rating_{{id}}"></span>\n          </span>\n        {{/hide_ratings}}\n      {{/show_description}}\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),Mustache.compilePartial("study_aids/resource_tile_new",'<div class="resource-tile resource col-lg-{{grid_cols}}\n  {{#is_deleted}}deleted_resource{{/is_deleted}}\n  {{#no_data_capture}}no_data_capture{{/no_data_capture}}\n  {{#copy_not_permitted}}copy_not_permitted{{/copy_not_permitted}}"\n  data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#dismissable}}\n      <a class="dismiss resource-tile__dismiss" title="{{dismiss_text}}">\n        <img src="/assets/icon_tile_dismiss.png">\n      </a>\n    {{/dismissable}}\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{#attempted_by}}<div class="resource-tile__tick"></div>{{/attempted_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      {{#show_description}}\n        <div class="resource-tile__description -truncate-text">{{description}}</div>\n      {{/show_description}}\n      {{^show_description}}\n        <span class="resource-tile__author -truncate-text">\n          {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n        </span>\n        {{^hide_ratings}}\n          <span class="resource_search_ratings">\n            <span id="rating_{{id}}"></span>\n          </span>\n        {{/hide_ratings}}\n      {{/show_description}}\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),this.SMT["study_aids/resource_tile_new"]=function(e){return e||(e={}),SMTCache["study_aids/resource_tile_new"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/sidebar_topic"]=Mustache.compile('<a class="name" data-id="{{topic_id}}">\n\t{{ name }}\n\t<div class="count{{^study_aid_count}} empty{{/study_aid_count}}">\n\t\t<span>(</span>{{ study_aid_count }}<span>)</span>\n\t</div>\n</a>\n{{#is_sortable}}\n  <div class="topic_drag_handle">\n    <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n  </div>\n{{/is_sortable}}\n'),Mustache.compilePartial("study_aids/sidebar_topic",'<a class="name" data-id="{{topic_id}}">\n\t{{ name }}\n\t<div class="count{{^study_aid_count}} empty{{/study_aid_count}}">\n\t\t<span>(</span>{{ study_aid_count }}<span>)</span>\n\t</div>\n</a>\n{{#is_sortable}}\n  <div class="topic_drag_handle">\n    <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n  </div>\n{{/is_sortable}}\n'),this.SMT["study_aids/sidebar_topic"]=function(e){return e||(e={}),SMTCache["study_aids/sidebar_topic"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["study_aids/teams_actions_list"]=Mustache.compile('<div id="actions_list" data-id="{{ study_aid_id }}">\n  {{#authored_by}}\n    <div class="action" data-action="edit">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_edit }}}</div>\n        <div class="title">{{ title_edit }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_edit }}}\n      </div>\n    </div>\n\n    <div class="action teams_submit" data-action="teams_submit">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_assignment_black.png" width="18" height="18"/>\n        <div class="title">{{ title_teams_submit }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#user_can_teams_submit}}{{{ description_teams_submit }}}{{/user_can_teams_submit}}\n          {{^user_can_teams_submit}}{{{ description_teams_submit_disabled }}}{{/user_can_teams_submit}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_teams_submit_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    <div class="action"\n         data-action="share_to_teams_internal"\n         data-type="{{ teams_data_type }}"\n         data-url="{{ teams_data_url }}"\n         data-message="{{ teams_data_message }}"\n         data-preview="{{ teams_data_preview }}">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_share_to_teams }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_share_to_teams }}}\n      </div>\n    </div>\n\n    <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_share }}}</div>\n        <div class="title">{{ title_share }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_share}}{{{ description_share }}}{{/can_share}}\n          {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    <div class="action" data-action="rename">\n      <div class="action_icon">\n          <div class="icon">{{{ icon_rename }}}</div>\n          <div class="title">{{ title_edit_meta }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_edit_meta }}}\n      </div>\n    </div>\n\n    <div class="action" data-action="move">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_move }}}</div>\n        <div class="title">{{ title_move }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_move }}}\n      </div>\n    </div>\n  {{/authored_by}}\n\n\n  {{^authored_by}}\n    <div class="action" data-action="play">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_play }}}\n      </div>\n    </div>\n\n    <div class="action"\n         data-action="share_to_teams_internal"\n         data-type="{{ teams_data_type }}"\n         data-url="{{ teams_data_url }}"\n         data-message="{{ teams_data_message }}"\n         data-preview="{{ teams_data_preview }}">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_share_to_teams }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_share_to_teams }}}\n      </div>\n    </div>\n\n    <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_share }}}</div>\n        <div class="title">{{ title_share }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_share}}{{{ description_share }}}{{/can_share}}\n          {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    {{^pinned_by}}\n      <div class="action pin {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_pin }}}</div>\n          <div class="title">{{ title_pin }}</div>\n        </div>\n        <div class="action_text">\n          {{#signed_in}}{{{ description_pin }}}{{/signed_in}}\n          {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n        </div>\n      </div>\n    {{/pinned_by}}\n    {{#pinned_by}}\n      <div class="action" data-action="unpin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unpin }}}</div>\n          <div class="title">{{ title_unpin }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unpin }}}\n        </div>\n      </div>\n    {{/pinned_by}}\n  {{/authored_by}}\n</div>\n'),Mustache.compilePartial("study_aids/teams_actions_list",'<div id="actions_list" data-id="{{ study_aid_id }}">\n  {{#authored_by}}\n    <div class="action" data-action="edit">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_edit }}}</div>\n        <div class="title">{{ title_edit }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_edit }}}\n      </div>\n    </div>\n\n    <div class="action teams_submit" data-action="teams_submit">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_assignment_black.png" width="18" height="18"/>\n        <div class="title">{{ title_teams_submit }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#user_can_teams_submit}}{{{ description_teams_submit }}}{{/user_can_teams_submit}}\n          {{^user_can_teams_submit}}{{{ description_teams_submit_disabled }}}{{/user_can_teams_submit}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_teams_submit_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    <div class="action"\n         data-action="share_to_teams_internal"\n         data-type="{{ teams_data_type }}"\n         data-url="{{ teams_data_url }}"\n         data-message="{{ teams_data_message }}"\n         data-preview="{{ teams_data_preview }}">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_share_to_teams }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_share_to_teams }}}\n      </div>\n    </div>\n\n    <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_share }}}</div>\n        <div class="title">{{ title_share }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_share}}{{{ description_share }}}{{/can_share}}\n          {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    <div class="action" data-action="rename">\n      <div class="action_icon">\n          <div class="icon">{{{ icon_rename }}}</div>\n          <div class="title">{{ title_edit_meta }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_edit_meta }}}\n      </div>\n    </div>\n\n    <div class="action" data-action="move">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_move }}}</div>\n        <div class="title">{{ title_move }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_move }}}\n      </div>\n    </div>\n  {{/authored_by}}\n\n\n  {{^authored_by}}\n    <div class="action" data-action="play">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_play }}}</div>\n        <div class="title">{{ title_play }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_play }}}\n      </div>\n    </div>\n\n    <div class="action"\n         data-action="share_to_teams_internal"\n         data-type="{{ teams_data_type }}"\n         data-url="{{ teams_data_url }}"\n         data-message="{{ teams_data_message }}"\n         data-preview="{{ teams_data_preview }}">\n      <div class="action_icon">\n        <img src="/assets/social/microsoft/teams_share_logo_50x50.png" width="20" height="20"/>\n        <div class="title">{{ title_share_to_teams }}</div>\n      </div>\n      <div class="action_text">\n        {{{ description_share_to_teams }}}\n      </div>\n    </div>\n\n    <div class="action share {{^can_share}}disabled{{/can_share}}" data-action="share">\n      <div class="action_icon">\n        <div class="icon">{{{ icon_share }}}</div>\n        <div class="title">{{ title_share }}</div>\n      </div>\n      <div class="action_text">\n        {{#signed_in}}\n          {{#can_share}}{{{ description_share }}}{{/can_share}}\n          {{^can_share}}{{{ description_share_disabled }}}{{/can_share}}\n        {{/signed_in}}\n        {{^signed_in}}{{{ description_share_unauth }}}{{/signed_in}}\n      </div>\n    </div>\n\n    {{^pinned_by}}\n      <div class="action pin {{^signed_in}}disabled{{/signed_in}}" data-action="pin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_pin }}}</div>\n          <div class="title">{{ title_pin }}</div>\n        </div>\n        <div class="action_text">\n          {{#signed_in}}{{{ description_pin }}}{{/signed_in}}\n          {{^signed_in}}{{{ description_pin_unauth }}}{{/signed_in}}\n        </div>\n      </div>\n    {{/pinned_by}}\n    {{#pinned_by}}\n      <div class="action" data-action="unpin">\n        <div class="action_icon">\n          <div class="icon">{{{ icon_unpin }}}</div>\n          <div class="title">{{ title_unpin }}</div>\n        </div>\n        <div class="action_text">\n          {{{ description_unpin }}}\n        </div>\n      </div>\n    {{/pinned_by}}\n  {{/authored_by}}\n</div>\n'),this.SMT["study_aids/teams_actions_list"]=function(e){return e||(e={}),SMTCache["study_aids/teams_actions_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["subjects/tile"]=Mustache.compile('<div class="resource">\n  <div class="tile subject_tile">\n    <a href="{{url}}">\n      <div class="tile_header">\n        <div class="tile_title">\n          <h3>\n            {{name}}\n          </h3>\n        </div>\n        <div class="tile_exam_level">\n          {{#exam_level}}\n            <h4>{{exam_level}}</h4>\n          {{/exam_level}}\n        </div>\n      </div>\n    </a>\n    <div class="tile_footer">\n      {{^default}}\n        <a class="edit" href="{{edit_url}}">\n          <div class="sprite bg-icon-gear settings"></div>\n        </a>\n      {{/default}}\n      <i class="subject_icon {{icon}}"></i>\n      <span class="additional_info">\n        <p>{{{ additional_info }}}</p>\n      </span>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("subjects/tile",'<div class="resource">\n  <div class="tile subject_tile">\n    <a href="{{url}}">\n      <div class="tile_header">\n        <div class="tile_title">\n          <h3>\n            {{name}}\n          </h3>\n        </div>\n        <div class="tile_exam_level">\n          {{#exam_level}}\n            <h4>{{exam_level}}</h4>\n          {{/exam_level}}\n        </div>\n      </div>\n    </a>\n    <div class="tile_footer">\n      {{^default}}\n        <a class="edit" href="{{edit_url}}">\n          <div class="sprite bg-icon-gear settings"></div>\n        </a>\n      {{/default}}\n      <i class="subject_icon {{icon}}"></i>\n      <span class="additional_info">\n        <p>{{{ additional_info }}}</p>\n      </span>\n    </div>\n  </div>\n</div>\n'),this.SMT["subjects/tile"]=function(e){return e||(e={}),SMTCache["subjects/tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),
this.SMTCache["subjects/analytics/resource"]=Mustache.compile('<div class="col-12 {{#is_deleted}}deleted_resource{{/is_deleted}} subject_slim_resource">\n\n\t<div class="row">\n\n\t\t<div class="col-5 title">\n      <div class="tile_container">\n        <div class="icon_tile_small_type">\n          {{#pinned_by}}\n                {{{icon_tilesmall_pin}}}\n          {{/pinned_by}}\n        </div>\n        <div class="tile_small">\n          {{{ study_aid_image_tag }}}\n        </div>\n      </div>\n      <h3>{{title}}</h3>\n\t\t</div>\n\n\t\t<div class="col-1 progress_text">\n\t\t\t<span>\n\t\t\t\t{{#has_performed}}\n\t\t\t\t\t{{performance_value}}%\n\t\t\t\t{{/has_performed}}\n\t\t\t</span>\n\t\t\t<span class="progress_graph">\n\t\t\t\t<canvas class="plot" height="40" width="40"></canvas>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="col-2 tag_count">\n\t\t\t<div class="sprite bg-icon-price_tag" title="{{label_tag_count}}"></div>\n      {{tag_count}}\n\t\t  {{#suggested_tags}}\n\t\t    <a class="suggested_tags_btn">\n\t\t      ({{label_suggested_tags}})\n\t\t    </a>\n\t\t  {{/suggested_tags}}\n\t\t</div>\n\n\t\t<div class="col-1 view_count">\n      <div class="sprite bg-icon-eye" title="{{label_view_count}}"></div>\n      {{view_count}}\n\t\t</div>\n\n\t\t<div class="col-1">\n\t      {{{state_icon}}}\n\t\t</div>\n\n\t\t<div class="col-2">\n\t\t\t{{>subjects/shared/slim_resource_actions}}\n\t\t</div>\n\n\t</div>\n\n</div>\n'),Mustache.compilePartial("subjects/analytics/resource",'<div class="col-12 {{#is_deleted}}deleted_resource{{/is_deleted}} subject_slim_resource">\n\n\t<div class="row">\n\n\t\t<div class="col-5 title">\n      <div class="tile_container">\n        <div class="icon_tile_small_type">\n          {{#pinned_by}}\n                {{{icon_tilesmall_pin}}}\n          {{/pinned_by}}\n        </div>\n        <div class="tile_small">\n          {{{ study_aid_image_tag }}}\n        </div>\n      </div>\n      <h3>{{title}}</h3>\n\t\t</div>\n\n\t\t<div class="col-1 progress_text">\n\t\t\t<span>\n\t\t\t\t{{#has_performed}}\n\t\t\t\t\t{{performance_value}}%\n\t\t\t\t{{/has_performed}}\n\t\t\t</span>\n\t\t\t<span class="progress_graph">\n\t\t\t\t<canvas class="plot" height="40" width="40"></canvas>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="col-2 tag_count">\n\t\t\t<div class="sprite bg-icon-price_tag" title="{{label_tag_count}}"></div>\n      {{tag_count}}\n\t\t  {{#suggested_tags}}\n\t\t    <a class="suggested_tags_btn">\n\t\t      ({{label_suggested_tags}})\n\t\t    </a>\n\t\t  {{/suggested_tags}}\n\t\t</div>\n\n\t\t<div class="col-1 view_count">\n      <div class="sprite bg-icon-eye" title="{{label_view_count}}"></div>\n      {{view_count}}\n\t\t</div>\n\n\t\t<div class="col-1">\n\t      {{{state_icon}}}\n\t\t</div>\n\n\t\t<div class="col-2">\n\t\t\t{{>subjects/shared/slim_resource_actions}}\n\t\t</div>\n\n\t</div>\n\n</div>\n'),this.SMT["subjects/analytics/resource"]=function(e){return e||(e={}),SMTCache["subjects/analytics/resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["subjects/archive/index"]=Mustache.compile('<div id="archive_header">\n  <h2>{{ title }}</h2>\n\n  <p>{{ description }}</p>\n\n</div>\n\n<div id="archive_list"></div>\n'),Mustache.compilePartial("subjects/archive/index",'<div id="archive_header">\n  <h2>{{ title }}</h2>\n\n  <p>{{ description }}</p>\n\n</div>\n\n<div id="archive_list"></div>\n'),this.SMT["subjects/archive/index"]=function(e){return e||(e={}),SMTCache["subjects/archive/index"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["subjects/shared/slim_resource_actions"]=Mustache.compile('<span class="actions">\n\n  {{^is_deleted}}\n    <a class="icon_slim_play icon-tooltip" href="{{url}}" data-placement="bottom" title={{label_view_icon}}></a>\n  {{/is_deleted}}\n\n  {{#owned_by_user}}\n    <a class="icon_slim_edit icon-tooltip" href="{{edit_url}}" data-placement="bottom" title={{label_edit_icon}}></a>\n  {{/owned_by_user}}\n\n  <span class="dropdown">\n\n      <a class="icon_slim_related dropdown-toggle icon-tooltip" data-toggle="dropdown" href="#" data-placement="bottom" title={{label_actions_icon}}></a>\n\n      <div class="dropdown-menu dropdown-menu-right subject_manage_dropdown">\n\n      \t<div class="arrow"></div>\n\n      \t<ul role="menu">\n\n      \t\t{{^is_deleted}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="{{url}}" class=\'popup_resource\' data-id="{{id}}">{{label_view_mode}}</a></li>\n      \t\t{{/is_deleted}}\n\n      \t\t{{#owned_by_user}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="{{edit_url}}" class="additional_option">{{edit_tooltip}}</a></li>\n      \t\t{{/owned_by_user}}\n\n      \t\t{{^is_deleted}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_info" data-id="{{id}}">{{label_details}}</a></li>\n      \t\t{{/is_deleted}}\n\n      \t\t{{#owned_by_user}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_edit_info" data-id="{{id}}">{{label_edit_details}}</a></li>\n      \t\t{{/owned_by_user}}\n\n    \t\t  <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_stats" data-id="{{id}}">{{label_performance}}</a></li>\n\n      \t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_remove" data-id="{{id}}">\n      \t\t\t{{#pinned_by}} {{label_unpin}} {{/pinned_by}}\n      \t\t\t{{^pinned_by}} {{label_delete}} {{/pinned_by}}\n      \t\t</a></li>\n\n      \t</ul>\n\n      </div>\n\n  </span>\n\n</span>\n'),Mustache.compilePartial("subjects/shared/slim_resource_actions",'<span class="actions">\n\n  {{^is_deleted}}\n    <a class="icon_slim_play icon-tooltip" href="{{url}}" data-placement="bottom" title={{label_view_icon}}></a>\n  {{/is_deleted}}\n\n  {{#owned_by_user}}\n    <a class="icon_slim_edit icon-tooltip" href="{{edit_url}}" data-placement="bottom" title={{label_edit_icon}}></a>\n  {{/owned_by_user}}\n\n  <span class="dropdown">\n\n      <a class="icon_slim_related dropdown-toggle icon-tooltip" data-toggle="dropdown" href="#" data-placement="bottom" title={{label_actions_icon}}></a>\n\n      <div class="dropdown-menu dropdown-menu-right subject_manage_dropdown">\n\n      \t<div class="arrow"></div>\n\n      \t<ul role="menu">\n\n      \t\t{{^is_deleted}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="{{url}}" class=\'popup_resource\' data-id="{{id}}">{{label_view_mode}}</a></li>\n      \t\t{{/is_deleted}}\n\n      \t\t{{#owned_by_user}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="{{edit_url}}" class="additional_option">{{edit_tooltip}}</a></li>\n      \t\t{{/owned_by_user}}\n\n      \t\t{{^is_deleted}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_info" data-id="{{id}}">{{label_details}}</a></li>\n      \t\t{{/is_deleted}}\n\n      \t\t{{#owned_by_user}}\n      \t\t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_edit_info" data-id="{{id}}">{{label_edit_details}}</a></li>\n      \t\t{{/owned_by_user}}\n\n    \t\t  <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_stats" data-id="{{id}}">{{label_performance}}</a></li>\n\n      \t\t<li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="resource_remove" data-id="{{id}}">\n      \t\t\t{{#pinned_by}} {{label_unpin}} {{/pinned_by}}\n      \t\t\t{{^pinned_by}} {{label_delete}} {{/pinned_by}}\n      \t\t</a></li>\n\n      \t</ul>\n\n      </div>\n\n  </span>\n\n</span>\n'),this.SMT["subjects/shared/slim_resource_actions"]=function(e){return e||(e={}),SMTCache["subjects/shared/slim_resource_actions"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/tile"]=Mustache.compile('<div class="resource">\n\t<div class="tile subject_tile">\n\t\t<a href="{{url}}">\n\t\t\t<div class="tile_header">\n\t      <div class="tile_title">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<div class="tile_footer">\n\t\t\t<i class="subject_icon {{icon}}"></i>\n\t\t\t<span class="additional_info">\n\t\t\t\t<p>{{{ additional_info }}}</p>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n'),Mustache.compilePartial("suggested_content/tile",'<div class="resource">\n\t<div class="tile subject_tile">\n\t\t<a href="{{url}}">\n\t\t\t<div class="tile_header">\n\t      <div class="tile_title">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t\t<div class="tile_footer">\n\t\t\t<i class="subject_icon {{icon}}"></i>\n\t\t\t<span class="additional_info">\n\t\t\t\t<p>{{{ additional_info }}}</p>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n'),this.SMT["suggested_content/tile"]=function(e){return e||(e={}),SMTCache["suggested_content/tile"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/empty_list"]=Mustache.compile('<div class="dashboard_title_container clearfix">\n  <h1>{{{heading}}}</h1>\n</div>\n<div class="suggested_resource_results_list">\n  <div class="results_container">\n    <div class="empty_list">\n      <div class="empty_list_heading">\n        {{empty_list_heading}}\n      </div>\n      <div class="empty_list_body">\n        {{tooltip_text}}\n      </div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("suggested_content/empty_list",'<div class="dashboard_title_container clearfix">\n  <h1>{{{heading}}}</h1>\n</div>\n<div class="suggested_resource_results_list">\n  <div class="results_container">\n    <div class="empty_list">\n      <div class="empty_list_heading">\n        {{empty_list_heading}}\n      </div>\n      <div class="empty_list_body">\n        {{tooltip_text}}\n      </div>\n    </div>\n  </div>\n</div>\n'),this.SMT["suggested_content/empty_list"]=function(e){return e||(e={}),SMTCache["suggested_content/empty_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/results_list"]=Mustache.compile('{{^hide_heading}}\n  <div class="dashboard_title_container clearfix">\n    <h1>{{{heading}}}</h1>\n    {{#tooltip_text}}\n      <a href="#" class="what_is_this" title="{{tooltip_text}}">\n        <i class="icon-question-sign"></i>\n      </a>\n    {{/tooltip_text}}\n  </div>\n{{/hide_heading}}\n<div class="suggested_resource_results_list">\n  <div class="results_container">\n  </div>\n</div>\n{{> search/fetch_more }}\n'),Mustache.compilePartial("suggested_content/results_list",'{{^hide_heading}}\n  <div class="dashboard_title_container clearfix">\n    <h1>{{{heading}}}</h1>\n    {{#tooltip_text}}\n      <a href="#" class="what_is_this" title="{{tooltip_text}}">\n        <i class="icon-question-sign"></i>\n      </a>\n    {{/tooltip_text}}\n  </div>\n{{/hide_heading}}\n<div class="suggested_resource_results_list">\n  <div class="results_container">\n  </div>\n</div>\n{{> search/fetch_more }}\n'),this.SMT["suggested_content/results_list"]=function(e){return e||(e={}),SMTCache["suggested_content/results_list"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/sidebar_filters"]=Mustache.compile('<div id="sidebar_heading">\n  {{sidebar_heading}}\n</div>\n<div id="accordion" class="suggested_filters sidebar_filter" role="tablist" aria-multiselectable="true">\n  <div class="panel panel-default suggested_filter" data-basis="profile">\n    <div class="panel-heading" role="tab" id="headingOne">\n      <a class="collapsed panel_heading_profile" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">\n        <span class="sprite bg-icon-user_black_female"></span>\n        {{profile_title}}\n      </a>\n    </div>\n    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">\n      <div class=\'panel-footer\'>{{{ extend_profile_prompt_text }}}</div>\n    </div>\n  </div>\n  <div class="panel panel-default suggested_filter" data-basis="subjects">\n    <div class="panel-heading" role="tab" id="headingTwo">\n      <a class="collapsed panel_heading_subjects" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">\n        <span class="sprite bg-icon-folder_open_document_text"></span>\n        {{subjects_title}}\n      </a>\n    </div>\n    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">\n      <form class="subjects_check">\n        {{#subjects}}\n          <input id="check_{{id}}" type="checkbox" name="subjects_subject_ids" value="{{id}}" checked><label for="check_{{id}}">{{name}}</label>\n        {{/subjects}}\n      </form>\n      <div class=\'panel-footer\'>{{{ manage_subjects_prompt_text }}}</div>\n    </div>\n  </div>\n</div>\n'),Mustache.compilePartial("suggested_content/sidebar_filters",'<div id="sidebar_heading">\n  {{sidebar_heading}}\n</div>\n<div id="accordion" class="suggested_filters sidebar_filter" role="tablist" aria-multiselectable="true">\n  <div class="panel panel-default suggested_filter" data-basis="profile">\n    <div class="panel-heading" role="tab" id="headingOne">\n      <a class="collapsed panel_heading_profile" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">\n        <span class="sprite bg-icon-user_black_female"></span>\n        {{profile_title}}\n      </a>\n    </div>\n    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">\n      <div class=\'panel-footer\'>{{{ extend_profile_prompt_text }}}</div>\n    </div>\n  </div>\n  <div class="panel panel-default suggested_filter" data-basis="subjects">\n    <div class="panel-heading" role="tab" id="headingTwo">\n      <a class="collapsed panel_heading_subjects" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">\n        <span class="sprite bg-icon-folder_open_document_text"></span>\n        {{subjects_title}}\n      </a>\n    </div>\n    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">\n      <form class="subjects_check">\n        {{#subjects}}\n          <input id="check_{{id}}" type="checkbox" name="subjects_subject_ids" value="{{id}}" checked><label for="check_{{id}}">{{name}}</label>\n        {{/subjects}}\n      </form>\n      <div class=\'panel-footer\'>{{{ manage_subjects_prompt_text }}}</div>\n    </div>\n  </div>\n</div>\n'),this.SMT["suggested_content/sidebar_filters"]=function(e){return e||(e={}),SMTCache["suggested_content/sidebar_filters"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/suggested_content_page"]=Mustache.compile('<div class="col-lg-8 col-12" id="center_container">\n  <div id="center_section">\n    <div id="suggested_content_page_container" class="suggested_content_container">\n      <div id="suggested_content">\n      </div>\n    </div>\n  </div>\n</div>\n<div id="right_sidebar_container" class="sidebar_container col-lg-4 col-12">\n</div>\n'),Mustache.compilePartial("suggested_content/suggested_content_page",'<div class="col-lg-8 col-12" id="center_container">\n  <div id="center_section">\n    <div id="suggested_content_page_container" class="suggested_content_container">\n      <div id="suggested_content">\n      </div>\n    </div>\n  </div>\n</div>\n<div id="right_sidebar_container" class="sidebar_container col-lg-4 col-12">\n</div>\n'),this.SMT["suggested_content/suggested_content_page"]=function(e){return e||(e={}),SMTCache["suggested_content/suggested_content_page"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["suggested_content/suggested_resource"]=Mustache.compile('<div class="resource-tile resource col-lg-{{grid_cols}} {{#is_deleted}}deleted_resource{{/is_deleted}}" data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      <span class="resource-tile__author -truncate-text">\n        {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n      </span>\n      <span class="resource_search_ratings">\n        <span id="rating_{{id}}"></span>\n      </span>\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),Mustache.compilePartial("suggested_content/suggested_resource",'<div class="resource-tile resource col-lg-{{grid_cols}} {{#is_deleted}}deleted_resource{{/is_deleted}}" data-id="{{id}}">\n  <div class="resource-tile__content clearfix">\n    {{^is_deleted}}<a class="resource-tile__link" href="{{url}}"></a>{{/is_deleted}}\n    {{#is_draggable}}\n      <div class="resource-tile__drag">\n        <img class="icon_subjects_handle" src="/assets/icon_subjects_handle.png">\n      </div>\n    {{/is_draggable}}\n    <div class="resource-tile__handles">\n      {{#show_checkbox}}<input type="checkbox" class="resource-tile__checkbox select_resource" />{{/show_checkbox}}\n    </div>\n    {{#pinned_by}}<div class="resource-tile__pin"></div>{{/pinned_by}}\n    {{^hide_tile_controls}}\n      <div class="resource-tile__buttons">\n        <button type="button" class="resource-tile__button resource-tile__button--actions btn_actions">{{actions_tooltip}}</button>\n        <button type="button" class="resource-tile__button resource-tile__button--info resource_info" data-id="{{id}}">{{info_tooltip}}</button>\n      </div>\n    {{/hide_tile_controls}}\n    <div class="resource-tile__img">\n      <div class="link_images {{study_aid_type}}"></div>\n    </div>\n    <div class="resource-tile__body">\n      <div class="resource-tile__title -truncate-text tex2jax_ignore">{{title}}</div>\n      <span class="resource-tile__author -truncate-text">\n        {{by_text}} <a href="{{author_profile_url}}">{{author_name}}</a>\n      </span>\n      <span class="resource_search_ratings">\n        <span id="rating_{{id}}"></span>\n      </span>\n    </div>\n    {{#hide_tile_controls}}\n      <div class="tile_overlay"></div>\n    {{/hide_tile_controls}}\n  </div>\n</div>\n'),this.SMT["suggested_content/suggested_resource"]=function(e){return e||(e={}),SMTCache["suggested_content/suggested_resource"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/attempts"]=Mustache.compile('<div class="performance_results">\n\t<div class="row attempts_view_switch">\n\t\t<div class="col-12">\n\t\t\t<div class="attempts">\n\t\t\t\t<div id="my_attempts" class="btn btn-default active">\n\t        <i class="icon-user"></i>\n\t        {{user_attempts_nav}}\n\t      </div>\n\t      <div id="global_attempts" class="btn btn-default">\n\t        <i class="icon-globe"></i>\n\t        {{global_attempts_nav}}\n\t      </div>\n        <a href="#" class="what_is_this" data-placement="bottom" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n          <i class="icon-question-sign"></i>\n        </a>\n\t\t\t </div>\n\t\t</div>\n\t</div>\n\n\t<div class="row">\n\t\t<div class="col-12">\n\t\t\t<div class="user_attempt_graph" style="display: none"></div>\n\t\t\t<div class="global_attempt_graph" style="display: none"></div>\n\t\t</div>\n\t</div>\n</div>\n'),Mustache.compilePartial("user_performance/attempts",'<div class="performance_results">\n\t<div class="row attempts_view_switch">\n\t\t<div class="col-12">\n\t\t\t<div class="attempts">\n\t\t\t\t<div id="my_attempts" class="btn btn-default active">\n\t        <i class="icon-user"></i>\n\t        {{user_attempts_nav}}\n\t      </div>\n\t      <div id="global_attempts" class="btn btn-default">\n\t        <i class="icon-globe"></i>\n\t        {{global_attempts_nav}}\n\t      </div>\n        <a href="#" class="what_is_this" data-placement="bottom" data-title="{{tooltip_text}}" data-toggle="tooltip" data-original-title="" title="">\n          <i class="icon-question-sign"></i>\n        </a>\n\t\t\t </div>\n\t\t</div>\n\t</div>\n\n\t<div class="row">\n\t\t<div class="col-12">\n\t\t\t<div class="user_attempt_graph" style="display: none"></div>\n\t\t\t<div class="global_attempt_graph" style="display: none"></div>\n\t\t</div>\n\t</div>\n</div>\n'),this.SMT["user_performance/attempts"]=function(e){return e||(e={}),SMTCache["user_performance/attempts"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/completion_metrics"]=Mustache.compile('<div class="performance_metrics">\n\t<div class="row">\n\t\t<div class="col-6">\n\t\t\t<div class="completion_metrics_info">{{the_score}}</div>\n\t\t\t<div class="completion_metrics_sub_info">{{sub_info}}</div>\n\t\t</div>\n\t\t<div class="col-6">\n\t\t\t<div class="completion_metrics_chart">\n\t\t\t  <canvas id="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),Mustache.compilePartial("user_performance/completion_metrics",'<div class="performance_metrics">\n\t<div class="row">\n\t\t<div class="col-6">\n\t\t\t<div class="completion_metrics_info">{{the_score}}</div>\n\t\t\t<div class="completion_metrics_sub_info">{{sub_info}}</div>\n\t\t</div>\n\t\t<div class="col-6">\n\t\t\t<div class="completion_metrics_chart">\n\t\t\t  <canvas id="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),this.SMT["user_performance/completion_metrics"]=function(e){return e||(e={}),SMTCache["user_performance/completion_metrics"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/global_attempts"]=Mustache.compile('{{#show_chart_legend}}\n  <div class="row">\n    <div class="col-12">\n      <div id="chart_all_toggle">\n        <div class=\'all\' style=\'display: none\'>{{toggle_historic_all}}</div>\n        <div class=\'current\'>{{toggle_historic_current}}</div>\n        <div><input id="toggle_historic" type="checkbox"> <label for="toggle_historic">{{toggle_historic_label}}</label></div>\n      </div>\n    </div>\n  </div>\n{{/show_chart_legend}}\n<div class="row">\n  <div class="col-12">\n    <span class="attempts_chart">\n      <canvas id="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n      <canvas id="plot_historic" width="{{canvas_historic_width}}" height="{{canvas_height}}" style="display: none"></canvas>\n    </span>\n  </div>\n</div>\n\n<div class="score_container publicmeta_sub">\n\t<div class="row">\n\t  <ul class ="scores">\n\t    <div class="col-12 col-sm-4">\n\t      <li>\n\t        <div class="score_label">{{score_label_1}}</div>\n\t        <div class="average_score score_value"></div>\n\t      </li>\n\t   </div>\n\t   <div class="col-12 col-sm-4">\n\t    <li>\n\t      <div class="score_label">{{score_label_2}}</div>\n\t      <div class="best_score score_value"></div>\n\t    </li>\n\t   </div>\n\t    <div class="col-12 col-sm-4">\n\t      <li>\n\t        <div class="score_label">{{score_label_3}}</div>\n\t        <div class="total_attempts score_value"></div>\n\t      </li>\n\t   </div>\n\t  </ul>\n\t</div>\n</div>\n'),Mustache.compilePartial("user_performance/global_attempts",'{{#show_chart_legend}}\n  <div class="row">\n    <div class="col-12">\n      <div id="chart_all_toggle">\n        <div class=\'all\' style=\'display: none\'>{{toggle_historic_all}}</div>\n        <div class=\'current\'>{{toggle_historic_current}}</div>\n        <div><input id="toggle_historic" type="checkbox"> <label for="toggle_historic">{{toggle_historic_label}}</label></div>\n      </div>\n    </div>\n  </div>\n{{/show_chart_legend}}\n<div class="row">\n  <div class="col-12">\n    <span class="attempts_chart">\n      <canvas id="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n      <canvas id="plot_historic" width="{{canvas_historic_width}}" height="{{canvas_height}}" style="display: none"></canvas>\n    </span>\n  </div>\n</div>\n\n<div class="score_container publicmeta_sub">\n\t<div class="row">\n\t  <ul class ="scores">\n\t    <div class="col-12 col-sm-4">\n\t      <li>\n\t        <div class="score_label">{{score_label_1}}</div>\n\t        <div class="average_score score_value"></div>\n\t      </li>\n\t   </div>\n\t   <div class="col-12 col-sm-4">\n\t    <li>\n\t      <div class="score_label">{{score_label_2}}</div>\n\t      <div class="best_score score_value"></div>\n\t    </li>\n\t   </div>\n\t    <div class="col-12 col-sm-4">\n\t      <li>\n\t        <div class="score_label">{{score_label_3}}</div>\n\t        <div class="total_attempts score_value"></div>\n\t      </li>\n\t   </div>\n\t  </ul>\n\t</div>\n</div>\n'),this.SMT["user_performance/global_attempts"]=function(e){return e||(e={}),SMTCache["user_performance/global_attempts"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/note_metrics"]=Mustache.compile('<div class="tab_inner">\n\t<div class="row">\n\t\t<div class="col-12">\n\t    <div class="note_study_aid_clippings_title">\n\t      <h3>{{title}}</h3>\n\t    </div>\n\t\t\t<div class="note_study_aid_clippings_content">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),Mustache.compilePartial("user_performance/note_metrics",'<div class="tab_inner">\n\t<div class="row">\n\t\t<div class="col-12">\n\t    <div class="note_study_aid_clippings_title">\n\t      <h3>{{title}}</h3>\n\t    </div>\n\t\t\t<div class="note_study_aid_clippings_content">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),this.SMT["user_performance/note_metrics"]=function(e){return e||(e={}),SMTCache["user_performance/note_metrics"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/scoreboard_attempt"]=Mustache.compile('<div class="score_entry{{#trackable}} trackable{{/trackable}}{{#average}} average{{/average}}">\n  <div class="score_bar" data-score="{{result}}" {{#result_tracked}}data-score-tracked="{{result_tracked}}"{{/result_tracked}}></div>\n  <div class="score_content">\n    {{#view_more}}<div class=\'score_more icon_slim_related icon-tooltip\' data-id="{{id}}" data-type="{{resource_type}}" data-placement="bottom" title="{{breakdown_tooltip}}"></div>{{/view_more}}\n    {{#display_result_tracked}}<div class=\'score_value_tracked\' style="display: none">{{display_result_tracked}}</div>{{/display_result_tracked}}\n    <div class=\'score_value\'>{{display_result}}</div>\n    <div class="score_icon{{#resource}} resource{{/resource}}">{{{avatar}}}</div>\n    <div class="score_name">\n      <div>{{name}}</div>\n      {{^trackable}}\n        <div class=\'score_attempts\'>\n          {{#attempts_list}}\n            <a class="show_attempts" href="#">{{attempts_text}}</a>\n            <ul style="display: none">{{{attempts_list}}}</ul>\n          {{/attempts_list}}\n          {{^attempts_list}}{{attempts_text}}{{/attempts_list}}\n        </div>\n      {{/trackable}}\n      {{#average}}\n        <div class=\'score_attempts\'>\n          {{ number_taken_string }}\n        </div>\n      {{/average}}\n    </div>\n  </div>\n</div>'),Mustache.compilePartial("user_performance/scoreboard_attempt",'<div class="score_entry{{#trackable}} trackable{{/trackable}}{{#average}} average{{/average}}">\n  <div class="score_bar" data-score="{{result}}" {{#result_tracked}}data-score-tracked="{{result_tracked}}"{{/result_tracked}}></div>\n  <div class="score_content">\n    {{#view_more}}<div class=\'score_more icon_slim_related icon-tooltip\' data-id="{{id}}" data-type="{{resource_type}}" data-placement="bottom" title="{{breakdown_tooltip}}"></div>{{/view_more}}\n    {{#display_result_tracked}}<div class=\'score_value_tracked\' style="display: none">{{display_result_tracked}}</div>{{/display_result_tracked}}\n    <div class=\'score_value\'>{{display_result}}</div>\n    <div class="score_icon{{#resource}} resource{{/resource}}">{{{avatar}}}</div>\n    <div class="score_name">\n      <div>{{name}}</div>\n      {{^trackable}}\n        <div class=\'score_attempts\'>\n          {{#attempts_list}}\n            <a class="show_attempts" href="#">{{attempts_text}}</a>\n            <ul style="display: none">{{{attempts_list}}}</ul>\n          {{/attempts_list}}\n          {{^attempts_list}}{{attempts_text}}{{/attempts_list}}\n        </div>\n      {{/trackable}}\n      {{#average}}\n        <div class=\'score_attempts\'>\n          {{ number_taken_string }}\n        </div>\n      {{/average}}\n    </div>\n  </div>\n</div>'),this.SMT["user_performance/scoreboard_attempt"]=function(e){return e||(e={}),SMTCache["user_performance/scoreboard_attempt"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/single_user_attempt"]=Mustache.compile('<h3>\n  <div class="attempt" data-id="{{attempt_id}}">\n    <span class="attempt_date">{{attempt_date}}</span>\n    <span class="attempt_score">{{attempt_score}}</span>\n    {{#is_quiz}}\n      <a href="#" class="attempt_popup">{{attempt_link_text}}</a>\n    {{/is_quiz}}\n  </div>\n</h3>\n'),Mustache.compilePartial("user_performance/single_user_attempt",'<h3>\n  <div class="attempt" data-id="{{attempt_id}}">\n    <span class="attempt_date">{{attempt_date}}</span>\n    <span class="attempt_score">{{attempt_score}}</span>\n    {{#is_quiz}}\n      <a href="#" class="attempt_popup">{{attempt_link_text}}</a>\n    {{/is_quiz}}\n  </div>\n</h3>\n'),this.SMT["user_performance/single_user_attempt"]=function(e){return e||(e={}),SMTCache["user_performance/single_user_attempt"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/study_aid_clipping_metrics"]=Mustache.compile('<div class="study_aid_clipping_metrics {{#is_deleted}}deleted_resource{{/is_deleted}}">\n\n\t<div class="value">\n\t\t{{#has_performed}}\n      {{performance_value}}%\n    {{/has_performed}}\n    {{{state_icon}}}\n\t</div>\n\n\t<div class="title">\n  \t<div class="tile_container">\n\t\t\t<div class="icon_tile_small_type">\n\t\t\t\t{{#pinned_by}}\n      \t\t{{{icon_tilesmall_pin}}}\n\t\t\t\t{{/pinned_by}}\n\t\t\t</div>\n\t\t\t<div class="tile_small">\n\t\t\t\t<img src="/assets/{{icon}}">\n\t\t\t</div>\n\t\t</div>\n  \t<h3>\n  \t\t{{#is_deleted}}\n  \t\t\t{{title}}\n\t\t\t{{/is_deleted}}\n\t\t\t{{^is_deleted}}\n  \t\t\t<a href="{{url}}">{{title}}</a>\n\t\t\t{{/is_deleted}}\n\t\t</h3>\n\t</div>\n\n</div>\n'),
Mustache.compilePartial("user_performance/study_aid_clipping_metrics",'<div class="study_aid_clipping_metrics {{#is_deleted}}deleted_resource{{/is_deleted}}">\n\n\t<div class="value">\n\t\t{{#has_performed}}\n      {{performance_value}}%\n    {{/has_performed}}\n    {{{state_icon}}}\n\t</div>\n\n\t<div class="title">\n  \t<div class="tile_container">\n\t\t\t<div class="icon_tile_small_type">\n\t\t\t\t{{#pinned_by}}\n      \t\t{{{icon_tilesmall_pin}}}\n\t\t\t\t{{/pinned_by}}\n\t\t\t</div>\n\t\t\t<div class="tile_small">\n\t\t\t\t<img src="/assets/{{icon}}">\n\t\t\t</div>\n\t\t</div>\n  \t<h3>\n  \t\t{{#is_deleted}}\n  \t\t\t{{title}}\n\t\t\t{{/is_deleted}}\n\t\t\t{{^is_deleted}}\n  \t\t\t<a href="{{url}}">{{title}}</a>\n\t\t\t{{/is_deleted}}\n\t\t</h3>\n\t</div>\n\n</div>\n'),this.SMT["user_performance/study_aid_clipping_metrics"]=function(e){return e||(e={}),SMTCache["user_performance/study_aid_clipping_metrics"](e)}}.call(this),function(){this.SMT||(this.SMT={}),this.SMTCache||(this.SMTCache={}),this.SMTCache["user_performance/user_attempts"]=Mustache.compile('<canvas id ="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n<div class="score_container publicmeta_sub">\n  <ul class="scores">\n    <li>\n      <div>\n        <div class = "score_label">{{score_label_1}}</div>\n        <div class = "score_value">{{average_score}}</div>\n      </div>\n    </li>\n  </ul>\n</div>\n'),Mustache.compilePartial("user_performance/user_attempts",'<canvas id ="plot" width="{{canvas_width}}" height="{{canvas_height}}"></canvas>\n<div class="score_container publicmeta_sub">\n  <ul class="scores">\n    <li>\n      <div>\n        <div class = "score_label">{{score_label_1}}</div>\n        <div class = "score_value">{{average_score}}</div>\n      </div>\n    </li>\n  </ul>\n</div>\n'),this.SMT["user_performance/user_attempts"]=function(e){return e||(e={}),SMTCache["user_performance/user_attempts"](e)}}.call(this),function(){function e(e){function t(t,n,i,a,s,o){for(;s>=0&&s<o;s+=e){var r=a?a[s]:s;i=n(i,t[r],r,t)}return i}return function(n,i,a,s){i=b(i,s,4);var o=!C(n)&&v.keys(n),r=(o||n).length,l=e>0?0:r-1;return arguments.length<3&&(a=n[o?o[l]:l],l+=e),t(n,i,a,o,l,r)}}function t(e){return function(t,n,i){n=y(n,i);for(var a=M(t),s=e>0?0:a-1;s>=0&&s<a;s+=e)if(n(t[s],s,t))return s;return-1}}function n(e,t,n){return function(i,a,s){var o=0,r=M(i);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+r,o):r=s>=0?Math.min(s+1,r):s+r+1;else if(n&&s&&r)return i[s=n(i,a)]===a?s:-1;if(a!=a)return(s=t(d.call(i,o,r),v.isNaN))>=0?s+o:-1;for(s=e>0?o:r-1;s>=0&&s<r;s+=e)if(i[s]===a)return s;return-1}}function i(e,t){var n=D.length,i=e.constructor,a=v.isFunction(i)&&i.prototype||r,s="constructor";for(v.has(e,s)&&!v.contains(t,s)&&t.push(s);n--;)(s=D[n])in e&&e[s]!==a[s]&&!v.contains(t,s)&&t.push(s)}var a=this,s=a._,o=Array.prototype,r=Object.prototype,l=Function.prototype,c=o.push,d=o.slice,u=r.toString,_=r.hasOwnProperty,h=Array.isArray,p=Object.keys,f=l.bind,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):a._=v,v.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};case 4:return function(n,i,a,s){return e.call(t,n,i,a,s)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return null==e?v.identity:v.isFunction(e)?b(e,t,n):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return y(e,t,Infinity)};var w=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var a=1;a<i;a++)for(var s=arguments[a],o=e(s),r=o.length,l=0;l<r;l++){var c=o[l];t&&void 0!==n[c]||(n[c]=s[c])}return n}},x=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,M=S("length"),C=function(e){var t=M(e);return"number"==typeof t&&t>=0&&t<=T};v.each=v.forEach=function(e,t,n){var i,a;if(t=b(t,n),C(e))for(i=0,a=e.length;i<a;i++)t(e[i],i,e);else{var s=v.keys(e);for(i=0,a=s.length;i<a;i++)t(e[s[i]],s[i],e)}return e},v.map=v.collect=function(e,t,n){t=y(t,n);for(var i=!C(e)&&v.keys(e),a=(i||e).length,s=Array(a),o=0;o<a;o++){var r=i?i[o]:o;s[o]=t(e[r],r,e)}return s},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,n){var i;if(void 0!==(i=C(e)?v.findIndex(e,t,n):v.findKey(e,t,n))&&-1!==i)return e[i]},v.filter=v.select=function(e,t,n){var i=[];return t=y(t,n),v.each(e,function(e,n,a){t(e,n,a)&&i.push(e)}),i},v.reject=function(e,t,n){return v.filter(e,v.negate(y(t)),n)},v.every=v.all=function(e,t,n){t=y(t,n);for(var i=!C(e)&&v.keys(e),a=(i||e).length,s=0;s<a;s++){var o=i?i[s]:s;if(!t(e[o],o,e))return!1}return!0},v.some=v.any=function(e,t,n){t=y(t,n);for(var i=!C(e)&&v.keys(e),a=(i||e).length,s=0;s<a;s++){var o=i?i[s]:s;if(t(e[o],o,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,i){return C(e)||(e=v.values(e)),("number"!=typeof n||i)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=function(e,t){var n=d.call(arguments,2),i=v.isFunction(t);return v.map(e,function(e){var a=i?t:e[t];return null==a?a:a.apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var i,a,s=-Infinity,o=-Infinity;if(null==t&&null!=e)for(var r=0,l=(e=C(e)?e:v.values(e)).length;r<l;r++)(i=e[r])>s&&(s=i);else t=y(t,n),v.each(e,function(e,n,i){((a=t(e,n,i))>o||a===-Infinity&&s===-Infinity)&&(s=e,o=a)});return s},v.min=function(e,t,n){var i,a,s=Infinity,o=Infinity;if(null==t&&null!=e)for(var r=0,l=(e=C(e)?e:v.values(e)).length;r<l;r++)(i=e[r])<s&&(s=i);else t=y(t,n),v.each(e,function(e,n,i){((a=t(e,n,i))<o||a===Infinity&&s===Infinity)&&(s=e,o=a)});return s},v.shuffle=function(e){for(var t,n=C(e)?e:v.values(e),i=n.length,a=Array(i),s=0;s<i;s++)(t=v.random(0,s))!==s&&(a[s]=a[t]),a[t]=n[s];return a},v.sample=function(e,t,n){return null==t||n?(C(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=y(t,n),v.pluck(v.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var k=function(e){return function(t,n,i){var a={};return n=y(n,i),v.each(t,function(i,s){var o=n(i,s,t);e(a,i,o)}),a}};v.groupBy=k(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=k(function(e,t,n){e[n]=t}),v.countBy=k(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.toArray=function(e){return e?v.isArray(e)?d.call(e):C(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:C(e)?e.length:v.keys(e).length},v.partition=function(e,t,n){t=y(t,n);var i=[],a=[];return v.each(e,function(e,n,s){(t(e,n,s)?i:a).push(e)}),[i,a]},v.first=v.head=v.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var E=function(e,t,n,i){for(var a=[],s=0,o=i||0,r=M(e);o<r;o++){var l=e[o];if(C(l)&&(v.isArray(l)||v.isArguments(l))){t||(l=E(l,t,n));var c=0,d=l.length;for(a.length+=d;c<d;)a[s++]=l[c++]}else n||(a[s++]=l)}return a};v.flatten=function(e,t){return E(e,t,!1)},v.without=function(e){return v.difference(e,d.call(arguments,1))},v.uniq=v.unique=function(e,t,n,i){v.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=y(n,i));for(var a=[],s=[],o=0,r=M(e);o<r;o++){var l=e[o],c=n?n(l,o,e):l;t?(o&&s===c||a.push(l),s=c):n?v.contains(s,c)||(s.push(c),a.push(l)):v.contains(a,l)||a.push(l)}return a},v.union=function(){return v.uniq(E(arguments,!0,!0))},v.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=M(e);i<a;i++){var s=e[i];if(!v.contains(t,s)){for(var o=1;o<n&&v.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},v.difference=function(e){var t=E(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,M).length||0,n=Array(t),i=0;i<t;i++)n[i]=v.pluck(e,i);return n},v.object=function(e,t){for(var n={},i=0,a=M(e);i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,n,i){for(var a=(n=y(n,i,1))(t),s=0,o=M(e);s<o;){var r=Math.floor((s+o)/2);n(e[r])<a?s=r+1:o=r}return s},v.indexOf=n(1,v.findIndex,v.sortedIndex),v.lastIndexOf=n(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),s=0;s<i;s++,e+=n)a[s]=e;return a};var A=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var s=x(e.prototype),o=e.apply(s,a);return v.isObject(o)?o:s};v.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,d.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return A(e,i,t,this,n.concat(d.call(arguments)))};return i},v.partial=function(e){var t=d.call(arguments,1),n=function(){for(var i=0,a=t.length,s=Array(a),o=0;o<a;o++)s[o]=t[o]===v?arguments[i++]:t[o];for(;i<arguments.length;)s.push(arguments[i++]);return A(e,n,this,this,s)};return n},v.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)e[n=arguments[t]]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(i){var a=n.cache,s=""+(t?t.apply(this,arguments):i);return v.has(a,s)||(a[s]=e.apply(this,arguments)),a[s]};return n.cache={},n},v.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var i,a,s,o=null,r=0;n||(n={});var l=function(){r=!1===n.leading?0:v.now(),o=null,s=e.apply(i,a),o||(i=a=null)};return function(){var c=v.now();r||!1!==n.leading||(r=c);var d=t-(c-r);return i=this,a=arguments,d<=0||d>t?(o&&(clearTimeout(o),o=null),r=c,s=e.apply(i,a),o||(i=a=null)):o||!1===n.trailing||(o=setTimeout(l,d)),s}},v.debounce=function(e,t,n){var i,a,s,o,r,l=function(){var c=v.now()-o;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(s,a),i||(s=a=null)))};return function(){s=this,a=arguments,o=v.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(s,a),s=a=null),r}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return I&&i(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&i(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i},v.mapObject=function(e,t,n){t=y(t,n);for(var i,a=v.keys(e),s=a.length,o={},r=0;r<s;r++)o[i=a[r]]=t(e[i],i,e);return o},v.pairs=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i},v.invert=function(e){for(var t={},n=v.keys(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=w(v.allKeys),v.extendOwn=v.assign=w(v.keys),v.findKey=function(e,t,n){t=y(t,n);for(var i,a=v.keys(e),s=0,o=a.length;s<o;s++)if(t(e[i=a[s]],i,e))return i},v.pick=function(e,t,n){var i,a,s={},o=e;if(null==o)return s;v.isFunction(t)?(a=v.allKeys(o),i=b(t,n)):(a=E(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var r=0,l=a.length;r<l;r++){var c=a[r],d=o[c];i(d,c,o)&&(s[c]=d)}return s},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var i=v.map(E(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(i,t)}}return v.pick(e,t,n)},v.defaults=w(v.allKeys,!0),v.create=function(e,t){var n=x(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),s=0;s<i;s++){var o=n[s];if(t[o]!==a[o]||!(o in a))return!1}return!0};var P=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var a=u.call(e);if(a!==u.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,r=t.constructor;if(o!==r&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!P(e[l],t[l],n,i))return!1}else{var c,d=v.keys(e);if(l=d.length,v.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!v.has(t,c)||!P(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};v.isEqual=function(e,t){return P(e,t)},v.isEmpty=function(e){return null==e||(C(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===u.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&_.call(e,t)},v.noConflict=function(){return a._=s,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=S,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var a=0;a<e;a++)i[a]=t(a);return i},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=v.invert(R),O=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,t):e}};v.escape=O(R),v.unescape=O($),v.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),v.isFunction(i)?i.call(e):i};var z=0;v.uniqueId=function(e){var t=++z+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+j[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var i=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(t,n,i,o,r){return s+=e.slice(a,r).replace(L,B),a=r+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(c){throw c.source=s,c}var r=function(e){return o.call(this,e,v)},l=t.variable||"obj";return r.source="function("+l+"){\n"+s+"}",r},v.chain=function(e){var t=v(e);return t._chain=!0,t};var F=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),F(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],F(this,n)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return F(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,a){e.Backbone=t(e,a,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var a=e.Backbone,s=[],o=(s.push,s.slice);s.splice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=t.Events={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var a=this,s=n.once(function(){a.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){var a,s,o,r,l,d,u,_;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(l=0,d=(r=e?[e]:n.keys(this._events)).length;l<d;l++)if(e=r[l],o=this._events[e]){if(this._events[e]=a=[],t||i)for(u=0,_=o.length;u<_;u++)s=o[u],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&a.push(s);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var a=this._listeningTo;if(!a)return this;var s=!t&&!i;for(var o in i||"object"!=typeof t||(i=this),e&&((a={})[e._listenId]=e),a)(e=a[o]).off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,r=s.length;o<r;o++)e[t].apply(e,[s[o]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,a=e.length,s=t[0],o=t[1],r=t[2];switch(t.length){case 0:for(;++i<a;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o,r);return;default:for(;++i<a;)(n=e[i]).callback.apply(n.ctx,t);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){r[t]=function(t,i,a){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,a||"object"!=typeof i||(a=this),t[e](i,a,this),this}}),r.bind=r.on,r.unbind=r.off,n.extend(t,r);var _=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,s,o,r,l,c,d,u;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;for(a in o=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),s)t=s[a],n.isEqual(u[a],t)||r.push(a),n.isEqual(d[a],t)?delete this.changed[a]:this.changed[a]=t,o?delete u[a]:u[a]=t;if(!l){r.length&&(this._pending=i);for(var _=0,h=r.length;_<h;_++)this.trigger("change:"+r[_],this,u[r[_]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(a[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;i&&i(t,n,e),t.trigger("sync",t,n,e)},N(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,s,o,r=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=n.extend({validate:!0},i),a&&!i.wait){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=n.extend({},r,a)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=r;var t=l.parse(e,i);if(i.wait&&(t=n.extend(a||{},t)),n.isObject(t)&&!l.set(t,i))return!1;c&&c(l,e,i),l.trigger("sync",l,e,i)},N(this,i),"patch"===(s=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=a),o=this.sync(s,this,i),a&&i.wait&&(this.attributes=r),o},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;N(this,e);var s=this.sync("delete",this,e);return e.wait||a(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||z();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(e){_.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(p.prototype,r,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var i,a,s,o,r=!n.isArray(e);for(t||(t={}),i=0,a=(e=r?[e]:n.clone(e)).length;i<a;i++)(o=e[i]=this.get(e[i]))&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o,t));return r?e[0]:e},set:function(e,t){(t=n.defaults({},t,f)).parse&&(e=this.parse(e,t));var i,a,s,o,r,l,c,d=!n.isArray(e);e=d?e?[e]:[]:n.clone(e);var u=t.at,h=this.model,p=this.comparator&&null==u&&!1!==t.sort,m=n.isString(this.comparator)?this.comparator:null,g=[],v=[],b={},y=t.add,w=t.merge,x=t.remove,S=!(p||!y||!x)&&[];for(i=0,a=e.length;i<a;i++){if(s=(r=e[i]||{})instanceof _?o=r:r[h.prototype.idAttribute||"id"],l=this.get(s))x&&(b[l.cid]=!0),w&&(r=r===o?o.attributes:r,t.parse&&(r=l.parse(r,t)),l.set(r,t),p&&!c&&l.hasChanged(m)&&(c=!0)),e[i]=l;else if(y){if(!(o=e[i]=this._prepareModel(r,t)))continue;g.push(o),this._addReference(o,t)}o=l||o,!S||!o.isNew()&&b[o.id]||S.push(o),b[o.id]=!0}if(x){for(i=0,a=this.length;i<a;++i)b[(o=this.models[i]).cid]||v.push(o);v.length&&this.remove(v,t)}if(g.length||S&&S.length)if(p&&(c=!0),this.length+=g.length,null!=u)for(i=0,a=g.length;i<a;i++)this.models.splice(u+i,0,g[i]);else{S&&(this.models.length=0);var T=S||g;for(i=0,a=T.length;i<a;i++)this.models.push(T[i])}if(c&&this.sort({silent:!0}),!t.silent){for(i=0,a=g.length;i<a;i++)(o=g[i]).trigger("add",o,this,t);(c||S&&S.length)&&this.trigger("sort",this,t)}return d?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;i<a;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var a=e.reset?"reset":"set";i[a](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),a&&a(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof _)return e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(g,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var v=["groupBy","countBy","sortBy","indexBy"];n.each(v,function(e){p.prototype[e]=function(t,i){var a=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,a,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var a=t.match(y),s=a[1],o=a[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,a){var s=S[e];n.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};if(a.url||(o.url=n.result(i,"url")||z()),null!=a.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",a.emulateJSON&&(o.data._method=s);var r=a.beforeSend;a.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",s),r)return r.apply(this,arguments)}}"GET"===o.type||a.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=t.ajax(n.extend(o,a));return i.trigger("request",i,l,a),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,k=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,r,{initialize:function(){},route:function(e,i,a){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(a,o),
s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),t.history.trigger("route",s,i,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(M,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,R=/\/$/,$=/#.*$/;A.started=!1,n.extend(A.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(R,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(I,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!a||a<=7);if(this.root=("/"+this.root+"/").replace(D,"/"),s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!A.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace($,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new A;var O=function(e,t){var i,a=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},n.extend(i,a,t);var s=function(){this.constructor=i};return s.prototype=a.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=a.prototype,i};_.extend=p.extend=T.extend=b.extend=A.extend=O;var z=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e){"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=e(require("underscore")):"function"==typeof define?define(["underscore"],e):this.Cocktail=e(_)}(function(e){var t,n={};return n.mixins={},n.mixin=function(t){var i=e.chain(arguments).toArray().rest().flatten().value(),a=t.prototype||t,s={};return e.each(i,function(t){e.isString(t)&&(t=n.mixins[t]),e.each(t,function(t,n){if(e.isFunction(t)){if(a[n]===t)return;a[n]&&(s[n]=s.hasOwnProperty(n)?s[n]:[a[n]],s[n].push(t)),a[n]=t}else e.isArray(t)?a[n]=e.union(t,a[n]||[]):e.isObject(t)?a[n]=e.extend({},t,a[n]||{}):n in a||(a[n]=t)})}),e.each(s,function(t,n){a[n]=function(){var n,i=this,a=arguments;return e.each(t,function(t){var s=e.isFunction(t)?t.apply(i,a):t;n=void 0===s?n:s}),n}}),t},n.patch=function(i){t=i.Model.extend;var a=function(e,i){var a=t.call(this,e,i),s=a.prototype.mixins;return s&&a.prototype.hasOwnProperty("mixins")&&n.mixin(a,s),a};e.each([i.Model,i.Collection,i.Router,i.View],function(t){t.mixin=function(){n.mixin(this,e.toArray(arguments))},t.extend=a})},n.unpatch=function(n){e.each([n.Model,n.Collection,n.Router,n.View],function(e){e.mixin=undefined,e.extend=t})},n}),Cocktail.patch(Backbone),window.addEventListener("beforeunload",function(){var e=document.querySelector("#et_loading_spinner");e&&(e.style.display="block")}),window.addEventListener("pageshow",function(e){if(e.persisted){var t=document.querySelector("#et_loading_spinner");t&&(t.style.display="none")}});var first_load=!0,FONT_LOADER=function(e){return e.loaded=!1,WebFontConfig={custom:{families:["PT Serif55","Indie Flower","Arvo","Ubuntu","Vollkorn","Coming Soon","OpenSans","LatoRegular"],urls:["https://cdn.goconqr.com/assets/application_fonts.css"]},active:function(){$(document).trigger("fonts_loaded")}},e.load_all=function(){var e=document.createElement("script");e.src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",e.type="text/javascript",e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},$(document).ready(function(){e.loaded||(e.load_all(),e.loaded=!0)}),e}(FONT_LOADER||{}),CONSENT_HELPER=function(e){return e.fire_after_consent=function(e){var t=e.with_consent||function(){},n=e.without_consent||function(){};window.__tcfapi?window.__tcfapi("addEventListener",2,function(e,i){i?(console.log("gdprApplies"),console.log("tcData.eventStatus: "+e.eventStatus),t()):n()}):n()},e}(CONSENT_HELPER||{}),AD_SERVER=function(e){return e.all_prebid_ad_units=[{code:"App_Resource_Leaderboard",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846228"}},{bidder:"sovrn",params:{tagid:"560366"}}]},{code:"App_Resource_Sidebar_Upper",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846228"}},{bidder:"sovrn",params:{tagid:"552842"}}]},{code:"App_Resource_Sidebar_Lower",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846228"}},{bidder:"sovrn",params:{tagid:"556865"}}]},{code:"App_Dashboard_LHS_ATF",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846226"}},{bidder:"sovrn",params:{tagid:"562210"}}]},{code:"App_CourseModule_RHS",mediaTypes:{banner:{sizes:[[160,600]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846226"}},{bidder:"sovrn",params:{tagid:"562209"}}]},{code:"App_Resource_Canonical",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846228"}},{bidder:"sovrn",params:{tagid:"552842"}}]},{code:"App_Mobile_Leaderboard",mediaTypes:{banner:{sizes:[[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"17536",siteId:"175220",zoneId:"846226"}},{bidder:"sovrn",params:{tagid:"642248"}}]}],e}(AD_SERVER||{}),googletag=googletag||{};googletag.cmd=googletag.cmd||[];var pbjs=pbjs||{};pbjs.que=pbjs.que||[];var AD_SERVER=function(e){e.run_aps=!1;var t=null,n=function(){!function(e,t,n,i,a,s,o){function r(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){r("i",arguments)},fetchBids:function(){r("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(s=n.createElement(i)).async=!0,s.src=a,(o=n.getElementsByTagName(i)[0]).parentNode.insertBefore(s,o))}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),apstag.init({pubID:"fc6e8120-1bab-4cc1-8249-b87cd2bf0063",adServer:"googletag",bidTimeout:AD_SERVER.prebid_timeout()})};return e.prebid_timeout=function(){return 1500},e.init_ad_server=function(){pbjs.init_ad_server_set||(!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i),AD_SERVER.run_aps&&n()}(),pbjs.init_ad_server_set=!0)},e.create_dynamic_ad_units=function(t){var n=_.map(e.all_prebid_ad_units,function(e){return e.code});_.difference(t,n).forEach(function(t){var n=_.map(e.all_prebid_ad_units,function(e){return e.code});if(t.match(/_\d+$/)&&-1===n.indexOf(t)){var i,a=_.initial(t.split("_")).join("_"),s=_.find(e.all_prebid_ad_units,function(e){return e.code===a});s&&((i=_.extend({},s)).code=t,e.all_prebid_ad_units.push(i),pbjs.que.push(function(){pbjs.addAdUnits([JSON.parse(JSON.stringify(i))])}))}})},e.prebid_ad_units=function(){return _.filter(e.all_prebid_ad_units,function(e){return $("#"+e.code+".gpt-ad").length>0})},e.get_prebid_ad_ids=function(){return t||(t=_.map(this.prebid_ad_units(),function(e){return e.code}))},e.get_non_prebid_ad_ids=function(){return _.difference(_.map($(".ad_container .gpt-ad"),function(e){return e.id}),this.get_prebid_ad_ids())},e.is_prebid_ad_id=function(e){return this.get_prebid_ad_ids().indexOf(e)>=0},e.execute_parallel_auction=function(e){function t(){o.aps&&o.prebid&&n()}function n(){!0!==o.adserverRequestSent&&(o.adserverRequestSent=!0,googlePublisherTag.refreshAds(e))}function i(){return _.map(googlePublisherTag.getDefinedSlots(e),function(e){return{slotID:e.getSlotElementId(),slotName:e.getAdUnitPath(),sizes:_.map(e.getSizes(),function(e){return[e.width,e.height]})}})}function a(){AD_SERVER.run_aps&&apstag.fetchBids({slots:i()},function(){googletag.cmd.push(function(){apstag.setDisplayBids(),o.aps=!0,t()})}),pbjs.que.push(function(){pbjs.requestBids({adUnitCodes:e,timeout:AD_SERVER.prebid_timeout(),bidsBackHandler:function(){googletag.cmd.push(function(){pbjs.setTargetingForGPTAsync(),_.each(e,function(e){pbjs.setTargetingForGPTAsync([e])}),o.prebid=!0,t()})}})})}AD_SERVER.init_ad_server();var s=2e3,o={adserverRequestSent:!1,aps:!AD_SERVER.run_aps,prebid:!1};googletag.cmd.push(function(){a()}),window.setTimeout(function(){n()},s)},pbjs.que.push(function(){pbjs.setConfig({bidderSequence:"random",enableSendAllBids:!0,priceGranularity:{buckets:[{min:0,max:2,increment:.01},{min:2,max:20,increment:.1}]},currency:{adServerCurrency:"GBP",conversionRateFile:"https://currency.prebid.org/latest.json",bidderCurrencyDefault:{rubicon:"USD",sovrn:"USD"}},consentManagement:{gdpr:{cmpApi:"iab",allowAuctionWithoutConsent:!0,timeout:1e4},usp:{timeout:1e3}},userSync:{iframeEnabled:!0}}),pbjs.bidderSettings={rubicon:{bidCpmAdjustment:function(e){return.8*e}}}}),CONSENT_HELPER.fire_after_consent({with_consent:function(){googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({nonPersonalizedAds:!1})}),pbjs.que.push(function(){pbjs.addAdUnits(e.all_prebid_ad_units.map(function(e){return JSON.parse(JSON.stringify(e))}))}),setTimeout(e.init_ad_server,2*e.prebid_timeout())},without_consent:function(){googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})}),pbjs.que.push(function(){pbjs.addAdUnits([])}),e.init_ad_server()}}),e}(AD_SERVER||{});(function(){var e;e=function(){function e(){googletag.cmd.push(function(){s()})}var t=[],n=[];e.prototype.evaluate=function(){var e,t,n,i,a;if(null!=googletag){if(a=[],(i=$(".gpt-ad")).length>0)for(t=0,n=i.length;t<n;t++)e=i[t],a.push(this.initAd($(e)));return a}},e.prototype.initAd=function(e){var s=e.attr("id"),o=e.data("gpt-path"),r=e.data("gpt-size");return googletag.cmd.push(function(){if(-1===$.inArray(s,t)){var l=googletag.defineSlot(o,r,s).defineSizeMapping(a(e.data("gpt-sizes")));i(l,e.data()),l.addService(googletag.pubads()),n.push(l),t.push(s)}})},e.prototype.clearAds=function(){if(googletag&&googletag.cmd)return googletag.cmd.push(function(){googletag.pubads().clear()})},e.prototype.refreshAds=function(e){var n=this;if(googletag&&googletag.cmd){if(!e)return googletag.cmd.push(function(){for(var e=0,n=t.length;e<n;e++)googletag.display(t[e]);googletag.pubads().refresh()});googletag.cmd.push(function(){for(var t=n.getDefinedSlots(e),i=0,a=e.length;i<a;i++)googletag.display(e[i]),googletag.pubads().refresh([t[i]])})}},e.prototype.getDefinedSlots=function(e){if(!e)return n;var i=[];return e.forEach(function(e){i.push(n[t.indexOf(e)])}),i},e.prototype.destroySlots=function(){googletag.cmd.push(function(){googletag.destroySlots(),t=[],n=[]})},e.prototype.updateTargeting=function(e,t){_.find(n,function(t){return t.getSlotElementId()===e}).updateTargetingFromMap(t)};var i=function(e,t){for(var n in t)/^custom/.test(n)&&e.setTargeting(n.substr(6).toLowerCase(),t[n].toString().toLowerCase());return e},a=function(e){for(var t=googletag.sizeMapping(),n=0,i=e.length;n<i;n++)t.addSize.apply(t,e[n]);return t.build()},s=function(){googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().collapseEmptyDivs(),googletag.pubads().setForceSafeFrame(!0),googletag.enableServices()};return e}(),this.googlePublisherTag=this.googlePublisherTag||new e}).call(this);var ACTIVE_TAB=function(e){var t,n,i=[],a=[];"undefined"!=typeof document.hidden?(t="hidden",n="visibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange");var s=function(){if(document[t])for(var e=0,n=a.length;e<n;e++)a[e]();else for(var s=0,o=i.length;s<o;s++)i[s]()};return"undefined"!=typeof document.addEventListener&&document.addEventListener(n,_.debounce(s,5e3),!1),e.on_active=function(e){i.push(e)},e.on_inactive=function(e){a.push(e)},e}(ACTIVE_TAB||{});$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),n=$(window).scrollTop(),i=n+$(window).height();return t>n&&e<i};var REFRESHING_ADS=function(e){var t=6e4,n=0,i=null,a=null,s=null,o=[],r={};e.clear_timeouts=function(e){_.each(r[e]||[],function(e){clearTimeout(e)}),r[e]=[]};var l=function(e){return e.closest(".ad_wrapper").isInViewport()},c=function(e){return l(e)},d=function(){},u=function(e){return(e||t)*(1+.5*(Math.random()-.5))};return e.refresh_ad=function(t,n){var i=$(".ad_container #"+t);i.length>0&&(a(i)&&(AD_SERVER.is_prebid_ad_id(t)?AD_SERVER.execute_parallel_auction([t]):googlePublisherTag.refreshAds([t]),s(i)),e.clear_timeouts(t),r[t].push(setTimeout(e.refresh_ad.bind(e,t,n),u(n))))},e.register_ad_unit_ids=function(l,u){i=u.refresh_timeout||t,o=_.union(o,l),a=u.before_refresh||c,s=u.after_refresh||d,_.forEach(o,function(t,a){e.clear_timeouts(t),r[t].push(setTimeout(e.refresh_ad.bind(e,t,i),i+a*n))}),ACTIVE_TAB.on_inactive(function(){_.forEach(l,function(e){REFRESHING_ADS.clear_timeouts(e)})}),ACTIVE_TAB.on_active(function(){_.forEach(l,function(e){REFRESHING_ADS.refresh_ad(e,i)})})},e}(REFRESHING_ADS||{}),GoogleDfpAd=Backbone.Model.extend({defaults:{clazz:"gpt-ad"},initialize:function(){this.attributes.id=this.attributes.ad_unit_id,"undefined"!=typeof this.attributes.placement&&(this.attributes.id+="_"+this.attributes.placement)}}),GoogleDfpAdView=Backbone.View.extend({className:"ad_container",template:SMT["ads/google_dfp_ad"],initialize:function(e){this.hide_remove_ads_link=!!e.hide_remove_ads_link,this.actions_position=e.actions_position&&"top"===e.actions_position?"top":"bottom",this.closable=!!e.closable,this.on_close=e.on_close||this._on_close},events:{"click .close_ad":"close"},render:function(){return this.$el.html(this.template(this.attributes_for_render())),this},translations:{remove_ads_text:I18n.t("remove_ads"),close_ad_text:I18n.t("close_ad")},attributes_for_render:function(){return _.extend({},this.translations,this.model.attributes,{hide_remove_ads_link:this.hide_remove_ads_link,closable:this.closable,actions_position:this.actions_position,auth_user:this.auth_user()})},auth_user:function(){var e=this.model.get("custom");return e&&"t"===e.find(function(e){return"uauth"===e.key}).value},close:function(e){this.on_close(e)},_on_close:function(){this.$el.hide()}}),RESOURCE_ADS=function(e){var t=760,n=[];e.lower_ad_cutoff=t,e.init=function(e){$("#ads_pane:visible").length>0&&(n.push(i(_.extend({},e,{clazz:"resource_sidebar_upper",refresh_slot:!0,container_selector:"#ads_pane #ads_pane_upper"}))),$(window).height()>t&&n.push(i(_.extend({},e,{clazz:"resource_sidebar_middle",refresh_slot:!0,container_selector:"#ads_pane #ads_pane_middle"}))),n.push(i(_.extend({},e,{clazz:"resource_sidebar_lower",refresh_slot:!0,container_selector:"#ads_pane #ads_pane_lower"})))),googlePublisherTag.destroySlots(),googlePublisherTag.evaluate(),AD_SERVER.create_dynamic_ad_units(n),AD_SERVER.execute_parallel_auction(AD_SERVER.get_prebid_ad_ids()),googlePublisherTag.refreshAds(AD_SERVER.get_non_prebid_ad_ids())};var i=function(t){var n=t||{},i=t.clazz||"resource_sidebar_upper",o=!!t.refresh_slot,r=t.is_profane,l=$(n.container_selector||"#ads_pane"),c=JSON.parse($(".ad_units .ad_unit."+i).html()),d=new GoogleDfpAdView({model:new GoogleDfpAd(c),className:"ad_container "+i,closable:!1,hide_remove_ads_link:!0}),u=d.model.get("id"),h=d.render().$el,p=h.find("#"+u);if(!r&&!_.isEmpty(c)&&"true"!==$.query_string("frame")&&l.is(":visible"))return l.prepend(h),e.toggle_ad_unit(p),setTimeout(function(){e.toggle_ad_unit(p)},3e3),o&&REFRESHING_ADS.register_ad_unit_ids([u],{before_refresh:a,after_refresh:s}),u},a=function(t){if(t.closest(".ad_wrapper").isInViewport()){var n=t.data("customSequence"),i=Math.min(n+1,20);return t.data("customSequence",i),googlePublisherTag.updateTargeting(t.attr("id"),{sequence:i}),e.toggle_ad_unit(t),!0}return!1},s=function(t){setTimeout(function(){e.toggle_ad_unit(t)},4e3)};return e.toggle_ad_unit=function(t){var n=t.closest(".ad_container");e.toggle_sideways(n)},e.toggle_sideways=function(e){e.animate({marginLeft:0===parseInt(e.css("marginLeft"),10)?e.outerWidth():0})},e}(RESOURCE_ADS||{}),InterstitialGoogleDfpAdView=GoogleDfpAdView.extend({initialize:function(e){InterstitialGoogleDfpAdView.__super__.initialize.apply(this,arguments),this.countdown_from=e.countdown_from||0},countdown_from:0,countdown_timeout:null,template:SMT["ads/interstitial_google_dfp_ad"],events:function(){return _.extend({},GoogleDfpAdView.prototype.events,{"click .remove_ads":"remove_ads"})},translations:{remove_ads_text:I18n.t("interstitial_ad.remove_ads"),resume_text:I18n.t("interstitial_ad.resume"),resume_in_text:I18n.t("interstitial_ad.resume_in",{countdown:0})},render:function(){return this.$el.html(this.template(_.extend({countdown_from:this.countdown_from},this.attributes_for_render()))),this},update_countdown_timer:function(){var e=this,t=this.$(".ad_actions .resume_in"),n=t.data("countdown");n>0?(this.$(".ad_actions .resume_in").html(I18n.t("interstitial_ad.resume_in",{countdown:n})),t.data("countdown",n-1),this.countdown_timeout=setTimeout(function(){e.update_countdown_timer()},1e3)):(this.$(".ad_actions .resume_in").hide(),this.$(".ad_actions .resume_action").show(),this.$(".ad_actions .close_ad").addClass("btn-info").removeClass("btn-default disabled"))},remove_ads:function(){this.auth_user()?window.location.href=Routes.pay_payments_payments_path({plan_type:"student"}):window.location.href=Routes.payments_compare_path({prompt_for:"ad_free"})},on_reveal:function(){this.countdown_from>0&&(this.$(".ad_actions .resume_action").hide(),this.$(".ad_actions .resume_in").show()),this.$(".ad_actions .resume_in").data("countdown",this.countdown_from),this.update_countdown_timer()},_on_close:function(){clearTimeout(this.countdown_timeout),this.$(".ad_actions .close_ad").addClass("btn-default disabled").removeClass("btn-info"),$(document).trigger("close_interstitial",[this.$el.parent(),this])}}),MOBILE={mql:window.matchMedia("(orientation: portrait)"),orientation:function(){return this.mql.matches?"portrait":"landscape"},is_mobile:function(){return $("body.mobile_layout").length>0||$("body.mobile").length>0},is_landscape:function(){return!!this.orientation().match(/landscape/)},is_canonical:function(){return $("body.canonical").length>0},on_orientation_change:function(e){var t=e.on_portrait,n=e.on_landscape;this.mql.addListener(function(e){e.matches?t():n()})}},INTERSTITIAL_AD=function(e){var t=null,n=null,i=null;return e.init=function(a){if(!MOBILE.is_mobile()){var s=a.clazz||"resource_interstitial",o=a.is_profane,r=a.reveal_delay||2e3,l=(a.no_ad_request,$("#"+s)),c=JSON.parse(l.find(".ad_units .ad_unit").html()),d=new InterstitialGoogleDfpAdView({model:new GoogleDfpAd(c),className:"x_container "+s,actions_position:"top",hide_remove_ads_link:!0,closable:!0,countdown_from:MOBILE.is_mobile()?0:5}),u=d.render().$el;c.ad_unit_id,t=a.refresh_delay,n=a.refresh_backoff_factor||2,o||_.isEmpty(c)||"true"===$.query_string("frame")||(l.prepend(u),googlePublisherTag.evaluate(),i=["App_Resource_Interstitial"].filter(function(e){return $("#"+e).length>0}),setTimeout(function(){AD_SERVER.execute_parallel_auction(i),setTimeout(function(){e.reveal_interstitial(l,d)},1e3)},Math.max(0,r-1e3)))}},e.reveal_interstitial=function(e,t){e.show(),e.animate({width:"100%",height:"100%"}),t&&t.on_reveal()},e.hide_interstitial=function(e,a){e.animate({width:0,height:0},400,"swing",function(){e.hide()}),t&&(setTimeout(function(){AD_SERVER.execute_parallel_auction(i),setTimeout(function(){INTERSTITIAL_AD.reveal_interstitial(e,a)},1e3)},Math.max(0,t-1e3)),t*=n)},e}(INTERSTITIAL_AD||{});$(document).on("close_interstitial",function(e,t,n){INTERSTITIAL_AD.hide_interstitial(t,n)}),$.fn.extend({hasClasses:function(e){var t=this;for(var n in e)if($(t).hasClass(e[n]))return!0;return!1},hasClosest:function(e){var t=this;for(var n in e)if($(t).closest(e[n]).length>0)return!0;return!1}}),$(document).on("click",".nav-popup",function(e){var t=$(".nav-popup"),n=$(this);t.not(n).removeClass("active"),t.not(n).popover("hide"),n.closest(".nav").find(".dropdown").removeClass("open"),$(".navbar .tooltip, .breadcrumb_action_bar .tooltip").remove(),$("#search_nav, #search_div").removeClass("active"),n.hasClass("active")?(n.removeClass("active"),n.popover("hide")):(n.addClass("active"),n.popover("show"),$(document).trigger("nav-icon:clicked",n)),hide_popup(),e.preventDefault(),e.stopPropagation()}),$(document).on("click","#search_nav",function(){var e=$(".nav-popup"),t=$(this);e.not(t).removeClass("active"),e.not(t).popover("hide"),$(".navbar .tooltip, .breadcrumb_action_bar .tooltip").remove()}),$(document).ready(function(){is_touch_device()||$(".nav-tooltip").tooltip({placement:"bottom"}),$("#actions_popover").on("click",function(){$(".actionbutton_info, #profile_nav, #notification-icon-container").popover("hide")}),$(".actionbutton_info, #profile_nav, #notification-icon-container").on("click",function(){$("#actions_popover").popover("hide")}),$(".dropdown").click(function(){$(document).trigger("navigation:clear_popovers")}),$(document).on("navigation:clear_popovers",function(){$(".nav-popup.active, #sign_in_public.active, .status_hide.settings.active, .gc_popover_btn").popover("hide").removeClass("active"),$(".popover:not(.event_popover.event_popover_edit, .status_update_settings_popover, .review_answer_popover)").remove(),$("#search_nav, #search_div").removeClass("active");try{window.parent!==window&&(window.parent.$(".nav-popup.active,#sign_in_public.active").popover("hide").removeClass("active"),window.parent.$(".popover").remove())}catch(e){}});var e=$("#search_nav");e.on("click",function(t){e.toggleClass("active"),$("#search_div").toggleClass("active"),t.preventDefault()})}),$(document).on("click",function(e){$target=$(e.target);var t=["popover","call_to_action","status_hide_settings"],n=[".popover","#confirm_save_changes","#search_nav","#search_div.active"];$target.hasClasses(t)||$target.hasClosest(n)||$(document).trigger("navigation:clear_popovers")}),$(document).on("show.bs.modal",function(){$(document).trigger("navigation:clear_popovers")}),$(document).on("show.bs.popover",function(){$(".modal").modal("hide");try{window.parent!==window&&window.parent.$(".modal").modal("hide")}catch(e){}}),$(document).on("click",".fc-content > *, ul.nav li, .fc-event, .edit_event_btn, .popover",function(e){e.stopPropagation()}),$(document).on("quiz_editor:init quiz_viewer:init flash_card_editor:init flash_card_viewer:init mind_map:init notes:init notes_editor:init slide_set:init slide_set_editor:init flowchart:init flowchart_editor:init course_editor:init",function(){var e=$("#examtime_header"),t=e.find(".bg_tab"),n=function(){t.find("img.up").hide(),t.find("img.down").show(),e.removeClass("down").addClass("up"),$(document).trigger("examtime:global_nav_shown")},i=function(){t.find("img.down").hide(),t.find("img.up").show(),e.removeClass("up").addClass("down"),$(document).trigger("examtime:global_nav_hidden")};e.removeClass("down").addClass("up"),t.on("click",function(){e.hasClass("down")?n():i()}),$(".contents_wrap").on("click",function(){e.hasClass("down")&&n()}),$(document).on("mind_map:canvas_click",function(){e.hasClass("down")&&n()})});var AJAX_HELPER=new function(){$.ajaxSetup({timeout:3e4}),$(document).ajaxError(function(e,t,n){switch(t.status){case 401:if("Unauthorised user"==t.responseText){var i=I18n.t("unauthorized.perform");$.blockUI({message:"<div class='blockui_unauthorised'>"+i+"</div>"})}else $(document).trigger("show_sign_in_modal");break;case 302:window.location.replace("/")}switch(t.statusText){case"timeout":!(void 0!==n&&n.hasOwnProperty("url")&&n.url.toLowerCase().indexOf("dont_block_ui")>=0)&&(void 0!==MOBILE&&MOBILE.is_mobile()?$.blockUI({message:I18n.t("ajax_errors.timeout"),css:{width:"70%",left:"15%"}}):$.blockUI({message:I18n.t("ajax_errors.timeout")}))}}),this.render_errors=function(e,t){e.find(".block-message").hide();var n=e.find(".ajax_error_container");n.html("");var i="",a=function(e){$.each(e,function(e,t){$.isArray(t)?a(t):i+="<li>"+t+"</li>"})};a(t),n.append('<div class="errors_inner"><p>'+I18n.t("general.errors.following")+'</p><ul class="errors">'+i+"</ul></div>"),n.show(),$("html, body").animate({scrollTop:0},"fast")}},CreateButtonsView=Backbone.View.extend({template:SMT["navigation/create_buttons"],events:{"click .create":"click_handler"},click_handler:function(e){if(e.preventDefault(),e.stopPropagation(),this.$el.hasClass("disabled"))return!1;this.$el.addClass("disabled"),$.ajax({method:"POST",url:$(e.target).closest("a.create").attr("href"),data:{},success:function(e){do_redirect(e.study_aid_url)},error:function(e){this.$el.removeClass("disabled");var t=e.responseJSON;t.quota_limit?UPGRADE.prompt_popup(t.quota_limit):$.jGrowl(I18n.t("study_aids.actions.create.error"))}.bind(this)})},render:function(){return this.model.toJSON(),this.$el.html(this.template(this.model.toJSON())),this}}),CreateButtons=Backbone.Model.extend({}),CREATE_BUTTONS=function(e){var t,n="#create_study_aid_button_container",i=function(){$("#create_study_aid_button").popover({html:!0,animation:!1,placement:"bottom",trigger:"manual",container:$(n),template:popover_with_class("create_popover nav-popover"),content:function(){return $("#create_popover_content").html()}})};return e.set_default_paths=function(e){if(_.isUndefined(e)||!_.isObject(e))throw"CREATE_BUTTONS.set_default_paths must be provided with defaults.";t=e},e.initialize_existing_view=function(){new CreateButtonsView({el:$(n)}),i(),PAGE_EVENTS.on("dashboard_router:before:navigate",e.reset)},e.reset=function(){e.update(t)},e.update=function(e){var t=new CreateButtons(e),a=new CreateButtonsView({model:t});$(n).html(a.render().el),i()},e}(CREATE_BUTTONS||{});document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("create_study_aid_button_container")){var e=JSON.parse(document.getElementById("create_paths_presenter_json").innerHTML);CREATE_BUTTONS.set_default_paths(e),CREATE_BUTTONS.initialize_existing_view()}});var MODAL=function(e){var t;e.create=function(t,n,i,a){return e.create_with_callback(t,n,i,undefined,undefined,a)},e.create_with_callback=function(e,i,a,s,o,r){r||(r={keyboard:!0}),n(e,a),$("."+e+".modal").remove();var l=a.length?a.join(" "):"",c=$('<div class="'+e+" modal "+l+'" role="dialog"></div>');return $.get(i,function(t){$("body").append(c),$("."+e).modal(r),c.html(t),c.trigger("loaded.bs.modal"),$(document).trigger("loaded.bs.modal"),"function"==typeof s&&(o=o||window,s.apply(o))}).always(function(){t.modal("hide"),t.remove(),$("body").addClass("modal-open")}).fail(r.error_handler),c},e.create_mustache_modal=function(e,t,n){var i=n&&n.length?n.join(" "):"";return $("."+e+".modal").remove(),$modal=$(t),$modal.addClass(e).addClass(i),$("body").append($modal),$modal.modal({keyboard:!0}),$modal},e.generic_modal=function(e,t,n){var i=SMT["modals/generic_modal"]({header:e,text:t,ok_text:I18n.t("general.ok")}),a=MODAL.create_mustache_modal("generic_modal",i,["xs_modal"]);n&&a.on("hidden.bs.modal",n)},e.confirm_modal=function(e,t,n,i){i||(i={});var a=SMT["modals/confirm_modal"]({header:e,text:t,cancel_text:i.cancel_text||I18n.t("general.cancel"),ok_text:i.ok_text||I18n.t("general.ok")}),s=MODAL.create_mustache_modal("confirm_modal",a,["xs_modal"]),o=i.cancel_callback||function(){};s.on("click",".btn-ok",n),s.on("click",".btn-cancel",o),s.find(".btn-ok").addClass(i.ok_class?i.ok_class:"btn-success"),s.find(".btn-cancel").addClass(i.cancel_class?i.cancel_class:"")};var n=function(e,n){var i="small_modal";void 0!==n&&n.indexOf("xs_modal")>-1&&(i="xs_modal"),t=$('<div class="'+i+" modal loading_modal loading_"+e+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h2>'+I18n.t("loading")+' <img src="/assets/loading.gif" width="30" height="30"></h2></div><div class="modal-body"></div></div></div></div>'),$("body").append(t),t.modal({keyboard:!1})};return e.iframe_loaded=function(){FRAME.top_examtime_window().$(".embed_study_aid").find(".iframe_loading").remove()},e}(MODAL||{});
/*!
 * jQuery Validation Plugin v1.14.0
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2015 JÃ¶rn Zaefferer
 * Released under the MIT license
 */
/*!
 * jQuery Validation Plugin v1.14.0
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2015 JÃ¶rn Zaefferer
 * Released under the MIT license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var n=e.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(this).hasClass("cancel")&&(n.cancelSubmit=!0),e(this).attr("formnovalidate")!==undefined&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(t){function i(){var i,a;return!n.settings.submitHandler||(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),a=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),a!==undefined&&a)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,n,i;return e(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t,i=i.concat(n.errorList)}),n.errorList=i),t},rules:function(t,n){var i,a,s,o,r,l,c=this[0];if(t)switch(a=(i=e.data(c.form,"validator").settings).rules,s=e.validator.staticRules(c),t){case"add":e.extend(s,e.validator.normalizeRule(n)),delete s.messages,a[c.name]=s,n.messages&&(i.messages[c.name]=e.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},e.each(n.split(/\s/),function(t,n){l[n]=s[n],delete s[n],"required"===n&&e(c).removeAttr("aria-required")}),l):(delete a[c.name],s)}return(o=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c)).required&&(r=o.required,delete o.required,o=e.extend({required:r},o),e(c).attr("aria-required","true")),o.remote&&(r=o.remote,delete o.remote,o=e.extend(o,{remote:r})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,i)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:I18n.t("user_validation_errors.required"),remote:I18n.t("user_validation_errors.remote"),email:I18n.t("user_validation_errors.email"),url:I18n.t("user_validation_errors.url"),date:I18n.t("user_validation_errors.date"),dateISO:I18n.t("user_validation_errors.date_ISO"),number:I18n.t("user_validation_errors.number"),digits:I18n.t("user_validation_errors.digits"),creditcard:I18n.t("user_validation_errors.credit_card"),equalTo:I18n.t("user_validation_errors.equal_to"),maxlength:e.validator.format(I18n.t("user_validation_errors.max_length")),minlength:e.validator.format(I18n.t("user_validation_errors.min_length")),rangelength:e.validator.format(I18n.t("user_validation_errors.range_length")),range:e.validator.format(I18n.t("user_validation_errors.range")),max:e.validator.format(I18n.t("user_validation_errors.max")),min:e.validator.format(I18n.t("user_validation_errors.min"))},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),a=n.settings;a[i]&&!e(this).is(a.ignore)&&a[i].call(n,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})}),n=this.settings.rules,e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n=this.clean(t),i=this.validationTargetFor(n),a=!0;return this.lastElement=i,i===undefined?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=e(i),(a=!1!==this.check(i))?delete this.invalid[i.name]:this.invalid[i.name]=!0),e(t).attr("aria-invalid",!a),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a},showErrors:function(t){if(t){for(var n in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,n=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,"");else n.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!t.objectLength(e(this).rules()))&&(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,i=e(t),a=t.type;return"radio"===a||"checkbox"===a?this.findByName(t.name).filter(":checked").val():"number"===a&&"undefined"!=typeof t.validity?!t.validity.badInput&&i.val():"string"==typeof(n=i.val())?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i,a,s=e(t).rules(),o=e.map(s,function(e,t){return t}).length,r=!1,l=this.elementValue(t);for(i in s){a={method:i,parameters:s[i]};try{if("dependency-mismatch"===(n=e.validator.methods[i].call(this,l,t,a.parameters))&&1===o){r=!0;continue}if(r=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,a),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",c),c instanceof TypeError&&(c.message+=".  Exception occurred when checking element "+t.id+", check the '"+a.method+"' method."),c}}if(!r)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),a=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):a.test(i)&&(i=e.validator.format(i.replace(a,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t,method:n.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i,a,s,o=this.errorsFor(t),r=this.idOrName(t),l=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(i=o=e("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t),o.is("label")?o.attr("for",r):0===o.parents("label[for='"+r+"']").length&&(s=o.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),l?l.match(new RegExp("\\b"+s+"\\b"))||(l+=" "+s):l=s,e(t).attr("aria-describedby",l),(a=this.groups[t.name])&&e.each(this.groups,function(t,n){n===a&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!n&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var n=this.idOrName(t),i=e(t).attr("aria-describedby"),a="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(a=a+", #"+i.replace(/\s+/g,", #")),this.errors().filter(a)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(e,t,n,i){/min|max/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=undefined)),i||0===i?e[n]=i:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(t){var n,i,a={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(""===(i=t.getAttribute(n))&&(i=!0),i=!!i):i=s.attr(n),this.normalizeAttributeRule(a,o,n,i);return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(t){var n,i,a={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)i=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(a,o,n,i);return a},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,a){if(!1!==a){if(a.param||a.depends){var s=!0;switch(typeof a.depends){case"string":s=!!e(a.depends,n.form).length;break;case"function":s=a.depends.call(n,n)}s?t[i]=a.param===undefined||a.param:delete t[i]}}else delete t[i]}),e.each(t,function(i,a){t[i]=e.isFunction(a)?a(n):a}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=i!==undefined?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var a=e(n).val();return a&&a.length>0}return this.checkable(n)?this.getLength(t,n)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){
// Copyright (c) 2010-2013 Diego Perini, MIT licensed
return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n,i,a=0,s=0,o=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(n=e.length-1;n>=0;n--)i=e.charAt(n),s=parseInt(i,10),o&&(s*=2)>9&&(s-=9),a+=s,o=!o;return a%10==0},minlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i},maxlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a<=i},rangelength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i[0]&&a<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,i){var a=e(i);return this.settings.onfocusout&&a.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(n).valid()}),t===a.val()},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var a,s,o=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===t?o.valid:(o.old=t,a=this,this.startRequest(n),(s={})[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:s,context:a.currentForm,success:function(i){var s,r,l,c=!0===i||"true"===i;a.settings.messages[n.name].remote=o.originalMessage,c?(l=a.formSubmitted,a.prepareElement(n),a.formSubmitted=l,a.successList.push(n),delete a.invalid[n.name],a.showErrors()):(s={},r=i||a.defaultMessage(n,"remote"),s[n.name]=o.message=e.isFunction(r)?r(t):r,a.invalid[n.name]=!0,a.showErrors(s)),o.valid=c,a.stopRequest(n,c)}},i)),"pending")}}});var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,i){var a=e.port;"abort"===e.mode&&(n[a]&&n[a].abort(),n[a]=i)}):(t=e.ajax,e.ajax=function(i){var a=("mode"in i?i:e.ajaxSettings).mode,s=("port"in i?i:e.ajaxSettings).port;return"abort"===a?(n[s]&&n[s].abort(),n[s]=t.apply(this,arguments),n[s]):t.apply(this,arguments)})}),
/*

  jQuery Tags Input Plugin 1.3.3

  Copyright (c) 2011 XOXCO, Inc

  Documentation for this plugin lives here:
  http://xoxco.com/clickable/jquery-tags-input

  Licensed under the MIT license:
  http://www.opensource.org/licenses/mit-license.php

  ben@xoxco.com

*/
function(e){var t=new Array,n=new Array;e.fn.doAutosize=function(t){var n=e(this).data("minwidth"),i=e(this).data("maxwidth"),a="",s=e(this),o=e("#"+e(this).data("tester_id"));if(a!==(a=s.val())){var r=a.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");o.html(r);var l=o.width(),c=l+t.comfortZone>=n?l+t.comfortZone:n;(c<s.width()&&c>=n||c>n&&c<i)&&s.width(c)}},e.fn.resetAutosize=function(t){var n=e(this).data("minwidth")||t.minInputWidth||e(this).width(),i=e(this).data("maxwidth")||t.maxInputWidth||e(this).closest(".tagsinput").width()-t.inputPadding,a=e(this),s=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),whiteSpace:"nowrap"}),o=e(this).attr("id")+"_autosize_tester";!e("#"+o).length>0&&(s.attr("id",o),s.appendTo("body")),a.data("minwidth",n),a.data("maxwidth",i),a.data("tester_id",o),a.css("width",n)},e.fn.addTag=function(i,a){return a=jQuery.extend({focus:!1,callback:!0},a),this.each(function(){var s=e(this).attr("id"),o=e(this).val().split(t[s]);""==o[0]&&(o=new Array);var r=i=jQuery.trim(i);if(a.label&&(r=a.label),a.unique)1==(l=e(this).tagExist(i))&&e("#"+s+"_tag").addClass("not_valid");else var l=!1;if(""!=i&&1!=l){if(e("<span>").addClass("tag").append(e("<span>").attr("value",i).text(r).append("&nbsp;&nbsp;"),e("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return e("#"+s).removeTag(escape(i))})).insertBefore("#"+s+"_addTag"),o.push(i),e("#"+s+"_tag").val(""),a.focus?e("#"+s+"_tag").focus():e("#"+s+"_tag").blur(),e.fn.tagsInput.updateTagsField(this,o),a.callback&&n[s]&&n[s].onAddTag)n[s].onAddTag.call(this,i);if(n[s]&&n[s].onChange){var c=o.length;n[s].onChange.call(this,e(this),o[c-1])}}}),!1},e.fn.removeTag=function(t){return t=unescape(t),this.each(function(){var i=e(this).attr("id"),a=[],s=e("#"+i+"_tagsinput .tag span");(e.each(s,function(n,i){e(i).attr("value")!==t&&(tag_obj={value:e(i).attr("value"),label:e.trim(e(i).text())},a.push(tag_obj))}),e("#"+i+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,a),n[i]&&n[i].onRemoveTag)&&n[i].onRemoveTag.call(this,t)}),!1},e.fn.tagExist=function(n){var i=e(this).attr("id"),a=e(this).val().split(t[i]);return jQuery.inArray(n,a)>=0},e.fn.importTags=function(t){id=e(this).attr("id"),e("#"+id+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,t)},e.fn.tagsInput=function(i){var a=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i);return this.each(function(){a.hide&&e(this).hide();var i=e(this).attr("id");i&&!t[e(this).attr("id")]||(i=e(this).attr("id","tags"+(new Date).getTime()).attr("id"));var s=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},a);t[i]=s.delimiter,(a.onAddTag||a.onRemoveTag||a.onChange)&&(n[i]=new Array,n[i].onAddTag=a.onAddTag,n[i].onRemoveTag=a.onRemoveTag,n[i].onChange=a.onChange);var o='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(a.interactive&&(o=o+'<input id="'+i+'_tag" autocomplete="off" value="" data-default="'+a.defaultText+'" />'),e(o+='</div><div class="tags_clear"></div></div>').insertAfter(this),e.each([].filter.call(this.attributes,function(e){return/^data-/.test(e.name)}),function(t,n){e(s.fake_input).attr(n.name,n.value)}),e(s.holder).css("width",a.width),e(s.holder).css("min-height",a.height),e(s.holder).css("height","100%"),""!=e(s.real_input).val()&&e.fn.tagsInput.importTags(e(s.real_input),e(s.real_input).val()),a.interactive){if(e(s.fake_input).val(e(s.fake_input).attr("data-default")),e(s.fake_input).css("color",a.placeholderColor),e(s.fake_input).resetAutosize(a),e(s.holder).bind("click",s,function(t){e(t.data.fake_input).focus()}),e(s.fake_input).bind("focus",s,function(t){e(t.data.fake_input).val()==e(t.data.fake_input).attr("data-default")&&e(t.data.fake_input).val(""),e(t.data.fake_input).css("color","#000000")}),a.autocomplete_url!=undefined){for(attrname in autocomplete_options={source:a.autocomplete_url},a.autocomplete)autocomplete_options[attrname]=a.autocomplete[attrname];jQuery.Autocompleter!==undefined?(e(s.fake_input).autocomplete(a.autocomplete_url,a.autocomplete),e(s.fake_input).bind("result",s,function(t,n){n&&e("#"+i).addTag(n[0]+"",{focus:!0,unique:a.unique})})):jQuery.ui.autocomplete!==undefined&&(e(s.fake_input).autocomplete(autocomplete_options),e(s.fake_input).bind("autocompleteselect",s,function(t,n){return e(t.data.real_input).addTag(n.item.value,{focus:!0,unique:a.unique}),!1}))}else e(s.fake_input).bind("blur change",s,function(t){var n=e(this).attr("data-default");return("blur"!=t.type||!e(".typeahead").is(":visible"))&&("change"==t.type&&t.originalEvent!==undefined||(""!=e(t.data.fake_input).val()&&e(t.data.fake_input).val()!=n?t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:a.unique}):(e(t.data.fake_input).val(e(t.data.fake_input).attr("data-default")),e(t.data.fake_input).css("color",a.placeholderColor)),!1))});e(s.fake_input).bind("keypress",s,function(t){if(t.which==t.data.delimiter.charCodeAt(0)||13==t.which)return t.preventDefault(),t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:a.unique}),e(t.data.fake_input).resetAutosize(a),!1;t.data.autosize&&e(t.data.fake_input).doAutosize(a)}),s.removeWithBackspace&&e(s.fake_input).bind("keydown",function(t){if(8==t.keyCode&&""==e(this).val()){t.preventDefault();var n=e(this).closest(".tagsinput").find(".tag:last").text(),i=e(this).attr("id").replace(/_tag$/,"");n=n.replace(/[\s]+x$/,""),e("#"+i).removeTag(escape(n)),e(this).trigger("focus")}}),e(s.fake_input).blur(),s.unique&&e(s.fake_input).keydown(function(t){(8==t.keyCode||String.fromCharCode(t.which).match(/\w+|[\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1,/]+/))&&e(this).removeClass("not_valid")})}}),this},e.fn.tagsInput.updateTagsField=function(n,i){var a=e(n).attr("id");e(n).val(i.join(t[a]))},e.fn.tagsInput.importTags=function(a,s){e(a).val("");var o=e(a).attr("id"),r=[];if("string"==typeof s){var l=s.split(t[o]);for(i=0;i<l.length;i++)r.push({value:l[i],label:l[i]})}else r=s;for(i=0;i<r.length;i++)e(a).addTag(r[i].value,{focus:!1,callback:!1,label:r[i].label});n[o]&&n[o].onChange&&n[o].onChange.call(a,a,r[i])}}(jQuery),
/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return e.Bloodhound=t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):e.Bloodhound=t(jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,a){if(!(i=n.call(null,a,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,a){if(i=n.call(null,a,e,t))return!1}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,a;return function(){var s,o,r=this,l=arguments;return s=function(){i=null,n||(a=e.apply(r,l))},o=n&&!i,clearTimeout(i),i=setTimeout(s,t),o&&(a=e.apply(r,l)),a}},throttle:function(e,t){var n,i,a,s,o,r;return o=0,r=function(){o=new Date,a=null,s=e.apply(n,i)},function(){var l=new Date,c=t-(l-o);return n=this,i=arguments,c<=0?(clearTimeout(a),a=null,o=l,s=e.apply(n,i)):a||(a=setTimeout(r,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function e(e){return(e=t.toStr(e))?e.split(/\s+/):[]}function n(e){return(e=t.toStr(e))?e.split(/\W+/):[]}function i(e){return function(n){return n=t.isArray(n)?n:[].slice.call(arguments,0),function(i){var a=[];return t.each(n,function(n){a=a.concat(e(t.toStr(i[n])))}),a}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),a=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function a(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new a(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){"use strict";function n(e,n){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=n||r,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function a(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(t){return e.parseJSON(t)}function o(e){var t,n,i=[],a=r.length;for(t=0;t<a;t++)(n=r.key(t)).match(e)&&i.push(n.replace(e,""));return i}var r;try{(r=window.localStorage).setItem("~~~","!"),r.removeItem("~~~")}catch(l){r=null}return t.mixin(n.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(l){"QuotaExceededError"===l.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),s(this.ls.getItem(this._prefix(e)))},set:function(e,n,s){return t.isNumber(s)?this._safeSet(this._ttlKey(e),a(i()+s)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),a(n))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=o(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var n=s(this.ls.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&i()>n)}}),n}(),o=function(){"use strict";function n(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new a(0):r}var i=0,s={},o=6,r=new a(10);return n.setMaxPendingRequests=function(e){o=e},n.resetCache=function(){r.reset()},t.mixin(n.prototype,{_fingerprint:function(t){return(t=t||{}).url+t.type+e.param(t.data||{})},_get:function(e,t){function n(e){t(null,e),d._cache.set(l,e)}function a(){t(!0)}function r(){i--,delete s[l],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var l,c,d=this;l=this._fingerprint(e),this.cancelled||l!==this.lastReq||((c=s[l])?c.done(n).fail(a):i<o?(i++,s[l]=this._send(e).done(n).fail(a).always(r)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var a,s;i=i||e.noop,n=t.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(a=this._cache.get(s))?i(null,a):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),r=window.SearchIndex=function(){"use strict";function n(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||t.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.matchAnyQueryToken=n.matchAnyQueryToken,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function a(){var e={};return e[l]=[],e[r]={},e}function s(e){for(var t={},n=[],i=0,a=e.length;i<a;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function o(e,t){var n=0,i=0,a=[];e=e.sort(),t=t.sort();for(var s=e.length,o=t.length;n<s&&i<o;)e[n]<t[i]?n++:e[n]>t[i]?i++:(a.push(e[n]),n++,i++);return a}var r="c",l="i";return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,o;n.datums[s=n.identify(e)]=e,o=i(n.datumTokenizer(e)),t.each(o,function(e){var t,i,o;for(t=n.trie,i=e.split("");o=i.shift();)(t=t[r][o]||(t[r][o]=a()))[l].push(s)})})},get:function(e){var n=this;return t.map(e,function(e){return n.datums[e]})},search:function(e){var n,a,c=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,s;if(a&&0===a.length&&!c.matchAnyQueryToken)return!1;for(t=c.trie,n=e.split("");t&&(i=n.shift());)t=t[r][i];if(t&&0===n.length)s=t[l].slice(0),a=a?o(a,s):s;else if(!c.matchAnyQueryToken)return a=[],!1}),a?t.map(s(a),function(e){return c.datums[e]}):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=a()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function e(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new s(e.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(e){this.cache&&(this.storage.set(n.data,e,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,t={};return this.cache?(t.data=this.storage.get(n.data),t.protocol=this.storage.get(n.protocol),t.thumbprint=this.storage.get(n.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(e){function t(){e(!0)}function n(t){e(null,a.transform(t))}var i,a=this;e&&(i=this.prepare(this._settings()),this.transport(i).fail(t).done(n))},clear:function(){return this.storage.clear(),this}}),e}(),c=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.indexResponse=e.indexResponse,this.transport=new o({cache:e.cache,limiter:e.limiter,transport:e.transport})}return t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,t){function n(e,n){t(e?[]:a.transform(n))}var i,a=this;if(t)return e=e||"",i=this.prepare(e,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),e}(),d=function(){"use strict";function i(i){var a;return i?(a={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},i=t.isString(i)?{url:i}:i,!(i=t.mixin(a,i)).url&&e.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?r(i.transport):e.ajax,i):null}function a(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,!(n=t.mixin(i,n)).url&&e.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=o(n),n.transport=n.transport?r(n.transport):e.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(e){function t(e,t){return t.url=s(t.url,e),t}function n(e,t){return t.url=t.url.replace(o,encodeURIComponent(e)),t}function i(e,t){return t}var a,s,o;return a=e.prepare,s=e.replace,o=e.wildcard,a||(a=s?t:e.wildcard?n:i)}function o(e){function n(e){return function(n){return t.debounce(n,e)}}function i(e){return function(n){return t.throttle(n,e)}}var a,s,o;return a=e.limiter,s=e.rateLimitBy,o=e.rateLimitWait,a||(a=/^throttle$/i.test(s)?i(o):n(o)),a}function r(n){return function(i){function a(e){t.defer(function(){o.resolve(e)})}function s(e){t.defer(function(){o.reject(e)})}var o=e.Deferred();return n(i,a,s),o}}return function(n){var s,o;return s={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},!(n=t.mixin(s,n||{})).datumTokenizer&&e.error("datumTokenizer is required"),!n.queryTokenizer&&e.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(e){return e.sort(o)}:t.identity,n.local=t.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=a(n.remote),n}}();return function(){"use strict";function n(e){e=d(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.indexRemote=e.indexRemote,this.local=e.local,this.remote=e.remote?new c(e.remote):null,this.prefetch=e.prefetch?new l(e.prefetch):null,this.index=new r({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}var a;return a=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=a),n},n.tokenizers=i,t.mixin(n.prototype,{__ttAdapter:function(){function e(e,t,i){return n.search(e,t,i)}function t(e,t){return n.search(e,t)}var n=this;return this.remote?e:t},_loadPrefetch:function(){function t(e,t){if(e)return n.reject();a.add(t),a.prefetch.store(a.index.serialize()),n.resolve()}var n,i,a=this;return n=e.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(t):n.resolve(),n.promise()},_initialize:function(){function e(){t.add(t.local)}var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(e),this.initPromise},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=t.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,n,i){function a(e){var n=[];t.each(e,function(e){!t.some(s,function(t){return o.identify(e)===o.identify(t)})&&n.push(e)}),o.indexRemote&&o.add(n),i(n)}var s,o=this;return n=n||t.noop,i=i||t.noop,s=this.sorter(this.index.search(e)),n(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(e,a):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,a){if(!(i=n.call(null,a,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,a){if(i=n.call(null,a,e,t))return!1}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,a;return function(){var s,o,r=this,l=arguments;return s=function(){i=null,n||(a=e.apply(r,l))},o=n&&!i,clearTimeout(i),i=setTimeout(s,t),o&&(a=e.apply(r,l)),a}},throttle:function(e,t){var n,i,a,s,o,r;return o=0,r=function(){o=new Date,a=null,s=e.apply(n,i)},function(){var l=new Date,c=t-(l-o);return n=this,i=arguments,c<=0?(clearTimeout(a),a=null,o=l,s=e.apply(n,i)):a||(a=setTimeout(r,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){"use strict";function e(e){var o,r;return r=t.mixin({},s,e),{css:(o={css:a(),classes:r,html:n(r),selectors:i(r)}).css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function n(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(e,t){n[t]="."+e}),n}function a(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),i=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i,a;return i="typeahead:",a={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(n.prototype,{_trigger:function(t,n){var a;return a=e.Event(i+t),(n=n||[]).unshift(a),this.$el.trigger.apply(this.$el,n),a},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=a[e])&&this._trigger(t,[].slice.call(arguments,1))}}),n}(),a=function(){"use strict";function e(e,t,n,i){var a;if(!n)return this;for(t=t.split(l),n=i?r(n,i):n,this._callbacks=this._callbacks||{};a=t.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function a(e){var t,n,i,a,o;if(!this._callbacks)return this;for(e=e.split(l),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)a=s(n.sync,this,[t].concat(i)),o=s(n.async,this,[t].concat(i)),a()&&c(o);return this}function s(e,t,n){function i(){for(var i,a=0,s=e.length;!i&&a<s;a+=1)i=!1===e[a].apply(t,n);return!i}return i}function o(){return window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function r(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=o();return{onSync:n,onAsync:t,off:i,trigger:a}}(),s=function(e){"use strict";function n(e,n,i){for(var a,s=[],o=0,r=e.length;o<r;o++)s.push(t.escapeRegExChars(e[o]));return a=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(a):new RegExp(a,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(a){function s(t){var n,i,s;return(n=r.exec(t.data))&&(s=e.createElement(a.tagName),a.className&&(s.className=a.className),(i=t.splitText(n.index)).splitText(n[0].length),s.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(s,i)),!!n}function o(e,t){for(var n,i=3,a=0;a<e.childNodes.length;a++)(n=e.childNodes[a]).nodeType===i?a+=t(n)?1:0:o(n,t)}var r;(a=t.mixin({},i,a)).node&&a.pattern&&(a.pattern=t.isArray(a.pattern)?a.pattern:[a.pattern],r=n(a.pattern,a.caseSensitive,a.wordsOnly),o(a.node,s))}}(window.document),o=function(){"use strict";function n(n,a){(n=n||{}).input||e.error("input is missing"),a.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,a,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=r[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!o(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!o(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;i=!!(n=s(e,this.query))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,n,i,a,s=this;return e=t.bind(this._onBlur,this),n=t.bind(this._onFocus,this),i=t.bind(this._onKeydown,this),a=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",a):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){r[e.which||e.keyCode]||t.defer(t.bind(s._onInput,s,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),!(""!==e&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||((i=document.selection.createRange()).moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),n}(),r=function(){"use strict";function n(n,a){(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&!r(n.name)&&e.error("invalid dataset name: "+n.name),a.mixin(this),this.highlight=!!n.highlight,this.name=n.name||c(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function o(n,i){function a(t){return e("<div>").text(i(t))}return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||a}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=t.getIdGenerator(),n.extractData=function(t){var n=e(t);return n.data(l.obj)?{val:n.data(l.val)||"",obj:n.data(l.obj)||null}:null},t.mixin(n.prototype,a,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var a,o=this;return a=document.createDocumentFragment(),t.each(i,function(t){var i,s;s=o._injectQuery(n,t),i=e(o.templates.suggestion(s)).data(l.obj,t).data(l.val,o.displayFn(t)).addClass(o.classes.suggestion+" "+o.classes.selectable),a.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:a,pattern:n}),e(a)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function(t){function n(e){o||(o=!0,e=(e||[]).slice(0,a.limit),r=e.length,a._overwrite(t,e),r<a.limit&&a.async&&a.trigger("asyncRequested",t))}function i(n){n=n||[],!s&&r<a.limit&&(a.cancel=e.noop,a._append(t,n.slice(0,a.limit-r)),r+=n.length,a.async&&a.trigger("asyncReceived",t))}var a=this,s=!1,o=!1,r=0;this.cancel(),this.cancel=function(){s=!0,a.cancel=e.noop,a.async&&a.trigger("asyncCanceled",t)},this.source(t,n,i),!o&&n([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),n}(),l=function(){"use strict";function n(n,i){function a(t){var n=s.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(s.$node),new r(t,i)}var s=this;(n=n||{}).node||e.error("node is required"),i.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,a)}return t.mixin(n.prototype,a,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function e(e){return e.isEmpty()}return t.every(this.datasets,e)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,a;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):a<n&&this.$node.scrollTop(i+(n-a))},bind:function(){var e,n=this;return e=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),t.each(this.datasets,function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?r.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){function n(t){t.update(e)}var i=e!==this.query;return i&&(this.query=e,t.each(this.datasets,n)),i},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,n)}}),n}(),c=function(){"use strict";function e(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return t.mixin(e.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),d=function(){"use strict";function n(n,a){var s,o,r,l,c,d,u,_,h,p,f;(n=n||{}).input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),a.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),r=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),d=i(this,"isActive","open","_onUpKeyed"),u=i(this,"isActive","open","_onDownKeyed"),_=i(this,"isActive","isOpen","_onLeftKeyed"),h=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),f=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",o,this).onSync("enterKeyed",r,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",u,this).onSync("leftKeyed",_,this).onSync("rightKeyed",h,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",f,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}return t.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),n.on("blur.tt",function(e){var a,s,o;a=document.activeElement,s=i.is(a),o=i.has(a).length>0,t.isMsie()&&(s||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){
this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=t.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,n,i,a,s,r;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(a=o.normalizeQuery(i),s=t.escapeRegExChars(a),(r=new RegExp("^(?:"+s+")(.+$)","i").exec(n.val))&&this.input.setHint(i+r[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0)},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!((n=this.menu.getSelectableData(e))&&t!==n.val)||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(e){var t,n,i,a;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),a=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",a)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",a),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function a(t,n){t.each(function(){var t,i=e(this);(t=i.data(f.typeahead))&&n(t,i)})}function s(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(u(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function r(e,t){e.data(f.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(n){}return e}function u(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function _(e){var n,i;n=e.data(f.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(f.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(f.typeahead).removeData(f.www).removeData(f.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function h(n){var i;return(i=t.isJQuery(n)||t.isElement(n)?e(n).first():[]).length?i:null}var p,f,m;p=e.fn.typeahead,f={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(a,u){function _(){var n,_,m,g,v,b,y,w,x,S,T;t.each(u,function(e){e.highlight=!!a.highlight}),n=e(this),_=e(p.html.wrapper),m=h(a.hint),g=h(a.menu),v=!1!==a.hint&&!m,b=!1!==a.menu&&!g,v&&(m=s(n,p)),b&&(g=e(p.html.menu).css(p.css.menu)),m&&m.val(""),n=r(n,p),(v||b)&&(_.css(p.css.wrapper),n.css(v?p.css.input:p.css.inputWithNoHint),n.wrap(_).parent().prepend(v?m:null).append(b?g:null)),T=b?c:l,y=new i({el:n}),w=new o({hint:m,input:n},p),x=new T({node:g,datasets:u},p),S=new d({input:w,menu:x,eventBus:y,minLength:a.minLength},p),n.data(f.www,p),n.data(f.typeahead,S)}var p;return u=t.isArray(u)?u:[].slice.call(arguments,1),p=n((a=a||{}).classNames),this.each(_)},isEnabled:function(){var e;return a(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return a(this,function(e){e.enable()}),this},disable:function(){return a(this,function(e){e.disable()}),this},isActive:function(){var e;return a(this.first(),function(t){e=t.isActive()}),e},activate:function(){return a(this,function(e){e.activate()}),this},deactivate:function(){return a(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return a(this.first(),function(t){e=t.isOpen()}),e},open:function(){return a(this,function(e){e.open()}),this},close:function(){return a(this,function(e){e.close()}),this},select:function(t){var n=!1,i=e(t);return a(this.first(),function(e){n=e.select(i)}),n},autocomplete:function(t){var n=!1,i=e(t);return a(this.first(),function(e){n=e.autocomplete(i)}),n},moveCursor:function(e){var t=!1;return a(this.first(),function(n){t=n.moveCursor(e)}),t},val:function(e){var n;return arguments.length?(a(this,function(n){n.setVal(t.toStr(e))}),this):(a(this.first(),function(e){n=e.getVal()}),n)},destroy:function(){return a(this,function(e,t){_(t),e.destroy()}),this}},e.fn.typeahead=function(e){return m[e]?m[e].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=p,this}}()});var TaggableInput=function(){var e,t,n,i,a,s,o,r,l,c=this,d=!1,u=function(){d?d=!1:e.parent().find(".tag_error").stop().remove()},h=function(e){var t=e.parent(),n=e.attr("id"),i=$("#"+n+"_tag",t),a=$.trim(i.val()),s=i.attr("placeholder");a.length>0&&a!==s&&(e.addTag(a,{unique:!0}),i.hasClass("not_valid")||i.val(""))},p=function(e){a&&g(e),s&&m(e),o&&o(e,c),l&&_.defer(S),n.val("").trigger("input")},f=function(e){r&&r(e,c),l&&_.defer(S)},m=function(t){if("#"===t.charAt(0)){var n=$(document.activeElement),i=t.substr(1);e.removeTag(t),e.addTag(i),n.focus()}},g=function(i){t.find("span.tag").length>a?(e.removeTag(i),c.render_error(),n.addClass("not_valid"),d=!0):(n.val(""),t.find(".tt-menu").hide())},v=function(e){var t=e.parent(),i=e.attr("id"),a=$("#"+i+"_tagsinput",t);$new_tag_input_el=$("#"+i+"_tag",t),$new_tag_input_el.off("blur").on("blur",function(){a.find(".tt-menu").is(":hidden")&&$new_tag_input_el.typeahead("val",$new_tag_input_el.val())}),a.parents(".modal").on("click",function(t){0===$(t.target).parents(".tagsinput").length&&h(e)}),$new_tag_input_el.on("keydown",function(t){9===(t.keyCode||t.which)&&_.defer(function(){$(document.activeElement)!==n&&h(e)})})},b=function(){var e={comfortZone:20};n.off("keypress").on("keypress",function(t){t.keyCode||t.which;$(this).doAutosize(e)}),n.off("blur")},y=function(e,t){var i=e.url,a=e.value||"value",s=e.label||"value",o=t.parent(),r=t.attr("id"),l=$("#"+r+"_tag",o);e.forceSelection?b():v(t);var c={highlight:!0,minLength:3},d={source:new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:i,replace:function(e,n){var i="";return-1===e.indexOf("?")?i+="?":i+="&",(e+(i+="current_tags="+encodeURIComponent(t.val()))).replace("!QUERY",encodeURIComponent(n))}}})};$.extend(c,e.options),$.extend(d,e.dataset_options),l.typeahead(c,d),n.on("typeahead:select",function(e,n){var i,o;i="undefined"!=typeof n[a]?""+n[a]:n,o="undefined"!=typeof n[s]?""+n[s]:i,t.tagExist(i)||"undefined"!=typeof n.existing&&n.existing?(l.trigger("keypress"),l.addClass("not_valid")):(t.addTag(i,{label:o}),l.typeahead("val",""),l.removeClass("not_valid"))})},w=function(){n.removeClass("not_valid")},x=function(){(i=$("<div class='tags_placeholder'>")).text(l),t.prepend(i),i=t.find(".tags_placeholder"),n.on("input keydown",function(){S(),w()})},S=function(){0===n.val().length&&0===t.find(".tag").length?i.show():i.hide()};c.max_tags_limit=function(){return a},c.focus_input=function(){n.focus()},c.add_tag=function(t,n){var i=!1;return e.tagExist(""+t)||(e.addTag(t,{label:n}),i=!0),i},c.remove_tag=function(t){var n=""+t;e.tagExist(n)&&e.removeTag(n)},c.render_error=function(){e.parent().find(".tag_error").stop().remove(),$("<div class='tag_error errors alert alert-danger'>"+I18n.t("study_aids.edit.maximum_tags",{count:a})+"</div>").insertAfter(t).hide().fadeIn(300)},c.current_tags=function(){var t=$.trim(e.val());return""===t?[]:t.split(",")},c.get_input_element=function(){return e},c.init=function(i,c){e=$(i);var d=c.defaultText,h={height:"",width:"",onAddTag:p,onRemoveTag:f};a=c.maxLimit,s=c.removeHash,o=c.addTagCallback,r=c.removeTagCallback,l=c.longPlaceholder,tag_count=e.val().split(",").length,a&&tag_count>=a&&(c.defaultText=""),$.extend(h,c),e.tagsInput(h);var m=e.parent(),g=e.attr("id");t=$("#"+g+"_tagsinput",m),(n=$("#"+g+"_tag",m)).on("input",u),void 0!==c&&"undefined"!=typeof c.typeahead&&"undefined"!=typeof c.typeahead.url&&y(c.typeahead,e),n.attr("placeholder",d),n.text(d);var v=n.textWidth();if(v>70){var b=n.outerWidth()-n.width();n.css("min-width",v+b)}n.text(""),n.on("paste",function(){_.defer(function(){n.trigger("keypress")})}),l&&x()}},TAGS_INPUT=new TaggableInput,TAG_LIST=function(e){var t=15;return e.default_max_tags_limit=function(){return t},e.init=function(e,n){$list_input_element=$(e);var i=n.placeholder_text||I18n.t("tags.add_a_tag");$.extend(n,{defaultText:i,removeHash:!0,maxLimit:n.maxLimit||t}),TAGS_INPUT.init(e,n)},e.render_tags_from_array=function(e){var t=$("ul.tag_list"),n=$(".no_tags_placeholder");if(t.html(""),""===$.trim(e))t.hide(),n.show();else{var i=e;"string"==typeof i&&(i=i.split(",")),$.each(i,function(e,n){var i=$("<li>"),a=escape(n).replace(/\//g,"%2F"),s=$("<a href='"+Routes.list_tags_path(a)+"' rel='tag'>");s.text(n),i.append(s),t.append(i)}),t.show(),n.hide()}},e}(TAG_LIST||{}),EDIT_COURSE_META=function(e){return e.init=function(){var e=$(".course_modal[role=dialog]");$('input[name="tag_list"]',e).length&&TAG_LIST.init($('input[name="tag_list"]',e),{typeahead:{url:Routes.tags_typeahead_path({dont_block_ui:1,term:"!QUERY"})}}),$('input[name="admin_tag_list"]',e).length&&TAG_LIST.init($('input[name="admin_tag_list"]',e),{typeahead:{url:Routes.tags_typeahead_path({dont_block_ui:1,term:"!QUERY"})},placeholder_text:I18n.t("tags.add_an_admin_tag")})},e}(EDIT_COURSE_META||{}),COURSE_SETTINGS=function(e){var t=".course_modal",n=t+" form",i=t+" form#add_course",a=t+" form#edit_course",s=t+" .btn-ok",o=t+" #course_form_errors",r=t+" #private",l=t+" #meta_hide_summary",c=t+" .course_link.row",d=t+" #certify_course",u=t+" .certificate_details";return e.settings_modal=function(e){var t;t=e?Routes.settings_course_path(e):Routes.new_course_path();var n=MODAL.create_with_callback("course_modal",t,["small_modal"],function(){n.find("form").validate(),n.find(".what_is_this").on("click",function(e){e.preventDefault()}).tooltip()})},$(document).on("click",s,function(e){e.preventDefault(),$(n).submit()}),$(document).on("submit",n,function(){$(o).addClass("hidden").empty(),$(s).text(I18n.t("saving")).addClass("disabled")}),$(document).on("ajax:success",n,function(e,t){"undefined"!=typeof COURSE&&COURSE.events.trigger("courses:saved",t)}),$(document).on("ajax:success",i,function(e,t){do_redirect(Routes.edit_course_path(t.id))}),$(document).on("ajax:success",a,function(e,n){if($(t).modal("hide"),"undefined"!=typeof COURSE){var i=COURSE.get_course_model();i&&i.set(_.omit(n,"course_modules"))}}),$(document).on("ajax:error",n,function(e,t){var n=JSON.parse(t.responseText),i="<ul>";_.each(n,function(e){i+="<li>"+e+"</li>"}),i+="</ul>",$(o).removeClass("hidden").html(i),$(s).text(I18n.t("general.save")).removeClass("disabled")}),$(document).on("click",".create_course_btn, .create_course, .create_course_link",function(t){t.preventDefault(),e.settings_modal()}),$(document).on("click",r,function(){$(c).toggleClass("hidden",$(r).prop("checked"))}),$(document).on("click",d,function(){$(u).toggleClass("hidden",$(d).attr("checked"))}),$(document).on("click",[r,l].join(","),function(e){if(!CURRENT_USER.plan_wrapper["create_private_courses?"])return $(document).trigger("premium:upgrade_prompt",{context:"content_privacy"}),_.defer(function(){$(r).prop("checked",!1),$(c).removeClass("hidden")}),e.preventDefault(),!1}),e}(COURSE_SETTINGS||{});!function(e){e.jGrowl=function(t,n){0==e("#jGrowl").length&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo("body"),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(e.isFunction(this.each)){var i=arguments;return this.each(function(){e(this).data("jGrowl.instance")==undefined&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(i).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){"undefined"!=typeof(n=e.extend({},this.defaults,n)).speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:t,options:n}),n.log.apply(this.element,[this.element,t,n])},render:function(t){var n=this,i=t.message,a=t.options;a.themeState=""==a.themeState?"":"ui-state-"+a.themeState;t=e("<div/>").addClass("jGrowl-notification "+a.themeState+" ui-corner-all"+(a.group!=undefined&&""!=a.group?" "+a.group:"")).append(e("<div/>").addClass("jGrowl-close").html(a.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(a.header)).append(e("<div/>").addClass("jGrowl-message").html(i)).data("jGrowl",a).addClass(a.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){e(this).parent().trigger("jGrowl.beforeClose")}).parent();e(t).bind("mouseover.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){!1!==a.beforeOpen.apply(t,[t,i,a,n.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){!1!==a.open.apply(t,[t,i,a,n.element])&&("after"==a.glue?e("div.jGrowl-notification:last",n.element).after(t):e("div.jGrowl-notification:first",n.element).before(t),e(this).animate(a.animateOpen,a.openDuration,a.easing,function(){!1===e.support.opacity&&this.style.removeAttribute("filter"),null!==e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){a.afterOpen.apply(t,[t,i,a,n.element])}).bind("jGrowl.beforeClose",function(){!1!==a.beforeClose.apply(t,[t,i,a,n.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(a.animateClose,a.closeDuration,a.easing,function(){e.isFunction(a.close)?!1!==a.close.apply(t,[t,i,a,n.element])&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=a.corners&&e.fn.corner!=undefined&&e(t).corner(a.corners),e("div.jGrowl-notification:parent",n.element).length>1&&0==e("div.jGrowl-closer",n.element).length&&!1!==this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find("div.jGrowl-notification:parent").each(function(){e(this).data("jGrowl")!=undefined&&e(this).data("jGrowl").created!==undefined&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life)<(new Date).getTime()&&!0!==e(this).data("jGrowl").sticky&&(e(this).data("jGrowl.pause")==undefined||!0!==e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||e(this.element).find("div.jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find("div.jGrowl-notification:parent").length<2&&e(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){e(t).data("jGrowl.instance").update()},parseInt(this.defaults.check))},shutdown:function(){e(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){e(this.element).find("div.jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(jQuery);var PAGE_EVENTS=_.extend({},Backbone.Events);!function(){$(document).on("mathjax:ready",function(){PAGE_EVENTS.trigger("mathjax:ready")}),$(document).on("ckeditor:ready",function(){PAGE_EVENTS.trigger("ckeditor:ready")}),$(window).on("resize",function(){PAGE_EVENTS.trigger("window:resize")}),$(window).on("scroll",function(){PAGE_EVENTS.trigger("window:scroll")}),$(window).on("hashchange",function(){PAGE_EVENTS.trigger("window:hashchange")}),$(document).on("dashboard_router:before:navigate",function(){PAGE_STACK.add_page_to_stack(location.href)});var e="click study_aid.update_meta document_title_rerendered application_ready flash:new_active keydown keyup subject_created admin:lock admin:unlock navigation:close_additional_controls google:maps_api_loaded study_aids:pin_success fonts_loaded dashboard_router:before:navigate dashboard_router:after:navigate flash:shuffle_requested media_library:insert media_library:insert_success submit ajax:success ajax:complete ajax:error pjax:end";$(document).on(e,function(e){var t=e.type,n=[].slice.call(arguments);e.namespace&&(t+="."+e.namespace),PAGE_EVENTS.trigger.apply(PAGE_EVENTS,[t].concat(n))})}();var STUDY_AID_ACTIONS_STICKY_TOOLBAR=function(e){var t,n={};e.init=function(e,i){n=e,t=i,$("#examtime_header").outerHeight(),$(".study_aid_actions .sa_btn, .study_aid_actions a").tooltip({placement:"bottom"}),PAGE_EVENTS.on("dashboard_router:before:navigate",STUDY_AID_ACTIONS_STICKY_TOOLBAR.hide)},e.toggle_study_aid=function(){var t=0,i={subject:!0,manage:!0,group:!0,edit:!0,tags:!0,all_pinned:!0};if($.each(n,function(e,n){var a=n.selected_study_aid_ids();if(a.length>0){t+=a.length;var s=n.collection.can_manage_all(a),o=n.collection.any_deleted(a),r=n.collection.all_pinned(a);if(i.subject&&(i.subject=!n.in_group()),i.manage&&(i.manage=!o),i.group){var l=s||CURRENT_USER.is_group_admin||n.collection.can_unshare_all(a);i.group=n.in_group()&&l}i.edit&&(i.edit=s),i.tags&&(i.tags=s),i.all_pinned&&(i.all_pinned=r)}}),e.update_study_aid_actions_info(t),e.hide(),t>0&&$.inArray(!0,i)){e.show(),o(s(),".subject",i.subject),o(s(),".manage",i.manage),o(s(),".group",i.group),o(s(),".edit_study_aid",1===t&&i.edit),o(s(),".suggested_tags",1===t&&i.tags),o(s(),".delete_icon",i.subject&&!i.all_pinned),o(s(),".unpin_icon",i.subject&&i.all_pinned);var a=i.subject&&i.all_pinned?"unpin":"delete";$(".subject.delete").tooltip("dispose").tooltip({title:I18n.t("actionbar."+a)})}},e.hide=function(){s().hide(),$(".study_aid_actions_container").stop().slideUp("fast")},e.show=function(){s().show(),$(".study_aid_actions_container").stop().slideDown("fast")},e.clear=function(){e.update_study_aid_actions_info(0)},e.update_study_aid_actions_info=function(t){$(".study_aid_actions .study_aid_actions_info span").html(I18n.t("actionbar.selected_study_aid",{count:t})),t>0?e.show():e.hide()},e.update_all=function(){var t=a().length;e.update_study_aid_actions_info(t)},e.selected_study_aid_ids_and_topic_ids=function(){var e={},t=[],i=[];return $.each(n,function(t,n){var i=n.selected_study_aid_ids();i.length>0&&(e[n.options.topic_id]=i)}),$.each(e,function(e,n){i.push(parseInt(e)),t=t.concat(n)}),{topic_ids:i,study_aid_ids:t}};var i=function(){$.each(n,function(e,t){t.$el.find(".resource.checkbox-selected").removeClass("checkbox-selected"),t.$el.find("input[type='checkbox'].select_resource").prop("checked",!1)}),e.clear()},a=function(){var e=[];return $.each(n,function(t,n){e=e.concat(n.selected_study_aid_ids())}),e},s=function(){return $(".study_aid_actions")},o=function(e,t,n){n?e.find(t).removeClass("hidden"):e.find(t).addClass("hidden")},r=function(){$.each(n,function(e,t){var n=t.selected_study_aid_ids();if(n.length>0){var i=_.first(n);do_redirect(t.collection.get(i).get("edit_url"))}})},l=function(){var t=e.selected_study_aid_ids_and_topic_ids();t.study_aid_ids.length>0&&t.topic_ids.length>0&&$(document).trigger("study_aids:move_topic",[t.study_aid_ids,t.topic_ids])},c=function(){var t=e.selected_study_aid_ids_and_topic_ids();t.study_aid_ids.length>0&&t.topic_ids.length>0&&$(document).trigger("study_aids:move_subject",{study_aids:t.study_aid_ids,topic_ids:t.topic_ids})},d=function(){var t=e.selected_study_aid_ids_and_topic_ids();t.study_aid_ids.length>0&&t.topic_ids.length>0&&$(document).trigger("study_aids:delete_subject",[t.study_aid_ids,t.topic_ids])},u=function(){var e=a();e.length>0&&$(document).trigger("study_aids:share_friends",[e])},h=function(){var e=a();e.length>0&&$(document).trigger("study_aids:share_groups",[e])},p=function(){var n=e.selected_study_aid_ids_and_topic_ids();void 0!==t&&n.study_aid_ids.length>0&&n.topic_ids.length>0&&$(document).trigger("study_aids:unshare_group",[t,n.topic_ids,n.study_aid_ids])},f=function(){var n=e.selected_study_aid_ids_and_topic_ids();void 0!==t&&n.study_aid_ids.length>0&&n.topic_ids.length>0&&$(document).trigger("study_aids:move_group_topic",[t,n.topic_ids,n.study_aid_ids])},m=function(){$.each(n,function(e,t){var n=t.selected_study_aid_ids();if(n.length>0){var i=_.first(n);$(document).trigger("study_aids:suggested_tags",i)}})};return $(document).on("click",".study_aid_actions .edit_study_aid",r),$(document).on("click",".study_aid_actions .move_topic",l),$(document).on("click",".study_aid_actions .move_subject",c),$(document).on("click",".study_aid_actions .delete",d),$(document).on("click",".study_aid_actions .share_friends",u),$(document).on("click",".study_aid_actions .share_groups",h),$(document).on("click",".study_aid_actions .unshare",p),$(document).on("click",".study_aid_actions .move_group_topic",f),$(document).on("click",".study_aid_actions #unselect_all",i),$(document).on("click",".study_aid_actions .suggested_tags",m),e}(STUDY_AID_ACTIONS_STICKY_TOOLBAR||{});
/*!
 * jQuery Raty - A Star Rating Plugin
 *
 * Licensed under The MIT License
 *
 * @version        2.5.2
 * @author         Washington Botelho
 * @documentation  wbotelhos.com/raty
 *
 */!function(e){var t={init:function(n){return this.each(function(){t.destroy.call(this),this.opt=e.extend(!0,{},e.fn.raty.defaults,n);var i=e(this),a=["number","readOnly","score","scoreName"];t._callback.call(this,a),this.opt.precision&&t._adjustPrecision.call(this),this.opt.number=t._between(this.opt.number,0,this.opt.numberMax),this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.slice(this.opt.path.length-1,this.opt.path.length)&&(this.opt.path+="/"),this.stars=t._createStars.call(this),this.score=t._createScore.call(this),t._apply.call(this,this.opt.score);var s=this.opt.space?4:0,o=this.opt.width||this.opt.number*this.opt.size+this.opt.number*s;this.opt.cancel&&(this.cancel=t._createCancel.call(this),o+=this.opt.size+s),this.opt.readOnly?t._lock.call(this):(i.css("cursor","pointer"),t._binds.call(this)),!1!==this.opt.width&&i.css("width",o),t._target.call(this,this.opt.score),i.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(e){e&&e>0&&(e=t._between(e,0,this.opt.number),this.score.val(e)),t._fill.call(this,e),e&&t._roundStars.call(this,e)},_between:function(e,t,n){return Math.min(Math.max(parseFloat(e),t),n)},_binds:function(){this.cancel&&t._bindCancel.call(this),t._bindClick.call(this),t._bindOut.call(this),t._bindOver.call(this)},_bindCancel:function(){t._bindClickCancel.call(this),t._bindOutCancel.call(this),t._bindOverCancel.call(this)},_bindClick:function(){var t=this,n=e(t);t.stars.on("click.raty",function(e){t.score.val(t.opt.half||t.opt.precision?n.data("score"):this.alt),t.opt.click&&t.opt.click.call(t,parseFloat(t.score.val()),e)})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var n=this;e(this).on("mouseleave.raty",function(e){var i=parseFloat(n.score.val())||undefined;t._apply.call(n,i),t._target.call(n,i,e),n.opt.mouseout&&n.opt.mouseout.call(n,i,e)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(n){e(this).attr("src",t.opt.path+t.opt.cancelOff),t.opt.mouseout&&t.opt.mouseout.call(t,t.score.val()||null,n)})},_bindOverCancel:function(){var n=this;n.cancel.on("mouseover.raty",function(i){e(this).attr("src",n.opt.path+n.opt.cancelOn),n.stars.attr("src",n.opt.path+n.opt.starOff),t._target.call(n,null,i),n.opt.mouseover&&n.opt.mouseover.call(n,null)})},_bindOver:function(){var n=this,i=e(n),a=n.opt.half?"mousemove.raty":"mouseover.raty";n.stars.on(a,function(a){var s=parseInt(this.alt,10);if(n.opt.half){var o=parseFloat((a.pageX-e(this).offset().left)/n.opt.size),r=o>.5?1:.5;s=s-1+r,t._fill.call(n,s),n.opt.precision&&(s=s-r+o),t._roundStars.call(n,s),i.data("score",s)}else t._fill.call(n,s);t._target.call(n,s,a),n.opt.mouseover&&n.opt.mouseover.call(n,s,a)})},_callback:function(e){for(i in e)"function"==typeof this.opt[e[i]]&&(this.opt[e[i]]=this.opt[e[i]].call(this))},_createCancel:function(){var t=e(this),n=this.opt.path+this.opt.cancelOff,i=e("<img />",{src:n,alt:"x",title:this.opt.cancelHint,"class":"raty-cancel"});return"left"==this.opt.cancelPlace?t.prepend("&#160;").prepend(i):t.append("&#160;").append(i),i},_createScore:function(){return e("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var n=e(this),i=1;i<=this.opt.number;i++){var a=t._getHint.call(this,i),s=this.opt.score&&this.opt.score>=i?"starOn":"starOff";s=this.opt.path+this.opt[s],e("<img />",{src:s,alt:i,title:a}).appendTo(this),this.opt.space&&n.append(i<this.opt.number?"&#160;":"")}return n.children("img")},_error:function(t){e(this).html(t),e.error(t)},_fill:function(e){for(var t=this,n=0,i=1;i<=t.stars.length;i++){var a=t.stars.eq(i-1),s=t.opt.single?i==e:i<=e;if(t.opt.iconRange&&t.opt.iconRange.length>n){var o=t.opt.iconRange[n],r=o.on||t.opt.starOn,l=o.off||t.opt.starOff,c=s?r:l;i<=o.range&&a.attr("src",t.opt.path+c),i==o.range&&n++}else{c=s?"starOn":"starOff";a.attr("src",this.opt.path+this.opt[c])}}},_getHint:function(e){var t=this.opt.hints[e-1];return""===t?"":t||e},_lock:function(){var n=parseInt(this.score.val(),10),i=n?t._getHint.call(this,n):this.opt.noRatedMsg;e(this).data("readonly",!0).css("cursor","").attr("title",i),this.score.attr("readonly","readonly"),this.stars.attr("title",i),this.cancel&&this.cancel.hide()},_roundStars:function(e){var t=(e-Math.floor(e)).toFixed(2);if(t>this.opt.round.down){var n="starOn";this.opt.halfShow&&t<this.opt.round.up?n="starHalf":t<this.opt.round.full&&(n="starOff"),this.stars.eq(Math.ceil(e)-1).attr("src",this.opt.path+this.opt[n])}},_target:function(n,i){if(this.opt.target){var a=e(this.opt.target);0===a.length&&t._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&t._error.call(this,'Template "{score}" missing!');var s=i&&"mouseover"==i.type;n===undefined?n=this.opt.targetText:null===n?n=s?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?n=t._getHint.call(this,Math.ceil(n)):this.opt.precision&&(n=parseFloat(n).toFixed(1)),s||this.opt.targetKeep||(n=this.opt.targetText)),n&&(n=this.opt.targetFormat.toString().replace("{score}",n)),a.is(":input")?a.val(n):a.html(n)}},_unlock:function(){e(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var n=0;n<this.opt.number;n++)this.stars.eq(n).attr("title",t._getHint.call(this,n+1));this.cancel&&this.cancel.css("display","")},cancel:function(n){return this.each(function(){!0!==e(this).data("readonly")&&(t[n?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(n){return e(this).each(function(){!0!==e(this).data("readonly")&&(t._apply.call(this,n),this.opt.click||t._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,n,{type:"click"}),t._target.call(this,n))})},destroy:function(){return e(this).each(function(){var t=e(this),n=t.data("raw");n?t.off(".raty").empty().css({cursor:n.style.cursor,width:n.style.width}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var t,n=[];return e(this).each(function(){t=this.score.val(),n.push(t?parseFloat(t):undefined)}),n.length>1?n:n[0]},readOnly:function(n){return this.each(function(){var i=e(this);i.data("readonly")!==n&&(n?(i.off(".raty").children("img").off(".raty"),t._lock.call(this)):(t._binds.call(this),t._unlock.call(this)),i.data("readonly",n))})},reload:function(){return t.set.call(this,{})},score:function(){return arguments.length?t.setScore.apply(this,arguments):t.getScore.call(this)},set:function(t){return this.each(function(){var n=e(this),i=n.data("settings"),a=e.extend({},i,t);n.raty(a)})},setScore:function(n){return e(this).each(function(){!0!==e(this).data("readonly")&&(t._apply.call(this,n),t._target.call(this,n))})}};e.fn.raty=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist!"):t.init.apply(this,arguments)},e.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"/assets/jquery.raty/",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,size:16,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",target:undefined,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:undefined}}(jQuery);var BaseRatingsView=Backbone.View.extend({template:SMT["ratings/user_rating"],xlarge_off_icon:"star-xl-empty.png",xlarge_half_icon:"star-xl-half.png",xlarge_on_icon:"star-xl.png",large_half_icon:"star-half.png",large_off_icon:"star-empty.png",large_on_icon:"star.png",small_half_icon:"star-small-half-trimmed.png",small_off_icon:"star-small-empty-trimmed.png",small_on_icon:"star-small-trimmed.png",constructor:function(e){this.options=e,this.options.hide_total_rating_count?this.hide_total_rating_count=!0:this.hide_total_rating_count=!1,"small"===e.icon_size?(this.icon_size="small",this.half_icon=this.small_half_icon,this.off_icon=this.small_off_icon,this.on_icon=this.small_on_icon):"xlarge"===e.icon_size?(this.icon_size="xlarge",this.half_icon=this.xlarge_half_icon,this.off_icon=this.xlarge_off_icon,this.on_icon=this.xlarge_on_icon):(this.icon_size="large",this.half_icon=this.large_half_icon,this.off_icon=this.large_off_icon,this.on_icon=this.large_on_icon),this.rate_on_click=!("undefined"!=typeof e.rate_on_click&&!e.rate_on_click),Backbone.View.apply(this,arguments)}}),ReadOnlyRatingsView=BaseRatingsView.extend({className:"ratings_wrapper",events:{"click .rating_container":"notify_user_readonly"},initialize:function(e){this.skip_growl=!!e.skip_growl,this.rating_attribute=e.rating_attribute||"average_rating",_.bindAll(this,"render","update_rating_display"),this.model.bind("change",this.render),this.model.bind("reset",this.render),this.render()},notify_user_readonly:function(){this.skip_growl||$.jGrowl(I18n.t("study_aids.ratings.error_author"))},update_rating_display:function(){var e=this.options.hide_average?0:this.model.get(this.rating_attribute)||0,t=5,n=I18n.t("study_aids.ratings.average_display_score",{average:e,max_rating:t,total_ratings:this.model.get("total_ratings")});this.$el.find(".user_rating").raty({readOnly:!0,halfShow:!0,cancel:!1,size:100,hints:[n,n,n,n,n],noRatedMsg:I18n.t("study_aids.ratings.no_ratings"),starOff:this.off_icon,starOn:this.on_icon,starHalf:this.half_icon,precision:!0,score:e})},render:function(){var e=this.model.get("total_ratings"),t=this.hide_total_rating_count;return void 0===e&&(t=!0),this.$el.html(this.template({icon_size:this.icon_size,hide_total_rating_count:t,total_ratings:"("+e+")"})),this.update_rating_display(),this}}),ResourceViewAdditionalOptions=["wide","dismissable","show_view_count","show_pin_count","show_checkbox","show_created_at","hide_tile_controls","hide_state_icon","in_group","is_draggable","num_cols","show_description","hide_ratings","restrict_to_data_capture_only","restrict_to_copyable_only"];!function(){"use strict";function e(e){function t(t,i){var s,l,h=t==window,p=i&&i.message!==undefined?i.message:undefined;if(!(i=e.extend({},e.blockUI.defaults,i||{})).ignoreIfBlocked||!e(t).data("blockUI.isBlocked")){if(i.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,i.overlayCSS||{}),s=e.extend({},e.blockUI.defaults.css,i.css||{}),i.onOverlayClick&&(i.overlayCSS.cursor="pointer"),l=e.extend({},e.blockUI.defaults.themedCSS,i.themedCSS||{}),p=p===undefined?i.message:p,h&&u&&n(window,{fadeOut:0}),p&&"string"!=typeof p&&(p.parentNode||p.jquery)){var f=p.jquery?p[0]:p,m={};e(t).data("blockUI.history",m),m.el=f,m.parent=f.parentNode,m.display=f.style.display,m.position=f.style.position,m.parent&&m.parent.removeChild(f)}e(t).data("blockUI.onUnblock",i.onUnblock);var g,v,b,y,w=i.baseZ;g=d||i.forceIframe?e('<iframe class="blockUI" style="z-index:'+w+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+i.iframeSrc+'"></iframe>'):e('<div class="blockUI" style="display:none"></div>'),v=i.theme?e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+w+++';display:none"></div>'):e('<div class="blockUI blockOverlay" style="z-index:'+w+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),i.theme&&h?(y='<div class="blockUI '+i.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:fixed">',i.title&&(y+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(i.title||"&nbsp;")+"</div>"),y+='<div class="ui-widget-content ui-dialog-content"></div>',y+="</div>"):i.theme?(y='<div class="blockUI '+i.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:absolute">',i.title&&(y+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(i.title||"&nbsp;")+"</div>"),y+='<div class="ui-widget-content ui-dialog-content"></div>',y+="</div>"):y=h?'<div class="blockUI '+i.blockMsgClass+' blockPage" style="z-index:'+(w+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+i.blockMsgClass+' blockElement" style="z-index:'+(w+10)+';display:none;position:absolute"></div>',b=e(y),p&&(i.theme?(b.css(l),b.addClass("ui-widget-content")):b.css(s)),i.theme||v.css(i.overlayCSS),v.css("position",h?"fixed":"absolute"),(d||i.forceIframe)&&g.css("opacity",0);var x=[g,v,b],S=e(h?"body":t);if(e.each(x,function(){this.appendTo(S)}),i.theme&&i.draggable&&e.fn.draggable&&b.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),p&&(i.theme?b.find(".ui-widget-content").append(p):b.append(p),(p.jquery||p.nodeType)&&e(p).show()),(d||i.forceIframe)&&i.showOverlay&&g.show(),i.fadeIn){var T=i.onBlock?i.onBlock:c,M=i.showOverlay&&!p?T:c,C=p?T:c;i.showOverlay&&v._fadeIn(i.fadeIn,M),p&&b._fadeIn(i.fadeIn,C)}else i.showOverlay&&v.show(),p&&b.show(),i.onBlock&&i.onBlock();if(a(1,t,i),h?(u=b[0],_=e(i.focusableElements,u),i.focusInput&&setTimeout(o,20)):r(b[0],i.centerX,i.centerY),i.timeout){var k=setTimeout(function(){h?e.unblockUI(i):e(t).unblock(i)},i.timeout);e(t).data("blockUI.timeout",k)}}}function n(t,n){var s,o,r=t==window,l=e(t),c=l.data("blockUI.history"),d=l.data("blockUI.timeout");d&&(clearTimeout(d),l.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),a(0,t,n),null===n.onUnblock&&(n.onUnblock=l.data("blockUI.onUnblock"),l.removeData("blockUI.onUnblock")),o=r?e("body").children().filter(".blockUI").add("body > .blockUI"):l.find(">.blockUI"),n.cursorReset&&(o.length>1&&(o[1].style.cursor=n.cursorReset),o.length>2&&(o[2].style.cursor=n.cursorReset)),r&&(u=_=null),n.fadeOut?(s=o.length,o.stop().fadeOut(n.fadeOut,function(){0==--s&&i(o,c,n,t)})):i(o,c,n,t)}function i(t,n,i,a){var s=e(a);if(!s.data("blockUI.isBlocked")){t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.parent&&n.parent.appendChild(n.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),"function"==typeof i.onUnblock&&i.onUnblock(a,i);var o=e(document.body),r=o.width(),l=o[0].style.width;o.width(r-1).width(r),o[0].style.width=l}}function a(t,n,i){var a=n==window,o=e(n);if((t||(!a||u)&&(a||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",t),a&&i.bindEvents&&(!t||i.showOverlay))){var r="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(r,i,s):e(document).unbind(r,s)}}function s(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&u&&t.data.constrainTabKey){var n=_,i=!t.shiftKey&&t.target===n[n.length-1],a=t.shiftKey&&t.target===n[0];if(i||a)return setTimeout(function(){o(a)},10),!1}var s=t.data,r=e(t.target);return r.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),r.parents("div."+s.blockMsgClass).length>0||0===r.parents().children().filter("div.blockUI").length}function o(e){if(_){var t=_[!0===e?_.length-1:0];t&&t.focus()}}function r(e,t,n){var i=e.parentNode,a=e.style,s=(i.offsetWidth-e.offsetWidth)/2-l(i,"borderLeftWidth"),o=(i.offsetHeight-e.offsetHeight)/2-l(i,"borderTopWidth");t&&(a.left=s>0?s+"px":"0"),n&&(a.top=o>0?o+"px":"0")}function l(t,n){return parseInt(e.css(t,n),10)||0}e.fn._fadeIn=e.fn.fadeIn;var c=e.noop||function(){},d=/MSIE/.test(navigator.userAgent);/MSIE 6.0/.test(navigator.userAgent)&&/MSIE 8.0/.test(navigator.userAgent),document.documentMode,e.isFunction(document.createElement("div").style.setExpression);e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){n(window,e)},e.growlUI=function(t,n,i,a){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),i===undefined&&(i=3e3);var o=function(t){t=t||{},e.blockUI({message:s,fadeIn:"undefined"!=typeof t.fadeIn?t.fadeIn:700,fadeOut:"undefined"!=typeof t.fadeOut?t.fadeOut:1e3,timeout:"undefined"!=typeof t.timeout?t.timeout:i,centerY:!1,showOverlay:!1,onUnblock:a,css:e.blockUI.defaults.growlCSS})};o();s.css("opacity");s.mouseover(function(){o({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(n){if(this[0]===window)return e.blockUI(n),this;var i=e.extend({},e.blockUI.defaults,n||{});return this.each(function(){var t=e(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,t(this,n)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){n(this,t)})},e.blockUI.version=2.66,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var u=null,_=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}();var SHARING=function(e){var t=1,n={},i={},a=function(){var e=$(this),t=e.closest(".choice_panel").data("mode"),i=e.data("name"),a=e.data("id");e.hasClass("selected")?(n[t].remove_tag(a),e.removeClass("selected")):(n[t].add_tag(a,i),e.addClass("selected"),e.closest(".tab-pane").find("input[type='submit']").removeClass("disabled"))},s=function(e,t){var n=t.get_input_element().closest(".tab-pane");n.find('.add_choice[data-id="'+e+'"]').addClass("selected"),n.find("input[type='submit']").removeClass("disabled"),n.find(".share_message_box:hidden").slideDown()},o=function(e,t){var n=t.get_input_element().closest(".tab-pane");n.find('.add_choice[data-id="'+e+'"]').removeClass("selected"),n.find("input[type='submit']").removeClass("disabled")},r=function(){$("#friend_share").length>0&&(n.friends=new TaggableInput,n.friends.init("#friend_share",{defaultText:I18n.t("study_aids.sharing.friend_name_placeholder"),addTagCallback:s,removeTagCallback:o,typeahead:{url:Routes.friends_typeahead_study_aids_path({dont_block_ui:1,query:"!QUERY",uniq:t}),forceSelection:!0,value:"id",label:"name",dataset_options:{name:"friends_share_"+t,display:"value",templates:{suggestion:function(e){return["<div>",e.img_tag,_.escape(e.display),"</div>"].join("")}}}}})),$("#group_share").length>0&&(n.groups=new TaggableInput,n.groups.init("#group_share",{defaultText:I18n.t("study_aids.sharing.group_name_placeholder"),addTagCallback:s,removeTagCallback:o,typeahead:{url:Routes.groups_typeahead_study_aids_path({dont_block_ui:1,query:"!QUERY",uniq:t}),forceSelection:!0,value:"id",label:"value",dataset_options:{name:"groups_share_"+t,display:"value",templates:{suggestion:function(e){return["<div>",e.img_tag,_.escape(e.value),"</div>"].join("")}}}}})),t+=1},l=function(e){e.preventDefault();var n=$(this),s=n.closest(".choice_panel").data("mode");n.find(".friends_icon").hide(),n.find(".loading_icon").show();var o=n.parents(".modal").find("input[name='study_aids']").val();$.ajax({type:"GET",url:i[s],data:{study_aids:o},success:function(e){var i=n.closest(".modal"),s=n.closest(".choice_panel");s.find(".choice_container").html(e),s.find(".show_choices").hide().tooltip("hide"),s.find(".choice_input_container").addClass("expanded"),_.each(s.find(".tagsinput .tag span"),function(e){var t=$(e).attr("value");s.find('.add_choice[data-id="'+t+'"]').addClass("selected")}),s.find(".add_choice").length>6?(i.addClass("transition").removeClass("small_modal").addClass("medium_modal"),setTimeout(function(){s.find(".choice_container").slideDown("slow"),i.removeClass("transition")},500)):s.find(".choice_container").slideDown("slow"),s.find(".choice_container").data("choice-id",t).on("click","li.add_choice",a)}})};return e.init_friend_and_group_sharing=function(){var e=$("#share_study_aid_popup");0!==e.length&&(i={friends:Routes.share_friend_list_public_path(),groups:Routes.share_group_list_public_path()},r(),_.each(["existing_readers","existing_group_shares"],function(t){var n=e.find('input[name="'+t+'"]'),i=$.parseJSON(n.val()||"null"),a=n.closest(".tab-pane");n.remove(),_.each(a.find(".tagsinput .tag span"),function(e){var t=$.trim($(e).text()),n=i[t];$(e).text(n),$(e).append("&nbsp;&nbsp;")})}),e.on("click","#friendsTab",function(){n.friends&&_.defer(function(){n.friends.focus_input()})}).on("click","#groupsTab",function(){n.groups&&_.defer(function(){n.groups.focus_input()})}).on("click","#friend_share_btn",function(){$(document).trigger("share:friends",[n.friends.current_tags()])}).on("click","#group_share_btn",function(){$(document).trigger("share:groups",[n.groups.current_tags()])}).find(".show_choices").tooltip({placement:"bottom"}).on("click",l))},e.show_only_tabs=function(e){var t=$("#share_study_aid_popup");t.find("#shareTabs li").hide(),e?(_.contains(e,"social")&&t.find("#socialTab").show(),_.contains(e,"friends")&&t.find("#friendsTab").show(),_.contains(e,"groups")&&t.find("#groupsTab").show(),_.contains(e,"email")&&t.find("#emailTab").show()):t.find("#shareTabs li").show();var n=t.find("#shareTabs li:visible:first a");if(n.click(),e&&1===e.length){var i=n.attr("href").split("#")[1],a=I18n.t("study_aids.sharing.titles."+i);t.addClass("single_tab").find("h2.modal-title").text(a)}},e}(SHARING||{}),EmbedMetricsView=Backbone.View.extend({template:SMT["user_performance/note_metrics"],initialize:function(){_.bindAll(this,"render"),this.listenTo(this.model,"change",this.render)},show_loading_spinner:function(){this.$el.parents(".note_study_aid_clippings").find(".loading_spinner").show()},hide_loading_spinner:function(){this.$el.parents(".note_study_aid_clippings").find(".loading_spinner").hide()},close:function(){this.remove()},render:function(){if(this.show_loading_spinner(),this.model.get("study_aid_embeds").length>0){var e=this.model.get("percentage"),t=e||-1,n=t>0?I18n.t("study_aids.user_performance.note.overall_score",{total:t}):I18n.t("study_aids.user_performance.note.no_results");this.$el.html(this.template({title:n})),this.renderStudyAidClippings()}else this.$el.html(this.template({title:I18n.t("study_aids.user_performance.note.no_results")})),this.$el.find(".note_study_aid_clippings_title").addClass("no_embeds");return this.hide_loading_spinner(),this},renderStudyAidClippings:function(){var e=this;_.each(this.model.get("study_aid_embeds"),function(t){e.$(".note_study_aid_clippings_content").append(new StudyAidClippingMetricsView({model:new StudyAidClippingMetrics(t)}).render().el)})}}),StudyAidClippingMetrics=Backbone.Model.extend({}),StudyAidClippingMetricsView=Backbone.View.extend({template:SMT["user_performance/study_aid_clipping_metrics"],render:function(){return this.$el.html($(this.template(this.model.attributes))),this}});"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!=i&&i!=Infinity&&i!=-Infinity&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var a=i>=0?i:Math.max(n-Math.abs(i),0);a<n;a++)if(a in t&&t[a]===e)return a;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};CanvasRenderingContext2D.prototype.fillTextMultiLine=function(e,t,n,i,a){var s=(""+e).split("\n");"middle"==i?n-=(s.length-1)/2*a:"bottom"==i&&(n-=(s.length-1)*a);for(var o=0;o<s.length;o++)this.fillText(s[o],t,n),n+=a},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(e,t){for(var n,i=0,a=(""+e).split("\n"),s=a.length*t,o=0;o<a.length;o++)(n=this.measureText(a[o]).width)>i&&(i=n);return{textWidth:i,textHeight:s}},cursorDivCreated=!1,$(document).ready(resetChartCursorDiv),initChartJsResize=!1;var jsGraphResize=new Array;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array;window.Chart=function(context){function setting_new_chart_vars(e){if(typeof e.ChartNewId==typeof undefined){e.runanimationcompletefunction=!0;var t=(new Date).getTime();e.ChartNewId=e.tpchart+"_"+t,e._eventListeners={}}}function reverseData(e){e.labels=e.labels.reverse();for(var t=0;t<e.datasets.length;t++)for(var n in e.datasets[t])Array.isArray(e.datasets[t][n])&&(e.datasets[t][n]=e.datasets[t][n].reverse());return e}function calculateOffset(e,t,n,i){if(e)return CapValue(log10(t)*i-calculateOrderOfMagnitude(n.graphMin)*i,undefined,0);var a=n.steps*n.stepValue,s=CapValue((t-n.graphMin)/a,1,0);return i*n.steps*s}function animationLoop(e,t,n,i,a,s,o,r,l,c,d,u,_){function h(){var h=e.animation?CapValue(b(y),null,0):1;1*f>=1*CapValue(e.animationSteps,Number.MAX_VALUE,1)||0==e.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?h=1:h>=1&&(h=.9999),!e.animation||isIE()<9&&0!=isIE()||!e.clearRect||i.clearRect(a,s,o,r),dispCrossImage(i,e,l,c,d,u,!1,_,h,f),dispCrossText(i,e,l,c,d,u,!1,_,h,f),e.scaleOverlay?(n(h),t()):(t(),n(h)),dispCrossImage(i,e,l,c,d,u,!0,_,h,f),dispCrossText(i,e,l,c,d,u,!0,_,h,f)}function p(){y+=g*v,(f+=g)==e.animationSteps||0==e.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?y=1:y>=1&&(y=.999),h(),-1==g&&f<=w?("function"==typeof e.onAnimationComplete&&1==i.runanimationcompletefunction&&e.onAnimationComplete(i,e,_,0,m+1),g=1,requestAnimFrame(p)):y<e.animationStopValue?requestAnimFrame(p):!(m<e.animationCount||0==e.animationCount)||1!=i.firstPass&&2==i.firstPass?testRedraw(i,_,e)||"function"==typeof e.onAnimationComplete&&1==i.runanimationcompletefunction&&(e.onAnimationComplete(i,e,_,1,m+1),i.runanimationcompletefunction=!1):(m++,e.animationBackward&&1==g?(y-=v,g=-1):(g=1,f=w-1,y=x-v),window.setTimeout(p,1e3*e.animationPauseTime))}var f=0,m=1,g=1;(e.animationStartValue<0||e.animationStartValue>1)&&(e.animation.StartValue=0),(e.animationStopValue<0||e.animationStopValue>1)&&(e.animation.StopValue=1),e.animationStopValue<e.animationStartValue&&(e.animationStopValue=e.animationStartValue),isIE()<9&&0!=isIE()&&(e.animation=!1);var v=e.animation?1/CapValue(e.animationSteps,Number.MAX_VALUE,1):1,b=animationOptions[e.animationEasing],y=e.animation?0:1;if(e.animation&&e.animationStartValue>0&&e.animationStartValue<=1)for(;y<e.animationStartValue;)f++,y+=v;var w=f,x=y;"function"!=typeof t&&(t=function(){}),e.clearRect?requestAnimFrame(p):p()}function calculateScale(e,t,n,i,a,s,o){var r,l,c,d,u,_,h,p;if(2==e?(h=t.logarithmic2,p=t.yAxisMinimumInterval2):(h=t.logarithmic,p=t.yAxisMinimumInterval),h){var f=calculateOrderOfMagnitude(s),m=calculateOrderOfMagnitude(a)+1;r=Math.pow(10,f),l=Math.pow(10,m),_=m-f}else if(_=calculateOrderOfMagnitude(a-s),r=Math.floor(s/(1*Math.pow(10,_)))*Math.pow(10,_),l=Math.ceil(a/(1*Math.pow(10,_)))*Math.pow(10,_),"number"==typeof p){for(r-=r%p;r>s;)r-=p;for(l%p>1e-7&&l%p<p-1e-7&&(l=roundScale(t,(1+Math.floor(l/p))*p));l<a;)l+=p}if(c=l-r,d=Math.pow(10,_),u=Math.round(c/d),h)u=_;else{for(var g=!1;!g&&(u<i||u>n);)u<i?("number"==typeof p&&d/2<p&&(g=!0),g||(d/=2,u=Math.round(c/d))):(d*=2,u=Math.round(c/d));"number"==typeof p&&(d<p&&(d=p,u=Math.round(c/d)),d%p>1e-7&&d%p<p-1e-7&&(2*d%p<1e-7||2*d%p>p-1e-7?(d*=2,u=Math.round(c/d)):(d=roundScale(t,(1+Math.floor(d/p))*p),u=Math.round(c/d))))}var v=[];return populateLabels(1,t,o,v,u,r,l,d),{steps:u,stepValue:d,graphMin:r,labels:v,maxValue:a}}function calculateScaleOld(e,t,n,i,a,s){var o,r,l,c,d,u;if(e.logarithmic){var _=calculateOrderOfMagnitude(a),h=calculateOrderOfMagnitude(i)+1;o=Math.pow(10,_),r=Math.pow(10,h),u=h-_}else if(u=calculateOrderOfMagnitude(i-a),o=Math.floor(a/(1*Math.pow(10,u)))*Math.pow(10,u),r=Math.ceil(i/(1*Math.pow(10,u)))*Math.pow(10,u),"number"==typeof e.yAxisMinimumInterval){for(o-=o%e.yAxisMinimumInterval;o>a;)o-=e.yAxisMinimumInterval;for(r%e.yAxisMinimumInterval>1e-7&&r%e.yAxisMinimumInterval<e.yAxisMinimumInterval-1e-7&&(r=roundScale(e,(1+Math.floor(r/e.yAxisMinimumInterval))*e.yAxisMinimumInterval));r<i;)r+=e.yAxisMinimumInterval}if(l=r-o,c=Math.pow(10,u),d=Math.round(l/c),e.logarithmic)d=u;else{for(var p=!1;!p&&(d<n||d>t);)d<n?("number"==typeof e.yAxisMinimumInterval&&c/2<e.yAxisMinimumInterval&&(p=!0),p||(c/=2,d=Math.round(l/c))):(c*=2,d=Math.round(l/c));"number"==typeof e.yAxisMinimumInterval&&(c<e.yAxisMinimumInterval&&(c=e.yAxisMinimumInterval,d=Math.round(l/c)),c%e.yAxisMinimumInterval>1e-7&&c%e.yAxisMinimumInterval<e.yAxisMinimumInterval-1e-7&&(2*c%e.yAxisMinimumInterval<1e-7||2*c%e.yAxisMinimumInterval>e.yAxisMinimumInterval-1e-7?(c*=2,d=Math.round(l/c)):(c=roundScale(e,(1+Math.floor(c/e.yAxisMinimumInterval))*e.yAxisMinimumInterval),d=Math.round(l/c))))}var f=[];return populateLabels(1,e,s,f,d,o,r,c),{steps:d,stepValue:c,graphMin:o,labels:f,maxValue:i}}function roundScale(e,t){var n=0,i=""+e.yAxisMinimumInterval;return i.indexOf(".")>0&&(n=i.substr(i.indexOf(".")).length),Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function calculateOrderOfMagnitude(e){return Math.floor(Math.log(e)/Math.LN10)}function populateLabels(e,t,n,i,a,s,o,r){var l;if(2==e?(l=t.logarithmic2,fmtYLabel=t.fmtYLabel2):(l=t.logarithmic,fmtYLabel=t.fmtYLabel),n)if(l){var c=s;for(d=0;d<a+1;d++)i.push(tmpl(n,{value:fmtChartJS(t,1*c.toFixed(getDecimalPlaces(c)),fmtYLabel)})),c*=10}else for(var d=0;d<a+1;d++)i.push(tmpl(n,{value:fmtChartJS(t,1*(s+r*d).toFixed(getDecimalPlaces(r)),fmtYLabel)}))}function Max(e){return Math.max.apply(Math,e)}function Min(e){return Math.min.apply(Math,e)}function Default(e,t){return e||t}function CapValue(e,t,n){return isNumber(t)&&e>t?t:isNumber(n)&&e<n?n:e}function getDecimalPlaces(e){return e%1!=0?e.toString().split(".")[1].length:0}function mergeChartConfig(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}function tmpl(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||tmpl(document.getElementById(e).innerHTML);return t?n(t):n}function dispCrossText(e,t,n,i,a,s,o,r,l,c){var d,u,_,h,p,f;for(d=0;d<t.crossText.length;d++)if(""!=t.crossText[d]&&t.crossTextOverlay[Min([d,t.crossTextOverlay.length-1])]==o&&(1==c&&"first"==t.crossTextIter[Min([d,t.crossTextIter.length-1])]||t.crossTextIter[Min([d,t.crossTextIter.length-1])]==c||"all"==t.crossTextIter[Min([d,t.crossTextIter.length-1])]||1==l&&"last"==t.crossTextIter[Min([d,t.crossTextIter.length-1])])){switch(e.save(),e.beginPath(),e.font=t.crossTextFontStyle[Min([d,t.crossTextFontStyle.length-1])]+" "+t.crossTextFontSize[Min([d,t.crossTextFontSize.length-1])]+"px "+t.crossTextFontFamily[Min([d,t.crossTextFontFamily.length-1])],e.fillStyle=t.crossTextFontColor[Min([d,t.crossTextFontColor.length-1])],p=t.crossTextAlign[Min([d,t.crossTextAlign.length-1])],f=t.crossTextBaseline[Min([d,t.crossTextBaseline.length-1])],_=1*t.crossTextPosX[Min([d,t.crossTextPosX.length-1])],h=1*t.crossTextPosY[Min([d,t.crossTextPosY.length-1])],
1*t.crossTextRelativePosX[Min([d,t.crossTextRelativePosX.length-1])]){case 0:"default"==p&&(p="left");break;case 1:_+=a,"default"==p&&(p="right");break;case 2:_+=n,"default"==p&&(p="center");break;case-2:_+=context.canvas.width/2,"default"==p&&(p="center");break;case 3:_+=_+2*n-a,"default"==p&&(p="left");break;case 4:_+=context.canvas.width,"default"==p&&(p="right");break;default:_+=n,"default"==p&&(p="center")}switch(1*t.crossTextRelativePosY[Min([d,t.crossTextRelativePosY.length-1])]){case 0:"default"==f&&(f="top");break;case 3:h+=s,"default"==f&&(f="top");break;case 2:h+=i,"default"==f&&(f="middle");break;case-2:h+=context.canvas.height/2,"default"==f&&(f="middle");break;case 1:h+=h+2*i-s,"default"==f&&(f="bottom");break;case 4:h+=context.canvas.height,"default"==f&&(f="bottom");break;default:h+=i,"default"==f&&(f="middle")}e.textAlign=p,e.textBaseline=f,e.translate(1*_,1*h),e.rotate(Math.PI*t.crossTextAngle[Min([d,t.crossTextAngle.length-1])]/180),"%"==t.crossText[d].substring(0,1)?"function"==typeof t.crossTextFunction&&(u=t.crossTextFunction(d,t.crossText[d],e,t,n,i,a,s,o,r,l)):u=t.crossText[d],e.fillTextMultiLine(u,0,0,e.textBaseline,t.crossTextFontSize[Min([d,t.crossTextFontSize.length-1])]),e.stroke(),e.restore()}}function dispCrossImage(e,t,n,i,a,s,o,r,l,c){var d,u,_,h,p;for(d=0;d<t.crossImage.length;d++)if("undefined"!=typeof t.crossImage[d]&&t.crossImageOverlay[Min([d,t.crossImageOverlay.length-1])]==o&&(-1==c&&"background"==t.crossImageIter[Min([d,t.crossImageIter.length-1])]||1==c&&"first"==t.crossImageIter[Min([d,t.crossImageIter.length-1])]||t.crossImageIter[Min([d,t.crossImageIter.length-1])]==c||-1!=c&&"all"==t.crossImageIter[Min([d,t.crossImageIter.length-1])]||1==l&&"last"==t.crossImageIter[Min([d,t.crossImageIter.length-1])])){switch(e.save(),e.beginPath(),h=t.crossImageAlign[Min([d,t.crossImageAlign.length-1])],p=t.crossImageBaseline[Min([d,t.crossImageBaseline.length-1])],u=1*t.crossImagePosX[Min([d,t.crossImagePosX.length-1])],_=1*t.crossImagePosY[Min([d,t.crossImagePosY.length-1])],1*t.crossImageRelativePosX[Min([d,t.crossImageRelativePosX.length-1])]){case 0:"default"==h&&(h="left");break;case 1:u+=a,"default"==h&&(h="right");break;case 2:u+=n,"default"==h&&(h="center");break;case-2:u+=context.canvas.width/2,"default"==h&&(h="center");break;case 3:u+=u+2*n-a,"default"==h&&(h="left");break;case 4:u+=context.canvas.width,"default"==h&&(h="right");break;default:u+=n,"default"==h&&(h="center")}switch(1*t.crossImageRelativePosY[Min([d,t.crossImageRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:_+=s,"default"==p&&(p="top");break;case 2:_+=i,"default"==p&&(p="middle");break;case-2:_+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:_+=_+2*i-s,"default"==p&&(p="bottom");break;case 4:_+=context.canvas.height,"default"==p&&(p="bottom");break;default:_+=i,"default"==p&&(p="middle")}var f=t.crossImage[d].width;switch(h){case"left":break;case"right":u-=f;break;case"center":u-=f/2}var m=t.crossImage[d].height;switch(p){case"top":break;case"bottom":_-=m;break;case"middle":_-=m/2}e.translate(1*u,1*_),e.rotate(Math.PI*t.crossImageAngle[Min([d,t.crossImageAngle.length-1])]/180),e.drawImage(t.crossImage[d],0,0),e.restore()}}function setMeasures(e,t,n,i,a,s,o,r,l,c,d,u,_){"none"!=t.canvasBackgroundColor&&(n.canvas.style.background=t.canvasBackgroundColor);var h=0,p=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,x=0,S=0,T=0,M=0,C=0,k=0,E=0,A=0,I=0,D=0,P=0,R=0,$=0,O=0,z=0,N=1,j=1,L=0,B=1,F=0,q=1,H=0,V=0,G=0,U=0,W=0,Y=0;if(n.widthAtSetMeasures=a,n.heightAtSetMeasures=i,t.canvasBorders&&(h=t.canvasBordersWidth),c){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(var X=0;X<e.labels.length;X++){N=(J=n.measureTextMultiLine(fmtChartJS(t,e.labels[X],t.fmtXLabel),t.scaleFontSize)).textWidth>N?J.textWidth:N,j=J.textHeight>j?J.textHeight:j}N<t.xScaleLabelsMinimumWidth&&(N=t.xScaleLabelsMinimumWidth)}if(c){if(L=1,null!=s&&"nihil"!=s){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(X=s.length-1;X>=0;X--){if("string"==typeof s[X])if(""!=s[X].trim())L=(J=n.measureTextMultiLine(fmtChartJS(t,s[X],t.fmtYLabel),t.scaleFontSize)).textWidth>L?J.textWidth:L,B=J.textHeight>B?J.textHeight:B}}if(L<t.yScaleLabelsMinimumWidth&&(L=t.yScaleLabelsMinimumWidth),F=1,null!=o&&t.yAxisRight){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(X=o.length-1;X>=0;X--){var J;if("string"==typeof o[X])if(""!=o[X].trim())F=(J=n.measureTextMultiLine(fmtChartJS(t,o[X],t.fmtYLabel2),t.scaleFontSize)).textWidth>F?J.textWidth:F,q=J.textHeight>q?J.textHeight:q}}else F=L;F<t.yScaleLabelsMinimumWidth&&(F=t.yScaleLabelsMinimumWidth)}if(H=h+t.spaceLeft,V=h+t.spaceRight,c&&("undefined"!=typeof t.yAxisLabel&&""!=t.yAxisLabel.trim()&&(P=t.yAxisFontSize+t.yAxisLabelSpaceLeft+t.yAxisLabelSpaceRight,R=h+t.spaceLeft+t.yAxisLabelSpaceLeft+t.yAxisFontSize,$=a-h-t.spaceRight-t.yAxisLabelSpaceLeft-t.yAxisFontSize),t.yAxisLeft&&(H=0==l?h+t.spaceLeft+P+L+t.yAxisSpaceLeft+t.yAxisSpaceRight:h+t.spaceLeft+P+N+t.yAxisSpaceLeft+t.yAxisSpaceRight),t.yAxisRight&&(V=0==l?h+t.spaceRight+P+F+t.yAxisSpaceLeft+t.yAxisSpaceRight:h+t.spaceRight+P+N+t.yAxisSpaceLeft+t.yAxisSpaceRight)),availableWidth=a-H-V,""!=t.graphTitle.trim()&&(f=t.graphTitleFontSize+t.graphTitleSpaceBefore+t.graphTitleSpaceAfter,m=h+t.spaceTop+f-t.graphTitleSpaceAfter),""!=t.graphSubTitle.trim()&&(g=t.graphSubTitleFontSize+t.graphSubTitleSpaceBefore+t.graphSubTitleSpaceAfter,v=h+t.spaceTop+f+g-t.graphSubTitleSpaceAfter),c&&""!=t.yAxisUnit.trim()&&(w=t.yAxisUnitFontSize+t.yAxisUnitSpaceBefore+t.yAxisUnitSpaceAfter,x=h+t.spaceTop+f+g+w-t.yAxisUnitSpaceAfter),topNotUsableSize=h+t.spaceTop+f+g+w+t.graphSpaceBefore,"undefined"!=typeof t.footNote&&""!=t.footNote.trim()&&(b=t.footNoteFontSize+t.footNoteSpaceBefore+t.footNoteSpaceAfter,y=i-t.spaceBottom-h-t.footNoteSpaceAfter),c&&"undefined"!=typeof t.xAxisLabel&&""!=t.xAxisLabel.trim()&&(O=t.xAxisFontSize+t.xAxisLabelSpaceBefore+t.xAxisLabelSpaceAfter,p=i-h-t.spaceBottom-b-t.xAxisLabelSpaceAfter),bottomNotUsableHeightWithoutXLabels=h+t.spaceBottom+b+O+t.graphSpaceAfter,"undefined"!=typeof t.legend&&1==t.legend){if(n.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily,d)for(X=e.datasets.length-1;X>=0;X--){if("string"==typeof e.datasets[X].title)if(""!=e.datasets[X].title.trim())T++,S=(Q=n.measureText(fmtChartJS(t,e.datasets[X].title,t.fmtLegend)).width)>S?Q:S}else for(X=e.length-1;X>=0;X--){var Q;if("string"==typeof e[X].title)if(""!=e[X].title.trim())T++,S=(Q=n.measureText(fmtChartJS(t,e[X].title,t.fmtLegend)).width)>S?Q:S}if(T>1||1==T&&t.showSingleLegend){S+=t.legendBlockSize+t.legendSpaceBetweenBoxAndText,1==t.legendPosY||2==t.legendPosY||3==t.legendPosY?availableLegendWidth=availableWidth-t.legendSpaceLeftText-t.legendSpaceRightText:availableLegendWidth=a-t.spaceLeft-t.spaceRight-2*h-t.legendSpaceLeftText-t.legendSpaceRightText,1==t.legendBorders&&(availableLegendWidth-=2*t.legendBordersWidth-t.legendBordersSpaceLeft-t.legendBordersSpaceRight),maxLegendOnLine=Min([Math.floor((availableLegendWidth+t.legendSpaceBetweenTextHorizontal)/(S+t.legendSpaceBetweenTextHorizontal)),t.maxLegendCols]),M=Math.ceil(T/maxLegendOnLine),C=Math.ceil(T/M);var K=M*(t.legendFontSize+t.legendSpaceBetweenTextVertical)-t.legendSpaceBetweenTextVertical+t.legendSpaceBeforeText+t.legendSpaceAfterText;switch(t.legendBorders,t.legendPosY){case 0:E=t.spaceLeft+(a-t.spaceLeft-t.spaceRight-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2,k=K,1==t.legendBorders?(A=(D=topNotUsableSize+t.legendBordersSpaceBefore+t.legendBordersWidth/2)+t.legendBordersWidth/2+t.legendSpaceBeforeText+t.legendFontSize,k+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter,I=Math.floor(E-t.legendSpaceLeftText-t.legendBordersWidth/2),Y=Math.ceil(k-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter,W=Math.ceil(C*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText):A=topNotUsableSize+t.legendBordersSpaceBefore+t.legendBordersWidth/2,w>0&&(x+=k,1==t.legendBorders&&(D-=w),A-=w),topNotUsableSize+=k;break;case 1:k=K,E=t.spaceLeft+(a-t.spaceLeft-t.spaceRight-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2,A=topNotUsableSize+t.legendSpaceBeforeText+t.legendFontSize,1==t.legendBorders&&(D=(A+=t.legendBordersSpaceBefore+t.legendBordersWidth)-t.legendSpaceBeforeText-t.legendFontSize-t.legendBordersWidth/2,k+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter,I=Math.floor(E-t.legendSpaceLeftText-t.legendBordersWidth/2),Y=Math.ceil(k-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter,W=Math.ceil(C*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText);break;case 2:k=K,E=t.spaceLeft+(a-t.spaceLeft-t.spaceRight-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2,A=topNotUsableSize+(i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels-k)/2+t.legendSpaceBeforeText+t.legendFontSize,1==t.legendBorders&&(D=(A+=t.legendBordersSpaceBefore-t.legendBordersSpaceAfter)-t.legendSpaceBeforeText-t.legendFontSize-t.legendBordersWidth/2,k+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter,I=Math.floor(E-t.legendSpaceLeftText-t.legendBordersWidth/2),Y=Math.ceil(k-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter,W=Math.ceil(C*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText);break;case 3:k=K,E=t.spaceLeft+(a-t.spaceLeft-t.spaceRight-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2,availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels,A=topNotUsableSize+availableHeight-k+t.legendSpaceBeforeText+t.legendFontSize,1==t.legendBorders&&(D=(A-=t.legendBordersSpaceAfter+t.legendBordersWidth)-t.legendSpaceBeforeText-t.legendFontSize-t.legendBordersWidth/2,k+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter,I=Math.floor(E-t.legendSpaceLeftText-t.legendBordersWidth/2),Y=Math.ceil(k-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter,W=Math.ceil(C*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText);break;default:k=K,A=i-h-t.spaceBottom-b-k+t.legendSpaceBeforeText+t.legendFontSize,E=t.spaceLeft+(a-t.spaceLeft-t.spaceRight-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2,1==t.legendBorders&&(k+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter,A-=t.legendBordersWidth+t.legendBordersSpaceAfter,D=Math.floor(i-h-t.spaceBottom-b-k+t.legendBordersWidth/2+t.legendBordersSpaceBefore),I=Math.floor(E-t.legendSpaceLeftText-t.legendBordersWidth/2),Y=Math.ceil(k-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter,W=Math.ceil(C*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText),p-=k,bottomNotUsableHeightWithoutXLabels+=k}var Z=t.legendSpaceRightText+C*(S+t.legendSpaceBetweenTextHorizontal)-t.legendSpaceBetweenTextHorizontal+t.legendSpaceLeftText;switch(1==t.legendBorders&&(Z+=2*t.legendBordersWidth+t.legendBordersSpaceLeft+t.legendBordersSpaceRight),t.legendPosX){case 0:E=t.spaceLeft+t.canvasBorders*t.canvasBordersWidth+t.legendSpaceLeftText,1==t.legendBorders&&(E+=t.legendBordersWidth+t.legendBordersSpaceLeft,I=t.spaceLeft+t.canvasBorders*t.canvasBordersWidth+t.legendBordersSpaceLeft),t.legendPosY>=1&&t.legendPosY<=3&&(H+=Z,R+=Z);break;case 1:E=H+t.legendSpaceLeftText,1==t.legendBorders&&(I=E,E+=t.legendBordersWidth+t.legendBordersSpaceLeft);break;case 2:E=H+(a-V-H)/2-(t.legendSpaceLeftText-t.legendSpaceRightText)-(C*(S+t.legendSpaceBetweenTextHorizontal)-t.legendSpaceBetweenTextHorizontal)/2,1==t.legendBorders&&(I=(E-=t.legendBordersWidth+t.legendBordersSpaceRight)-t.legendBordersWidth/2-t.legendSpaceLeftText);break;case 3:E=a-V-t.legendSpaceRightText-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal/2,1==t.legendBorders&&(I=(E-=t.legendBordersWidth+t.legendBordersSpaceRight)-t.legendBordersWidth/2-t.legendSpaceLeftText);break;case 4:E=a-t.spaceRight-t.canvasBorders*t.canvasBordersWidth-t.legendSpaceRightText-C*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal/2,1==t.legendBorders&&(I=(E-=t.legendBordersWidth+t.legendBordersSpaceRight)-t.legendBordersSpaceLeft-t.legendBordersWidth/2),t.legendPosY>=1&&t.legendPosY<=3&&(V+=Z,$-=Z)}1==t.legendBorders&&(D+=t.legendYPadding,I+=t.legendXPadding),A+=t.legendYPadding,E+=t.legendXPadding}}if(xLabelWidth=0,bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels,c&&(t.xAxisBottom||t.xAxisTop)){if(0==l){var ee=N,te=j;nblab=e.labels.length}else{ee=L,te=B;nblab=s.length}"smart"==t.rotateLabels?(G=0,(availableWidth+t.xAxisSpaceBetweenLabels)/nblab<ee+t.xAxisSpaceBetweenLabels&&(G=45,availableWidth/nblab<Math.abs(Math.cos(G*Math.PI/180)*ee)&&(G=90))):((G=t.rotateLabels)<0&&(G=0),G>180&&(G=180)),G>90&&(G+=180),z=Math.abs(Math.sin(G*Math.PI/180)*ee)+Math.abs(Math.sin((G+90)*Math.PI/180)*te)+t.xAxisSpaceBefore+t.xAxisSpaceAfter,U=i-h-t.spaceBottom-b-O-(z-t.xAxisSpaceBefore)-t.graphSpaceAfter,xLabelWidth=Math.abs(Math.cos(G*Math.PI/180)*ee)+Math.abs(Math.cos((G+90)*Math.PI/180)*te),H=Max([H,h+t.spaceLeft+xLabelWidth/2]),V=Max([V,h+t.spaceRight+xLabelWidth/2]),availableWidth=a-H-V,t.legend&&t.xAxisBottom&&4==t.legendPosY&&(U-=k),bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+z}else availableWidth=a-H-V;if(availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithXLabels,dispCrossImage(n,t,a/2,i/2,a/2,i/2,!1,e,-1,-1),"nihil"!=s){if(h>0&&(n.save(),n.beginPath(),n.lineWidth=2*h,n.strokeStyle=t.canvasBordersColor,n.moveTo(0,0),n.lineTo(0,i),n.lineTo(a,i),n.lineTo(a,0),n.lineTo(0,0),n.stroke(),n.restore()),f>0&&(n.save(),n.beginPath(),n.font=t.graphTitleFontStyle+" "+t.graphTitleFontSize+"px "+t.graphTitleFontFamily,n.fillStyle=t.graphTitleFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(t.spaceLeft+(a-t.spaceLeft-t.spaceRight)/2,m),n.fillText(t.graphTitle,0,0),n.stroke(),n.restore()),g>0&&(n.save(),n.beginPath(),n.font=t.graphSubTitleFontStyle+" "+t.graphSubTitleFontSize+"px "+t.graphSubTitleFontFamily,n.fillStyle=t.graphSubTitleFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(t.spaceLeft+(a-t.spaceLeft-t.spaceRight)/2,v),n.fillText(t.graphSubTitle,0,0),n.stroke(),n.restore()),w>0&&(t.yAxisLeft&&(n.save(),n.beginPath(),n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily,n.fillStyle=t.yAxisUnitFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(H,x),n.fillText(t.yAxisUnit,0,0),n.stroke(),n.restore()),t.yAxisRight&&(""==t.yAxisUnit2&&(t.yAxisUnit2=t.yAxisUnit),n.save(),n.beginPath(),n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily,n.fillStyle=t.yAxisUnitFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(a-V,x),n.fillText(t.yAxisUnit2,0,0),n.stroke(),n.restore())),P>0&&(t.yAxisLeft&&(n.save(),n.beginPath(),n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily,n.fillStyle=t.yAxisFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(R,topNotUsableSize+availableHeight/2),n.rotate(-Math.PI/180*90),n.fillText(t.yAxisLabel,0,0),n.stroke(),n.restore()),t.yAxisRight&&(""==t.yAxisLabel2&&(t.yAxisLabel2=t.yAxisLabel),n.save(),n.beginPath(),n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily,n.fillStyle=t.yAxisFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate($,topNotUsableSize+availableHeight/2),n.rotate(+Math.PI/180*90),n.fillText(t.yAxisLabel2,0,0),n.stroke(),n.restore())),O>0&&t.xAxisBottom&&(n.save(),n.beginPath(),n.font=t.xAxisFontStyle+" "+t.xAxisFontSize+"px "+t.xAxisFontFamily,n.fillStyle=t.xAxisFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(H+availableWidth/2,p),n.fillText(t.xAxisLabel,0,0),n.stroke(),n.restore()),T>1||1==T&&t.showSingleLegend){var ne={dispLegend:!0,xLegendBorderPos:I,yLegendBorderPos:D,legendBorderWidth:W,legendBorderHeight:Y,nbLegendCols:C,xFirstLegendTextPos:E,yFirstLegendTextPos:A,drawLegendOnData:d,reverseLegend:r,legendBox:u,widestLegend:S};if(0==t.legendPosY||4==t.legendPosY||0==t.legendPosX||4==t.legendPosX){drawLegend(ne,e,t,n,_);ne={dispLegend:!1}}}else ne={dispLegend:!1};""!=t.footNote.trim()&&(n.save(),n.font=t.footNoteFontStyle+" "+t.footNoteFontSize+"px "+t.footNoteFontFamily,n.fillStyle=t.footNoteFontColor,n.textAlign="center",n.textBaseline="bottom",n.translate(H+availableWidth/2,y),n.fillText(t.footNote,0,0),n.stroke(),n.restore())}return clrx=H,clrwidth=availableWidth,clry=topNotUsableSize,clrheight=availableHeight,{leftNotUsableSize:H,rightNotUsableSize:V,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:N,highestXLabel:j,widestYLabel:L,widestYLabel2:F,highestYLabel:B,rotateLabels:G,xLabelPos:U,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:ne}}function drawLinesDataset(e,n,i,a,s,o,r){function l(e,t){return d-f-v.mainVal*(calculateOffset(g,i.datasets[e].data[t],m,p)-f)}function c(e,t,n){if("object"==typeof n.datasets[e].xPos&&"undefined"!=typeof n.datasets[e].xPos[Math.floor(t+1e-4)]){var i=_*h,a="undefined"!=typeof n.xBegin?n.xBegin:1*n.labels[0],s="undefined"!=typeof n.xEnd?n.xEnd:1*n.labels[n.labels.length-1];if(s<=a&&(s=a+100),1*n.datasets[e].xPos[Math.floor(t+1e-4)]>=a&&n.datasets[e].xPos[Math.floor(t+1e-4)]<=s){var o=u+i*((1*n.datasets[e].xPos[Math.floor(t+1e-4)]-a)/(s-a)),r=o;if(Math.abs(t-Math.floor(t+1e-4))>1e-4)Math.floor(t+1e-4),r=c(e,Math.ceil(t-1e-4),n);return o+(t-Math.floor(t+1e-4))*(r-o)}}return u+_*t}for(var d=r.xAxisPosY,u=r.yAxisPosX,_=r.valueHop,h=r.nbValueHop,p=r.scaleHop,f=r.zeroY,m=r.calculatedScale,g=r.logarithmic,v=animationCorrection(n,i,a,0,0,0),b=new Array,y=new Array,w=new Array,x=new Array,S=0;S<i.datasets.length;S++)if(w[S]=-999999999,x[S]=999999999,2==e&&2==i.datasets[S].axis||2!=e&&2!=i.datasets[S].axis)for(var T=0;T<i.datasets[S].data.length;T++)b[T]=0,y[T]=-999999999;v.mainVal=1;for(S=0;S<i.datasets.length;S++)if(2==e&&2==i.datasets[S].axis||2!=e&&2!=i.datasets[S].axis)for(T=0;T<i.datasets[S].data.length;T++)b[T]+=i.datasets[S].data[T],y[T]=Max([y[T],i.datasets[S].data[T]]),w[S]=Max([w[S],l(S,T)]),x[S]=Min([x[S],l(S,T)]);for(S=0;S<i.datasets.length;S++)if(2==e&&2==i.datasets[S].axis||2!=e&&2!=i.datasets[S].axis){var M,C,k=-1,E=-1;"function"==typeof i.datasets[S].strokeColor?s.strokeStyle=i.datasets[S].strokeColor("STROKECOLOR",i,a,S,-1,n,-1,"Line",s,u,w[S],u+_*(i.datasets[S].data.length-1),w[S]-(a.animationLeftToRight?1:1*v.mainVal)*(w[S]-x[S])):"string"==typeof i.datasets[S].strokeColor?s.strokeStyle=i.datasets[S].strokeColor:s.strokeStyle=a.defaultStrokeColor,s.lineWidth=a.datasetStrokeWidth,s.beginPath(),M=0,prevnotempty=0;for(T=0;T<i.datasets[S].data.length;T++){var A=c(S,T,i);if(0==(v=animationCorrection(n,i,a,S,T,0)).mainVal&&M>0&&(s.stroke(),s.strokeStyle="rgba(0,0,0,0)",s.lineTo(C,d-f)),M=v.mainVal,v.mainVal>=1&&("string"==typeof i.datasets[S].title?lgtxt=i.datasets[S].title.trim():lgtxt=""),"undefined"!=typeof i.datasets[S].data[T]){if(C=c(S,T,i),-1==k?(s.moveTo(A,l(S,T)),E=T):a.bezierCurve?s.bezierCurveTo(c(S,T-(T-k)/2,i),l(S,k),c(S,T-(T-k)/2,i),l(S,T),c(S,T,i),l(S,T)):s.lineTo(c(S,T,i),l(S,T)),"undefined"!=typeof i.datasets[S].data[T+1]||1==a.extrapolateMissingData){if(v.subVal>0){for(nxtnotmiss=-1,t=T+1;t<i.datasets[S].data.length&&-1==nxtnotmiss;t++)"undefined"!=typeof i.datasets[S].data[t]&&(nxtnotmiss=t);-1!=nxtnotmiss&&(C=c(S,T+v.subVal,i),a.bezierCurve?s.bezierCurveTo(c(S,T+v.subVal/2,i),l(S,T),c(S,T+v.subVal/2,i),l(S,nxtnotmiss),c(S,T+v.subVal,i),l(S,nxtnotmiss)):s.lineTo(c(S,T+v.subVal,i),l(S,T+1)))}if(k=T,n>=1&&(divprev=0==S?i.datasets[S].data[T]:i.datasets[S].data[T]-i.datasets[S-1].data[T],S==i.datasets.length-1?divnext=i.datasets[S].data[T]:divnext=i.datasets[S].data[T]-i.datasets[S+1].data[T],lgtxt2="","undefined"!=typeof i.datasets[S].xPos&&"undefined"!=typeof i.datasets[S].xPos[T]&&(lgtxt2=i.datasets[S].xPos[T]),""==lgtxt2&&"undefined"!=typeof i.labels[T]&&(lgtxt2=i.labels[T]),"string"==typeof lgtxt2&&(lgtxt2=lgtxt2.trim()),jsGraphAnnotate[s.ChartNewId][jsGraphAnnotate[s.ChartNewId].length]=["POINT",c(S,T,i),l(S,T),lgtxt,lgtxt2,1*i.datasets[S].data[T],divprev,divnext,y[T],b[T],S,T],a.inGraphDataShow)){s.save(),s.textAlign=a.inGraphDataAlign,s.textBaseline=a.inGraphDataVAlign,s.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,s.fillStyle=a.inGraphDataFontColor;v.mainVal,calculateOffset(g,i.datasets[S].data[T],m,p);var I=a.inGraphDataPaddingX,D=a.inGraphDataPaddingY,P=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,lgtxt2,a.fmtV2),v3:fmtChartJS(a,1*i.datasets[S].data[T],a.fmtV3),v4:fmtChartJS(a,divprev,a.fmtV4),v5:fmtChartJS(a,divnext,a.fmtV5),v6:fmtChartJS(a,y[T],a.fmtV6),v7:fmtChartJS(a,b[T],a.fmtV7),v8:roundToWithThousands(a,fmtChartJS(a,100*i.datasets[S].data[T]/b[T],a.fmtV8),a.roundPct),v9:fmtChartJS(a,u+_*R,a.fmtV9),v10:fmtChartJS(a,d-calculateOffset(g,i.datasets[S].data[T],m,p),a.fmtV10),v11:fmtChartJS(a,S,a.fmtV11),v12:fmtChartJS(a,T,a.fmtV12),data:i});s.translate(c(S,T,i)+I,l(S,T)-D),s.rotate(a.inGraphDataRotate*(Math.PI/180)),s.fillTextMultiLine(P,0,0,s.textBaseline,a.inGraphDataFontSize),s.restore()}}}else if(0==a.extrapolateMissingData)s.stroke(),a.datasetFill&&(s.lineTo(C,d-f),s.lineTo(c(S,E,i),d-f),s.lineTo(c(S,E,i),l(S,E)),s.closePath(),"function"==typeof i.datasets[S].fillColor?s.fillStyle=i.datasets[S].fillColor("FILLCOLOR",i,a,S,-1,v.mainVal,-1,"Line",s,u,w[S],u+_*(i.datasets[S].data.length-1),w[S]-(a.animationLeftToRight?1:1*v.mainVal)*(w[S]-x[S])):"string"==typeof i.datasets[S].fillColor?s.fillStyle=i.datasets[S].fillColor:s.fillStyle=a.defaultFillColor,s.fill()),s.beginPath(),k=-1,E=-1,M=0,prevnotempty=0;else if(v.subVal>0){for(nxtnotmiss=-1,t=T+1;t<i.datasets[S].data.length&&-1==nxtnotmiss;t++)"undefined"!=typeof i.datasets[S].data[t]&&(nxtnotmiss=t);"undefined"==typeof i.datasets[S].data[T]&&1!=a.extrapolateMissingData||-1!=nxtnotmiss&&(C=c(S,T+v.subVal,i),a.bezierCurve?s.bezierCurveTo(c(S,k+(T+v.subVal-k)/2,i),l(S,k),c(S,k+(T+v.subVal-k)/2,i),l(S,nxtnotmiss),c(S,T+v.subVal,i),l(S,nxtnotmiss)):s.lineTo(c(S,T+v.subVal,i),l(S,T+1)))}}if(s.stroke(),a.datasetFill?(s.lineTo(C,d-f),s.lineTo(c(S,E,i),d-f),s.lineTo(c(S,E,i),l(S,E)),s.closePath(),"function"==typeof i.datasets[S].fillColor?s.fillStyle=i.datasets[S].fillColor("FILLCOLOR",i,a,S,-1,v.mainVal,-1,"Line",s,u,w[S],u+_*(i.datasets[S].data.length-1),w[S]-(a.animationLeftToRight?1:1*v.mainVal)*(w[S]-x[S])):"string"==typeof i.datasets[S].fillColor?s.fillStyle=i.datasets[S].fillColor:s.fillStyle=a.defaultFillColor,s.fill()):s.closePath(),a.pointDot){"function"==typeof i.datasets[S].pointColor?s.fillStyle=i.datasets[S].pointColor("POINTCOLOR",i,a,S,-1,n,-1,"Line",s,u,w[S],u+_*(i.datasets[S].data.length-1),w[S]-(a.animationLeftToRight?1:1*v.mainVal)*(w[S]-x[S])):s.fillStyle=i.datasets[S].pointColor,"function"==typeof i.datasets[S].pointStrokeColor?s.strokeStyle=i.datasets[S].pointStrokeColor("POINTSTROKECOLOR",i,a,S,-1,n,-1,"Line",s,u,w[S],u+_*(i.datasets[S].data.length-1),w[S]-(a.animationLeftToRight?1:1*v.mainVal)*(w[S]-x[S])):s.strokeStyle=i.datasets[S].pointStrokeColor,s.lineWidth=a.pointDotStrokeWidth;for(var R=0;R<i.datasets[S].data.length;R++){if("undefined"!=typeof i.datasets[S].data[R])((v=animationCorrection(n,i,a,S,R,0)).mainVal>0||!a.animationLeftToRight)&&(s.beginPath(),s.arc(c(S,R,i),l(S,R),a.pointDotRadius,0,2*Math.PI,!0),s.fill(),s.stroke())}}}}function log10(e){return Math.log(e)/Math.LN10}function setRect(e,t){t.clearRect?t.multiGraph||(clear(e),e.clearRect(0,0,width,height)):(clear(e),e.clearRect(0,0,width,height),e.fillStyle=t.savePngBackgroundColor,e.strokeStyle=t.savePngBackgroundColor,e.beginPath(),e.moveTo(0,0),e.lineTo(0,e.canvas.height),e.lineTo(e.canvas.width,e.canvas.height),e.lineTo(e.canvas.width,0),e.lineTo(0,0),e.stroke(),e.fill())}function defMouse(e,t,n){function i(i,a,s){function o(i){(null==s||s(i))&&doMouseAction(n,e,i,t,"mouseaction",a)}if("function"==typeof a){var r=i+" "+a.name;r in e._eventListeners&&(e.canvas.removeEventListener?e.canvas.removeEventListener(i,e._eventListeners[r]):e.canvas.detachEvent&&e.canvas.detachEvent(i,e._eventListeners[r])),e._eventListeners[r]=o,e.canvas.addEventListener?("mousewheel"==i&&(i="DOMMouseScroll"),e.canvas.addEventListener(i,o,!1)):e.canvas.attachEvent&&e.canvas.attachEvent("on"+i,o)}}1==n.annotateDisplay&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),isIE()<9&&0!=isIE()?e.canvas.attachEvent("on"+n.annotateFunction.split(" ")[0],function(i){("left"==n.annotateFunction.split(" ")[1]&&1==i.which||"middle"==n.annotateFunction.split(" ")[1]&&2==i.which||"right"==n.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof n.annotateFunction.split(" ")[1])&&doMouseAction(n,e,i,t,"annotate",n.mouseDownRight)}):e.canvas.addEventListener(n.annotateFunction.split(" ")[0],function(i){("left"==n.annotateFunction.split(" ")[1]&&1==i.which||"middle"==n.annotateFunction.split(" ")[1]&&2==i.which||"right"==n.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof n.annotateFunction.split(" ")[1])&&doMouseAction(n,e,i,t,"annotate",n.mouseDownRight)},!1)),n.savePng&&(isIE()<9&&0!=isIE()?e.canvas.attachEvent("on"+n.savePngFunction.split(" ")[0],function(i){("left"==n.savePngFunction.split(" ")[1]&&1==i.which||"middle"==n.savePngFunction.split(" ")[1]&&2==i.which||"right"==n.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof n.savePngFunction.split(" ")[1])&&saveCanvas(e,t,n)}):e.canvas.addEventListener(n.savePngFunction.split(" ")[0],function(i){("left"==n.savePngFunction.split(" ")[1]&&1==i.which||"middle"==n.savePngFunction.split(" ")[1]&&2==i.which||"right"==n.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof n.savePngFunction.split(" ")[1])&&saveCanvas(e,t,n)},!1)),isIE()<9&&0!=isIE()?e.canvas.attachEvent("onmousewheel",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")}):e.canvas.addEventListener("DOMMouseScroll",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")},!1),i("mousedown",n.mouseDownLeft,function(e){return 1==e.which}),i("mousedown",n.mouseDownMiddle,function(e){return 2==e.which}),i("mousedown",n.mouseDownRight,function(e){return 3==e.which}),i("mousemove",n.mouseMove),i("mouseout",n.mouseOut),i("mousewheel",n.mouseWheel)}var chart=this,animationOptions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1==e?1:1*(1-Math.pow(2,-10*e/1))},easeInOutExpo:function(e){return 0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;if(0==e)return 0;if(1==(e/=1))return 1;if(n||(n=.3),i<Math.abs(1)){i=1;t=n/4}else t=n/(2*Math.PI)*Math.asin(1/i);return-i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)},easeOutElastic:function(e){var t=1.70158,n=0,i=1;if(0==e)return 0;if(1==(e/=1))return 1;if(n||(n=.3),i<Math.abs(1)){i=1;t=n/4}else t=n/(2*Math.PI)*Math.asin(1/i);return i*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;if(0==e)return 0;if(2==(e/=.5))return 1;if(n||(n=.3*1.5*1),i<Math.abs(1)){i=1;t=n/4}else t=n/(2*Math.PI)*Math.asin(1/i);return e<1?i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-animationOptions.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e*1:e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*animationOptions.easeInBounce(2*e):.5*animationOptions.easeOutBounce(2*e-1)+.5}},width=context.canvas.width,height=context.canvas.height;window.devicePixelRatio>1&&is_touch_device()&&(context.canvas.style.width=width+"px",context.canvas.style.height=height+"px",context.canvas.height=height*window.devicePixelRatio,context.canvas.width=width*window.devicePixelRatio,context.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(e,t){chart.PolarArea.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90},chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var n=t?mergeChartConfig(chart.PolarArea.defaults,t):chart.PolarArea.defaults;return new PolarArea(e,n,context)},this.Radar=function(e,t){chart.Radar.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,
pointDotRadius:3,pointDotStrokeWidth:1,datasetFill:!0,datasetStrokeWidth:2,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",startAngle:90,graphMaximized:!1},chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var n=t?mergeChartConfig(chart.Radar.defaults,t):chart.Radar.defaults;return new Radar(e,n,context)},this.Pie=function(e,t){chart.Pie.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var n=t?mergeChartConfig(chart.Pie.defaults,t):chart.Pie.defaults;return new Pie(e,n,context)},this.Doughnut=function(e,t){chart.Doughnut.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var n=t?mergeChartConfig(chart.Doughnut.defaults,t):chart.Doughnut.defaults;return new Doughnut(e,n,context)},this.Line=function(e,t){chart.Line.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>"},chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var n=t?mergeChartConfig(chart.Line.defaults,t):chart.Line.defaults;return new Line(e,n,context)},this.StackedBar=function(e,t){chart.StackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var n=t?mergeChartConfig(chart.StackedBar.defaults,t):chart.StackedBar.defaults;return new StackedBar(e,n,context)},this.HorizontalStackedBar=function(e,t){chart.HorizontalStackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var n=t?mergeChartConfig(chart.HorizontalStackedBar.defaults,t):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(e,n,context)},this.Bar=function(e,t){chart.Bar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var n=t?mergeChartConfig(chart.Bar.defaults,t):chart.Bar.defaults;return new Bar(e,n,context)},this.HorizontalBar=function(e,t){chart.HorizontalBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var n=t?mergeChartConfig(chart.HorizontalBar.defaults,t):chart.HorizontalBar.defaults;return new HorizontalBar(e,n,context)},chart.defaults={},chart.defaults.commonOptions={multiGraph:!1,clearRect:!0,dynamicDisplay:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersColor:"black",graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,legend:!1,showSingleLegend:!1,maxLegendCols:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:!0,legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,annotateDisplay:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossImage:[undefined],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV7:"none",fmtV8:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseWheel:null,savePngName:"canvas",responsive:!1,maintainAspectRatio:!0,dataDivider:!1,dataDividerValueIndex:-1,dataDividerColor:"#000000",dataDividerLabel:""},chart.defaults.xyAxisCommonOptions={yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5};var clear=function(e){e.clearRect(0,0,width,height)},PolarArea=function(e,t,n){function i(i){var a=-t.startAngle*(Math.PI/180)+2*Math.PI,s=0,l=0,c=1,d=1;l=0;for(var u=0;u<e.length;u++)"undefined"!=typeof e[u].value&&l++;for(l=2*Math.PI/l;a<0;)a+=2*Math.PI;for(;a>2*Math.PI;)a-=2*Math.PI;if(t.animation&&(t.animateScale&&(c=i),t.animateRotate&&(d=i)),i>=1){totvalue=0;for(u=0;u<e.length;u++)"undefined"!=typeof e[u].value&&(totvalue+=1*e[u].value)}for(u=0;u<e.length;u++)correctedRotateAnimation=animationCorrection(d,e,t,u,-1,0).mainVal,"undefined"!=typeof e[u].value&&(n.beginPath(),n.arc(h,p,c*calculateOffset(t.logarithmic,1*e[u].value,r,o),a,a+correctedRotateAnimation*l,!1),n.lineTo(h,p),n.closePath(),"function"==typeof e[u].color?n.fillStyle=e[u].color("COLOR",e,t,u,-1,i,e[u].value,"PolarArea",n,h,p,0,c*calculateOffset(t.logarithmic,1*e[u].value,r,o)):n.fillStyle=e[u].color,n.fill(),a+=l,t.segmentShowStroke&&(n.strokeStyle=t.segmentStrokeColor,n.lineWidth=t.segmentStrokeWidth,n.stroke()));if(i>=1){a-=2*Math.PI;for(u=0;u<e.length;u++)if("undefined"!=typeof e[u].value){if(s+=1*e[u].value,a+=l,"string"==typeof e[u].title?lgtxt=e[u].title.trim():lgtxt="",jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",h,p,0,calculateOffset(t.logarithmic,1*e[u].value,r,o),a-l,a,lgtxt,1*e[u].value,s,totvalue,l,u],t.inGraphDataShow){1==t.inGraphDataAnglePosition?posAngle=f+t.inGraphDataPaddingAngle*(Math.PI/180):2==t.inGraphDataAnglePosition?posAngle=f-l/2+t.inGraphDataPaddingAngle*(Math.PI/180):3==t.inGraphDataAnglePosition&&(posAngle=f-l+t.inGraphDataPaddingAngle*(Math.PI/180)),1==t.inGraphDataRadiusPosition?labelRadius=0+t.inGraphDataPaddingRadius:2==t.inGraphDataRadiusPosition?labelRadius=calculateOffset(t.logarithmic,1*e[u].value,r,o)/2+t.inGraphDataPaddingRadius:3==t.inGraphDataRadiusPosition?labelRadius=calculateOffset(t.logarithmic,1*e[u].value,r,o)+t.inGraphDataPaddingRadius:4==t.inGraphDataRadiusPosition&&(labelRadius=o*r.steps+t.inGraphDataPaddingRadius),n.save(),"off-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="left":n.textAlign="right":"to-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="right":n.textAlign="left":n.textAlign=t.inGraphDataAlign,"off-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="top":n.textBaseline="bottom":"to-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="bottom":n.textBaseline="top":n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor;var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[u].value,t.fmtV2),v3:fmtChartJS(t,s,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,l,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[u].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,h,t.fmtV7),v8:fmtChartJS(t,p,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,calculateOffset(t.logarithmic,1*e[u].value,r,o),t.fmtV10),v11:fmtChartJS(t,a-l,t.fmtV11),v12:fmtChartJS(t,l,t.fmtV12),v13:fmtChartJS(t,u,t.fmtV13),data:e});n.translate(h+labelRadius*Math.cos(posAngle),p-labelRadius*Math.sin(posAngle)),"inRadiusAxis"==t.inGraphDataRotate?n.rotate(2*Math.PI-posAngle):"inRadiusAxisRotateLabels"==t.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?n.rotate(3*Math.PI-posAngle):n.rotate(2*Math.PI-posAngle):n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(m,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()}f-=l}}_.legendMsr.dispLegend&&drawLegend(_.legendMsr,e,t,n,"PolarArea")}function a(){for(var e=0;e<r.steps;e++)if(t.scaleShowLine&&(n.beginPath(),n.arc(h,p,o*(e+1),0,2*Math.PI,!0),n.strokeStyle=t.scaleLineColor,n.lineWidth=t.scaleLineWidth,n.stroke()),t.scaleShowLabels){n.textAlign="center",n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;var i=r.labels[e+1];if(t.scaleShowLabelBackdrop){var a=n.measureTextMultiLine(i,t.scaleFontSize).textWidth;n.fillStyle=t.scaleBackdropColor,n.beginPath(),n.rect(Math.round(h-a/2-t.scaleBackdropPaddingX),Math.round(p-o*(e+1)-.5*t.scaleFontSize-t.scaleBackdropPaddingY),Math.round(a+2*t.scaleBackdropPaddingX),Math.round(t.scaleFontSize+2*t.scaleBackdropPaddingY)),n.fill()}n.textBaseline="middle",n.fillStyle=t.scaleFontColor,n.fillTextMultiLine(i,h,p-o*(e+1),n.textBaseline,t.scaleFontSize)}}function s(){for(var n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=0;a<e.length;a++)1*e[a].value>n&&(n=1*e[a].value),1*e[a].value<i&&(i=1*e[a].value);return Math.abs(n-i)<1e-8&&(n=Max([2*n,1]),i=0),isNaN(t.graphMin)||(i=t.graphMin),isNaN(t.graphMax)||(n=t.graphMax),{maxValue:n,minValue:i,maxSteps:Math.floor(c/(.66*l)),minSteps:Math.floor(c/l*.5)}}var o,r,l,c,d,u,_,h,p;if(n.tpchart="PolarArea",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}for(var f=t.startAngle*(Math.PI/180)+2*Math.PI;t.startAngle<0;)t.startAngle+=360;for(;t.startAngle>360;)t.startAngle-=360;for(;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;t.logarithmic=!1,t.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),d=s(),u=t.scaleShowLabels?t.scaleLabel:"",t.scaleOverride?(r={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]},populateLabels(1,t,u,r.labels,r.steps,t.scaleStartValue,r.graphMax,t.scaleStepWidth),_=setMeasures(e,t,n,height,width,r.labels,null,!0,!1,!1,!1,!0,"PolarArea")):(r=calculateScale(1,t,d.maxSteps,d.minSteps,d.maxValue,d.minValue,u),_=setMeasures(e,t,n,height,width,r.labels,null,!0,!1,!1,!1,!0,"PolarArea")),h=_.leftNotUsableSize+_.availableWidth/2,p=_.topNotUsableSize+_.availableHeight/2,(o=Math.floor((Min([_.availableHeight,_.availableWidth])/2-5)/r.steps))>0?animationLoop(t,a,i,n,_.clrx,_.clry,_.clrwidth,_.clrheight,h,p,h-(Min([_.availableHeight,_.availableWidth])/2-5),p+(Min([_.availableHeight,_.availableWidth])/2-5),e):testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},Radar=function(e,t,n){function i(i){for(var a=new Array,s=new Array,o=new Array,r=0;r<e.datasets.length;r++){o[r]=-999999999;for(var d=0;d<e.datasets[r].data.length;d++)a[d]=0,s[d]=-999999999}for(r=0;r<e.datasets.length;r++)for(d=0;d<e.datasets[r].data.length;d++)"undefined"!=typeof e.datasets[r].data[d]&&(a[d]+=1*e.datasets[r].data[d],s[d]=Max([s[d],1*e.datasets[r].data[d]]),o[r]=Max([o[r],1*e.datasets[r].data[d]]));var u=2*Math.PI/e.datasets[0].data.length;n.save();for(r=0;r<e.datasets.length;r++){i>=1&&("string"==typeof e.datasets[r].title?lgtxt=e.datasets[r].title.trim():lgtxt="");var _=-1;for(d=0;d<e.datasets[r].data.length;d++){var h=animationCorrection(i,e,t,r,d,1).animVal;h>1&&(h-=1),"undefined"!=typeof e.datasets[r].data[d]&&(-1==_?(n.beginPath(),n.moveTo(f+h*(Math.cos(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l)),m-h*(Math.sin(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l))),_=d):n.lineTo(f+h*(Math.cos(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l)),m-h*(Math.sin(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l))),i>=1&&(divprev=0==r?0:e.datasets[r].data[d]-e.datasets[r-1].data[d],r==e.datasets.length-1?divnext=0:divnext=e.datasets[r+1].data[d]-e.datasets[r].data[d],"string"==typeof e.labels[d]?lgtxt2=e.labels[d].trim():lgtxt2="",jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["POINT",f+Math.cos(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l),m-Math.sin(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l),lgtxt,lgtxt2,1*e.datasets[r].data[d],divprev,divnext,s[d],a[d],r,d]))}if(n.closePath(),t.datasetFill?"function"==typeof e.datasets[r].fillColor?n.fillStyle=e.datasets[r].fillColor("FILLCOLOR",e,t,r,-1,h,-1,"Radar",n,f,m,0,(t.animationLeftToRight?1:h)*calculateOffset(t.logarithmic,o[r],c,l)):"string"==typeof e.datasets[r].fillColor?n.fillStyle=e.datasets[r].fillColor:n.fillStyle=t.defaultFillColor:n.fillStyle="rgba(0,0,0,0)","function"==typeof e.datasets[r].strokeColor?n.strokeStyle=e.datasets[r].strokeColor("STROKECOLOR",e,t,r,-1,h,-1,"Radar",n,f,m,0,(t.animationLeftToRight?1:h)*calculateOffset(t.logarithmic,o[r],c,l)):"string"==typeof e.datasets[r].strokeColor?n.strokeStyle=e.datasets[r].strokeColor:n.strokeStyle=t.defaultStrokeColor,n.lineWidth=t.datasetStrokeWidth,n.fill(),n.stroke(),t.pointDot&&(!t.animationLeftToRight||t.animationLeftToRight&&i>=1)){n.beginPath(),"function"==typeof e.datasets[r].pointColor?n.fillStyle=e.datasets[r].pointColor("POINTCOLOR",e,t,r,-1,h,-1,"Radar",n,f,m,0,(t.animationLeftToRight?1:h)*calculateOffset(t.logarithmic,o[r],c,l)):n.fillStyle=e.datasets[r].pointColor,"function"==typeof e.datasets[r].pointStrokeColor?n.strokeStyle=e.datasets[r].pointStrokeColor("POINTSTROKECOLOR",e,t,r,-1,h,-1,"Radar",n,f,m,0,(t.animationLeftToRight?1:h)*calculateOffset(t.logarithmic,o[r],c,l)):n.strokeStyle=e.datasets[r].pointStrokeColor,n.lineWidth=t.pointDotStrokeWidth;for(var g=0;g<e.datasets[r].data.length;g++)"undefined"!=typeof e.datasets[r].data[g]&&(n.beginPath(),n.arc(f+h*(Math.cos(t.startAngle*Math.PI/180-g*u)*calculateOffset(t.logarithmic,e.datasets[r].data[g],c,l)),m-h*(Math.sin(t.startAngle*Math.PI/180-g*u)*calculateOffset(t.logarithmic,e.datasets[r].data[g],c,l)),t.pointDotRadius,2*Math.PI,!1),n.fill(),n.stroke())}}if(n.restore(),i>=1&&t.inGraphDataShow)for(r=0;r<e.datasets.length;r++){"string"==typeof e.datasets[r].title?lgtxt=e.datasets[r].title.trim():lgtxt="";for(d=0;d<e.datasets[r].data.length;d++)if("undefined"!=typeof e.datasets[r].data[d]){var v;divprev=0==r?0:e.datasets[r].data[d]-e.datasets[r-1].data[d],r==e.datasets.length-1?divnext=0:divnext=e.datasets[r+1].data[d]-e.datasets[r].data[d],"string"==typeof e.labels[d]?lgtxt2=e.labels[d].trim():lgtxt2="",n.save(),n.textAlign=t.inGraphDataAlign,n.textBaseline=t.inGraphDataVAlign,"off-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)<=Math.PI/2?n.textAlign="left":n.textAlign="right":"to-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="right":n.textAlign="left":n.textAlign=t.inGraphDataAlign,"off-center"==t.inGraphDataVAlign?(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="bottom":n.textBaseline="top":"to-center"==t.inGraphDataVAlign?(t.startAngle*Math.PI/180-d*u+4*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="top":n.textBaseline="bottom":n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor,1==t.inGraphDataRadiusPosition?v=0+t.inGraphDataPaddingRadius:2==t.inGraphDataRadiusPosition?v=calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l)/2+t.inGraphDataPaddingRadius:3==t.inGraphDataRadiusPosition&&(v=calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l)+t.inGraphDataPaddingRadius),n.translate(f+Math.cos(t.startAngle*Math.PI/180-d*u)*v,m-Math.sin(t.startAngle*Math.PI/180-d*u)*v),"inRadiusAxis"==t.inGraphDataRotate?n.rotate(d*u):"inRadiusAxisRotateLabels"==t.inGraphDataRotate?(d*u+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(d*u+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?n.rotate(3*Math.PI+d*u):n.rotate(2*Math.PI+d*u):n.rotate(t.inGraphDataRotate*(Math.PI/180));var b=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[r].data[d],t.fmtV3),v4:fmtChartJS(t,divprev,t.fmtV4),v5:fmtChartJS(t,divnext,t.fmtV5),v6:fmtChartJS(t,s[d],t.fmtV6),v7:fmtChartJS(t,a[d],t.fmtV7),v8:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[r].data[d]/a[d],t.fmtV8),t.roundPct),v9:fmtChartJS(t,f+Math.cos(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l),t.fmtV9),v10:fmtChartJS(t,m-Math.sin(t.startAngle*Math.PI/180-d*u)*calculateOffset(t.logarithmic,e.datasets[r].data[d],c,l),t.fmtV10),v11:fmtChartJS(t,r,t.fmtV11),v12:fmtChartJS(t,d,t.fmtV12),data:e});n.fillTextMultiLine(b,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()}}p.legendMsr.dispLegend&&drawLegend(p.legendMsr,e,t,n,"Radar")}function a(){var i=2*Math.PI/e.datasets[0].data.length;if(n.save(),n.translate(f,m),n.rotate((90-t.startAngle)*Math.PI/180),t.angleShowLineOut){n.strokeStyle=t.angleLineColor,n.lineWidth=t.angleLineWidth;for(var a=0;a<e.datasets[0].data.length;a++)n.rotate(i),n.beginPath(),n.moveTo(0,0),n.lineTo(0,-r),n.stroke()}for(var s=0;s<c.steps;s++)if(n.beginPath(),t.scaleShowLine){n.strokeStyle=t.scaleLineColor,n.lineWidth=t.scaleLineWidth,n.moveTo(0,-l*(s+1));for(var o=0;o<e.datasets[0].data.length;o++)n.rotate(i),n.lineTo(0,-l*(s+1));n.closePath(),n.stroke()}if(n.rotate(-(90-t.startAngle)*Math.PI/180),t.scaleShowLabels)for(s=0;s<c.steps;s++){if(n.textAlign="center",n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily,n.textBaseline="middle",t.scaleShowLabelBackdrop){var d=n.measureTextMultiLine(c.labels[s+1],t.scaleFontSize).textWidth;n.fillStyle=t.scaleBackdropColor,n.beginPath(),n.rect(Math.round(Math.cos(t.startAngle*Math.PI/180)*(l*(s+1))-d/2-t.scaleBackdropPaddingX),Math.round(-Math.sin(t.startAngle*Math.PI/180)*l*(s+1)-.5*t.scaleFontSize-t.scaleBackdropPaddingY),Math.round(d+2*t.scaleBackdropPaddingX),Math.round(t.scaleFontSize+2*t.scaleBackdropPaddingY)),n.fill()}n.fillStyle=t.scaleFontColor,n.fillTextMultiLine(c.labels[s+1],Math.cos(t.startAngle*Math.PI/180)*(l*(s+1)),-Math.sin(t.startAngle*Math.PI/180)*l*(s+1),n.textBaseline,t.scaleFontSize)}for(var u=0;u<e.labels.length;u++){n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily,n.fillStyle=t.pointLabelFontColor;for(var _=Math.sin((90-t.startAngle)*Math.PI/180+i*u)*(r+t.pointLabelFontSize),h=Math.cos((90-t.startAngle)*Math.PI/180+i*u)*(r+t.pointLabelFontSize),p=(90-t.startAngle)*Math.PI/180+i*u;p<0;)p+=2*Math.PI;for(;p>2*Math.PI;)p-=2*Math.PI;p==Math.PI||0==p?n.textAlign="center":p>Math.PI?n.textAlign="right":n.textAlign="left",n.textBaseline="middle",n.fillTextMultiLine(e.labels[u],_,-h,n.textBaseline,t.pointLabelFontSize)}n.restore()}function s(){var i,a,s,o,l,c,u,_=2*Math.PI/e.datasets[0].data.length,h=t.startAngle*Math.PI/180;if(n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily,t.graphMaximized){o=p.availableWidth/2,s=p.availableWidth/2,c=40;for(var m=0;m<e.labels.length;m++){var g=n.measureTextMultiLine(e.labels[m],t.scaleFontSize).textWidth+n.measureTextMultiLine(e.labels[m],t.scaleFontSize).textHeight;a=(p.availableWidth-g)/(1+Math.abs(Math.cos(h))),h<Math.PI/2&&h>-Math.PI/2||h>3*Math.PI/2?a<o&&(o=a):0!=Math.cos(h)&&a<s&&(s=a),h-=_}}else o=p.availableWidth/2,s=p.availableWidth/2,c=1;for(u=0,0,f=o+p.rightNotUsableSize,i=o,l=0;l<c;++l,i+=(p.availableWidth-s-o)/c){r=Max([i,p.availableWidth-i]);h=t.startAngle*Math.PI/180;a=p.available;for(m=0;m<e.labels.length;m++){g=n.measureTextMultiLine(e.labels[m],t.scaleFontSize).textWidth+n.measureTextMultiLine(e.labels[m],t.scaleFontSize).textHeight;h<Math.PI/2&&h>-Math.PI/2||h>3*Math.PI/2?a=(p.availableWidth-i-g)/Math.abs(Math.cos(h)):Math.cos(0!=h)&&(a=(i-g)/Math.abs(Math.cos(h))),a<r&&(r=a),Math.sin(h)*p.availableHeight/2>p.availableHeight/2-2*t.scaleFontSize&&(a=Math.sin(h)*p.availableHeight/2-1.5*t.scaleFontSize)<r&&(r=a),h-=_}r>u&&(u=r,f=i+p.rightNotUsableSize)}r=u-t.scaleFontSize/2,d=Default(d,5)}function o(){for(var n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=0;a<e.datasets.length;a++)for(var s=0;s<e.datasets[a].data.length;s++)1*e.datasets[a].data[s]>n&&(n=1*e.datasets[a].data[s]),1*e.datasets[a].data[s]<i&&(i=1*e.datasets[a].data[s]);return Math.abs(n-i)<1e-8&&(n=Max([2*n,1]),i=0),isNaN(t.graphMin)||(i=t.graphMin),isNaN(t.graphMax)||(n=t.graphMax),{
maxValue:n,minValue:i,maxSteps:Math.floor(u/(.66*d)),minSteps:Math.floor(u/d*.5)}}var r,l,c,d,u,_,h,p,f,m;if(n.tpchart="Radar",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}for(;t.startAngle<0;)t.startAngle+=360;for(;t.startAngle>360;)t.startAngle-=360;t.logarithmic=!1,t.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),e.labels||(e.labels=[]),setRect(n,t),_=o(),h=t.scaleShowLabels?t.scaleLabel:"",t.scaleOverride?(c={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]},populateLabels(1,t,h,c.labels,c.steps,t.scaleStartValue,c.graphMax,t.scaleStepWidth),p=setMeasures(e,t,n,height,width,c.labels,null,!0,!1,!1,!0,t.datasetFill,"Radar")):(c=calculateScale(1,t,_.maxSteps,_.minSteps,_.maxValue,_.minValue,h),p=setMeasures(e,t,n,height,width,c.labels,null,!0,!1,!1,!0,t.datasetFill,"Radar")),s(),m=p.topNotUsableSize+p.availableHeight/2,l=r/c.steps,animationLoop(t,a,i,n,p.clrx,p.clry,p.clrwidth,p.clrheight,f,m,f-r,m+r,e)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},Pie=function(e,t,n){function i(i){for(var a=-t.startAngle*(Math.PI/180)+2*Math.PI,d=0,u=1,_=1,h=t.startAngle*(Math.PI/180)+2*Math.PI;a<0;)a+=2*Math.PI;for(;a>2*Math.PI;)a-=2*Math.PI;for(;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(t.animation&&(t.animateScale&&(u=i),t.animateRotate&&(_=i)),i>=1){totvalue=0;for(var p=0;p<e.length;p++)"undefined"!=typeof e[p].value&&(totvalue+=1*e[p].value)}for(p=0;p<e.length;p++){if(correctedRotateAnimation=animationCorrection(_,e,t,p,-1,0).mainVal,"undefined"!=typeof e[p].value)(f=correctedRotateAnimation*(1*e[p].value/c*(2*Math.PI)))>=2*Math.PI&&(f=2*Math.PI-.001),n.beginPath(),n.arc(o,r,u*l,a,a+f),n.lineTo(o,r),n.closePath(),"function"==typeof e[p].color?n.fillStyle=e[p].color("COLOR",e,t,p,-1,i,e[p].value,"Pie",n,o,r,0,u*l):n.fillStyle=e[p].color,n.fill(),a+=f,d+=1*e[p].value,t.segmentShowStroke&&(n.lineWidth=t.segmentStrokeWidth,n.strokeStyle=t.segmentStrokeColor,n.stroke())}if(i>=1){a-=2*Math.PI;for(p=0;p<e.length;p++)if(correctedRotateAnimation=animationCorrection(_,e,t,p,-1,0).mainVal,"undefined"!=typeof e[p].value){var f;if((f=correctedRotateAnimation*(1*e[p].value/c*(2*Math.PI)))>=2*Math.PI&&(f=2*Math.PI-.001),a+=f,d+=1*e[p].value,"string"==typeof e[p].title?lgtxt=e[p].title.trim():lgtxt="",jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",o,r,0,l,a-f,a,lgtxt,1*e[p].value,d,totvalue,f,p],t.inGraphDataShow&&f>=Math.PI/180*t.inGraphDataMinimumAngle){1==t.inGraphDataAnglePosition?posAngle=h+t.inGraphDataPaddingAngle*(Math.PI/180):2==t.inGraphDataAnglePosition?posAngle=h-f/2+t.inGraphDataPaddingAngle*(Math.PI/180):3==t.inGraphDataAnglePosition&&(posAngle=h-f+t.inGraphDataPaddingAngle*(Math.PI/180)),1==t.inGraphDataRadiusPosition?labelRadius=0+t.inGraphDataPaddingRadius:2==t.inGraphDataRadiusPosition?labelRadius=l/2+t.inGraphDataPaddingRadius:3==t.inGraphDataRadiusPosition&&(labelRadius=l+t.inGraphDataPaddingRadius),n.save(),"off-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="left":n.textAlign="right":"to-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="right":n.textAlign="left":n.textAlign=t.inGraphDataAlign,"off-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="top":n.textBaseline="bottom":"to-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="bottom":n.textBaseline="top":n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor;var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,d,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,f,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[p].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,o,t.fmtV7),v8:fmtChartJS(t,r,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,l,t.fmtV10),v11:fmtChartJS(t,a-f,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13),data:e});n.translate(o+labelRadius*Math.cos(posAngle),r-labelRadius*Math.sin(posAngle)),"inRadiusAxis"==t.inGraphDataRotate?n.rotate(2*Math.PI-posAngle):"inRadiusAxisRotateLabels"==t.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?n.rotate(3*Math.PI-posAngle):n.rotate(2*Math.PI-posAngle):n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(m,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()}h-=f}}s.legendMsr.dispLegend&&drawLegend(s.legendMsr,e,t,n,"Pie")}function a(){for(var i,a=-t.startAngle*(Math.PI/180)+2*Math.PI,d=0;a<0;)a+=2*Math.PI;for(;a>2*Math.PI;)a-=2*Math.PI;if(o=s.leftNotUsableSize+s.availableWidth/2,r=s.topNotUsableSize+s.availableHeight/2,l=Min([s.availableHeight/2,s.availableWidth/2])-5,t.inGraphDataShow&&3==t.inGraphDataRadiusPosition&&"off-center"==t.inGraphDataAlign&&0==t.inGraphDataRotate){l=Min([s.availableHeight/2,s.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;for(var u=t.startAngle*(Math.PI/180)+2*Math.PI;u<0;)u+=2*Math.PI;for(;u>2*Math.PI;)u-=2*Math.PI;for(var _=0,h=0;h<e.length;h++)"undefined"!=typeof e[h].value&&(_+=1*e[h].value);n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;var p;for(d=0,h=0;h<e.length;h++)if("undefined"!=typeof e[h].value){d+=1*e[h].value;var f=1*e[h].value/c*(2*Math.PI);a+=f,1==t.inGraphDataAnglePosition?p=u+t.inGraphDataPaddingAngle*(Math.PI/180):2==t.inGraphDataAnglePosition?p=u-f/2+t.inGraphDataPaddingAngle*(Math.PI/180):3==t.inGraphDataAnglePosition&&(p=u-f+t.inGraphDataPaddingAngle*(Math.PI/180)),u-=f,i="string"==typeof e[h].title?e[h].title.trim():"";var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,i,t.fmtV1),v2:fmtChartJS(t,1*e[h].value,t.fmtV2),v3:fmtChartJS(t,d,t.fmtV3),v4:fmtChartJS(t,_,t.fmtV4),v5:fmtChartJS(t,f,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[h].value/_,t.fmtV6),t.roundPct),v7:fmtChartJS(t,o,t.fmtV7),v8:fmtChartJS(t,r,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,l,t.fmtV10),v11:fmtChartJS(t,a-f,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,h,t.fmtV13),data:e}),g=n.measureText(m).width,v=Math.abs((s.availableWidth/2-g)/Math.cos(p))-t.inGraphDataPaddingRadius-5;v<l&&(l=v)}}l*=t.radiusScale}var s,o,r,l,c=0;if(n.tpchart="Pie",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}for(;t.startAngle<0;)t.startAngle+=360;for(;t.startAngle>360;)t.startAngle-=360;t.logarithmic=!1,t.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),s=setMeasures(e,t,n,height,width,"none",null,!0,!1,!1,!1,!0,"Pie");for(var d=0;d<e.length;d++)"undefined"!=typeof e[d].value&&(c+=1*e[d].value);a(),l>0?animationLoop(t,null,i,n,s.clrx,s.clry,s.clrwidth,s.clrheight,o,r,o-l,r+l,e):testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},Doughnut=function(e,t,n){function i(i){for(var a=-t.startAngle*(Math.PI/180)+2*Math.PI,_=0,h=1,p=1;a<0;)a+=2*Math.PI;for(;a>2*Math.PI;)a-=2*Math.PI;if(t.animation&&(t.animateScale&&(h=i),t.animateRotate&&(p=i)),i>=1){totvalue=0;for(var f=0;f<e.length;f++)"undefined"!=typeof e[f].value&&(totvalue+=1*e[f].value)}for(f=0;f<e.length;f++){if(correctedRotateAnimation=animationCorrection(p,e,t,f,-1,0).mainVal,"undefined"!=typeof e[f].value)(m=correctedRotateAnimation*(1*e[f].value/c*(2*Math.PI)))>=2*Math.PI&&(m=2*Math.PI-.001),n.beginPath(),n.arc(o,r,h*l,a,a+m,!1),n.arc(o,r,h*u,a+m,a,!0),n.closePath(),"function"==typeof e[f].color?n.fillStyle=e[f].color("COLOR",e,t,f,-1,i,e[f].value,"Doughnut",n,o,r,h*u,h*l):n.fillStyle=e[f].color,n.fill(),a+=m,_+=1*e[f].value,t.segmentShowStroke&&(n.lineWidth=t.segmentStrokeWidth,n.strokeStyle=t.segmentStrokeColor,n.stroke())}if(i>=1){a-=2*Math.PI;for(f=0;f<e.length;f++)if(correctedRotateAnimation=animationCorrection(p,e,t,f,-1,0).mainVal,"undefined"!=typeof e[f].value){var m;if((m=correctedRotateAnimation*(1*e[f].value/c*(2*Math.PI)))>=2*Math.PI&&(m=2*Math.PI-.001),a+=m,_+=1*e[f].value,"string"==typeof e[f].title?lgtxt=e[f].title.trim():lgtxt="",jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["ARC",o,r,u,l,a-m,a,lgtxt,1*e[f].value,_,totvalue,m,f],t.inGraphDataShow&&m>=Math.PI/180*t.inGraphDataMinimumAngle){1==t.inGraphDataAnglePosition?posAngle=d+t.inGraphDataPaddingAngle*(Math.PI/180):2==t.inGraphDataAnglePosition?posAngle=d-m/2+t.inGraphDataPaddingAngle*(Math.PI/180):3==t.inGraphDataAnglePosition&&(posAngle=d-m+t.inGraphDataPaddingAngle*(Math.PI/180)),1==t.inGraphDataRadiusPosition?labelRadius=u+t.inGraphDataPaddingRadius:2==t.inGraphDataRadiusPosition?labelRadius=u+(l-u)/2+t.inGraphDataPaddingRadius:3==t.inGraphDataRadiusPosition&&(labelRadius=l+t.inGraphDataPaddingRadius),n.save(),"off-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="left":n.textAlign="right":"to-center"==t.inGraphDataAlign?"inRadiusAxis"==t.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?n.textAlign="right":n.textAlign="left":n.textAlign=t.inGraphDataAlign,"off-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="top":n.textBaseline="bottom":"to-center"==t.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?n.textBaseline="bottom":n.textBaseline="top":n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor;var g=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[f].value,t.fmtV2),v3:fmtChartJS(t,_,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,m,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[f].value/totvalue,t.fmtV6),t.roundPct),v7:fmtChartJS(t,o,t.fmtV7),v8:fmtChartJS(t,r,t.fmtV8),v9:fmtChartJS(t,u,t.fmtV9),v10:fmtChartJS(t,l,t.fmtV10),v11:fmtChartJS(t,a-m,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,f,t.fmtV13)});n.translate(o+labelRadius*Math.cos(posAngle),r-labelRadius*Math.sin(posAngle)),"inRadiusAxis"==t.inGraphDataRotate?n.rotate(2*Math.PI-posAngle):"inRadiusAxisRotateLabels"==t.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?n.rotate(3*Math.PI-posAngle):n.rotate(2*Math.PI-posAngle):n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(g,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()}d-=m}}s.legendMsr.dispLegend&&drawLegend(s.legendMsr,e,t,n,"Doughnut")}function a(){for(var i,a=-t.startAngle*(Math.PI/180)+2*Math.PI,d=0;a<0;)a+=2*Math.PI;for(;a>2*Math.PI;)a-=2*Math.PI;if(o=s.leftNotUsableSize+s.availableWidth/2,r=s.topNotUsableSize+s.availableHeight/2,l=Min([s.availableHeight/2,s.availableWidth/2])-5,t.inGraphDataShow&&3==t.inGraphDataRadiusPosition&&"off-center"==t.inGraphDataAlign&&0==t.inGraphDataRotate){l=Min([s.availableHeight/2,s.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;for(var _=t.startAngle*(Math.PI/180)+2*Math.PI;_<0;)_+=2*Math.PI;for(;_>2*Math.PI;)_-=2*Math.PI;for(var h,p=0,f=0;f<e.length;f++)"undefined"!=typeof e[f].value&&(p+=1*e[f].value);n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;for(a=0,f=0;f<e.length;f++)if("undefined"!=typeof e[f].value){d+=1*e[f].value;var m=1*e[f].value/c*(2*Math.PI);a+=m,1==t.inGraphDataAnglePosition?h=_+t.inGraphDataPaddingAngle*(Math.PI/180):2==t.inGraphDataAnglePosition?h=_-m/2+t.inGraphDataPaddingAngle*(Math.PI/180):3==t.inGraphDataAnglePosition&&(h=_-m+t.inGraphDataPaddingAngle*(Math.PI/180)),_-=m,i="string"==typeof e[f].title?e[f].title.trim():"";var g=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,i,t.fmtV1),v2:fmtChartJS(t,1*e[f].value,t.fmtV2),v3:fmtChartJS(t,d,t.fmtV3),v4:fmtChartJS(t,p,t.fmtV4),v5:fmtChartJS(t,m,t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e[f].value/p,t.fmtV6),t.roundPct),v7:fmtChartJS(t,o,t.fmtV7),v8:fmtChartJS(t,r,t.fmtV8),v9:fmtChartJS(t,u,t.fmtV9),v10:fmtChartJS(t,l,t.fmtV10),v11:fmtChartJS(t,a-m,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,f,t.fmtV13),data:e}),v=n.measureText(g).width,b=Math.abs((s.availableWidth/2-v)/Math.cos(h))-t.inGraphDataPaddingRadius-5;b<l&&(l=b)}}l*=t.radiusScale}var s,o,r,l,c=0;if(n.tpchart="Doughnut",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}for(var d=t.startAngle*(Math.PI/180)+2*Math.PI;t.startAngle<0;)t.startAngle+=360;for(;t.startAngle>360;)t.startAngle-=360;for(;d<0;)d+=2*Math.PI;for(;d>2*Math.PI;)d-=2*Math.PI;t.logarithmic=!1,t.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),s=setMeasures(e,t,n,height,width,"none",null,!0,!1,!1,!1,!0,"Doughnut"),a();for(var u=l*(t.percentageInnerCutout/100),_=0;_<e.length;_++)"undefined"!=typeof e[_].value&&(c+=1*e[_].value);l>0?animationLoop(t,null,i,n,s.clrx,s.clry,s.clrwidth,s.clrheight,o,r,o-l,r+l,e):testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},Line=function(data,config,ctx){function drawLines(e){function t(e){return yAxisPosX+valueHop*e}if(drawLinesDataset(1,e,data,config,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic}),drawLinesDataset(2,e,data,config,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop2,zeroY:zeroY2,calculatedScale:calculatedScale2,logarithmic:config.logarithmic2}),config.dataDivider&&config.dataDividerValueIndex>0){var n=(t(config.dataDividerValueIndex-1)+t(config.dataDividerValueIndex))/2,i=msr.availableHeight+15;ctx.beginPath(),ctx.moveTo(n,5),ctx.strokeStyle=config.dataDividerColor,ctx.lineWidth=2,ctx.lineTo(n,i),ctx.stroke(),ctx.fillStyle=config.dataDividerColor,ctx.strokeStyle="#fff",ctx.beginPath(),ctx.arc(n,i/2,config.pointDotRadius,0,2*Math.PI),ctx.fill(),ctx.stroke(),drawDividerLabel(ctx,{x:n,y:i/2,text:config.dataDividerLabel,bgColor:config.dataDividerBackgroundColor,textColor:config.dataDividerTextColor,fontFamily:config.dataDividerFontFamily,fontStyle:config.dataDividerFontStyle,height:20})}e>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Line")}function drawScale(){if(!1!==config.drawXScaleLine)for(var e=0;e<config.drawXScaleLine.length;e++){var t;switch(ctx.lineWidth=config.drawXScaleLine[e].lineWidth?config.drawXScaleLine[e].lineWidth:config.scaleLineWidth,ctx.strokeStyle=config.drawXScaleLine[e].lineColor?config.drawXScaleLine[e].lineColor:config.scaleLineColor,ctx.beginPath(),config.drawXScaleLine[e].position){case"bottom":t=xAxisPosY;break;case"top":t=xAxisPosY-msr.availableHeight-config.scaleTickSizeTop;break;case"0":case 0:0!=zeroY&&(t=xAxisPosY-zeroY)}ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,t),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,t),ctx.stroke()}for(var n=0;n<data.labels.length;n++)ctx.beginPath(),ctx.moveTo(yAxisPosX+n*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&n>0&&n%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+n*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+n*valueHop,xAxisPosY),ctx.stroke();ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.stroke();for(var i=0;i<calculatedScale.steps;i++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(i+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&i%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(i+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(i+1)*scaleHop),ctx.stroke()}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var e=0;e<data.labels.length;e++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+e*valueHop-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-msr.rotateLabels*(Math.PI/180)),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var t=config.showYAxisMin?-1:0;t<calculatedScale.steps;t++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)));if(config.yAxisRight&&valueBounds.dbAxis)for(t=config.showYAxisMin?-1:0;t<calculatedScale2.steps;t++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[t+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop2,ctx.textBaseline,config.scaleFontSize))}function getValueBounds(){for(var upperValue=Number.MIN_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=Number.MIN_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight))}Math.abs(upperValue-lowerValue)<1e-8&&(upperValue=Max([2*upperValue,1]),lowerValue=0),isNaN(config.graphMin)||(lowerValue=config.graphMin),isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(Math.abs(upperValue2-lowerValue2)<1e-8&&(upperValue2=Max([2*upperValue2,1]),lowerValue2=0),isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0,offsets=[];if(ctx.tpchart="Line",setting_new_chart_vars(ctx),dynamicFunction(data,config,ctx)){if(config.responsive&&"undefined"==typeof ctx.firstPass){if(!config.multiGraph)return addResponsiveChart(ctx.ChartNewId,ctx,data,config),void subUpdateChart(ctx,data,config);ctx.firstPass=1}for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){"string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]);for(var i=0;i<data.datasets.length;i++)data.datasets[i].data[0],data.datasets[i].data=[undefined,data.datasets[i].data[0],undefined]}"undefined"==typeof jsGraphAnnotate[ctx.ChartNewId]?jsGraphAnnotate[ctx.ChartNewId]=new Array:config.multiGraph||clearAnnotate(ctx.ChartNewId),defMouse(ctx,data,config),setRect(ctx,config),msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!1,!1,!0,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),!1!==config.logarithmic&&valueBounds.minValue<=0&&(config.logarithmic=!1),!1!==config.logarithmic2&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&OrderOfMagnitude2<4||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride?(calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth)):valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)),valueBounds.dbAxis?config.scaleOverride2?(calculatedScale2={steps:config.scaleSteps2,stepValue:config.scaleStepWidth2,graphMin:config.scaleStartValue2,graphMax:config.scaleStartValue2+config.scaleSteps2*config.scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,config.scaleStartValue2,calculatedScale2.graphMax,config.scaleStepWidth2)):valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString)):calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null},valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,drawLabels(),valueBounds.minValue<0&&(zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop)),valueBounds.minValue2<0&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2));for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++)2==data.datasets[i].axis?offsets[i][j]=calculateOffset(config.logarithmic2,data.datasets[i].data[j],calculatedScale2,scaleHop2)-zeroY2:offsets[i][j]=calculateOffset(config.logarithmic,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)}else config.responsive&&"undefined"==typeof ctx.firstPass&&(config.multiGraph||addResponsiveChart(ctx.ChartNewId,ctx,data,config))},StackedBar=function(e,t,n){function i(i){n.lineWidth=t.barStrokeWidth;for(var a=new Array(e.datasets.length),s=new Array(e.datasets.length),o=new Array,c=new Array,d=0;d<e.datasets.length;d++)for(var u=0;u<e.datasets[d].data.length;u++)o[u]=0,c[u]=0;for(d=0;d<e.datasets.length;d++)for(u=0;u<e.datasets[d].data.length;u++)"undefined"!=typeof e.datasets[d].data[u]&&(c[u]+=1*e.datasets[d].data[u]);for(d=0;d<e.datasets.length;d++){i>=1&&("string"==typeof e.datasets[d].title?lgtxt=e.datasets[d].title.trim():lgtxt="");for(u=0;u<e.datasets[d].data.length;u++){var _=animationCorrection(i,e,t,d,u,1).animVal;_>1&&(_-=1),"undefined"==typeof a[u]&&(a[u]=0,s[u]=0,zeroY=calculateOffset(t.logarithmic,0,l,r));var v=p+t.barValueSpacing+h*u;if("undefined"!=typeof e.datasets[d].data[u]&&1*e.datasets[d].data[u]!=0){if(1*e.datasets[d].data[u]<0)var b=a[u],y=a[u]+1*e.datasets[d].data[u];else b=s[u],y=s[u]+1*e.datasets[d].data[u];if(t.animationByDataset)x=(w=f-calculateOffset(t.logarithmic,b,l,r))+_*((x=f-calculateOffset(t.logarithmic,y,l,r))-w);else var w=f-calculateOffset(t.logarithmic,_*b,l,r),x=f-calculateOffset(t.logarithmic,_*y,l,r);n.fillStyle=t.defaultFillColor,"function"==typeof e.datasets[d].fillColor?n.fillStyle=e.datasets[d].fillColor("FILLCOLOR",e,t,d,u,_,1*e.datasets[d].data[u],"StackedBar",n,v,w,v+m,x):"string"==typeof e.datasets[d].fillColor?n.fillStyle=e.datasets[d].fillColor:"object"==typeof e.datasets[d].fillColor&&"string"==typeof e.datasets[d].fillColor[0]&&(n.fillStyle=e.datasets[d].fillColor[Min([e.datasets[d].fillColor.length-1,u])]),n.strokeStyle=t.defaultStrokeColor,"function"==typeof e.datasets[d].strokeColor?n.strokeStyle=e.datasets[d].strokeColor("STROKECOLOR",e,t,d,u,_,1*e.datasets[d].data[u],"StackedBar",n,v,w,v+m,x):"string"==typeof e.datasets[d].strokeColor?n.strokeStyle=e.datasets[d].strokeColor:"object"==typeof e.datasets[d].strokeColor&&"string"==typeof e.datasets[d].strokeColor[0]&&(n.strokeStyle=e.datasets[d].strokeColor[Min([e.datasets[d].strokeColor.length-1,u])]),0!=_&&(n.beginPath(),n.moveTo(v,w),n.lineTo(v,x),n.lineTo(v+m,x),n.lineTo(v+m,w),t.barShowStroke&&n.stroke(),n.closePath(),n.fill(),o[u]+=1*e.datasets[d].data[u],i>=1&&("string"==typeof e.labels[u]?lgtxt2=e.labels[u].trim():lgtxt2="",1*e.datasets[d].data[u]<0?jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",v,x,v+m,w,lgtxt,lgtxt2,1*e.datasets[d].data[u],o[u],c[u],d,u]:jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",v,w,v+m,x,lgtxt,lgtxt2,1*e.datasets[d].data[u],o[u],c[u],d,u])),1*e.datasets[d].data[u]<0?a[u]=a[u]+1*e.datasets[d].data[u]:s[u]=s[u]+1*e.datasets[d].data[u]}}}a=new Array(e.datasets.length),s=new Array(e.datasets.length);if(i>=1&&t.inGraphDataShow){var S=0,T=0;for(d=0;d<e.datasets.length;d++)for(u=0;u<e.datasets[d].data.length;u++)o[u]=0;for(d=0;d<e.datasets.length;d++){"string"==typeof e.datasets[d].title?lgtxt=e.datasets[d].title.trim():lgtxt="";for(u=0;u<e.datasets[d].data.length;u++)if("undefined"==typeof a[u]&&(a[u]=0,s[u]=0,zeroY=calculateOffset(t.logarithmic,0,l,r)),"undefined"!=typeof e.datasets[d].data[u]){if(1*e.datasets[d].data[u]<0)b=a[u],y=a[u]+1*e.datasets[d].data[u];else b=s[u],y=s[u]+1*e.datasets[d].data[u];w=f-calculateOffset(t.logarithmic,b,l,r),x=f-calculateOffset(t.logarithmic,y,l,r);n.save(),n.textAlign=t.inGraphDataAlign,n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor,"string"==typeof e.labels[u]?lgtxt2=e.labels[u].trim():lgtxt2="",o[u]+=1+e.datasets[d].data[u];var M=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[d].data[u],t.fmtV3),v4:fmtChartJS(t,o[u],t.fmtV4),v5:fmtChartJS(t,c[u],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[d].data[u]/c[u],t.fmtV6),t.roundPct),v7:fmtChartJS(t,v,t.fmtV7),v8:fmtChartJS(t,f,t.fmtV8),v9:fmtChartJS(t,v+m,t.fmtV9),v10:fmtChartJS(t,f-calculateOffset(t.logarithmic,e.datasets[d].data[u],l,r)+t.barStrokeWidth/2,t.fmtV10),v11:fmtChartJS(t,d,t.fmtV11),v12:fmtChartJS(t,u,t.fmtV12),data:e});v=p+t.barValueSpacing+h*u;n.beginPath(),n.beginPath(),S=0,T=0,1==t.inGraphDataXPosition?T=v+t.inGraphDataPaddingX:2==t.inGraphDataXPosition?T=v+m/2+t.inGraphDataPaddingX:3==t.inGraphDataXPosition&&(T=v+m+t.inGraphDataPaddingX),1==t.inGraphDataYPosition?S=w-t.inGraphDataPaddingY:2==t.inGraphDataYPosition?S=x-(botbar-topbar)/2-t.inGraphDataPaddingY:3==t.inGraphDataYPosition&&(S=x-t.inGraphDataPaddingY),S>g.topNotUsableSize&&(n.translate(T,S),n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(M,0,0,n.textBaseline,t.inGraphDataFontSize)),n.restore(),1*e.datasets[d].data[u]<0?a[u]=a[u]+1*e.datasets[d].data[u]:s[u]=s[u]+1*e.datasets[d].data[u]}}}g.legendMsr.dispLegend&&drawLegend(g.legendMsr,e,t,n,"StackedBar")}function a(){n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(p-t.scaleTickSizeLeft,f),n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,f),n.stroke();for(var i=0;i<e.labels.length;i++)n.beginPath(),n.moveTo(p+i*h,f+t.scaleTickSizeBottom),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&i>0&&i%t.scaleXGridLinesStep==0?n.lineTo(p+i*h,f-g.availableHeight-t.scaleTickSizeTop):n.lineTo(p+i*h,f),n.stroke();n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(p,f+t.scaleTickSizeBottom),n.lineTo(p,f-g.availableHeight-t.scaleTickSizeTop),n.stroke();for(var a=t.showYAxisMin?-1:0;a<l.steps;a++)n.beginPath(),n.moveTo(p-t.scaleTickSizeLeft,f-(a+1)*r),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&a%t.scaleYGridLinesStep==0?n.lineTo(p+g.availableWidth+t.scaleTickSizeRight,f-(a+1)*r):n.lineTo(p,f-(a+1)*r),n.stroke()}function s(){if(n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily,(t.xAxisTop||t.xAxisBottom)&&(n.textBaseline="top",g.rotateLabels>90?(n.save(),n.textAlign="left"):g.rotateLabels>0?(n.save(),n.textAlign="right"):n.textAlign="center",n.fillStyle=t.scaleFontColor,t.xAxisBottom))for(var i=0;i<e.labels.length;i++)n.save(),g.rotateLabels>0?(n.translate(p+t.barValueSpacing+i*h+m/2-g.highestXLabel/2,g.xLabelPos),n.rotate(-g.rotateLabels*(Math.PI/180)),
n.fillTextMultiLine(fmtChartJS(t,e.labels[i],t.fmtXLabel),0,0,n.textBaseline,t.scaleFontSize)):n.fillTextMultiLine(fmtChartJS(t,e.labels[i],t.fmtXLabel),p+t.barValueSpacing+i*h+m/2,g.xLabelPos,n.textBaseline,t.scaleFontSize),n.restore();n.textAlign="right",n.textBaseline="middle";for(var a=t.showYAxisMin?-1:0;a<l.steps;a++)t.scaleShowLabels&&(t.yAxisLeft&&(n.textAlign="right",n.fillTextMultiLine(l.labels[a+1],p-(t.scaleTickSizeLeft+t.yAxisSpaceRight),f-(a+1)*r,n.textBaseline,t.scaleFontSize)),t.yAxisRight&&(n.textAlign="left",n.fillTextMultiLine(l.labels[a+1],p+g.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),f-(a+1)*r,n.textBaseline,t.scaleFontSize)))}function o(){for(var n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=(new Array(e.datasets.length),new Array(e.datasets.length),0);a<e.datasets.length;a++)for(var s=0;s<e.datasets[a].data.length;s++){var o=a,r=0,l=0;for("undefined"!=typeof e.datasets[0].data[s]&&(1*e.datasets[0].data[s]>0?((r+=1*e.datasets[0].data[s])>n&&(n=r),r<i&&(i=r)):((l+=1*e.datasets[0].data[s])>n&&(n=l),l<i&&(i=l)));o>0;)"undefined"!=typeof e.datasets[o].data[s]&&(1*e.datasets[o].data[s]>0?((r+=1*e.datasets[o].data[s])>n&&(n=r),r<i&&(i=r)):((l+=1*e.datasets[o].data[s])>n&&(n=l),l<i&&(i=l))),o--}return isNaN(t.graphMin)||(i=t.graphMin),isNaN(t.graphMax)||(n=t.graphMax),Math.abs(n-i)<1e-8&&(n=Max([2*n,1]),i=0),c=t.scaleFontSize,d=g.availableHeight,{maxValue:n,minValue:i,maxSteps:Math.floor(d/(.66*c)),minSteps:Math.floor(d/c*.5)}}var r,l,c,d,u,_,h,p,f,m,g;if(n.tpchart="StackedBar",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}if(t.logarithmic=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),g=setMeasures(e,t,n,height,width,"nihil",[""],!0,!1,!0,!0,!0,"StackedBar"),(u=o()).maxSteps>0&&u.minSteps>0){if(_=t.scaleShowLabels?t.scaleLabel:"",t.scaleOverride){l={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var v=0;v<=l.steps;v++)_&&l.labels.push(tmpl(_,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*v).toFixed(getDecimalPlaces(t.scaleStepWidth)),t.fmtYLabel)}));g=setMeasures(e,t,n,height,width,l.labels,null,!0,!1,!0,!0,!0,"StackedBar")}else l=calculateScale(1,t,u.maxSteps,u.minSteps,u.maxValue,u.minValue,_),g=setMeasures(e,t,n,height,width,l.labels,null,!0,!1,!0,!0,!0,"StackedBar");var b=g.availableHeight;g.availableHeight=g.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop,g.availableWidth=g.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight,r=Math.floor(g.availableHeight/l.steps),(0==(h=Math.floor(g.availableWidth/e.labels.length))||t.fullWidthGraph)&&(h=g.availableWidth/e.labels.length),g.clrwidth=g.clrwidth-(g.availableWidth-e.labels.length*h),g.availableWidth=e.labels.length*h,g.availableHeight=l.steps*r,g.xLabelPos+=t.scaleTickSizeBottom+t.scaleTickSizeTop-(b-g.availableHeight),g.clrheight+=t.scaleTickSizeBottom+t.scaleTickSizeTop-(b-g.availableHeight),p=g.leftNotUsableSize+t.scaleTickSizeLeft,f=g.topNotUsableSize+g.availableHeight+t.scaleTickSizeTop,(m=h-2*t.scaleGridLineWidth-2*t.barValueSpacing-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1)>=0&&m<=1&&(m=1),m<0&&m>=-1&&(m=-1),s(),animationLoop(t,a,i,n,g.clrx,g.clry,g.clrwidth,g.clrheight,p+g.availableWidth/2,f-g.availableHeight/2,p,f,e)}else testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},HorizontalStackedBar=function(e,t,n){function i(e,t,n){var i=t.steps*t.stepValue,a=CapValue((e-t.graphMin)/i,1,0);return n*t.steps*a}function a(a){n.lineWidth=t.barStrokeWidth;for(var s=new Array(e.datasets.length),o=new Array(e.datasets.length),r=new Array,d=new Array,u=0;u<e.datasets.length;u++)for(var _=0;_<e.datasets[u].data.length;_++)r[_]=0,d[_]=0;for(u=0;u<e.datasets.length;u++)for(_=0;_<e.datasets[u].data.length;_++)"undefined"!=typeof e.datasets[u].data[_]&&(d[_]+=1*e.datasets[u].data[_]);for(u=0;u<e.datasets.length;u++){a>=1&&("string"==typeof e.datasets[u].title?lgtxt=e.datasets[u].title.trim():lgtxt="");for(_=0;_<e.datasets[u].data.length;_++){var h=animationCorrection(a,e,t,u,_,1).animVal;h>1&&(h-=1),"undefined"==typeof s[_]&&(s[_]=0,o[_]=0,zeroY=i(0,c,l));var b=m+t.barValueSpacing-l*(_+1);if("undefined"!=typeof e.datasets[u].data[_]&&1*e.datasets[u].data[_]!=0){if(1*e.datasets[u].data[_]<0)var y=s[_],w=s[_]+1*e.datasets[u].data[_];else y=o[_],w=o[_]+1*e.datasets[u].data[_];if(t.animationByDataset)S=(x=f+i(y,c,p))+h*((S=f+i(w,c,p))-x);else var x=f+i(h*y,c,p),S=f+i(h*w,c,p);n.fillStyle=t.defaultFillColor,"function"==typeof e.datasets[u].fillColor?n.fillStyle=e.datasets[u].fillColor("FILLCOLOR",e,t,u,_,h,1*e.datasets[u].data[_],"HorizontalStackedBar",n,x,b,S,b+g):"string"==typeof e.datasets[u].fillColor?n.fillStyle=e.datasets[u].fillColor:"object"==typeof e.datasets[u].fillColor&&"string"==typeof e.datasets[u].fillColor[0]&&(n.fillStyle=e.datasets[u].fillColor[Min([e.datasets[u].fillColor.length-1,_])]),n.strokeStyle=t.defaultStrokeColor,"function"==typeof e.datasets[u].strokeColor?n.strokeStyle=e.datasets[u].strokeColor("STROKECOLOR",e,t,u,_,h,1*e.datasets[u].data[_],n,"HorizontalStackedBar",n,x,b,S,b+g):"string"==typeof e.datasets[u].strokeColor?n.strokeStyle=e.datasets[u].strokeColor:"object"==typeof e.datasets[u].strokeColor&&"string"==typeof e.datasets[u].strokeColor[0]&&(n.strokeStyle=e.datasets[u].strokeColor[Min([e.datasets[u].strokeColor.length-1,_])]),0!=h&&(n.beginPath(),n.moveTo(x,b),n.lineTo(S,b),n.lineTo(S,b+g),n.lineTo(x,b+g),n.lineTo(x,b),t.barShowStroke&&n.stroke(),n.closePath(),n.fill(),r[_]+=1*e.datasets[u].data[_],a>=1&&("string"==typeof e.labels[_]?lgtxt2=e.labels[_].trim():lgtxt2="",1*e.datasets[u].data[_]<0?jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",S,b+g,x,b,lgtxt,lgtxt2,1*e.datasets[u].data[_],r[_],d[_],u,_]:jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",x,b+g,S,b,lgtxt,lgtxt2,1*e.datasets[u].data[_],r[_],d[_],u,_])),1*e.datasets[u].data[_]<0?s[_]=s[_]+1*e.datasets[u].data[_]:o[_]=o[_]+1*e.datasets[u].data[_]}}}if(a>=1&&t.inGraphDataShow){s=new Array(e.datasets.length),o=new Array(e.datasets.length);var T=0,M=0;for(u=0;u<e.datasets.length;u++)for(_=0;_<e.datasets[u].data.length;_++)r[_]=0;for(u=0;u<e.datasets.length;u++){"string"==typeof e.datasets[u].title?lgtxt=e.datasets[u].title.trim():lgtxt="";for(_=0;_<e.datasets[u].data.length;_++)if("undefined"==typeof s[_]&&(s[_]=0,o[_]=0,zeroY=i(0,c,l)),"undefined"!=typeof e.datasets[u].data[_]){if(1*e.datasets[u].data[_]<0)y=s[_],w=s[_]+1*e.datasets[u].data[_];else y=o[_],w=o[_]+1*e.datasets[u].data[_];x=f+i(y,c,p),S=f+i(w,c,p);n.save(),n.textAlign=t.inGraphDataAlign,n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor,"string"==typeof e.labels[_]?lgtxt2=e.labels[_].trim():lgtxt2="";b=m+t.barValueSpacing-l*(_+1);r[_]+=e.datasets[u].data[_];var C=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[u].data[_],t.fmtV3),v4:fmtChartJS(t,r[_],t.fmtV4),v5:fmtChartJS(t,d[_],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[u].data[_]/d[_],t.fmtV6),t.roundPct),v7:fmtChartJS(t,f,t.fmtV7),v8:fmtChartJS(t,b+g,t.fmtV8),v9:fmtChartJS(t,f+i(e.datasets[u].data[_],c,p)+t.barStrokeWidth/2,t.fmtV9),v10:fmtChartJS(t,b,t.fmtV10),v11:fmtChartJS(t,u,t.fmtV11),v12:fmtChartJS(t,_,t.fmtV12),data:e});n.beginPath(),T=0,M=0,1==t.inGraphDataXPosition?M=x+t.inGraphDataPaddingX:2==t.inGraphDataXPosition?M=x+(S-x)/2+t.inGraphDataPaddingX:3==t.inGraphDataXPosition&&(M=S+t.inGraphDataPaddingX),1==t.inGraphDataYPosition?T=b+g-t.inGraphDataPaddingY:2==t.inGraphDataYPosition?T=b+g/2-t.inGraphDataPaddingY:3==t.inGraphDataYPosition&&(T=b-t.inGraphDataPaddingY),M<=v.availableWidth+v.leftNotUsableSize&&(n.translate(M,T),n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(C,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()),1*e.datasets[u].data[_]<0?s[_]=s[_]+1*e.datasets[u].data[_]:o[_]=o[_]+1*e.datasets[u].data[_]}}}v.legendMsr.dispLegend&&drawLegend(v.legendMsr,e,t,n,"HorizontalStackedBar")}function s(){n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(f-t.scaleTickSizeLeft,m),n.lineTo(f+v.availableWidth,m),n.stroke();for(var i=t.showYAxisMin?-1:0;i<c.steps;i++)i>=0&&(n.beginPath(),n.moveTo(f+i*p,m+t.scaleTickSizeBottom),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&i>0&&i%t.scaleXGridLinesStep==0?n.lineTo(f+i*p,m-v.availableHeight-t.scaleTickSizeTop):n.lineTo(f+i*p,m),n.stroke());n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(f,m+t.scaleTickSizeBottom),n.lineTo(f,m-v.availableHeight-t.scaleTickSizeTop),n.stroke();for(var a=0;a<e.labels.length;a++)n.beginPath(),n.moveTo(f-t.scaleTickSizeLeft,m-(a+1)*l),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&a%t.scaleYGridLinesStep==0?n.lineTo(f+v.availableWidth,m-(a+1)*l):n.lineTo(f,m-(a+1)*l),n.stroke()}function o(){if(n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily,t.scaleShowLabels&&(t.xAxisTop||t.xAxisBottom)&&(n.textBaseline="top",v.rotateLabels>90?(n.save(),n.textAlign="left"):v.rotateLabels>0?(n.save(),n.textAlign="right"):n.textAlign="center",n.fillStyle=t.scaleFontColor,t.xAxisBottom))for(var i=t.showYAxisMin?-1:0;i<c.steps;i++)n.save(),v.rotateLabels>0?(n.translate(f+(i+1)*p-v.highestXLabel/2,v.xLabelPos),n.rotate(-v.rotateLabels*(Math.PI/180)),n.fillTextMultiLine(c.labels[i+1],0,0,n.textBaseline,t.scaleFontSize)):n.fillTextMultiLine(c.labels[i+1],f+(i+1)*p,v.xLabelPos,n.textBaseline,t.scaleFontSize),n.restore();n.textAlign="right",n.textBaseline="middle";for(var a=0;a<e.labels.length;a++)t.yAxisLeft&&(n.textAlign="right",n.fillTextMultiLine(fmtChartJS(t,e.labels[a],t.fmtXLabel),f-(t.scaleTickSizeLeft+t.yAxisSpaceRight),m-(a+1)*l+g/2,n.textBaseline,t.scaleFontSize)),t.yAxisRight&&(n.textAlign="left",n.fillTextMultiLine(fmtChartJS(t,e.labels[a],t.fmtXLabel),f+v.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),m-(a+1)*l+g/2,n.textBaseline,t.scaleFontSize))}function r(){for(var n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=(new Array(e.datasets.length),new Array(e.datasets.length),0);a<e.datasets.length;a++)for(var s=0;s<e.datasets[a].data.length;s++){var o=a,r=0,l=0;for("undefined"!=typeof e.datasets[0].data[s]&&(1*e.datasets[0].data[s]>0?((r+=1*e.datasets[0].data[s])>n&&(n=r),r<i&&(i=r)):((l+=1*e.datasets[0].data[s])>n&&(n=l),l<i&&(i=l)));o>0;)"undefined"!=typeof e.datasets[o].data[s]&&(1*e.datasets[o].data[s]>0?((r+=1*e.datasets[o].data[s])>n&&(n=r),r<i&&(i=r)):((l+=1*e.datasets[o].data[s])>n&&(n=l),l<i&&(i=l))),o--}return isNaN(t.graphMin)||(i=t.graphMin),isNaN(t.graphMax)||(n=t.graphMax),Math.abs(n-i)<1e-8&&(n=Max([2*n,1]),i=0),d=t.scaleFontSize,u=v.availableHeight,{maxValue:n,minValue:i,maxSteps:Math.floor(u/(.66*d)),minSteps:Math.floor(u/d*.5)}}var l,c,d,u,_,h,p,f,m,g,v;if(n.tpchart="HorizontalStackedBar",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}if(t.reverseOrder&&"undefined"==typeof n.reversed&&(n.reversed=!0,e=reverseData(e)),t.logarithmic=!1,"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),v=setMeasures(e,t,n,height,width,"nihil",[""],!0,!0,!0,!0,!0,"HorizontalStackedBar"),(_=r()).maxSteps>0&&_.minSteps>0){if(h=t.scaleShowLabels?t.scaleLabel:"",t.scaleOverride){c={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var b=0;b<=c.steps;b++)h&&c.labels.push(tmpl(h,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*b).toFixed(getDecimalPlaces(t.scaleStepWidth)),t.fmtYLabel)}));v=setMeasures(e,t,n,height,width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar")}else c=calculateScale(1,t,_.maxSteps,_.minSteps,_.maxValue,_.minValue,h),v=setMeasures(e,t,n,height,width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar");v.availableHeight=v.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop,v.availableWidth=v.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight,l=Math.floor(v.availableHeight/e.labels.length),(0==(p=Math.floor(v.availableWidth/c.steps))||t.fullWidthGraph)&&(p=v.availableWidth/c.steps),v.clrwidth=v.clrwidth-(v.availableWidth-c.steps*p),v.availableWidth=c.steps*p,v.availableHeight=e.labels.length*l,f=v.leftNotUsableSize+t.scaleTickSizeLeft,m=v.topNotUsableSize+v.availableHeight+t.scaleTickSizeTop,(g=l-2*t.scaleGridLineWidth-2*t.barValueSpacing-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1)>=0&&g<=1&&(g=1),g<0&&g>=-1&&(g=-1),o(),animationLoop(t,s,a,n,v.clrx,v.clry,v.clrwidth,v.clrheight,f+v.availableWidth/2,m-v.availableHeight/2,f,m,e)}else testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},Bar=function(data,config,ctx){function drawBars(e){for(var t,n,i,a=new Array,s=new Array,o=0;o<data.datasets.length;o++)for(var r=0;r<data.datasets[o].data.length;r++)a[r]=0,s[r]=0;for(o=0;o<data.datasets.length;o++)for(r=0;r<data.datasets[o].data.length;r++)"undefined"!=typeof data.datasets[o].data[r]&&(s[r]+=1*data.datasets[o].data[r]);ctx.lineWidth=config.barStrokeWidth;for(o=0;o<data.datasets.length;o++)if("Line"!=data.datasets[o].type){e>=1&&("string"==typeof data.datasets[o].title?lgtxt=data.datasets[o].title.trim():lgtxt="");for(r=0;r<data.datasets[o].data.length;r++){var l=animationCorrection(e,data,config,o,r,1).animVal;l>1&&(l-=1);var c=yAxisPosX+config.barValueSpacing+valueHop*r+barWidth*o+config.barDatasetSpacing*o+config.barStrokeWidth*o,d=l*(calculateOffset(config.logarithmic,1*data.datasets[o].data[r],calculatedScale,scaleHop)-zeroY)+config.barStrokeWidth/2;ctx.fillStyle=config.defaultFillColor,"function"==typeof data.datasets[o].fillColor?ctx.fillStyle=data.datasets[o].fillColor("FILLCOLOR",data,config,o,r,l,1*data.datasets[o].data[r],"Bar",ctx,c,xAxisPosY-zeroY,c+barWidth,xAxisPosY-zeroY-d):"string"==typeof data.datasets[o].fillColor?ctx.fillStyle=data.datasets[o].fillColor:"object"==typeof data.datasets[o].fillColor&&"string"==typeof data.datasets[o].fillColor[0]&&(ctx.fillStyle=data.datasets[o].fillColor[Min([data.datasets[o].fillColor.length-1,r])]),ctx.strokeStyle=config.defaultStrokeColor,"function"==typeof data.datasets[o].strokeColor?ctx.strokeStyle=data.datasets[o].strokeColor("STROKECOLOR",data,config,o,r,CurrentAnimPc,1*data.datasets[o].data[r],"Bar",ctx,c,xAxisPosY-zeroY-d,c+barWidth,xAxisPosY-zeroY):"string"==typeof data.datasets[o].strokeColor?ctx.strokeStyle=data.datasets[o].strokeColor:"object"==typeof data.datasets[o].strokeColor&&"string"==typeof data.datasets[o].strokeColor[0]&&(ctx.strokeStyle=data.datasets[o].strokeColor[Min([data.datasets[o].strokeColor.length-1,r])]),"undefined"!=typeof data.datasets[o].data[r]&&(roundRect(ctx,c,xAxisPosY-zeroY,barWidth,d,config.barShowStroke,config.barBorderRadius),a[r]+=1*data.datasets[o].data[r],e>=1&&("string"==typeof data.labels[r]?lgtxt2=data.labels[r].trim():lgtxt2="",(t=xAxisPosY-zeroY)<(n=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[o].data[r],calculatedScale,scaleHop)+config.barStrokeWidth/2)&&(i=t,t=n,n=i),jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",c,t,c+barWidth,n,lgtxt,lgtxt2,1*data.datasets[o].data[r],a[r],s[r],o,r]))}}else{var u={datasets:[],labels:data.labels};u.datasets.push(data.datasets[o]),lineConfig=mergeChartConfig(config,{datasetFill:data.datasets[o].fill}),drawLinesDataset(1,e,u,lineConfig,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX+config.barValueSpacing+(barWidth+config.barDatasetSpacing/2+config.barStrokeWidth)*nrOfBars/2,valueHop:valueHop,scaleHop:scaleHop,nbValueHop:data.labels.length,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic})}if(e>=1&&config.inGraphDataShow){for(o=0;o<data.datasets.length;o++)for(r=0;r<data.datasets[o].data.length;r++)a[r]=0;for(o=0;o<data.datasets.length;o++){"string"==typeof data.datasets[o].title?lgtxt=data.datasets[o].title.trim():lgtxt="";for(r=0;r<data.datasets[o].data.length;r++)if("Line"!=data.datasets[o].type&&"undefined"!=typeof data.datasets[o].data[r]){"string"==typeof data.labels[r]&&(lgtxt2=data.labels[r].trim()),ctx.save(),ctx.textAlign=config.inGraphDataAlign,ctx.textBaseline=config.inGraphDataVAlign,ctx.font=config.inGraphDataFontStyle+" "+config.inGraphDataFontSize+"px "+config.inGraphDataFontFamily,ctx.fillStyle=config.inGraphDataFontColor;c=yAxisPosX+config.barValueSpacing+valueHop*r+barWidth*o+config.barDatasetSpacing*o+config.barStrokeWidth*o;t=xAxisPosY-zeroY,n=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[o].data[r],calculatedScale,scaleHop)+config.barStrokeWidth/2,ctx.beginPath();var _=0,h=0;1==config.inGraphDataXPosition?h=c+config.inGraphDataPaddingX:2==config.inGraphDataXPosition?h=c+barWidth/2+config.inGraphDataPaddingX:3==config.inGraphDataXPosition&&(h=c+barWidth+config.inGraphDataPaddingX),1==config.inGraphDataYPosition?_=xAxisPosY-zeroY-config.inGraphDataPaddingY:2==config.inGraphDataYPosition?_=xAxisPosY-(calculateOffset(config.logarithmic,1*data.datasets[o].data[r],calculatedScale,scaleHop)+config.barStrokeWidth/2)/2-config.inGraphDataPaddingY:3==config.inGraphDataYPosition&&(_=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[o].data[r],calculatedScale,scaleHop)+config.barStrokeWidth/2-config.inGraphDataPaddingY),ctx.translate(h,_),a[r]+=1*data.datasets[o].data[r];var p=tmplbis(config.inGraphDataTmpl,{config:config,v1:fmtChartJS(config,lgtxt,config.fmtV1),v2:fmtChartJS(config,lgtxt2,config.fmtV2),v3:fmtChartJS(config,1*data.datasets[o].data[r],config.fmtV3),v4:fmtChartJS(config,a[r],config.fmtV4),v5:fmtChartJS(config,s[r],config.fmtV5),v6:roundToWithThousands(config,fmtChartJS(config,100*data.datasets[o].data[r]/s[r],config.fmtV6),config.roundPct),v7:fmtChartJS(config,c,config.fmtV7),v8:fmtChartJS(config,t,config.fmtV8),v9:fmtChartJS(config,c+barWidth,config.fmtV9),v10:fmtChartJS(config,n,config.fmtV10),v11:fmtChartJS(config,o,config.fmtV11),v12:fmtChartJS(config,r,config.fmtV12),data:data});ctx.rotate(config.inGraphDataRotate*(Math.PI/180)),ctx.fillTextMultiLine(p,0,0,ctx.textBaseline,config.inGraphDataFontSize),ctx.restore()}}}if(e>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,barWidth:barWidth}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Bar"),config.dataDivider&&config.dataDividerValueIndex>0){var f=yAxisPosX+valueHop*config.dataDividerValueIndex;context.beginPath(),context.fillText(config.dataDividerLabel,f-10,10),context.lineWidth=2,context.moveTo(f,0),context.strokeStyle=config.dataDividerColor,context.lineTo(f,context.canvas.height-40),context.stroke()}}function roundRect(e,t,n,i,a,s,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n),e.lineTo(t+i,n-a+o),e.quadraticCurveTo(t+i,n-a,t+i-o,n-a),e.lineTo(t+o,n-a),e.quadraticCurveTo(t,n-a,t,n-a+o),e.lineTo(t,n),e.quadraticCurveTo(t,n,t+o,n),s&&e.stroke(),e.closePath(),e.fill()}function drawScale(){ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY),ctx.stroke();for(var e=0;e<data.labels.length;e++)ctx.beginPath(),ctx.moveTo(yAxisPosX+e*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&e>0&&e%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY),ctx.stroke();ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.stroke();for(var t=0;t<calculatedScale.steps;t++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(t+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&t%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(t+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(t+1)*scaleHop),ctx.stroke()}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var e=0;e<data.labels.length;e++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+e*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-msr.rotateLabels*(Math.PI/180)),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var t=config.showYAxisMin?-1:0;t<calculatedScale.steps;t++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)),config.yAxisRight&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[t+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(t+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)))}function getValueBounds(){for(var upperValue=Number.MIN_VALUE,lowerValue=Number.MAX_VALUE,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)}Math.abs(upperValue-lowerValue)<1e-8&&(upperValue=Max([2*upperValue,1]),lowerValue=0),isNaN(config.graphMin)||(lowerValue=config.graphMin),isNaN(config.graphMax)||(upperValue=config.graphMax),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr,offsets=[];if(ctx.tpchart="Bar",setting_new_chart_vars(ctx),dynamicFunction(data,config,ctx)){if(config.responsive&&"undefined"==typeof ctx.firstPass){if(!config.multiGraph)return addResponsiveChart(ctx.ChartNewId,ctx,data,config),void subUpdateChart(ctx,data,config);ctx.firstPass=1}for(var nrOfBars=data.datasets.length,nrOfLines=0,lineDatasets=[],barDatasets=[],i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(nrOfLines++,lineDatasets.push(i)):barDatasets.push(i);for(var bufferDataset,l=0,i=data.datasets.length-1;i>=0;i--)if(lineDatasets.indexOf(i)>=0){l++;for(var b=i;b<data.datasets.length-l;b++)bufferDataset=data.datasets[b+1],data.datasets[b+1]=data.datasets[b],data.datasets[b]=bufferDataset}if(nrOfBars-=nrOfLines,"undefined"==typeof jsGraphAnnotate[ctx.ChartNewId]?jsGraphAnnotate[ctx.ChartNewId]=new Array:config.multiGraph||clearAnnotate(ctx.ChartNewId),defMouse(ctx,data,config),setRect(ctx,config),msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!0,!1,!0,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.maxSteps>0&&valueBounds.minSteps>0){!1!==config.logarithmic&&valueBounds.minValue<=0&&(config.logarithmic=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",config.scaleOverride?(calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth),msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,null,!0,!1,!0,!0,!0,"Bar")):(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString),msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,null,!0,!1,!0,!0,!0,"Bar"));var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,barWidth=(valueHop-2*config.scaleGridLineWidth-2*config.barValueSpacing-(config.barDatasetSpacing*nrOfBars-1)-(config.barStrokeWidth/2*nrOfBars-1))/nrOfBars,barWidth>=0&&barWidth<=1&&(barWidth=1),barWidth<0&&barWidth>=-1&&(barWidth=-1);var zeroY=0;if(valueBounds.minValue<0)var zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop);for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++)offsets[i][j]=calculateOffset(config.logarithmic,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}drawLabels(),animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)}else config.responsive&&"undefined"==typeof ctx.firstPass&&(config.multiGraph||addResponsiveChart(ctx.ChartNewId,ctx,data,config))},HorizontalBar=function(e,t,n){function i(i){for(var s=new Array,o=new Array,r=0;r<e.datasets.length;r++)for(var d=0;d<e.datasets[r].data.length;d++)s[d]=0,o[d]=0;for(r=0;r<e.datasets.length;r++)for(d=0;d<e.datasets[r].data.length;d++)"undefined"!=typeof e.datasets[r].data[d]&&(o[d]+=1*e.datasets[r].data[d]);n.lineWidth=t.barStrokeWidth;for(r=0;r<e.datasets.length;r++){i>=1&&("string"==typeof e.datasets[r].title?lgtxt=e.datasets[r].title.trim():lgtxt="");for(d=0;d<e.datasets[r].data.length;d++){var u=animationCorrection(i,e,t,r,d,1).animVal;u>1&&(u-=1);var _=m+t.barValueSpacing-l*(d+1)+g*r+t.barDatasetSpacing*r+t.barStrokeWidth*r,h=u*(calculateOffset(t.logarithmic,1*e.datasets[r].data[d],c,p)-b)+t.barStrokeWidth/2;n.fillStyle=t.defaultFillColor,"function"==typeof e.datasets[r].fillColor?n.fillStyle=e.datasets[r].fillColor("FILLCOLOR",e,t,r,d,u,1*e.datasets[r].data[d],"HorizontalBar",n,f+b,_,f+b+h,_+g):"string"==typeof e.datasets[r].fillColor?n.fillStyle=e.datasets[r].fillColor:"object"==typeof e.datasets[r].fillColor&&"string"==typeof e.datasets[r].fillColor[0]&&(n.fillStyle=e.datasets[r].fillColor[Min([e.datasets[r].fillColor.length-1,d])]),n.strokeStyle=t.defaultStrokeColor,"function"==typeof e.datasets[r].strokeColor?n.strokeStyle=e.datasets[r].strokeColor("STROKECOLOR",e,t,r,d,u,1*e.datasets[r].data[d],"HorizontalBar",n,f,_,f+h,_+g):"string"==typeof e.datasets[r].strokeColor?n.strokeStyle=e.datasets[r].strokeColor:"object"==typeof e.datasets[r].strokeColor&&"string"==typeof e.datasets[r].strokeColor[0]&&(n.strokeStyle=e.datasets[r].strokeColor[Min([e.datasets[r].strokeColor.length-1,d])]),"undefined"!=typeof e.datasets[r].data[d]&&(a(n,_,f+b,g,h,t.barShowStroke,t.barBorderRadius,0),s[d]+=1*e.datasets[r].data[d],i>=1&&("string"==typeof e.labels[d]?lgtxt2=e.labels[d].trim():lgtxt2="",t1=f+b,t2=f+calculateOffset(t.logarithmic,1*e.datasets[r].data[d],c,p)+t.barStrokeWidth/2,t1>t2&&(t3=t1,t1=t2,t2=t3),jsGraphAnnotate[n.ChartNewId][jsGraphAnnotate[n.ChartNewId].length]=["RECT",t1,_+g,t2,_,lgtxt,lgtxt2,1*e.datasets[r].data[d],s[d],o[d],r,d]))}}if(i>=1&&t.inGraphDataShow){for(r=0;r<e.datasets.length;r++)for(d=0;d<e.datasets[r].data.length;d++)s[d]=0;for(r=0;r<e.datasets.length;r++){"string"==typeof e.datasets[r].title?lgtxt=e.datasets[r].title.trim():lgtxt="";for(d=0;d<e.datasets[r].data.length;d++)if("undefined"!=typeof e.datasets[r].data[d]){"string"==typeof e.labels[d]&&(lgtxt2=e.labels[d].trim()),n.save(),n.textAlign=t.inGraphDataAlign,n.textBaseline=t.inGraphDataVAlign,n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily,n.fillStyle=t.inGraphDataFontColor;_=m+t.barValueSpacing-l*(d+1)+g*r+t.barDatasetSpacing*r+t.barStrokeWidth*r;t1=f+b,t2=f+calculateOffset(t.logarithmic,1*e.datasets[r].data[d],c,p)+t.barStrokeWidth/2,t1>t2&&(t3=t1,t1=t2,t2=t3),n.beginPath();var y=0,w=0;1==t.inGraphDataYPosition?y=_-t.inGraphDataPaddingY+g:2==t.inGraphDataYPosition?y=_+g/2-t.inGraphDataPaddingY:3==t.inGraphDataYPosition&&(y=_-t.inGraphDataPaddingY),1==t.inGraphDataXPosition?w=f+b+t.inGraphDataPaddingX:2==t.inGraphDataXPosition?w=f+(calculateOffset(t.logarithmic,1*e.datasets[r].data[d],c,p)+t.barStrokeWidth/2)/2+t.inGraphDataPaddingX:3==t.inGraphDataXPosition&&(w=f+calculateOffset(t.logarithmic,1*e.datasets[r].data[d],c,p)+t.barStrokeWidth/2+t.inGraphDataPaddingX),n.translate(w,y),s[d]+=1*e.datasets[r].data[d];var x=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[r].data[d],t.fmtV3),v4:fmtChartJS(t,s[d],t.fmtV4),v5:fmtChartJS(t,o[d],t.fmtV5),v6:roundToWithThousands(t,fmtChartJS(t,100*e.datasets[r].data[d]/o[d],t.fmtV6),t.roundPct),v7:fmtChartJS(t,t1,t.fmtV7),v8:fmtChartJS(t,_+g,t.fmtV8),v9:fmtChartJS(t,t2,t.fmtV9),v10:fmtChartJS(t,_,t.fmtV10),v11:fmtChartJS(t,r,t.fmtV11),v12:fmtChartJS(t,d,t.fmtV12),data:e});n.rotate(t.inGraphDataRotate*(Math.PI/180)),n.fillTextMultiLine(x,0,0,n.textBaseline,t.inGraphDataFontSize),n.restore()}}}v.legendMsr.dispLegend&&drawLegend(v.legendMsr,e,t,n,"HorizontalBar")}function a(e,t,n,i,a,s,o,r){e.beginPath(),e.moveTo(n+r,t+o),e.lineTo(n+r,t+i-o),e.quadraticCurveTo(n+r,t+i,n+r,t+i),e.lineTo(n+a-o,t+i),e.quadraticCurveTo(n+a,t+i,n+a,t+i-o),e.lineTo(n+a,t+o),e.quadraticCurveTo(n+a,t,n+a-o,t),e.lineTo(n+r,t),e.quadraticCurveTo(n+r,t,n+r,t+o),s&&e.stroke(),e.closePath(),e.fill()}function s(){n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(f-t.scaleTickSizeLeft,m),n.lineTo(f+v.availableWidth+t.scaleTickSizeRight,m),n.stroke();for(var i=t.showYAxisMin?-1:0;i<c.steps;i++)i>=0&&(n.beginPath(),n.moveTo(f+i*p,m+t.scaleTickSizeBottom),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&i>0&&i%t.scaleXGridLinesStep==0?n.lineTo(f+i*p,m-v.availableHeight-t.scaleTickSizeTop):n.lineTo(f+i*p,m),n.stroke());n.lineWidth=t.scaleLineWidth,n.strokeStyle=t.scaleLineColor,n.beginPath(),n.moveTo(f,m+t.scaleTickSizeBottom),
n.lineTo(f,m-v.availableHeight-t.scaleTickSizeTop),n.stroke();for(var a=0;a<e.labels.length;a++)n.beginPath(),n.moveTo(f-t.scaleTickSizeLeft,m-(a+1)*l),n.lineWidth=t.scaleGridLineWidth,n.strokeStyle=t.scaleGridLineColor,t.scaleShowGridLines&&a%t.scaleYGridLinesStep==0?n.lineTo(f+v.availableWidth+t.scaleTickSizeRight,m-(a+1)*l):n.lineTo(f,m-(a+1)*l),n.stroke()}function o(){if(n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily,t.scaleShowLabels&&(t.xAxisTop||t.xAxisBottom)&&(n.textBaseline="top",v.rotateLabels>90?(n.save(),n.textAlign="left"):v.rotateLabels>0?(n.save(),n.textAlign="right"):n.textAlign="center",n.fillStyle=t.scaleFontColor,t.xAxisBottom))for(var i=t.showYAxisMin?-1:0;i<c.steps;i++)n.save(),v.rotateLabels>0?(n.translate(f+(i+1)*p-v.highestXLabel/2,v.xLabelPos),n.rotate(-v.rotateLabels*(Math.PI/180)),n.fillTextMultiLine(c.labels[i+1],0,0,n.textBaseline,t.scaleFontSize)):n.fillTextMultiLine(c.labels[i+1],f+(i+1)*p,v.xLabelPos,n.textBaseline,t.scaleFontSize),n.restore();n.textAlign="right",n.textBaseline="middle";for(var a=0;a<e.labels.length;a++)t.yAxisLeft&&(n.textAlign="right",n.fillTextMultiLine(fmtChartJS(t,e.labels[a],t.fmtXLabel),f-(t.scaleTickSizeLeft+t.yAxisSpaceRight),m-a*l-l/2,n.textBaseline,t.scaleFontSize)),t.yAxisRight&&(n.textAlign="left",n.fillTextMultiLine(fmtChartJS(t,e.labels[a],t.fmtXLabel),f+v.availableWidth+(t.scaleTickSizeRight+t.yAxisSpaceRight),m-a*l-l/2,n.textBaseline,t.scaleFontSize))}function r(){for(var n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=0;a<e.datasets.length;a++)for(var s=0;s<e.datasets[a].data.length;s++)1*e.datasets[a].data[s]>n&&(n=1*e.datasets[a].data[s]),1*e.datasets[a].data[s]<i&&(i=1*e.datasets[a].data[s]);return Math.abs(n-i)<1e-8&&(n=Max([2*n,1]),i=0),isNaN(t.graphMin)||(i=t.graphMin),isNaN(t.graphMax)||(n=t.graphMax),d=t.scaleFontSize,u=v.availableHeight,{maxValue:n,minValue:i,maxSteps:Math.floor(u/(.66*d)),minSteps:Math.floor(u/d*.5)}}var l,c,d,u,_,h,p,f,m,g,v;if(n.tpchart="HorizontalBar",setting_new_chart_vars(n),dynamicFunction(e,t,n)){if(t.responsive&&"undefined"==typeof n.firstPass){if(!t.multiGraph)return addResponsiveChart(n.ChartNewId,n,e,t),void subUpdateChart(n,e,t);n.firstPass=1}if(t.reverseOrder&&"undefined"==typeof n.reversed&&(n.reversed=!0,e=reverseData(e)),"undefined"==typeof jsGraphAnnotate[n.ChartNewId]?jsGraphAnnotate[n.ChartNewId]=new Array:t.multiGraph||clearAnnotate(n.ChartNewId),defMouse(n,e,t),setRect(n,t),v=setMeasures(e,t,n,height,width,"nihil",[""],!0,!0,!0,!0,!0,"StackedBar"),(_=r()).maxSteps>0&&_.minSteps>0){h=t.scaleShowLabels?t.scaleLabel:"",t.scaleOverride?(c={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]},populateLabels(1,t,h,c.labels,c.steps,t.scaleStartValue,c.graphMax,t.scaleStepWidth),v=setMeasures(e,t,n,height,width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")):(c=calculateScale(1,t,_.maxSteps,_.minSteps,_.maxValue,_.minValue,h),v=setMeasures(e,t,n,height,width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")),v.availableHeight=v.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop,v.availableWidth=v.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight,l=Math.floor(v.availableHeight/e.labels.length),(0==(p=Math.floor(v.availableWidth/c.steps))||t.fullWidthGraph)&&(p=v.availableWidth/c.steps),v.clrwidth=v.clrwidth-(v.availableWidth-c.steps*p),v.availableWidth=c.steps*p,v.availableHeight=e.labels.length*l,f=v.leftNotUsableSize+t.scaleTickSizeLeft,m=v.topNotUsableSize+v.availableHeight+t.scaleTickSizeTop,(g=(l-2*t.scaleGridLineWidth-2*t.barValueSpacing-(t.barDatasetSpacing*e.datasets.length-1)-(t.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length)>=0&&g<=1&&(g=1),g<0&&g>=-1&&(g=-1);var b=0;if(_.minValue<0)b=calculateOffset(t.logarithmic,0,c,p);o(),animationLoop(t,s,i,n,v.clrx,v.clry,v.clrwidth,v.clrheight,f+v.availableWidth/2,m-v.availableHeight/2,f,m,e)}else testRedraw(n,e,t)}else t.responsive&&"undefined"==typeof n.firstPass&&(t.multiGraph||addResponsiveChart(n.ChartNewId,n,e,t))},requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},cache={}};var CompletionMetrics=Backbone.Model.extend({id:null,initialize:function(){},url:function(){var e=null;return this.id&&(e=Routes.user_study_aid_performance_report_path(this.id)),e}}),CompletionMetricsView=Backbone.View.extend({template:SMT["user_performance/completion_metrics"],initialize:function(){_.bindAll(this,"render"),this.listenTo(this.model,"change",this.render)},render_completion_metrics_graph:function(e){var t=this.$el.find("canvas#plot").get(0).getContext("2d");new Chart(t).Pie([{value:e.completed,color:"#c4d564"},{value:e.total-e.completed,color:"#f76161"}],{animationSteps:200,animateScale:!0,animationEasing:"easeOutSine"})},study_aid_type:null,close:function(){this.remove()},render:function(){var e=this.model.get("total"),t="";return e>0?(t="study_aids.user_performance.completion_markers.sub_information_"+this.study_aid_type,this.$el.html(this.template({chart_title:I18n.t("study_aids.user_performance.completion_markers.chart_title"),the_score:I18n.t("study_aids.user_performance.completion_markers.the_score",{score:this.model.get("percentage")}),sub_info:I18n.t(t,{total:e,completed:this.model.get("completed")}),canvas_width:200,canvas_height:200})),this.render_completion_metrics_graph({total:e,completed:this.model.get("completed")})):this.$el.html(I18n.t("study_aids.user_performance.completion_markers.no_results")),this}}),GlobalAttemptsView=Backbone.View.extend({events:{"change #toggle_historic":"toggle_historic_results"},chart_data:null,chart_results:null,template:SMT["user_performance/global_attempts"],plot_width:558,plot_historic_width:690,plot_height:MOBILE.is_mobile()?650:250,resize_chart:function(e){var t=MOBILE.is_mobile()?10:50,n=this.$el.find("#plot"),i=this.$el.find("#plot_historic");MOBILE.is_mobile()?[n,i].forEach(function(e){e.width("100%"),e.height("auto")}):(this.plot_width+t>e.width?(n.width(e.width-t),n.height(this.plot_height*((e.width-t)/this.plot_width))):(n.width(this.plot_width),n.height(this.plot_height)),this.plot_historic_width+t>e.width?(i.width(e.width-t),i.height(this.plot_height*((e.width-t)/this.plot_historic_width))):(i.width(this.plot_historic_width),i.height(this.plot_height)))},toggle_historic_results:function(){var e=$("input#toggle_historic"),t=e.parents("#chart_all_toggle");t.find(".all,.current").hide(),e.is(":checked")?t.find(".all").show():t.find(".current").show(),this.render_cohort_graph()},initialize:function(){_.bindAll(this,"render","render_cohort_graph");var e=this;$(document).on("performance:resize_chart",function(t,n){e.resize_chart.apply(e,[n])}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"error",this.render_error)},close:function(){this.chart_data=null,this.chart_results=null,this.historic_chart_results=null,$(document).off("performance:resize_chart"),this.remove()},render_cohort_graph:function(){var e=[],t=_.uniq(this.chart_data.data),n="undefined"!=typeof t[0]||t.length>1,i=this.$el.find(".scores"),a=0,s=0,o=0,r=$("#toggle_historic").is(":checked")||!n,l="canvas#plot"+(r?"_historic":""),c=this.$el.find(l).get(0),d=c.getContext("2d");this.$el.find("canvas").hide(),r&&!this.historic_chart_results?(this.chart_data.data.filter(Number).length>0?e.push({fillColor:"rgba(151,187,205,1)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:this.chart_data.data,title:I18n.t("study_aids.user_performance.global_attempts.legend_current")}):(this.plot_historic_width=this.plot_width,this.plot_historic_height=this.plot_height,c.width=this.plot_historic_width,c.height=this.plot_historic_height),e.push({fillColor:"rgba(203,223,234,1)",strokeColor:"rgba(203,223,234,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:this.chart_data.data_previous,title:I18n.t("study_aids.user_performance.global_attempts.legend_previous")}),a=this.model.get("all_average_score"),s=this.model.get("all_best_score"),o=this.model.get("all_total_attempts"),this.historic_chart_results=new Chart(d).StackedBar({labels:this.chart_data.labels,datasets:e},this.chart_config())):this.chart_results||(e.push({fillColor:"rgba(151,187,205,1)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:this.chart_data.data}),a=this.model.get("current_average_score"),s=this.model.get("current_best_score"),o=this.model.get("current_total_attempts"),this.chart_results=new Chart(d).StackedBar({labels:this.chart_data.labels,datasets:e},this.chart_config())),$(c).show(),i.find(".average_score").text(a),i.find(".best_score").text(s),i.find(".total_attempts").text(o),$(window).resize()},chart_config:function(){return _.extend({},{xAxisLabel:I18n.t("study_aids.user_performance.global_attempts.x_axis_label"),yAxisLabel:I18n.t("study_aids.user_performance.global_attempts.y_axis_label"),scaleFontFamily:"'OpenSans', sans-serif",xAxisFontFamily:"'OpenSans', sans-serif",yAxisFontFamily:"'OpenSans', sans-serif",xAxisFontSize:14,yAxisFontSize:14,scaleFontSize:11,barValueSpacing:5,barDatasetSpacing:-2,barShowStroke:!1,barStrokeWidth:1,annotateDisplay:!0,annotateFontFamily:"'OpenSans', sans-serif",yAxisMinimumInterval:1,annotateLabel:"<%= v2 + '%: ' + v3 %><% if(v1) { %> (<%= v1 %>) <% } %>",labelsBinLimits:!0,legend:!0,maxLegendCols:1,legendBlockSize:15,legendFillColor:"rgba(255,255,255,0.00)",legendColorIndicatorStrokeWidth:1,legendPosX:4,legendPosY:2,legendBorders:!1,legendSpaceBetweenBoxAndText:6,legendSpaceBetweenTextHorizontal:0,legendSpaceBetweenTextVertical:20,legendFontFamily:"'OpenSans'",legendFontColor:"rgba(0,0,0,1)",legendFontSize:14},MOBILE.is_mobile()?{xAxisFontSize:22,yAxisFontSize:22,legend:!1}:{})},render_error:function(){var e="<div class='global_premium'>";return e+="<div>"+I18n.t("study_aids.user_performance.global_attempts.permissions_error")+"</div><br />",e+="<div>"+I18n.t("study_aids.user_performance.global_attempts.permissions_error_2")+"</div><br />",e+="<div>"+I18n.t("study_aids.user_performance.global_attempts.permissions_error_3")+"</div>",e+="<div><a class='btn upgrade_btn btn-success btn-upgrade'>"+I18n.t("study_aids.user_performance.global_attempts.upgrade")+"</a></div>",e+="</div>",this.$el.html(e),this},render:function(){var e=this.model.get("range_scores").current_version,t=this.model.get("range_scores").previous_version,n=["0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-99","100"],i=[],a=[],s=null,o=Object.keys(e).length>0?e:Object.keys(t).length>0?t:null,r=0,l=0;if(s=o?Object.keys(o):null){_.each(s,function(n){e[n]&&l++,t[n]&&r++,i.push(e[n]),a.push(t[n])});var c="study_aids.user_performance.attempts.",d="study_aids.user_performance.global_attempts.";this.$el.html(this.template({chart_title:I18n.t(c+"chart_title"),score_label_1:I18n.t(c+"average_score"),score_label_2:I18n.t(c+"best_score"),score_label_3:I18n.t(c+"total_attempts"),legend_title:I18n.t(d+"legend"),legend_label_1:I18n.t(d+"legend_current"),legend_label_2:I18n.t(d+"legend_previous"),toggle_historic_current:I18n.t(d+"toggle_historic_current"),toggle_historic_all:I18n.t(d+"toggle_historic_all"),toggle_historic_label:I18n.t(d+"toggle_historic_label"),canvas_width:this.plot_width,canvas_historic_width:this.plot_historic_width,canvas_height:250,show_chart_legend:r>0&&l>0})),this.chart_data={labels:n,data:i,data_previous:a},this.render_cohort_graph()}else this.$el.html("<h3>"+I18n.t("study_aids.user_performance.attempts.no_results")+"</h3>");return MOBILE.is_mobile()&&this.resize_chart({}),this}});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dayjs=t()}(this,function(){"use strict";var e="millisecond",t="second",n="minute",i="hour",a="day",s="week",o="month",r="quarter",l="year",c="date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,u=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},p={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+h(i,2,"0")+":"+h(a,2,"0")},m:function S(e,t){if(e.date()<t.date())return-S(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,o),a=t-i<0,s=e.clone().add(n+(a?-1:1),o);return+(-(n+(t-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(d){return{M:o,y:l,w:s,d:a,D:c,h:i,m:n,s:t,ms:e,Q:r}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},f="en",m={};m[f]=_;var g=function(e){return e instanceof w},v=function(e,t,n){var i;if(!e)return f;if("string"==typeof e)m[e]&&(i=e),t&&(m[e]=t,i=e);else{var a=e.name;m[a]=e,i=a}return!n&&i&&(f=i),i||!n&&f},b=function(e,t){if(g(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},y=p;y.l=v,y.i=g,y.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function _(e){this.$L=this.$L||v(e.locale,null,!0),this.parse(e)}var h=_.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(d);if(i){var a=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return y},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return b(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<b(e)},h.$g=function(e,t,n){return y.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,r){var d=this,u=!!y.u(r)||r,_=y.p(e),h=function(e,t){var n=y.w(d.$u?Date.UTC(d.$y,t,e):new Date(d.$y,t,e),d);return u?n:n.endOf(a)},p=function(e,t){return y.w(d.toDate()[e].apply(d.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),d)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(_){case l:return u?h(1,0):h(31,11);case o:return u?h(1,m):h(0,m+1);case s:var b=this.$locale().weekStart||0,w=(f<b?f+7:f)-b;return h(u?g-w:g+(6-w),m);case a:case c:return p(v+"Hours",0);case i:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case t:return p(v+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(s,r){var d,u=y.p(s),_="set"+(this.$u?"UTC":""),h=(d={},d[a]=_+"Date",d[c]=_+"Date",d[o]=_+"Month",d[l]=_+"FullYear",d[i]=_+"Hours",d[n]=_+"Minutes",d[t]=_+"Seconds",d[e]=_+"Milliseconds",d)[u],p=u===a?this.$D+(r-this.$W):r;if(u===o||u===l){var f=this.clone().set(c,1);f.$d[h](p),f.init(),this.$d=f.set(c,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[y.p(e)]()},h.add=function(e,r){var c,d=this;e=Number(e);var u=y.p(r),_=function(t){var n=b(d);return y.w(n.date(n.date()+Math.round(t*e)),d)};if(u===o)return this.set(o,this.$M+e);if(u===l)return this.set(l,this.$y+e);if(u===a)return _(1);if(u===s)return _(7);var h=(c={},c[n]=6e4,c[i]=36e5,c[t]=1e3,c)[u]||1,p=this.$d.getTime()+e*h;return y.w(p,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=y.z(this),a=this.$locale(),s=this.$H,o=this.$m,r=this.$M,l=a.weekdays,c=a.months,d=function(e,i,a,s){return e&&(e[i]||e(t,n))||a[i].substr(0,s)},_=function(e){return y.s(s%12||12,e,"0")},h=a.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:y.s(r+1,2,"0"),MMM:d(a.monthsShort,r,c,3),MMMM:d(c,r),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:d(a.weekdaysMin,this.$W,l,2),ddd:d(a.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:y.s(s,2,"0"),h:_(1),hh:_(2),a:h(s,o,!0),A:h(s,o,!1),m:String(o),mm:y.s(o,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:i};return n.replace(u,function(e,t){return t||p[e]||i.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,c,d){var u,_=y.p(c),h=b(e),p=6e4*(h.utcOffset()-this.utcOffset()),f=this-h,m=y.m(this,h);return m=(u={},u[l]=m/12,u[o]=m,u[r]=m/3,u[s]=(f-p)/6048e5,u[a]=(f-p)/864e5,u[i]=f/36e5,u[n]=f/6e4,u[t]=f/1e3,u)[_]||f,d?m:y.a(m)},h.daysInMonth=function(){return this.endOf(o).$D},h.$locale=function(){return m[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=v(e,t,!0);return i&&(n.$L=i),n},h.clone=function(){return y.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},_}(),x=w.prototype;return b.prototype=x,[["$ms",e],["$s",t],["$m",n],["$H",i],["$W",a],["$M",o],["$y",l],["$D",c]].forEach(function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),b.extend=function(e,t){return e(t,w,b),b},b.locale=v,b.isDayjs=g,b.unix=function(e){return b(1e3*e)},b.en=m[f],b.Ls=m,b});var UserAttemptsView=Backbone.View.extend({template:SMT["user_performance/user_attempts"],sub_view:SMT["user_performance/single_user_attempt"],plot_width:558,plot_height:250,events:{"click .attempt_popup":"render_attempt_popup"},render_attempt_popup:function(e){e.preventDefault();var t=e.target.closest(".attempt").dataset.id;$(document).trigger("popup_resource",[this.model.id,!1,null,{attempt_id:t}])},resize_chart:function(e){var t=this.$el.find("#plot"),n=50;if(MOBILE.is_mobile())return t.width("100%"),void t.height("auto");this.plot_width+n>e.width?(t.width(e.width-n),t.height(this.plot_height*((e.width-n)/this.plot_width))):(t.width(this.plot_width),t.height(this.plot_height))},initialize:function(){var e=this;$(document).on("performance:resize_chart",function(t,n){e.resize_chart.apply(e,[n])}),_.bindAll(this,"render"),this.listenTo(this.model,"change",this.render)},close:function(){$(document).off("performance:resize_chart"),this.remove()},is_quiz:function(){return"Quiz"===this.model.type},render_attempts_performance_graph:function(e){var t=this.$el.find("#plot").get(0).getContext("2d"),n={labels:e.labels,datasets:[{fillColor:"rgba(59,168,195,0.1)",strokeColor:"#6fcbe1",pointColor:"rgb(59,168,195)",pointStrokeColor:"#fff",data:e.data}]};new Chart(t).Line(n,this.chart_config(e))},chart_config:function(e){return _.extend({},{tt_labels:e.tt_labels,scaleShowGridLines:!0,dataDividerLabel:I18n.t("study_aids.user_performance.attempts.data_label",{date:e.updated_at}),dataDivider:!0,dataDividerValueIndex:e.index_new_v,dataDividerColor:"rgba(150,150,150,1)",dataDividerBackgroundColor:"rgba(150,150,150,0.5)",dataDividerTextColor:"#333",dataDividerFontFamily:"'OpenSans', sans-serif",yAxisLabel:I18n.t("study_aids.user_performance.attempts.y_axis_label"),scaleFontFamily:"'OpenSans', sans-serif",xAxisFontFamily:"'OpenSans', sans-serif",yAxisFontFamily:"'OpenSans', sans-serif",xAxisFontSize:14,yAxisFontSize:14,scaleFontSize:11,annotateDisplay:!0,chartFontFamily:"'OpenSans', sans-serif",annotateFontFamily:"'OpenSans', sans-serif",annotateLabel:"<%= config.tt_labels[i] + ' - ' + v3 + '%'%>",canvas_width:558,canvas_height:250,rotateLabels:0,yAxisMinimumInterval:100,graphMax:100},MOBILE.is_mobile()?{xAxisFontSize:22,yAxisFontSize:22,yAxisMaximumInterval:20}:{},this.is_quiz()?{mouseDownLeft:this.select_attempt.bind(this),mouseMove:_.throttle(this.on_mouse_move.bind(this),200)}:{})},select_attempt:function(e,t,n,i,a){var s=a.v12,o=this.model.attributes.attempts[s];o&&$(document).trigger("popup_resource",[this.model.id,!1,null,{attempt_id:o.id}])},on_mouse_move:function(e,t,n,i,a){a&&a.v12?e.target.style.cursor="pointer":e.target.style.cursor="default"},render:function(){var e=this.model,t=e.get("attempts"),n=$(".show_performance.modal #share_action");if(t.length>0){var i=[],a=[],s=[],o="",r=(I18n.locale.split("-")[0],null);if(_.each(t,function(e,n){i.push(Math.round(e.total_score/e.total_possible*100)),r=dayjs(e.created_at).format(I18n.dayjs_date_format),o=0==n||n==t.length-1?r:"",a.push(o),s.push(r)}),n.show().find(".btn").show(),1==t.length){var l=s[0]+": ";this.$el.html(this.sub_view({attempt_date:l,attempt_score:i[0]+"%",attempt_id:t[0].id,is_quiz:this.is_quiz(),attempt_link_text:I18n.t("study_aids.user_performance.attempts.review")}))}else this.$el.html(this.template({canvas_width:558,canvas_height:250,chart_title:I18n.t("study_aids.user_performance.attempts.chart_title"),average_score:e.get("average_score"),score_label_1:I18n.t("study_aids.user_performance.attempts.average_score")})),this.render_attempts_performance_graph({labels:a,data:i,tt_labels:s,updated_at:dayjs(e.get("updated_at")).format(I18n.dayjs_date_format),index_new_v:e.get("index_new_version"),avg_score:e.get("average_score")})}else this.$el.html("<h3>"+I18n.t("study_aids.user_performance.attempts.no_results")+"</h3>"),n.hide();return MOBILE.is_mobile()&&this.resize_chart({}),this}}),GlobalCohort=Backbone.Model.extend({id:null,initialize:function(){},url:function(){var e=null;return this.id&&(e=Routes.cohort_study_aid_performance_report_path(this.id)),e}}),UserAttemptsReport=Backbone.Model.extend({id:null,initialize:function(){},url:function(){var e=null;return this.id&&(e=Routes.user_study_aid_performance_report_path(this.id)),e}}),AttemptsView=Backbone.View.extend({template:SMT["user_performance/attempts"],sub_view:null,cohort_model:null,initialize:function(){_.bindAll(this,"render","show_user_attempts","show_global_attempts","show_loading_spinner","hide_loading_spinner"),this.render(),$(".show_performance.modal, #performance_results").on("click","#my_attempts",this.show_user_attempts).on("click","#global_attempts",this.show_global_attempts)},show_loading_spinner:function(){this.$el.parents(".tab-pane").find(".loading_spinner").show()},hide_loading_spinner:function(){this.$el.parents(".tab-pane").find(".loading_spinner").hide()},show_user_attempts:function(){var e=this;this.$el.find(".global_attempt_graph").hide(),this.$el.find("#global_attempts").removeClass("active"),this.$el.find("#my_attempts").addClass("active"),this.$el.find(".user_attempt_graph").hasClass("rendered")||(this.show_loading_spinner(),this.user_attempts_model=new UserAttemptsReport,this.user_attempts_model.id=this.model.get("id"),this.user_attempts_model.type=this.model.get("type"),this.user_attempts_model.fetch({reset:!0,complete:e.hide_loading_spinner}),this.sub_view=new UserAttemptsView({model:this.user_attempts_model}),this.$el.find(".user_attempt_graph").html(this.sub_view.$el).addClass("rendered")),$(".show_performance #share_action").show(),this.$el.find(".user_attempt_graph").show()},show_global_attempts:function(){var e=this;this.$el.find(".user_attempt_graph").hide(),this.$el.find("#my_attempts").removeClass("active"),this.$el.find("#global_attempts").addClass("active"),this.$el.find(".global_attempt_graph").hasClass("rendered")||(this.show_loading_spinner(),this.cohort_model=new GlobalCohort,this.cohort_model.id=this.model.get("id"),this.sub_view=new GlobalAttemptsView({model:this.cohort_model}),this.cohort_model.fetch({reset:!0,complete:e.hide_loading_spinner}),this.$el.find(".global_attempt_graph").html(this.sub_view.$el).addClass("rendered")),$(".show_performance #share_action").hide(),this.$el.find(".global_attempt_graph").show()},close:function(){this.remove()},render:function(){return this.$el.html(this.template({user_attempts_nav:I18n.t("study_aids.user_performance.attempts.my_button"),global_attempts_nav:I18n.t("study_aids.user_performance.attempts.global_button"),tooltip_text:I18n.t("study_aids.user_performance.global_attempts.info_tooltip")})),this.$("a.what_is_this").on("click",function(e){e.preventDefault()}).tooltip(),this.show_user_attempts(),this}}),EmbedMetrics=Backbone.Model.extend({id:null,initialize:function(){},url:function(){var e=null;return this.id&&(e=Routes.user_study_aid_performance_report_path(this.id)),e}}),PerformanceView=Backbone.View.extend({subview:null,initialize:function(){var e=this;_.bindAll(this,"render"),PAGE_EVENTS.on("window:resize",function(){e.resize_chart.apply(e)}),this.render()},cm_model:null,resize_chart:function(){var e=$("#performance_results #plot");if(e.length>0){var t=e.closest(".row");$(document).trigger("performance:resize_chart",[{width:t.width(),height:t.height()}])}},render_completion_metrics:function(){return this.cm_model=new CompletionMetrics,this.cm_model.id=this.model.get("id"),this.cm_model.fetch({reset:!0}),new CompletionMetricsView({model:this.cm_model})},render_embed_metrics:function(){return this.nm_model=new EmbedMetrics,this.nm_model.id=this.model.get("id"),this.nm_model.fetch({reset:!0}),new EmbedMetricsView({model:this.nm_model})},close:function(){this.subview&&this.subview.close(),this.remove()},render:function(){var e=this.model.get("study_aid_type");return this.subview="mind_map"==e?this.render_completion_metrics():"note"==e||"slide_set"==e?this.render_embed_metrics():new AttemptsView({model:this.model}),this.subview.study_aid_type=e,this.$el.html(this.subview.$el),this}});$.fn.textWidth=function(e,t){return 0===$("#temptwpc").length&&($.fn.textWidth.fakeEl=$('<span id="temptwpc">').hide().appendTo(document.body)),$.fn.textWidth.fakeEl.text(e||this.val()||this.text()).css("font",t||this.css("font")),$.fn.textWidth.fakeEl.width()};var STUDY_AID_ACTIONS=function(e){return e.get_study_aids_for_context=function(e){var t=[];return e.attr("data-id")?t=[e.attr("data-id")]:"undefined"!=typeof STUDY_AID_LISTING&&(t=STUDY_AID_LISTING.get_selected_study_aids()),t},e.disable_for_loading=function(e){$(this).hasClass("disabled")?e.preventDefault():($(this).addClass("disabled pressed"),$("#moving_loading_icon").show())},e.show_performance_view=function(e,t){$.ajax({url:Routes.get_json_study_aids_path(e),success:function(e){var n=new StudyAid(e);t.html(new PerformanceView({model:n}).$el),t.addClass("rendered")}})},e.view_mode=!1,e.is_view_mode=function(){return e.view_mode||$(".publicmeta").length>0&&!($(".topic_row").length>0)},e.edit_mode=!1,e.is_edit_mode=function(){return e.edit_mode||$("#main_toolbar").length>0},e.is_canonical_mode=function(){return $("#canonical_wrapper").length>0},$(document).on("click touchstart",".actionbutton.disabled",function(e){e.preventDefault()}),$(document).on("click","#cancel_button",function(e){$(this).closest(".modal").modal("hide"),e.preventDefault()}),$(document).on("click","#actions_popover",function(e){e.stopPropagation(),e.preventDefault(),$(".popover.actions_popover").is(":visible")?$(this).popover("hide"):$(this).popover("show")}),$(document).ready(function(){var e={html:!0,content:function(){return $("#actions_popover_content").html()},placement:"bottom",trigger:"manual",template:popover_with_class("actions_popover")};$("#actions_popover").popover(e)}),$(document).on("click","#settings_popover",function(e){e.stopPropagation(),e.preventDefault(),$(".popover.settings_popover").is(":visible")?$(this).popover("hide"):$(this).popover("show")}),$(document).ready(function(){var e={html:!0,content:function(){return $("#settings_popover_content").html()},placement:"bottom",trigger:"manual",template:popover_with_class("settings_popover")};$("#settings_popover").popover(e)}),e}(STUDY_AID_ACTIONS||{}),onClickOrTap=function(e,t){if(t&&"function"==typeof t){var n,i,a,s,o,r=function(e){n=!0,i=e.changedTouches[0].pageX,a=e.changedTouches[0].pageY},l=function(e){s=e.changedTouches[0].pageX-i,o=e.changedTouches[0].pageY-a,Math.abs(s)>=7||Math.abs(o)>=10||t(e)},c=function(e){n?n=!1:t(e)};e.addEventListener("touchstart",r,!1),e.addEventListener("touchend",l,!1),e.addEventListener("click",c,!1)}},FLASH_MESSAGE_HELPER=function(e){return e.build_flash_message=function(e,t,n=!0){var i=document.createElement("div"),a=document.createElement("a");return i.className="alert flash fade in show alert-"+e,a.className="close",a.setAttribute("data-dismiss","alert"),a.textContent="\xd7",i.appendChild(a),n?i.appendChild(document.createTextNode(t)):i.innerHTML+=t,i},e}(FLASH_MESSAGE_HELPER||{}),TEAMS_SSO=function(e){"use strict";function t(){return new Promise(function(e,t){microsoftTeams.authentication.getAuthToken().then(function(t){e(t)})["catch"](function(e){t("Error getting token: "+e)})})}function n(e,t=null){var n=new Promise(function(e){t?e(t):microsoftTeams.app.getContext().then(function(t){e(t.user.tenant.id)})});return new Promise(function(t,i){n.then(function(n){fetch("/ms_teams/sso_session",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},body:JSON.stringify({tenant_id:n,token:e}),mode:"cors",cache:"default",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.error?i(e.error):t(e)})})})}function i(e){return new Promise(function(t,n){microsoftTeams.app.getContext().then(function(i){fetch("/ms_teams/registration",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},body:JSON.stringify({tenant_id:i.user.tenant.id,token:e}),mode:"cors",cache:"default",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.error?n(e.error):t()})})})}var a=function(){var e=document.querySelector(".public_flash_message_container");return e?e.innerHTML="":e=document.body,e};return e.get_client_side_token=function(){return t()},e.get_server_side_token=function(e,t){return n(e,t)},e.init_ms_linking_options=function(){if(document.getElementById("ms_linking_options")){var e=document.getElementById("ms_linking_options"),n=e.querySelector("#link_ms_account"),s=e.querySelector("#skip_link_ms_account"),o=document.getElementById("regular_sign_in"),r=a();onClickOrTap(n,function(e){e.preventDefault(),t().then(function(e){return i(e)}).then(function(){window.location.reload()})["catch"](function(e){r.prepend(FLASH_MESSAGE_HELPER.build_flash_message("danger",e))})}),onClickOrTap(s,function(t){t.preventDefault(),e.classList.remove("slidedown"),e.classList.add("slideup"),o.classList.remove("slideup"),o.classList.add("slidedown")})}},e.authenticate=function(e){var t=e.query_string||{},n=e.flash_container||document.body;microsoftTeams.authentication.authenticate({url:[window.location.origin,"ms_teams","sso_session","new"].join("/")+"?"+t}).then(function(){window.location.reload()})["catch"](function(e){switch(e){case"must_accept_terms":window.location=[window.location.origin,"users","sign_up"].join("/")+"?ms_teams=1&error_key="+e;break;case"email_in_use":window.location=window.location.origin+"/users/sign_in?ms_teams=1&manual=1&error="+e;break;default:var t=I18n.t("ms_teams.sso.failure_messages."+e),i=FLASH_MESSAGE_HELPER.build_flash_message("danger",t);n.prepend(i)}})},e.decorate_hrefs_for_auth=function(e,t=!1){var n=null;return new Promise(function(e){microsoftTeams.app.getContext().then(function(t){n=t.user.tenant.id,e(TEAMS_SSO.get_client_side_token())})}).then(function(i){var a=[];return e.forEach(function(e){var s=e.split("?")[0],o=params_from_url(e);t&&(delete o.ms_teams,o.from_ms_teams=!0),o.token=i,o.tenant_id=n,a.push([s,params_to_url(o)].join("?"))}),a})},e.init=function(e={}){var i=a(),s=document.getElementById("et_loading_spinner"),o=e.success_callback||function(){window.location.reload()};s.style.display="block",t().then(function(e){return n(e)}).then(function(){s.style.display="none",o()})["catch"](function(e){switch(s.style.display="none",e){case"no_user":window.location=window.location.origin+"/users/sign_up?ms_teams=1&manual=1&error="+e;break;case"invalid_grant":TEAMS_SSO.authenticate({
query_string:"provider=microsoft",flash_container:i});break;case"email_in_use":window.location=window.location.origin+"/users/sign_in?ms_teams=1&manual=1&error="+e;break;default:i.prepend(FLASH_MESSAGE_HELPER.build_flash_message("danger",e))}})},e}(TEAMS_SSO||{}),MS_TEAMS=function(e){e.is_teams_frame=function(e=window.location.href){return"1"===params_from_url(e).ms_teams||e.match(/\/ms_teams\//)};var t=function(){document.querySelectorAll("a:not(.ms_teams_external):not(.no_ms_teams_decorate)[href]").forEach(function(e){var t=e.getAttribute("href"),n=t.split("?")[0],i=params_from_url(t);t.match(/^#/)||(i.ms_teams="1",e.setAttribute("href",[n,params_to_url(i)].join("?")))})},n=function(){document.querySelectorAll("form:not(.ms_teams_external)").forEach(function(e){if(!e.closest(".create_popover")){var t=document.createElement("input");t.type="hidden",t.name="ms_teams",t.value="1",e.appendChild(t)}})},i=function(){microsoftTeams.app.getContext().then(function(t){["android","ios"].includes(t.app.host.clientType)?document.querySelectorAll(".internal-teams-share").forEach(function(e){e.style.display="none"}):document.querySelectorAll(".internal-teams-share").forEach(function(t){onClickOrTap(t,function(n){n.preventDefault(),e.trigger_share_button(t)})})})},a=function(){microsoftTeams.monetization.openPurchaseExperience(function(e){e&&"string"!=typeof e&&alert(JSON.stringify(e))})};e.init=function(){MS_TEAMS.is_teams_frame()&&"undefined"!=typeof microsoftTeams&&(microsoftTeams.app.initialize(),t(),n(),i())},e.trigger_share_button=function(e){microsoftTeams.sharing.shareWebContent({content:[{type:e.dataset.type,url:e.dataset.url,message:e.dataset.message,preview:"true"==e.dataset.preview}]})},e.subscription_prompt_or_alert=function(e){microsoftTeams.app.getContext().then(function(t){var n;["android","ios"].includes(t.app.host.clientType)?MS_TEAMS.alert_external_link(e):MS_TEAMS.subscription_prompt((n=e,function(){MS_TEAMS.alert_external_link(n)}))})},e.request_audio_recording=function(){if("undefined"!=typeof microsoftTeams)return new Promise(function(e,t){microsoftTeams.media.selectMedia({maxMediaCount:1,mediaType:microsoftTeams.media.MediaType.Audio},function(n,i){return n?t(n):e(i[0])})})},e.alert_external_link=function(e){MS_TEAMS.is_teams_frame()&&($(".modal").modal("hide"),MODAL.confirm_modal(I18n.t("ms_teams.external_link_modal.title"),I18n.t("ms_teams.external_link_modal.message"),function(){window.open(e)}))};var s=function(e){microsoftTeams.app.getContext().then(function(t){var n=SMT["ms_teams/subscription_prompt_modal"]({header:I18n.t("ms_teams.upgrade_link_modal.title"),text:I18n.t("ms_teams.upgrade_link_modal.message"),subscribe_cta:I18n.t("ms_teams.upgrade_link_modal.subscribe.cta"),cancel_text:I18n.t("ms_teams.upgrade_link_modal.cancel_text")}),i=MODAL.create_mustache_modal("confirm_modal",n,["xs_modal"]),s=CURRENT_USER.email,o=t.user.userPrincipalName;if(s!==o){var r=document.createElement("div"),l=document.querySelector(".confirm_modal .modal-body");r.classList.add("alert","alert-warning"),r.innerHTML=I18n.t("ms_teams.upgrade_link_modal.user_mismatch_error",{goconqr_account:s,microsoft_account:o}),l.insertBefore(r,l.firstChild)}i.on("click",".btn-success",a),i.on("click",".btn-cancel",e),track_event("ms_teams","subscription_popup_revealed")})};return e.subscription_prompt=function(e){MS_TEAMS.is_teams_frame()&&"undefined"!=typeof microsoftTeams&&($(".modal").modal("hide"),s(e))},e}(MS_TEAMS||{});document.addEventListener("DOMContentLoaded",MS_TEAMS.init);var SHARING=function(e){var t=[],n=[],i={},a=function(){t=$.trim($("#friend_share").val()).split(","),n=$.trim($("#group_share").val()).split(","),i={}},s=function(){$("#share_box_status_messages").removeClass("success").addClass("errored alert alert-danger"),$("#share_box_status_messages").html(I18n.t("sharebox.errored"))},o=function(){$("#share_box_status_messages").removeClass("errored alert alert-danger").addClass("success"),hide_popup(),$.jGrowl(I18n.t("sharebox.success"))},r=function(e,t,n){i[e+"_unshare_list"]=t,i[e+"_share_list"]=n,i.custom_share_message=$("#friend_share_message").val(),$(".modal #"+e+"_share_btn").addClass("disabled");var a=JSON.stringify(i),r=$("#study_aids").val();void 0!==a&&a.length>0&&$.ajax({type:"POST",data:{update_data:a,study_aids:r},url:Routes["share_with_"+e+"s_public_path"](),success:function(){i.group_unshare_list&&$(document).trigger("study_aids:unshare_group_from_modal",[i.group_unshare_list,r.split(" ")]),o()},error:s,dataType:"html"})},l=function(e){a(),e?(SHARING.show_only_tabs(e),_.contains(e,"social")&&SHARING.init_embeds()):SHARING.init_embeds(),MS_TEAMS.is_teams_frame()||shareToMicrosoftTeams.renderButtons(),SHARING.init_performance_sharing(),SHARING.init_friend_and_group_sharing()};return e.share_study_aid=function(e,t){if(e.length>0){var n="/p/share_popup?study_aids="+e.join(",");CURRENT_USER||(n="/"+I18n.locale+n),MODAL.create_with_callback("share_asset_modal",n,["small_modal"],function(){l(t)}),$('[data-toggle="dropdown"]').parent().removeClass("open")}},e.share_study_aid_with_friends=function(t,n,i){var a;t.preventDefault(),i&&(a=["friends","groups"]),e.share_study_aid(n,a)},e.share_study_aid_with_groups=function(t,n,i){var a;i&&(a=["friends","groups"]),e.share_study_aid(n,a)},$(document).on("study_aids:share_friends",e.share_study_aid_with_friends),$(document).on("study_aids:share_groups",e.share_study_aid_with_groups),$(document).on("click",".share-asset-with-friends",function(t){e.share_study_aid_with_friends(t,[$(this).data("id")])}),$(document).on("share:friends",function(e,n){var i=_(t).difference(n);r("friend",i,t=n)}),$(document).on("share:groups",function(e,t){var i=_(n).difference(t);r("group",i,n=t)}),$(document).on("hidden.bs.modal",".share_asset_modal",function(){$(document).off("click",".share_asset_modal #share_btn")}),$(document).on("shown.bs.modal",".share_asset_modal",function(){$(".loading_modal").modal("hide")}),$(document).on("share_modal_content_loaded",function(){(void 0===STUDY_AID_ACTIONS||STUDY_AID_ACTIONS.is_view_mode()||STUDY_AID_ACTIONS.is_edit_mode()||STUDY_AID_ACTIONS.is_canonical_mode()||MOBILE.is_mobile())&&$(".share_asset_modal .num_of_resources").css("visibility","hidden")}),e}(SHARING||{}),SHARING=function(e){return $(function(){e.embed_template=SMT["study_aids/embed"],e.embed_popup_template=SMT["study_aids/embed_popup"]}),e}(SHARING||{});String.prototype.toUnderscore=function(){return this.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()}).replace(/^_+/,"")},String.prototype.fromUnderscoreToCamel=function(){return this.replace(/(_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})},String.prototype.capitaliseFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.fromUnderscoreToUpperCamel=function(){return this.fromUnderscoreToCamel().capitaliseFirstLetter()},String.prototype.constantize=function(){return this.match(/[A-Z][A-z]*/)?(eval("var that = "+this),that):void 0},
/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.1.2
 */
function(e,t){"use strict";var n,i,a=e,s=a.document,o=a.navigator,r=a.setTimeout,l=a.encodeURIComponent,c=a.ActiveXObject,d=a.Number.parseInt||a.parseInt,u=a.Number.parseFloat||a.parseFloat,_=a.Number.isNaN||a.isNaN,h=a.Math.round,p=a.Date.now,f=a.Object.keys,m=a.Object.defineProperty,g=a.Object.prototype.hasOwnProperty,v=a.Array.prototype.slice,b=function(e){return v.call(e,0)},y=function(){var e,n,i,a,s,o=b(arguments),r=o[0]||{};for(e=1,n=o.length;e<n;e++)if(null!=(i=o[e]))for(a in i)g.call(i,a)&&(r[a],r!==(s=i[a])&&s!==t&&(r[a]=s));return r},w=function(e){var t,n,i,a;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;n<i;n++)g.call(e,n)&&(t[n]=w(e[n]));else for(a in t={},e)g.call(e,a)&&(t[a]=w(e[a]));return t},x=function(e,t){for(var n={},i=0,a=t.length;i<a;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},S=function(e,t){var n={};for(var i in e)-1===t.indexOf(i)&&(n[i]=e[i]);return n},T=function(e){if(e)for(var t in e)g.call(e,t)&&delete e[t];return e},M=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},C={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},k="11.0.0",E={},A={},I=null,D={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},P={swfPath:function(){var e,t,n,i,a="ZeroClipboard.swf";if(!s.currentScript||!(i=s.currentScript.src)){var o=s.getElementsByTagName("script");if("readyState"in o[0])for(e=o.length;e--&&("interactive"!==o[e].readyState||!(i=o[e].src)););else if("loading"===s.readyState)i=o[o.length-1].src;else{for(e=o.length;e--;){if(!(n=o[e].src)){t=null;break}if(n=(n=n.split("#")[0].split("?")[0]).slice(0,n.lastIndexOf("/")+1),null==t)t=n;else if(t!==n){t=null;break}}null!==t&&(i=t)}}return i&&(a=(i=i.split("#")[0].split("?")[0]).slice(0,i.lastIndexOf("/")+1)+a),a}(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},R=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(g.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))P[t]=e[t];else if(null==C.bridge)if("containerId"===t||"swfObjectId"===t){if(!Y(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");P[t]=e[t]}else P[t]=e[t];return"string"==typeof e&&e?g.call(P,e)?P[e]:void 0:w(P)},$=function(){return{browser:x(o,["userAgent","platform","appName"]),flash:S(C,["bridge"]),zeroclipboard:{version:xe.version,config:xe.config()}}},O=function(){return!!(C.disabled||C.outdated||C.unavailable||C.deactivated)},z=function(e,t){var n,i,a,s={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&xe.on(n,e[n]);if(a&&a.length){for(n=0,i=a.length;n<i;n++)s[e=a[n].replace(/^on/,"")]=!0,E[e]||(E[e]=[]),E[e].push(t);if(s.ready&&C.ready&&xe.emit({type:"ready"}),s.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=o.length;n<i;n++)if(!0===C[o[n]]){xe.emit({type:"error",name:"flash-"+o[n]});break}}}return xe},N=function(e,t){var n,i,a,s,o;if(0===arguments.length)s=f(E);else if("string"==typeof e&&e)s=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&xe.off(n,e[n]);if(s&&s.length)for(n=0,i=s.length;n<i;n++)if(e=s[n].toLowerCase().replace(/^on/,""),(o=E[e])&&o.length)if(t)for(a=o.indexOf(t);-1!==a;)o.splice(a,1),a=o.indexOf(t,a);else o.length=0;return xe},j=function(e){return"string"==typeof e&&e?w(E[e])||null:w(E)},L=function(e){var t,n,i;if((e=X(e))&&!te(e))return"ready"===e.type&&!0===C.overdue?xe.emit({type:"error",name:"flash-overdue"}):(t=y({},e),ee.call(this,t),"copy"===e.type&&(n=(i=re(A)).data,I=i.formatMap),n)},B=function(){if("boolean"!=typeof C.ready&&(C.ready=!1),!xe.isFlashUnusable()&&null===C.bridge){var e=P.flashLoadTimeout;"number"==typeof e&&e>=0&&r(function(){"boolean"!=typeof C.deactivated&&(C.deactivated=!0),!0===C.deactivated&&xe.emit({type:"error",name:"flash-deactivated"})},e),C.overdue=!1,se()}},F=function(){xe.clearData(),xe.blur(),xe.emit("destroy"),oe(),xe.off()},q=function(e,t){var n;if("object"==typeof e&&e&&void 0===t)n=e,xe.clearData();else{if("string"!=typeof e||!e)return;(n={})[e]=t}for(var i in n)"string"==typeof i&&i&&g.call(n,i)&&"string"==typeof n[i]&&n[i]&&(A[i]=n[i])},H=function(e){void 0===e?(T(A),I=null):"string"==typeof e&&g.call(A,e)&&delete A[e]},V=function(e){return void 0===e?w(A):"string"==typeof e&&g.call(A,e)?A[e]:void 0},G=function(e){if(e&&1===e.nodeType){n&&(fe(n,P.activeClass),n!==e&&fe(n,P.hoverClass)),n=e,pe(e,P.hoverClass);var t=e.getAttribute("title")||P.title;if("string"==typeof t&&t){var i=ae(C.bridge);i&&i.setAttribute("title",t)}var a=!0===P.forceHandCursor||"pointer"===me(e,"cursor");ye(a),be()}},U=function(){var e=ae(C.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),n&&(fe(n,P.hoverClass),fe(n,P.activeClass),n=null)},W=function(){return n||null},Y=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},X=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){y(e,{type:t.toLowerCase(),target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:C&&C.bridge||null,timeStamp:e.timeStamp||p()||null});var i=D[e.type];return"error"===e.type&&e.name&&i&&(i=i[e.name]),i&&(e.message=i),"ready"===e.type&&y(e,{target:null,version:C.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&y(e,{target:null,minimumVersion:k}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&y(e,{version:C.version})),"copy"===e.type&&(e.clipboardData={setData:xe.setData,clearData:xe.clearData}),"aftercopy"===e.type&&(e=le(e,I)),e.target&&!e.relatedTarget&&(e.relatedTarget=J(e.target)),e=Q(e)}},J=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?s.getElementById(t):null},Q=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,o="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,r=ve(n),l=a.screenLeft||a.screenX||0,c=a.screenTop||a.screenY||0,d=s.body.scrollLeft+s.documentElement.scrollLeft,u=s.body.scrollTop+s.documentElement.scrollTop,_=r.left+("number"==typeof e._stageX?e._stageX:0),h=r.top+("number"==typeof e._stageY?e._stageY:0),p=_-d,f=h-u,m=l+p,g=c+f,v="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,y(e,{srcElement:n,fromElement:i,toElement:o,screenX:m,screenY:g,pageX:_,pageY:h,clientX:p,clientY:f,x:p,y:f,movementX:v,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},K=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},Z=function(e,t,n,i){i?r(function(){e.apply(t,n)},0):e.apply(t,n)},ee=function(e){if("object"==typeof e&&e&&e.type){var t=K(e),n=E["*"]||[],i=E[e.type]||[],s=n.concat(i);if(s&&s.length){var o,r,l,c,d,u=this;for(o=0,r=s.length;o<r;o++)c=u,"string"==typeof(l=s[o])&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(d=y({},e),Z(l,c,[d],t))}return this}},te=function(e){var t=e.target||n||null,i="swf"===e._source;delete e._source;var a=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(e.type){case"error":-1!==a.indexOf(e.name)&&y(C,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var s=!0===C.deactivated;y(C,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:s,ready:!s});break;case"copy":var o,r,l=e.relatedTarget;!A["text/html"]&&!A["text/plain"]&&l&&(r=l.value||l.outerHTML||l.innerHTML)&&(o=l.value||l.textContent||l.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o),r!==o&&e.clipboardData.setData("text/html",r)):!A["text/plain"]&&e.target&&(o=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o));break;case"aftercopy":xe.clearData(),t&&t!==he()&&t.focus&&t.focus();break;case"_mouseover":xe.focus(t),!0===P.bubbleEvents&&i&&(t&&t!==e.relatedTarget&&!M(e.relatedTarget,t)&&ne(y({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),ne(y({},e,{type:"mouseover"})));break;case"_mouseout":xe.blur(),!0===P.bubbleEvents&&i&&(t&&t!==e.relatedTarget&&!M(e.relatedTarget,t)&&ne(y({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),ne(y({},e,{type:"mouseout"})));break;case"_mousedown":pe(t,P.activeClass),!0===P.bubbleEvents&&i&&ne(y({},e,{type:e.type.slice(1)}));break;case"_mouseup":fe(t,P.activeClass),!0===P.bubbleEvents&&i&&ne(y({},e,{type:e.type.slice(1)}));break;case"_click":case"_mousemove":!0===P.bubbleEvents&&i&&ne(y({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},ne=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||s,o={view:i.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},r=y(o,e);n&&i.createEvent&&n.dispatchEvent&&(r=[r.type,r.canBubble,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget],(t=i.createEvent("MouseEvents")).initMouseEvent&&(t.initMouseEvent.apply(t,r),t._source="js",n.dispatchEvent(t)))}},ie=function(){var e=s.createElement("div");return e.id=P.containerId,e.className=P.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+we(P.zIndex),e},ae=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},se=function(){var e,t=C.bridge,n=ae(t);if(!t){var i=_e(a.location.host,P),o="never"===i?"none":"all",r=de(P),l=P.swfPath+ce(P.swfPath,P);n=ie();var c=s.createElement("div");n.appendChild(c),s.body.appendChild(n);var d=s.createElement("div"),u="activex"===C.pluginType;d.innerHTML='<object id="'+P.swfObjectId+'" name="'+P.swfObjectId+'" width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+r+'"/></object>',t=d.firstChild,d=null,t.ZeroClipboard=xe,n.replaceChild(t,c)}return t||((t=s[P.swfObjectId])&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),C.bridge=t||null,t},oe=function(){var e=C.bridge;if(e){var t=ae(e);t&&("activex"===C.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else r(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),C.ready=null,C.bridge=null,C.deactivated=null}},re=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&g.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},le=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(g.call(e,i)){if("success"!==i&&"data"!==i){n[i]=e[i];continue}n[i]={};var a=e[i];for(var s in a)s&&g.call(a,s)&&g.call(t,s)&&(n[i][t[s]]=a[s])}return n},ce=function(e,t){return null==t||t&&!0===t.cacheBust?(-1===e.indexOf("?")?"?":"&")+"noCache="+p():""},de=function(e){var t,n,i,s,o="",r=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?s=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(s=e.trustedDomains)),s&&s.length)for(t=0,n=s.length;t<n;t++)if(g.call(s,t)&&s[t]&&"string"==typeof s[t]){if(!(i=ue(s[t])))continue;if("*"===i){r.length=0,r.push(i);break}r.push.apply(r,[i,"//"+i,a.location.protocol+"//"+i])}return r.length&&(o+="trustedOrigins="+l(r.join(","))),!0===e.forceEnhancedClipboard&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+l(e.swfObjectId)),o},ue=function(e){if(null==e||""===e)return null;if(""===(e=e.replace(/^\s+|\s+$/g,"")))return null;var t=e.indexOf("//"),n=(e=-1===t?e:e.slice(t+2)).indexOf("/");return(e=-1===n?e:-1===t||0===n?null:e.slice(0,n))&&".swf"===e.slice(-4).toLowerCase()?null:e||null},_e=(i=function(e){var t,n,i,a=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return a;for(t=0,n=e.length;t<n;t++)if(g.call(e,t)&&(i=ue(e[t]))){if("*"===i){a.length=0,a.push("*");break}-1===a.indexOf(i)&&a.push(i)}return a},function(e,t){var n=ue(t.swfPath);null===n&&(n=e);var a=i(t.trustedDomains),s=a.length;if(s>0){if(1===s&&"*"===a[0])return"always";if(-1!==a.indexOf(e))return 1===s&&e===n?"sameDomain":"always"}return"never"}),he=function(){try{return s.activeElement}catch(e){return null}},pe=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var i=" "+e.className+" ",a=e.className,s=0,o=n.length;s<o;s++)i.indexOf(" "+n[s]+" ")<0&&(a+=" "+n[s]);e.className=a.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},fe=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var i=(" "+e.className+" ").replace(/[\n\t]/g," "),a=0,s=n.length;a<s;a++)i=i.replace(" "+n[a]+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}}return e},me=function(e,t){var n=a.getComputedStyle(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},ge=function(){var e,t,n,i=1;return"function"==typeof s.body.getBoundingClientRect&&(t=(e=s.body.getBoundingClientRect()).right-e.left,n=s.body.offsetWidth,i=h(t/n*100)/100),i},ve=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,i,o,r=e.getBoundingClientRect();"pageXOffset"in a&&"pageYOffset"in a?(n=a.pageXOffset,i=a.pageYOffset):(o=ge(),n=h(s.documentElement.scrollLeft/o),i=h(s.documentElement.scrollTop/o));var l=s.documentElement.clientLeft||0,c=s.documentElement.clientTop||0;t.left=r.left+n-l,t.top=r.top+i-c,t.width="width"in r?r.width:r.right-r.left,t.height="height"in r?r.height:r.bottom-r.top}return t},be=function(){var e;if(n&&(e=ae(C.bridge))){var t=ve(n);y(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+we(P.zIndex)})}},ye=function(e){!0===C.ready&&(C.bridge&&"function"==typeof C.bridge.setHandCursor?C.bridge.setHandCursor(e):C.ready=!1)},we=function(e){return/^(?:auto|inherit)$/.test(e)?e:("number"!=typeof e||_(e)?"string"==typeof e&&(t=we(d(e,10))):t=e,"number"==typeof t?t:"auto");var t};(function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function i(e){e&&(r=!0,e.version&&(d=t(e.version)),!d&&e.description&&(d=t(e.description)),e.filename&&(c=n(e.filename)))}var a,s,r=!1,l=!1,c=!1,d="";if(o.plugins&&o.plugins.length)i(o.plugins["Shockwave Flash"]),o.plugins["Shockwave Flash 2.0"]&&(r=!0,d="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)i((s=o.mimeTypes["application/x-shockwave-flash"])&&s.enabledPlugin);else if(void 0!==e){l=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),r=!0,d=t(a.GetVariable("$version"))}catch(_){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),r=!0,d="6.0.21"}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash"),r=!0,d=t(a.GetVariable("$version"))}catch(p){l=!1}}}}C.disabled=!0!==r,C.outdated=d&&u(d)<u(k),C.version=d||"0.0.0",C.pluginType=c?"pepper":l?"activex":r?"netscape":"unknown"})(c);var xe=function(){if(!(this instanceof xe))return new xe;"function"==typeof xe._createClient&&xe._createClient.apply(this,b(arguments))};m(xe,"version",{value:"2.1.2",writable:!1,configurable:!0,enumerable:!0}),xe.config=function(){return R.apply(this,b(arguments))},xe.state=function(){return $.apply(this,b(arguments))},xe.isFlashUnusable=function(){return O.apply(this,b(arguments))},xe.on=function(){return z.apply(this,b(arguments))},xe.off=function(){return N.apply(this,b(arguments))},xe.handlers=function(){return j.apply(this,b(arguments))},xe.emit=function(){return L.apply(this,b(arguments))},xe.create=function(){return B.apply(this,b(arguments))},xe.destroy=function(){return F.apply(this,b(arguments))},xe.setData=function(){return q.apply(this,b(arguments))},xe.clearData=function(){return H.apply(this,b(arguments))},xe.getData=function(){return V.apply(this,b(arguments))},xe.focus=xe.activate=function(){return G.apply(this,b(arguments))},xe.blur=xe.deactivate=function(){return U.apply(this,b(arguments))},xe.activeElement=function(){return W.apply(this,b(arguments))};var Se=0,Te={},Me=0,Ce={},ke={};y(P,{autoActivate:!0});var Ee=function(e){var t=this;t.id=""+Se++,Te[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),xe.on("*",function(e){return t.emit(e)}),xe.on("destroy",function(){t.destroy()}),xe.create()},Ae=function(e,t){var n,i,a,s={},o=Te[this.id]&&Te[this.id].handlers;if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(a&&a.length){for(n=0,i=a.length;n<i;n++)s[e=a[n].replace(/^on/,"")]=!0,o[e]||(o[e]=[]),o[e].push(t);if(s.ready&&C.ready&&this.emit({type:"ready",client:this}),s.error){var r=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=r.length;n<i;n++)if(C[r[n]]){this.emit({type:"error",name:"flash-"+r[n],client:this});break}}}return this},Ie=function(e,t){var n,i,a,s,o,r=Te[this.id]&&Te[this.id].handlers;if(0===arguments.length)s=f(r);else if("string"==typeof e&&e)s=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(s&&s.length)for(n=0,i=s.length;n<i;n++)if((o=r[e=s[n].toLowerCase().replace(/^on/,"")])&&o.length)if(t)for(a=o.indexOf(t);-1!==a;)o.splice(a,1),a=o.indexOf(t,a);else o.length=0;return this},De=function(e){var t=null,n=Te[this.id]&&Te[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:w(n)),t},Pe=function(e){if(Ne.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=y({},e));var t=y({},X(e),{client:this});je.call(this,t)}return this},Re=function(e){e=Le(e);for(var t=0;t<e.length;t++)if(g.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Ce[e[t].zcClippingId].indexOf(this.id)&&Ce[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Me++,Ce[e[t].zcClippingId]=[this.id],!0===P.autoActivate&&Be(e[t]));var n=Te[this.id]&&Te[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},$e=function(e){var t=Te[this.id];if(!t)return this;for(var n,i=t.elements,a=(e=void 0===e?i.slice(0):Le(e)).length;a--;)if(g.call(e,a)&&e[a]&&1===e[a].nodeType){for(n=0;-1!==(n=i.indexOf(e[a],n));)i.splice(n,1);var s=Ce[e[a].zcClippingId];if(s){for(n=0;-1!==(n=s.indexOf(this.id,n));)s.splice(n,1);0===s.length&&(!0===P.autoActivate&&Fe(e[a]),delete e[a].zcClippingId)}}return this},Oe=function(){var e=Te[this.id];return e&&e.elements?e.elements.slice(0):[]},ze=function(){this.unclip(),this.off(),delete Te[this.id]},Ne=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Te[this.id]&&Te[this.id].elements,n=!!t&&t.length>0,i=!e.target||n&&-1!==t.indexOf(e.target),a=e.relatedTarget&&n&&-1!==t.indexOf(e.relatedTarget),s=e.client&&e.client===this;return!!(i||a||s)},je=function(e){if("object"==typeof e&&e&&e.type){var t=K(e),n=Te[this.id]&&Te[this.id].handlers["*"]||[],i=Te[this.id]&&Te[this.id].handlers[e.type]||[],s=n.concat(i);if(s&&s.length){var o,r,l,c,d,u=this;for(o=0,r=s.length;o<r;o++)c=u,"string"==typeof(l=s[o])&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(d=y({},e),Z(l,c,[d],t))}return this}},Le=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},Be=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=a.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&&(t(n),xe.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),ke[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},Fe=function(e){if(e&&1===e.nodeType){var t=ke[e.zcClippingId];if("object"==typeof t&&t){for(var n,i,a=["move","leave","enter","out","over"],s=0,o=a.length;s<o;s++)"function"==typeof(i=t[n="mouse"+a[s]])&&e.removeEventListener(n,i,!1);delete ke[e.zcClippingId]}}};xe._createClient=function(){Ee.apply(this,b(arguments))},xe.prototype.on=function(){return Ae.apply(this,b(arguments))},xe.prototype.off=function(){return Ie.apply(this,b(arguments))},xe.prototype.handlers=function(){return De.apply(this,b(arguments))},xe.prototype.emit=function(){return Pe.apply(this,b(arguments))},xe.prototype.clip=function(){return Re.apply(this,b(arguments))},xe.prototype.unclip=function(){return $e.apply(this,b(arguments))},xe.prototype.elements=function(){return Oe.apply(this,b(arguments))},xe.prototype.destroy=function(){return ze.apply(this,b(arguments))},xe.prototype.setText=function(e){return xe.setData("text/plain",e),this},xe.prototype.setHtml=function(e){return xe.setData("text/html",e),this},xe.prototype.setRichText=function(e){return xe.setData("application/rtf",e),this},xe.prototype.setData=function(){return xe.setData.apply(this,b(arguments)),this},xe.prototype.clearData=function(){return xe.clearData.apply(this,b(arguments)),this},xe.prototype.getData=function(){return xe.getData.apply(this,b(arguments))},"function"==typeof define&&define.amd?define(function(){return xe}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=xe:e.ZeroClipboard=xe}(function(){return this||window}()),ZeroClipboard.config({swfPath:"https://cdn.goconqr.com/assets/ZeroClipboard-ba9e98951a918f6e37b0ff8564cee208199f4f83b8ada60d007a25f10c8c5bca.swf"});var ZERO_CLIPBOARD=function(e){return e.init=function(e){var t=new ZeroClipboard(e);if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined)return t},e}(ZERO_CLIPBOARD||{}),SHARING=function(e){var t=function(){var t=$("#share_root_url").val(),n=$("#examtime_share_panel").children().hasClass("selected_too_many");if(null!==t&&!0!==n){var i=e.embed($("#examtime_share_info"),t),a=e.embed_popup($("#examtime_share_info"),t),s=e.url($("#examtime_share_info"),t);$('input[name="share_code_embed"]').val(i),$('input[name="share_code_embed_popup"]').val(a),$('input[name="share_code_url"]').val(s)}},n=function(){var e=$("#copy_embed_button, #copy_link_button, #copy_embed_popup_button");ZERO_CLIPBOARD.init(e)||(e.remove(),$(".share_embed .input-group").addClass("no_zc_width"))},i=function(e){return I18n.t("feature_pages."+e)},a=function(e){return"production"===RAILS_ENV?e=e.replace("https://www.","https://cdn."):"development"!==RAILS_ENV&&(e=e.replace("https://","https://cdn-")),e};$(document).on("click","#copy_link_button",function(){var e=$(this).attr("data-clipboard-target"),t=$("label[for='"+e+"']");if(0===$(".url_success_label").length){var n=$("<span>").addClass("url_success_label").text("\u2713");$(n).insertAfter(t),$(".embed_success_label,.embed_popup_success_label").remove()}}),$(document).on("click","#copy_embed_button",function(){var e=$(this).attr("data-clipboard-target"),t=$("label[for='"+e+"']");if(0===$(".embed_success_label").length){var n=$("<span>").addClass("embed_success_label").text("\u2713");n.textContent="\u2713",$(n).insertAfter(t),$(".url_success_label,.embed_popup_success_label").remove()}}),$(document).on("click","#copy_embed_popup_button",function(){var e=$(this).attr("data-clipboard-target"),t=$("label[for='"+e+"']");if(0===$(".embed_popup_success_label").length){var n=$("<span>").addClass("embed_popup_success_label").text("\u2713");n.textContent="\u2713",$(n).insertAfter(t),$(".url_success_label,.embed_success_label").remove()}}),e.embed=function(t,n,a){var o=_.contains(["Quiz","Course"],t.data("class"))?"yes":"no",r=s(t,n)+"?frame=true",l=t.data("author-name"),c=t.data("type"),d=I18n.t("public.embed_link_author_text."+c,{name:l});return void 0!==a&&(r+="&"+a),e.embed_template({scrolling:o,src:r,link_url:i(c),author_name:d})},e.embed_popup=function(t,n){var i=a(n.replace(/\/$/,"")),s=t.data("id"),o=t.data("type");return e.embed_popup_template({rails_env:RAILS_ENV,prod:"production"===RAILS_ENV,root:i,id:s,type:o})},e.url=function(e,t){var n=t.replace(/\/$/,""),i={FlashCardDeck:"flashcard",Flowchart:"flowchart",MindMap:"mindmap",Note:"note",Quiz:"quiz",SlideSet:"slide",Course:"course"}[e.data("class")],a=e.data("title"),s=["",i,e.data("id"),a].join("/");return n+"/"+I18n.locale+s};var s=function(e,t){var n=t.replace(/\/$/,""),i=e.data("type"),a="";return"courses"==i?(a=["","course",e.data("id"),e.data("title")].join("/"),n+"/"+I18n.locale+a):(a=Routes.show_public_path({id:e.data("id"),locale:null,_options:!0}),n+"/"+I18n.locale+a+"-"+e.data("title")+"-"+i)};return e.init_embeds=function(){t(),n()},e}(SHARING||{}),SHARING=function(e){var t=[],n=function(){$(".share_buddy .icon-ok.selected_icon:visible").length>0?($(".quick_send_private_message").show(),$("#share_user_study_aid_performance_popup #cancel_no_friend_selected").hide()):($(".quick_send_private_message").hide(),$("#share_user_study_aid_performance_popup #cancel_no_friend_selected").show())};return $(document).on("click","#share_performance",function(){$(".show_performance").modal("hide");var e=Routes.friend_share_popup_study_aid_performance_report_path($(this).data("id"));MODAL.create_with_callback("share_asset_modal",e,["small_modal"]),$('[data-toggle="dropdown"]').parent().removeClass("open")}),$(document).on("click","#share_performance_panel .remove_share",function(){var e=$(this).attr("data-id"),i=$(this)[0],a=t.indexOf(""+e);-1!=a&&t.splice(a,1),$("#participants").val(t),$(i).removeClass("remove_share").addClass("selectable"),$(i).find(".icon-ok.selected_icon").hide(),n()}),$(document).on("click","#share_performance_panel .selectable",function(e){e.preventDefault(),$(this).find(".icon-ok.selected_icon").show(),$("#share_performance_panel .share_buddy").each(function(){if($(this).find(".icon-ok.selected_icon").is(":visible")){var e=$(this).attr("data-id");-1===$.inArray(e,t)&&t.push(e)}}),$("#participants").val(t),$(this).addClass("remove_share").removeClass("selectable"),n()}),e.init_performance_sharing=function(){t=[]},e}(SHARING||{});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).flatpickr=t()}(this,function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function e(e,t,n){var i;return void 0===n&&(n=!1),function(){var a=this,s=arguments;null!==i&&clearTimeout(i),i=window.setTimeout(function(){i=null,n||e.apply(a,s)},t),n&&!i&&e.apply(a,s)}}function t(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function n(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,n!==undefined&&(i.textContent=n),i}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e,t){return t(e)?e:e.parentNode?a(e.parentNode,t):undefined}function s(e,t){var i=n("div","numInputWrapper"),a=n("input","numInput "+e),s=n("span","arrowUp"),o=n("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?a.type="number":(a.type="text",a.pattern="\\d*"),t!==undefined)for(var r in t)a.setAttribute(r,t[r]);return i.appendChild(a),i.appendChild(s),i.appendChild(o),i}function o(e){return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}function r(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function l(l,c){function h(){He.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=He.currentMonth),void 0===t&&(t=He.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:He.l10n.daysInMonth[e]}}}function v(){He.element=He.input=l,He.isOpen=!1,ye(),we(),De(),Ie(),h(),He.isMobile||V(),B(),(He.selectedDates.length||He.config.noCalendar)&&(He.config.enableTime&&R(He.config.noCalendar?He.latestSelectedDateObj||He.config.minDate:undefined),Be(!1)),x(),He.showTimeInput=He.selectedDates.length>0||He.config.noCalendar;var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!He.isMobile&&e&&xe(),$e("onReady")}function y(e){return e.bind(He)}function x(){var e=He.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(He.calendarContainer!==undefined&&(He.calendarContainer.style.visibility="hidden",He.calendarContainer.style.display="block"),He.daysContainer!==undefined){var t=(He.days.offsetWidth+1)*e.showMonths;He.daysContainer.style.width=t+"px",He.calendarContainer.style.width=t+(He.weekWrapper!==undefined?He.weekWrapper.offsetWidth:0)+"px",He.calendarContainer.style.removeProperty("visibility"),He.calendarContainer.style.removeProperty("display")}})}function A(e){0===He.selectedDates.length&&ge(),e!==undefined&&"blur"!==e.type&&qe(e);var t=He._input.value;P(),Be(),He._input.value!==t&&He._debouncedChange()}function I(e,t){return e%12+12*m(t===He.l10n.amPM[1])}function D(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function P(){if(He.hourElement!==undefined&&He.minuteElement!==undefined){var e=(parseInt(He.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(He.minuteElement.value,10)||0)%60,n=He.secondElement!==undefined?(parseInt(He.secondElement.value,10)||0)%60:0;He.amPM!==undefined&&(e=I(e,He.amPM.textContent));var i=He.config.minTime!==undefined||He.config.minDate&&He.minDateHasTime&&He.latestSelectedDateObj&&0===r(He.latestSelectedDateObj,He.config.minDate,!0);if(He.config.maxTime!==undefined||He.config.maxDate&&He.maxDateHasTime&&He.latestSelectedDateObj&&0===r(He.latestSelectedDateObj,He.config.maxDate,!0)){var a=He.config.maxTime!==undefined?He.config.maxTime:He.config.maxDate;(e=Math.min(e,a.getHours()))===a.getHours()&&(t=Math.min(t,a.getMinutes())),t===a.getMinutes()&&(n=Math.min(n,a.getSeconds()))}if(i){var s=He.config.minTime!==undefined?He.config.minTime:He.config.minDate;(e=Math.max(e,s.getHours()))===s.getHours()&&(t=Math.max(t,s.getMinutes())),t===s.getMinutes()&&(n=Math.max(n,s.getSeconds()))}O(e,t,n)}}function R(e){var t=e||He.latestSelectedDateObj;t&&O(t.getHours(),t.getMinutes(),t.getSeconds())}function $(){var e=He.config.defaultHour,t=He.config.defaultMinute,n=He.config.defaultSeconds;if(He.config.minDate!==undefined){var i=He.config.minDate.getHours(),a=He.config.minDate.getMinutes();(e=Math.max(e,i))===i&&(t=Math.max(a,t)),e===i&&t===a&&(n=He.config.minDate.getSeconds())}if(He.config.maxDate!==undefined){var s=He.config.maxDate.getHours(),o=He.config.maxDate.getMinutes();(e=Math.min(e,s))===s&&(t=Math.min(o,t)),e===s&&t===o&&(n=He.config.maxDate.getSeconds())}O(e,t,n)}function O(e,t,n){He.latestSelectedDateObj!==undefined&&He.latestSelectedDateObj.setHours(e%24,t,n||0,0),He.hourElement&&He.minuteElement&&!He.isMobile&&(He.hourElement.value=f(He.config.time_24hr?e:(12+e)%12+12*m(e%12==0)),He.minuteElement.value=f(t),He.amPM!==undefined&&(He.amPM.textContent=He.l10n.amPM[m(e>=12)]),He.secondElement!==undefined&&(He.secondElement.value=f(n)))}function z(e){var t=parseInt(e.target.value)+(e.delta||0);(t/1e3>1||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&ue(t)}function N(e,t,n,i){return t instanceof Array?t.forEach(function(t){return N(e,t,n,i)}):e instanceof Array?e.forEach(function(e){return N(e,t,n,i)}):(e.addEventListener(t,n,i),void He._handlers.push({element:e,event:t,handler:n,options:i}))}function j(e){return function(t){1===t.which&&e(t)}}function L(){$e("onChange")}function B(){if(He.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(He.element.querySelectorAll("[data-"+e+"]"),function(t){return N(t,"click",He[e])})}),He.isMobile)Pe();else{var t=e(me,50);if(He._debouncedChange=e(L,k),He.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&N(He.daysContainer,"mouseover",function(e){"range"===He.config.mode&&fe(e.target)}),N(window.document.body,"keydown",pe),He.config["static"]||N(He._input,"keydown",pe),He.config.inline||He.config["static"]||N(window,"resize",t),window.ontouchstart!==undefined?N(window.document,"click",de):N(window.document,"mousedown",j(de)),N(window.document,"focus",de,{capture:!0}),!0===He.config.clickOpens&&(N(He._input,"focus",He.open),N(He._input,"mousedown",j(He.open))),He.daysContainer!==undefined&&(N(He.monthNav,"mousedown",j(Fe)),N(He.monthNav,["keyup","increment"],z),N(He.daysContainer,"mousedown",j(Me))),He.timeContainer!==undefined&&He.minuteElement!==undefined&&He.hourElement!==undefined){var n=function(e){return e.target.select()};N(He.timeContainer,["increment"],A),N(He.timeContainer,"blur",A,{capture:!0}),N(He.timeContainer,"mousedown",j(q)),N([He.hourElement,He.minuteElement],["focus","click"],n),He.secondElement!==undefined&&N(He.secondElement,"focus",function(){return He.secondElement&&He.secondElement.select()}),He.amPM!==undefined&&N(He.amPM,"mousedown",j(function(e){A(e),L()}))}}}function F(e){var t=e!==undefined?He.parseDate(e):He.latestSelectedDateObj||(He.config.minDate&&He.config.minDate>He.now?He.config.minDate:He.config.maxDate&&He.config.maxDate<He.now?He.config.maxDate:He.now);try{t!==undefined&&(He.currentYear=t.getFullYear(),He.currentMonth=t.getMonth())}catch(n){n.message="Invalid date supplied: "+t,He.config.errorHandler(n)}He.redraw()}function q(e){~e.target.className.indexOf("arrow")&&H(e,e.target.classList.contains("arrowUp")?1:-1)}function H(e,t,n){var i=e&&e.target,a=n||i&&i.parentNode&&i.parentNode.firstChild,s=Oe("increment");s.delta=t,a&&a.dispatchEvent(s)}function V(){var e=window.document.createDocumentFragment();if(He.calendarContainer=n("div","flatpickr-calendar"),He.calendarContainer.tabIndex=-1,!He.config.noCalendar){if(e.appendChild(ee()),He.innerContainer=n("div","flatpickr-innerContainer"),He.config.weekNumbers){var i=ae(),a=i.weekWrapper,s=i.weekNumbers;He.innerContainer.appendChild(a),He.weekNumbers=s,He.weekWrapper=a}He.rContainer=n("div","flatpickr-rContainer"),He.rContainer.appendChild(ne()),He.daysContainer||(He.daysContainer=n("div","flatpickr-days"),He.daysContainer.tabIndex=-1),Q(),He.rContainer.appendChild(He.daysContainer),He.innerContainer.appendChild(He.rContainer),e.appendChild(He.innerContainer)}He.config.enableTime&&e.appendChild(te()),t(He.calendarContainer,"rangeMode","range"===He.config.mode),t(He.calendarContainer,"animate",!0===He.config.animate),t(He.calendarContainer,"multiMonth",He.config.showMonths>1),He.calendarContainer.appendChild(e);var o=He.config.appendTo!==undefined&&He.config.appendTo.nodeType!==undefined;if((He.config.inline||He.config["static"])&&(He.calendarContainer.classList.add(He.config.inline?"inline":"static"),He.config.inline&&(!o&&He.element.parentNode?He.element.parentNode.insertBefore(He.calendarContainer,He._input.nextSibling):He.config.appendTo!==undefined&&He.config.appendTo.appendChild(He.calendarContainer)),He.config["static"])){var r=n("div","flatpickr-wrapper");He.element.parentNode&&He.element.parentNode.insertBefore(r,He.element),r.appendChild(He.element),He.altInput&&r.appendChild(He.altInput),r.appendChild(He.calendarContainer)}He.config["static"]||He.config.inline||(He.config.appendTo!==undefined?He.config.appendTo:window.document.body).appendChild(He.calendarContainer)}function G(e,i,a,s){var o=_e(i,!0),l=n("span","flatpickr-day "+e,i.getDate().toString());return l.dateObj=i,l.$i=s,l.setAttribute("aria-label",He.formatDate(i,He.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===r(i,He.now)&&(He.todayDateElem=l,l.classList.add("today"),l.setAttribute("aria-current","date")),o?(l.tabIndex=-1,ze(i)&&(l.classList.add("selected"),He.selectedDateElem=l,"range"===He.config.mode&&(t(l,"startRange",He.selectedDates[0]&&0===r(i,He.selectedDates[0],!0)),t(l,"endRange",He.selectedDates[1]&&0===r(i,He.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===He.config.mode&&Ne(i)&&!ze(i)&&l.classList.add("inRange"),He.weekNumbers&&1===He.config.showMonths&&"prevMonthDay"!==e&&a%7==1&&He.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+He.config.getWeek(i)+"</span>"),$e("onDayCreate",l),l}function U(e){e.focus(),"range"===He.config.mode&&fe(e)}function W(e){for(var t=e>0?0:He.config.showMonths-1,n=e>0?He.config.showMonths:-1,i=t;i!=n;i+=e)for(var a=He.daysContainer.children[i],s=e>0?0:a.children.length-1,o=e>0?a.children.length:-1,r=s;r!=o;r+=e){var l=a.children[r];if(-1===l.className.indexOf("hidden")&&_e(l.dateObj))return l}return undefined}function Y(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():He.currentMonth,i=t>0?He.config.showMonths:-1,a=t>0?1:-1,s=n-He.currentMonth;s!=i;s+=a)for(var o=He.daysContainer.children[s],r=n-He.currentMonth===s?e.$i+t:t<0?o.children.length-1:0,l=o.children.length,c=r;c>=0&&c<l&&c!=(t>0?l:-1);c+=a){var d=o.children[c];if(-1===d.className.indexOf("hidden")&&_e(d.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return U(d)}return He.changeMonth(a),X(W(a),0),undefined}function X(e,t){var n=he(document.activeElement||document.body),i=e!==undefined?e:n?document.activeElement:He.selectedDateElem!==undefined&&he(He.selectedDateElem)?He.selectedDateElem:He.todayDateElem!==undefined&&he(He.todayDateElem)?He.todayDateElem:W(t>0?1:-1);return i===undefined?He._input.focus():n?void Y(i,t):U(i)}function J(e,t){for(var i=(new Date(e,t,1).getDay()-He.l10n.firstDayOfWeek+7)%7,a=He.utils.getDaysInMonth((t-1+12)%12),s=He.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),r=He.config.showMonths>1,l=r?"prevMonthDay hidden":"prevMonthDay",c=r?"nextMonthDay hidden":"nextMonthDay",d=a+1-i,u=0;d<=a;d++,u++)o.appendChild(G(l,new Date(e,t-1,d),d,u));for(d=1;d<=s;d++,u++)o.appendChild(G("",new Date(e,t,d),d,u));for(var _=s+1;_<=42-i&&(1===He.config.showMonths||u%7!=0);_++,u++)o.appendChild(G(c,new Date(e,t+1,_%s),_,u));var h=n("div","dayContainer");return h.appendChild(o),h}function Q(){if(He.daysContainer!==undefined){i(He.daysContainer),He.weekNumbers&&i(He.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<He.config.showMonths;t++){var n=new Date(He.currentYear,He.currentMonth,1);n.setMonth(He.currentMonth+t),e.appendChild(J(n.getFullYear(),n.getMonth()))}He.daysContainer.appendChild(e),He.days=He.daysContainer.firstChild,"range"===He.config.mode&&1===He.selectedDates.length&&fe()}}function K(){var e=n("div","flatpickr-month"),t=window.document.createDocumentFragment(),i=n("span","cur-month"),a=s("cur-year",{tabindex:"-1"}),o=a.getElementsByTagName("input")[0];o.setAttribute("aria-label",He.l10n.yearAriaLabel),He.config.minDate&&o.setAttribute("min",He.config.minDate.getFullYear().toString()),He.config.maxDate&&(o.setAttribute("max",He.config.maxDate.getFullYear().toString()),o.disabled=!!He.config.minDate&&He.config.minDate.getFullYear()===He.config.maxDate.getFullYear());var r=n("div","flatpickr-current-month");return r.appendChild(i),r.appendChild(a),t.appendChild(r),e.appendChild(t),{container:e,yearElement:o,monthElement:i}}function Z(){i(He.monthNav),He.monthNav.appendChild(He.prevMonthNav),He.config.showMonths&&(He.yearElements=[],He.monthElements=[]);for(var e=He.config.showMonths;e--;){var t=K();He.yearElements.push(t.yearElement),He.monthElements.push(t.monthElement),He.monthNav.appendChild(t.container)}He.monthNav.appendChild(He.nextMonthNav)}function ee(){return He.monthNav=n("div","flatpickr-months"),He.yearElements=[],He.monthElements=[],He.prevMonthNav=n("span","flatpickr-prev-month"),He.prevMonthNav.innerHTML=He.config.prevArrow,He.nextMonthNav=n("span","flatpickr-next-month"),He.nextMonthNav.innerHTML=He.config.nextArrow,Z(),Object.defineProperty(He,"_hidePrevMonthArrow",{get:function(){return He.__hidePrevMonthArrow},set:function(e){He.__hidePrevMonthArrow!==e&&(t(He.prevMonthNav,"disabled",e),He.__hidePrevMonthArrow=e)}}),Object.defineProperty(He,"_hideNextMonthArrow",{get:function(){return He.__hideNextMonthArrow},set:function(e){He.__hideNextMonthArrow!==e&&(t(He.nextMonthNav,"disabled",e),He.__hideNextMonthArrow=e)}}),He.currentYearElement=He.yearElements[0],je(),He.monthNav}function te(){He.calendarContainer.classList.add("hasTime"),He.config.noCalendar&&He.calendarContainer.classList.add("noCalendar"),He.timeContainer=n("div","flatpickr-time"),He.timeContainer.tabIndex=-1;var e=n("span","flatpickr-time-separator",":"),t=s("flatpickr-hour");He.hourElement=t.getElementsByTagName("input")[0];var i=s("flatpickr-minute");if(He.minuteElement=i.getElementsByTagName("input")[0],He.hourElement.tabIndex=He.minuteElement.tabIndex=-1,He.hourElement.value=f(He.latestSelectedDateObj?He.latestSelectedDateObj.getHours():He.config.time_24hr?He.config.defaultHour:D(He.config.defaultHour)),He.minuteElement.value=f(He.latestSelectedDateObj?He.latestSelectedDateObj.getMinutes():He.config.defaultMinute),He.hourElement.setAttribute("step",He.config.hourIncrement.toString()),He.minuteElement.setAttribute("step",He.config.minuteIncrement.toString()),He.hourElement.setAttribute("min",He.config.time_24hr?"0":"1"),He.hourElement.setAttribute("max",He.config.time_24hr?"23":"12"),He.minuteElement.setAttribute("min","0"),He.minuteElement.setAttribute("max","59"),He.timeContainer.appendChild(t),He.timeContainer.appendChild(e),He.timeContainer.appendChild(i),He.config.time_24hr&&He.timeContainer.classList.add("time24hr"),He.config.enableSeconds){He.timeContainer.classList.add("hasSeconds");var a=s("flatpickr-second");He.secondElement=a.getElementsByTagName("input")[0],He.secondElement.value=f(He.latestSelectedDateObj?He.latestSelectedDateObj.getSeconds():He.config.defaultSeconds),He.secondElement.setAttribute("step",He.minuteElement.getAttribute("step")),He.secondElement.setAttribute("min","0"),He.secondElement.setAttribute("max","59"),He.timeContainer.appendChild(n("span","flatpickr-time-separator",":")),He.timeContainer.appendChild(a)}return He.config.time_24hr||(He.amPM=n("span","flatpickr-am-pm",He.l10n.amPM[m((He.latestSelectedDateObj?He.hourElement.value:He.config.defaultHour)>11)]),He.amPM.title=He.l10n.toggleTitle,He.amPM.tabIndex=-1,He.timeContainer.appendChild(He.amPM)),He.timeContainer}function ne(){He.weekdayContainer?i(He.weekdayContainer):He.weekdayContainer=n("div","flatpickr-weekdays");for(var e=He.config.showMonths;e--;){var t=n("div","flatpickr-weekdaycontainer");He.weekdayContainer.appendChild(t)}return ie(),He.weekdayContainer}function ie(){var e=He.l10n.firstDayOfWeek,t=He.l10n.weekdays.shorthand.slice();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=He.config.showMonths;n--;)He.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function ae(){He.calendarContainer.classList.add("hasWeeks");var e=n("div","flatpickr-weekwrapper");e.appendChild(n("span","flatpickr-weekday",He.l10n.weekAbbreviation));var t=n("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function se(e,t){void 0===t&&(t=!0);var n=t?e:e-He.currentMonth;n<0&&!0===He._hidePrevMonthArrow||n>0&&!0===He._hideNextMonthArrow||(He.currentMonth+=n,(He.currentMonth<0||He.currentMonth>11)&&(He.currentYear+=He.currentMonth>11?1:-1,He.currentMonth=(He.currentMonth+12)%12,$e("onYearChange")),Q(),$e("onMonthChange"),je())}function oe(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),He.input.value="",He.altInput!==undefined&&(He.altInput.value=""),He.mobileInput!==undefined&&(He.mobileInput.value=""),He.selectedDates=[],He.latestSelectedDateObj=undefined,!0===t&&(He.currentYear=He._initialDate.getFullYear(),He.currentMonth=He._initialDate.getMonth()),He.showTimeInput=!1,!0===He.config.enableTime&&$(),He.redraw(),e&&$e("onChange")}function re(){He.isOpen=!1,He.isMobile||(He.calendarContainer!==undefined&&He.calendarContainer.classList.remove("open"),He._input!==undefined&&He._input.classList.remove("active")),$e("onClose")}function le(){He.config!==undefined&&$e("onDestroy");for(var e=He._handlers.length;e--;){var t=He._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(He._handlers=[],He.mobileInput)He.mobileInput.parentNode&&He.mobileInput.parentNode.removeChild(He.mobileInput),He.mobileInput=undefined;else if(He.calendarContainer&&He.calendarContainer.parentNode)if(He.config["static"]&&He.calendarContainer.parentNode){var n=He.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else He.calendarContainer.parentNode.removeChild(He.calendarContainer);He.altInput&&(He.input.type="text",He.altInput.parentNode&&He.altInput.parentNode.removeChild(He.altInput),delete He.altInput),He.input&&(He.input.type=He.input._type,He.input.classList.remove("flatpickr-input"),He.input.removeAttribute("readonly"),He.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete He[e]}catch(_){}})}function ce(e){return!(!He.config.appendTo||!He.config.appendTo.contains(e))||He.calendarContainer.contains(e)}function de(e){if(He.isOpen&&!He.config.inline){var t=o(e),n=ce(t),i=t===He.input||t===He.altInput||He.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(He.input)||~e.path.indexOf(He.altInput)),a="blur"===e.type?i&&e.relatedTarget&&!ce(e.relatedTarget):!i&&!n&&!ce(e.relatedTarget),s=!He.config.ignoredFocusElements.some(function(e){return e.contains(t)});a&&s&&(He.close(),"range"===He.config.mode&&1===He.selectedDates.length&&(He.clear(!1),He.redraw()))}}function ue(e){if(!(!e||He.config.minDate&&e<He.config.minDate.getFullYear()||He.config.maxDate&&e>He.config.maxDate.getFullYear())){var t=e,n=He.currentYear!==t;He.currentYear=t||He.currentYear,He.config.maxDate&&He.currentYear===He.config.maxDate.getFullYear()?He.currentMonth=Math.min(He.config.maxDate.getMonth(),He.currentMonth):He.config.minDate&&He.currentYear===He.config.minDate.getFullYear()&&(He.currentMonth=Math.max(He.config.minDate.getMonth(),He.currentMonth)),n&&(He.redraw(),$e("onYearChange"))}}function _e(e,t){void 0===t&&(t=!0);var n=He.parseDate(e,undefined,t);if(He.config.minDate&&n&&r(n,He.config.minDate,t!==undefined?t:!He.minDateHasTime)<0||He.config.maxDate&&n&&r(n,He.config.maxDate,t!==undefined?t:!He.maxDateHasTime)>0)return!1;if(0===He.config.enable.length&&0===He.config.disable.length)return!0;if(n===undefined)return!1;for(var i=He.config.enable.length>0,a=i?He.config.enable:He.config.disable,s=0,o=void 0;s<a.length;s++){if("function"==typeof(o=a[s])&&o(n))return i;if(o instanceof Date&&n!==undefined&&o.getTime()===n.getTime())return i;if("string"==typeof o&&n!==undefined){var l=He.parseDate(o,undefined,!0);return l&&l.getTime()===n.getTime()?i:!i}if("object"==typeof o&&n!==undefined&&o.from&&o.to&&n.getTime()>=o.from.getTime()&&n.getTime()<=o.to.getTime())return i}return!i}function he(e){return He.daysContainer!==undefined&&(-1===e.className.indexOf("hidden")&&He.daysContainer.contains(e))}function pe(e){var t=e.target===He._input,n=He.config.allowInput,i=He.isOpen&&(!n||!t),a=He.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return He.setDate(He._input.value,!0,e.target===He.altInput?He.config.altFormat:He.config.dateFormat),e.target.blur();He.open()}else if(ce(e.target)||i||a){var s=!!He.timeContainer&&He.timeContainer.contains(e.target);switch(e.keyCode){case 13:s?(A(),Te()):Me(e);break;case 27:e.preventDefault(),Te();break;case 8:case 46:t&&!He.config.allowInput&&(e.preventDefault(),He.clear());break;case 37:case 39:if(s)He.hourElement&&He.hourElement.focus();else if(e.preventDefault(),He.daysContainer!==undefined&&(!1===n||document.activeElement&&he(document.activeElement))){var o=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),se(o),X(W(1),0)):X(undefined,o)}break;case 38:case 40:e.preventDefault();var r=40===e.keyCode?1:-1;He.daysContainer&&e.target.$i!==undefined||e.target===He.input?e.ctrlKey?(e.stopPropagation(),ue(He.currentYear-r),X(W(1),0)):s||X(undefined,7*r):He.config.enableTime&&(!s&&He.hourElement&&He.hourElement.focus(),A(e),He._debouncedChange());break;case 9:if(s){var l=[He.hourElement,He.minuteElement,He.secondElement,He.amPM].filter(function(e){return e}),c=l.indexOf(e.target);if(-1!==c){var d=l[c+(e.shiftKey?-1:1)];d!==undefined?(e.preventDefault(),d.focus()):e.shiftKey&&(e.preventDefault(),He._input.focus())}}}}if(He.amPM!==undefined&&e.target===He.amPM)switch(e.key){case He.l10n.amPM[0].charAt(0):case He.l10n.amPM[0].charAt(0).toLowerCase():He.amPM.textContent=He.l10n.amPM[0],P(),Be();break;case He.l10n.amPM[1].charAt(0):case He.l10n.amPM[1].charAt(0).toLowerCase():He.amPM.textContent=He.l10n.amPM[1],P(),Be()}$e("onKeyDown",e)}function fe(e){if(1===He.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled"))){for(var t=e?e.dateObj.getTime():He.days.firstElementChild.dateObj.getTime(),n=He.parseDate(He.selectedDates[0],undefined,!0).getTime(),i=Math.min(t,He.selectedDates[0].getTime()),a=Math.max(t,He.selectedDates[0].getTime()),s=He.daysContainer.lastChild.lastChild.dateObj.getTime(),o=!1,r=0,l=0,c=i;c<s;c+=C.DAY)_e(new Date(c),!0)||(o=o||c>i&&c<a,c<n&&(!r||c>r)?r=c:c>n&&(!l||c<l)&&(l=c));for(var d=0;d<He.config.showMonths;d++)for(var u=He.daysContainer.children[d],_=He.daysContainer.children[d-1],h=function(i){var a=u.children[i],s=a.dateObj.getTime(),c=r>0&&s<r||l>0&&s>l;return c?(a.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){a.classList.remove(e)}),"continue"):o&&!c?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){a.classList.remove(e)}),void(e!==undefined&&(e.classList.add(t<He.selectedDates[0].getTime()?"startRange":"endRange"),!u.contains(e)&&d>0&&_&&_.lastChild.dateObj.getTime()>=s||(n<t&&s===n?a.classList.add("startRange"):n>t&&s===n&&a.classList.add("endRange"),s>=r&&(0===l||s<=l)&&M(s,n,t)&&a.classList.add("inRange")))))},p=0,f=u.children.length;p<f;p++)h(p,f)}}function me(){!He.isOpen||He.config["static"]||He.config.inline||xe()}function ge(){He.setDate(He.config.minDate!==undefined?new Date(He.config.minDate.getTime()):new Date,!1),$(),Be()}function ve(e,t){if(void 0===t&&(t=He._positionElement),!0===He.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),He.mobileInput!==undefined&&(He.mobileInput.focus(),He.mobileInput.click()),void $e("onOpen");if(!He._input.disabled&&!He.config.inline){var n=He.isOpen;He.isOpen=!0,n||(He.calendarContainer.classList.add("open"),He._input.classList.add("active"),$e("onOpen"),xe(t)),!0===He.config.enableTime&&!0===He.config.noCalendar&&(0===He.selectedDates.length&&ge(),!1!==He.config.allowInput||e!==undefined&&He.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return He.hourElement.select()},50))}}function be(e){return function(t){var n=He.config["_"+e+"Date"]=He.parseDate(t,He.config.dateFormat),i=He.config["_"+("min"===e?"max":"min")+"Date"];n!==undefined&&(He["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),He.selectedDates&&(He.selectedDates=He.selectedDates.filter(function(e){return _e(e)}),He.selectedDates.length||"min"!==e||R(n),Be()),He.daysContainer&&(Se(),n!==undefined?He.currentYearElement[e]=n.getFullYear().toString():He.currentYearElement.removeAttribute(e),He.currentYearElement.disabled=!!i&&n!==undefined&&i.getFullYear()===n.getFullYear())}}function ye(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=d({},c,JSON.parse(JSON.stringify(l.dataset||{}))),n={};He.config.parseDate=t.parseDate,He.config.formatDate=t.formatDate,Object.defineProperty(He.config,"enable",{get:function(){return He.config._enable},set:function(e){He.config._enable=Ae(e)}}),Object.defineProperty(He.config,"disable",{get:function(){return He.config._disable},set:function(e){He.config._disable=Ae(e)}});var i="time"===t.mode;t.dateFormat||!t.enableTime&&!i||(n.dateFormat=t.noCalendar||i?"H:i"+(t.enableSeconds?":S":""):E.defaultConfig.dateFormat+" H:i"+(t.enableSeconds?":S":"")),t.altInput&&(t.enableTime||i)&&!t.altFormat&&(n.altFormat=t.noCalendar||i?"h:i"+(t.enableSeconds?":S K":" K"):E.defaultConfig.altFormat+" h:i"+(t.enableSeconds?":S":"")+" K"),Object.defineProperty(He.config,"minDate",{get:function(){return He.config._minDate},set:be("min")}),Object.defineProperty(He.config,"maxDate",{get:function(){return He.config._maxDate},set:be("max")});var a=function(e){return function(t){He.config["min"===e?"_minTime":"_maxTime"]=He.parseDate(t,"H:i")}};Object.defineProperty(He.config,"minTime",{get:function(){return He.config._minTime},set:a("min")}),Object.defineProperty(He.config,"maxTime",{get:function(){return He.config._maxTime},set:a("max")}),"time"===t.mode&&(He.config.noCalendar=!0,He.config.enableTime=!0),Object.assign(He.config,n,t);for(var s=0;s<e.length;s++)He.config[e[s]]=!0===He.config[e[s]]||"true"===He.config[e[s]];u.filter(function(e){return He.config[e]!==undefined}).forEach(function(e){He.config[e]=g(He.config[e]||[]).map(y)}),He.isMobile=!He.config.disableMobile&&!He.config.inline&&"single"===He.config.mode&&!He.config.disable.length&&!He.config.enable.length&&!He.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(s=0;s<He.config.plugins.length;s++){var o=He.config.plugins[s](He)||{};for(var r in o)u.indexOf(r)>-1?He.config[r]=g(o[r]).map(y).concat(He.config[r]):"undefined"==typeof t[r]&&(He.config[r]=o[r])}$e("onParseConfig")}function we(){"object"!=typeof He.config.locale&&"undefined"==typeof E.l10ns[He.config.locale]&&He.config.errorHandler(new Error("flatpickr: invalid locale "+He.config.locale)),He.l10n=d({},E.l10ns["default"],"object"==typeof He.config.locale?He.config.locale:"default"!==He.config.locale?E.l10ns[He.config.locale]:undefined),w.K="("+He.l10n.amPM[0]+"|"+He.l10n.amPM[1]+"|"+He.l10n.amPM[0].toLowerCase()+"|"+He.l10n.amPM[1].toLowerCase()+")",He.formatDate=S(He),He.parseDate=T({config:He.config,l10n:He.l10n})}function xe(e){if(He.calendarContainer!==undefined){$e("onPreCalendarPosition");var n=e||He._positionElement,i=Array.prototype.reduce.call(He.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),a=He.calendarContainer.offsetWidth,s=He.config.position.split(" "),o=s[0],r=s.length>1?s[1]:null,l=n.getBoundingClientRect(),c=window.innerHeight-l.bottom,d="above"===o||"below"!==o&&c<i&&l.top>i,u=window.pageYOffset+l.top+(d?-i-2:n.offsetHeight+2);if(t(He.calendarContainer,"arrowTop",!d),t(He.calendarContainer,"arrowBottom",d),!He.config.inline){var _=window.pageXOffset+l.left-(null!=r&&"center"===r?(a-l.width)/2:0),h=window.document.body.offsetWidth-l.right,p=_+a>window.document.body.offsetWidth,f=h+a>window.document.body.offsetWidth;if(t(He.calendarContainer,"rightMost",p),!He.config["static"])if(He.calendarContainer.style.top=u+"px",p)if(f){var m=document.styleSheets[0];if(m===undefined)return;var g=window.document.body.offsetWidth,v=Math.max(0,g/2-a/2),b=".flatpickr-calendar.centerMost:before",y=".flatpickr-calendar.centerMost:after",w=m.cssRules.length,x="{left:"+l.left+"px;right:auto;}";t(He.calendarContainer,"rightMost",!1),t(He.calendarContainer,"centerMost",!0),m.insertRule(b+","+y+x,w),He.calendarContainer.style.left=v+"px",He.calendarContainer.style.right="auto"}else He.calendarContainer.style.left="auto",He.calendarContainer.style.right=h+"px";else He.calendarContainer.style.left=_+"px",He.calendarContainer.style.right="auto"}}}function Se(){He.config.noCalendar||He.isMobile||(je(),Q())}function Te(){He._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||navigator.msMaxTouchPoints!==undefined?setTimeout(He.close,0):He.close()}function Me(e){e.preventDefault(),e.stopPropagation();var t=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},n=a(e.target,t);if(n!==undefined){var i=n,s=He.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=(s.getMonth()<He.currentMonth||s.getMonth()>He.currentMonth+He.config.showMonths-1)&&"range"!==He.config.mode;if(He.selectedDateElem=i,"single"===He.config.mode)He.selectedDates=[s];else if("multiple"===He.config.mode){var l=ze(s);l?He.selectedDates.splice(parseInt(l),1):He.selectedDates.push(s)}else"range"===He.config.mode&&(2===He.selectedDates.length&&He.clear(!1,!1),He.latestSelectedDateObj=s,He.selectedDates.push(s),0!==r(s,He.selectedDates[0],!0)&&He.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(P(),o){var c=He.currentYear!==s.getFullYear();He.currentYear=s.getFullYear(),He.currentMonth=s.getMonth(),c&&$e("onYearChange"),$e("onMonthChange")}if(je(),Q(),Be(),He.config.enableTime&&setTimeout(function(){return He.showTimeInput=!0},50),o||"range"===He.config.mode||1!==He.config.showMonths?He.selectedDateElem!==undefined&&He.hourElement===undefined&&He.selectedDateElem&&He.selectedDateElem.focus():U(i),He.hourElement!==undefined&&He.hourElement!==undefined&&He.hourElement.focus(),He.config.closeOnSelect){var d="single"===He.config.mode&&!He.config.enableTime,u="range"===He.config.mode&&2===He.selectedDates.length&&!He.config.enableTime;(d||u)&&Te()}L()}}function Ce(e,t){null!==e&&"object"==typeof e?Object.assign(He.config,e):(He.config[e]=t,Ve[e]!==undefined?Ve[e].forEach(function(e){return e()}):u.indexOf(e)>-1&&(He.config[e]=g(t))),He.redraw(),Be(!1)}function ke(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return He.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[He.parseDate(e,t)];else if("string"==typeof e)switch(He.config.mode){case"single":case"time":n=[He.parseDate(e,t)];break;case"multiple":n=e.split(He.config.conjunction).map(function(e){return He.parseDate(e,t)});break;case"range":n=e.split(He.l10n.rangeSeparator).map(function(e){return He.parseDate(e,t)})}else He.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));He.selectedDates=n.filter(function(e){return e instanceof Date&&_e(e,!1)}),"range"===He.config.mode&&He.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function Ee(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=He.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return He.clear(t);ke(e,n),He.showTimeInput=He.selectedDates.length>0,He.latestSelectedDateObj=He.selectedDates[0],He.redraw(),F(),R(),Be(t),t&&$e("onChange")}function Ae(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?He.parseDate(e,undefined,!0):e&&"object"==typeof e&&e.from&&e.to?{from:He.parseDate(e.from,undefined),
to:He.parseDate(e.to,undefined)}:e}).filter(function(e){return e})}function Ie(){He.selectedDates=[],He.now=He.parseDate(He.config.now)||new Date;var e=He.config.defaultDate||("INPUT"!==He.input.nodeName&&"TEXTAREA"!==He.input.nodeName||!He.input.placeholder||He.input.value!==He.input.placeholder?He.input.value:null);e&&ke(e,He.config.dateFormat),He._initialDate=He.selectedDates.length>0?He.selectedDates[0]:He.config.minDate&&He.config.minDate.getTime()>He.now.getTime()?He.config.minDate:He.config.maxDate&&He.config.maxDate.getTime()<He.now.getTime()?He.config.maxDate:He.now,He.currentYear=He._initialDate.getFullYear(),He.currentMonth=He._initialDate.getMonth(),He.selectedDates.length>0&&(He.latestSelectedDateObj=He.selectedDates[0]),He.config.minTime!==undefined&&(He.config.minTime=He.parseDate(He.config.minTime,"H:i")),He.config.maxTime!==undefined&&(He.config.maxTime=He.parseDate(He.config.maxTime,"H:i")),He.minDateHasTime=!!He.config.minDate&&(He.config.minDate.getHours()>0||He.config.minDate.getMinutes()>0||He.config.minDate.getSeconds()>0),He.maxDateHasTime=!!He.config.maxDate&&(He.config.maxDate.getHours()>0||He.config.maxDate.getMinutes()>0||He.config.maxDate.getSeconds()>0),Object.defineProperty(He,"showTimeInput",{get:function(){return He._showTimeInput},set:function(e){He._showTimeInput=e,He.calendarContainer&&t(He.calendarContainer,"showTimeInput",e),He.isOpen&&xe()}})}function De(){He.input=He.config.wrap?l.querySelector("[data-input]"):l,He.input?(He.input._type=He.input.type,He.input.type="text",He.input.classList.add("flatpickr-input"),He._input=He.input,He.config.altInput&&(He.altInput=n(He.input.nodeName,He.input.className+" "+He.config.altInputClass),He._input=He.altInput,He.altInput.placeholder=He.input.placeholder,He.altInput.disabled=He.input.disabled,He.altInput.required=He.input.required,He.altInput.tabIndex=He.input.tabIndex,He.altInput.type="text",He.input.setAttribute("type","hidden"),!He.config["static"]&&He.input.parentNode&&He.input.parentNode.insertBefore(He.altInput,He.input.nextSibling)),He.config.allowInput||He._input.setAttribute("readonly","readonly"),He._positionElement=He.config.positionElement||He._input):He.config.errorHandler(new Error("Invalid input element specified"))}function Pe(){var e=He.config.enableTime?He.config.noCalendar?"time":"datetime-local":"date";He.mobileInput=n("input",He.input.className+" flatpickr-mobile"),He.mobileInput.step=He.input.getAttribute("step")||"any",He.mobileInput.tabIndex=1,He.mobileInput.type=e,He.mobileInput.disabled=He.input.disabled,He.mobileInput.required=He.input.required,He.mobileInput.placeholder=He.input.placeholder,He.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",He.selectedDates.length>0&&(He.mobileInput.defaultValue=He.mobileInput.value=He.formatDate(He.selectedDates[0],He.mobileFormatStr)),He.config.minDate&&(He.mobileInput.min=He.formatDate(He.config.minDate,"Y-m-d")),He.config.maxDate&&(He.mobileInput.max=He.formatDate(He.config.maxDate,"Y-m-d")),He.input.type="hidden",He.altInput!==undefined&&(He.altInput.type="hidden");try{He.input.parentNode&&He.input.parentNode.insertBefore(He.mobileInput,He.input.nextSibling)}catch(t){}N(He.mobileInput,"change",function(e){He.setDate(e.target.value,!1,He.mobileFormatStr),$e("onChange"),$e("onClose")})}function Re(e){if(!0===He.isOpen)return He.close();He.open(e)}function $e(e,t){if(He.config!==undefined){var n=He.config[e];if(n!==undefined&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](He.selectedDates,He.input.value,He,t);"onChange"===e&&(He.input.dispatchEvent(Oe("change")),He.input.dispatchEvent(Oe("input")))}}function Oe(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function ze(e){for(var t=0;t<He.selectedDates.length;t++)if(0===r(He.selectedDates[t],e))return""+t;return!1}function Ne(e){return!("range"!==He.config.mode||He.selectedDates.length<2)&&(r(e,He.selectedDates[0])>=0&&r(e,He.selectedDates[1])<=0)}function je(){He.config.noCalendar||He.isMobile||!He.monthNav||(He.yearElements.forEach(function(e,t){var n=new Date(He.currentYear,He.currentMonth,1);n.setMonth(He.currentMonth+t),He.monthElements[t].textContent=b(n.getMonth(),He.config.shorthandCurrentMonth,He.l10n)+" ",e.value=n.getFullYear().toString()}),He._hidePrevMonthArrow=He.config.minDate!==undefined&&(He.currentYear===He.config.minDate.getFullYear()?He.currentMonth<=He.config.minDate.getMonth():He.currentYear<He.config.minDate.getFullYear()),He._hideNextMonthArrow=He.config.maxDate!==undefined&&(He.currentYear===He.config.maxDate.getFullYear()?He.currentMonth+1>He.config.maxDate.getMonth():He.currentYear>He.config.maxDate.getFullYear()))}function Le(e){return He.selectedDates.map(function(t){return He.formatDate(t,e)}).filter(function(e,t,n){return"range"!==He.config.mode||He.config.enableTime||n.indexOf(e)===t}).join("range"!==He.config.mode?He.config.conjunction:He.l10n.rangeSeparator)}function Be(e){if(void 0===e&&(e=!0),0===He.selectedDates.length)return He.clear(e);He.mobileInput!==undefined&&He.mobileFormatStr&&(He.mobileInput.value=He.latestSelectedDateObj!==undefined?He.formatDate(He.latestSelectedDateObj,He.mobileFormatStr):""),He.input.value=Le(He.config.dateFormat),He.altInput!==undefined&&(He.altInput.value=Le(He.config.altFormat)),!1!==e&&$e("onValueUpdate")}function Fe(e){e.preventDefault();var t=He.prevMonthNav.contains(e.target),n=He.nextMonthNav.contains(e.target);t||n?se(t?-1:1):He.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?He.changeYear(He.currentYear+1):e.target.classList.contains("arrowDown")&&He.changeYear(He.currentYear-1)}function qe(e){e.preventDefault();var t="keydown"===e.type,n=e.target;He.amPM!==undefined&&e.target===He.amPM&&(He.amPM.textContent=He.l10n.amPM[m(He.amPM.textContent===He.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("min")),a=parseFloat(n.getAttribute("max")),s=parseFloat(n.getAttribute("step")),o=parseInt(n.value,10),r=o+s*(e.delta||(t?38===e.which?1:-1:0));if("undefined"!=typeof n.value&&2===n.value.length){var l=n===He.hourElement,c=n===He.minuteElement;r<i?(r=a+r+m(!l)+(m(l)&&m(!He.amPM)),c&&H(undefined,-1,He.hourElement)):r>a&&(r=n===He.hourElement?r-a-m(!He.amPM):i,c&&H(undefined,1,He.hourElement)),He.amPM&&l&&(1===s?r+o===23:Math.abs(r-o)>s)&&(He.amPM.textContent=He.l10n.amPM[m(He.amPM.textContent===He.l10n.amPM[0])]),n.value=f(r)}}var He={config:d({},E.defaultConfig),l10n:p};He.parseDate=T({config:He.config,l10n:He.l10n}),He._handlers=[],He._bind=N,He._setHoursFromDate=R,He._positionCalendar=xe,He.changeMonth=se,He.changeYear=ue,He.clear=oe,He.close=re,He._createElement=n,He.destroy=le,He.isEnabled=_e,He.jumpToDate=F,He.open=ve,He.redraw=Se,He.set=Ce,He.setDate=Ee,He.toggle=Re;var Ve={locale:[we,ie],showMonths:[Z,x,ne]};return v(),He}function c(e,t){for(var n=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),i=[],a=0;a<n.length;a++){var s=n[a];try{if(null!==s.getAttribute("data-fp-omit"))continue;s._flatpickr!==undefined&&(s._flatpickr.destroy(),s._flatpickr=undefined),s._flatpickr=l(s,t||{}),i.push(s._flatpickr)}catch(o){console.error(o)}}return 1===i.length?i[0]:i}var d=function(){return(d=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],h={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:undefined,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,"static":!1,time_24hr:!1,weekNumbers:!1,wrap:!1},p={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},f=function(e){return("0"+e).slice(-2)},m=function(e){return!0===e?1:0},g=function(e){return e instanceof Array?e:[e]},v=function(){return undefined},b=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},y={D:v,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*m(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:v,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:v,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},w={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},x={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[x.w(e,t,n)]},F:function(e,t,n){return b(x.n(e,t,n)-1,!1,t)},G:function(e,t,n){return f(x.h(e,t,n))},H:function(e){return f(e.getHours())},J:function(e,t){return t.ordinal!==undefined?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[m(e.getHours()>11)]},M:function(e,t){return b(e.getMonth(),!0,t)},S:function(e){return f(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return f(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return f(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return f(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},S=function(e){var t=e.config,n=void 0===t?h:t,i=e.l10n,a=void 0===i?p:i;return function(e,t,i){var s=i||a;return n.formatDate!==undefined?n.formatDate(e,t,s):t.split("").map(function(t,i,a){return x[t]&&"\\"!==a[i-1]?x[t](e,s,n):"\\"!==t?t:""}).join("")}},T=function(e){var t=e.config,n=void 0===t?h:t,i=e.l10n,a=void 0===i?p:i;return function(e,t,i,s){if(0!==e&&!e)return undefined;var o,r=s||a,l=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&e.toFixed!==undefined)o=new Date(e);else if("string"==typeof e){var c=t||(n||h).dateFormat,d=String(e).trim();if("today"===d)o=new Date,i=!0;else if(/Z$/.test(d)||/GMT$/.test(d))o=new Date(e);else if(n&&n.parseDate)o=n.parseDate(e,c);else{o=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var u=void 0,_=[],p=0,f=0,m="";p<c.length;p++){var g=c[p],v="\\"===g,b="\\"===c[p-1]||v;if(w[g]&&!b){m+=w[g];var x=new RegExp(m).exec(e);x&&(u=!0)&&_["Y"!==g?"push":"unshift"]({fn:y[g],val:x[++f]})}else v||(m+=".");_.forEach(function(e){var t=e.fn,n=e.val;return o=t(o,n,r)||o})}o=u?o:undefined}}return o instanceof Date&&!isNaN(o.getTime())?(!0===i&&o.setHours(0,0,0,0),o):(n.errorHandler(new Error("Invalid date provided: "+l)),undefined)}},M=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},C={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var i=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},a=0,s=t;a<s.length;a++){i(s[a])}return e});var k=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return c(this,e)},HTMLElement.prototype.flatpickr=function(e){return c([this],e)});var E=function(e,t){return"string"==typeof e?c(window.document.querySelectorAll(e),t):e instanceof Node?c([e],t):c(e,t)};return E.defaultConfig=h,E.l10ns={en:d({},p),"default":d({},p)},E.localize=function(e){E.l10ns["default"]=d({},E.l10ns["default"],e)},E.setDefaults=function(e){E.defaultConfig=d({},E.defaultConfig,e)},E.parseDate=T({}),E.formatDate=S({}),E.compareDates=r,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return c(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=E),E});var VALIDATION=function(e){return e.is_email=function(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)},e}(VALIDATION||{}),EPS_SHARE_LIST=function(e){var t="form#share_list_form",n=t+" #entries tbody",i=t+" #share_list_errors",a=t+" #share_list_submit_button",s="share_list_popup",o=0,r={id:null,type:null},l=function(e){c(),e.preventDefault()},c=function(){o=0,u(Routes.new_share_list_path())},d=function(t){t.preventDefault();var n=$(t.target).attr("data-id"),i=Routes.delete_popup_share_list_path(n);hide_popup(),MODAL.create("delete_share_list_popup",i,["small_modal"]).on("click","#destroy_share_list_submit_button",function(){$.ajax({type:"DELETE",url:Routes.share_list_path(n),success:function(){e.events.trigger("share_list:destroy",{id:n})}}),hide_popup(),$.jGrowl(I18n.t("payments.share_lists.destroy.success"))})},u=function(n){MODAL.create_with_callback(s,n,["medium_modal"],function(){_.each(JSON.parse($(t+" #share_list_entries").val()),function(t){e.add_share_list_entry(t)}),$(".share_list_popup .what_is_this").tooltip()})},h=function(t){e.add_share_list_entry({}),t.preventDefault()},p=function(){$(i).empty().hide(),$(t+" input").removeClass("error")},f=function(e){var t="";t="<ul>",_.each(e,function(e){t+="<li>"+e+"</li>"}),t+="</ul>",$(i).html(t).show()},m=function(){var e=[],i=$(n).find("input[type=email]").map(function(){return $(this).val().toLowerCase()});if(g(),p(),$(t+" #payments_share_list_name").val()||(e.push(I18n.t("activerecord.errors.messages.blank",{attribute:I18n.t("payments.share_lists.form.attributes.name")})),$(t+" #payments_share_list_name").addClass("error")),$(n).children("tr:not(:first-child)").each(function(){var t=$(this).find("[id$='_first_name']"),n=$(this).find("[id$='_last_name']"),a=$(this).find("[id$='_email']");if("1"!==$(this).find(".entry_destroy").val()){var s=a.val().toLowerCase();s?VALIDATION.is_email(s)?$.grep(i,function(e){return e===s}).length>1&&(e.push(I18n.t("activerecord.errors.messages.taken",{attribute:I18n.t("payments.share_lists.form.attributes.email")})),a.addClass("error")):(e.push(I18n.t("activerecord.errors.messages.invalid",{attribute:I18n.t("payments.share_lists.form.attributes.email")})),a.addClass("error")):(e.push(I18n.t("activerecord.errors.messages.blank",{attribute:I18n.t("payments.share_lists.form.attributes.email")})),a.addClass("error")),t.val()||n.val()||(e.push(I18n.t("payments.share_lists.form.entries.first_name_or_last_name")),t.addClass("error"),n.addClass("error"))}}),e.length)return v(),f(_.uniq(e)),!1},g=function(){$(a).addClass("disabled"),$(a).val(I18n.t("please_wait"))},v=function(){$(a).removeClass("disabled"),$(a).val(I18n.t("general.save"))},b=function(t,n){var i=$(t.target).hasClass("new_payments_share_list"),a=i?"share_list:create":"share_list:update",s=i?I18n.t("payments.share_lists.new.success"):I18n.t("payments.share_lists.edit.success");$.jGrowl(s),e.events.trigger(a,n),hide_popup(),r.id&&x()},y=function(e,n){var i=JSON.parse(n.responseText).errors;v(),p(),f(i),i.name&&$(t+" #payments_share_list_name").addClass("error")},w=function(e){r.id&&(hide_popup(),x()),e.preventDefault()},x=function(){EXTERNAL_PRIVATE_SHARE.share_popup(r.id,r.type),r={id:null,type:null}};return e.update_share_list=function(e){o=0,u(Routes.edit_share_list_path(e))},e.add_share_list_entry=function(t){var i=o,a=_.extend({index:i},t);$(n).children("tr:last").after(new ShareListEntryView({model:a}).render().$el),o+=1,e.check_hide_show_remove_entries()},e.remove_first_entry_if_blank=function(){if(!($(n).children("tr").length<3)){var e=$($(n).children("tr")[1]);4==_.select(e.find("input[type=text],input[type=email]"),function(e){return""==$(e).val()}).length&&e.find(".remove_entry").click()}},e.add_share_list=function(e,t){r={id:e,type:t},c()},e.valid_share_list_entries_count=function(){var e=0;return $(n).children("tr:not(:first-child)").each(function(){"1"!==$(this).find(".entry_destroy").val()&&(e+=1)}),e},e.check_hide_show_remove_entries=function(){EPS_SHARE_LIST.valid_share_list_entries_count()<2?$(n).find(".remove_entry").hide():$(n).find(".remove_entry").show()},e.events=_.extend({},Backbone.Events),$(document).off("click","#eps_create_share_list").on("click","#eps_create_share_list",l),$(document).off("click",".share_list_entries #add_share_list_entry").on("click",".share_list_entries #add_share_list_entry",h),$(document).off("click",a).on("click",a,m),$(document).off("click","."+s+" .btn-cancel").on("click","."+s+" .btn-cancel",w),$(document).off("click","."+s+" #destroy_share_list_button").on("click","."+s+" #destroy_share_list_button",d),$(document).off("ajax:success",t).on("ajax:success",t,b),$(document).off("ajax:error",t).on("ajax:error",t,y),e}(EPS_SHARE_LIST||{}),ShareListEntryView=Backbone.View.extend({template:SMT["share_lists/entry"],tagName:"tr",events:{"click .remove_entry":"remove_entry"},render:function(){var e=_.extend({remove_entry_label:I18n.t("payments.share_lists.form.entries.delete")},this.model);return this.$el.html(this.template(e)),this},remove_entry:function(){if(EPS_SHARE_LIST.valid_share_list_entries_count()<2)$.jGrowl(I18n.t("payments.share_lists.form.entries.minimum"));else{var e=this;this.$(".entry_destroy").val("1"),this.$el.fadeOut(function(){e.model.id?e.$("input[type=email]").remove():e.remove()}),EPS_SHARE_LIST.check_hide_show_remove_entries()}}}),RouteResolver={institution:!document.location.href.match(/\/smart_links/),search_popup_smart_shares_path:function(e){return this.institution?Routes.search_popup_external_private_shares_path(e):Routes.search_popup_smart_links_path(e)},new_smart_link_path:function(e){return this.institution?Routes.new_external_private_share_path(e):Routes.new_smart_link_path(e)},edit_smart_link_path:function(e){return this.institution?Routes.edit_external_private_share_path(e):Routes.edit_smart_link_path(e)},resend_to_all_popup_smart_links_path:function(e){return this.institution?Routes.resend_to_all_popup_external_private_shares_path(e):Routes.resend_to_all_popup_smart_links_path(e)},resend_to_all_smart_links_path:function(){return this.institution?Routes.resend_to_all_external_private_shares_path():Routes.resend_to_all_smart_links_path()}},EXTERNAL_PRIVATE_SHARE=function(e){var t="#eps_message",n="#eps_expires_at",i="form#external_private_share",a=i+" #eps_button",s=i+" #eps_errors",o=i+" #eps_share_lists",r=i+" #eps_groups",l=i+" #payments_external_private_share_share_list_id",c=i+" #payments_external_private_share_group_id",d={eps_share_lists:l,eps_groups:c};eps_choice=null;var u=function(){m(),$(".modal").modal("hide"),$.jGrowl(I18n.t("payments.external_private_shares.messages.sent")),$(document).trigger("eps:shared")},h=function(e,t){var n=JSON.parse(t.responseText).errors,i="";$(a).removeClass("disabled"),m(),i="<ul>",_.each(n,function(e){i+="<li>"+e+"</li>"}),i+="</ul>",$(s).html(i).show()},p=function(){if(m(),$(i).hasClass("edit_payments_external_private_share"))return $(a).addClass("disabled"),!0;if(!eps_choice||!d[eps_choice])return!1;if(!$(d[eps_choice]).val()){$(d[eps_choice]).addClass("error");var e=$("<label>",{text:I18n.t("user_validation_errors.required"),"class":"error"});return $(d[eps_choice]).after(e),!1}},f=function(){$(a).addClass("disabled")},m=function(){$(s).hide().empty(),$(o).find("label.error").remove(),$(l).removeClass("error"),$(r).find("label.error").remove(),$(c).removeClass("error")},g=function(e){var s=$(e.target).closest(i);eps_choice=$(e.target).val(),m(),s.find(n).removeClass("hidden"),s.find(t).removeClass("hidden"),s.find(o).hide(),s.find(l+' option[value=""]').prop("selected",!0),s.find(r).hide(),s.find(c+' option[value=""]').prop("selected",!0),s.find(a).addClass("disabled"),s.find("#"+eps_choice).show(),$(d[eps_choice]).length&&$(a).removeClass("disabled")},v=function(e){var t=$(i+" #payments_external_private_share_course_id").val(),n=$(i+" #payments_external_private_share_study_aid_id").val();hide_popup(),t?EPS_SHARE_LIST.add_share_list(t,"Course"):n&&EPS_SHARE_LIST.add_share_list(n,"StudyAid"),e.preventDefault()},b=function(e){var t=(e=e||$(document)).find("#eps_expires_at input.flatpickr"),n=new Date;n.setHours(0,0,0,0),flatpickr(t[0],{dateFormat:"Y-m-d H:i",minDate:n,enableTime:!0})};return e.events=_.extend({},Backbone.Events),e.share_popup=function(e,t,n){var i="external_private_share_resource_popup",a="";a="StudyAid"===t?RouteResolver.new_smart_link_path({study_aid_id:e,share_list_id:n}):"Course"===t?RouteResolver.new_smart_link_path({course_id:e,share_list_id:n}):RouteResolver.edit_smart_link_path(e),MODAL.create_with_callback(i,a,["small_modal"],function(){$("."+i+" .what_is_this").tooltip(),b($("."+i)),n&&($("#eps_choice_eps_share_lists").click(),$(l+' option[value="'+n+'"]').prop("selected",!0))})},e.resend_to_all=function(t){var n="external_private_share_resend_to_all_popup",i=RouteResolver.resend_to_all_popup_smart_links_path({eps_ids:t});MODAL.create_with_callback(n,i,["small_modal"],function(){b($("."+n))}).on("click","#eps_resend_to_all_button",function(){$.post(RouteResolver.resend_to_all_smart_links_path(),{eps_ids:t,message:$("."+n+" #message").val(),expires_at:$("."+n+" #expires_at").val()}).done(function(){$.jGrowl(I18n.t("payments.external_private_shares.messages.sent")),e.events.trigger("eps:resend_to_all:completed")}),hide_popup()})},$(document).on("ajax:success",i,u),$(document).on("ajax:error",i,h),$(document).on("click",a,p),$(document).on("change",i+' input[name="eps_choice"]',g),$(document).off("click","#eps_share_lists #create_share_list").on("click","#eps_share_lists #create_share_list",v),$(document).on("submit",i,f),e}(EXTERNAL_PRIVATE_SHARE||{});!function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(i){function a(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},a.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(c){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var l in s)s[l]&&(r+="; "+l,!0!==s[l]&&(r+="="+s[l].split(";")[0]));return document.cookie=t+"="+n+r}}function o(e,n){if("undefined"!=typeof document){for(var a={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var r=s[o].split("="),l=r.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(r[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(d){}if(a[c]=l,e===c)break}catch(d){}}return e?a[e]:a}}return a.set=s,a.get=function(e){return o(e,!1)},a.getJSON=function(e){return o(e,!0)},a.remove=function(t,n){s(t,"",e(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}return n(function(){})});var STORAGE=function(e){return e.localStore=storageFactory(function(){return localStorage}),e.sessionStore=storageFactory(function(){return sessionStorage}),e}(STORAGE||{}),DATE_FORMAT_HELPER=function(e){return e.jquery_format=function(){return I18n.date_format},e.dayjs_format=function(){return I18n.date_format.replace("/yy","/yyyy").toUpperCase()},e.flatpickr_format=function(){return I18n.date_format.replace("/yy","/Y").replace("dd","d").replace("mm","m")},e}(DATE_FORMAT_HELPER||{});!function(e){e.fn.urlToLink=function(t){t=e.extend({},e.fn.urlToLink.defaults,t);return this.each(function(){var n=e(this).html(),i="<!-- space -->";n=(n=(n=(n=n.replace(new RegExp("&nbsp;","gm"),i)).replace(/(^|\s)(www[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"$1http://$2")).replace(/\b(\w*:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='"+t.target+"' rel='"+t.rel+"'>$1</a>")).replace(new RegExp(i,"gm"),"&nbsp;"),e(this).html(n)})},e.fn.urlToLink.defaults={target:"_blank",rel:"nofollow noopener noreferrer"}}(jQuery);var DATA_CAPTURE=function(e){var t,n,i,a=!1,s=function(){return params_from_url(location.href).client_uid||$("input[name=data_capture_client_uid]").val()};return e.mark_form_submitted=function(){a=!0},e.is_form_submitted=function(){return a},e.create_data_capture_link=function(e,t){var n={};"Course"===t?n.course_id=e:n.study_aid_id=e,MODAL.create_with_callback("data_capture_link_modal",Routes.new_data_capture_link_path(n),["small_modal"],function(){$(".data_capture_link_modal").find("form").validate(),$(".data_capture_link_modal").find(".what_is_this").on("click",function(e){e.preventDefault()}).tooltip()}).on("submit",".new_payments_data_capture_link",function(){$(".data_capture_link_modal").find('input[type="submit"]').addClass("disabled"),$(".data_capture_link_modal").find(".loading_spinner").show()}).on("ajax:error",".new_payments_data_capture_link",function(e,t){$(".data_capture_link_modal").find('input[type="submit"]').removeClass("disabled"),$(".data_capture_link_modal").find(".loading_spinner").hide();var n=$(".data_capture_link_modal").find("ul.errors");n.empty(),_.each(t.responseJSON.errors,function(e){n.append("<li>"+e+"</li>")});var i=n.find("a.manage_quota_url");i.length&&i.attr("href",Routes.data_capture_links_path()),n.show()}).on("ajax:success",".new_payments_data_capture_link",function(e,t){$(".data_capture_link_modal").find("#new_payments_data_capture_link").remove(),$(".data_capture_link_modal").find("#code_embed").val(t.embed),$(".data_capture_link_modal").find("#code_url").val(t.url),$(".data_capture_link_modal").find(".smart_embed_result").show();var n=$(".data_capture_link_modal").find("#copy_embed_button, #copy_url_button");ZERO_CLIPBOARD.init(n)?n.on("click",function(){var e=$(this).attr("data-clipboard-target"),t=$("label[for='"+e+"']");$(".data_capture_link_modal").find(".embed_success_label").remove();var n=$("<span>").addClass("embed_success_label").text("\u2713");n.textContent="\u2713",$(n).insertAfter(t)}):(n.remove(),$(".data_capture_link_modal").find(".input-group").addClass("no_zc_width"))})},e.display_data_capture_form=function(){var t=Routes.data_capture_form_path({id:i.id})+"?link_uuid="+n;MODAL.create_with_callback("data_capture_form_modal",t,["small_modal"],function(){$(".data_capture_form_modal label").urlToLink(),$(".data_capture_form_modal input[name=client_uid]").val(s());var e=$(".data_capture_form_modal .datepicker")[0];e&&flatpickr(e,{minDate:1})},null,{keyboard:!1,backdrop:"static"}).on("submit",".new_form_submission",function(){$(".data_capture_form_modal").find('input[type="submit"]').addClass("disabled"),$(".data_capture_form_modal").find(".loading_spinner").show()}).on("ajax:error",".new_form_submission",function(e,t){$(".data_capture_form_modal").find('input[type="submit"]').removeClass("disabled"),$(".data_capture_form_modal").find(".loading_spinner").hide();var n=$(".data_capture_form_modal").find("ul.errors");n.empty(),_.each(t.responseJSON,function(e,t){"client_uid"===t?n.append($("<li>"+e+"</li>")):n.append($("<li>",{text:e}))}),n.show()}).on("ajax:success",".new_form_submission",function(){$(".data_capture_form_modal").modal("hide"),e.mark_form_submitted(),STORAGE.sessionStore.setItem("data_capture_form_submission_"+n,1)})},e.should_display_data_capture_form=function(a){if(!t)return!1;if(STORAGE.sessionStore.getItem("data_capture_form_submission_"+n))return!1;if(e.is_form_submitted())return!1;var s=params_from_url(location.href);return("true"!==s.show_results||"true"!==s.form_submitted)&&(void 0===a||i.after_position<a)},e.init_data_capture_form=function(){n=undefined,i=undefined,(n=$("#data_capture_uuid").val())&&(i=JSON.parse($("#data_capture_form").val())),t=!(!n||!i)},e}(DATA_CAPTURE||{}),PUBLIC_PANEL=function(e){$(document).on("click",".study_aid_panel .close_study_aid_panel",function(){$(".study_aid_panel, .view_panels").fadeOut()}),$(document).on("click",".view_panels",function(){$(".study_aid_panel, .view_panels").fadeOut()}),$(document).on("click",".study_aid_panel_inner",function(e){e.stopPropagation()}),$(document).on("click",".footer_comment",function(){return $(".study_aid_panel:not(.study_aid_comments)").hide(),e.toggle_panel(".study_aid_comments"),!1});var t=function(){var t=$(this).data("id"),n=$(".study_aid_meta #performance_results");$(".study_aid_meta .nav.nav-tabs li:first a").click(),e.toggle_panel(".study_aid_meta"),!n.hasClass("rendered")&&CURRENT_USER&&STUDY_AID_ACTIONS.show_performance_view(t,n)};$(document).on("click","ul.nav-tabs li#performanceTab a",function(){PAGE_EVENTS.trigger("window:resize")}),
$(document).on("click",".footer_meta",function(){return $(".study_aid_panel:not(.study_aid_meta)").hide(),t.call(this),!1}),$(document).on("click",".meta-asset",t),e.toggle_panel=function(e,t){void 0===t&&(t=function(){});var n=$(e);n.is(":visible")?(n.fadeOut(),$(".view_panels").fadeOut(t)):($(".view_panels").fadeIn(t),n.fadeIn())},$(document).on("click",".additional_controls",function(e){$(".additional_global_controls").slideToggle(),e.preventDefault(),e.stopPropagation()});var n=function(){$(".additional_controls").length>0&&(PAGE_EVENTS.on("click",function(e){$(e.target).hasClosest([".additional_controls",".additional_global_controls",".modal",".view_panels"])||$(".additional_global_controls").slideUp()}),PAGE_EVENTS.on("navigation:close_additional_controls",function(){$(".additional_global_controls").slideUp()}))};return $(document).on("public_view:init",n),e}(PUBLIC_PANEL||{}),BACKGROUND_JOB_POLLING=function(e,t){var n="/background_jobs/?job_ids=:job_ids",i=5,a=1e3*i,s={};e.poll_job=function(e,t,n,o,r){if(-1!==Object.keys(s).indexOf(""+e))return!1;t="function"==typeof t?t:function(){},n="function"==typeof n?n:function(){},process="function"==typeof process?process:function(){},a=void 0!==r?1e3*r:1e3*i,s[e]={success:t,failure:n,process:process}},e.stop_polling_job=function(e){delete s[e]},e.stop_polling_all=function(){Object.keys(s).forEach(function(t){e.stop_polling_job(t)})};var o=function(t){for(var n,i=[],o=(Object.keys(s),0);o<t.length;o++)job_response=t[o],i.push(""+job_response.job_id),(n=s[job_response.job_id])&&(["queued","working"].includes(job_response.status)?n.process(job_response):["none","complete"].includes(job_response.status)?(e.stop_polling_job(job_response.job_id),n.success(job_response)):(e.stop_polling_job(job_response.job_id),n.failure(job_response)));window.setTimeout(r,a)},r=function(){var e=Object.keys(s);if(e.length>0){var i=n.replace(/:job_ids/,e.join(","));t.ajax({url:i,data:{},success:o,dataType:"json"})}else window.setTimeout(r,a)};return r(),e}(BACKGROUND_JOB_POLLING||{},jQuery),FRAME=function(e){try{e.in_iframe=window.self!==window.top}catch(t){e.in_iframe=!0}try{e.on_same_domain=!0,window.top.$()}catch(t){e.on_same_domain=!1}return e.top_examtime_window=function(){for(var e=window;e.parent!==e;){try{if("undefined"==typeof e.parent.EXAMTIME_DATA)return e}catch(t){return e}e=e.parent}return e},e}(FRAME||{}),UPGRADE=function(e){var t=function(){return CURRENT_USER&&CURRENT_USER["premium?"]},n=function(){return t()?"large_modal":"small_modal"};return e.confirm_upgrade_handler=function(t){var n=$(t.target).data("selected-plan-type");track_goal("/payments/payments/"+n+"/confirm"),e.confirm_popup(n)},e.confirm_reupgrade_handler=function(t){var n=$(t.target).data("selected-plan-type"),i=$(t.target).data("frequency");track_goal("/payments/payments/"+n+"/confirm"),e.confirm_reupgrade_popup(n,i)},e.popup=function(i,a,s){i.preventDefault(),e.clear_other_modals();var o=Routes.popup_payments_upgrades_path(_.pick({subscription_only:t(),plan_type:a,frequency:s},_.identity)),r="";0==$("body.gc-static-page").length&&(r=" gc-static-page-modal"),MODAL.create("upgrade_subscription_popup",o,[n()+r])},e.prompt_popup=function(i,a){a||e.clear_other_modals();var s="";0==$("body.gc-static-page").length&&(s=" gc-static-page-modal");var o=Routes.prompt_payments_upgrades_path({prompt_for:i,subscription_only:t()});return MODAL.create("upgrade_subscription_prompt",o,[n()+s])},e.confirm_popup=function(t){e.clear_other_modals();var n=Routes.confirm_upgrade_payments_payments_path(t);MODAL.create("upgrade_confirmation",n,["large_modal"])},e.confirm_reupgrade_popup=function(t,n){e.clear_other_modals();var i=Routes.confirm_reupgrade_payments_payments_path({plan_type:t,frequency:n,_options:!0});MODAL.create("reupgrade_confirmation",i,["large_modal"])},e.clear_other_modals=function(){var e=$("#resource_interstitial");$(".modal.show").modal("hide"),$(".modal.show").remove(),e.length>0&&$(document).trigger("close_interstitial",[e])},$(document).on("click",".return_to_upgrade_pricing_table",function(t){MOBILE.is_mobile()?e.clear_other_modals():e.popup(t)}),$(document).on("click",".upgrade_btn",function(e){if(e.preventDefault(),track_goal("/accounts_upgrade"),MOBILE.is_mobile())window.location=Routes.payments_compare_path();else{var t,n,i=FRAME.in_iframe&&FRAME.on_same_domain?window.top:window,a=e.target.closest("form");a&&(n=a.querySelector("select#payment_option").value,t=a.querySelector("input#plan_type").value),CURRENT_USER&&CURRENT_USER["premium?"]?i.UPGRADE.popup(e,t,n):i.location=Routes.payments_upgrades_path({frequency:n,plan_type:t})}}),$(document).on("click",".confirm_upgrade",function(t){t.preventDefault(),e.confirm_upgrade_handler(t)}),$(document).on("click",".btn.confirm_reupgrade",function(t){t.preventDefault(),e.confirm_reupgrade_handler(t)}),$(document).on("click",".prompt_private_quota",function(t){t.preventDefault(),e.prompt_popup("private_quota")}),$(document).on("click",".prompt_non_private_quota",function(t){t.preventDefault(),e.prompt_popup("non_private_quota")}),$(document).on("hidden.bs.modal",".upgrade_subscription_prompt",function(){$("#api-select").length>0&&$("#api-select").data("switch").data("controls").toggle({silent:!0})}),e}(UPGRADE||{}),STUDY_AID_ACTIONS=function(e){e.get_clone_asset_popup_for_selected=function(t){if(!$(this).hasClass("disabled")){var n=e.get_study_aids_for_context($(this));e.get_clone_asset_popup_for_id(n[0]),$('[data-toggle="dropdown"]').parent().removeClass("open")}t.preventDefault()},e.get_clone_asset_popup_for_id=function(e){if(c())UPGRADE.prompt_popup("copy_and_edit");else{var t=Routes.clone_popup_study_aid_path(e);MODAL.create("clone_asset_modal",t,["small_modal"],{error_handler:l})}},e.clone_ajax_success_handler=function(e,n){STUDY_AID_ACTIONS.clone_id=parseInt(n.id,10),STUDY_AID_ACTIONS.clone_subject_id=parseInt(n.subject_id,10),t=n.job_id,s()},e.clone_ajax_error_handler=function(e,t){var n=JSON.parse(t.responseText);if("undefined"!=typeof n.quota_limit_hit){var i=$(this).closest(".modal");i.modal("hide"),i.remove(),UPGRADE.prompt_popup(n.quota_limit_hit)}else{var a=$(this).find(".modal-body"),s=SMT["shared/error_messages_alert"]({error_messages:[n.message]});a.find(".alert").remove(),a.prepend(s),r()}},e.clone_id=null,e.clone_subject_id=null,e.on_job_success=function(){if($("#clone_asset_btn").hasClass("cloning_other")){var e=Routes.last_created_resource_subject_path(STUDY_AID_ACTIONS.clone_subject_id);$.ajax({type:"GET",url:e,success:function(e){var t="/"+e.type+"/"+e.id+"/edit";MS_TEAMS.is_teams_frame()?window.open(t,"_blank"):do_redirect(t,!1)}})}else{do_redirect(e=Routes.subject_path(_.pick({id:STUDY_AID_ACTIONS.clone_subject_id,ms_teams:MS_TEAMS.is_teams_frame()?"1":null,_options:!0},_.identity)),MS_TEAMS.is_teams_frame())}},e.on_job_failing=function(){i>n?($("#error_container").text(I18n.t("study_aids.actions.clone.failed")),r()):(i++,setTimeout(function(){s()},1e3*a))},e.on_job_processing=function(){};var t,n=2,i=0,a=5,s=function(){BACKGROUND_JOB_POLLING.poll_job(t,STUDY_AID_ACTIONS.on_job_success,STUDY_AID_ACTIONS.on_job_failing,STUDY_AID_ACTIONS.on_job_processing,1)},o=function(){var e=$("#clone_asset_btn");e.addClass("disabled pressed"),e.val(I18n.t("please_wait")),$("#moving_loading_icon").show()},r=function(){var e=$("#clone_asset_btn");e.removeClass("disabled pressed"),e.val($("#copy_and_edit_button_label").val()),$("#moving_loading_icon").hide()},l=function(e){"not_permitted"===e.responseJSON.message&&UPGRADE.prompt_popup("copy_and_edit")},c=function(){return!CURRENT_USER||(!("false"!==$(".meta_details_section #current_user_is_author").html()||CURRENT_USER.plan_wrapper["copy_public_resources?"])||void 0)};return $(document).on("click",".clone-asset",e.get_clone_asset_popup_for_selected),$(document).on("ajax:success",".clone_asset_modal",e.clone_ajax_success_handler),$(document).on("ajax:error",".clone_asset_modal",e.clone_ajax_error_handler),$(document).on("click","#clone_asset_btn",function(){o()}),e}(STUDY_AID_ACTIONS||{}),SUBJECT_STUDY_AIDS=function(e){var t,n,i="#current_subject_id",a="#study_aids_container",s=[];e.in_subject_page=function(){return $("#subjects_content_container").length>0&&$("#current_subject_id").length>0},e.check_show_empty_message=function(){1===e.get_collection_names_for_current_subject().length&&0===e.get_study_aid_count()&&e.show_empty_message()},e.get_study_aid_count=function(){return _.reduce(_.values(STUDY_AIDS),function(e,t){return e+t.study_aid_count},0)},e.show_empty_message=function(){$(".empty_study_aids_container").show(),$("#study_aids_container").hide()},e.hide_empty_message=function(){$(".empty_study_aids_container").hide(),$("#study_aids_container").show()},e.get_collection_names_for_current_subject=function(){return s},e.get_collection_views=function(){return t},e.add_topic=function(t,n){var i=t.position;void 0===i&&(i=null),STUDY_AIDS[t.id]={"default":!1,name:t.name,position:i,study_aids:[],study_aid_count:0,topic_id:t.id},e.populate_resources(),void 0!==n&&n||e.clear_and_rerender()},e.update_topics_study_aid_counts=function(t){_.each(t,function(e){STUDY_AIDS[e.id]&&(STUDY_AIDS[e.id].study_aid_count+=e.change)}),e.render_topics_sidebar()},e.rename_topic=function(t,n){STUDY_AIDS[t].name=n,e.populate_resources(),e.clear_and_rerender()},e.delete_topic=function(t){if("undefined"!=typeof STUDY_AIDS[t]){var n=_.find(STUDY_AIDS,function(e){return e["default"]}),i=EXAMTIME_DATA.collections[SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t)].pluck("id");STUDY_AID_ACTIONS.move_across_topics([t],n.topic_id,i),delete STUDY_AIDS[t],delete EXAMTIME_DATA.collections[e.collection_name_for_topic_id(t)],e.populate_resources(),e.clear_and_rerender()}},e.change_topic=function(t,n){"undefined"!=typeof STUDY_AIDS[t]&&(_.each(n,function(e,n){STUDY_AIDS[t].hasOwnProperty(n)&&(STUDY_AIDS[t][n]=e)}),e.render_topics_sidebar())},e.new_topic_collection=function(e,t){var n=EXAMTIME_DATA.collections[e];return void 0===n&&(EXAMTIME_DATA.collections[e]=new StudyAidCollection(t,{sort_field:"position",sort_direction:"asc"}),n=EXAMTIME_DATA.collections[e]),_.contains(s,e)||s.push(e),n},e.populate_resources=function(){s=[],_.each(STUDY_AIDS,function(t){var n=e.collection_name_for_topic_id(t.topic_id);e.new_topic_collection(n,t.study_aids)}),e.render_topics_sidebar()},e.get_current_subject_study_aids=function(){return study_aids=[],_.each(s,function(e){study_aids=study_aids.concat(EXAMTIME_DATA.collections[e].models)}),study_aids},e.collection_name_for_topic_id=function(e){return"topic_"+e+"_study_aids"},e.topic_id_for_collection_name=function(e){return e.split("_")[1]},e.find_model_in_all_collections=function(t){var n;return _.each(e.get_collection_names_for_current_subject(),function(e){if("undefined"!=typeof EXAMTIME_DATA.collections[e]){var i=EXAMTIME_DATA.collections[e].get(t);void 0!==i&&(n=i)}}),n},e.find_and_remove_model_in_all_collections=function(t){var n=!1;return _.each(e.get_collection_names_for_current_subject(),function(e){var i=EXAMTIME_DATA.collections[e].get(t);void 0!==i&&(EXAMTIME_DATA.collections[e].remove(i),n=!0)}),n},e.group_models_by_topic_id=function(t){var n={};return _.each(e.get_collection_names_for_current_subject(),function(i){var a=e.topic_id_for_collection_name(i);n[a]=[],_.each(t,function(e){EXAMTIME_DATA.collections[i].get(e)&&n[a].push(e)})}),n},e.set_topic_context=function(t){return n=t,e},e.render_resources=function(e){o(a,"resources",e=e||{}),$(document).trigger("subject_manage:init")},e.update_all_models=function(t){_.each(e.get_current_subject_study_aids(),function(e){e.set(t)})},e.clear_and_rerender=function(){$(a).html(""),e.render_resources()};var o=function(a,s,o){var r=o.add_suggested||!1;if(e.in_subject_page()){var l=$(a),c="resources"===s;if(l.length>0&&"undefined"!=typeof STUDY_AIDS){l.empty(),c&&(STUDY_AID_TOPICS.set_edit_and_delete_path(!1),SUBJECT_STUDY_AIDS.hide_empty_message()),e.populate_resources();var d,u=sort_topics(STUDY_AIDS),h=e.collection_name_for_topic_id(u[0].topic_id);EXAMTIME_DATA.collections[h];if(c&&1===u.length&&0===u[0].study_aid_count)SUBJECT_STUDY_AIDS.show_empty_message();else t={},d=n?[STUDY_AIDS[n]]:u,_.each(d,function(n){var a=e.collection_name_for_topic_id(n.topic_id),s=EXAMTIME_DATA.collections[a];t[n.topic_id]=new StudyAidTileCollectionView({subject_id:$(i).val(),topic_id:n.topic_id,name:n.name,default_topic:n["default"],is_default_subject:$("#default_subject").val(),collection:s,is_draggable:!0,deferred_fetch:!0,study_aid_count:n.study_aid_count}),l.append(t[n.topic_id].render().$el),is_touch_device()||$(".tile_tooltip").tooltip({placement:"top"})}),r&&$.when(RELATED_RESOURCES_HANDLER.init_for_topic(n)).done(function(e){e.view.collection.length>1&&($("#study_aids_container").append("<ul class='status_updates'></ul>"),$("#study_aids_container ul.status_updates").append(e.view.render().$el))}),"resources"===s&&(STUDY_AID_ACTIONS_STICKY_TOOLBAR.init(t),SUBJECTS_INFINITE_SCROLL.reset(_.values(t)))}}};return e.render_topics_sidebar=function(){"undefined"!=typeof STUDY_AID_TOPICS&&STUDY_AID_TOPICS.render_sidebar(STUDY_AIDS,n,"subject",$(i).val(),SUBJECT_STUDY_AIDS)},e}(SUBJECT_STUDY_AIDS||{});$(document).on("subject_manage:topics_reordered",SUBJECT_STUDY_AIDS.clear_and_rerender),$(document).on("click",".subject_settings",function(e){e.stopPropagation(),e.preventDefault(),SUBJECT_MODAL_HELPER.subject_modal($(this).attr("data-id"))});var STUDY_AID_ACTIONS=function(e){var t=[];$(document).ready(function(){t=[]}),e.delete_study_aid=function(e){var n="/study_aids/delete_popup",i=e.study_aids,a=e.redirect_after_delete;t=e.topic,i.length>0&&(n+="?study_aids="+i.join(","),MODAL.create_with_callback("delete_asset_modal",n,["small_modal"],function(){a&&$(".delete_asset_modal form").prepend("<input name='redirect_after_delete' type='hidden' value='true'>")}),$('[data-toggle="dropdown"]').parent().removeClass("open"))},$(document).on("study_aids:delete_subject",function(t,n,i){e.delete_study_aid({study_aids:n,topic:i})}),$(document).on("click",".delete-asset",function(){e.delete_study_aid({study_aids:[$(this).data("id")],redirect_after_delete:!0})}),$(document).on("click","#confirm_delete_checkbox",function(){$("#delete_asset_btn").toggleClass("disabled",!$("#confirm_delete_checkbox:checked").length)}),$(document).on("click","#delete_asset_btn",function(e){$(this).hasClass("disabled")?e.preventDefault():($(this).addClass("disabled pressed"),$("#deleting_loading_icon").show())}),$(document).on("mouseover","#delete_asset_btn",function(){$(this).hasClass("disabled")&&!$(this).hasClass("pressed")&&$(this).tooltip("show")}),$(document).on("mouseout","#delete_asset_btn",function(){$(this).tooltip("hide")});var n=function(){$("#share_box_status_messages").removeClass("success").addClass("errored alert alert-danger"),$("#share_box_status_messages").html(I18n.t("study_aids.delete.errored")),$("#deleting_loading_icon").hide()},i=function(e,n){if(void 0!==t&&t.length>0){var i=[];$.each(t,function(e,t){var a=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t);if(a in EXAMTIME_DATA.collections){var s=EXAMTIME_DATA.collections[a].remove(n.study_aid_ids);i.push({id:t,change:-s.length})}}),SUBJECT_STUDY_AIDS.update_topics_study_aid_counts(i),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear(),$(".modal").modal("hide"),PAGE_EVENTS.trigger("subject:study_aid_deleted",n),$.jGrowl(I18n.t("study_aids.delete.success",{count:n.study_aid_ids.length}))}else STUDY_AID_ACTIONS.is_view_mode()||STUDY_AID_ACTIONS.is_edit_mode()?do_redirect(Routes.subject_path({id:n.subject})):do_redirect(window.location.href,MS_TEAMS.is_teams_frame())};return $(document).on("ajax:success",".delete_asset_modal",i),$(document).on("ajax:error",".delete_asset_modal",n),e}(STUDY_AID_ACTIONS||{}),GroupInvite=Backbone.Model.extend({initialize:function(){}}),GroupInviteCollection=Backbone.Collection.extend({model:GroupInvite,comparator:function(e){return e.get("name").toLowerCase()}}),Group=Backbone.Model.extend({initialize:function(){this.set("icon","icon-group")}}),RecentComparator={stale_date:new Date(Date.now()-2592e6).toISOString(),compare:function(e,t){return e.get("last_accessed_at")&&t.get("last_accessed_at")?e.get("last_accessed_at")<RecentComparator.stale_date&&t.get("last_accessed_at")<RecentComparator.stale_date?e.get("views")>t.get("views")?-1:1:e.get("last_accessed_at")>t.get("last_accessed_at")?-1:1:e.get("last_accessed_at")?-1:t.get("last_accessed_at")?1:e.get("name").toLowerCase()>t.get("name").toLowerCase()?1:-1}},GroupCollection=Backbone.Collection.extend({model:Group,comparator:RecentComparator.compare}),Subject=Backbone.Model.extend({initialize:function(){}}),SubjectCollection=Backbone.Collection.extend({model:Subject,comparator:function(e,t){return e.get("default")?-1:t.get("default")?1:RecentComparator.compare.apply(this,arguments)}}),EXAMTIME_DATA=function(e){return e.collections={},e.reset=function(){this.collections={groups:new GroupCollection,group_invites:new GroupInviteCollection,subjects:new SubjectCollection}},e}(EXAMTIME_DATA||{});EXAMTIME_DATA.reset();var SUBJECT_MANAGE=function(e){var t="body",n="subject_manage",i="#"+n;e.in_subject_manage_page=function(){return SUBJECT_STUDY_AIDS.in_subject_page()},e.render=function(){$(i).length>0&&"undefined"!=typeof STUDY_AIDS&&a()},e.clear_and_rerender=function(){var t=$(i).parent();$(i).remove(),t.append('<div id="'+n+'"><div>'),e.render()};var a=function(){var e=$(i),n=null;e.find(".study_aid_contents_inner").multisortable({items:"div.resource-tile",connectWith:".study_aid_contents_inner",selectedClass:"selected",placeholder:"placeholder",delay:150,containment:t,mousedown:function(e,t){var n=$(t).closest(".study_aid_contents_inner").attr("data-id");$(i).find(".topic_row .study_aid_contents_inner .resource-tile").each(function(){$(this).closest(".study_aid_contents_inner").attr("data-id")!==n&&($(this).removeClass("selected"),$(this).removeClass("multiselectable-previous"))})},sort:function(e,t){var n=parseInt($(t.item).css("top").replace("px","")),i=parseInt($(t.item).css("left").replace("px",""));$(t.item).css({left:truncate_number(i),top:truncate_number(n)})},over:function(e,t){var n=$(t.item).closest(".study_aid_contents_inner");n.find(".resource-tile").length!==n.find(".selected").length&&0!==n.find(".resource-tile").length||n.addClass("empty_resources")},receive:function(e,t){n=$(t.sender).data("id")},stop:function(e,t){var i=$(t.item).closest(".study_aid_contents_inner"),a=i.data("id"),o=$.map($(".resource-tile.selected"),function(e){return $(e).data("id")}),r=$(t.item).closest(".study_aid_contents_inner").find(".resource-tile").index($(t.item))-(o.length-1);i.closest(".topic_row").removeClass("empty"),i.find(".empty_topic").remove(),0===i.find(".resource-tile").length&&i.closest(".topic_row").addClass("empty"),s(i)&&(d(a,o,r,n),n=null)}})},s=function(e){var t=!1,n=$(e).attr("data-id"),i=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(n);return $(e).find(".resource-tile").each(function(e){if(!t){var n=EXAMTIME_DATA.collections[i].get($(this).attr("data-id"));void 0===n?t=!0:parseInt(n.get("position"))!==e+1&&(t=!0)}}),t},o=function(e){var t;return _.each(SUBJECT_STUDY_AIDS.get_collection_names_for_current_subject(),function(n){void 0!==EXAMTIME_DATA.collections[n].get(e)&&(t=EXAMTIME_DATA.collections[n])}),t},r=!1,l=function(){r=!0,$(".resource-tile").fadeTo("fast",.5,function(){r||c()})},c=function(){r=!1,$(".resource-tile").removeAttr("style")},d=function(t,n,i,a){0!==n.length&&(l(),$.ajax({type:"POST",url:Routes.move_all_study_aid_folders_path(),data:{folder_id:t,study_aid_ids:n,start_index:i,previous_folder_id:a},dataType:"json",success:function(e){u(e)},error:function(){e.clear_and_rerender(),$.jGrowl(I18n.t("subjects.manage.folders.study_aids.position.error"))},complete:function(){c()}}))},u=function(e){var t=e.folder,n=e.study_aid_folders,i=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t.id),s=[],r=[];_.each(n,function(e){var t=EXAMTIME_DATA.collections[i].get(e.study_aid_id);if(void 0!==t){var n=e.position;null!=n&&(n=parseInt(n,10)),t.set({position:n},{silent:!0})}else s.push(e)}),_.each(s,function(e){var t=o(e.study_aid_id);if(void 0!==t){var n=t.get(e.study_aid_id),a=e.position;r.push({id:e.folder_id,change:1}),r.push({id:n.get("folder_id"),change:-1}),null!=a&&(a=parseInt(a,10)),n.set({position:a,folder_id:e.folder_id},{silent:!0}),t.remove(n,{silent:!0}),$(".study_aid_contents_inner[data-id="+e.folder_id+"] .resource-tile.selected[data-id="+n.id+"]").remove(),EXAMTIME_DATA.collections[i].add(n)}}),$(".study_aid_actions #unselect_all").click(),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear(),a(),$.jGrowl(I18n.t("subjects.manage.folders.study_aids.position.success",{folder:_.escape(t.name)})),SUBJECT_STUDY_AIDS.update_topics_study_aid_counts(r)};return e}(SUBJECT_MANAGE||{});$(document).on("subject_manage:init",function(){SUBJECT_MANAGE.render()}),function(e){var t=e.fn.scrollParent;e.fn.scrollParent=function(){return SUBJECT_MANAGE.in_subject_manage_page()?e(document):t.apply(this,arguments)}}(jQuery),
/*
Copyright 2012 Igor Vaynberg

Version: 3.5.4 Timestamp: Sun Aug 30 13:30:32 EDT 2015

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,a=this.length;++i<a&&(n.context=n[0]=this[i])&&!1!==t.call(n[0],i,n););return this}})}(jQuery),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return F[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function a(e,t){for(var n=0,i=t.length;n<i;n+=1)if(o(e,t[n]))return n;return-1}function s(){var t=e(B);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function o(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function r(e,t,n){var i,a,s;if(null===e||e.length<1)return[];for(a=0,s=(i=e.split(t)).length;a<s;a+=1)i[a]=n(i[a]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var a=e.data(n,i);a!==t&&n.val()!==a&&(e.removeData(n,i),n.trigger("keyup-change"))})}function d(n){n.on("mousemove",function(n){var i=j;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,i){var a;return i=i||t,function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout(function(){n.apply(i,t)},e)}}function _(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){a(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))},0)}function p(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var a=document.selection.createRange();i=document.selection.createRange().text.length,a.moveStart("character",-t.value.length),n=a.text.length-i}return{offset:n,length:i}}function f(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!$){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);($=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append($)}return $.text(t.val()),$.width()}function v(t,n,i){var a,s,o=[];(a=e.trim(t.attr("class")))&&e((a=""+a).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(a=e.trim(n.attr("class")))&&e((a=""+a).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(s=i(this))&&o.push(s)}),t.attr("class",o.join(" "))}function b(e,t,n,a){var s=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),o=t.length;s<0?n.push(a(e)):(n.push(a(e.substring(0,s))),n.push("<span class='select2-match'>"),n.push(a(e.substring(s,s+o))),n.push("</span>"),n.push(a(e.substring(s+o,e.length))))}function y(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(n){var i,a=null,s=n.quietMillis||100,o=n.url,r=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,s=o,c=n.transport||e.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);i=i?i.call(r,l.term,l.page,l.context):null,s="function"==typeof s?s.call(r,l.term,l.page,l.context):s,a&&"function"==typeof a.abort&&a.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(r)):e.extend(u,n.params)),e.extend(u,{url:s,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),a=c.call(r,u)},s)}}function x(t){var n,i,a=t,s=function(e){return""+e.text};e.isArray(a)&&(a={results:i=a}),!1===e.isFunction(a)&&(i=a,a=function(){return i});var o=a();return o.text&&(s=o.text,e.isFunction(s)||(n=o.text,s=function(e){return e[n]})),function(t){var n,i=t.term,o={results:[]};""!==i?(n=function(a,o){var r,l;if((a=a[0]).children){for(l in r={},a)a.hasOwnProperty(l)&&(r[l]=a[l]);r.children=[],e(a.children).each2(function(e,t){n(t,r.children)}),(r.children.length||t.matcher(i,s(r),a))&&o.push(r)}else t.matcher(i,s(a),a)&&o.push(a)},e(a().results).each2(function(e,t){n(t,o.results)}),t.callback(o)):t.callback(a())}}function S(n){var i=e.isFunction(n);return function(a){var s=a.term,o={results:[]},r=i?n(a):n;e.isArray(r)&&(e(r).each(function(){var e=this.text!==t,n=e?this.text:this;(""===s||a.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),a.callback(o))}}function T(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function M(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function C(t){var n=0;return e.each(t,function(e,t){t.children?n+=C(t.children):n++}),n}function k(e,n,i,a){var s,r,l,c,d,u=e,_=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(r=-1,l=0,c=a.tokenSeparators.length;l<c&&(d=a.tokenSeparators[l],!((r=e.indexOf(d))>=0));l++);if(r<0)break;if(s=e.substring(0,r),e=e.substring(r+d.length),s.length>0&&(s=a.createSearchChoice.call(this,s,n))!==t&&null!==s&&a.id(s)!==t&&null!==a.id(s)){for(_=!1,l=0,c=n.length;l<c;l++)if(o(a.id(s),a.id(n[l]))){_=!0;break}_||i(s)}}return u!==e?e:void 0}function E(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function A(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var I,D,P,R,$,O,z,N,j={x:0,y:0},L={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case L.SHIFT:case L.CTRL:case L.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},B="<div class='select2-measure-scrollbar'></div>",F={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};O=e(document),N=1,R=function(){return N++},D=A(I=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,a,o=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+R()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(M(n.containerCss,this.opts.element)),this.container.addClass(M(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",f),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(M(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",f),this.results=i=this.container.find(o),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",f),d(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),_(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,a){var s=i.scrollTop();a>0&&s-a<=0?(i.scrollTop(0),f(e)):a<0&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),f(e))}),c(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2-focused")}),a.on("blur",function(){a.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var r=n.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),z=z||s(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),E.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,a,s,l,c=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n.debug=n.debug||e.fn.select2.defaults.debug,n.debug&&console&&console.warn&&(null!=n.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=n.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=n.ajax&&null!=n.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=n.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=n.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=n.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=n.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=n.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=n.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),n.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=n.element.data("tags")){var d=n.element.data("tags");e.isArray(d)||(d=[]),n.element.data("select2Tags",d)}if(null!=n.sorter&&(n.sortResults=n.sorter),null!=n.selectOnClose&&(n.selectOnBlur=n.selectOnClose),null!=n.ajax&&e.isFunction(n.ajax.processResults)&&(n.ajax.results=n.ajax.processResults),null!=n.language){var u=n.language;e.isFunction(u.noMatches)&&(n.formatNoMatches=u.noMatches),e.isFunction(u.searching)&&(n.formatSearching=u.searching),e.isFunction(u.inputTooShort)&&(n.formatInputTooShort=u.inputTooShort),e.isFunction(u.inputTooLong)&&(n.formatInputTooLong=u.inputTooLong),e.isFunction(u.loadingMore)&&(n.formatLoading=u.loadingMore),e.isFunction(u.maximumSelected)&&(n.formatSelectionTooBig=u.maximumSelected)}if("function"!=typeof(n=e.extend({},{populateResults:function(i,a,s){var o,r=this.opts.id,l=this.liveRegion;(o=function(i,a,d){var u,_,h,p,f,m,g,v,b,y,w=[];for(u=0,_=(i=n.sortResults(i,a,s)).length;u<_;u+=1)p=!(f=!0===(h=i[u]).disabled)&&r(h)!==t,m=h.children&&h.children.length>0,(g=e("<li></li>")).addClass("select2-results-dept-"+d),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),g.attr("role","presentation"),(v=e(document.createElement("div"))).addClass("select2-result-label"),v.attr("id","select2-result-label-"+R()),v.attr("role","option"),(y=n.formatResult(h,v,s,c.opts.escapeMarkup))!==t&&(v.html(y),g.append(v)),m&&((b=e("<ul></ul>")).addClass("select2-result-sub"),o(h.children,b,d+1),g.append(b)),g.data("select2-data",h),w.push(g[0]);a.append(w),l.text(n.formatMatches(i.length))})(a,i,0)}},e.fn.select2.defaults,n)).id&&(s=n.id,n.id=function(e){return e[s]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(a?(n.query=this.bind(function(e){var n,a,s,o={results:[],more:!1},r=e.term;s=function(t,n){var i;t.is("option")?e.matcher(r,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){s(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(a=this.getPlaceholderOption())&&(n=n.not(a)),n.each2(function(e,t){s(t,o.results)}),e.callback(o)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((l=n.element.data("ajax-url"))&&l.length>0&&(n.ajax.url=l),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=S(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var a=[];e(r(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){if(o(this.id,t.id))return t=this,!1}),a.push(t)}),i(a)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,a=this;i.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(M(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(M(this.opts.dropdownCssClass,this.opts.element)))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",a._sync)}),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,a._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,a,s,o=this.dropdown,r=this.container,l=r.offset(),c=r.outerHeight(!1),d=r.outerWidth(!1),u=o.outerHeight(!1),_=e(window),h=_.width(),p=_.height(),f=_.scrollLeft()+h,m=_.scrollTop()+p,g=l.top+c,v=l.left,b=g+u<=m,y=l.top-u>=_.scrollTop(),w=o.outerWidth(!1),x=function(){return v+w<=f},S=function(){return l.left+f+r.outerWidth(!1)>w};o.hasClass("select2-drop-above")?(n=!0,!y&&b&&(i=!0,n=!1)):(n=!1,!b&&y&&(i=!0,n=!0)),i&&(o.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),f=_.scrollLeft()+h,m=_.scrollTop()+p,g=l.top+c,v=l.left,w=o.outerWidth(!1),o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(s=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:z.width))>d?d=w:w=d,u=o.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(t=this.body.offset()).top,v-=t.left),!x()&&S()&&(v=l.left+this.container.outerWidth(!1)-w),a={left:v,width:d},n?(this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above"),u=o.outerHeight(!1),a.top=l.top-u,a.bottom="auto"):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=e.extend(a,M(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),O.on("mousemove.select2Event",function(e){j.x=e.pageX,j.y=e.pageY}),!0)},opening:function(){var t,i=this.containerEventName,a="scroll."+i,s="resize."+i,o="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var a,s=e("#select2-drop");s.length>0&&((a=s.data("select2")).opts.selectOnBlur&&a.selectHighlighted({
noFocus:!0}),a.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+a+" "+o,function(){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,a="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(a)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),O.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==t&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return M(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,a,s,o,r,l,c=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(r=c.find("li.select2-more-results")).length>0&&(a=r.offset().top+r.outerHeight(!0)),a>(s=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(a-s)),(o=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var a=e(n[i+=t]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,s=this.findHighlightableChoices();if(0===arguments.length)return a(s.filter(".select2-highlighted")[0],s.get());t>=s.length&&(t=s.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(s[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,a=this.search.val(),s=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(o){i.opened()&&(i.opts.populateResults.call(this,e,o.results,{term:a,page:n,context:s}),i.postprocessResults(o,!1,!1),!0===o.more?(t.detach().appendTo(e).html(i.opts.escapeMarkup(M(i.opts.formatLoadMore,i.opts.element,n+1))),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))})}))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),_.positionDropdown(),d.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?_.liveRegion.text(d.text()):_.liveRegion.text(_.opts.formatMatches(d.find('.select2-result-selectable:not(".select2-selected")').length))}function a(e){d.html(e),i()}var s,r,l,c=this.search,d=this.results,u=this.opts,_=this,h=c.val(),p=e.data(this.container,"select2-last-term");if((!0===n||!p||!o(h,p))&&(e.data(this.container,"select2-last-term",h),!0===n||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var f=this.getMaximumSelectionSize();if(!(f>=1&&(s=this.data(),e.isArray(s)&&s.length>=f&&T(u.formatSelectionTooBig,"formatSelectionTooBig"))))return c.val().length<u.minimumInputLength?(T(u.formatInputTooShort,"formatInputTooShort")?a("<li class='select2-no-results'>"+M(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>"):a(""),void(n&&this.showSearch&&this.showSearch(!0))):void(u.maximumInputLength&&c.val().length>u.maximumInputLength?T(u.formatInputTooLong,"formatInputTooLong")?a("<li class='select2-no-results'>"+M(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>"):a(""):(u.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+M(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),(r=this.tokenize())!=t&&null!=r&&c.val(r),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var r;if(l==this.queryCount)if(this.opened())if(s.hasError!==t&&T(u.formatAjaxError,"formatAjaxError"))a("<li class='select2-ajax-error'>"+M(u.formatAjaxError,u.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");else{if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&(r=this.opts.createSearchChoice.call(_,c.val(),s.results))!==t&&null!==r&&_.id(r)!==t&&null!==_.id(r)&&0===e(s.results).filter(function(){return o(_.id(this),_.id(r))}).length&&this.opts.createSearchChoicePosition(s.results,r),0===s.results.length&&T(u.formatNoMatches,"formatNoMatches"))return a("<li class='select2-no-results'>"+M(u.formatNoMatches,u.element,c.val())+"</li>"),void(this.showSearch&&this.showSearch(c.val()));d.empty(),_.opts.populateResults.call(this,d,s.results,{term:c.val(),page:this.resultsPage,context:null}),!0===s.more&&T(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.escapeMarkup(M(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){_.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2-loaded",items:s})}else this.search.removeClass("select2-active")})})));a("<li class='select2-selection-limit'>"+M(u.formatSelectionTooBig,u.element,f)+"</li>")}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function t(){var t,n,i,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(t=this.opts.element.attr("style")))for(a=0,s=(n=t.split(";")).length;a<s;a+=1)if(null!==(i=n[a].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=t.call(this);null!==n&&this.container.css("width",n)}}),{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((n=t.createTextRange()).collapse(!1),n.select()):t.setSelectionRange&&(i=this.search.val().length,t.setSelectionRange(i,i))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"selection","focusser")},initContainer:function(){var t,i,a=this.container,s=this.dropdown,o=R();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=a.find(".select2-choice"),this.focusser=a.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==L.PAGE_UP&&e.which!==L.PAGE_DOWN)switch(e.which){case L.UP:case L.DOWN:return this.moveHighlight(e.which===L.UP?-1:1),void f(e);case L.ENTER:return this.selectHighlighted(),void f(e);case L.TAB:return void this.selectHighlighted({noFocus:!0});case L.ESC:return this.cancel(e),void f(e)}else f(e)})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==L.TAB&&!L.isControl(e)&&!L.isFunctionKey(e)&&e.which!==L.ESC){if(!1!==this.opts.openOnEnter||e.which!==L.ENTER){if(e.which==L.DOWN||e.which==L.UP||e.which==L.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void f(e)}return e.which==L.DELETE||e.which==L.BACKSPACE?(this.opts.allowClear&&this.clear(),void f(e)):void 0}f(e)}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(i)})),s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=n.val(),s=null;t.query({matcher:function(e,n,i){var r=o(a,t.id(i));return r&&(s=i),r},callback:e.isFunction(i)?function(){i(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,a=this;if(this.findHighlightableChoices().each2(function(e,t){if(o(a.id(t.data("select2-data")),a.opts.element.val()))return i=e,!1}),!1!==n&&(!0===t&&i>=0?this.highlight(i):this.highlight(0)),!0===t){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(C(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),a.empty(),null!==e&&(n=this.opts.formatSelection(e,a,this.opts.escapeMarkup)),n!==t&&a.append(n),(i=this.opts.formatSelectionCssClass(e,a))!==t&&a.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,a=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=a.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:s});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){a.opts.element.val(e?a.id(e):""),a.updateSelection(e),a.setPlaceholder(),n&&a.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),P=A(I,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=r(n.val(),t.separator,t.transformVal),s=[];t.query({matcher:function(n,i,r){var l=e.grep(a,function(e){return o(e,t.id(r))}).length;return l&&s.push(r),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<a.length;n++)for(var r=a[n],l=0;l<s.length;l++){var c=s[l];if(o(r,t.id(c))){e.push(c),s.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+R()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),a=n.next(".select2-search-choice:not(.select2-locked)"),s=p(this.search);if(n.length&&(e.which==L.LEFT||e.which==L.RIGHT||e.which==L.BACKSPACE||e.which==L.DELETE||e.which==L.ENTER)){var o=n;return e.which==L.LEFT&&i.length?o=i:e.which==L.RIGHT?o=a.length?a:null:e.which===L.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),o=i.length?i:a):e.which==L.DELETE?this.unselect(n.first())&&(this.search.width(10),o=a.length?a:null):e.which==L.ENTER&&(o=null),this.selectChoice(o),f(e),void(o&&o.length||this.open())}if((e.which===L.BACKSPACE&&1==this.keydowns||e.which==L.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void f(e);if(this.selectChoice(null),this.opened())switch(e.which){case L.UP:case L.DOWN:return this.moveHighlight(e.which===L.UP?-1:1),void f(e);case L.ENTER:return this.selectHighlighted(),void f(e);case L.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case L.ESC:return this.cancel(e),void f(e)}if(e.which!==L.TAB&&!L.isControl(e)&&!L.isFunctionKey(e)&&e.which!==L.BACKSPACE&&e.which!==L.ESC){if(e.which===L.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==L.PAGE_UP&&e.which!==L.PAGE_DOWN||f(e),e.which===L.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n={},i=[],a=this;e(t).each(function(){a.id(this)in n||(n[a.id(this)]=0,i.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(i),a.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var n=this.getVal(),i=this;e(t).each(function(){n.push(i.createChoice(this))}),this.setVal(n)},createChoice:function(n){var i,a,s=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?o:r,c=this.id(n);return(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith(e("<div></div>").html(i)),(a=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(a),s&&l.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),f(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),c},unselect:function(t){var n,i,s=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(n),o.choice=n,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(i=a(this.id(n),s))>=0;)s.splice(i,1),this.setVal(s),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),s=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;s.each2(function(e,t){a(r.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&r.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&T(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+M(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,a=l(this.search);e=g(this.search)+10,t=this.search.offset().left,(i=(n=this.selection.width())-(t-this.selection.offset().left)-a)<e&&(i=n-a),i<40&&(i=n-a),i<=0&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:r(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){if(this.select)this.select.val(t);else{var n=[],i={};e(t).each(function(){this in i||(n.push(this),i[this]=0)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator))}},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)if(o(this.opts.id(t[n]),this.opts.id(e[i]))){t.splice(n,1),n--,e.splice(i,1);break}return{added:t,removed:e}},val:function(n,i){var a,s=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),i&&s.triggerChange(s.buildChangeDetails(a,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,a,s=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();a=this.data(),t||(t=[]),i=e.map(t,function(e){return s.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),
n&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),e.fn.select2=function(){var n,i,s,o,r,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],_={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])(n=0===l.length?{}:e.extend({},l[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?r=n.element.prop("multiple"):(r=n.multiple||!1,"tags"in n&&(n.multiple=r=!0)),(i=r?new window.Select2["class"].multi:new window.Select2["class"].single).init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(a(l[0],c)<0)throw"Unknown method: "+l[0];if(o=t,(i=e(this).data("select2"))===t)return;if("container"===(s=l[0])?o=i.container:"dropdown"===s?o=i.dropdown:(_[s]&&(s=_[s]),o=i[s].apply(i,l.slice(1))),a(l[0],d)>=0||a(l[0],u)>=0&&1==l.length)return!1}}),o===t?this:o},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var a=[];return b(this.text(e),n.term,a,i),a.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,i){return e?i(this.text(e)):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:S},util:{debounce:u,markMatch:b,escapeMarkup:y,stripDiacritics:i},"class":{abstract:I,single:D,multi:P}}}}(jQuery);var ICON_INPUT=function(e){"use strict";var t=function(e){return"<i class='"+e.id+"'></i>"};return e.init=function(){$("select.icon-input:visible").select2({formatResult:t,formatSelection:t,containerCssClass:"icon_picker_container",dropdownCssClass:"icon_picker_dropdown",minimumResultsForSearch:1e6})},e}(ICON_INPUT||{}),DELETE_SUBJECT_FORM=function(e){return e.init=function(){var e=$("#delete_subject_btn"),t=e.closest("form");$(".delete_subject_link").click(function(e){$(".delete_subject_dialog").slideToggle(),$(".edit_subject_dialog").slideToggle(),e.preventDefault()}),$(".subject_delete_confirmation #confirm_delete_checkbox").on("change",function(){$(this).prop("checked")?e.prop("disabled",!1):e.prop("disabled",!0)}),t.on("ajax:success",function(){$(".modal").modal("hide")})},e}(DELETE_SUBJECT_FORM||{}),ARCHIVE_SUBJECT_FORM=function(e){$(document).on("click",".upgrade_archive",function(e){UPGRADE.prompt_popup("archive"),e.preventDefault(),e.stopPropagation()}),e.init=function(){$("#archive_subject_link").click(function(e){$(".archive_subject_dialog").slideToggle(),$(".edit_subject_dialog").slideToggle(),e.preventDefault()}),$("form.archive_subject").on("ajax:success",n).on("ajax:error",i),$("form.restore_subject").on("ajax:success",a).on("ajax:error",s)};var t=function(e,t){var n=JSON.parse(t.responseText),i=I18n.t("activerecord.errors.messages.taken",{attribute:I18n.t("activerecord.attributes.subject.name")});if(n.errors&&n.errors.name&&n.errors.name[0]===i)$("#subject_name_error").text(I18n.t("subjects."+e+".name_error",{subject:n.name}));else{var a=$("<ul>");_.each(n.errors,function(e){var t=$("<li>");t.text(e),a.append(t)}),$("#subject_name_error").html(a)}$("#subject_name_change").show()},n=function(e,t){$.jGrowl(I18n.t("subjects.archived",{subject:_.escape(t.name)})),$(".modal").modal("hide"),$(document).trigger("subject:archive",t)},i=function(e,n){t("archive",n)},a=function(e,t){$.jGrowl(I18n.t("subjects.restored",{subject:_.escape(t.name)})),$(".modal").modal("hide"),$(document).trigger("subject:restore",t)},s=function(e,n){t("restore",n)};return $(document).on("subject:archive",function(e,t){EXAMTIME_DATA.collections.subjects.get(t.id).set({archived:!0,name:t.name})}),$(document).on("subject:restore",function(e,t){EXAMTIME_DATA.collections.subjects.get(t.id).set({archived:!1,name:t.name})}),e}(ARCHIVE_SUBJECT_FORM||{}),SUBJECTS_TYPEAHEAD=function(e){return e.init=function(e){var t=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:Routes.search_subjects_typeahead_path({dont_block_ui:1,q:"!QUERY"}),wildcard:"!QUERY"}});e.typeahead({highlight:!0,minLength:1},{name:"subjects",source:t})},e.init_suggested=function(e,t){var n=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:Routes.search_suggested_subjects_typeahead_path({dont_block_ui:1,q:"!QUERY"}),wildcard:"!QUERY",replace:function(e,n){var i="";return t&&(i="&"+$.param({user_types:t()})),(e+i).replace("!QUERY",encodeURIComponent(n))}}});e.typeahead({highlight:!0,minLength:1},{name:"subjects",source:n})},e}(SUBJECTS_TYPEAHEAD||{}),InterestChoice=function(e,t){var n=e.find("input[type='text']"),i=e.find(".ic_error"),a=[],s=[],o=this,r=!!t.enforce_single,l=!1,c=function(e){s.push(e),o.hide_error()},d=function(e){s=_.without(s,e)},u=function(){r?h($(this)):p($(this))},h=function(e){var t=e.closest("ul.choices");toggled_text=e.text(),e.hasClass("selected")?(t.find("li").removeClass("selected"),s=[]):(t.find("li").removeClass("selected"),e.addClass("selected"),s=[toggled_text])},p=function(e){e.toggleClass("selected");var t=e.text();e.hasClass("selected")?c(t):d(t)},f=function(t){if(""!==$.trim(t)){var n=$("<li>").addClass("selected").text(t);a.push(t),r&&(e.find("ul.choices li").removeClass("selected"),s=[]),e.find("ul.choices").append(n),c(t)}},m=function(){f(n.val()),n.val("")},g=function(e){var t=$(this).closest(".ob_interests");$(this).hide(),t.find(".choices li.hidden").removeClass("hidden"),t.find(".ob_custom_interest.hidden").removeClass("hidden"),e.preventDefault()};this.is_optional=function(){return l},this.show_error=function(){i.show()},this.scroll_to_error=function(){$(window).scrollTop(i.offset().top-10-$(".navbar-fixed-top").height())},this.hide_error=function(){i.hide()},this.get_selected=function(){return s},this.set_selected=function(t){var n=_.map(t,function(e){return e.toLowerCase()}),i=[];$.each(e.find("ul.choices li"),function(e,t){var a=$(t),s=$.trim(a.text());_.contains(n,s.toLowerCase())&&(a.addClass("selected").removeClass("hidden"),c(s),i.push(s))});var a=_.difference(t,i);_.each(a,function(e){f(e)})},e.on("click","ul.choices li",u).on("click","button",m).on("click","a.ob_show_more",g),n.on("keypress",function(e){if(13===e.which)return m(),!1}),_.each(e.find("ul.choices li"),function(e){a.push($.trim($(e).text()))}),l=1==e.data("optional")},INTEREST_CHOICES=function(e){var t,n=["levels","interests"];return e.init=function(e,i){var a=!(!i||!i.enforce_single);t={},_.each(n,function(n){if(0!==e.find("#ob_"+n).length){t[n]=new InterestChoice(e.find("#ob_"+n),{enforce_single:a});var i=e.find("input[name='_existing_"+n+"']"),s=i.val();""!==$.trim(s)&&t[n].set_selected($.parseJSON(s)),i.remove()}})},e.get_choices=function(){return t},e.validate=function(e){var n=!0;return $.each(t,function(t,i){0!==i.get_selected().length||i.is_optional()?i.hide_error():(i.show_error(),n&&e&&i.scroll_to_error(),n=!1)}),n},e.populate_for_ajax_submit=function(e,n,i){var a=_.reduce(t,function(e,t,n){return choices_selected=t.get_selected(),e.profile[n]=choices_selected.length>0?choices_selected:[""],e},{profile:{}});i.data+="&"+$.param(a)},e}(INTEREST_CHOICES||{}),init_exam_level_selector=function(e){INTEREST_CHOICES.init(e,{enforce_single:!0,params_namespace:null}),e.submit(function(){return!!INTEREST_CHOICES.validate()}),e.on("ajax:beforeSend",function(e,t,n){INTEREST_CHOICES.get_choices().levels&&(n.data+="&"+$.param({subject:{exam_level:INTEREST_CHOICES.get_choices().levels.get_selected()[0]}}))})};$(document).on("subject_modal:init",function(){ICON_INPUT.init(),DELETE_SUBJECT_FORM.init(),ARCHIVE_SUBJECT_FORM.init(),SUBJECTS_TYPEAHEAD.init($(".subject_modal #subject_name")),init_exam_level_selector($(".subject_modal").find("form.new_subject, form.edit_subject")),$(".subject_modal").find(".what_is_this").on("click",function(e){e.preventDefault()}).tooltip({placement:"right"})});var SUBJECT_FORM=function(e){var t,n=function(){return[$("#study_aid_id").length>0&&""!==$.trim($("#study_aid_id").text())?$.trim($("#study_aid_id").text()):t]};return e.open_create_subject_popup=function(e){var t=Routes.new_subject_path(),n="#new_subject";return MODAL.create_with_callback("subject_modal",t,["small_modal "+e],function(){$("form"+n).validate()}).on("submit",n,function(){var e=$(this).find('input[type="submit"]');e.addClass("disabled"),e.val(I18n.t("please_wait")),$(this).find(".loading_spinner").show()}).on("ajax:error",n,function(){var e=$(this).find('input[type="submit"]');e.removeClass("disabled"),e.val(I18n.t("subjects.save")),$(this).find(".loading_spinner").hide()})},$(document).on("ajax:error",".edit_subject, #new_subject",function(e,t){var n=JSON.parse(t.responseText);if(n.errors)if(n.errors.subject_quota){var i=$(this).closest(".modal");i.modal("hide"),i.remove(),UPGRADE.prompt_popup("subject_quota",!0)}else{var a="#subject_errors_list ul",s=n.errors;$(a).html(""),$.each(s,function(e,t){$.each(t,function(e,t){$(a).append("<li>"+t+"</li>")})}),$(a).show()}}),$(document).on("ajax:success","form#new_subject",function(e,t){if($("#subject_errors_list ul").hide(),$.jGrowl(I18n.t("subjects.added")),EXAMTIME_DATA.collections.subjects.add(t),$(".modal").hasClass("from_pin_modal")){var i=n();$(document).trigger("study_aids:move_subject",{study_aids:i})}else $(".modal").hasClass("from_meta_modal")&&$(".resource_edit_info, .study_aid_page_title")[0].click();$(document).trigger("subject_created"),$(".subject_modal").modal("hide")}),$(document).on("click",".create_subject_btn",function(t){t.preventDefault(),e.open_create_subject_popup("")}),$(document).on("click",".move_asset_modal .create_subject_from_picker",function(){$(".modal").modal("hide"),t=$(".modal input#study_aids").val(),e.open_create_subject_popup("from_pin_modal")}),$(document).on("click",".from_pin_modal #cancel_button",function(e){e.preventDefault();var t=n();$(document).trigger("study_aids:move_subject",{study_aids:t})}),$(document).on("click","#edit_meta_content .create_subject_from_picker",function(){$(".modal").modal("hide"),e.open_create_subject_popup("from_meta_modal")}),$(document).on("click",".from_meta_modal #cancel_button",function(e){e.preventDefault(),$(".resource_edit_info, .study_aid_page_title")[0].click()}),e}(SUBJECT_FORM||{}),STUDY_AID_ACTIONS=function(e){var t,n=function(n){if(MOBILE.is_mobile())do_redirect(Routes.subject_path(_.pick({id:n.subject_id,topic_id:n.study_aids[0].topic_id,ms_teams:MS_TEAMS.is_teams_frame()?"1":null,_options:!0},_.identity)),!0);else{var i=[];if(SUBJECT_STUDY_AIDS.in_subject_page()){var a=[];$.each(n.study_aids,function(e,t){var n=SUBJECT_STUDY_AIDS.find_model_in_all_collections(t.id);void 0!==n?(a.push({model:n,topic_id:t.topic_id}),i.push({id:n.get("folder_id"),change:-1})):a.push({presenter:t.subject_presenter,topic_id:t.topic_id})}),a.length>0&&$.each(a,function(e,t){var n=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t.topic_id);"undefined"!=typeof EXAMTIME_DATA.collections[n]?("undefined"!=typeof t.model?(SUBJECT_STUDY_AIDS.find_and_remove_model_in_all_collections(t.model.get("id")),t.model.set({position:null,folder_id:t.topic_id}),EXAMTIME_DATA.collections[n].add(t.model)):EXAMTIME_DATA.collections[n].add(t.presenter),i.push({id:t.topic_id,change:1})):"undefined"!=typeof t.model&&SUBJECT_STUDY_AIDS.find_and_remove_model_in_all_collections(t.model.get("id"))}),SUBJECT_STUDY_AIDS.update_topics_study_aid_counts(i)}void 0!==t&&t.length>0&&$.each(t,function(e,t){var i=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t);"undefined"!=typeof EXAMTIME_DATA.collections[i]&&EXAMTIME_DATA.collections[i].remove(_.pluck(n.study_aids,"id"))}),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear(),SUBJECT_MANAGE.render();var s="move";n.user_is_pinning&&($(".additional_global_controls .move_resource.move").show(),$(".additional_global_controls .move_resource.pin").hide(),$.each(n.study_aids,function(e,t){$(".pin_resource[data-id="+t.id+"]").remove()}),s="pin");var o=EXAMTIME_DATA.collections.subjects;if(void 0!==o){if("undefined"!=typeof n.old_subject_id){var r=o.get(n.old_subject_id);if(void 0!==r){var l=r.attributes.study_aid_count;void 0!==l&&r.set({study_aid_count:l-n.study_aids.length})}}var c=o.get(n.subject_id);void 0!==c&&c.set({study_aid_count:n.subject.study_aid_count})}n.own_resource||!n.subject?e.update_study_aid_pin_to():(e.update_study_aid_pin_count("add"),e.update_study_aid_pin_to({id:n.subject.id,name:n.subject.name})),n.subject&&$.jGrowl(I18n.t("study_aids."+s+".success",{subject:_.escape(n.subject.name)}));var d=$.map(n.study_aids,function(e){return e.id});$(document).trigger("study_aids:"+s+"_success",{study_aids:d,subject:n.subject}),STUDY_AID_ACTIONS.is_view_mode()?n.study_aids[0].current_user_author&&$(".publicmeta").find("#study_aid_description .description_text").html(_.escape(n.study_aids[0].description)):SUBJECT_STUDY_AIDS.in_subject_page()&&SUBJECT_STUDY_AIDS.check_show_empty_message(),$(".modal").modal("hide"),$("#et_loading_spinner").hide(),"pin"===s&&$(".controls_container .btn.move-asset.pin").length&&($(".controls_container .btn.move-asset.pin").addClass("hidden"),$(".controls_container .btn.move-asset.move").removeClass("hidden"))}},i=function(e){var t=JSON.parse(e.responseText),n=t.user_is_pinning?"pin":"move";t.quota_limit?UPGRADE.prompt_popup(t.quota_limit):($.jGrowl(I18n.t("study_aids."+n+".error")),$(".modal").modal("hide"),$("#et_loading_spinner").hide())};e.move_study_aid_ids_to_topic_id=function(e,t){$.ajax({type:"POST",url:Routes.move_topic_study_aids_path(),data:{study_aids:e,topic_id:t},dataType:"json",success:function(){var i=_.map(e,function(e){return{id:e,topic_id:t}});n({study_aids:i})}})},e.unpin_study_aid=function(e){var n=e.study_aids,i=(e.subject,Routes.unpin_popup_study_aids_path({study_aids:n.join(",")}));t=e.topic_ids,n.length>0&&(MODAL.create("move_asset_modal",i,["small_modal"]),$('[data-toggle="dropdown"]').parent().removeClass("open"))},e.move_study_aid=function(e){var n=e.study_aids,i=e.subject,a=Routes.move_popup_study_aids_path({study_aids:n.join(",")});t=e.topic_ids,n.length>0&&(MODAL.create_with_callback("move_asset_modal",a,["small_modal"],function(){if(void 0!==i){var e=$("#move_study_aid_popup .subject_selection select");e.find('option[value="'+i+'"]').prop("selected",!0),e.trigger("change")}s()}),$('[data-toggle="dropdown"]').parent().removeClass("open"))},e.update_study_aid_pin_count=function(e,t){var n=$(".meta_stat_container .pinned_count");if(n.length){var i,a=parseInt(n.text(),10);"add"===e?i=a+1:"sub"===e?(i=a-1)<0&&(i=0):i=t||0,n.text(i)}},e.update_study_aid_pin_to=function(e){if($("#pinned_meta").hide(),e){var t=$("<a href='"+Routes.subject_path({id:e.id})+"'>");t.text(e.name),$("#pinned_meta #pinned_subject_name").empty().append(t),$("#pinned_meta").show()}},$(document).on("study_aids:move_subject",function(t,n){e.move_study_aid(n)}),$(document).on("click",".move-asset",function(t){$(document).trigger("navigation:clear_popovers"),e.move_study_aid({study_aids:[$(this).data("id")]}),t.preventDefault()}),$(document).on("click",".specify_subject_topic .specify_topic",function(){var e=$(this).closest(".subject_and_topic_selection");a(e,e.find("select#subject_id").val()),$(this).hide()}),$(document).on("change","#move_study_aid_popup select#subject_id",function(){var e=$(this).val(),t=$(this).closest(".subject_and_topic_selection");t.find(".specify_topic_select:visible").length>0&&a(t,e)});var a=function(e,t){e.find("select[name=topic_id]").attr("disabled",!0),e.find(".specify_topic_select").removeClass("hidden").addClass("hidden");var n=e.find("#subject_"+t+"_topics");n.removeClass("hidden"),n.find("select[name=topic_id]").attr("disabled",!1)};$(document).on("click","#move_asset_btn",function(){$("#et_loading_spinner").show()});var s=function(){var e=!1,t=$(".subject_and_topic_selection:visible"),n=t.find("#_subject_id");return $("#current_user_default_subject").val()==n.val()||""===n.val()?(e=!0,t.find(".specify_topic_select").hide(),t.find(".specify_subject_topic .specify_topic").hide()):t.find(".specify_topic_select").hasClass("hidden")?t.find(".specify_subject_topic .specify_topic").show():t.find(".specify_topic_select").show(),e};return $(document).on("change",".subject_and_topic_selection #_subject_id",function(){var e=s(),t=$(".subject_and_topic_selection:visible");""!==$(this).val()&&$.ajax({type:"GET",url:Routes.subject_folders_dropdown_path($(this).val()),beforeSend:function(){t.find(".specify_topic_select").hasClass("hidden")||t.find(".specify_subject_topic #moving_loading_icon").show(),t.find(".specify_topic_select").hide()},success:function(n){t.find(".specify_topic_select").hasClass("hidden")||t.find(".specify_subject_topic #moving_loading_icon").hide(),t.find(".specify_topic_select").html(n),e||t.find(".specify_topic_select").show()},dataType:"html"})}),$(document).on("ajax:success",".move_asset_modal",function(e,t){n(t)}),$(document).on("ajax:error",".move_asset_modal",function(e,t){i(t)}),e}(STUDY_AID_ACTIONS||{}),UserDecorator=function(e){this.attributes=e||{},this.plan_wrapper=this.attributes.plan_wrapper||{}};UserDecorator.prototype.is_institution_user=function(){return!!this.attributes.institution},UserDecorator.prototype.can_create_group=function(){return!!this.plan_wrapper["access_public_groups?"]||(this.is_institution_user()&&this.plan_wrapper["create_institution_groups?"]||this.is_institution_user()&&this.attributes["institution_admin?"])},UserDecorator.prototype.can_ms_teams_create=function(){return!!this.plan_wrapper["ms_teams_create?"]},UserDecorator.prototype.can_ms_teams_submit=function(){return!("microsoft_graph_auth"!==this.attributes.provider)},UserDecorator.prototype.can_clone=function(){return!!this.plan_wrapper["copy_public_resources?"]},UserDecorator.prototype.can_create_private=function(){return this.plan_wrapper.private_quota>0},UserDecorator.prototype.can_lock=function(){return!!this.plan_wrapper["lock_for_copy?"]};var TEAMS_ASSIGNMENTS=function(e){var t=function(e,t){e.querySelectorAll(".teams_assignment form.attach_resource").forEach(function(e){var n=Array.apply(null,Array(3)).map(function(){return document.createElement("input")});Object.keys(t).forEach(function(i,a){n[a].setAttribute("type","hidden"),n[a].setAttribute("name",i),n[a].setAttribute("value",t[i]),t[i]&&e.appendChild(n[a])})})},n=function(e){e.querySelectorAll(".teams_class h3").forEach(function(t){onClickOrTap(t,function(){var n=t.closest(".teams_class");n.classList.contains("collapsed")?(e.querySelectorAll(".teams_class").forEach(function(e){e.classList.add("collapsed")}),n.classList.remove("collapsed")):n.classList.add("collapsed")})})},i=function(e,t){e.querySelectorAll(".teams_assignment form.attach_resource").forEach(function(e){var n=e.closest(".teams_assignment").querySelector(".assignment_name").textContent;$(e).on("ajax:success",function(e,i){i.errors?$.jGrowl(i.errors.join("\n")):($(".modal").modal("hide"),$.jGrowl(I18n.t("ms_teams.assignments.attach_resource.success",{study_aid_name:t.get("title"),assignment_name:n})))}),$(e).on("ajax:error",function(){$.jGrowl(I18n.t("ms_teams.assignments.attach_resource.failure"))})})};return e.init=function(e={}){var a=document.getElementById("ms_teams_assignments");a&&(t(a,{teams_tenant_id:e.teams_tenant_id,teams_token:e.teams_token,teams_user_id:e.teams_user_id}),n(a),i(a,e.study_aid),a.addEventListener("change",function(e){var t=e.target;"and_submit_teams_assignment"===t.id&&this.querySelectorAll("form.attach_resource input[name=and_submit]").forEach(function(e){e.value=t.value})}))},e}(TEAMS_ASSIGNMENTS||{}),TeamsResourceActionsViewMixin={teams_submit:function(){var e=this;microsoftTeams.app.getContext().then(function(t){TEAMS_SSO.get_client_side_token().then(function(n){MODAL.create_with_callback("attach_to_teams_assignment",Routes.ms_teams_assignments_path({teams_tenant_id:t.user.tenant.id,teams_token:n,study_aid_id:e.model.get("id")}),["small_modal"],function(){TEAMS_ASSIGNMENTS.init({teams_user_id:t.user.id,teams_tenant_id:t.user.tenant.id,teams_token:n,study_aid:e.model})})})["catch"](function(e){console.log(e)})})}};Backbone.View.prototype.addEvents=function(e){this.delegateEvents(_.extend(_.clone(this.events),e))};var ResourceActionsView=Backbone.View.extend({mixins:MS_TEAMS.is_teams_frame()?[TeamsResourceActionsViewMixin]:[],events:{"click .action a":"click_action"},all_actions:["play","edit","copy","pin","unpin","move","social","share","eps","data_capture","reports","email","print","delete"],template:SMT["study_aids/resource_actions"],initialize:function(){this.actions=_.tap(this.all_actions,function(e){MS_TEAMS.is_teams_frame()&&e.push("teams_submit")}).filter(function(e){return e!==(STUDY_AID_ACTIONS.is_edit_mode()?"edit":"play")}),this.user=new UserDecorator(CURRENT_USER),_.bindAll(this,"render","click_action")},click_action:function(e){var t=$(e.currentTarget),n=t.closest(".action"),i=t.attr("class")||n.data("action");t.attr("href")&&"#"!==t.attr("href")||e.preventDefault(),"sign_in_modal"!==i&&"public"!==i&&n.hasClass("disabled")||("delete"===i&&(i="r_delete"),"public"===i&&(i="r_public"),this[i]&&this[i]())},play:function(){MS_TEAMS.is_teams_frame()?do_redirect("/p/"+this.model.get("id")+"?ms_teams=1",!0):do_redirect(this.model.get("url"))},edit:function(){var e=this;MS_TEAMS.is_teams_frame()?this.user.can_ms_teams_create()?do_redirect(e.model.get("edit_url"),!0):TEAMS_SSO.decorate_hrefs_for_auth([e.model.get("edit_url")],!0).then(function(e){MS_TEAMS.subscription_prompt_or_alert(e[0])}):do_redirect(e.model.get("edit_url"))},copy:function(){STUDY_AID_ACTIONS.get_clone_asset_popup_for_id(this.model.get("id"))},pin:function(){this.move()},unpin:function(){STUDY_AID_ACTIONS.unpin_study_aid({study_aids:[this.model.get("id")]})},move:function(){STUDY_AID_ACTIONS.move_study_aid({study_aids:[this.model.get("id")]})},social:function(){SHARING.share_study_aid([this.model.get("id")],["social"])},friends:function(){SHARING.share_study_aid([this.model.get("id")],["friends"])},groups:function(){SHARING.share_study_aid([this.model.get("id")],["groups"])},email:function(){SHARING.share_study_aid([this.model.get("id")],["email"])},eps:function(){this.model.get("permissions").indexOf("external_private_share")>-1&&EXTERNAL_PRIVATE_SHARE.share_popup(this.model.get("id"),"StudyAid")},data_capture:function(){this.model.get("permissions").indexOf("data_capture")>-1&&DATA_CAPTURE.create_data_capture_link(this.model.get("id"),"StudyAid")},reports:function(){this.model.get("permissions").indexOf("consumption_reports")>-1&&do_redirect(Routes.consumption_reports_path({for_study_aid:this.model.get("id")})+"#study_aid_report")},print:function(){var e,t=$(".general_print_modal"),n=$(".footer_print.action_button");if(track_event("export_resource",this.model.get("study_aid_type")+":print"),t.length>0)return t.remove(),$("body").append(t),void t.modal("show");if(n.length>0&&"flash_card_deck"!==this.model.get("study_aid_type"))n.click();else{e="flash_card_deck"===this.model.get("study_aid_type")?Routes.print_flash_card_deck_path({id:this.model.get("id")}):Routes.show_public_path({id:this.model.get("id"),print:1,_options:!0});var i=$("<iframe>").attr("src",e).css({width:"1px",height:"1px",border:0});$(document).off("iframe:printed").on("iframe:printed",function(){$.unblockUI(),setTimeout(function(){i.remove()},100)}),$("body").append(i),$.blockUI({message:I18n.t("actions.print_loading"),overlayCSS:{opacity:.5},fadeIn:0,fadeOut:0})}},r_delete:function(){var e=SUBJECT_STUDY_AIDS.in_subject_page(),t={study_aids:[this.model.get("id")],redirect_after_delete:!e};e&&(t.topic=[this.model.get("folder_id")]),STUDY_AID_ACTIONS.delete_study_aid(t)},sign_in_modal:function(){$(".actions_modal").modal("hide"),$("#examtime_header #sign_in").click()},r_public:function(){var e=this.model.get("id"),t=Routes.edit_meta_popup_study_aids_path({study_aid_id:e,from_state_icon:!0,_options:!0});STUDY_AID_ACTIONS.modal(t,"on",function(){STUDY_AID_ACTIONS.set_up_modal($(".edit_meta_modal"))})},render:function(){var e="",t=this._default_attributes();CURRENT_USER&&(t.signed_in=!0,CURRENT_USER.institution&&(e=CURRENT_USER.institution.primary_contact)),_.each(this.actions,function(n){t["icon_"+n]="<span class='action_sprite bg-action-"+n+"'></span>",t["title_"+n]=I18n.t("actions.titles."+n),t["description_"+n]=I18n.t("actions.descriptions."+n),t["description_"+n+"_unauth"]=I18n.t("actions.descriptions."+n+"_unauth"),-1!==["eps","reports","data_capture","copy"].indexOf(n)?(t["description_"+n+"_disabled_upgrade"]=I18n.t("actions.descriptions."+n+"_disabled.upgrade"),t["description_"+n+"_disabled_permission"]=I18n.t("actions.descriptions."+n+"_disabled.permission",{primary_contact:e}),t["description_"+n+"_disabled_author"]=I18n.t("actions.descriptions."+n+"_disabled.author")):t["description_"+n+"_disabled"]=I18n.t("actions.descriptions."+n+"_disabled")},this),t.description_email_private=I18n.t("actions.descriptions.email_private"),$.extend(t,this.model.attributes);var n=this.template(t),i=MODAL.create_mustache_modal("actions_modal",n,["small_modal"]);i.find(".eps .what_is_this").attr("data-title",I18n.t("payments.external_private_shares.share_popup.resources.help_text")),i.find(".eps .what_is_this.eps_copy_message").attr("data-title",I18n.t("actions.descriptions.eps_disabled.eps_copy_message")),i.find(".reports .what_is_this.reports_copy_message").attr("data-title",I18n.t("actions.descriptions.reports_disabled.reports_copy_message")),i.find(".data_capture .what_is_this").attr("data-title",I18n.t("payments.data_capture.create_popup.resources.help_text")),i.find(".what_is_this").tooltip(),this.setElement(i)},_default_attributes:function(){return{close:I18n.t("general.close"),can_manage:this.model.get("permissions").indexOf("manage")>-1,can_clone:this.model.get("permissions").indexOf("clone")>-1,can_share:this.model.get("permissions").indexOf("share")>-1,can_eps:this.model.get("permissions").indexOf("external_private_share")>-1,can_report:this.model.get("permissions").indexOf("consumption_reports")>-1,can_data_capture:this.model.get("permissions").indexOf("data_capture")>-1,show_data_capture:"quiz"===this.model.get("study_aid_type"),edit_mode:STUDY_AID_ACTIONS.is_edit_mode(),study_aid_id:this.model.get("id"),user_can_clone:this.user.can_clone(),user_can_private:this.user.can_create_private(),user_can_lock:this.user.can_lock(),teams_frame:MS_TEAMS.is_teams_frame(),user_can_teams_submit:this.user.can_ms_teams_submit()}}}),ResourceView=Backbone.View.extend({events:{"click .tile_dismiss":"dismiss_on_server","click .btn_actions":"click_actions_button","click .tile_overlay":"click_tile_overlay","click .select_resource":"click_select"},i18n:{info_tooltip:I18n.t("general.tooltips.study_aid.info"),actions_tooltip:I18n.t("general.tooltips.study_aid.actions"),by_text:I18n.t("study_aids.meta.by")},template:SMT["study_aids/resource_tile_new"],initialize:function(e){var t=this;_.bindAll(this,"after_pin","after_unpin","set_pin","click_tile_overlay"),$(document).on("study_aids:pin_success",this.after_pin).on("study_aids:unpin_success",this.after_unpin),_.each(ResourceViewAdditionalOptions,function(n){t[n]=e&&e[n]||t.template_defaults[n]}),e&&"template"in e&&(t.template=e.template)},template_defaults:{num_cols:1,hide_ratings:!1,restrict_to_copyable_only:!1},click_select:function(e){var t=this.$el.closest(".resource"),n=this.$(".select_resource");t.hasClass("disabled")||(t.toggleClass("checkbox-selected"),this.$el.trigger("study_aid:toggle",{id:this.model.get("id"),selected:t.hasClass("checkbox-selected"),attributes:this.model.attributes}),!MOBILE.is_mobile()&&$(e.target).hasClass("resource-tile__checkbox")||n.prop("checked",t.hasClass("checkbox-selected")))},click_tile_overlay:function(e){var t=this.$el.closest(".resource");this.$(".select_resource");t.hasClass("no_data_capture")?$.jGrowl(I18n.t("search.resource.require_data_capture",{edit_url:this.model.get("edit_url")+"?create_form=true"})):t.hasClass("copy_not_permitted")?UPGRADE.prompt_popup("copy_and_edit"):!t.hasClass("disabled")&&this.hide_tile_controls&&this.click_select(e)},click_actions_button:function(e){new ResourceActionsView({model:this.model}).render(),e.preventDefault(),track_event("resource","view_actions")},set_pin:function(e,t){var n=_.map(e.study_aids,function(e){return parseInt(e,10)}),i=this.model.get("id");n.indexOf(i)>-1&&(this.model.set("pinned_by",t),this.render())},after_pin:function(e,t){this.set_pin(t,!0)},after_unpin:function(e,t){this.set_pin(t,!1)},pin:function(e){var t=this.model.get("id"),n=$("#current_subject_id").val();$(document).trigger("study_aids:move_subject",{study_aids:[t],subject:n}),e.preventDefault()},dismiss:function(){if(!this.dismissed){this.dismissed=!0,this.$el.find(".tile_disabled_overlay").show();var e=this;this.$el.fadeOut(400,function(){e.model.trigger("dismiss",e.model),e.$el.remove()})}},dismiss_on_server:function(){this.dismiss(),$.ajax({type:"POST",url:Routes.dismiss_related_resources_path({id:this.model.get("id")})})},render:function(){var e=this,t={grid_cols:12/this.num_cols,no_data_capture:this._no_data_capture_support(),copy_not_permitted:this._copy_not_permitted()};_.each(ResourceViewAdditionalOptions,function(n){t[n]=e[n]});var n=_.extend({},this.model.toJSON(),t,this.i18n),i=$(this.template(n));if(this.$el.replaceWith(i),this.setElement(i),!e.hide_ratings){var a=new ReadOnlyRatingsView({model:this.model,icon_size:"small",skip_growl:!0});this.$el.find("#rating_"+this.model.get("id")).html(a.$el)}return this},_no_data_capture_support:function(){return this.restrict_to_data_capture_only&&!this.model.get("has_data_capture_form")},_copy_not_permitted:function(){return!this.model.get("authored_by")&&this.restrict_to_copyable_only&&(!this.model.get("copyable")||-1===this.model.get("permissions").indexOf("clone"))}}),ResourceCollectionView=Backbone.View.extend({events:{"change .criteria_container input[name='type']":"filter_by_type","study_aid:toggle":"toggle_study_aid"},initialize:function(e){var t=this;_.bindAll(this,"filter_by_type","render"),this.collection.on("dismiss",this.dismiss_model,this),this.collection.on("remove",this.render_replacement,this),this.filter_type="all",this.view_count=e&&e.view_count||12,_.each(ResourceViewAdditionalOptions,function(n){t[n]=e&&e[n]}),this.render()},dismiss_model:function(e){this.collection.remove(e)},filter_by_type:function(){var e=this.$el.find(".criteria_container input[name='type']:checked").val();this.filter_type=e,this.render({reset:!0})},toggle_study_aid:function(e,t){this.trigger("study_aid:selection_updated",{e:e,data:t}),STUDY_AID_ACTIONS_STICKY_TOOLBAR.toggle_study_aid()},render_replacement:function(e){var t=this,n=this.$el.find(".resource_container").find(".tile").length,i=(this.view_count,{})
;if(_.each(ResourceViewAdditionalOptions,function(e){i[e]=t[e]}),"all"===this.filter_type?i.model=this.collection.models.slice(n,n+1)[0]:i.model=this.collection.where({study_aid_type:this.filter_type}).slice(n,n+1)[0],i.model){var a=new ResourceView(i).render().$el;this.$el.find(".resource[data-id="+e.id+"]").after(a.fadeIn(800));var s=new ReadOnlyRatingsView({model:i.model,icon_size:"small"});return $("#rating_"+i.model.id).html(s.$el),is_touch_device()||a.find(".tile_tooltip").tooltip({placement:"top"}),this}},render:function(e){var t,n=this,i=this.$el.find(".resource_container"),a={};_.each(ResourceViewAdditionalOptions,function(e){a[e]=n[e]}),0===i.length&&(i=$("<div class='resource_container row'>"),this.$el.append(i)),e&&e.reset&&i.empty();var s=i.find(".tile").length,o=this.view_count;return t="all"===this.filter_type?this.collection.first(o).slice(s,o):this.collection.where({study_aid_type:this.filter_type}).slice(s,o),_.each(t,function(e){var t=new ResourceView(_.extend({},{model:e},a)).render().$el;i.append(t),t.css("visibility","hidden"),_.defer(function(){t.css("visibility","visible");var e=t.css("opacity");t.css("opacity",0),t.fadeTo(800,e,function(){t.length&&t.removeAttr("style")})})}),is_touch_device()||$(".tile_tooltip").tooltip({placement:"top"}),this}}),StudyAid=Backbone.Model.extend({initialize:function(){"undefined"!=typeof this.attributes.created_at&&(this.attributes.created_at_timestamp=this.attributes.created_at),"undefined"!=typeof this.attributes.folder_created_at&&(this.attributes.folder_created_at_timestamp=this.attributes.folder_created_at),this.get("folder_created_at")&&(this.attributes.folder_created_at=dayjs(this.get("folder_created_at")).format(I18n.dayjs_date_format)),this.attributes.created_at=dayjs(this.get("created_at")).format(I18n.dayjs_date_format),this.attributes.updated_at=dayjs(this.get("updated_at")).format(I18n.dayjs_date_format)}}),StudyAidCollection=Backbone.Collection.extend({model:StudyAid,initialize:function(e,t){t&&("undefined"==typeof t.sort||t.sort)&&(this.sort_field=t&&t.sort_field?t.sort_field:"title",this.sort_direction=t&&t.sort_direction?t.sort_direction:"asc")},sort_by_field:function(e,t){this.sort_field=e,this.sort_direction=t||"asc",this.sort()},get_sort_value:function(e){var t=e.get(this.sort_field);return"position"===this.sort_field&&null===t?t=e.get("title")||I18n.t("study_aids.untitled"):"title"===this.sort_field&&null===t&&(t=I18n.t("study_aids.untitled")),"string"==typeof t&&(t=t.toLowerCase()),"desc"===this.sort_direction?(null==t&&(t=-1),t=-t):null==t&&(t="ZZZZZZZZZZZZZZZ"),t},comparator:function(e,t){var n=this.get_sort_value(e),i=this.get_sort_value(t);return _.isNumber(n)||_.isNumber(i)?_.isNumber(n)?_.isNumber(i)?n>i?1:n<i?-1:0:-1:1:n>i?1:n<i?-1:0},get_common_permissions:function(e){var t=this.models.filter(function(t){return _.contains(e,t.id)});return _.reduce(t,function(e,t){return 0===e.length&&(e=e.concat(t.get("permissions"))),_.intersection(e,t.get("permissions"))},[])},any_deleted:function(e){var t=this.models.filter(function(t){return _.contains(e,t.id)}),n=!1;return _.each(t,function(e){if(!0===e.get("is_deleted"))return n=!0,!1}),n},all_pinned:function(e){var t=this.models.filter(function(t){return _.contains(e,t.id)}),n=!0;return _.each(t,function(e){if(!0!==e.get("pinned_by"))return n=!1,!1}),n},can_manage_all:function(e){return _.contains(this.get_common_permissions(e),"manage")},can_unshare_all:function(e){return _.contains(this.get_common_permissions(e),"unshare")}}),SEARCH_RESULTS=function(e){var t,n,i,a,s,o,r,l=8,c=null,d="form.main_search_form .site_search.search_field#q",u=".search_container",h='input[name="scope"]',p='input[name="types"]',f=".search_subjects",m=".search_topics",g=".search_subjects_topics_container",v='input[name="selected_resources"]',b=".shared_resource_search_count",y=".search_results",w=".search_ok_cancel",x=!1,S={},T=null,M=null,C=[],k=!1,E=!1,A=null,I=!1,D=!1,P=!1,R=!1,O=function(){return _.map(t.find(p+":checked"),function(e){return $(e).val()}).join(",")},z=function(){var n=!1,i=!1,a=t.find("#scope_personal,#scope_owned_by"),s=t.find(f+" select"),o=t.find(m);return t.find("#types-all").prop("checked")||(t.find('input[name="types"]').prop("checked",!0),n=!0),"true"===$("#public_state").val()?(t.find(".non_public_scope").hide(),t.find("#scope_personal_public").prop("checked")&&"0"===s.val()||(s.val(0),o.hide(),t.find("#scope_personal_public").prop("checked",!0).change(),i=!0)):(!E||a.prop("checked")&&"0"===s.val()||(s.val(0),o.hide(),a.prop("checked",!0).change(),i=!0),t.find(".non_public_scope").length>0&&t.find(".non_public_scope").show()),!i&&n&&(e.update(),i=!0),i},N=function(){var e=$("title").text(),n=location.href,a=n.split("?"),o=params_from_url(n);o.q=i.val(),o.scope=t.find(h+":checked").val(),o.types=O(),o.page=s;var r=a[0]+"?"+params_to_url(o);r!=n&&window.history&&window.history.pushState&&history.pushState({url:r},e,r)},j=function(n){var i=e.get_selected_resources(),a=""+n.id;if(n.selected)i.push(a),S[a]=n.attributes;else{var s=i.indexOf(a);s>-1&&i.splice(s,1),delete S[a]}t.find(v).val(_.uniq(i).join(",")),F(),e.update_select_only_one()},L=function(){var n=e.get_selected_resources();n.length>0&&_.each(n,function(e){t.find(y+" .resource[data-id='"+e+"']").addClass("checkbox-selected").find("input[type='checkbox']").prop("checked",!0)})},B=function(e){t.find(w+" .btn-ok").toggleClass("disabled",!e)},F=function(){if(!I){var n=e.get_selected_resources();B(r?n.length>=r:n.length>0),t.find(b+" h3").text(I18n.t("actionbar.selected_study_aid",{count:n.length}))}},q=function(a){var o=a.query,r=a.iTotalRecords;if(n.empty(),R&&$("#no_content").hide(),0===r)n.text(I18n.t("search.study_aids.no_results")),t.find(".search_results_controls").hide();else{if(0===a.collection.length)return t.find(".search_results_controls").hide(),s=1,void e.update();t.find(".search_results_controls").show()}var d=new StudyAidCollection(a.collection,{sort:!1});c&&c.off(),(c=new ResourceCollectionView({collection:d,el:n,view_count:d.length,dismissable:!1,wide:!E,show_view_count:!0,show_pin_count:!1,show_checkbox:E&&!M,hide_tile_controls:E,num_cols:2,restrict_to_data_capture_only:D,restrict_to_copyable_only:P})).on("study_aid:selection_updated",function(e){i.blur(),j(e.data),M&&M(e.data.id)}),a.collection.forEach(function(e){var t=new StudyAid(e),n=new ReadOnlyRatingsView({model:t,icon_size:"small"});$("#rating_"+e.id).html(n.$el)});var u,p=(s-1)*l+1,f=a.collection.length+p-1,m=1===s,g=s*l>=r;if(t.find(".search_prev").toggleClass("disabled",m).attr("disabled",m),t.find(".search_next").toggleClass("disabled",g).attr("disabled",g),t.find(".page_info").text(I18n.t("tables.start_end_total_custom",{start:p,end:f,total:r})),""===o){var v,b=t.find(h+":checked").val();b&&(v=b),_.includes(["personal","personal_public","owned_by"],v)?u=I18n.t("search.results.count_for_empty",{count:a.iTotalDisplayRecords}):(u=I18n.t("search.empty_search_warning"),E&&n.text(u))}else u=I18n.t("search.results.count",{query:o,count:a.iTotalDisplayRecords});if(R&&"owned_by"===v&&0===r&&(n.html(""),$("#no_content").show()),E)F(),L(),t.closest(".modal").on("hidden.bs.modal",function(){e.unselect_resources()}),e.update_disable_from_selection(),e.update_select_only_one();else if(t.find("h2.search_title").html(u),$("#search").length>0){var y=$("#search").position().top;$(document).scrollTop()>y&&scroll(0,y),$(document).trigger("search_table_reloaded")}$(".what_is_this").tooltip("dispose").tooltip()},H=function(){t.find(".search_loading").show()},V=function(){t.find(".search_loading").hide()},G=function(){H();var e=i.val(),a=t.find(h+":checked").val();e!==I18n.t("search.placeholder")&&e!==I18n.t("general.search")||(e=""),$.ajax({dataType:"json",type:"GET",url:Routes.search_resources_path(),data:{datatable:!0,q:e,per_page:l,scope:a,study_aid_type:O(),bCheckboxes:E,page:s,topics:t.find(m+" select:visible").val()},success:q,error:function(){n.text(I18n.t("search.errors.temporarily_unavailable"))},complete:function(){V()}})},U=function(e,t,n){var i=n;return e&&"undefined"!=typeof e[t]&&(i=e[t]),i},W=function(){t.find(y).empty(),t.find(".search_results_controls").hide(),z()||G()},Y=function(n={}){var a;if(I=!1,x)return i.val(""),void(0===t.find("[name='scope']:visible").length?(t.find(y).empty(),t.find(".search_results_controls").hide(),e.update()):W());x=!0,n.is_teams_assignment&&((a=document.querySelector(".search_criteria fieldset#types")).querySelector("input#types_Quiz").checked=!0,a.style.display="block",document.querySelector(".search_criteria fieldset#search_scopes").style.display="none"),S={},PAGE_EVENTS.off("state:change").on("state:change",z),t.off().find("*").off(),s=parseInt(t.find(".search_page").val()||1,10),t.find(".search_next:not(.disabled)").off("click").on("click",function(t){$(this).addClass("disabled"),s+=1,e.update(),t.preventDefault()}),t.find(".search_prev:not(.disabled)").off("click").on("click",function(t){$(this).addClass("disabled"),s-=1,e.update(),t.preventDefault()});var o=i.val();if(o!==I18n.t("search.placeholder")&&o!==I18n.t("general.search")||i.val(""),i.on("input keyup",_.debounce(e.update,500)),t.find(h).off("change").on("change",function(){if(E){var n=t.find(h+":checked").val();"personal"===n.split("_")[0]||"my_pins"===n?t.find(g).show():t.find(g).hide()}s=1,e.update()}),t.find(p).off("change").on("change",function(){"checkbox"===$(this).attr("type")&&("types-all"===$(this).attr("id")?t.find(p).prop("checked",$(this).prop("checked")):t.find("#types-all").prop("checked",0===t.find(p+":not('#types-all'):not(:checked)").length)),s=1,e.update()}),t.find(".search_criteria label").on("click",function(e){var n=$(this).attr("for");t.find("#"+n).click(),e.preventDefault()}),E){var r=t.find(m);t.find(f+" select").on("change",function(){var t=parseInt($(this).val());t>0?(r.find("select").hide(),r.show(),r.find("#search_topic_"+t).show()):r.hide().find("select").hide(),s=1,e.update()}),r.find("select").on("change",function(){s=1,e.update()})}if(null!==T){var l=t.find(w);l.show(),l.on("click",".btn-ok",function(){$(this).addClass("disabled"),I=!0,T("ok")}),l.on("click",".btn-cancel",function(){T("cancel")})}0===t.find("[name='scope']:visible").length?e.update():W()};return e.init=function(e){if(T=U(e,"select_callback",null),M=U(e,"click_resource_callback",null),C=U(e,"disable_from_selection",[]),k=U(e,"select_only_one",!1),E=U(e,"resource_search_modal",!1),A=U(e,"resource_id",null),a=U(e,"search_field_selector",d),l=E?8:12,o=!k&&U(e,"max_select",null),r=!k&&U(e,"min_select",0),D=U(e,"restrict_to_data_capture_only",!1),P=U(e,"restrict_to_copyable_only",!1),R=U(e,"ms_teams",!1),0!==(i=$(a)).length){t=i.closest(u),x=!1,0===t.length&&(t=$("#search_page_container")),n=t.find(y);var s=$(a).closest(".resource_search_modal"),c=s.length>0,_=s.is(":visible");c&&!_?$(a).closest(".modal").off("shown.bs.modal").on("shown.bs.modal",Y):R&&microsoftTeams?microsoftTeams.app.getContext().then(function(e){var t=JSON.parse(e.subEntityId||"{}").assignmentId;Y({is_teams_assignment:!!t})}):Y()}},e.update=function(){G(),E||N()},e.set_disable_from_selection=function(e){C=e},_,e.set_resource_id=function(e){A=e},e.set_select_only_one=function(e){k=e},e.get_selected_resources=function(){var e=t.find(v).val();return e&&e.length?e.split(","):[]},e.get_selected_resources_with_data=function(){return S},e.enable_all_for_selection=function(){t.find(y+" input[type='checkbox']").prop("checked",!1).prop("disabled",!1)},e.update_disable_from_selection=function(){(t.find(y+" .resource.disabled").removeClass("disabled").tooltip("dispose"),C.length>0&&$.each(C,function(e,n){t.find(y+" .resource[data-id='"+parseInt(n,10)+"']").addClass("disabled already_attached").attr("title",I18n.t("search.study_aids.already_attached")).tooltip()}),null!=A)&&t.find(y+" .resource[data-id='"+parseInt(A,10)+"']").addClass("disabled").attr("title",I18n.t("search.study_aids.cannot_attach_self")).tooltip()},e.update_select_only_one=function(){t.find(y+" .resource:not(.checkbox-selected):not(.already_attached)").removeClass("disabled"),k&&e.get_selected_resources().length>0&&t.find(y+" .resource:not(.checkbox-selected)").addClass("disabled"),!k&&o&&e.get_selected_resources().length>=o&&t.find(y+" .resource:not(.checkbox-selected)").addClass("disabled")},e.unselect_resources=function(){e.get_selected_resources();t.find(y+" .resource.checkbox-selected").removeClass("checkbox-selected"),t.find(v).val(""),S={},e.update_select_only_one(),F()},e}(SEARCH_RESULTS||{});$(document).on("search_query:changed",function(e,t){$("input.site_search").val(t).trigger("input")});var total_resources=null,total_users=null,total_courses=null,total_groups=null;$(document).ready(function(){var e=Mustache.compile("<a class='search_link' href='{{url}}'>  {{value}}</a>"),t=Mustache.compile("<a class='search_link' href='{{url}}'>  {{name}}</a>"),n=Mustache.compile("<a class='search_link' href='{{url}}'>  {{full_name}}</a>"),i=Mustache.compile("<a class='search_link' href='{{url}}'>  {{title}}</a>"),a=function(e){return Mustache.compile("<div class='typeahead_cat_heading "+e+"_heading'>  <span class='sprite'></span>  <span class='heading_text'>"+I18n.t("search.typeahead.heading.placeholder."+e)+"</span>  <a href='/search/"+e+"/?q={{query}}' class='see_more'>"+I18n.t("search.typeahead.heading.see_more")+"</a></div")},s=function(e){var t=$(e).closest("form").find(".site_search#q").val();""!==t?do_redirect(Routes.search_path({q:t})):$.jGrowl(I18n.t("search.empty_search_warning"))};$(".search_button").click(function(){s(this)}),$(".site_search, .bloodhound_site_search").keypress(function(e){13===e.which&&s(this)}),$(".shared_resource_search_button").click(function(){SEARCH_RESULTS.update()});var o={datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{wildcard:"!QUERY"}},r=new Bloodhound($.extend(!0,o,{remote:{url:Routes.search_typeahead_path({dont_block_ui:1,q:"!QUERY"}),filter:function(e){return total_resources=e.resources.total_count,e.resources.matches}}})),l=new Bloodhound($.extend(!0,o,{remote:{url:Routes.search_typeahead_path({dont_block_ui:1,q:"!QUERY"}),filter:function(e){return total_groups=e.groups.total_count,e.groups.matches}}})),c=new Bloodhound($.extend(!0,o,{remote:{url:Routes.search_typeahead_path({dont_block_ui:1,q:"!QUERY"}),filter:function(e){return total_users=e.users.total_count,e.users.matches}}})),d=new Bloodhound($.extend(!0,o,{remote:{url:Routes.search_typeahead_path({dont_block_ui:1,q:"!QUERY"}),filter:function(e){return total_courses=e.courses.total_count,e.courses.matches}}}));$(".authenticated .site_search").typeahead({minLength:3},{name:"resources",displayKey:"value",source:r,templates:{suggestion:e,header:a("resource"),empty:a("resource")}},{name:"users",displayKey:"full_name",source:c,templates:{suggestion:n,header:a("user"),empty:a("user")}},{name:"groups",displayKey:"name",source:l,templates:{suggestion:t,header:a("group"),empty:a("group")}},{name:"courses",displayKey:"title",source:d,templates:{suggestion:i,header:a("course"),empty:a("course")}}),$(".site_search").on("typeahead:selected",function(e,t){do_redirect(t.url),e.preventDefault()}),$(".site_search").on("typeahead:asyncreceive",function(e){var t=_.escape($(e.target).val());u("resource",t,total_resources),u("user",t,total_users),u("group",t,total_groups),u("course",t,total_courses)});var u=function(e,t,n){var i=$(".typeahead_cat_heading."+e+"_heading"),a=I18n.t("search.typeahead.heading."+e,{count:n,query:t}),s=Routes.search_path()+"/"+e+"/?q="+t+"&scope=all";i.find(".heading_text").html(a),i.find("a.see_more").attr("href",s),0===n?i.find("a.see_more").hide():i.find("a.see_more").show()}}),$(document).ready(function(){$("#private_message_notifications").load(Routes.private_message_notifications_profiles_path({dont_block_ui:1}))}),$(document).ready(function(){var e=$("#profile_nav"),t={html:!0,content:function(){return $("#profile_dropdown_content").html()},container:e.closest(".navbar-nav"),sanitize:!1,placement:"bottom",trigger:"manual",template:popover_with_class("profile_popover nav-popover")};e.popover(t)});var ActionAlertView=Backbone.View.extend({events:{"click .kill_action_alert":"kill_action_alert"},template:SMT["alerts/action_alert_entry"],i18n:{tool_tip:I18n.t("alert.mark_as_read")},popupActions:["Alert::FriendShareAction","Alert::GroupNewStudyAidAction","Alert::StudyAidCommentAction"],initialize:function(){this.model.bind("change",this.render,this)},kill_action_alert:function(e){var t=this,n=t.model.get("_id")+"",i=null,a=null,s={};e.stopPropagation(),e.preventDefault(),-1===n.indexOf(",")?(s={type:t.model.get("type")},i=Routes.kill_alert_action_path(t.model.get("_id")),a=t.success_handler):(s={type:t.model.get("type"),ids:t.model.get("_id")},i=Routes.kill_many_alert_actions_path(),a=t.kill_multiple_success_handler(t)),$.ajax({type:"PUT",data:s,url:i,success:a,error:t.error_handler,dataType:"json"})},kill_multiple_success_handler:function(e){return function(t){$.each(t,function(e,t){ACTION_ALERTS.collection.add(t),ACTION_ALERTS.update_badge_counts(t.uuid)}),ACTION_ALERTS.collection.remove(e.model),e.unbind(),e.remove(),ACTION_ALERTS.view.render()}},success_handler:function(e){var t=ACTION_ALERTS.collection.get(e.uuid);t.set({unread:!1}),ACTION_ALERTS.update_badge_counts(t.id)},error_handler:function(){},render:function(){var e=_.contains(this.popupActions,this.model.attributes.type)&&"#"!=this.model.attributes.url,t=$(this.template(_.extend({popup_resource:e},this.model.toJSON(),this.i18n)));return this.$el.replaceWith(t),this.setElement(t),this}}),ACTION_ALERTS=function(e){return e.collection={},e.view={},e.fetch_action_alerts=function(){var t=_(e.collection.models).last();$("#notification_footer").slideDown(300,function(){$.ajax({type:"GET",data:{date_time:t.get("created_at")},url:Routes.alert_actions_path(),success:e.append_batch,dataType:"json"})})},e.update_dropdown_flag=function(){$.ajax({type:"GET",url:Routes.unread_count_alert_actions_path({dont_block_ui:1}),success:function(e){e.count>0?$("#alert_dropdown_flag").html(e.count).addClass(e.clazzes).removeClass("hidden"):$("#alert_dropdown_flag").html(e.count).addClass("hidden")},dataType:"json"})},e.append_batch=function(t){$("#fetching_alerts").remove(),$("#notification_footer").hide(),e.collection.add(t)},e.render_popover=function(){if(e.collection.length>0){var t=SMT["alerts/popover"]({loading_notifications:I18n.t("alert.loading_notifications"),mark_all_as_read:I18n.t("alert.mark_all_as_read"),alerts_title:I18n.t("alert.dropdown_title")});$(".action_alerts_popover .popover-body").html(t),$("#notification_content").html(e.view.render().$el)}else $(".action_alerts_popover  .popover-body").html("<span class='empty_po_content'>"+I18n.t("alert.no_notifications")+"</span>");e.position_and_resize_popover()},e.position_and_resize_popover=function(){$(".action_alerts_popover");if(0!==$(".action_alerts_popover").length){var e=$(window).height()-$(".action_alerts_popover").offset().top,t=_.min([.77*e,500]);$(".action_alerts_popover #notification_dropdown_content").css("height",t+"px")}},e.update_badge_counts=function(e){_($(".action_alert_count_badge."+e)).each(function(e){var t=$(e),n=parseInt(t.text())-1;t.text(n),0===n&&t.addClass("hidden")}),_($(".action_alert_new_badge."+e)).each(function(e){$(e).addClass("hidden")})},$(document).on("authenticated_user:init",function(){var t=$("#notification-icon-container");if(0!==t.length){e.update_dropdown_flag();var n={html:!0,content:$("#notification_dropdown_content").html(),container:t.closest(".navbar-nav"),placement:"bottom",trigger:"manual",template:popover_with_class("action_alerts_popover nav-popover"),offset:"-140px"};t.popover(n).on("hidden.bs.popover",function(){e.view.collection&&e.view.destroy_scrollbar()}),$(".navbar_user_controls").on("click","#mark_all_as_read",function(){$.ajax({type:"PUT",data:{dropdown_size:e.collection.length},url:Routes.kill_all_alert_actions_path(),success:function(t){e.collection.reset(_.first(t,e.collection.length)),$(".action_alert_count_badge").text(0).addClass("hidden"),$(".action_alert_new_badge").addClass("hidden")},dataType:"json"})}),$(".navbar_user_controls").on("click",".unavailable",function(e){e.preventDefault()})}}),$(document).on("nav-icon:clicked",function(t,n){"notification-icon-container"===n.id&&$.ajax({type:"GET",url:Routes.alert_actions_path(),success:function(t){e.collection=new ActionAlertCollection(t),e.view=new ActionAlertCollectionView({collection:e.collection}),e.render_popover()},dataType:"json"})}),$(document).on("action_alerts:updated",function(){e.update_dropdown_flag()}),e}(ACTION_ALERTS||{});
/*
Copyright 2010-2013 Manos Malihutsakis 

This program is free software: you can redistribute it and/or modify 
it under the terms of the GNU Lesser General Public License as published by 
the Free Software Foundation, either version 3 of the License, or 
any later version. 

This program is distributed in the hope that it will be useful, 
but WITHOUT ANY WARRANTY; without even the implied warranty of 
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
GNU Lesser General Public License for more details. 

You should have received a copy of the GNU Lesser General Public License 
along with this program.  If not, see http://www.gnu.org/licenses/lgpl.html. 
*/
!function(e){function t(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}var n={init:function(t){var n={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){},onDragStart:function(){},onDragStop:function(){}},theme:"light"};t=e.extend(!0,n,t);return this.each(function(){var n=e(this);if(t.set_width&&n.css("width",t.set_width),t.set_height&&n.css("height",t.set_height),e(document).data("mCustomScrollbar-index")){var i=parseInt(e(document).data("mCustomScrollbar-index"));e(document).data("mCustomScrollbar-index",i+1)}else e(document).data("mCustomScrollbar-index","1");n.wrapInner("<div class='mCustomScrollBox mCS-"+t.theme+"' id='mCSB_"+e(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+e(document).data("mCustomScrollbar-index"));var a=n.children(".mCustomScrollBox");if(t.horizontalScroll){a.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var s=a.children(".mCSB_h_wrapper");s.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:s.children().outerWidth(),position:"relative"}).unwrap()}else a.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var o=a.children(".mCSB_container");e.support.touch&&o.addClass("mCS_touch"),o.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var r=a.children(".mCSB_scrollTools"),l=r.children(".mCSB_draggerContainer").children(".mCSB_dragger");if(t.horizontalScroll?l.data("minDraggerWidth",l.width()):l.data("minDraggerHeight",l.height()),t.scrollButtons.enable&&(t.horizontalScroll?r.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):r.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),a.bind("scroll",function(){n.is(".mCS_disabled")||a.scrollTop(0).scrollLeft(0)}),n.data({mCS_Init:!0,mCustomScrollbarIndex:e(document).data("mCustomScrollbar-index"),horizontalScroll:t.horizontalScroll,scrollInertia:t.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:t.mouseWheel,mouseWheelPixels:t.mouseWheelPixels,autoDraggerLength:t.autoDraggerLength,autoHideScrollbar:t.autoHideScrollbar,alwaysShowScrollbar:t.alwaysShowScrollbar,snapAmount:t.snapAmount,snapOffset:t.snapOffset,scrollButtons_enable:t.scrollButtons.enable,scrollButtons_scrollType:t.scrollButtons.scrollType,scrollButtons_scrollSpeed:t.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:t.scrollButtons.scrollAmount,autoExpandHorizontalScroll:t.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:t.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:t.advanced.normalizeMouseWheelDelta,contentTouchScroll:t.contentTouchScroll,onScrollStart_Callback:t.callbacks.onScrollStart,onScroll_Callback:t.callbacks.onScroll,onTotalScroll_Callback:t.callbacks.onTotalScroll,onTotalScrollBack_Callback:t.callbacks.onTotalScrollBack,onTotalScroll_Offset:t.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:t.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:t.callbacks.whileScrolling,onDragStart_Callback:t.callbacks.onDragStart,onDragStop_Callback:t.callbacks.onDragStop,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),t.horizontalScroll)"none"!==n.css("max-width")&&(t.advanced.updateOnContentResize||(t.advanced.updateOnContentResize=!0));else if("none"!==n.css("max-height")){var c=!1,d=parseInt(n.css("max-height"));n.css("max-height").indexOf("%")>=0&&(c=d,d=n.parent().height()*c/100);var u=n.innerHeight()-n.height();n.css("overflow","hidden"),a.css("max-height",d-u)}if(n.mCustomScrollbar("update"),t.advanced.updateOnBrowserResize){var _,h=e(window).width(),p=e(window).height();e(window).bind("resize."+n.data("mCustomScrollbarIndex"),function(){_&&clearTimeout(_),_=setTimeout(function(){if(!n.is(".mCS_disabled")&&!n.is(".mCS_destroyed")){var t=e(window).width(),i=e(window).height();h===t&&p===i||("none"!==n.css("max-height")&&(c?a.css("max-height",n.parent().height()*c/100-u):a.css("max-height",parseInt(n.css("max-height"))-u)),n.mCustomScrollbar("update"),h=t,p=i)}},150)})}if(t.advanced.updateOnContentResize){if(t.horizontalScroll)var f=o.outerWidth(),m=o.innerWidth();else f=o.outerHeight(),m=o.innerHeight();setInterval(function(){if(t.horizontalScroll){t.advanced.autoExpandHorizontalScroll&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:o.outerWidth(),position:"relative"}).unwrap();var e=o.outerWidth(),i=o.innerWidth()}else e=o.outerHeight(),i=o.innerHeight();e==f&&i==m||(n.mCustomScrollbar("update"),f=e,m=i)},300)}})},update:function(){var t=e(this),n=t.children(".mCustomScrollBox"),i=n.children(".mCSB_container");i.removeClass("mCS_no_scrollbar"),t.removeClass("mCS_disabled mCS_destroyed"),n.scrollTop(0).scrollLeft(0);var a=n.children(".mCSB_scrollTools"),s=a.children(".mCSB_draggerContainer"),o=s.children(".mCSB_dragger");if(t.data("horizontalScroll")){var r=a.children(".mCSB_buttonLeft"),l=a.children(".mCSB_buttonRight"),c=n.width();t.data("autoExpandHorizontalScroll")&&i.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:i.outerWidth(),position:"relative"}).unwrap();var d=i.outerWidth()}else var u=a.children(".mCSB_buttonUp"),_=a.children(".mCSB_buttonDown"),h=n.height(),p=i.outerHeight();if(p>h&&!t.data("horizontalScroll")){a.css("display","block");var f=s.height();if(t.data("autoDraggerLength")){var m=Math.round(h/p*f),g=o.data("minDraggerHeight");if(m<=g)o.css({height:g});else if(m>=f-10){var v=f-10;o.css({height:v})}else o.css({height:m});o.children(".mCSB_dragger_bar").css({"line-height":o.height()+"px"})}var b=(p-h)/(f-o.height());t.data("scrollAmount",b).mCustomScrollbar("scrolling",n,i,s,o,u,_,r,l);var y=Math.abs(i.position().top);t.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else if(d>c&&t.data("horizontalScroll")){a.css("display","block");var w=s.width();if(t.data("autoDraggerLength")){var x=Math.round(c/d*w),S=o.data("minDraggerWidth");if(x<=S)o.css({width:S});else if(x>=w-10){var T=w-10;o.css({width:T})}else o.css({width:x})}b=(d-c)/(w-o.width());t.data("scrollAmount",b).mCustomScrollbar("scrolling",n,i,s,o,u,_,r,l);y=Math.abs(i.position().left);t.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else n.unbind("mousewheel focusin"),t.data("horizontalScroll")?o.add(i).css("left",0):o.add(i).css("top",0),t.data("alwaysShowScrollbar")?t.data("horizontalScroll")?t.data("horizontalScroll")&&o.css({width:s.width()}):o.css({height:s.height()}):(a.css("display","none"),i.addClass("mCS_no_scrollbar")),t.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(t,n,a,s,o,r,l,c){function d(e,t,n,i){S.data("horizontalScroll")?S.mCustomScrollbar("scrollTo",s.position().left-t+i,{moveDragger:!0,trigger:"internal"}):S.mCustomScrollbar("scrollTo",s.position().top-e+n,{moveDragger:!0,trigger:"internal"})}var u,_,h,p,f,m,g,v,b,y,w,x,S=e(this);S.data("bindEvent_scrollbar_drag")||(e.support.pointer?(h="pointerdown",p="pointermove",f="pointerup"):e.support.msPointer&&(h="MSPointerDown",p="MSPointerMove",f="MSPointerUp"),e.support.pointer||e.support.msPointer?(s.bind(h,function(t){t.preventDefault(),S.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag"),S.data("onDragStart_Callback").call(S);var n=e(this),i=n.offset(),a=t.originalEvent.pageX-i.left,o=t.originalEvent.pageY-i.top;a<n.width()&&a>0&&o<n.height()&&o>0&&(u=o,_=a)}),e(document).bind(p+"."+S.data("mCustomScrollbarIndex"),function(e){if(e.preventDefault(),S.data("on_drag")){var t=s.offset(),n=e.originalEvent.pageX-t.left,i=e.originalEvent.pageY-t.top;d(u,_,i,n)}}).bind(f+"."+S.data("mCustomScrollbarIndex"),function(){S.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag"),S.data("onDragStop_Callback").call(S)})):(s.bind("mousedown touchstart",function(t){t.preventDefault(),t.stopImmediatePropagation();var n,i,a=e(this),o=a.offset();if("touchstart"===t.type){var r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];n=r.pageX-o.left,i=r.pageY-o.top}else S.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag"),S.data("onDragStart_Callback").call(S),n=t.pageX-o.left,i=t.pageY-o.top;n<a.width()&&n>0&&i<a.height()&&i>0&&(u=i,_=n)}).bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i=e(this).offset(),a=n.pageX-i.left,s=n.pageY-i.top;d(u,_,s,a)}),e(document).bind("mousemove."+S.data("mCustomScrollbarIndex"),function(e){if(S.data("on_drag")){var t=s.offset(),n=e.pageX-t.left,i=e.pageY-t.top;d(u,_,i,n)}}).bind("mouseup."+S.data("mCustomScrollbarIndex"),function(){S.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag"),S.data("onDragStop_Callback").call(S)})),S.data({bindEvent_scrollbar_drag:!0}));e.support.touch&&S.data("contentTouchScroll")&&(S.data("bindEvent_content_touch")||(n.bind("touchstart",function(t){t.stopImmediatePropagation(),m=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],g=e(this),v=g.offset(),y=m.pageX-v.left,b=m.pageY-v.top,w=b,x=y}),n.bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation(),m=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],g=e(this).parent(),v=g.offset(),y=m.pageX-v.left,b=m.pageY-v.top,S.data("horizontalScroll")?S.mCustomScrollbar("scrollTo",x-y,{trigger:"internal"}):S.mCustomScrollbar("scrollTo",w-b,{trigger:"internal"})})));if(S.data("bindEvent_scrollbar_click")||(a.bind("click",function(t){var n=(t.pageY-a.offset().top)*S.data("scrollAmount"),i=e(t.target);S.data("horizontalScroll")&&(n=(t.pageX-a.offset().left)*S.data("scrollAmount")),(i.hasClass("mCSB_draggerContainer")||i.hasClass("mCSB_draggerRail"))&&S.mCustomScrollbar("scrollTo",n,{trigger:"internal",scrollEasing:"draggerRailEase"})}),S.data({bindEvent_scrollbar_click:!0})),S.data("mouseWheel")&&(S.data("bindEvent_mousewheel")||(t.bind("mousewheel",function(e,t){var i,o=S.data("mouseWheelPixels"),r=Math.abs(n.position().top),l=s.position().top,c=a.height()-s.height();S.data("normalizeMouseWheelDelta")&&(t=t<0?-1:1),"auto"===o&&(o=100+Math.round(S.data("scrollAmount")/2)),S.data("horizontalScroll")&&(l=s.position().left,c=a.width()-s.width(),r=Math.abs(n.position().left)),(t>0&&0!==l||t<0&&l!==c)&&(e.preventDefault(),e.stopImmediatePropagation()),i=r-t*o,S.mCustomScrollbar("scrollTo",i,{trigger:"internal"})}),S.data({bindEvent_mousewheel:!0}))),S.data("scrollButtons_enable"))if("pixels"===S.data("scrollButtons_scrollType")){function T(e){s.data("preventAction")||(s.data("preventAction",!0),S.mCustomScrollbar("scrollTo",e,{trigger:"internal"}))}S.data("horizontalScroll")?(c.add(l).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",M,C),S.data({bindEvent_buttonsContinuous_x:!1}),S.data("bindEvent_buttonsPixels_x")||(c.bind("click",function(e){e.preventDefault(),T(Math.abs(n.position().left)+S.data("scrollButtons_scrollAmount"))}),l.bind("click",function(e){e.preventDefault(),T(Math.abs(n.position().left)-S.data("scrollButtons_scrollAmount"))}),S.data({bindEvent_buttonsPixels_x:!0}))):(r.add(o).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",M,C),S.data({bindEvent_buttonsContinuous_y:!1}),S.data("bindEvent_buttonsPixels_y")||(r.bind("click",function(e){e.preventDefault(),T(Math.abs(n.position().top)+S.data("scrollButtons_scrollAmount"))}),o.bind("click",function(e){e.preventDefault(),T(Math.abs(n.position().top)-S.data("scrollButtons_scrollAmount"))}),S.data({bindEvent_buttonsPixels_y:!0})))}else{if(S.data("horizontalScroll")){if(c.add(l).unbind("click"),S.data({bindEvent_buttonsPixels_x:!1}),!S.data("bindEvent_buttonsContinuous_x")){c.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();S.data({mCSB_buttonScrollRight:setInterval(function(){S.mCustomScrollbar("scrollTo",Math.abs(n.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var M=function(e){e.preventDefault(),clearInterval(S.data("mCSB_buttonScrollRight"))};c.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",M),l.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();S.data({mCSB_buttonScrollLeft:setInterval(function(){S.mCustomScrollbar("scrollTo",Math.abs(n.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var C=function(e){e.preventDefault(),clearInterval(S.data("mCSB_buttonScrollLeft"))};l.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",C),S.data({bindEvent_buttonsContinuous_x:!0})}}else if(r.add(o).unbind("click"),S.data({bindEvent_buttonsPixels_y:!1}),!S.data("bindEvent_buttonsContinuous_y")){r.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();S.data({mCSB_buttonScrollDown:setInterval(function(){S.mCustomScrollbar("scrollTo",Math.abs(n.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var k=function(e){e.preventDefault(),clearInterval(S.data("mCSB_buttonScrollDown"))};r.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",k),o.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();S.data({mCSB_buttonScrollUp:setInterval(function(){S.mCustomScrollbar("scrollTo",Math.abs(n.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var E=function(e){e.preventDefault(),clearInterval(S.data("mCSB_buttonScrollUp"))};o.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",E),S.data({bindEvent_buttonsContinuous_y:!0})}function A(){var e=S.data("scrollButtons_scrollSpeed");return"auto"===S.data("scrollButtons_scrollSpeed")&&(e=Math.round((S.data("scrollInertia")+100)/40)),e}}S.data("autoScrollOnFocus")&&(S.data("bindEvent_focusin")||(t.bind("focusin",function(){t.scrollTop(0).scrollLeft(0);var i=e(document.activeElement);if(i.is("input,textarea,select,button,a[tabindex],area,object")){var a=n.position().top,s=i.position().top,o=t.height()-i.outerHeight();S.data("horizontalScroll")&&(a=n.position().left,s=i.position().left,o=t.width()-i.outerWidth()),(a+s<0||a+s>o)&&S.mCustomScrollbar("scrollTo",s,{trigger:"internal"})}}),S.data({bindEvent_focusin:!0}))),S.data("autoHideScrollbar")&&!S.data("alwaysShowScrollbar")&&(S.data("bindEvent_autoHideScrollbar")||(t.bind("mouseenter",function(){t.addClass("mCS-mouse-over"),i.showScrollbar.call(t.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(e){t.removeClass("mCS-mouse-over"),"mouseleave"===e.type&&i.hideScrollbar.call(t.children(".mCSB_scrollTools"))}),S.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(t,n){function a(e){if(d.data("mCustomScrollbarIndex"))switch(this.mcs={top:h.position().top,left:h.position().left,draggerTop:m.position().top,draggerLeft:m.position().left,topPct:Math.round(100*Math.abs(h.position().top)/Math.abs(h.outerHeight()-_.height())),leftPct:Math.round(100*Math.abs(h.position().left)/Math.abs(h.outerWidth()-_.width()))},e){case"onScrollStart":d.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(d,this.mcs);break;case"whileScrolling":d.data("whileScrolling_Callback").call(d,this.mcs);break;case"onScroll":d.data("onScroll_Callback").call(d,this.mcs);break;case"onTotalScrollBack":d.data("onTotalScrollBack_Callback").call(d,this.mcs);break;case"onTotalScroll":d.data("onTotalScroll_Callback").call(d,this.mcs)}}var s,o,r,l,c,d=e(this),u={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:d.data("scrollInertia"),scrollEasing:d.data("scrollEasing")},_=(n=e.extend(u,n),d.children(".mCustomScrollBox")),h=_.children(".mCSB_container"),p=_.children(".mCSB_scrollTools"),f=p.children(".mCSB_draggerContainer"),m=f.children(".mCSB_dragger"),g=draggerSpeed=n.scrollInertia;if(!h.hasClass("mCS_no_scrollbar")&&(d.data({mCS_trigger:n.trigger}),d.data("mCS_Init")&&(n.callbacks=!1),t||0===t)){if("number"==typeof t)n.moveDragger?(s=t,t=d.data("horizontalScroll")?m.position().left*d.data("scrollAmount"):m.position().top*d.data("scrollAmount"),draggerSpeed=0):s=t/d.data("scrollAmount");else if("string"==typeof t){s=1===(v="top"===t?0:"bottom"!==t||d.data("horizontalScroll")?"left"===t?0:"right"===t&&d.data("horizontalScroll")?h.outerWidth()-_.width():"first"===t?d.find(".mCSB_container").find(":first"):"last"===t?d.find(".mCSB_container").find(":last"):d.find(t):h.outerHeight()-_.height()).length?(t=d.data("horizontalScroll")?v.position().left:v.position().top)/d.data("scrollAmount"):t=v}else if("object"==typeof t){var v;s=1===(v=e(t)).length?(t=d.data("horizontalScroll")?v.position().left:v.position().top)/d.data("scrollAmount"):t=v}var b;if(d.data("horizontalScroll"))d.data("onTotalScrollBack_Offset")&&(r=-d.data("onTotalScrollBack_Offset")),d.data("onTotalScroll_Offset")&&(c=_.width()-h.outerWidth()+d.data("onTotalScroll_Offset")),s<0?(s=t=0,clearInterval(d.data("mCSB_buttonScrollLeft")),r||(o=!0)):s>=f.width()-m.width()?(s=f.width()-m.width(),t=_.width()-h.outerWidth(),clearInterval(d.data("mCSB_buttonScrollRight")),c||(l=!0)):t=-t,(b=d.data("snapAmount"))&&(t=Math.round(t/b)*b-d.data("snapOffset")),i.mTweenAxis.call(this,m[0],"left",Math.round(s),draggerSpeed,n.scrollEasing),i.mTweenAxis.call(this,h[0],"left",Math.round(t),g,n.scrollEasing,{onStart:function(){n.callbacks&&!d.data("mCS_tweenRunning")&&a("onScrollStart"),d.data("autoHideScrollbar")&&!d.data("alwaysShowScrollbar")&&i.showScrollbar.call(p)},onUpdate:function(){n.callbacks&&a("whileScrolling")},onComplete:function(){n.callbacks&&(a("onScroll"),(o||r&&h.position().left>=r)&&a("onTotalScrollBack"),(l||c&&h.position().left<=c)&&a("onTotalScroll")),m.data("preventAction",!1),d.data("mCS_tweenRunning",!1),d.data("autoHideScrollbar")&&!d.data("alwaysShowScrollbar")&&(_.hasClass("mCS-mouse-over")||i.hideScrollbar.call(p))}});else d.data("onTotalScrollBack_Offset")&&(r=-d.data("onTotalScrollBack_Offset")),d.data("onTotalScroll_Offset")&&(c=_.height()-h.outerHeight()+d.data("onTotalScroll_Offset")),s<0?(s=t=0,clearInterval(d.data("mCSB_buttonScrollUp")),r||(o=!0)):s>=f.height()-m.height()?(s=f.height()-m.height(),t=_.height()-h.outerHeight(),clearInterval(d.data("mCSB_buttonScrollDown")),c||(l=!0)):t=-t,(b=d.data("snapAmount"))&&(t=Math.round(t/b)*b-d.data("snapOffset")),i.mTweenAxis.call(this,m[0],"top",Math.round(s),draggerSpeed,n.scrollEasing),i.mTweenAxis.call(this,h[0],"top",Math.round(t),g,n.scrollEasing,{onStart:function(){n.callbacks&&!d.data("mCS_tweenRunning")&&a("onScrollStart"),d.data("autoHideScrollbar")&&!d.data("alwaysShowScrollbar")&&i.showScrollbar.call(p)},onUpdate:function(){n.callbacks&&a("whileScrolling")},onComplete:function(){n.callbacks&&(a("onScroll"),(o||r&&h.position().top>=r)&&a("onTotalScrollBack"),(l||c&&h.position().top<=c)&&a("onTotalScroll")),m.data("preventAction",!1),d.data("mCS_tweenRunning",!1),d.data("autoHideScrollbar")&&!d.data("alwaysShowScrollbar")&&(_.hasClass("mCS-mouse-over")||i.hideScrollbar.call(p))}});d.data("mCS_Init")&&d.data({mCS_Init:!1})}},stop:function(){var t=e(this),n=t.children().children(".mCSB_container"),a=t.children().children().children().children(".mCSB_dragger");i.mTweenAxisStop.call(this,n[0]),i.mTweenAxisStop.call(this,a[0])},disable:function(t){var n=e(this),i=n.children(".mCustomScrollBox"),a=i.children(".mCSB_container"),s=i.children(".mCSB_scrollTools"),o=s.children().children(".mCSB_dragger");i.unbind("mousewheel focusin mouseenter mouseleave touchend"),a.unbind("touchstart touchmove"),t&&(n.data("horizontalScroll")?o.add(a).css("left",0):o.add(a).css("top",0)),s.css("display","none"),a.addClass("mCS_no_scrollbar"),n.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var t=e(this);t.removeClass("mCustomScrollbar _mCS_"+t.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),e(document).unbind("mousemove."+t.data("mCustomScrollbarIndex")+" mouseup."+t.data("mCustomScrollbarIndex")+" MSPointerMove."+t.data("mCustomScrollbarIndex")+" MSPointerUp."+t.data("mCustomScrollbarIndex")),e(window).unbind("resize."+t.data("mCustomScrollbarIndex"))}},i={showScrollbar:function(){0==e(this).css("opacity")&&this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(e,t,n,i,a,s){function o(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function r(){g||h.call(),g=o()-m,l(),g>=e._time&&(e._time=g>e._time?g+_-(g-e._time):g+_-1,e._time<g+1&&(e._time=g+1)),e._time<i?e._id=_request(r):f.call()}function l(){i>0?(e.currVal=u(e._time,v,y,i,a),b[t]=Math.round(e.currVal)+"px"):b[t]=n+"px",p.call()}function c(){_=1e3/60,e._time=g+_,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},e._id=_request(r)}function d(){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)}function u(e,t,n,i,a){switch(a){case"linear":return n*e/i+t;case"easeOutQuad":return-n*(e/=i)*(e-2)+t;case"easeInOutQuad":return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t;case"easeOutCubic":return e/=i,n*(--e*e*e+1)+t;case"easeOutQuart":return e/=i,-n*(--e*e*e*e-1)+t;case"easeOutQuint":return e/=i,n*(--e*e*e*e*e+1)+t;case"easeOutCirc":return e/=i,e--,n*Math.sqrt(1-e*e)+t;case"easeOutSine":return n*Math.sin(e/i*(Math.PI/2))+t;case"easeOutExpo":return n*(1-Math.pow(2,-10*e/i))+t;case"mcsEaseOut":var s=(e/=i)*e,o=s*e;return t+n*(.499999999999997*o*s+-2.5*s*s+5.5*o+-6.5*s+4*e);case"draggerRailEase":return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}}var _,h=(s=s||{}).onStart||function(){},p=s.onUpdate||function(){},f=s.onComplete||function(){},m=o(),g=0,v=e.offsetTop,b=e.style;"left"===t&&(v=e.offsetLeft);var y=n-v;d(),c()},mTweenAxisStop:function(e){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)},rafPolyfill:function(){for(var e=["ms","moz","webkit","o"],t=e.length;--t>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}};i.rafPolyfill.call(),e.support.touch=t(),e.support.pointer=window.navigator.pointerEnabled,e.support.msPointer=window.navigator.msPointerEnabled,e.fn.mCustomScrollbar=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):n.init.apply(this,arguments)}}(jQuery);var ActionAlertCollectionView=Backbone.View.extend({id:"notification_dropdown_content",className:"nav_popover_container",initialize:function(){this.collection.bind("add",this.add_alert,this),this.collection.bind("reset",this.reset_alerts,this)},add_alert:function(e){var t=this,n=new ActionAlertView({model:e});return t.$el.find(".mCSB_container").append(n.render().el),this.update_scrollbar(),this},reset_alerts:function(){return this.render(),this},render:function(){this.destroy_scrollbar();var e=this;return $(this.el).empty(),_(this.collection.models).each(function(t){var n=new ActionAlertView({model:t});$(e.el).append(n.render().el)}),this.attach_scrollbar(),this},attach_scrollbar:function(){options={scrollInertia:500,callbacks:{onTotalScrollOffset:100,onTotalScroll:function(){ACTION_ALERTS.fetch_action_alerts()}}},_.delay(function(){$(".action_alerts_popover #notification_dropdown_content").mCustomScrollbar(options)},0)},destroy_scrollbar:function(){var e=$("#notification_dropdown_content.mCustomScrollbar");e.length>0&&(e.mCustomScrollbar("stop"),e.mCustomScrollbar("destroy"))},update_scrollbar:function(){this.$el.mCustomScrollbar("update")}}),ActionAlert=Backbone.Model.extend({idAttribute:"uuid",initialize:function(){}}),ActionAlertCollection=Backbone.Collection.extend({model:ActionAlert,comparator:function(e){return-Date.parse(e.get("created_at"))}});!function(){var e=function(){ACTION_ALERTS.position_and_resize_popover()},t=_.throttle(e,25);$(window).resize(t)}(),jQuery.query_string=function(e){var t=(RegExp(e+"=(.+?)(&|$)").exec(location.search)||[,null])[1];return null==t?t:decodeURI(t)};var CACHING=function(e,t){return e.ajax_hard_refresh=function(){t.ajax({url:window.location.href,headers:{Pragma:"no-cache",Expires:-1,"Cache-Control":"no-cache"}}).done(function(){window.location.reload(!0)})},e}(CACHING||{},jQuery);!function(e){var t=function(){e.blockUI({message:I18n.t("general.stale_cache_warning"),overlayCSS:{opacity:.5},fadeIn:0,fadeOut:0}),CACHING.ajax_hard_refresh()};e(document).on("public_view:init",function(){e.getJSON(Routes.session_path({dont_block_ui:1})).then(function(n){e("meta[name=csrf-token]").attr("content",n.csrf.token),e("input[name=authenticity_token]").val(n.csrf.token),self!==top||/frame=true/.test(self.location.search)||/fs=true/.test(self.location.search)||MOBILE.is_mobile()||(n.hasOwnProperty("user")&&0===e("#profile_nav").length?t():!n.hasOwnProperty("user")&&e("#profile_nav").length>0?t():n.hasOwnProperty("user")&&CURRENT_USER&&n.user.id!==CURRENT_USER.id&&t()),e.query_string("delay_session_init")||e(document).trigger("public_view:session_initialized")})})}(jQuery);var SWITCH_USER=function(e){var t=function(){"yes"==STORAGE.sessionStore.getItem("hide_user_switch")?$(".switch_user_banner").addClass("hide"):$("body").addClass("with_user_menu")};return $(document).on("change","#switch_user_identifier",function(){$(this).closest("form").submit()}),$(document).on("click",".switch_user_toggle",function(){$(".switch_user_banner").toggleClass("hide"),$(".switch_user_banner").hasClass("hide")?(STORAGE.sessionStore.setItem("hide_user_switch","yes"),$("body").removeClass("with_user_menu")):(STORAGE.sessionStore.setItem("hide_user_switch","no"),$("body").addClass("with_user_menu")),$(window).trigger("resize")}),$(document).on("switch_user:init",t),e}(SWITCH_USER||{});$(document).ready(function(){$(".switch_user_banner").length>0&&$(document).trigger("switch_user:init")}),
/*!
 * jQuery Browser Plugin 0.0.8
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2015 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2015 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 05-07-2015
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";function t(e){e===undefined&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],i={},a={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(a.browser&&(i[a.browser]=!0,i.version=a.version,i.versionNumber=parseInt(a.versionNumber,10)),a.platform&&(i[a.platform]=!0),(i.android||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.edge){var s="msie";a.browser=s,i[s]=!0}if(i.safari&&i.blackberry){var o="blackberry";a.browser=o,i[o]=!0}if(i.safari&&i.playbook){var r="playbook";a.browser=r,i[r]=!0}if(i.bb){var l="blackberry";a.browser=l,i[l]=!0}if(i.opr){var c="opera";a.browser=c,i[c]=!0}if(i.safari&&i.android){var d="android";a.browser=d,i[d]=!0}if(i.safari&&i.kindle){var u="kindle";a.browser=u,i[u]=!0}if(i.safari&&i.silk){var _="silk";a.browser=_,i[_]=!0}return i.name=a.browser,i.platform=a.platform,i}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser}),$(function(){function e(e){var t="",n=void 0===e?I18n.locale:e;0==$("body.gc-static-page").length&&(t=" gc-static-page-modal"),MODAL.create_with_callback("sign_in_popup",Routes.sign_in_popup_path({locale:n}),["small_modal"+t],function(){var e=parseInt($.browser.version,10);$.browser.msie&&e<=9||$(".sign_in_popup").find("#user_email").focus()})}var t="form.sign_in_form",n=t+" .resend_confirmation_link",i=$(".gc-static-page").length>0;$(document).on("keypress",t,function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),$(this).submit())}),$(document).on("ajax:success",t,function(){$(t+" .error_message").addClass("hidden"),i?window.location="/":window.self===window.top?s():a()}),$(document).on("ajax:error",t,function(){$(t+" .error_message").removeClass("hidden")}),$(document).on("ajax:error",t,function(e,i){var a=$(t+" .error_message");i.responseText===I18n.t("devise.failure.unconfirmed")||i.responseText===I18n.t("devise.failure.locked")?(a.text(i.responseText),$(n).removeClass("hidden")):a.text(I18n.t("devise.failure.invalid")),a.removeClass("hidden"),$(this).find(".please_wait").addClass("hidden"),$(this).find(".submit_buttons").removeClass("hidden")}),$(document).on("ajax:before",t,function(){$(this).find(".please_wait").removeClass("hidden"),$(this).find(".submit_buttons").addClass("hidden")});var a=function(){try{window.parent.location.reload()}catch(e){s()}},s=function(){[/\/p\/\d+/,/\/flashcard\/\d+/,/\/flowchart\/\d+/,/\/mindmap\/\d+/,/\/note\/\d+/,/\/quiz\/\d+/,/\/slide\/\d+/].some(function(e){return e.test(window.location.href)})?CACHING.ajax_hard_refresh():window.location.reload()};$(document).on("click",".sign_in_call_to_action",function(t){t.preventDefault(),$("#sign_up_message").modal("hide"),e($(this).attr("data-locale")),$(this).blur()}),$("#sign_in").off("click").on("click",function(){e($(this).attr("data-locale")),$(this).blur()}),$("#prompt_sign_in").off("click").on("click",function(t){t.preventDefault(),e($(this).attr("data-locale"))})}),function(){function e(e){e.length>0?($("#et_loading_spinner").hide(),e.modal("show")):window.location.reload()}function t(){$(".sign_in_popup").length>0&&$(".sign_in_popup").is(":visible")||e($("#sign_up_message"))}$(document).on("click",".show_sign_in_modal",function(e){t(),e.preventDefault()}),$(document).on("show_sign_in_modal",t)}();var EXAMTIME_MATHJAX=function(e){e.loaded=!1,e.loadMathJax=function(){var t=function(){MathJax.Hub.Config({tex2jax:{displayMath:[["\\[","\\]"]],inlineMath:[["\\(","\\)"]]}}),e.loaded=!0,$(document).trigger("mathjax:ready")};window.MathJax=null,e.loaded=!1,_.each($("head style"),function(e){var t=$(e),n=t.html();(n.indexOf("MathJax")>-1||n.indexOf("MJX_Assistive")>-1||n.indexOf("MJXp-scale")>-1)&&t.remove()}),$.ajax({dataType:"script",cache:!0,url:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js?config=TeX-AMS_HTML-full.js"}).done(function(){t()}).fail(function(){!function(){var e=document.createElement("script");e.type="text/javascript",e.src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js",document.getElementsByTagName("head")[0].appendChild(e);var n=null;n=setInterval(function(){"undefined"!=typeof MathJax&&MathJax&&"undefined"!=typeof MathJax.Hub&&MathJax.Hub&&(t(),clearInterval(n))},500)}()})},e.typeset=function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])},e.queue=function(t){e.loaded?t():PAGE_EVENTS.on("mathjax:ready",t)},$(document).on("mathjax:typeset",function(){e.queue(e.typeset)});var t=function(){return new Array(new RegExp(/\/study_aids\/\d+\/show_meta_popup/),new RegExp(/\/groups\/\d+\/edit/),new RegExp(/\/discussions\/\d+\?_pjax/),new RegExp(/\/private_messages\/conversations/),new RegExp(/\/private_messages\/\d+\/messages/),new RegExp(/\/study_aids\/private_messages\/([a-zA-Z]|\d)+\/attach/))};return $(document).ajaxComplete(function(e,n,i){if(void 0!==i&&i.hasOwnProperty("url")){var a=t();$.each(a,function(e,t){i.url.match(t)&&$(document).trigger("mathjax:typeset")})}}),e}(EXAMTIME_MATHJAX||{});EXAMTIME_MATHJAX.loadMathJax(),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},FastClick.prototype.findControl=function(e){"use strict";return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,i,a,s,o=this.targetElement;if(this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],(o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=o.tagName.toLowerCase())){if(t=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(a=o.fastClickScrollParent)||a.fastClickLastScrollTop===a.scrollTop)||(this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";function t(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}var n;if(t())return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if((n=document.querySelector("meta[name=viewport]"))&&-1!==n.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction},FastClick.attach=function(e){"use strict";return new FastClick(e)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){$(document).on("public_view:init",function(){if(!($("body.mobile_layout, body.mobile").length>0)){$(".embed_header").length>0&&FastClick.attach($(".embed_header").get(0)),$(".embed_footer").length>0&&FastClick.attach($(".embed_footer").get(0));var e=$(".flash_card_button_panel");e.length>0&&(FastClick.attach(e.get(0)),FastClick.attach($("#slider").get(0)));var t=function(e){$.get(Routes.ping_dashboard_path(),e)};$("#examtime_png_btn").on("click",function(){t(function(){STUDY_AID_ACTIONS.download_mind_map_png()})})}}),$(document).on("click","#share_study_aid_popup .btn.btn-cancel",function(){$(".share_asset_modal").modal("hide")}),$(document).on("click",'input[name="share_code_embed"], input[name="share_code_url"]',function(){this.select()}),$(document).on("ajax:success","#share_study_aid_popup .examtime_email_panel form",function(){$.jGrowl(I18n.t("public.notifications.email_sent")),document.getElementById("new_public_share").reset(),$(".share_asset_modal").modal("hide")});var e=function(){$("#share_study_aid_popup .examtime_email_panel form .control-group .control").children().each(function(){$(this).removeClass("field_error"),$(this).parent().prev().html("")})};$(document).on("click","#share_study_aid_popup .examtime_email_panel .btn.btn-success",function(t){if(t.preventDefault(),$(this).hasClass("disabled"))return!1;e(),-1!=$("#public_share_custom_message").val().search(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:;,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[A-Z0-9+&@#\/%=~_|$])/i)?($("#public_share_custom_message").addClass("field_error"),$("#field_error_custom_message")[0].textContent=I18n.t("study_aids.sharing.remove_urls")):($("#share_study_aid_popup .examtime_email_panel form .invalid").removeClass("invalid"),$("#share_study_aid_popup .examtime_email_panel form").submit(),$(this).addClass("disabled").prop("disabled",!0))}),$(document).on("ajax:error","#share_study_aid_popup .examtime_email_panel form",function(e,t){if(401!==t.status){var n=t.responseText.length>0?$.parseJSON(t.responseText):undefined;void 0!==n&&$.each(n,function(e,t){$("#share_study_aid_popup .examtime_email_panel #field_error_"+e).html(t),$("#share_study_aid_popup .examtime_email_panel form #public_share_"+e).addClass("field_error")}),$("#share_study_aid_popup .examtime_email_panel .btn.btn-success").removeClass("disabled").prop("disabled",!1)}});var t=window.frameElement;t&&t.classList.contains("embed_popup")&&t.addEventListener("load",function(){FRAME.top_examtime_window().MODAL.iframe_loaded()})}(),$(document).on("public_view:init",function(){var e=$(".move_resource"),t=$("#study_aid_id").text();e.on("click",function(e){$(document).trigger("study_aids:move_subject",{study_aids:[t]}),e.preventDefault()})}),$(document).on("click",".unpin_resource",function(){var e=$(this).closest(".modal"),t=e.find("input#study_aids").val(),n=e.find('input[name="current_subject_id"]').val(),i=function(e){var t=SUBJECT_STUDY_AIDS.group_models_by_topic_id(e);Object.keys(t).forEach(function(e){var n=t[e].length;0!==n&&SUBJECT_STUDY_AIDS.update_topics_study_aid_counts([{id:e,change:-1*n}])})};$.ajax({type:"POST",url:Routes.delete_study_aids_path(),data:{study_aids:t,current_subject_id:n},success:function(e){if("undefined"!=typeof e.old_subject_id){var t=EXAMTIME_DATA.collections.subjects;if(void 0!==t){var n=t.get(e.old_subject_id);if(void 0!==n){var a=n.attributes.study_aid_count;n.set({study_aid_count:a-e.study_aid_ids.length})}}}STUDY_AID_ACTIONS.update_study_aid_pin_count("sub"),STUDY_AID_ACTIONS.update_study_aid_pin_to(),$.jGrowl(I18n.t("study_aids.pin.unpin_success")),$(".additional_global_controls .move_resource.move").hide(),$(".additional_global_controls .move_resource.pin").show(),SUBJECT_STUDY_AIDS.in_subject_page()?(i(e.study_aid_ids),$.each(e.study_aid_ids,function(e,t){SUBJECT_STUDY_AIDS.find_and_remove_model_in_all_collections(t)}),SUBJECT_STUDY_AIDS.check_show_empty_message(),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear()):STUDY_AID_ACTIONS.is_view_mode()?(PAGE_EVENTS.trigger("study_aid:unpinned"),$(".controls_container .btn.move-asset.move").addClass("hidden"),$(".controls_container .btn.move-asset.pin").removeClass("hidden")):$(document).trigger("study_aids:unpin_success",{study_aids:e.study_aid_ids})},error:function(){$.jGrowl(I18n.t("general.error"))},complete:function(){$(".modal").modal("hide")}})});var Rating=Backbone.Model.extend({id:null,initialize:function(){},url:function(){if(!this.id)return null;var e=params_from_url(location.href).uid,t=params_from_url(location.href).link_uuid,n={study_aid_id:this.id,dont_block_ui:1};return e?n.uid=e:t&&(n.link_uuid=t),Routes.rating_path(n)}}),EditRatingsView=BaseRatingsView.extend({num_ratings:0,url:Routes.rating_path(),initialize:function(){_.bindAll(this,"render","update_rating_display","handle_submit","handle_error","handle_success","submit"),this.model.bind("change",this.render),this.model.bind("change",this.update_breakdown),this.model.bind("reset",this.render),this.options.url&&(this.url=this.options.url)},events:{"mouseenter .user_rating img":"handle_img_hover","mouseleave .user_rating img":"handle_img_mouseout","mouseenter .user_rating":"handle_hover","mouseleave .user_rating":"handle_mouseout","click .user_rating":"handle_click"},handle_error:function(e){var t=JSON.parse(e.responseText);$.jGrowl(t.error),this.update_display(t.average_rating,t.total_ratings)},handle_success:function(e){this.num_ratings++;var t=1==this.num_ratings?"success_submitted":"success_updated";$.jGrowl(I18n.t("study_aids.ratings."+t,{rating:e.rating})),this.update_display(e.average_rating,e.total_ratings),$(document).trigger("ratings:update_rating").trigger("ratings:update_breakdown"),this.trigger("ratings:rating_submitted")},update_display:function(e,t){this.$el.find(".user_rating").raty("set",{score:e}),this.$el.find(".total_ratings").text("("+t+")"),this.$el.find(".user_rating").raty("set",{readOnly:!1})},handle_mouseout:function(){CURRENT_USER||this.$(".user_rating").tooltip("hide")},handle_img_mouseout:function(e){CURRENT_USER&&$(e.target).tooltip("hide")},handle_hover:function(){CURRENT_USER||this.$(".user_rating").attr("title",I18n.t("study_aids.ratings.error_signin")).tooltip({animated:"fade",placement:"top",trigger:"manual"}).tooltip("show")},handle_img_hover:function(e){CURRENT_USER&&$(e.target).tooltip({animated:"fade",placement:"top",trigger:"manual"}).tooltip("show")},handle_click:function(e){if(null==CURRENT_USER)return $("#sign_up_message").modal("show");is_touch_device()&&this.handle_submit($(e.target).attr("alt"))},handle_submit:function(e){this.$el.find(".user_rating").raty("readOnly",!0),this.options.has_user_rated=!0;var t=this,n={rating:e};t.options.study_aid_id&&(n.study_aid_id=t.options.study_aid_id),$.ajax({type:"POST",url:this.url,data:n,success:t.handle_success,error:t.handle_error})},submit:function(){this.handle_submit(this.score)},update_rating_display:function(){for(var e=[],t=5,n=this,i=1;i<6;i++)e.push(I18n.t("study_aids.ratings.rating_hint",{n:i,max:t}));this.$el.find(".user_rating").raty({readOnly:!this.options.can_rate,halfShow:!0,cancel:!1,click:function(e){n.trigger("ratings:rating_clicked",e),n.rate_on_click&&n.handle_submit(e),n.score=e},hints:e,noRatedMsg:I18n.t("study_aids.ratings.no_ratings"),starOff:this.off_icon,starOn:this.on_icon,starHalf:this.half_icon,half:!1,score:n.options.hide_average?0:n.model.get("average_rating")||0});var a=this.$el.find(".user_rating_message");this.options.hide_caption||(!this.options.has_user_rated&&this.options.can_rate?a.text(I18n.t("study_aids.ratings.prompt")).show():a.text(I18n.t("study_aids.ratings.average_rating")).show())},render:function(){return this.$el.html(this.template({icon_size:this.icon_size,total_ratings:"("+this.model.get("total_ratings")+")",has_user_rated:this.has_user_rated,hide_total_rating_count:this.options.hide_total_rating_count})),this.update_rating_display(),this}}),RatingsView=Backbone.View.extend({subview:null,rating_model:null,interval:null,initialize:function(e){this.options=e,_.bindAll(this,"render","close","update_rating"),$(document).off("ratings:update_rating").on("ratings:update_rating",this.update_rating),this.render()},fetch_options:{reset:!0,success:function(){$(document).trigger("ratings:rating_fetched",rating_model)}},update_rating:function(){null!=this.rating_model&&this.rating_model.fetch(this.fetch_options)},render_rating_view:function(){var e=this;rating_model=new Rating,this.rating_model=rating_model,this.rating_model.id=this.options.id,this.rating_model.fetch(e.fetch_options);e=this;var t,n={model:this.rating_model,study_aid_id:this.options.id,no_rating_icon:this.options.no_rating_icon||null,has_user_rated:this.options.has_user_rated,can_rate:this.options.can_rate,hide_caption:this.options.hide_caption||!1,hide_average:this.options.hide_average||!1,icon_size:this.options.icon_size||null,rate_on_click:this.options.rate_on_click};return t=this.options.can_rate?new EditRatingsView(n):new ReadOnlyRatingsView(n),_.each(["ratings:rating_submitted","ratings:rating_clicked"],function(n){t.on(n,function(){e.trigger(n)})}),t},close:function(){$(document).off("ratings:update_rating"),this.subview&&this.subview.close(),this.remove()},submit:function(){this.subview.submit()},render:function(){return this.subview=this.render_rating_view(),this.$el.html(this.subview.$el),this}}),StudyAidRatingsBreakdown=Backbone.Model.extend({id:null,initialize:function(){},url:function(){if(!this.id)return null;var e=params_from_url(location.href).uid,t=params_from_url(location.href).link_uuid,n={study_aid_id:this.id,dont_block_ui:1};return e?n.uid=e:t&&(n.link_uuid=t),Routes.study_aid_breakdown_rating_path(n)}}),StudyAidRatingsBreakdownView=Backbone.View.extend({MAX_RATING:5,template:SMT["ratings/ratings_breakdown"],initialize:function(){_.bindAll(this,"render"),this.model.bind("change",this.render),this.model.bind("reset",this.render)},update_bar_chart_display:function(){for(var e=this.model.get("total_ratings"),t=null,n=null,i=1;i<this.MAX_RATING+1;i++)t=this.model.get("total_"+i),n=e?t/e*100+"%":"0%",this.$el.find("."+i+"_star .percentage").animate({width:n},500)},render:function(){return this.$el.html(this.template({title:I18n.t("study_aids.ratings_breakdown.title",{total_ratings:this.model.get("total_ratings")}),total_5_star_ratings:this.model.get("total_5"),total_4_star_ratings:this.model.get("total_4"),total_3_star_ratings:this.model.get("total_3"),total_2_star_ratings:this.model.get("total_2"),total_1_star_ratings:this.model.get("total_1"),no_5_star_ratings:0===this.model.get("total_5"),no_4_star_ratings:0===this.model.get("total_4"),no_3_star_ratings:0===this.model.get("total_3"),no_2_star_ratings:0===this.model.get("total_2"),no_1_star_ratings:0===this.model.get("total_1")})),this.update_bar_chart_display(),this}}),RatingsBreakdownView=Backbone.View.extend({subview:null,ratings_breakdown:null,initialize:function(){_.bindAll(this,"render","render_update"),this.render(),$(document).off("ratings:update_breakdown").on("ratings:update_breakdown",this.render_update)},render_breakdown:function(){return this.ratings_breakdown=new StudyAidRatingsBreakdown,this.ratings_breakdown.id=this.model.get("id"),this.ratings_breakdown.fetch({reset:!0}),new StudyAidRatingsBreakdownView({model:this.ratings_breakdown})},close:function(){this.subview&&this.subview.close(),this.remove()},render:function(){return this.subview=this.render_breakdown(),this.$el.html(this.subview.$el),this},render_update:function(){null!==this.ratings_breakdown&&this.ratings_breakdown.fetch({reset:!0})}});$(document).on("ratings:init",function(e,t,n,i,a){_.defer(function(){var e=new StudyAid(t),s=new RatingsView({id:e.id,can_rate:i,has_user_rated:a,icon_size:"xlarge"});$(n+" .average_rating").html(s.$el);var o=new RatingsBreakdownView({model:e});$(n+" .study_aid_rating_breakdown").html(o.$el)})}),$(document).on("click","a[href=\\#anon_sign_up]",function(e){try{window.parent.$("#sign_up_message").modal("show")}catch(t){$("#sign_up_message").modal("show")}e.preventDefault()});var SENTRY_HELPER=function(e){var t=[];return e.capture=function(e){"undefined"!=typeof Sentry&&Sentry.captureMessage(e)},e.init=function(){"undefined"!=typeof Sentry&&Sentry.init({dsn:"https://f27c37c8e84548f2947a182d5dd3c77c@sentry.io/1339700",whitelistUrls:[/https?:\/\/((cdn|www|demo|dev|cdn-demo)\.)?goconqr\.com/],ignoreErrors:["Can't execute code from a freed script","a.replace is not a function"],beforeSend:function(e){return"undefined"==typeof CURRENT_USER||!CURRENT_USER||t.length>0&&-1===t.indexOf(CURRENT_USER.id)?void 0:e}})},e}(SENTRY_HELPER||{});SENTRY_HELPER.init();var TEAMS_ACTIVITY_LOGGING=function(e){var t=function(e){return fetch("/ms_teams/activities",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},body:JSON.stringify(e),mode:"cors",cache:"default",credentials:"same-origin"})};return e.log_activity=function(e){var n=new Promise(function(e,t){microsoftTeams.authentication.getAuthToken().then(function(t){e(t)})["catch"](function(e){t("Error getting token: "+e)})}),i=new Promise(function(t){microsoftTeams.app.getContext().then(function(n){t({tenant_id:n.user.tenant.id,user_principal_name:n.user.userPrincipalName,team_id:n.team&&n.team.internalId,team_name:n.team&&n.team.displayName,user_team_role:n.team&&n.team.userRole,user_license_type:n.user.licenseType,url:e,locale:n.app.locale})})});Promise.all([i,n]).then(function(e){return t(Object.assign(e[0],{token:e[1]}))}).then(function(e){e.ok?console.log("GoConqr: Successfully logged Teams activity"):(SENTRY_HELPER.capture("GoConqr: Server error logging Teams activity."),console.log("GoConqr: Error logging Teams activity."))})["catch"](function(){SENTRY_HELPER.capture("GoConqr: Client error logging Teams activity."),console.log("GoConqr: Error logging Teams activity.")})},e}(TEAMS_ACTIVITY_LOGGING||{}),TEAMS_ADMIN_CONSENT_URL="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=e5e5c455-c92a-46b7-adbc-da0f9a3e787f&redirect_uri=https%3A%2F%2Fwww.goconqr.com%2Fusers%2Fauth%2Fmicrosoft_graph_auth%2Fcallback&response_mode=query&response_type=code&scope=AppCatalog.Read.All+Channel.ReadBasic.All+email+offline_access+openid+profile+User.Read+User.ReadBasic.All+EduAssignments.ReadWrite+EduRoster.ReadBasic&state=something",TEAMS_PERMISSIONS=function(e){var t=6048e5,n="ms_permissions_dismissed",i="ms_permissions_granted",a=STORAGE.localStore.getItemWithExpiry(n),s=STORAGE.localStore.getItemWithExpiry(i);e.dismiss=function(){STORAGE.localStore.setItemWithExpiry(n,!0,t)};var o=function(){return'<div class="permissions_warning">'+I18n.t("ms_teams.permissions.warning.consent_required",{url:TEAMS_ADMIN_CONSENT_URL})+'<a class="dismiss">'+I18n.t("ms_teams.permissions.warning.dismiss")+"</a></div>"};return e.check_permissions=function(n){a||s||Promise.all([TEAMS_SSO.get_client_side_token(),microsoftTeams.app.getContext()]).then(function(a){var s=a[0],r=a[1];return permissions_url=[Routes.ms_teams_permissions_path(),new URLSearchParams({tenant_id:r.user.tenant.id,token:s,admin:!0,scopes:n||[]})].join("?"),fetch(permissions_url,{method:"GET",headers:{Accept:"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},mode:"cors",cache:"no-store",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(n){if(n.consent_granted)STORAGE.localStore.setItemWithExpiry(i,!0,t);else{var a=document.querySelector(".container.main")||document.body;a.insertBefore(FLASH_MESSAGE_HELPER.build_flash_message("warning permissions",o(),!1),a.firstChild),a.querySelector(".permissions_warning a.dismiss").addEventListener("click",function(t){t.preventDefault(),e.dismiss(),a.querySelector(".flash.permissions a.close").click()})}})["catch"](function(){console.log("Error checking premissions for GoConqr")})})},e}(TEAMS_PERMISSIONS||{}),TEAMS_OUTCOMES=function(e){var t=function(e){e&&(Promise.all([TEAMS_SSO.get_client_side_token(),microsoftTeams.app.getContext()]).then(function(t){const n={token:t[0],tenant_id:t[1].user.tenant.id};Object.keys(n).forEach(function(t){let i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",t),i.setAttribute("value",n[t]),e.appendChild(i)}),e.querySelector("input[type=submit]").disabled=!1}),$(e).on("ajax:success",function(e,t){t.errors?$.jGrowl(t.errors.join("\n")):$.jGrowl(I18n.t("ms_teams.assignments.submissions.record_feedback.success"))}),$(e).on("ajax:error",function(){$.jGrowl(I18n.t("ms_teams.assignments.submissions.record_feedback.failure"))}))},n=function(e){const{assignmentId:n,submissionId:i,classId:a}=params_from_url(window.location.href),s=window.location.href.match(/\p\/(\d+)/)[1];Promise.all([TEAMS_SSO.get_client_side_token(),microsoftTeams.app.getContext()]).then(function(o){var r=o[0],l=o[1],c=Routes.edit_ms_teams_assignment_submission_study_aid_outcomes_path({tenant_id:l.user.tenant.id,class_id:a,assignment_id:n,submission_id:i,study_aid_id:s,token:r});fetch(c,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},mode:"cors",cache:"default",credentials:"same-origin"}).then(function(e){return e.text()}).then(function(n){e.innerHTML=n;const i=e.querySelector(".feedback_outcome_form_wrapper");i.classList.add("expanded"),e.querySelectorAll(".toggle").forEach(function(e){e.addEventListener("click",function(){i.classList.toggle("expanded")})}),t(i.querySelector("form"))})})["catch"](function(){console.log("Unexpected error feching outcome panel")})};return e.init=function(){var e=document.getElementById("teams_outcome_panel");e&&n(e)},e}(TEAMS_OUTCOMES||{});document.addEventListener("DOMContentLoaded",function(){"use strict";var e=function(){var e=document.querySelector(".public_flash_message_container");return e&&(e.innerHTML=""),e||document.body},t=function(){var t=params_from_url(window.location.search);t.token&&t.tenant_id&&TEAMS_SSO.get_server_side_token(t.token,t.tenant_id).then(function(){window.location.reload()})["catch"](function(t){e().prepend(FLASH_MESSAGE_HELPER.build_flash_message("danger",t))})},n=document.getElementById("autoconfirm_teams_subscription");if(n&&window.location.pathname.match(/\/ms_teams\/subscriptions\/new/)&&n.click(),document.querySelectorAll("form.ms_teams_autosubmit").forEach(function(e){e.submit()}),MS_TEAMS.is_teams_frame()&&"undefined"!=typeof microsoftTeams){var i=function(t){t?(TEAMS_SSO.init_ms_linking_options(),$(document).on("click",a().join(","),function(t){t.preventDefault(),TEAMS_SSO.authenticate({query_string:s(t.currentTarget.id),flash_container:e()})})):TEAMS_SSO.init()},a=function(){return["#microsoft_login_link","#google_login_link","#facebook_login_link","#continue_microsoft","#continue_google","#continue_fb"]},s=function(e){var t;return params_to_url(e.match(/^continue_/)?{provider:"fb"===(t=e.split("_")[1])?"facebook":t,has_accepted_terms:"1"}:{provider:e.split("_")[0]})},o=function(){SEARCH_RESULTS.init({search_field_selector:".shared_resource_search_container input[name='q']",resource_search_modal:!0,select_only_one:!0,click_resource_callback:d,ms_teams:!0}),$(document).on("click",".modal .btn-search",function(e){e.preventDefault()}),$(document).on("keypress","#full-search",function(e){13===e.which&&e.preventDefault()})},r=function(t){var n=SMT["ms_teams/private_share_modal"]({header:I18n.t("ms_teams.configurations.modals.private_share.title"),text_1:I18n.t("ms_teams.configurations.modals.private_share.text_1"),text_2:I18n.t("ms_teams.configurations.modals.private_share.text_2"),cancel_text:I18n.t("general.cancel"),ok_text:I18n.t("ms_teams.configurations.modals.private_share.ok_text")}),i=MODAL.create_mustache_modal("teams_private_share_modal",n,["xs_modal"]),a=function(t){e().prepend(FLASH_MESSAGE_HELPER.build_flash_message("danger",t)),microsoftTeams.pages.config.setValidityState(!1)};i.on("click",".btn-ok",function(){c(t).then(function(){microsoftTeams.pages.config.setValidityState(!!t)})["catch"](function(e){"ms_unauth"===e?TEAMS_SSO.init({success_callback:function(){c(t).then(function(){microsoftTeams.pages.config.setValidityState(!!t)})["catch"](a)}}):a(e)})}),i.on("click",".btn-cancel",function(){SEARCH_RESULTS.unselect_resources()})},l=function(e,t){var n=SMT["ms_teams/share_failed_modal"]({header:I18n.t("ms_teams.configurations.modals.share_failed.title"),
impacted_users_intro:I18n.t("ms_teams.configurations.modals.share_failed.impacted_users_intro"),impacted_users:e,invite_friends_url:p(),invite_cta:I18n.t("ms_teams.configurations.modals.share_failed.invite_cta"),cancel_text:I18n.t("general.cancel"),ok_text:I18n.t("general.ok")}),i=MODAL.create_mustache_modal("teams_private_share_modal",n,["xs_modal"]);i.on("click",".btn-ok",function(){t(e)}),i.on("click",".btn-cancel",function(){})},c=function(t){var n=document.getElementById("et_loading_spinner");return n.style="display:block",new Promise(function(i,a){Promise.all([TEAMS_SSO.get_client_side_token(),microsoftTeams.app.getContext()]).then(function(s){var o=s[0],r=s[1],c=[u(),"ms_teams","study_aids",t,"study_aid_readers"].join("/");fetch(c,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":document.head.querySelector("meta[name=csrf-token]").content},body:JSON.stringify({tenant_id:r.user.tenant.id,token:o,ms_group_id:r.team.groupId}),mode:"cors",cache:"default",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(t){n.style="display:none",t.error?t.error.ms_unauth?a("ms_unauth"):t.error.no_account?l(t.error.no_account,i):t.error.consent_required?(e().prepend(FLASH_MESSAGE_HELPER.build_flash_message("danger",I18n.t("ms_teams.study_aid_readers.errors.consent_required",{url:TEAMS_ADMIN_CONSENT_URL}),!1)),i()):a(I18n.t("general.error_msg")):i()})})})},d=function(e){var t=f();t&&t["private"]?r(e):microsoftTeams.pages.config.setValidityState(!!e)},u=function(){return[window.location.protocol,"",window.location.host].join("/")},_=function(){return[u(),"p",m()].join("/")+"?frame=true&ms_teams=1"},h=function(){var e=m();return SEARCH_RESULTS.get_selected_resources_with_data()[e].title},p=function(){return[u(),"profiles",CURRENT_USER.profile.id].join("/")+"#profile-friends-tab"},f=function(){return SEARCH_RESULTS.get_selected_resources_with_data()[m()]},m=function(){return parseInt(SEARCH_RESULTS.get_selected_resources()[0],10)};document.addEventListener("click",function(e){var t=e.target;t.classList.contains("ms_teams_external")&&(e.preventDefault(),MS_TEAMS.alert_external_link(t.href)),t.classList.contains("ms_teams_upgrade")&&(e.preventDefault(),TEAMS_SSO.decorate_hrefs_for_auth([t.href]).then(function(e){MS_TEAMS.subscription_prompt_or_alert(e[0])}))}),microsoftTeams.app.initialize().then(function(){microsoftTeams.app.notifySuccess();var e=document.getElementById("recentre_canvas");e&&setTimeout(function(){e.click()},200);var t=document.querySelectorAll(".with_ms_teams_decoration");if(t){var n=[...t].map(function(e){return e.getAttribute("href")});TEAMS_SSO.decorate_hrefs_for_auth(n).then(function(e){t.forEach(function(t,n){t.setAttribute("href",e[n])})}),microsoftTeams.app.getContext().then(function(e){document.body.classList.add("teams_client_"+e.app.host.clientType);var t=document.getElementById("microsoft_login_link");if(t){var n=document.createElement("input"),i=t.parentNode;n.type="hidden",n.name="login_hint",n.value=e.user.loginHint,i.append(n)}})}}),microsoftTeams.app.initialize().then(function(){return microsoftTeams.app.getContext()}).then(function(e){microsoftTeams.pages.config.isSupported()&&"settings"===e.page.frameContext&&microsoftTeams.pages.config.registerOnSaveHandler(function(e){microsoftTeams.pages.config.setConfig({websiteUrl:u(),contentUrl:_(),entityId:m(),suggestedDisplayName:h()}).then(function(){e.notifySuccess()})["catch"](function(t){e.notifyFailure("Unexpected error"),console.log(t)})})});var g=document.querySelector("a#ms_permissions");if(g&&g.addEventListener("click",function(e){e.preventDefault(),window.open(g.getAttribute("href"))}),window.location.pathname.match(/\/users\/sign_in/))i("1"===params_from_url(window.location.search).manual);else if(window.location.pathname.match(/\/users\/sign_up\/step_/))microsoftTeams.authentication.notifySuccess();else if(window.location.pathname.match(/\/users\/sign_up/))i(!0);else if(window.location.pathname.match(/\/ms_teams\/configuration/))o(),TEAMS_PERMISSIONS.check_permissions();else if(window.location.href.match(/\/p\/\d+.*view=SpeedGrader/)){TEAMS_PERMISSIONS.check_permissions();var v=document.querySelector("input#ms_token_required");v&&"true"===v.value?TEAMS_SSO.decorate_hrefs_for_auth([window.location.href]).then(function(e){do_redirect(e[0],!0)}):TEAMS_OUTCOMES.init()}else TEAMS_PERMISSIONS.check_permissions();(window.location.pathname.match(/\/ms_teams\//)||window.location.search.match(/ms_teams=1/))&&TEAMS_ACTIVITY_LOGGING.log_activity(window.location.pathname)}else window.location.pathname.match(/\/users\/sign_in/)&&t()});var STARTER_CHECKLIST=function(e){var t={create_subject:{selector:".left_sidebar .subjects_index a",placement:"right"},create_resource:{selector:".create_study_aid_button_starter_checklist_helper",placement:"bottom"},browse_library:{selector:".sidebar_box#library_overview",placement:"left"},complete_course:{selector:".left_sidebar .courses_index a",placement:"right"},join_group:{selector:".left_sidebar .groups_index a",placement:"right"}},n="#starter_checklist",i=n+" .checklist",a=n+" .close",s=[],o=!1,r=[],l=function(){if($(n).length){var e=$(i).find(".starter_checklist_step").length,t=$(i).find(".starter_checklist_step.completed").length,s=Math.round(100*t/e);$(n+" .progress-bar").css("width",s+"%"),$(n+" .progress-value").text(s+"%"),s>=100&&($(a).removeClass("hidden"),$(n+" .title").text(I18n.t("starter_checklist.complete.title")),$(n+" .sub_title").html(I18n.t("starter_checklist.complete.description",{link:Routes.index_faq_faq_path()})))}},c=function(e){var t=$(i).find("#"+e);t.length&&(t.addClass("completed"),t.children(".checklist_sprite").attr("class","checklist_sprite bg-icon_checklist_checked_40"),l())},d=function(e){_.defer(function(){o&&($.inArray(e,s)>-1||(c(e),$.post(Routes.starter_checklist_completion_markers_path(),{step:e}).done(function(){s.push(e)})))})};return $(document).on("click",i+" .starter_checklist_step",function(){var e=$(this).attr("id");if($(t[e].selector).length){var n=$(t[e].selector).offset().top-50;n<0&&(n=0),$(t[e].selector).popover({placement:t[e].placement,container:$(t[e].selector),animation:!1,template:popover_with_class("starter_checklist_popover "+e+"_popover"),content:I18n.t("starter_checklist."+e+".description")}),window.scrollTo({left:0,top:n,behaviour:"smooth"}),setTimeout(function(){$(t[e].selector).popover("show")},100)}}),$(document).on("click",a,function(){$(n).fadeOut("slow"),$.put(Routes.dismiss_starter_checklist_profile_path(CURRENT_USER.profile.id))}),$(document).on("nav-icon:clicked",function(e,n){"create_study_aid_button"===n.id&&$(t.create_resource.selector).popover("hide")}),$(document).on("subject_created",function(){var e=function(){d("create_subject")};o?e():r.push(e)}),$(document).on("groups:created groups:request_to_join groups:accept_invite",function(){var e=function(){d("join_group")};o?e():r.push(e)}),$(document).on("edit_mode:init",function(){var e=function(){d("create_resource")};o?e():r.push(e)}),$(document).on("course:completed",function(){var e=function(){d("complete_course")};o?e():r.push(e)}),$(document).on("dashboard_router:after:navigate",function(){if(-1!==location.href.indexOf("library")){var e=function(){d("browse_library")};o?e():r.push(e)}}),e.init=function(e,t){if(t=t||[],o=!e){for(;r.length;)r.pop()();s=t.map(function(e){return e.step})}},e}(STARTER_CHECKLIST||{});$(document).on("authenticated_user:init course:init",function(){_.defer(function(){CURRENT_USER&&STARTER_CHECKLIST.init(CURRENT_USER.profile.hide_starter_checklist,CURRENT_USER.starter_checklist_completion_markers)})}),
/*! BigScreen
 * v2.0.5 - 2015-05-02
 * 
 * Copyright 2015 Brad Dougherty <me@brad.is>; MIT License
 */
function(e,t,n){"use strict";function i(e){var t=null;if("VIDEO"===e.tagName)t=e;else{var n=e.getElementsByTagName("video");n[0]&&(t=n[0])}return t}function a(e){var t=i(e);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_METADATA?(t.addEventListener("loadedmetadata",function i(){t.removeEventListener("loadedmetadata",i,!1),t.webkitEnterFullscreen(),u=!!t.getAttribute("controls")},!1),t.load()):(t.webkitEnterFullscreen(),u=!!t.getAttribute("controls")),d=t}catch(n){return g("not_supported",e)}return!0}return g(c.request===undefined?"not_supported":"not_enabled",e)}function s(){v.element||(m(),r())}function o(){n&&"webkitfullscreenchange"===c.change&&window.addEventListener("resize",s,!1)}function r(){n&&"webkitfullscreenchange"===c.change&&window.removeEventListener("resize",s,!1)}var l=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10)>=7,c=function(){var e=t.createElement("video"),n={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},i={};for(var a in n)for(var s=0,o=n[a].length;s<o;s++)if(n[a][s]in e||n[a][s]in t||"on"+n[a][s].toLowerCase()in t){i[a]=n[a][s];break}return i}(),d=null,u=null,_=function(){},h=[],p=!1;navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(p=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var f=function(e){var t=h[h.length-1];t&&(e!==t.element&&e!==d||!t.hasEntered)&&("VIDEO"===e.tagName&&(d=e),1===h.length&&v.onenter(v.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0)},m=function(){!d||u||l||(d.setAttribute("controls","controls"),d.removeAttribute("controls")),d=null,u=null;var e=h.pop();e&&(e.exit.call(e.element),v.element||(h.forEach(function(e){e.exit.call(e.element)}),h=[],v.onexit()))},g=function(e,t){if(h.length>0){var n=h.pop();t=t||n.element,n.error.call(t,e),v.onerror(t,e)}},v={request:function(e,i,s,o){if(e=e||t.body,h.push({element:e,enter:i||_,exit:s||_,error:o||_}),c.request!==undefined)if(n&&!1===t[c.enabled])a(e);else if(!1!==p&&p<32)a(e);else{if(n&&c.enabled===undefined)return c.enabled="webkitFullscreenEnabled",e[c.request](),void setTimeout(function(){t[c.element]?t[c.enabled]=!0:(t[c.enabled]=!1,a(e))},250);try{e[c.request](),setTimeout(function(){t[c.element]||g(n?"not_enabled":"not_allowed",e)},100)}catch(r){g("not_enabled",e)}}else a(e)},exit:function(){r(),t[c.exit]()},toggle:function(e,t,n,i){v.element?v.exit():v.request(e,t,n,i)},videoEnabled:function(e){if(v.enabled)return!0;var n=i(e=e||t.body);return!(!n||n.webkitSupportsFullscreen===undefined)&&(n.readyState<n.HAVE_METADATA?"maybe":n.webkitSupportsFullscreen)},onenter:_,onexit:_,onchange:_,onerror:_};try{Object.defineProperties(v,{element:{enumerable:!0,get:function(){return d&&d.webkitDisplayingFullscreen?d:t[c.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"===c.exit&&!n||!(!1!==p&&p<32)&&(t[c.enabled]||!1)}}}),c.change&&t.addEventListener(c.change,function(){if(v.onchange(v.element),v.element){var e=h[h.length-2];e&&e.element===v.element?m():(f(v.element),o())}else m()},!1),t.addEventListener("webkitbeginfullscreen",function(e){var t=!0;if(h.length>0)for(var n=0,a=h.length;n<a;n++){if(i(h[n].element)===e.srcElement){t=!1;break}}t&&h.push({element:e.srcElement,enter:_,exit:_,error:_}),v.onchange(e.srcElement),f(e.srcElement)},!0),t.addEventListener("webkitendfullscreen",function(e){v.onchange(e.srcElement),m(e.srcElement)},!0),c.error&&t.addEventListener(c.error,function(){g("not_allowed")},!1)}catch(b){v.element=null,v.enabled=!1}"function"==typeof define&&define.amd?define(function(){return v}):"undefined"!=typeof module&&module.exports?module.exports=v:e.BigScreen=v}(this,document,self!==top),$(document).on("public_view:init",function(){params_from_url(location.href).fs&&$(".full_screen, .full_screen_link").hide(),$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){$(".embedded_content, .public_frame").toggleClass("full_screen_mode").toggleClass("big_screen"),$(".embedded_content").hasClass("big_screen")?$("#jGrowl").detach().appendTo(".embedded_content"):$("#jGrowl").detach().appendTo("body"),_.delay(function(){$(window).resize()},1e3),document.fullscreenElement?($(".fa.icon-resize-full").addClass("hidden"),$(".fa.icon-resize-small").removeClass("hidden")):($(".fa.icon-resize-full").removeClass("hidden"),$(".fa.icon-resize-small").addClass("hidden"))}),_.defer(function(){0!==$(".full_screen").length&&("undefined"!=typeof BigScreen&&BigScreen.enabled?(onClickOrTap($(".full_screen")[0],function(){BigScreen.toggle($(".public_frame")[0])}),$(document).on("shown.bs.modal",function(){$(".embedded_content").hasClass("big_screen")&&$(".modal, .modal-backdrop").detach().appendTo(".embedded_content")})):($(".full_screen").addClass("hidden"),$(".full_screen_link").removeClass("hidden")))})});var PAYMENTS_COMPARE=function(e){const t=function(){const e=document.querySelector("input[name=pricing_frequency]:checked");return e?e.value:"one_off_three_months"},n=function(){$("#subscription_options .what_is_this").tooltip()},i=function(){$(".upgrade_subscription_popup.modal,.upgrade_subscription_prompt.modal").on("hidden.bs.modal",function(){this.outerHTML=""})};return e.init=function(){const e=document.getElementById("next_button"),a=document.getElementById("previous_button"),s=document.querySelectorAll(".purchase_button"),o=JSON.parse(document.getElementById("teacher_prices_json").innerHTML);onClickOrTap(e,function(){document.getElementById("step_1").classList.remove("slide-right"),document.getElementById("step_1").classList.add("slide-left"),document.getElementById("step_2").classList.remove("slide-right"),document.getElementById("step_2").classList.add("slide-left"),track_goal("/payments/upgrades/teacher_bundle",!0)}),onClickOrTap(a,function(){document.getElementById("step_1").classList.replace("slide-left","slide-right"),document.getElementById("step_2").classList.replace("slide-left","slide-right"),track_goal("/payments/upgrades",!0)}),s.forEach(function(e){const n=e.dataset.planType;onClickOrTap(e,function(){window.location.href=Routes.pay_payments_payments_path({plan_type:n,frequency:t()})})});const r=function(){let e=document.querySelector("#step_2 .price .amount"),n=parseInt(document.querySelector("input[name=pricing_frequency]:checked").closest(".price").dataset.amountCents,10),i=o.find(e=>e.frequency===t()).amount_cents-n;e.innerHTML=(i/100).toFixed(2)};document.querySelectorAll("input[name=pricing_frequency]").forEach(function(e){e.addEventListener("change",r)}),i(),n(),r()},e}(PAYMENTS_COMPARE||{});
/*!
 * jQuery.ScrollTo
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 4/09/2012
 *
 * @projectDescription Easy element scrolling using jQuery.
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @author Ariel Flesler
 * @version 1.4.3.1
 *
 * @id jQuery.scrollTo
 * @id jQuery.fn.scrollTo
 * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
 *	  The different options for target are:
 *		- A number position (will be applied to all axes).
 *		- A string position ('44', '100px', '+=90', etc ) will be applied to all axes
 *		- A jQuery/DOM element ( logically, child of the element to scroll )
 *		- A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
 *		- A hash { top:x, left:y }, x and y can be any kind of number/string like above.
 *		- A percentage of the container's dimension/s, for example: 50% to go to the middle.
 *		- The string 'max' for go-to-end.
 * @param {Number, Function} duration The OVERALL length of the animation, this argument can be the settings object instead.
 * @param {Object,Function} settings Optional set of settings or the onAfter callback.
 *	 @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
 *	 @option {Number, Function} duration The OVERALL length of the animation.
 *	 @option {String} easing The easing method for the animation.
 *	 @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
 *	 @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
 *	 @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
 *	 @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
 *	 @option {Function} onAfter Function to be called after the scrolling ends.
 *	 @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 * @return {jQuery} Returns the same jQuery object, for chaining.
 *
 * @desc Scroll to a fixed position
 * @example $('div').scrollTo( 340 );
 *
 * @desc Scroll relatively to the actual position
 * @example $('div').scrollTo( '+=340px', { axis:'y' } );
 *
 * @desc Scroll using a selector (relative to the scrolled element)
 * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );
 *
 * @desc Scroll to a DOM element (same for jQuery object)
 * @example var second_child = document.getElementById('container').firstChild.nextSibling;
 *			$('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
 *				alert('scrolled!!');																
 *			}});
 *
 * @desc Scroll on both axes, to different values
 * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
 */!function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this;if(!(!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])))return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(i,a,s){return"object"==typeof a&&(s=a,a=0),"function"==typeof s&&(s={onAfter:s}),"max"==i&&(i=9e9),s=e.extend({},n.defaults,s),a=a||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(a/=2),s.offset=t(s.offset),s.over=t(s.over),this._scrollable().each(function(){function o(e){c.animate(u,a,s.easing,e&&function(){e.call(this,i,s)})}if(null!=i){var r,l=this,c=e(l),d=i,u={},_=c.is("html,body");switch(typeof d){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(d)){d=t(d);break}if(!(d=e(d,this)).length)return;case"object":(d.is||d.style)&&(r=(d=e(d)).offset())}e.each(s.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",a=i.toLowerCase(),h="scroll"+i,p=l[h],f=n.max(l,t);if(r)u[h]=r[a]+(_?0:p-c.offset()[a]),s.margin&&(u[h]-=parseInt(d.css("margin"+i))||0,u[h]-=parseInt(d.css("border"+i+"Width"))||0),u[h]+=s.offset[a]||0,s.over[a]&&(u[h]+=d["x"==t?"width":"height"]()*s.over[a]);else{var m=d[a];u[h]=m.slice&&"%"==m.slice(-1)?parseFloat(m)/100*f:m}s.limit&&/^\d+$/.test(u[h])&&(u[h]=u[h]<=0?0:Math.min(u[h],f)),!e&&s.queue&&(p!=u[h]&&o(s.onAfterFirst),delete u[h])}),o(s.onAfter)}}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",a="scroll"+i;if(!e(t).is("html,body"))return t[a]-e(t)[i.toLowerCase()]();var s="client"+i,o=t.ownerDocument.documentElement,r=t.ownerDocument.body;return Math.max(o[a],r[a])-Math.min(o[s],r[s])}}(jQuery),function(e){e.fn.hashToLink=function(t){t=e.extend({},e.fn.hashToLink.defaults,t);return this.each(function(){var n=e(this).html(),i=" <!-- space --> ";n=(n=(n=n.replace(new RegExp("&nbsp;","gm"),i)).replace(/(^|\s)#([a-z\d][\w-]*)(\s|$|<)/gi,'$1<a href="/tags/$2" target=\''+t.target+"' rel='"+t.rel+"'>#$2</a>$3")).replace(new RegExp(i,"gm"),"&nbsp;"),e(this).html(n)})},e.fn.hashToLink.defaults={target:"_blank",rel:"tag"}}(jQuery);var COMMENTS=function(e){$(document).on("public_view:init",function(){var t=$("#study_aid_id").text(),n=!!CURRENT_USER;e.load_comments(t,n)}),$(document).on("ajax:success","#public_comment_form",function(){var e={commentable_type:"StudyAid",commentable_id:$("#public_comment_form").data("study-aid-id")};$(".no_comments_message").fadeOut(),$.get(Routes.comments_path(e),function(e){$("#comments_section").html(e),$("#public_comment_form textarea").val(""),$("#public_comment_form .popup_error").addClass("hidden"),$("#public_comment_form").closest(".study_aid_panel").scrollTo($("#comments_head")),t(0),MathJax.Hub.Queue(["Typeset",MathJax.Hub,$("#comments_section")[0]]),$(document).trigger("comments:set_links"),o($("#discussion_form form .btn-success"))})});var t=function(e){var t=$("#comments_list").data("total-comments"),n=0;void 0!==t&&(n=t+e,$("#comments_list").data("total-comments",n)),$("#comments_heading").text(I18n.t("discussions.comments",{count:n})),$(".footer_comment .badge").text(n),n>0?$(".footer_comment .badge").removeClass("hidden"):$(".footer_comment .badge").addClass("hidden"),$(".comments .comments_count").text(n)};$(document).on("ajax:error","#public_comment_form",function(e,t){401!==t.status&&(t=JSON.parse(t.responseText),$("#public_comment_form .popup_error").html(t.errors.join("<br/>")).removeClass("hidden"))}),$(document).on("focus","#public_comment_form textarea",function(){$.get(Routes.ping_dashboard_path())});var n=function(){$(document).off("ajax:success",".delete_comment_modal",i),$(document).off("ajax:error",".delete_comment_modal",a),$("#delete_popup").length>0&&($(document).on("ajax:success",".delete_comment_modal",i),$(document).on("ajax:error",".delete_comment_modal",a))},i=function(e,n){hide_popup(),$.jGrowl(I18n.t("discussions.comment_delete_success")),$(".comment[data-id="+n.id+"]").fadeOut().next("hr").fadeOut(),t(-1),0===$("#comments_list").data("total-comments")&&$("#comments_container").remove()},a=function(){hide_popup(),$.jGrowl(I18n.t("discussions.comment_delete_failure"))};$(document).trigger("comments:set_links"),$(document).on("click",".btn.delete_comment",function(){var e=$(this).closest(".comment").data("id"),t=Routes.delete_popup_comment_path(e);MODAL.create_with_callback("delete_comment_modal",t,["small_modal"],n)}),$(document).on("comments:set_links",function(){$(".respect_line_breaks").urlToLink().hashToLink()}),$(document).on("ajax:success","#comment_pagination .pagination_controls a",function(e,t){$("#comments_section").html(t),MathJax.Hub.Queue(["Typeset",MathJax.Hub,$("#comments_section")[0]]),$(document).trigger("comments:set_links"),$(".study_aid_panel").scrollTop(0)}),$(document).on("click",".btn.edit_comment",function(){var e=$(this).closest(".comment");e.find("p,.admin_controls, .comment_content .respect_line_breaks").addClass("hidden"),e.find(".edit_comment_form").removeClass("hidden"),e.find(".edit_comment_form textarea").trigger("keyup")}),$(document).on("click",".btn.cancel_edit_comment",function(){var e=$(this).closest(".comment");e.find("p,.admin_controls, .comment_content .respect_line_breaks").removeClass("hidden"),e.find(".edit_comment_form").addClass("hidden")}),$(document).on("ajax:success",".comment .edit_comment_form",function(){var e=$(this).closest(".comment");e.find(".respect_line_breaks").text(e.find("form textarea").val()).urlToLink().hashToLink(),e.find("p,.admin_controls, .comment_content .respect_line_breaks").removeClass("hidden"),e.find(".edit_comment_form").addClass("hidden"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e[0]])}),$(document).on("ajax:error",".comment .edit_comment_form",function(e,t){t=JSON.parse(t.responseText),$(this).find(".popup_error").html(t.errors.join("<br/>")).removeClass("hidden")});var s=function(e,t){t.hasClass("disabled")?e.preventDefault():(t.addClass("disabled"),t.siblings("#loading_icon").show())},o=function(e){e.removeClass("disabled"),e.siblings("#loading_icon").hide()};return $(document).on("click","#discussion_form form .btn-success",function(e){s(e,$(this))}),$(document).off("ajax:error","#discussion_form form").on("ajax:error","#discussion_form form",function(){o($("#discussion_form form .btn-success"))}),e.load_comments=function(e,n){var i,a=params_from_url(location.href).uid,s=params_from_url(location.href).link_uuid,o={dont_block_ui:1};a?o.uid=a:s&&(o.link_uuid=s),$("input#target_comment").length>0&&(i=$("input#target_comment").val(),o.comment=i),$("#comments_panel").load(Routes.study_aid_comments_path(_.extend({},o,{study_aid_id:e,_options:!0})),function(){n&&$(document).trigger("action_alerts:updated"),void 0!==i&&PUBLIC_PANEL.toggle_panel(".study_aid_comments",function(){$(".study_aid_comments").scrollTo($(".comment[data-id="+i+"]")[0])}),t(0)})},e}(COMMENTS||{});$(document).on("public_view:session_initialized",function(){CURRENT_USER&&$.ajax({type:"DELETE",url:Routes.study_aid_kill_alerts_path({study_aid_id:$("#study_aid_id").text(),dont_block_ui:1,_options:!0})})});var WINDOW_MESSAGING={uuid:"b7923b17-7d4b-4ff3-bba4-5060db6e9622",callbacks:{},listen:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),window.addEventListener("message",this.handleEvent,!1)},send:function(e,t){e.postMessage(t,"*")},handleEvent:function(e){var t=WINDOW_MESSAGING.callbacks[e.data];t&&_.each(t,function(t){t(e)})},isOurWindow:function(e){try{return e.WINDOW_MESSAGING&&e.WINDOW_MESSAGING.uid===self.uuid}catch(t){return!1}}},RAILS_ENV,Context;!function(e){var t=function(){var t=e("#study_aid_id").text();t&&e.put(Routes.study_aid_log_view_path({study_aid_id:t,dont_block_ui:1,_options:!0}),n())},n=function(){var e=params_from_url(location.href).suggestion_id||params_from_url(a().location.href).suggestion_id;return _.pick({url:location.href,uid:params_from_url(location.href).uid,link_uuid:params_from_url(location.href).link_uuid,client_uid:i(),suggestion_id:e},_.identity)},i=function(){return params_from_url(location.href).client_uid||e("input[name=data_capture_client_uid]").val()},a=function(){var e=10,t=window,n=t.parent,i=t.document.domain,a=window.top,s=0;do{try{if(t===a||n.document.domain!==i)return t;n=(t=n).parent}catch(o){return t}s++}while(s<e);return t};e(document).on("public_view:session_initialized",t),WINDOW_MESSAGING.listen("public_view:session_initialized:log_view",function(){var n=e(a().document).find("meta[name=csrf-token]").attr("content");e("meta[name=csrf-token]").attr("content",n),e("input[name=authenticity_token]").val(n),t()})}(jQuery),function(){var e=function(){var e=new Event("GCResourceLoaded");document.dispatchEvent(e)};$(document).on("public_view:init",function(){$(".study_aid_description").urlToLink(),void 0!==MOBILE&&MOBILE.is_mobile()||($(".related_container .full_screen, #flowchart_container #zoom_slider_container").tooltip({placement:"top",container:".embedded_content"}),$("#recenter_canvas, .player_controls .btn, .play_speed_adjust, .col_controls #zoom_slider_container").tooltip({placement:"bottom",container:".embedded_content"}),$(".global_controls .btn, .close_resource").tooltip({placement:"bottom",container:".embed_footer",template:'<div class="tooltip control_tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),$(".additional_global_controls .btn").tooltip({placement:"right",container:".embedded_content",template:'<div class="tooltip control_tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),e(),window!==FRAME.top_examtime_window()&&WINDOW_MESSAGING.send(FRAME.top_examtime_window(),"public_view:init"))})}(),function(){var e=function(){var e=$(window).scrollLeft();$(t()).css("left",-e)},t=function(){return n()?".embed_footer .control_row":".fixed_container"},n=function(){return $("body.mind_map").length>0};$(e),$(window).on("scroll",e)}(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".study_aid_info_toggle"),t=function(e){e.preventDefault(),$("#study_aid_description .description_text").toggleClass("truncate"),$(".study_aid_extra_menu").slideToggle("fast",function(){var e=$(this).is(":hidden"),t=I18n.t("public.show_less_info");e&&(t=I18n.t("public.show_more_info")),$(".study_aid_info_toggle").text(t)})};e&&(e.addEventListener("touchend",t),e.addEventListener("click",t))}),function(e){e(document).on("public_view:init",function(){var t=e("#study_aid_id").text(),n=e("#study_aid_type").text(),i=e("#study_aid_version").text(),a=params_from_url(location.href).uid,s=params_from_url(location.href).link_uuid,o=params_from_url(location.href).access_token,r={dont_block_ui:1};a?r.uid=a:s?r.link_uuid=s:o&&(r.access_token=o),e.get(Routes.study_aid_version_path(_.extend({},r,{study_aid_id:t,_options:!0})),function(t){var a=t.version;switch(a){case"not_found":case"access_denied":CACHING.ajax_hard_refresh();break;default:Date.parse(a)>Date.parse(i)&&e.jGrowl(I18n.t("study_aids.version_warning",{study_aid_type:I18n.t("study_aids."+n)}))}})}),e(document).on("click","a#hard_refresh",function(e){e.preventDefault(),window.location.reload(!0)})}(jQuery),RAILS_ENV="production",$(document).ready(function(){Routes.configure({default_url_options:{locale:"en"}});var e,t=function(){var e=window.location.pathname.match(/\/subjects\/(\d+)($|\/|\?)/);return e&&e[1]};CURRENT_USER&&((e=Context||{}).default_subject_id=CURRENT_USER.default_subject_id,e.current_subject_id=t(),e.subject_id_for_create=function(){return e.current_subject_id||e.default_subject_id},Context=e)});var STUDY_AID_ACTIONS=function(e){return e.update_state_modal_icon=function(e,t,n){var i=$(t),a=$('.resource_state_icon[data-study-aid-id="'+e+'"]');a.attr("src",i.attr("src")),a.attr("data-original-title",i.attr("title")),a.attr("title",i.attr("title")),is_touch_device()||a.tooltip("update"),$("#save_close_prompt").length&&(n?$("#meta_private_cb").attr("checked","checked"):$("#meta_private_cb").removeAttr("checked","checked"))},$(document).on("click",".edit-upgrade-link",function(e){MOBILE.is_mobile()||($(".save_close_prompt:visible").find("#save_prompt_cancel").click(),UPGRADE.prompt_popup($(this).attr("data-value"),!0),e.preventDefault())}),e}(STUDY_AID_ACTIONS||{}),STUDY_AID_ACTIONS=function(e){var t,n="form#update_from_study_aid_study_aid_form ",i=!1,a=function(t){if(!$(this).hasClass("disabled")){var n=e.get_study_aids_for_context($(this)),i="/study_aids/edit_meta_popup",a=$(this).data("field");n.length&&($(".modal").modal("hide"),i+="?study_aid_id="+n[0],STUDY_AID_ACTIONS.is_view_mode()&&(i+="&view_mode=true"),$(this).data("state-icon")&&(i+="&from_state_icon=true"),e.modal(i,"on",function(){STUDY_AID_ACTIONS.set_up_modal($(".edit_meta_modal")),a&&s(a),$(".edit_meta_modal .what_is_this").tooltip({placement:"right"}).on("click",function(e){e.preventDefault()})}),$('[data-toggle="dropdown"]').parent().removeClass("open"))}t.preventDefault()},s=function(e){var t=$("#edit_meta_content form"),n=null;switch(e){case"description":n=t.find("textarea#description");break;case"tags":n=t.find(".tagsinput .twitter-typeahead .tt-input");break;case"title":default:n=t.find("input#title")}move_cursor_to_end(n[0])},o=function(e){var t=$(this).closest("form"),n=t.closest(".modal");$(this).prop("disabled",!0).addClass("disabled pressed"),t.find("#moving_loading_icon").show(),e.preventDefault(),n.find("#confirm_resource_private_state_content").length>0&&t.find("input[name='private']").is(":checked")&&i?f():t.submit()};e.modal=function(t,n,i){var a=$("#edit_study_aid_modal");return"on"===n?(a.on("hidden.bs.modal",e.tear_down_modal),MODAL.create_with_callback("edit_meta_modal",t,["small_modal"],function(){void 0!==i&&i()})):a.off("hidden.bs.modal",e.tear_down_modal),a},e.set_up_modal=function(e,n){t=e,i=!1,$('input[name="tag_list"]',t).length&&TAG_LIST.init($('input[name="tag_list"]',t),_.extend({typeahead:{url:Routes.tags_typeahead_path({dont_block_ui:1,term:"!QUERY"})}},n)),$('input[name="admin_tag_list"]',t).length&&TAG_LIST.init($('input[name="admin_tag_list"]',t),_.extend({typeahead:{url:Routes.tags_typeahead_path({dont_block_ui:1,term:"!QUERY"})},placeholder_text:I18n.t("tags.add_an_admin_tag")},n)),t.find("#meta_private").on("change",function(){i=!0}),$("#update_from_study_aid_study_aid_form",t).on("ajax:success",l).on("ajax:error",r),$("#active_subject").val($(".meta-asset").attr("data-subjectid"))},e.tear_down_modal=function(){$("#update_from_study_aid_study_aid_form",t).off("ajax:success",l).off("ajax:error",r),e.modal(null,"off")};var r=function(e,n){var i=JSON.parse(n.responseText),a=i.errors;i.id;$("#rename_asset_btn",t).removeClass("disabled").removeClass("pressed").prop("disabled",!1),$("#rename_box_status_messages",t).removeClass("success").addClass("errored alert alert-danger"),_.each(a,function(e){$("#rename_box_status_messages",t).html(e+"<br>")}),$("#moving_loading_icon",t).hide(),$("#rename_asset_btn",t).removeClass("disabled pressed")},l=function(t,n){$(document).trigger("study_aid.update_meta",n);var i=$("form#update_from_study_aid_study_aid_form input[name='study_aid_id']").val();void 0!==EXAMTIME_DATA&&(_.each(EXAMTIME_DATA.collections,function(e,t){/topic_\d+_study_aids$/.test(t)&&e.get(n.id)&&e.set([n],{add:!1,remove:!1,merge:!0})}),$(".study_aid_actions").length>0&&STUDY_AID_ACTIONS_STICKY_TOOLBAR.update_all()),e.update_state_modal_icon(i,n.state_icon,n["private"]),$("#public_state").val(!n["private"]),PAGE_EVENTS.trigger("state:change",n),$(".modal").modal("hide"),$("#rename_box_status_messages").removeClass("errored").addClass("success"),$.jGrowl(I18n.t("study_aids.rename.success")),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},c=function(e){var t,n=$("h1.study_aid_page_title");$.trim(e.title).length>0?(t=e.title,n.removeClass("blank")):(t=I18n.t("study_aids.untitled"),n.addClass("blank")),n.text(t),$("#rename_study_aid_popup input#title").val(e.title),document.title=I18n.t("titles.site")+" - "+I18n.t("titles.editing")+" "+t,$("#raw_study_aid_page_title").text(e.title),TAG_LIST.render_tags_from_array(e.tag_list),$(document).trigger("document_title_rerendered")},d=function(e){var t,n=$(".study_aid_title");$.trim(e.title).length>0?(t=e.title,n.removeClass("default")):(t=I18n.t("study_aids.untitled"),n.addClass("default")),document.title=I18n.t("titles.site")+" - "+t,n.text(t),FRAME.in_iframe&&FRAME.on_same_domain&&window.top.$(".embed_popup_header").text(t),$(".publicmeta").find("#study_aid_description .description_text").text(e.description),TAG_LIST.render_tags_from_array(e.tag_list);var i=$("body.canonical #resource_meta_content"),a=i.find(".summary_section"),s=i.find(".actions_section");if(a.length>0){var o=a.find(".summary_content_wrapper");e.hide_summary?(o.find(".titlebar a.resource_edit_info").text(I18n.t("canonical.author.labels.show_summary")),a.removeClass("disabled").addClass("disabled")):(o.find(".titlebar a.resource_edit_info").text(I18n.t("canonical.author.labels.hide_summary")),a.removeClass("disabled"))}s.length>0&&(s.find(".toggle_privacy form").addClass("hidden"),e["private"]?s.find(".toggle_privacy #make_public").removeClass("hidden"):s.find(".toggle_privacy #make_private").removeClass("hidden"))},u=function(){var e=$(this).closest(".modal"),t=$(this).attr("name");p(e,t)},h=function(){var e=$(this).closest(".modal");p(e,"private"),p(e,"copyable"),p(e,"hide_summary")},p=function(e,t){var n,i=_.reduce(e.find("input[name^='can_']"),function(e,t){return e[t.id]="true"===t.value,e},{}),a=e.find("input[type='checkbox'][name='"+t+"']");i["can_"+t]||("private"===t?n=!1:"copyable"===t?n=!0:"hide_summary"===t&&(n=!1),a.prop("checked")!==n&&(a.closest(".control-group").find(".upgrade_prompt").show(),a.prop("checked",!a.prop("checked"))))},f=function(){$("#confirm_resource_private_state_content, #edit_meta_content").slideToggle(),$("#confirm_resource_private_state_content #confirm_set_private_btn").off("click").on("click",function(){$(this).prop("disabled",!0).addClass("disabled pressed"),$("#confirm_resource_private_state_content #moving_loading_icon").show(),$(this).closest(".modal").find("form").submit()}),$("#confirm_resource_private_state_content .btn-cancel").off("click").on("click",function(e){var t=$(this).closest(".modal").find("form");t.find("input[type='submit']").prop("disabled",!1).removeClass("disabled pressed"),t.find("#moving_loading_icon").hide(),$("#confirm_resource_private_state_content #confirm_set_private_btn").prop("disabled",!1).removeClass("disabled pressed"),$("#confirm_resource_private_state_content #moving_loading_icon").hide(),$("#confirm_resource_private_state_content, #edit_meta_content").slideToggle(),e.preventDefault()})};return $(document).on("study_aid.update_meta",function(e,t){STUDY_AID_ACTIONS.is_edit_mode()?c(t):STUDY_AID_ACTIONS.is_view_mode()&&d(t)}),$(document).on("click",n+" input[name='private']",u),$(document).on("click",n+" input[name='copyable']",u),$(document).on("click",n+" input[name='hide_summary']",u),$(document).on("submit",n,h),$(document).on("click",".meta-asset, .renamable.study_aid_page_title, .resource_edit_info, .state_edit_modal",a),$(document).on("click","#rename_asset_btn",o),e}(STUDY_AID_ACTIONS||{}),MobileResourceActionsView=ResourceActionsView.extend({el:"#mobile_overlay_actions",events:{"click .action":"click_mobile_action","click .close":"trigger_close"},template:SMT["study_aids/mobile_resource_actions"],mobile_actions:["info","rename","edit","play","copy","pin","unpin","move","social","share_to_teams","share","email","private","public","lock","unlock","delete"],initialize:function(e){this.on_dash=e&&e.on_dash||!1,this.actions=this.mobile_actions.filter(function(e){return!(STUDY_AID_ACTIONS.is_edit_mode()&&"edit"==e)}),this.user=new UserDecorator(CURRENT_USER),this.listenTo(this.model,"change",this.render),$(document).on("ajax:success","#update_from_study_aid_study_aid_form",function(e,t){this.model.set(t)}.bind(this))},render:function(){var e=this._default_attributes();return CURRENT_USER&&(e.signed_in=!0),_.each(this.actions,function(t){e["icon_"+t]="<i class='fa icon-"+t+"'></i>",e["title_"+t]=I18n.t("actions.titles."+t),e["description_"+t]=I18n.t("mobile.actions.descriptions."+t),e["description_"+t+"_unauth"]=I18n.t("mobile.actions.descriptions."+t+"_unauth"),"copy"===t?(e["description_"+t+"_disabled_upgrade"]=I18n.t("mobile.actions.descriptions."+t+"_disabled.upgrade"),e["description_"+t+"_disabled_author"]=I18n.t("mobile.actions.descriptions."+t+"_disabled.author")):e["description_"+t+"_disabled"]=I18n.t("mobile.actions.descriptions."+t+"_disabled")},this),$.extend(e,this.get_model_attributes(),{on_dash:this.on_dash}),this.$el.html(this.template(e)),CURRENT_USER||_.each(["info","pin","copy","share","email"],function(e){this.$(".action[data-action='"+e+"']").addClass("show_sign_in_modal")},this),this},click_mobile_action:function(e){var t=$(e.currentTarget),n=t.closest(".action"),i=n.data("action");if(n.hasClass("show_sign_in_modal"))return $(document).trigger("show_sign_in_modal"),void e.stopPropagation();if(n.hasClass("upgrade-link")){var a=Routes.payments_compare_path({prompt_for:n.data("prompt"),ms_teams:MS_TEAMS.is_teams_frame()?"1":null});return MS_TEAMS.is_teams_frame()?MS_TEAMS.subscription_prompt_or_alert(a):window.location=a,void e.preventDefault()}if(t.attr("href")&&"#"!==t.attr("href")||e.preventDefault(),"delete"===i&&(i="r_delete"),-1!==["public","private","lock","unlock"].indexOf(i)&&(i="r_public"),this[i]&&this[i](e),"info"===i){var s=this.model.get("id"),o=$("#performance_results");!o.hasClass("rendered")&&CURRENT_USER&&STUDY_AID_ACTIONS.show_performance_view(s,o)}},share_to_teams:function(){var e=document.querySelector(".teams-share-button"),t=this.model.get("teams_share_info");for(var n in t)e.setAttribute(n,t[n]);e.style.display="none",MS_TEAMS.is_teams_frame()||shareToMicrosoftTeams.renderButtons(),e.click()},share:function(){SHARING.share_study_aid([this.model.get("id")],["friends","groups"])},info:function(){var e=parseInt(this.$("#actions_list").data("id"),10),t=Routes.show_meta_popup_study_aid_path({id:e});MODAL.create_with_callback("show_meta",t,["small_modal"],function(){STUDY_AID_ACTIONS.show_performance_view(e,$(".modal .publicmeta #performance_results")),COMMENTS.load_comments(e,!0)})},copy:function(){var e=this._default_attributes();e.user_can_clone&&!e.can_clone?$.jGrowl(I18n.t("mobile.actions.descriptions.copy_disabled.author")):ResourceActionsView.prototype.copy.call(this)},rename:function(){var e=parseInt(this.$("#actions_list").data("id"),10),t=Routes.edit_meta_popup_study_aids_path({study_aid_id:e,from_rename:!MS_TEAMS.is_teams_frame(),_options:!0});STUDY_AID_ACTIONS.modal(t,"on",function(){STUDY_AID_ACTIONS.set_up_modal($(".edit_meta_modal"))})},trigger_close:function(){this.trigger("actions:conceal")},get_model_attributes:function(){return this.model.attributes}}),STUDY_AID_ACTIONS=function(e){var t,n=!1;return e.actions_view=null,render=function(t){t.preventDefault(),e.actions_view.render(),track_event("resource","view_actions")},update_model_state=function(e){t.set(_.pick(e,"private","copyable"))},init=function(i){n||(n=!0,t=new StudyAid(i),MOBILE.is_mobile()?(e.actions_view=new MobileResourceActionsView({model:t}),e.actions_view.render(),"true"===params_from_url(window.location.search).for_copy&&(window.history.replaceState({},t.get("title"),window.location.href.split("?")[0]),$("button#mobile_actions").click(),$("#resource_actions #actions_list .action[data-action=copy]").click())):(e.actions_view=new ResourceActionsView({model:t}),$(".actions_toolbar .btn_actions, .global_controls .btn_actions").on("click",render)),PAGE_EVENTS.on("state:change",update_model_state),PAGE_EVENTS.on("study_aid:unpinned",function(){t.set("pinned_by",!1)}),PAGE_EVENTS.on("study_aids:pin_success",function(e,n){_.contains(n.study_aids,t.get("id"))&&t.set("pinned_by",!0)}),PAGE_EVENTS.on("study_aid.update_meta",function(e,n){var i=_.pick(n,_.without(_.keys(t.attributes),"id"));t.set(i,{silent:!0})}),$(".controls_container .btn.move-asset.move").toggleClass("hidden",!t.get("pinned_by")),$(".controls_container .btn.move-asset.pin").toggleClass("hidden",t.get("pinned_by")))},$(document).on("edit_mode:init",function(){"undefined"!=typeof STUDY_AID_PRESENTER_JSON&&init(STUDY_AID_PRESENTER_JSON)}),$(document).on("public_view:init",function(){var e=$("#study_aid_id").text();$.get(Routes.actions_public_path({id:e,dont_block_ui:1,_options:!0})).then(function(e){init(e),STUDY_AID_ACTIONS.update_study_aid_pin_count(undefined,e.pinned_count),e.pinned_by?STUDY_AID_ACTIONS.update_study_aid_pin_to({id:e.subject_id,name:e.subject}):STUDY_AID_ACTIONS.update_study_aid_pin_to()},function(){var e=$("#study_aid_presenter_json");e.length>0&&init(JSON.parse(e.html()))})}),e}(STUDY_AID_ACTIONS||{});$(document).ready(function(){$("#admin_review_container");$("#admin_review_container .hide_link a").on("ajax:success",function(){$.jGrowl(I18n.t("admin_review.message.successfully_hidden")),$("#admin_review_container").removeClass("active").addClass("inactive")}),$("#admin_review_container .unhide_link a").on("ajax:success",function(){$.jGrowl(I18n.t("admin_review.message.successfully_unhidden")),$("#admin_review_container").removeClass("inactive").addClass("active")})});var QUIZZES=function(e){var t,n=4e3,i=function(){t=new Date,WebFont.load({custom:{families:["OpenSans:n1"],urls:["/assets/application_fonts.css"]}});var e=_.throttle(function(){new Date-t>n||$("html").hasClass("wf-opensans-n1-active")||e()},200);e()},a=function(){var t=$("#timed_quiz_splash").is(":visible"),n=$("#questions_to_answer").is(":visible");e.is_timed_quiz&&($("#timed_quiz_splash").hide(),$("#questions_to_answer").show());var i=$(".quiz_question_perform:visible");_.each($(".quiz_question_perform"),function(t){var n=$(t);n.show().addClass("preparing_for_print"),e.position_labels_for_question(n),n.data("questionId")!=i.data("questionId")&&n.hide(),n.removeClass("preparing_for_print")},this),e.is_timed_quiz&&($("#timed_quiz_splash").toggle(t),$("#questions_to_answer").toggle(n)),STUDY_AID_ACTIONS.hide_load_spinner(),STUDY_AID_ACTIONS.general_print(),e.position_labels_for_question($(".quiz_question_perform:visible"))};return e.quiz_print=function(){STUDY_AID_ACTIONS.show_load_spinner(),i(),_.delay(a,1e3)},e}(QUIZZES||{}),SLIDE_SET=function(e){return $(document).ready(function(){STUDY_AID_ACTIONS.capture_ctrl_p(STUDY_AID_ACTIONS.print_slide_set)}),e.print_slide_set=function(){$("#slide_set_print_container").html($("#slide_list").html()),$("#slide_set_print_container").find(".slide").css("transform","").css("margin",0),$("#slide_set_print_container").find(".slide_view").show().css("margin","0px 0px 50px 0px").css("padding",0),$("#slide_set_print_container").find("h1").css("font-weight","normal"),$("#slide_set_print_container").find(".video-js").remove(),STUDY_AID_ACTIONS.general_print()},e}(SLIDE_SET||{}),STUDY_AID_ACTIONS=function(e){e.current_id=0,$(window).on("load",function(){"1"===params_from_url(location.href).print&&_.delay(function(){EXAMTIME_MATHJAX.queue(function(){$(".footer_print.action_button").click()})},100)}),$(document).on("click","#download_png_mindmap",function(t){$(".png_download_modal").modal("show"),e.download_mind_map_png(),t.preventDefault(),track_event("export_resource","download_png_mindmap")}),$(document).on("click","#download_png_flowchart",function(t){t.preventDefault(),$(this).hasClass("is_ie")?alert(I18n.t("flowcharts.edge_png")):($(".png_download_modal").modal("show"),e.download_flowchart_png(),track_event("export_resource","download_png_flowchart"))}),$(document).on("click","#print_note",function(t){e.print_note(),t.preventDefault()}),$(document).on("click","#print_quiz",function(t){e.print_quiz(),t.preventDefault()}),$(document).on("click","#print_mindmap",function(t){t.preventDefault(),e.print_mind_map()}),$(document).on("click","#print_slideset",function(t){t.preventDefault(),e.print_slide_set()}),$(document).on("click","#print_visible_mindmap",function(t){e.print_part_of_mind_map(),t.preventDefault()}),$(document).on("click","#print_flowchart",function(t){t.preventDefault(),e.print_flowchart()}),$(document).on("click","#print_visible_flowchart",function(t){e.print_part_of_flowchart(),t.preventDefault()}),e.show_load_spinner=function(){$("#et_loading_spinner").show();try{window.parent&&"undefined"!=typeof window.parent.$&&window.parent.$("#et_loading_spinner").show()}catch(e){return!1}},e.hide_load_spinner=function(){$("#et_loading_spinner").hide();try{window.parent&&"undefined"!=typeof window.parent.$&&window.parent.$("#et_loading_spinner").hide()}catch(e){return!1}},e.general_print=function(){var t=window;t.focus(),e.trigger_print(t)},e.print_slide_set=function(){SLIDE_SET.print_slide_set()},e.print_quiz=function(){QUIZZES.quiz_print()},e.print_note=function(){NOTES.note_print()},e.print_mind_map=function(){if(e.get_inner_frame(),a(),!e.delegate_to_inner_frame("STUDY_AID_ACTIONS.print_mind_map")){e.show_load_spinner();var t=function(){i($("#iframe_helper").contents().find("#canvas_container").html(),"print")};$("#iframe_helper").off("load").on("load",function(){this.contentWindow.MINDMAP.on_text_loaded(t)}),$("#iframe_helper").attr("src",Routes.image_view_mind_map_path({id:$("#mind_map_id").val()}))}},e.print_part_of_mind_map=function(){if(!e.delegate_to_inner_frame("STUDY_AID_ACTIONS.print_part_of_mind_map")){e.show_load_spinner(),MINDMAP.unselect_all();var t=MINDMAP.connector_filter;MINDMAP.connector_filter=!1,MINDMAP.use_dmz_for_images_when_exporting()&&$.each(MINDMAP.nodes,function(e,t){t.use_image_dmz_path()}),_.each(MINDMAP.nodes,function(e){e.force_hide_annotation_icon(),e.hide_attachments_icon(),e.hide_reparenter(),e.update_connector()});var n=$("#canvas_container svg").clone().wrap("<p>").parent().html();i(n,"print"),MINDMAP.connector_filter=t,_.invoke(MINDMAP.nodes,"update")}},e.download_mind_map_png=function(){if(!$("#download_png_mindmap").hasClass("activated")&&($("#download_png_mindmap").addClass("activated"),!e.delegate_to_inner_frame("STUDY_AID_ACTIONS.download_mind_map_png"))){e.show_load_spinner();var t=function(){i($("#iframe_helper").contents().find("#canvas_container").html(),"png")};$("#iframe_helper").off("load").on("load",function(){this.contentWindow.MINDMAP.on_text_loaded(t)}),$("#iframe_helper").attr("src",Routes.image_view_mind_map_path({id:$("#mind_map_id").val(),png:!0,_options:!0}))}},e.print_flowchart=function(){if(e.get_inner_frame(),a(),!e.delegate_to_inner_frame("STUDY_AID_ACTIONS.print_flowchart")){e.show_load_spinner();var t=$("#iframe_helper");t.off("load").on("load",function(){var n=this.contentWindow;n.EXAMTIME_MATHJAX.queue(function(){t.css({width:"100%",height:"100%"}),t.contents().find("#MathJax_Message").remove(),e.hide_load_spinner(),n.focus(),e.trigger_print(n),_.defer(function(){t.css({width:1,height:1})})})}).attr("src",Routes.image_view_flowchart_path({id:$("#flowchart_id").val()}))}},e.print_part_of_flowchart=function(){if(!e.delegate_to_inner_frame("STUDY_AID_ACTIONS.print_part_of_flowchart")){e.show_load_spinner();var t=$(".flowchart-canvas svg"),i=t.prop("viewBox").baseVal,a={width:t.attr("width"),height:t.attr("height"),viewbox:[i.x,i.y,i.width,i.height].join(" ")};$("#iframe_helper").off("load").on("load",function(){n($(this))}).attr("src",Routes.image_view_flowchart_path(_.extend({},{id:$("#flowchart_id").val(),_options:!0},a)))}},e.download_flowchart_png=function(){$("#download_png_flowchart").hasClass("activated")||($("#download_png_flowchart").addClass("activated"),e.delegate_to_inner_frame("STUDY_AID_ACTIONS.download_flowchart_png")||(e.show_load_spinner(),$("#iframe_helper").off("load").on("load",function(){t($(this),$(this).contents().find(".flowchart-canvas")[0])}).attr("src",Routes.image_view_flowchart_path({id:$("#flowchart_id").val(),png:!0,_options:!0}))))};var t=function(t,n){var i=t[0].contentWindow;i.EXAMTIME_MATHJAX.queue(function(){i.domtoimage.toBlob(n).then(function(t){var n=window.URL.createObjectURL(t);$("#download_png_link").attr("href",n).attr("target","_blank"),$("#download_png_link")[0].click(),e.hide_load_spinner(),$("#download_png_flowchart").removeClass("activated")})["catch"](function(t){CONSOLE.log("Error saving PNG:"),CONSOLE.log(t),e.hide_load_spinner(),$("#download_png_flowchart").removeClass("activated")})})},n=function(t){var n=t[0].contentWindow;n.EXAMTIME_MATHJAX.queue(function(){e.hide_load_spinner(),
t.contents().find("#MathJax_Message").remove(),e.trigger_print(n),$("#wrap,.embedded_content,.contents_wrap").removeClass("no-print")},500)},i=function(t,n){var i=document.getElementById("png_canvas"),a=new XMLSerializer,s=$(t),o=a.serializeToString(s[0]);$("body").append(s),canvg("png_canvas",o,{useCORS:!MINDMAP.use_dmz_for_images_when_exporting(),renderCallback:function(){switch(e.hide_load_spinner(),n){case"print":$("#wrap,.embedded_content,.contents_wrap").addClass("no-print"),$("#print_area").remove(),$("body").append('<div class="only-print" id="print_area"><img id="mind_map_png" src="'+i.toDataURL("image/png")+'"></div>'),window.setTimeout(function(){window.focus(),e.trigger_print(window),$("#wrap,.embedded_content,.contents_wrap").removeClass("no-print"),window.setTimeout(function(){s.hide()},500)},500);break;case"png":if(is_using_msie()){var t=window.open("url","PNG");null===t?alert(I18n.t("mind_maps.png_popup_blocker_alert")):t.document.write("<p>"+I18n.t("mind_maps.png_message_1")+"</p><p>"+I18n.t("mind_maps.png_message_2")+'</p><img src="'+i.toDataURL("image/png")+'"/>')}else try{i.toBlob(function(e){var t=window.URL.createObjectURL(e);$("#download_png_link").attr("href",t).attr("target","_blank"),$("#download_png_link")[0].click()})}catch(a){$("#download_png_link").attr("href",i.toDataURL("image/png")).attr("target","_blank"),$("#download_png_link")[0].click()}$("#download_png_mindmap").removeClass("activated"),s.hide()}}})};e.capture_ctrl_p=function(e){$(document).bind("keyup keydown",function(t){if((t.ctrlKey||t.metaKey)&&80===t.keyCode)return e(),!1})};var a=function(){window.parent!==window&&WINDOW_MESSAGING.send(window.parent,"disable_actionbar")};$(function(){WINDOW_MESSAGING.listen("disable_actionbar",function(){$(".actionbar").hide()}),WINDOW_MESSAGING.listen("enable_actionbar",function(){$(".actionbar").show()}),WINDOW_MESSAGING.send(window.parent,"enable_actionbar")});var s=function(e){return function(){$.get(Routes.ping_dashboard_path(),_.bind(e,this))}},o=["print_note","print_flash_card_deck","print_mind_map","print_part_of_mind_map","print_quiz","print_slide_set","print_flowchart","print_part_of_flowchart"];return _.each(o,function(t){var n=e[t];e[t]=s(n)}),$(document).on("click",".print_study_aid a",function(e){location.reload(),e.preventDefault()}),e.trigger_print=function(e){e.print(),e.parent&&e.parent.$&&e.parent.$(e.parent.document).trigger("iframe:printed")},e}(STUDY_AID_ACTIONS||{}),STUDY_AID_ACTIONS=function(e){e.suggested_tags=function(e,t){var n="/study_aids/add_suggested_tags_popup?study_aid_id="+t;MODAL.create("suggested_tags_popup",n,["small_modal"]),e.preventDefault()},e.suggested_tags_set_up_modal=function(){SUGGESTED_TAGS_LIST.init("#tags_container #tag_list","#suggested_tags_container #tag_list"),TAG_LIST.init("#tags_container #tag_list",{typeahead:{url:Routes.tags_typeahead_path({dont_block_ui:1,term:"!QUERY"})}}),$("#add_suggested_tags_form").on("ajax:success",t),$("#add_suggested_tags_form").on("ajax:error",n)};var t=function(e,t){if(SUBJECT_STUDY_AIDS.in_subject_page()){var i=SUBJECT_STUDY_AIDS.find_model_in_all_collections(t.id);if(void 0===i)return void n(e,t);i.set({tag_count:t.tag_count,tag_list:t.tag_list.split(",")}),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear()}$.jGrowl(I18n.t("study_aids.suggested_tags.success")),$(".modal").modal("hide")},n=function(){$("#error_container").text(I18n.t("study_aids.suggested_tags.error"))};return $(document).on("study_aids:suggested_tags",e.suggested_tags),e}(STUDY_AID_ACTIONS||{}),STUDY_AID_ACTIONS=function(e){var t;return e.get_inner_frame=function(){t=$("iframe.public_frame")},$(e.get_inner_frame),e.delegate_to_inner_frame=function(e){if(0===t.length)return!1;var n=e.split("."),i=t[0].contentWindow;return $.each(n,function(e,t){i=i[t]}),i(),!0},e}(STUDY_AID_ACTIONS||{}),SELECT_BOX_HELPER=function(e){return e.toggle=function(){var e=$(this).find("input[type=checkbox]"),t=$(this).find("i");e.prop("checked")?(e.prop("checked",!1),t.removeClass("icon-check"),t.addClass("icon-check-empty")):(e.prop("checked",!0),t.removeClass("icon-check-empty"),t.addClass("icon-check")),e.change()},e.uncheck=function(e){var t=e.find("input[type=checkbox]"),n=e.find("i");t.prop("checked",!1),n.removeClass("icon-check"),n.addClass("icon-check-empty")},e.check=function(e){var t=e.find("input[type=checkbox]"),n=e.find("i");t.prop("checked",!0),n.removeClass("icon-check-empty"),n.addClass("icon-check")},e}(SELECT_BOX_HELPER||{}),STUDY_AID_ACTIONS=function(e){var t=function(){var e=$("#public_urls"),t=$("#root_url").val(),i=SHARING.embed($(this),t),a=SHARING.url($(this),t);e.find(".link").val(a),e.find(".embed").text(i),e.modal("toggle"),$(document).off("change","#embed_current_zoom"),$(document).on("change","#embed_current_zoom",function(){n()})};$(document).on("click","a.share-study-aid",t),$(document).on("click",".public_urls input, .public_urls textarea",function(){this.select()});var n=function(){var e,t=$("#embed_current_zoom").prop("checked"),n=$("#root_url").val(),i=$("a.share-study-aid");e=t?SHARING.embed(i,n,"zoom="+decimal_round(MINDMAP.viewbox.get_current_zoom(),3)):SHARING.embed(i,n),$("#public_urls").find(".embed").text(e)};return $(document).on("click",".embed_zoom_level",SELECT_BOX_HELPER.toggle),e}(STUDY_AID_ACTIONS||{}),STUDY_AID_ACTIONS=function(e){var t,n="mm_to_note_modal",i="."+n,a=i+" #convert_to_note_btn",s=2,o=0,r=5,l=null,c=function(){var e=$(a);e.addClass("disabled pressed"),e.val(I18n.t("please_wait")),$("#moving_loading_icon").show()},d=function(){var e=$(a);e.removeClass("disabled pressed"),e.val(I18n.t("mind_maps.create_note.button")),$("#moving_loading_icon").hide()},u=function(t){if(!$(this).hasClass("disabled")){var i="/mind_maps/"+e.get_study_aids_for_context($(this))[0]+"/convert_to_note_popup";MODAL.create(n,i,["small_modal"]),$('[data-toggle="dropdown"]').parent().removeClass("open")}t.preventDefault()},h=function(){do_redirect(Routes.subject_path(_.pick({id:l,ms_teams:MS_TEAMS.is_teams_frame()?"1":null,_options:!0},_.identity)),MS_TEAMS.is_teams_frame())},p=function(){o>s?($("#error_container").text(I18n.t("mind_maps.create_note.failed")),d()):(o++,setTimeout(function(){m()},1e3*r))},f=function(){},m=function(){BACKGROUND_JOB_POLLING.poll_job(t,h,p,f,1)},g=function(e,n){parseInt(n.id),l=parseInt(n.subject_id),t=n.job_id,m()},v=function(e,t){var n=JSON.parse(t.responseText);if("undefined"!=typeof n.quota_limit_hit){var a=$(i);a.modal("hide"),a.remove(),UPGRADE.prompt_popup(n.quota_limit_hit)}else{var s=$(this).find(".modal-body"),o=SMT["shared/error_messages_alert"]({error_messages:[n.message]});s.find(".alert").remove(),s.prepend(o),d()}};return $(document).on("click",".convert_to_note",u),$(document).on("click",a,c),$(document).on("ajax:success",i,g),$(document).on("ajax:error",i,v),e}(STUDY_AID_ACTIONS||{}),STUDY_AID_ACTIONS=function(e){var t,n,i=function(e,i){t=i;var a="/study_aids/move_topic_popup?study_aids="+(n=e).join(",");MODAL.create("topic_asset_modal",a,["small_modal"])};e.move_across_topics=function(e,t,n){$.each(e,function(e,i){var a=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(i),s=SUBJECT_STUDY_AIDS.collection_name_for_topic_id(t),o=EXAMTIME_DATA.collections[a],r=EXAMTIME_DATA.collections[s],l=o.models.filter(function(e){return _.contains(n,e.get("id"))});o.remove(n),r.add(l),_.each(l,function(e){e.set({position:null,folder_id:t})})})};var a=function(i,a){a.errors||(void 0!==t&&t.length>0&&(e.move_across_topics(t,a.id,n),STUDY_AID_ACTIONS_STICKY_TOOLBAR.clear()),$.jGrowl(I18n.t("study_aids.topics.move_success",{topic:_.escape(a.name)}))),hide_popup()};return $(document).on("ajax:success",".topic_asset_modal",a),$(document).on("study_aids:move_topic",function(e,t,n){i(t,n)}),$(document).on("click",".actionbutton.move-topic",function(){i([$(this).data("id")])}),$(document).on("click","#move_topic_btn",function(e){$(this).hasClass("disabled")?e.preventDefault():($(this).addClass("disabled pressed"),$("#moving_loading_icon").show())}),e}(STUDY_AID_ACTIONS||{});!function(){function e(e,t){t.errors?$.jGrowl(I18n.t("study_aids.report_as_inappropriate.failed_message",{author:_.escape(t.errors.offender),email:_.escape(t.errors.email)})):$.jGrowl(I18n.t("study_aids.report_as_inappropriate.success_message",{offender:_.escape(t.offender)})),hide_popup()}$(document).on("click",".report-as-inappropriate-asset",function(t){var n=$(this).attr("data-id");MODAL.create_with_callback("report_as_inappropriate_modal",Routes.report_as_inappropriate_popup_study_aid_path(n),["small_modal"],function(){$(document).off("ajax:success",".report_as_inappropriate_modal_container").on("ajax:success",".report_as_inappropriate_modal_container",e),$("#reason").focus()}),$(this).closest(".dropdown").removeClass("open"),t.preventDefault()})}(),$.plainBlockUI=function(){$.blockUI({message:"",overlayCSS:{opacity:0},fadeIn:0,fadeOut:0})};var CLOSE_PROMPTS=function(e){var t=function(e){var t;return RATING_CLOSE_PROMPT.exists()?t=RATING_CLOSE_PROMPT.init(e):SAVE_CLOSE_PROMPT.exists()&&(t=SAVE_CLOSE_PROMPT.init(e)),t},n=function(e){var t=$(".close_prompt #_subject_id"),n=t.find("option:first").clone().wrap("<p>").parent().html();RATING_CLOSE_PROMPT.update(e),e.length>1&&_.each(e,function(e){e["default"]||(n+='\n<option value="'+e.id+'">'+_.escape(e.name)+"</option>")}),t.html(n)};$(document).ready(function(){$(".close_prompt"),$(".close_resource");var e=$(".close_prompt #_subject_id");if(CURRENT_USER&&e.length>0)if(EXAMTIME_DATA.collections.subjects&&!EXAMTIME_DATA.collections.subjects.isEmpty()){var t=_.map(EXAMTIME_DATA.collections.subjects.models,function(e){return{id:e.get("id"),name:e.get("name"),"default":e.get("default")}});n(t)}else $.ajax({type:"GET",url:Routes.list_subjects_path({dont_block_ui:1}),dataType:"json",success:function(e){n(e)}})});var i=function(){var e=MS_TEAMS.is_teams_frame(window.location.href);return _.filter(PAGE_STACK.fetch_previous_pages(),function(t){return t!==location.href&&MS_TEAMS.is_teams_frame(t)===e})};e.redirect_to_previous_page=function(){var e=null,t=CURRENT_USER?"/":"/library",n=i();n.length>0&&(e=n.pop(),PAGE_STACK.set_previous_pages(n)),MS_TEAMS.is_teams_frame()?e?do_redirect(e,!0):history.length>1?history.back():do_redirect(new URL(window.location).origin,!0):do_redirect(e||t)},e.reset_close_button=function(){$(".close_resource").removeClass("disabled")};var a=function(e){var t=location.href.match(/\/p\/(\d+)\/(question|note_page|slide)\//);return e===location.href||t&&e.match("/p/"+t[1]+"($|/|\\?)")};return $(document).on("click",".close_resource",function(n){var i,s=$(this),o=s.data("id"),r=PAGE_STACK.fetch_previous_pages();a(r[r.length-1])&&PAGE_STACK.set_previous_pages(r.slice(0,r.length-1)),s.hasClass("disabled")||(s.addClass("disabled"),s.data("show_prompt")&&(i=t(o))),i?i.off("hide.bs.modal").on("hide.bs.modal",function(){e.redirect_to_previous_page()}):e.redirect_to_previous_page(),n.preventDefault()}),e}(CLOSE_PROMPTS||{}),RATING_CLOSE_PROMPT=function(e){return e.update=function(e){var t=$(".close_resource"),n=$("#rating_close_prompt");t.data("subjects",e.length-1),1===e.length&&(1==t.data("rated")&&t.data("show_prompt",!1),n.find("#pin_prompt").hide())},$(document).on("ratings:rating_fetched",function(e,t){var n=$(".close_resource"),i=$("#rating_close_prompt"),a=t.get("rated_by_user"),s=t.get("pinned_by_user"),o=t.get("authored_by_user"),r=parseInt(n.data("subjects"),10),l=!a||!s&&r>0;n.data({rated:a,pinned:s,show_prompt:l});var c=!s&&!o;$(".additional_global_controls .move_resource.pin").toggle(c),$(".additional_global_controls .move_resource.move").toggle(!c),l&&($("#rate_prompt",i).toggle(!a),$("#pin_prompt",i).toggle(!s&&r>0))}),$(document).on("study_aids:pin_success",function(){var e=$(".close_resource");e&&(e.data({pinned:!0}),e.data("rated")&&e.data({show_prompt:!1}))}),e.exists=function(){return $("#rating_close_prompt").length>0},e.init=function(e){var t=$("#rating_close_prompt"),n=!1,i=!1;if(0===t.length)return!1;var a=!1,s=t.find("select[name='[subject_id]']"),o=s.closest("form"),r=t.find("#skip_btn"),l=t.find("#done_btn");t.modal("show");var c=new RatingsView({id:e,can_rate:!0,hide_average:!0,icon_size:"xlarge",rate_on_click:!1,hide_caption:!0});return t.find("#rating_container").html(c.$el),c.on("ratings:rating_clicked",function(){a=!0,$("#rating_close_prompt #skip_btn").hide(),$("#rating_close_prompt #done_btn").show()}),c.on("ratings:rating_submitted",function(){n=!0,i&&CLOSE_PROMPTS.redirect_to_previous_page()}),s.on("change",function(){""!==$(this).val()?(r.hide(),l.show()):a||(r.show(),l.hide())}),o.on("ajax:success",function(e,t){i=!0,$.jGrowl(I18n.t("study_aids.pin.success",{subject:_.escape(t.subject.name)})),n&&CLOSE_PROMPTS.redirect_to_previous_page()}),r.on("click",function(){t.off("hide.bs.modal").modal("hide"),CLOSE_PROMPTS.redirect_to_previous_page()}),l.on("click",function(){if(t.find("#rate_prompt,#pin_prompt,.modal-footer").hide(),a?(c.submit(),t.find(".rating_done").fadeIn()):n=!0,void 0!==s.val()&&""!==s.val()){o.submit();var e=s.find("option:selected").text();t.find(".pin_done").html(I18n.t("public.close_prompt.pin_done",{subject:_.escape(e)})).fadeIn()}else i=!0;$.plainBlockUI(),t.addClass("done")}),t},e}(RATING_CLOSE_PROMPT||{}),INFO_TOOLTIP=function(e){return e.init_tooltips=function(){$(".what_is_this").tooltip().on("click",function(e){e.preventDefault()})},$(document).ready(e.init_tooltips),$(document).on("pjax:end",e.init_tooltips),$(document).on("click",".what_is_this",function(e){e.preventDefault()}),e}(INFO_TOOLTIP||{}),SAVE_CLOSE_PROMPT=function(e){$(document).on("public_view:init edit_mode:init",function(){if(e.exists()){var t=$("#study_aid_id").text();$.get(Routes.in_subject_study_aid_path({id:t,dont_block_ui:1,_options:!0}),function(e){$(".close_resource").data("show_prompt",!e.in_subject)})}}),$(document).on("study_aids:move_success",function(e,t){$(".close_resource").data("show_prompt",t.subject&&t.subject["default"])});var t=function(e){return null!==e?e:""};return $(document).on("study_aid.update_meta",function(n,i){if(e.exists()){var a=$("#save_close_prompt"),s=i.tag_list||i.cached_tag_list;_.isUndefined(i.title)||$("input[name='title']",a).attr("value",t(i.title)),_.isUndefined(s)||$("input[name='tag_list']",a).attr("value",t(s)),_.isUndefined(i.description)||$("textarea[name='description']",a).text(t(i.description))}}),e.exists=function(){return $("#save_close_prompt").length>0},e.init=function(){var e=$("#save_close_prompt");if(0===e.length)return!1;var t=MODAL.create_mustache_modal("save_close_prompt",e.prop("outerHTML")).removeAttr("id"),n=t.find("select[name='subject_id']"),i=n.closest("form"),a=t.find("#done_btn"),s=t.find("#skip_btn"),o=t.find("#save_prompt_cancel"),r=function(){o.show(),s.hide(),a.show()};return t.off("shown.bs.modal").on("shown.bs.modal",function(){var e=$(this);e.find("#meta_private_cb").attr("id","meta_private_cb_open"),e.find("#meta_copyable_cb").attr("id","meta_copyable_cb_open"),INFO_TOOLTIP.init_tooltips()}),t.modal("show"),t.find("input[name='tag_list']").attr("id","tag_list_scp"),STUDY_AID_ACTIONS.set_up_modal(t,{removeTagCallback:r}),n.on("change",function(){s.hide(),a.show()}),1===n.find("option").length&&n.hide(),i.on("ajax:success",function(){CLOSE_PROMPTS.redirect_to_previous_page()}),s.on("click",function(){t.off("hide.bs.modal").modal("hide"),CLOSE_PROMPTS.redirect_to_previous_page()}),a.on("click",function(){i.submit(),a.addClass("disabled").prop("disabled",!0)}),i.on("ajax:success",function(){t.modal("hide"),$.plainBlockUI()}),i.on("ajax:error",function(){a.removeClass("disabled").prop("disabled",!1)}),$("textarea, input[type='text'], .tt-input",t).on("input",r),$("input[type='checkbox']",t).on("change",r),o.on("click",function(){$(".modal-backdrop + tester").remove(),t.off("hide.bs.modal").modal("hide"),CLOSE_PROMPTS.reset_close_button()}),t.on("click",".create_subject_from_picker",function(e){SUBJECT_FORM.open_create_subject_popup("").on("ajax:success",function(e,t){var i=$("<option>").prop("value",t.id).text(t.name);n.append(i).val(t.id).trigger("change").show()}),e.preventDefault(),e.stopPropagation()}),t},e}(SAVE_CLOSE_PROMPT||{}),PAGE_STACK=function(e){var t="!!**!!",n=[/\/flash_card_decks\/\d*\/print/,/\/p\/\d+\?print=1/,/\/mind_maps\/\d+\/image_view/,/\/flowcharts\/\d+\/image_view/,/\/ms_teams\/study_aids\/new/],i=function(){return"undefined"!=typeof CURRENT_USER&&CURRENT_USER?"previous_pages_"+CURRENT_USER.id:"previous_pages"},a=function(e){return _.reduce(n,function(t,n){return t||n.exec(e)},!1)};return e.fetch_previous_pages=function(){return _.compact((STORAGE.sessionStore.getItem(i())||"").split(t))},e.set_previous_pages=function(e){STORAGE.sessionStore.setItem(i(),e.join(t))},e.add_page_to_stack=function(t){if(!a(t)){var n=e.fetch_previous_pages();0!==n.length&&n[n.length-1]===t||(n.push(location.href),n.length>10&&(n=n.slice(n.length-10,n.length)),e.set_previous_pages(n))}},$(document).ready(function(){"true"!==params_from_url(location.href).frame&&e.add_page_to_stack(location.href)}),e}(PAGE_STACK||{});!function(e){["put","delete"].forEach(function(t){e[t]=function(n,i,a,s){return e.isFunction(i)&&(s=s||a,a=i,i=undefined),e.ajax({url:n,type:t,dataType:s,data:i,success:a})}})}(jQuery);var MediaLibraryItem=Backbone.Model.extend({url:function(){return Routes.media_path({id:this.id})},destroy:function(e){var t=Routes.media_path({id:this.id});return Backbone.Model.prototype.destroy.call(this,_.extend({url:t},e))}}),MediaLibraryItemCollection=Backbone.Collection.extend({model:MediaLibraryItem,url:function(){return Routes.fetch_media_path({per_page:this.per_page,search:this.search})},initialize:function(e){this.bind("add",this.increase_total),this.bind("remove",this.decrease_total),this.per_page=e?e.per_page:undefined,this.search=e?e.search:undefined},increase_total:function(){this.total+=1},decrease_total:function(){this.total-=1},parse:function(e){return this.page=e.page,this.per_page=e.per_page,this.total=e.total,e.items}});
/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(e){
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var t,n=0,i=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(n){var i,a,s;for(s=0;null!=(a=n[s]);s++)try{(i=e._data(a,"events"))&&i.remove&&e(a).triggerHandler("remove")}catch(o){}t(n)}),e.widget=function(t,n,i){var a,s,o,r,l={},c=t.split(".")[0];return t=t.split(".")[1],a=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(r=new n).options=e.widget.extend({},r.options),e.each(i,function(t,i){var a,s;e.isFunction(i)?l[t]=(a=function(){return n.prototype[t].apply(this,arguments)},s=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=a,this._superApply=s,e=i.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=i}),o.prototype=e.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),s?(e.each(s._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,a,s=i.call(arguments,1),o=0,r=s.length;o<r;o++)for(n in s[o])a=s[o][n],s[o].hasOwnProperty(n)&&a!==undefined&&(e.isPlainObject(a)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],a):e.widget.extend({},a):t[n]=a);return t},e.widget.bridge=function(t,n){var a=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,r=i.call(arguments,1),l=this;return o?this.each(function(){var n,i=e.data(this,a);return"instance"===s?(l=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,r))!==i&&n!==undefined?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(r.length&&(s=e.widget.extend.apply(null,[s].concat(r))),this.each(function(){var t=e.data(this,a);t?(t.option(s||{}),t._init&&t._init()):e.data(this,a,new n(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)a[i[s]]=a[i[s]]||{},a=a[i[s]];if(t=i.pop(),1===arguments.length)return a[t]===undefined?null:a[t];a[t]=n}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var a,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function r(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?a.delegate(d,c,r):n.bind(c,r)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,s,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(a in s)a in n||(n[a]=s[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?n:a.effect||n:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[r]?i[t](a):r!==t&&i[r]?i[r](a.duration,a.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}});e.widget}),
/*
 * JavaScript Templates 2.4.1
 * https://github.com/blueimp/JavaScript-Templates
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Inspired by John Resig's JavaScript Micro-Templating:
 * http://ejohn.org/blog/javascript-micro-templating/
 */
function(e){"use strict";var t=function(e,n){var i=/[^\w\-\.:]/.test(e)?new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+e.replace(t.regexp,t.func)+"';return _s;"):t.cache[e]=t.cache[e]||t(t.load(e));return n?i(n,t):function(e){return i(e,t)}};t.cache={},t.load=function(e){return document.getElementById(e).innerHTML},t.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,t.func=function(e,t,n,i,a,s){return t?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:n?"="===n?"'+_e("+i+")+'":"'+("+i+"==null?'':"+i+")+'":a?"';":s?"_s+='":void 0},t.encReg=/[<>&"'\x00]/g,t.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},t.encode=function(e){return(null==e?"":""+e).replace(t.encReg,function(e){return t.encMap[e]||""})},t.arg="o",t.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return t}):e.tmpl=t}(this),function(e){"use strict";var t=function(e,n,i){var a,s,o=document.createElement("img");if(o.onerror=n,o.onload=function(){!s||i&&i.noRevoke||t.revokeObjectURL(s),n&&n(t.scale(o,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))a=s=t.createObjectURL(e),o._type=e.type;else{if("string"!=typeof e)return!1;a=e,i&&i.crossOrigin&&(o.crossOrigin=i.crossOrigin)}return a?(o.src=a,o):t.readFile(e,function(e){var t=e.target;t&&t.result?o.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e,t){var n,i,a,s,o=t.aspectRatio;if(!o)return t;for(i in n={},t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n.crop=!0,(a=e.naturalWidth||e.width)/(s=e.naturalHeight||e.height)>o?(n.maxWidth=s*o,n.maxHeight=s):(n.maxWidth=a,n.maxHeight=a/o),n},t.renderImageToCanvas=function(e,t,n,i,a,s,o,r,l,c){return e.getContext("2d").drawImage(t,n,i,a,s,o,r,l,c),e},t.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},t.scale=function(e,n){function i(){var e=Math.max((r||y)/y,(l||w)/w);e>1&&(y*=e,w*=e)}function a(){var e=Math.min((s||y)/y,(o||w)/w);1>e&&(y*=e,w*=e)}n=n||{};var s,o,r,l,c,d,u,_,h,p,f,m=document.createElement("canvas"),g=e.getContext||t.hasCanvasOption(n)&&m.getContext,v=e.naturalWidth||e.width,b=e.naturalHeight||e.height,y=v,w=b;if(g&&(u=(n=t.getTransformedOptions(e,n)).left||0,_=n.top||0,n.sourceWidth?(c=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(u=v-c-n.right)):c=v-u-(n.right||0),n.sourceHeight?(d=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(_=b-d-n.bottom)):d=b-_-(n.bottom||0),y=c,w=d),s=n.maxWidth,o=n.maxHeight,r=n.minWidth,l=n.minHeight,g&&s&&o&&n.crop?(y=s,w=o,0>(f=c/d-s/o)?(d=o*c/s,void 0===n.top&&void 0===n.bottom&&(_=(b-d)/2)):f>0&&(c=s*d/o,void 0===n.left&&void 0===n.right&&(u=(v-c)/2))):((n.contain||n.cover)&&(r=s=s||r,l=o=o||l),n.cover?(a(),i()):(i(),a())),g){if((h=n.pixelRatio)>1&&(m.style.width=y+"px",m.style.height=w+"px",y*=h,w*=h,m.getContext("2d").scale(h,h)),(p=n.downsamplingRatio)>0&&1>p&&c>y&&d>w)for(;c*p>y;)m.width=c*p,m.height=d*p,t.renderImageToCanvas(m,e,u,_,c,d,0,0,m.width,m.height),c=m.width,d=m.height,(e=document.createElement("canvas")).width=c,e.height=d,t.renderImageToCanvas(e,m,0,0,c,d,0,0,c,d);return m.width=y,m.height=w,t.transformCoordinates(m,n),t.renderImageToCanvas(m,e,u,_,c,d,0,0,y,w)}return e.width=y,e.height=w,e},t.createObjectURL=function(e){return!!n&&n.createObjectURL(e)},t.revokeObjectURL=function(e){return!!n&&n.revokeObjectURL(e)},t.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[n=n||"readAsDataURL"])return i[n](e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.loadImage=t}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption,n=e.transformCoordinates,i=e.getTransformedOptions;e.hasCanvasOption=function(n){return!!n.orientation||t.call(e,n)},e.transformCoordinates=function(t,i){n.call(e,t,i);var a=t.getContext("2d"),s=t.width,o=t.height,r=t.style.width,l=t.style.height,c=i.orientation;if(c&&!(c>8))switch(c>4&&(t.width=o,t.height=s,t.style.width=l,t.style.height=r),c){case 2:a.translate(s,0),a.scale(-1,1);break;case 3:a.translate(s,o),a.rotate(Math.PI);break;case 4:a.translate(0,o),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-o);break;case 7:a.rotate(.5*Math.PI),a.translate(s,-o),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-s,0)}},e.getTransformedOptions=function(t,n){var a,s,o=i.call(e,t,n),r=o.orientation;if(!r||r>8||1===r)return o;for(s in a={},o)o.hasOwnProperty(s)&&(a[s]=o[s]);switch(o.orientation){case 2:a.left=o.right,a.right=o.left;break;case 3:a.left=o.right,a.top=o.bottom,a.right=o.left,a.bottom=o.top;break;case 4:a.top=o.bottom,a.bottom=o.top;break;case 5:a.left=o.top,a.top=o.left,a.right=o.bottom,a.bottom=o.right;break;case 6:a.left=o.top,a.top=o.right,a.right=o.bottom,a.bottom=o.left;break;case 7:a.left=o.bottom,a.top=o.right,a.right=o.top,a.bottom=o.left;break;case 8:a.left=o.bottom,a.top=o.left,a.right=o.top,a.bottom=o.right}return o.orientation>4&&(a.maxWidth=o.maxHeight,a.maxHeight=o.maxWidth,a.minWidth=o.minHeight,a.minHeight=o.minWidth,a.sourceWidth=o.sourceHeight,a.sourceHeight=o.sourceWidth),a}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i){var a=this,s=(i=i||{}).maxMetaDataSize||262144,o={};(!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)||!e.readFile(e.blobSlice.call(t,0,s),function(t){if(t.target.error)return console.log(t.target.error),void n(o);var s,r,l,c,d=t.target.result,u=new DataView(d),_=2,h=u.byteLength-4,p=_;if(65496===u.getUint16(0)){for(;h>_&&((s=u.getUint16(_))>=65504&&65519>=s||65534===s);){if(_+(r=u.getUint16(_+2)+2)>u.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=e.metaDataParsers.jpeg[s])for(c=0;c<l.length;c+=1)l[c].call(a,u,_,r,o,i);p=_+=r}!i.disableImageHead&&p>6&&(d.slice?o.imageHead=d.slice(0,p):o.imageHead=new Uint8Array(d).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(o)},"readAsArrayBuffer"))&&n(o)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,a,s;if(n&&!(t+n>e.byteLength)){for(i=[],a=0;n>a;a+=1)s=e.getUint8(t+a),i.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+i.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,a,s,o){var r,l,c,d,u,_,h=e.exifTagTypes[a];if(h){if(!((l=(r=h.size*s)>4?n+t.getUint32(i+8,o):i+8)+r>t.byteLength)){if(1===s)return h.getValue(t,l,o);for(c=[],d=0;s>d;d+=1)c[d]=h.getValue(t,l+d*h.size,o);if(h.ascii){for(u="",d=0;d<c.length&&"\0"!==(_=c[d]);d+=1)u+=_;return u}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,n,i,a,s){var o=t.getUint16(i,a);s.exif[o]=e.getExifValue(t,n,i,t.getUint16(i+2,a),t.getUint32(i+4,a),a)},e.parseExifTags=function(e,t,n,i,a){var s,o,r;if(n+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((o=n+2+12*(s=e.getUint16(n,i)))+4>e.byteLength)){for(r=0;s>r;r+=1)this.parseExifTag(e,t,n+2+12*r,i,a);return e.getUint32(o,i)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,n,i,a,s){if(!s.disableExif){var o,r,l,c=n+10;if(1165519206===t.getUint32(n+4)){if(c+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(c)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(c+2,o))return void console.log("Invalid Exif data: Missing TIFF marker.");r=t.getUint32(c+4,o),a.exif=new e.ExifMap,(r=e.parseExifTags(t,c,c+r,o,a))&&!s.disableExifThumbnail&&(l={exif:{}},r=e.parseExifTags(t,c,c+r,o,l),l.exif[513]&&(a.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),a.exif[34665]&&!s.disableExifSub&&e.parseExifTags(t,c,c+a.exif[34665],o,a),a.exif[34853]&&!s.disableExifGps&&e.parseExifTags(t,c,c+a.exif[34853],o,a)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-exif")):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&((t=this.tags[e])&&(n[t]=this.getText(t)));return n}}),
/*
 * JavaScript Canvas to Blob 2.0.5
 * https://github.com/blueimp/JavaScript-Canvas-to-Blob
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on stackoverflow user Stoive's code snippet:
 * http://stackoverflow.com/q/4998908
 */
function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(n||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,o,r,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),s=new ArrayBuffer(t.length),o=new Uint8Array(s),r=0;r<t.length;r+=1)o[r]=t.charCodeAt(r);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?o:s],{type:l}):((c=new a).append(s),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){i&&t.toDataURL&&s?e(s(this.toDataURL(n,i))):e(this.mozGetAsFile("blob",n))}:t.toDataURL&&s&&(t.toBlob=function(e,t,n){e(s(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return s}):e.dataURLtoBlob=s}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,a,s,o=n.initialIframeSrc||"javascript:false;";return{send:function(r,l){(i=e('<form style="display:none;"></form>')).attr("accept-charset",n.formAcceptCharset),s=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+s+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+s+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+s+"_method=PATCH",n.type="POST"),a=e('<iframe src="'+o+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,s=e.isArray(n.paramName)?n.paramName:[n.paramName];a.unbind("load").bind("load",function(){var t;try{if(!(t=a.contents()).length||!t[0].firstChild)throw new Error}catch(n){t=undefined}l(200,"success",{iframe:t}),e('<iframe src="'+o+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",a.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",s[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var a=e(t[n]);e(i).prop("name",a.prop("name")).attr("form",a.attr("form")),a.replaceWith(i)})}),i.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",o),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var a=i.dataTransfer;a&&-1!==e.inArray("Files",a.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:i}))&&(i.preventDefault(),n&&(a.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,a=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&a-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=a,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(a,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(a,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,a=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:o,value:t.blob}):e.each(t.files,function(i,a){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||o,value:a})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(o,t.blob,a.name):e.each(t.files,function(a,s){(i._isInstanceOf("File",s)||i._isInstanceOf("Blob",s))&&n.append("array"===e.type(t.paramName)&&t.paramName[a]||o,s,s.uploadName||s.name)})),t.data=n):(t.contentType=a.type||"application/octet-stream",t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)i.push(n),a-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var a=e.Deferred(),s=a.promise();return n=n||this.options.context||s,!0===t?a.resolveWith(n,i):!1===t&&a.rejectWith(n,i),s.abort=a.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var i=this,a=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,s){return(t||s)&&(n._processQueue=this._processQueue=(this._processQueue||a([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():a(arguments)}).then(t,s)),this._processQueue||a([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,a,s=this,o=t.files[0],r=o.size,l=t.uploadedBytes,c=t.maxChunkSize||r,d=this._blobSlice,u=e.Deferred(),_=u.promise();return!(!(this._isXHRUpload(t)&&d&&(l||c<r))||t.data)&&(!!n||(l>=r?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(a=function(){var n=e.extend({},t),_=n._progress.loaded;n.blob=d.call(o,l,l+c,o.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+r,s._initXHRData(n),s._initProgressListener(n),i=(!1!==s._trigger("chunksend",null,n)&&e.ajax(n)||s._getXHRPromise(!1,n.context)).done(function(i,o,c){l=s._getUploadedBytes(c)||l+n.chunkSize,_+n.chunkSize-n._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=o,n.jqXHR=c,s._trigger("chunkdone",null,n),s._trigger("chunkalways",null,n),l<r?a():u.resolveWith(n.context,[i,o,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,s._trigger("chunkfail",null,n),s._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})},this._enhancePromise(_),_.abort=function(){return i.abort()},a(),_)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,a){var s=a._progress.total,o=a._response;a._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),a),o.result=a.result=t,o.textStatus=a.textStatus=n,o.jqXHR=a.jqXHR=i,this._trigger("done",null,a)},_onFail:function(e,t,n,i){var a=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),a.jqXHR=i.jqXHR=e,a.textStatus=i.textStatus=t,a.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,a,s,o,r=this,l=r._getAJAXSettings(n),c=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,i=i||((a||!1===r._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&r._getXHRPromise(!1,l.context,a)||r._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){r._onDone(e,t,n,l)}).fail(function(e,t,n){r._onFail(e,t,n,l)}).always(function(e,t,n){if(r._onAlways(e,t,n,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var i=r._slots.shift();i;){if("pending"===r._getDeferredState(i)){i.resolve();break}i=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),o=s.then(c)):(this._sequence=this._sequence.then(c,c),o=this._sequence),o.abort=function(){return a=[undefined,"abort","abort"],i?i.abort():(s&&s.rejectWith(l.context,a),c())},this._enhancePromise(o)):c()},_onAdd:function(t,n){var i,a,s,o,r=this,l=!0,c=e.extend({},this.options,n),d=n.files,u=d.length,_=c.limitMultiFileUploads,h=c.limitMultiFileUploadSize,p=c.limitMultiFileUploadSizeOverhead,f=0,m=this._getParamName(c),g=0;if(!u)return!1;if(h&&d[0].size===undefined&&(h=undefined),(c.singleFileUploads||_||h)&&this._isXHRUpload(c))if(c.singleFileUploads||h||!_)if(!c.singleFileUploads&&h)for(s=[],i=[],o=0;o<u;o+=1)f+=d[o].size+p,(o+1===u||f+d[o+1].size+p>h||_&&o+1-g>=_)&&(s.push(d.slice(g,o+1)),(a=m.slice(g,o+1)).length||(a=m),i.push(a),g=o+1,f=0);else i=m;else for(s=[],i=[],o=0;o<u;o+=_)s.push(d.slice(o,o+_)),(a=m.slice(o,o+_)).length||(a=m),i.push(a);else s=[d],i=[m];return n.originalFiles=d,e.each(s||d,function(a,o){var c=e.extend({},n);return c.files=s?o:[o],c.paramName=i[a],r._initResponseObject(c),r._initProgressObject(c),r._addConvenienceMethods(t,c),l=r._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),a=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),a&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?i[0]:t}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,a=this,s=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])},r=function(e){a._handleFileTreeEntries(e,n+t.name+"/").done(function(e){s.resolve(e)}).fail(o)},l=function(){i.readEntries(function(e){e.length?(c=c.concat(e),l()):r(c)},o)},c=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,s.resolve(t._file)):t.file(function(e){e.relativePath=n,s.resolve(e)},o):t.isDirectory?(i=t.createReader(),l()):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var n=(t=t||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var n,i,a=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(a&&a.length)return this._handleFileTreeEntries(a);if((n=e.makeArray(t.prop("files"))).length)n[0].name===undefined&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(a){i.files=a,n.options.replaceFileInput&&n._replaceFileInput(i),!1!==n._trigger("change",e.Event("change",{delegatedEvent:t}),i)&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,a={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){a.files=i,!1!==n._trigger("drop",e.Event("drop",{delegatedEvent:t}),a)&&n._onAdd(t,a)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,a){var s,o=a.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),s=i[o],t._isRegExpOption(o,s)&&(s=t._getRegExp(s)),n[o]=s)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,a=this,s=e.Deferred(),o=s.promise();return o.abort=function(){return i=!0,n?n.abort():(s.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){i||(e.length?(t.files=e,(n=a._onSend(null,t)).then(function(e,t,n){s.resolve(e,t,n)},function(e,t,n){s.reject(e,t,n)})):s.reject())}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var a=e(this);i.process(function(){return a.fileupload("process",i)}),t.call(this,n,i)}},processActions:{},_processFile:function(t,n){var i=this,a=e.Deferred().resolveWith(i,[t]).promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,s){var o=function(t){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():i.processActions[s.action].call(i,t,s)};a=a.then(o,s.always&&o)}),a.done(function(){i._trigger("processdone",null,t),i._trigger("processalways",null,t)}).fail(function(){i._trigger("processfail",null,t),i._trigger("processalways",null,t)}),a},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var i={},a=this.action,s=!0===this.prefix?a:this.prefix;e.each(this,function(n,a){"string"===e.type(a)&&"@"===a.charAt(0)?i[n]=t[a.slice(1)||(s?s+n.charAt(0).toUpperCase()+n.slice(1):n)]:i[n]=a}),n.push(i)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,i=e.extend({},this.options,t);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(a){var s=a?e.extend({},i):i,o=function(){return t.errorThrown?e.Deferred().rejectWith(n,[t]).promise():n._processFile(s,t)};s.index=a,n._processing+=1,n._processingQueue=n._processingQueue.then(o,o).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","canvas-to-blob","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(n,i){if(i.disabled)return n;var a=this,s=n.files[n.index],o=e.Deferred();return"number"===e.type(i.maxFileSize)&&s.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(s.type)||!t(s,function(e){e.src&&(n.img=e),o.resolveWith(a,[n])},i)?n:o.promise()},resizeImage:function(n,i){if(i.disabled||!n.canvas&&!n.img)return n;i=e.extend({canvas:!0},i);var a,s=this,o=e.Deferred(),r=i.canvas&&n.canvas||n.img,l=function(e){e&&(e.width!==r.width||e.height!==r.height||i.forceResize)&&(n[e.getContext?"canvas":"img"]=e),n.preview=e,o.resolveWith(s,[n])};if(n.exif){if(!0===i.orientation&&(i.orientation=n.exif.get("Orientation")),i.thumbnail&&(a=n.exif.get("Thumbnail")))return t(a,l,i),o.promise();n.orientation?delete i.orientation:n.orientation=i.orientation}return r?(l(t.scale(r,i)),o.promise()):n},saveImage:function(t,n){if(!t.canvas||n.disabled)return t;var i=this,a=t.files[t.index],s=e.Deferred();return t.canvas.toBlob?(t.canvas.toBlob(function(e){e.name||(a.type===e.type?e.name=a.name:a.name&&(e.name=a.name.replace(/\.\w+$/,"."+e.type.substr(6)))),a.type!==e.type&&delete t.imageHead,t.files[t.index]=e,s.resolveWith(i,[t])},n.type||a.type,n.quality),s.promise()):t},loadImageMetaData:function(n,i){if(i.disabled)return n;var a=this,s=e.Deferred();return t.parseMetaData(n.files[n.index],function(t){e.extend(n,t),s.resolveWith(a,[n])},i),s.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var n=e.files[e.index],i=new Blob([e.imageHead,this._blobSlice.call(n,20)],{type:n.type});return i.name=n.name,e.files[e.index]=i,e},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(n,i){if(i.disabled)return n;var a,s,o=n.files[n.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(o.type)&&("number"!==e.type(i.maxFileSize)||o.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(o.type))&&(a=t.createObjectURL(o))?((s=this._audioElement.cloneNode(!1)).src=a,s.controls=!0,n.audio=s,n):n},setAudio:function(e,t){return e.audio&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.audio),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(n,i){if(i.disabled)return n;var a,s,o=n.files[n.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(o.type)&&("number"!==e.type(i.maxFileSize)||o.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(o.type))&&(a=t.createObjectURL(o))?((s=this._videoElement.cloneNode(!1)).src=a,s.controls=!0,n.video=s,n):n},setVideo:function(e,t){return e.video&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.video),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var i,a=e.Deferred(),s=this.options,o=t.files[t.index];return(n.minFileSize||n.maxFileSize)&&(i=o.size),"number"===e.type(n.maxNumberOfFiles)&&(s.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?o.error=s.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(o.type)||n.acceptFileTypes.test(o.name)?i>n.maxFileSize?o.error=s.i18n("maxFileSize"):"number"===e.type(i)&&i<n.minFileSize?o.error=s.i18n("minFileSize"):delete o.error:o.error=s.i18n("acceptFileTypes"),o.error||t.files.error?(t.files.error=!0,a.rejectWith(this,[t])):a.resolveWith(this,[t]),a.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e):"object"==typeof exports?e(require("jquery"),require("tmpl")):e(window.jQuery,window.tmpl)}(function(e,t){"use strict";e.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(t){return t.result&&e.isArray(t.result.files)?t.result.files:[]},add:function(t,n){if(t.isDefaultPrevented())return!1;var i=e(this),a=i.data("blueimp-fileupload")||i.data("fileupload"),s=a.options;n.context=a._renderUpload(n.files).data("data",n).addClass("processing"),s.filesContainer[s.prependFiles?"prepend":"append"](n.context),a._forceReflow(n.context),a._transition(n.context),n.process(function(){return i.fileupload("process",n)}).always(function(){n.context.each(function(t){e(this).find(".size").text(a._formatFileSize(n.files[t].size))}).removeClass("processing"),a._renderPreviews(n)}).done(function(){n.context.find(".start").prop("disabled",!1),!1!==a._trigger("added",t,n)&&(s.autoUpload||n.autoUpload)&&!1!==n.autoUpload&&n.submit()}).fail(function(){n.files.error&&n.context.each(function(t){var i=n.files[t].error;i&&e(this).find(".error").text(i)})})},send:function(t,n){if(t.isDefaultPrevented())return!1;var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload");return n.context&&n.dataType&&"iframe"===n.dataType.substr(0,6)&&n.context.find(".progress").addClass(!e.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),i._trigger("sent",t,n)},done:function(t,n){if(t.isDefaultPrevented())return!1;var i,a,s=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),o=(n.getFilesFromResponse||s.options.getFilesFromResponse)(n);n.context?n.context.each(function(r){var l=o[r]||{error:"Empty file upload result"};a=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){var o=e(this);i=s._renderDownload([l]).replaceAll(o),s._forceReflow(i),s._transition(i).done(function(){n.context=e(this),s._trigger("completed",t,n),s._trigger("finished",t,n),a.resolve()
})})}):(i=s._renderDownload(o)[s.options.prependFiles?"prependTo":"appendTo"](s.options.filesContainer),s._forceReflow(i),a=s._addFinishedDeferreds(),s._transition(i).done(function(){n.context=e(this),s._trigger("completed",t,n),s._trigger("finished",t,n),a.resolve()}))},fail:function(t,n){if(t.isDefaultPrevented())return!1;var i,a,s=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n.context?n.context.each(function(o){if("abort"!==n.errorThrown){var r=n.files[o];r.error=r.error||n.errorThrown||n.i18n("unknownError"),a=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){var o=e(this);i=s._renderDownload([r]).replaceAll(o),s._forceReflow(i),s._transition(i).done(function(){n.context=e(this),s._trigger("failed",t,n),s._trigger("finished",t,n),a.resolve()})})}else a=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){e(this).remove(),s._trigger("failed",t,n),s._trigger("finished",t,n),a.resolve()})}):"abort"!==n.errorThrown?(n.context=s._renderUpload(n.files)[s.options.prependFiles?"prependTo":"appendTo"](s.options.filesContainer).data("data",n),s._forceReflow(n.context),a=s._addFinishedDeferreds(),s._transition(n.context).done(function(){n.context=e(this),s._trigger("failed",t,n),s._trigger("finished",t,n),a.resolve()})):(s._trigger("failed",t,n),s._trigger("finished",t,n),s._addFinishedDeferreds().resolve())},progress:function(t,n){if(t.isDefaultPrevented())return!1;var i=Math.floor(n.loaded/n.total*100);n.context&&n.context.each(function(){e(this).find(".progress").attr("aria-valuenow",i).children().first().css("width",i+"%")})},progressall:function(t,n){if(t.isDefaultPrevented())return!1;var i=e(this),a=Math.floor(n.loaded/n.total*100),s=i.find(".fileupload-progress"),o=s.find(".progress-extended");o.length&&o.html((i.data("blueimp-fileupload")||i.data("fileupload"))._renderExtendedProgress(n)),s.find(".progress").attr("aria-valuenow",a).children().first().css("width",a+"%")},start:function(t){if(t.isDefaultPrevented())return!1;var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n._resetFinishedDeferreds(),n._transition(e(this).find(".fileupload-progress")).done(function(){n._trigger("started",t)})},stop:function(t){if(t.isDefaultPrevented())return!1;var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),i=n._addFinishedDeferreds();e.when.apply(e,n._getFinishedDeferreds()).done(function(){n._trigger("stopped",t)}),n._transition(e(this).find(".fileupload-progress")).done(function(){e(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),e(this).find(".progress-extended").html("&nbsp;"),i.resolve()})},processstart:function(t){if(t.isDefaultPrevented())return!1;e(this).addClass("fileupload-processing")},processstop:function(t){if(t.isDefaultPrevented())return!1;e(this).removeClass("fileupload-processing")},destroy:function(t,n){if(t.isDefaultPrevented())return!1;var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),a=function(){i._transition(n.context).done(function(){e(this).remove(),i._trigger("destroyed",t,n)})};n.url?(n.dataType=n.dataType||i.options.dataType,e.ajax(n).done(a).fail(function(){i._trigger("destroyfailed",t,n)})):a()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){return t||(t=e.Deferred()),this._finishedUploads.push(t),t},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var t=e(this),n=t.prop("href"),i=t.prop("download"),a="application/octet-stream";t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[a,i,n].join(":"))}catch(t){}})},_formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Gbit/s":e>=1e6?(e/1e6).toFixed(2)+" Mbit/s":e>=1e3?(e/1e3).toFixed(2)+" kbit/s":e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(1e3*e),n=Math.floor(e/86400);return(n=n?n+"d ":"")+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(100*e).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime(8*(e.total-e.loaded)/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_renderTemplate:function(t,n){if(!t)return e();var i=t({files:n,formatFileSize:this._formatFileSize,options:this.options});return i instanceof e?i:e(this.options.templatesContainer).html(i).children()},_renderPreviews:function(t){t.context.find(".preview").each(function(n,i){e(i).append(t.files[n].preview)})},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();var n=e(t.currentTarget),i=n.closest(".template-upload").data("data");n.prop("disabled",!0),i&&i.submit&&i.submit()},_cancelHandler:function(t){t.preventDefault();var n=e(t.currentTarget).closest(".template-upload,.template-download"),i=n.data("data")||{};i.context=i.context||n,i.abort?i.abort():(i.errorThrown="abort",this._trigger("fail",t,i))},_deleteHandler:function(t){t.preventDefault();var n=e(t.currentTarget);this._trigger("destroy",t,e.extend({context:n.closest(".template-download"),type:"DELETE"},n.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var n=e.Deferred();return e.support.transition&&t.hasClass("fade")&&t.is(":visible")?t.bind(e.support.transition.end,function(i){i.target===t[0]&&(t.unbind(e.support.transition.end),n.resolveWith(t))}).toggleClass("in"):(t.toggleClass("in"),n.resolveWith(t)),n},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),n=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault(),n.find(".start").click()}}),this._on(t.find(".cancel"),{click:function(e){e.preventDefault(),n.find(".cancel").click()}}),this._on(t.find(".delete"),{click:function(e){e.preventDefault(),n.find(".toggle:checked").closest(".template-download").find(".delete").click(),t.find(".toggle").prop("checked",!1)}}),this._on(t.find(".toggle"),{change:function(t){n.find(".toggle").prop("checked",e(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName")),t&&(e.uploadTemplateId&&(e.uploadTemplate=t(e.uploadTemplateId)),e.downloadTemplateId&&(e.downloadTemplate=t(e.downloadTemplateId)))},_initFilesContainer:function(){var t=this.options;t.filesContainer===undefined?t.filesContainer=this.element.find(".files"):t.filesContainer instanceof e||(t.filesContainer=e(t.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),e.support.fileInput||this._disableFileInputButton()},enable:function(){var e=!1;this.options.disabled&&(e=!0),this._super(),e&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),
/*
 * jQuery File Upload Plugin Localization Example 6.5.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
window.locale={fileupload:{errors:{maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"},error:"Error",start:"Start",cancel:"Cancel",destroy:"Delete"}};var FILE_UPLOADER=function(e){var t,n,i,a="#fileupload_errors",s="#fileupload",o="form#direct_file_upload",r=o,l=".remote_upload_container form",c=window.locale.fileupload.errors,d=I18n.t("fileupload.errors"),u=5,h=function(){$.browser.msie&&parseInt($.browser.version,10)<10||$(t).find(".drag-message").show()},p=function(t){e.quota=t,n.fileupload("option","maxFileSize",e.get_remaining_quota())};e.get_remaining_quota=function(){var t=clamp(e.quota.get("available")-e.quota.get("used"),0);return t>0?t:-1};var f=function(){$.rails.ajax=function(e){return e.timeout||(e.timeout=9e4),$.ajax(e)}},m=!1;e.upload_audio_file=function(e){return m=!0,n.fileupload("send",{files:[e]})},e.init=function(a,c){if(f(),r=(t=c||s)+" "+o,remote_file_form_selector=t+" "+l,_.isUndefined(i)?i=$(t).html():$(t).html(i),(n=$(r)).length){h(),"object"==typeof window.locale?window.locale.fileupload=I18n.t("fileupload"):window.locale={fileupload:I18n.t("fileupload")};var d=$.trim($(t).find("#supported_file_types").text()),m=new RegExp("(.|/)("+d+")$","i");void 0!==a&&(e.quota=a),n.fileupload({maxNumberOfFiles:u,maxFileSize:e.get_remaining_quota(),autoUpload:!0,dataType:"json",timeout:0,acceptFileTypes:m}),n.on("fileuploaddone",v),n.on("fileuploadfail",b),n.on("fileuploadadd",y),n.on("click",".retry-image-upload",S),n.on("dragover",T),n.on("dragleave",M),n.on("drop",C),MEDIA_LIBRARY.on("quota_refreshed",p),$(remote_file_form_selector+" .remote_upload").off("click").on("click",g),$(remote_file_form_selector+" #file").off("keydown").on("keydown",function(e){13===e.keyCode&&($(remote_file_form_selector+" .remote_upload").trigger("click"),e.preventDefault())}),$(r).off("ajax:success").on("ajax:success",function(e,t){v(e,{result:t},!1)}),$(r).off("ajax:error").on("ajax:error",function(e,t){b(e,{jqXHR:t}),A()}),$(remote_file_form_selector).off("ajax:success").on("ajax:success",function(e,t){v(e,{result:t},!0)}),$(remote_file_form_selector).off("ajax:error").on("ajax:error",function(e,t){b(e,{jqXHR:t}),A()})}};var g=function(){var e=$(remote_file_form_selector+" #file"),t=$.trim(e.val()),n=$("<label>",{text:I18n.t("user_validation_errors.required"),"class":"error"}),i=$("<label>",{text:I18n.t("media.form.error_protocol"),"class":"error"});return e.removeClass("error").siblings("label").remove(),E(),t?/^((http|https):\/\/)/.test(t)?void $(remote_file_form_selector).submit():(e.addClass("error").after(i),A(),!1):(e.addClass("error").after(n),A(),!1)},v=function(e,t,i){if(i)return A(),$(remote_file_form_selector+" #file").val(""),void n.trigger("media_uploader:success",t.result);$.post(Routes.media_index_path(),{file:t.xhr().getResponseHeader("location")}).done(function(e){n.trigger("media_uploader:success",e)}),_.defer(function(){m?m=!1:x()||(n.find(".fileinput-button, .supported-files").show(),n.find(".template-download, .download_upload_table").hide(),h(),A(),$(r+" .remote_image_url").val(""),S())})},b=function(e,t){_.defer(function(){if(!x()&&(n.find(".fileinput-button, .supported-files").show(),n.find(".template-download").hide(),$(a+" .fileupload-failed").hide(),h(),t.jqXHR.responseText)){var e=JSON.parse(t.jqXHR.responseText);k(e.errors)}})},y=function(e,t){var i=$(".modal:visible");n.find(".fileinput-button, .drag-message, .supported-files").hide(),$(a+" .fileupload-failed").hide(),n.find(".download_upload_table").show(),n.removeClass("hover"),i.focus(),setTimeout(function(){w(t.files[0].name)&&($(a+" .fileupload-failed-filename-too-long").show(),t.jqXHR&&t.jqXHR.abort()),t.files[0].error===d.maxNumberOfFiles&&($(t.context[0]).remove(),$(a+" .fileupload-failed-max-images").show()),_.each(n.find("td.error"),function(e){var t=$(e).html();if(_.each(c,function(n,i){t=t.replace(n,d[i]),$(e).html(t)}),$.trim($(e).text())===I18n.t("fileupload.errors.maxFileSize")){n.find(".retry-image-upload:visible").length===$("tr.template-upload.in").length&&n.find(".retry-image-upload").removeAttr("disabled");var a=UPGRADE.prompt_popup("media_quota",!0),s=$(".modal-backdrop.in:visible");i.css("display","none"),s.hide(),a.on("hidden.bs.modal",function(){i.length&&(i.show(),s.show(),$("body").addClass("modal-open"))})}})},500),setTimeout(function(){n.find(".retry-image-upload:visible").length===$("tr.template-upload.in").length&&n.find(".retry-image-upload").removeAttr("disabled")},1e3)},w=function(e){return encodeURI(e).length>255},x=function(){return n.find("tr.template-upload.in").length>0},S=function(i){n.fileupload("destroy"),n.off(),e.init(undefined,t.split(o)[0]),i&&i.preventDefault()},T=function(){0===n.find("tr.template-upload").length&&n.addClass("hover")},M=function(){n.removeClass("hover")},C=function(e){n.removeClass("hover"),n.find("tr.template-upload").length>0&&(e.preventDefault(),e.stopPropagation())},k=function(e){e.invalid_image?$(a+" .fileupload-failed-invalid-image").show():$(a+" .fileupload-failed-generic").show()},E=function(){$(remote_file_form_selector+" .remote_upload").addClass("disabled"),$(remote_file_form_selector+" .remote_upload").text(I18n.t("please_wait"))},A=function(){$(remote_file_form_selector+" .remote_upload").removeClass("disabled"),$(remote_file_form_selector+" .remote_upload").text(I18n.t("media.form.import"))};return $(document).ready(function(){i=undefined,undefined}),e}(FILE_UPLOADER||{}),VIDEO_HELPER=function(e){return e.create_popup=function(e){var t="video-"+(new Date).getTime();$modal=MODAL.create_with_callback("lightbox_modal",Routes.media_popup_media_path(_.extend({_options:!0},e)),["video_player"],function(){var e=$(".modal.video_player").find("video.video-js");e.length&&(e.attr("id",t).addClass("hidden"),document.getElementById(t),_.delay(function(){$("#"+t).removeClass("hidden")},100))}),$modal.on("hidden.bs.modal",function(){$("#"+t).remove(),$modal.find("iframe.embedly-embed").remove()})},e}(VIDEO_HELPER||{});!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["underscore","backbone"],function(){return t.apply(e,arguments)}):"object"==typeof module&&module.exports?module.exports=t.call(e,require("underscore"),require("backbone")):t.call(e,e._,e.Backbone)}("object"==typeof global?global:this,function(e,t){"use strict";var n=function(t,n){return t&&t[n]?e.isFunction(t[n])?t[n]():t[n]:null},i=function(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e},a=/^(\S+)\s*(.*)$/;return e.extend(t.View.prototype,{_touching:!1,touchPrevents:!0,touchThreshold:10,isTouch:i(),delegateEvents:function(t){if(t||(t=n(this,"events"))){this.undelegateEvents();var i=".delegateEvents"+this.cid;e(t).each(function(n,s){if(e.isFunction(n)||(n=this[t[s]]),!n)throw new Error('Method "'+t[s]+'" does not exist');var o=s.match(a),r=o[1],l=o[2],c=e.bind(this._touchHandler,this);n=e.bind(n,this),this._useTouchHandlers(r,l)?(this.$el.on("touchstart"+i,l,c),this.$el.on("touchend"+i,l,{method:n},c),this.$el.on(r,l,n)):(r+=i,""===l?this.$el.bind(r,n):this.$el.on(r,l,n))},this)}},_useTouchHandlers:function(e){return this.isTouch&&"click"===e},_touchHandler:function(e){var t=e.originalEvent||e;if("changedTouches"in t){var n=t.changedTouches[0],i=n.clientX,a=n.clientY;switch(e.type){case"touchstart":this._touching=[i,a];break;case"touchend":var s=this._touching[0],o=this._touching[1],r=this.touchThreshold;i<s+r&&i>s-r&&a<o+r&&a>o-r&&(this._touching=!1,this.touchPrevents&&(e.preventDefault(),e.stopPropagation()),e.data.method(e))}}}}),t});var AudioPlayerView=Backbone.View.extend({template:SMT["shared/audio_player"],i18n:{play_label:I18n.t("media.audio_player.play_label"),pause_label:I18n.t("media.audio_player.pause_label"),timer_label:I18n.t("media.audio_player.timer_label"),seek_label:I18n.t("media.audio_player.seek_label"),volume_label:I18n.t("media.audio_player.volume_label"),audio_unsupported_text:I18n.t("media.audio_player_error")},events:{"click .custom_play":"play","click .custom_pause":"pause","ended audio":"pause","click .custom_volume .icon-volume-up":"toggle_volume","change .custom_volume input":"change_volume","input .custom_volume input":"change_volume","change .custom_seek input":"seek","touchend .custom_seek input":"seek","input .custom_seek input":"set_seeking"},initialize:function(e){this.full_player=!!e.full_player,this.use_native=!!e.use_native,this.stack_timer=!!e.stack_timer,this.hide_timer=!!e.hide_timer,this.audio_url=e.audio_url||this._find_url_in_element(),this.label_positioning=e.label_positioning||"top",this.native_audio=null,this.seeking=!1,this._init()},render:function(){return this.$el.html(this.template(this._template_attributes())),this._init(),this},is_playing:function(){return!this._native_audio().paused},play:function(){this.is_playing()||(this._native_audio().play(),this._toggle_playing())},pause:function(){this.is_playing()&&(this._native_audio().pause(),this._toggle_playing())},toggle_volume:function(){this.$(".custom_volume input").toggle()},change_volume:function(){this._native_audio().volume=this.$(".custom_volume input").val()},set_seeking:function(){this.seeking=!0},seek:function(){var e=this._native_audio().duration*this.$(".custom_seek input").val();this._native_audio().currentTime=e,this.$(".custom_timer").html([this._formatted_time(e),this._formatted_duration()].join(" / ")),this.seeking=!1},set_timer:function(){this.$(".custom_timer").html(this._get_current_time()),this.$(".custom_seek").attr("title",this._get_current_time())},_get_current_time:function(){return this._native_audio()&&this._native_audio().duration?[this._formatted_time(this._native_audio().currentTime),this._formatted_duration()].join(" / "):"--:-- / --:--"},_get_current_seek_value:function(){return this._native_audio()&&this._native_audio().duration?this._native_audio().currentTime/this._native_audio().duration:0},_native_audio:function(){return this.native_audio||(this.native_audio=this.$("audio")[0]),this.native_audio},_on_progress:function(){this.set_timer(),this.seeking||this.$(".custom_seek input").val(this._get_current_seek_value())},_formatted_duration:function(){return this.formatted_duration?this.formatted_duration:this.formatted_duration=this._formatted_time(this._native_audio().duration)},_formatted_time:function(e){var t=""+Math.floor(e/60),n=""+Math.floor(e%60);return[t.length<2?"0"+t:t,n.length<2?"0"+n:n].join(":")},_toggle_playing:function(){this.$(".custom_play, .custom_pause").toggleClass("hidden")},_template_attributes:function(){return _.extend({},this.i18n,{use_native:this.use_native,audio_url:this.audio_url,full_player:this.full_player,stack_timer:this.stack_timer,label_class:"labels_"+this.label_positioning,current_time:this._get_current_time()})},_find_url_in_element:function(){return this.$("audio").attr("src")},_init:function(){0!==this.$el.html().trim().length&&(this.native_audio=null,this._init_audio_event_handlers(),this._init_tooltips())},_init_tooltips:function(){this.$(".custom_play, .custom_pause, .custom_timer, .custom_volume .icon-volume-up").tooltip({placement:this.label_positioning})},_init_audio_event_handlers:function(){var e=this;this.$("audio").on("timeupdate",function(t){e._on_progress(t)}),this.$("audio").on("ended",function(){e._toggle_playing()})}}),MediaLibraryItemView=Backbone.View.extend({tagName:"li",model:MediaLibraryItem,template:SMT["media_library/item"],events:{"click .ml_overlay":"select","click .ml_name":"edit_name",'keydown input[name="media[name]"]':"keydown_name",'blur input[name="media[name]"]':"finish_name_edit","click .ml_play_icon":"play_media"},initialize:function(e){_.bindAll(this,"keydown_name","finish_name_edit","poll_success","poll_failing","poll_processing","has_error"),this.edit=e.edit,this.model.on("change",this.render,this),this.update_poll()},update_poll:function(){var e=this.model.get("provider_job_id");null!==e&&"pending"!==e&&(BACKGROUND_JOB_POLLING.poll_job(this.model.get("provider_job_id"),this.poll_success,this.poll_failing,this.poll_processing,1),this.model.set({polling:!0},{silent:!0}))},poll_success:function(){var e=this;this.model.set({polling:!1}),this.model.fetch({success:function(){e.edit||e.has_error()||_.defer(function(){MEDIA_LIBRARY.trigger("update_selected",e.model.get("id"))})},error:function(e){e.set("processing_error",!0),MEDIA_LIBRARY.trigger("quota_hit")}})},poll_failing:function(){},poll_processing:function(){},has_error:function(){return!!this.model.get("processing_error")||!this.model.get("provider_job_id")&&"/assets/icon_media_image.png"===this.model.get("url")},get_error:function(){var e="!!undefined!!";return I18n.t("media.errors."+this.model.get("processing_error"),{defaultValue:e})==e?I18n.t("general.error"):[I18n.t("media.errors."+this.model.get("processing_error")),I18n.t("media.errors.workaround")].join("\n")},get_type_icon_class:function(){switch(this.model.get("type")){case"video":return"icon-film";case"embed_media":return"icon-youtube-play";case"pdf_media":return"icon-file-text-alt";case"audio":return"icon-headphones";default:return"icon-picture"}},render:function(){var e=this,t=this.model.get("size")?"embed_media"==this.model.get("type")?I18n.t("media.embed"):MEDIA_LIBRARY.fileSizeString(this.model.get("size")):"&nbsp;";return this.$el.html(this.template(_.extend({error_message:e.has_error()?e.get_error():null,edit:this.edit,type_icon_class:this.get_type_icon_class(),playable:_.contains(["video","embed_media","audio"],this.model.get("type")),filesize_text:t},this.model.toJSON()))).toggleClass("selected",!!this.model.get("selected")),this.image_class?this.$("img").addClass(this.image_class):this.$("img").on("error",function(){e.image_class="ml_placeholder",e.model.set({thumb_url:null})}).on("load",function(){this.naturalWidth>this.naturalHeight?e.image_class="landscape":e.image_class="portrait",$(this).addClass(e.image_class)}),this.$el.toggleClass("editable",this.edit),e.has_error()&&this.$el.addClass("error"),this},select:function(){this.model.get("pending_delete")||this.model.get("polling")||!this.edit&&this.has_error()||!this.edit&&"image"===this.model.get("type")&&this.$("img").hasClass("ml_placeholder")||(this.model.set("selected",!this.model.get("selected")),this.model.get("selected")?this.$el.trigger("selected",{model:this.model}):this.$el.trigger("unselected",{model:this.model}))},play_media:function(){this.has_error()||("audio"===this.model.get("type")?0===this.$(".audio_player:visible").length?this.reveal_audio_player():this.hide_audio_player():VIDEO_HELPER.create_popup({id:this.model.get("id")}))},reveal_audio_player:function(){var e,t=this,n=t.$(".audio_player");MEDIA_LIBRARY.trigger("init_audio",".ml_items"),0===n.length&&(e=t._build_audio_player(),t.$el.append(e.render().$el),n=t.$(".audio_player")),n.show(),n.find(".custom_play").click()},hide_audio_player:function(){this.$(".custom_pause").click(),this.$(".audio_player").hide()},edit_name:function(){this.model.get("pending_delete")||(this.$el.find(".ml_name").hide(),this.$el.find(".ml_name_edit").show(),this.$el.find('.ml_name_edit input[type="text"]').focus().select())},update_name:function(e){var t=$.trim(e);""!==t&&t!==this.model.get("name")&&(this.model.set("name",t),this.model.save())},finish_name_edit:function(){this.update_name(this.$el.find("input[name='media[name]']").val()),this.render()},keydown_name:function(e){13===e.keyCode&&this.finish_name_edit()},destroy:function(){this.model.destroy(),this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)},_build_audio_player:function(){return new AudioPlayerView({audio_url:this.model.get("url"),full_player:!0,show_timer:!1})}}),AUDIO_RECORDER=function(e){e.media_recorder=null,e.chunks=null,e.audio_ctx=null;var t=1,n=function(e,t){var n="data:"+e.mimeType+";base64,"+e.preview;a(n,null,t,e.mimeType)},i=function(t,n){var i=new Blob(e.chunks,{type:"audio/wav"}),s=window.URL.createObjectURL(i);a(s,i,n)},a=function(n,i,a,s="audio/wav"){var o,r=I18n.t("media.form.record_audio.clip_filename_base")+"_"+t+".mp3",l=a.find(".audio_clips");e.chunks=[],t+=1,o=$('<li><span class="audio_player"><audio controls><source src="'+n+'" type="'+s+'"></source>'+I18n.t("media.audio_player_error")+'</audio></span><span class="clip_name_wrapper"><span class="clip_name">'+r+'</span><input type="text" class="edit_clip_name" style="display: none;" value="'+r.split(".")[0]+'"></span><div class="btn btn-danger delete_clip">'+(MOBILE.is_mobile()?"&times;":I18n.t("media.form.record_audio.delete_clip"))+'</div><div class="btn btn-success store_clip">'+(MOBILE.is_mobile()?"\u2713":I18n.t("media.form.record_audio.store_clip"))+'</div><div class="loading_indicator" style="display: none"><img src="/assets/loading_small.gif" alt="'+I18n.t("general.saving")+' title="'+I18n.t("general.saving")+'"/></div></li>'),l.append(o);var c=function(e){var t=$.trim(e);t.length>0&&(r=t+".mp3",o.find(".clip_name").html(t+".mp3")),o.find(".clip_name").show(),o.find("input.edit_clip_name").hide()};o.on("click",".clip_name",function(){o.find(".clip_name").hide(),o.find("input.edit_clip_name").show(),o.find("input.edit_clip_name").focus().select()}),o.on("keydown","input.edit_clip_name",function(e){13===e.keyCode&&c($(e.target).val())}),o.on("blur","input.edit_clip_name",function(e){c($(e.target).val())}),o.on("click",".delete_clip",function(e){$(e.target).closest("li").remove()}),o.on("click",".store_clip",function(e){var t=new File([i],r);o.find(".loading_indicator").show(),a.find(".btn.delete_clip").addClass("disabled"),a.find(".btn.store_clip").addClass("disabled"),FILE_UPLOADER.upload_audio_file(t).always(function(){$(e.target).closest("li").remove(),a.find(".btn.delete_clip").removeClass("disabled"),a.find(".btn.store_clip").removeClass("disabled")}).fail(function(){$.jGrowl(I18n.t("fileupload.errors.unexpected")),o.find(".loading_indicator").hide()})})},s=function(t,n){if(!e.audio_ctx){var i=window.AudioContext||window.webkitAudioContext;if(!i)return console.log("AudioContext not supported."),void n.hide();e.audio_ctx=new i}var a=n[0].getContext("2d"),s=e.audio_ctx.createMediaStreamSource(t),o=e.audio_ctx.createAnalyser(),r=o.frequencyBinCount,l=new Uint8Array(r),c=function(){const e=n[0].width,t=n[0].height;requestAnimationFrame(c),o.getByteTimeDomainData(l),a.fillStyle="rgb(255,255,255)",a.fillRect(0,0,e,t),a.lineWidth=2,a.strokeStyle="rgb(204,204,204)",a.beginPath();for(var i=1*e/r,s=0,d=0;d<r;d++){var u=l[d]/128*t/2;0===d?a.moveTo(s,u):a.lineTo(s,u),s+=i}a.lineTo(e,t/2),a.stroke()};o.fftSize=2048,s.connect(o),c()},o=function(e){"undefined"==typeof MediaRecorder&&e.find(".unsupported").show()};return e.is_recording=function(){return e.media_recorder&&"recording"===e.media_recorder.state},e.init_done=!1,e.init=function(t,a){if(!e.init_done){$container=a?$(a):$(document),o($container);var r=$container.find(".record"),l=$container.find(".stop"),c=$container.find(".recording_indicator"),d=$container.find(".manage_clips"),u=$container.find(".visualizer");return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e.media_recorder=new MediaRecorder(t),e.media_recorder.ondataavailable=function(t){e.chunks.push(t.data)},e.media_recorder.onstop=function(e){i(e,d)},s(t,u),MS_TEAMS.is_teams_frame()&&r.click()})["catch"](function(e){MS_TEAMS.is_teams_frame()?MS_TEAMS.request_audio_recording().then(function(e){n(e,d)})["catch"](function(e){console.log(["MS Teams error",e.errorCode,e.message].join(": ")),$(".modal").modal("hide");var t=document.querySelector(".teams_permission_instructions").outerHTML;MODAL.create_mustache_modal("generic_modal",t,["small_modal"])}):console.log("The following getUserMedia error occured: "+e)})):console.log("getUserMedia not supported on your browser!"),r.on("click",function(){e.media_recorder&&(e.chunks=[],e.media_recorder.start(),r.addClass("disabled"),l.removeClass("disabled"),c.addClass("recording"))}),l.on("click",function(){e.media_recorder&&e.is_recording()&&(e.media_recorder.stop(),r.removeClass("disabled"),l.addClass("disabled"),c.removeClass("recording"))}),e.init_done=!0}},e.close=function(){e.init_done=!1,e.is_recording()&&e.media_recorder.stop(),e.media_recorder&&e.media_recorder.stream&&e.media_recorder.stream.getAudioTracks()[0].stop()},e}(AUDIO_RECORDER||{}),MediaLibraryView=Backbone.View.extend({events:{"click input[type='submit']":"insert","change input[name='filter[]']":"click_update_filter",selected:"add_selected",unselected:"remove_selected","click #ml_next":"next_page","click #ml_prev":"previous_page","click #ml_delete_btn":"show_destroy_popup","click #ml_confirm_delete_btn":"destroy_selected","click #ml_selected a":"deselect_all","click .ml_close_modal":"close_modal","media_uploader:success form#direct_file_upload":"upload_success","click #ml_menu .context_disabled":"show_context_growl","click .ml_upgrade_prompt a":"show_upgrade_modal","keyup #media_search input":"update_search"},media_types:["image","video","embed_media","pdf_media","audio"],initialize:function(e){_.bindAll(this,"refresh_selected_items","set_selected_by_id");var t=e||{};this.edit=!_.isUndefined(t.edit)&&t.edit,this.multiselect=!_.isUndefined(t.multiselect)&&t.multiselect,this.only=t.only?_.intersection(this.media_types,t.only):this.media_types,this.collection.page=1,this.selected=[],this.file_upload_init=!1,this.collection.bind("reset add remove",this.render,this),this.collection.bind("selected",this.update_selected,this),this.collection.on("change:polling",this.refresh_quota,this),this.reset_filters(),this.update_filter({silent:!0}),this.fetch_collection(),this.update_selected(),this.quota=e.quota,e.modal&&(PAGE_EVENTS.on("media_library:insert_success",this.close_modal.bind(this)),$(document).off("hidden.bs.modal","#media_library_popup").on("hidden.bs.modal","#media_library_popup",this.close_modal.bind(this))),MEDIA_LIBRARY.on("quota_hit",this.quota_hit,this),MEDIA_LIBRARY.on("update_selected",this.set_selected_by_id,this),MEDIA_LIBRARY.on("init_audio",this.stop_and_hide_audio_players,this),this.init_fileupload()},click_update_filter:function(){this.update_filter()},stop_and_hide_audio_players:function(e){this.$(e+" .audio_player").each(function(){$(this).find(".custom_pause").click(),$(this).hide()})},set_selected_by_id:function(e){var t=this.collection.get(e);t&&(t.set("selected",!0),this.add_selected(null,{model:t}))},add_selected:function(e,t){this.multiselect?this.selected.push(t.model):(_.each(this.selected,function(e){e.set("selected",!1)}.bind(this)),this.selected=[t.model]),this.update_selected()},remove_selected:function(e,t){this.selected=_.without(this.selected,t.model),this.update_selected()},deselect_all:function(e){e.preventDefault(),_.each(this.selected,function(e){e.set("selected",!1)}),this.selected=[],this.update_selected()},update_selected:function(){var e=this.selected.length,t=e>0;this.$el.find("#ml_footer input[type='submit'], #ml_delete_btn").toggleClass("disabled",!t).attr("disabled",!t),this.$el.find("#ml_delete_btn").toggleClass("hidden",!t);var n=this.$el.find("#ml_selected");n.text(I18n.t("media.selected",{count:e})),t&&n.append(" <a href='#'>(&times;)</a>")},refresh_selected_items:function(){var e=this;_.each(this.selected,function(t,n){var i=e.collection.findWhere({id:t.id});i&&(e.selected[n]=i,i.set("selected",!0))}),this.refresh_quota()},refresh_quota:function(){var e=this;this.quota.fetch({success:function(t){var n=t.get("used")/1e6,i=t.get("available")/1e6,a=0==i?0:Math.round(n/i*100);e.$("#ml_quota").toggleClass("ml_over_quota",a>100),e.$("#ml_quota").text(I18n.t("media.quota",{used:n.toFixed(2),available:i.toFixed(2),percentage:a})),e.$("#ml_quota_message").addClass("hidden"),MEDIA_LIBRARY.trigger("quota_refreshed",t)}})},quota_hit:function(){this.$("#ml_quota_message").removeClass("hidden")},show_destroy_popup:function(){var e=this.$el.find("#ml_confirm_delete"),t=e.find(".ml_items");t.empty(),_.each(this.selected,function(e){var n=$("<li>");n.html(SMT["media_library/item"](e.toJSON())),t.append(n)}),this.selected.length<=12?e.addClass("small_modal").removeClass("large_modal"):e.removeClass("small_modal"),e.find(".prompt").text(I18n.t("media.delete_popup.prompt",{count:this.selected.length})),e.find(".prompt_note").text(I18n.t("media.delete_popup.note",{count:this.selected.length})),e.modal("show")},destroy_selected:function(){var e=this,t=this.get_selected_ids();_.each(this.selected,function(e){e.set({pending_delete:!0,selected:!1})}),this.$el.find("#ml_delete_btn").toggleClass("disabled",!0).attr("disabled",!0),this.selected=[],this.update_selected(),$.ajax({method:"DELETE",url:Routes.delete_media_path(),data:{ids:t},success:function(){e.collection.size()===t.length&&1!==e.collection.page&&(e.collection.page-=1),e.fetch_collection(),$.jGrowl(I18n.t("media.delete_popup.success",{count:t.length}))}}),this.$el.find("#ml_confirm_delete").modal("hide")},next_page:function(e){e.preventDefault(),this.update_page(this.collection.page+1)},previous_page:function(e){e.preventDefault(),this.update_page(this.collection.page-1)},update_page:function(e){this.stop_polling_jobs(),this.collection.page=e,this.fetch_collection()},reset_filters:function(){if(this.$el.find(".supported_documents, .supported_image, .supported_video, .supported_audio").show(),this.$el.removeClass("no_audio"),this.only.length){for(var e of(this.$el.find("#ml_menu .advanced_fields").find(".filter_field").addClass("context_disabled"),_.each(this.only,function(e){this.$el.find(".filter_field[data-type='"+e+"']").removeClass("context_disabled")}.bind(this)),["documents","video","image","audio"]))_.contains(this.only,e)||this.$el.find(".supported_"+e).hide();_.contains(this.only,"audio")||this.$el.addClass("no_audio")}else this.$el.find("#ml_menu .advanced_fields").find(".filter_field").removeClass("context_disabled"),this.$el.find(".supported_video, .supported_image").show();this.$el.find("#ml_menu .context_disabled input").prop("checked",!1),this.$el.find("#ml_menu .filter_field:not(.context_disabled) input").prop("checked",!0),1===this.only.length&&this.$el.find("#ml_menu .filter_field:not(.context_disabled) input").prop("disabled",!0)},update_filter:function(e){var t=this.filtered;this.filtered=_.pluck(this.$el.find(".filter_field:not(.context_disabled) input[name='filter[]']:checked"),"value"),_.isEqual(t,this.filtered)||(this.collection.page=1,e&&e.silent||this.fetch_collection())},update_search:_.debounce(function(e){var t=e.currentTarget.value;this.collection.search=t,this.collection.page=1,this.fetch_collection()},800),fetch_collection:function(){var e={page:this.collection.page,filters:this.filtered.join(",")};this.collection.fetch({reset:!0,data:$.param(e)}).done(this.refresh_selected_items)},get_selected_ids:function(){return _.map(this.selected,function(e){return e.id})},insert:function(e){$(document).trigger("media_library:insert",{models:_.map(this.selected,function(e){return e.attributes}),ids:this.get_selected_ids()}),e.preventDefault()},init_record_audio:function(){this.record_audio_init||(this.refresh_quota(),this.record_audio_init=AUDIO_RECORDER.init(this.quota,"#"+this.$el.attr("id")+" .tab-pane.record_audio"))},init_fileupload:function(){this.file_upload_init||(this.refresh_quota(),FILE_UPLOADER.init(this.quota,"#"+this.$el.attr("id")+" #fileupload"),this.reset_filters(),this.file_upload_init=!0)},upload_success:function(e,t){1!==this.collection.page?this.update_page(1):(this.collection.total+=1,_.contains(this.only,t.type)?(this.collection.add(t,{at:0,silent:!0}),this.collection.length>this.collection.per_page&&this.collection.reset(this.collection.slice(0,this.collection.per_page),{silent:!0}),this.render()):this.$el.find("#ml_context_warning").show())},close_modal:function(){MEDIA_LIBRARY.trigger("cancel"),this.destroy(),$("#media_library_popup").modal("hide"),AUDIO_RECORDER.close()},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.$el.find("#ml_items").empty(),this.$el.find(".search_results_controls").hide(),this.stop_polling_jobs()},stop_polling_jobs:function(){this.collection.each(function(e){e.get("provider_job_id")&&BACKGROUND_JOB_POLLING.stop_polling_job(e.get("provider_job_id"))})},show_context_growl:function(e){$.jGrowl(I18n.t("media.context_growl")),e.preventDefault(),e.stopPropagation()},show_upgrade_modal:function(e){var t=this.$el.closest(".modal:visible"),n=UPGRADE.prompt_popup("media_library",!0);if(t.length){var i=$(".modal-backdrop.in:visible");t.css("display","none"),i.hide(),n.on("hidden.bs.modal",function(){t.length&&(t.show(),i.show(),$("body").addClass("modal-open"))})}e.preventDefault()},render:function(){var e=[],t=this;this.collection.each(function(t){var n=new MediaLibraryItemView({model:t,edit:this.edit}).render().el;_.contains(this.selected,t)&&(t.set("selected",!0,{silent:!0}),$(n).addClass("selected")),e.push(n)}.bind(this)),this.collection.total>this.collection.per_page?this.$el.find(".pagination").show():this.$el.find(".pagination").hide();var n=(this.collection.page-1)*this.collection.per_page+1,i=n+this.collection.size()-1,a=1===this.collection.page,s=this.collection.page*this.collection.per_page>=this.collection.total;this.$el.find(".page_info").text(I18n.t("tables.start_end_total_custom",{start:n,end:i,total:this.collection.total})),this.$el.find("#ml_prev").toggleClass("disabled",a).attr("disabled",a),this.$el.find("#ml_next").toggleClass("disabled",s).attr("disabled",s),0===this.collection.size()?(this.$el.find(".no_results").show(),this.$el.find(".search_results_controls, #ml_selected").hide(),this.init_fileupload()):(this.$el.find(".no_results").hide(),this.$el.find(".search_results_controls, #ml_selected").show()),MS_TEAMS.is_teams_frame()?onClickOrTap(t.el.querySelector(".record_audio_controls .record"),t.init_record_audio.bind(t)):$('li.record-audio a[data-toggle="tab"]').on("shown.bs.tab",function(){t.init_record_audio()}),this.$el.find("#ml_items").html(e)}}),MediaQuota=Backbone.Model.extend({url:function(){return Routes.quota_media_path()}}),MEDIA_LIBRARY=function(e){var t={},n=function(e,n){_.extend(MEDIA_LIBRARY,Backbone.Events);var i=new MediaLibraryItemCollection(_.extend({},n)),a=n.modal_id?"modal":"page",s=n.modal_id?"#"+n.modal_id:"#media_library";t[a]=new MediaLibraryView(_.extend({},n,{el:s,collection:i,quota:new MediaQuota})),PAGE_EVENTS.on("page:cleanup",function(){t[a].stop_polling_jobs()})};return e.open=function(n){var i;e.last_options=n,i=n.modal_id?$("#"+n.modal_id).closest("#media_library_popup").modal():$("#media_library_popup").modal(),$(document).trigger("media_library:init",_.extend({per_page:21,modal:!0},n||{})),i.off("hide.bs.modal").on("hide.bs.modal",function(){t.modal&&t.modal.destroy&&t.modal.destroy()}),track_goal("/media")},e.fileSizeString=function(e){for(var t=0,n=[" B"," kB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"];e>1e3;)e/=1e3,t+=1;return Math.max(e,.1).toFixed(1)+n[t]},$(document).on("media_library:init",n),$(document).on("click","#media_library_btn",function(t){var n={};$(this).data("only")&&(n.only=$(this).data("only")),e.open(n),t.preventDefault()}),e}(MEDIA_LIBRARY||{});$(document).on("popup_resource",function(e,t,n,i,a){void 0===a&&(a={}),a.popup_resource=!0;var s=FRAME.in_iframe,o=FRAME.on_same_domain;if(void 0!==n&&(a.preview=""+n=="true"),void 0!==i&&(a.comment=i),!s||o||MS_TEAMS.is_teams_frame()){var r=MS_TEAMS.is_teams_frame()?FRAME.top_examtime_window():window.top;STUDY_AID_ACTIONS.is_edit_mode()||(r.MODAL_STACK.study_aid_modal_stack=[t]),r.$(".modal-backdrop").remove();var l=get_target_url(t,a),c=r.MODAL.create("embed_study_aid",l,["large_modal"]);a.preview&&r.$(document).trigger("preview_loaded",[t,c]),r.LAST_MODAL&&r.$LAST_MODAL.modal("hide"),r.$LAST_MODAL=c}});var get_target_url=function(e,t){return t.attempt_id?Routes.quiz_assessment_path(_.extend({quiz_id:e,id:t.attempt_id,popup_resource:!0,_options:!0})):Routes.embed_popup_public_path(_.extend({id:e,_options:!0},t))};$(document).on("click",".popup_resource",function(e){var t=$(this).data("id");if(!t){var n=$(this).attr("href")||"";t=_.last(n.split("/"))}t&&($(document).trigger("popup_resource",[t,$(this).data("preview"),$(this).data("comment")]),e.preventDefault())}),$(document).on("hidden.bs.modal",".modal",function(){$iframe=$(this).find("iframe.resource, iframe.video_embed"),
$iframe.attr("src","")}),$(document).on("click",".pin_resource",function(e){$(document).trigger("study_aids:move_subject",{study_aids:[$(this).data("id")]}),e.preventDefault()}),$(document).on("study_aids:pin_success",function(e,t){var n=t.study_aids;$("#search_results_table").length>0&&_.each(n,function(e){var t=$(".pin_resource[data-id="+e+"]");if(t.length>0){var n=t.parents(".searchresult").find(".pinned_count"),i=parseInt(n.text(),10);n.text(i+1),t.hide()}})}),$('<style type="text/css"> .onoffswitch-inner:before { content: "'+I18n.t("actionbar.private")+'";} .onoffswitch-inner:after { content: "'+I18n.t("actionbar.public")+'"; } </style> ').appendTo("head"),$(document).on("change","#meta_private, #meta_private_cb_open, #user_config_private_default",function(){var e=$(this).is(":checked");$(this).closest(".study_aid_privacy_toggle").find(".state_public").toggleClass("hidden",e),$(this).closest(".study_aid_privacy_toggle").find(".state_private").toggleClass("hidden",!e)});var TeamsDashboardResourceActionsView=MobileResourceActionsView.extend({template:SMT["study_aids/mobile_resource_actions"],mobile_actions:["edit","play","teams_submit","share_to_teams","share","pin","unpin","move","rename"],share_to_teams_internal:function(e){MS_TEAMS.trigger_share_button(e.currentTarget)},get_model_attributes:function(){var e=this.model.attributes;return _.extend({},e,{teams_data_type:e.teams_share_info["data-type"],teams_data_url:e.teams_share_info["data-url"],teams_data_message:e.teams_share_info["data-message"],teams_data_preview:e.teams_share_info["data-preview"]})},_default_attributes:function(){return _.extend(MobileResourceActionsView.prototype._default_attributes.apply(this),{title_edit_meta:I18n.t("mobile.actions.descriptions.edit_meta"),description_edit_meta:I18n.t("actions.titles.edit_meta")})}}),MobileDashboardViewActionMixin={events:{"click #actions_overlay":"hide_actions"},reveal_actions:function(e){var t=MS_TEAMS.is_teams_frame()?TeamsDashboardResourceActionsView:MobileResourceActionsView;$("#mobile_action_buttons").addClass("hidden"),this.$("#actions_overlay").show(),this.actions_view=new t({model:e,el:null,className:"rel_wrapper",on_dash:!0}),this.$("#resource_actions").html(this.actions_view.render().$el),this.$("#resource_actions").addClass("active"),this.actions_view.on("actions:conceal",MobileDashboardViewActionMixin.hide_actions,this)},hide_actions:function(){this.$("#resource_actions").removeClass("active"),this.$("#actions_overlay").hide(),$("#mobile_action_buttons").removeClass("hidden"),this.actions_view.remove()}},MobileResourcePageView=Backbone.View.extend({mixins:[MobileDashboardViewActionMixin],el:"#wrap",initialize:function(){this.on("actions:reveal",this.reveal_actions,this)}});$(document).on("public_view:init edit_mode:init",function(){var e=document.getElementById("mobile_actions");if(MOBILE.is_mobile()&&e){var t=new MobileResourcePageView;onClickOrTap(e,function(e){e.preventDefault();var n=JSON.parse($("#study_aid_presenter_json").html()),i=new StudyAid(n);document.activeElement.blur(),t.trigger("actions:reveal",i),track_event("resource","view_actions")})}});var MOBILE_HAMBURGER=function(e){return e.init=function(){document.getElementById("mobile_nav");var e=document.getElementById("hamburger_menu");document.querySelectorAll(".hamburger").forEach(function(t){onClickOrTap(t,function(t){t.preventDefault(),e.classList.toggle("open"),e.classList.toggle("closed"),track_event("mobile_nav","toggle_hamburger")})})},e}(MOBILE_HAMBURGER||{});document.addEventListener("DOMContentLoaded",function(){document.querySelector("#hamburger_menu")&&MOBILE_HAMBURGER.init()});var MOBILE_NAVIGATION=function(e){return document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("back_button");e&&e.classList.contains("browser_back")&&onClickOrTap(e,function(e){e.preventDefault(),history.length>1?history.back():window.location=window.location.origin})}),e}(MOBILE_NAVIGATION||{}),MOBILE_PAYMENTS_COMPARE=function(e){const t=function(e){e.querySelector(".details").classList.toggle("revealed")};return e.init=function(){document.querySelectorAll("#plan_comparison_table .plan").forEach(function(e){onClickOrTap(e,function(n){"a"!==n.target.tagName.toLowerCase()&&t(e)})})},e}(MOBILE_PAYMENTS_COMPARE||{});$(document).ready(function(){if(MOBILE.is_mobile()){var e=["#","tag_list_meta_form","_tag"].join(""),t=",",n=new RegExp(t+"$");$(document).on("input",e,function(i){if(n.test(i.target.value)){i.target.value=i.target.value.slice(0,-1);var a=$.Event("keypress");a.which=t.charCodeAt(0),$(e).trigger(a)}}),$(document).on("change",e,function(){var t=$.Event("keypress");t.which=13,$(e).trigger(t)})}}),
// │ Copyright © 2008-2016 Dmitry Baranovskiy (http://raphaeljs.com)                                       │ \\
// │ Copyright © 2008-2016 Sencha Labs (http://sencha.com)                                                 │ \\
function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Raphael=t():e.Raphael=t()}(window,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(t){return e[t]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./dev/raphael.amd.js")}({"./dev/raphael.amd.js":
/*!****************************!*\
  !*** ./dev/raphael.amd.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){var i,a;i=[n(/*! ./raphael.core */"./dev/raphael.core.js"),n(/*! ./raphael.svg */"./dev/raphael.svg.js"),n(/*! ./raphael.vml */"./dev/raphael.vml.js")],(a=function(e){return e}.apply(t,i))===undefined||(e.exports=a)},"./dev/raphael.core.js":
/*!*****************************!*\
  !*** ./dev/raphael.core.js ***!
  \*****************************/
/*! no static exports found */function(e,t,n){var i,a;i=[n(/*! eve */"./node_modules/eve-raphael/eve.js")],(a=function(e){function t(n){if(t.is(n,"function"))return b?n():e.on("raphael.DOMload",n);if(t.is(n,U))return t._engine.create[E](t,n.splice(0,3+t.is(n[0],V))).add(n);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var a=i.pop();return b?a.call(t._engine.create[E](t,i)):e.on("raphael.DOMload",function(){a.call(t._engine.create[E](t,i))})}return t._engine.create[E](t,arguments)}function n(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[T](i)&&(t[i]=n(e[i]));return t}function i(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function a(e,t,n){function a(){var s=Array.prototype.slice.call(arguments,0),o=s.join("\u2400"),r=a.cache=a.cache||{},l=a.count=a.count||[];return r[T](o)?(i(l,o),n?n(r[o]):r[o]):(l.length>=1e3&&delete r[l.shift()],l.push(o),r[o]=e[E](t,s),n?n(r[o]):r[o])}return a}function s(){return this.hex}function o(e,t){for(var n=[],i=0,a=e.length;a-2*!t>i;i+=2){var s=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?a-4==i?s[3]={x:+e[0],y:+e[1]}:a-2==i&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[a-2],y:+e[a-1]}:a-4==i?s[3]=s[2]:i||(s[0]={x:+e[i],y:+e[i+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function r(e,t,n,i,a){return e*(e*(-3*t+9*n-9*i+3*a)+6*t-12*n+6*i)-3*t+3*n}function l(e,t,n,i,a,s,o,l,c){null==c&&(c=1);for(var d=(c=c>1?1:c<0?0:c)/2,u=12,_=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,f=0;f<u;f++){var m=d*_[f]+d,g=r(m,e,n,a,o),v=r(m,t,i,s,l),b=g*g+v*v;p+=h[f]*j.sqrt(b)}return d*p}function c(e,t,n,i,a,s,o,r,c){if(!(c<0||l(e,t,n,i,a,s,o,r)<c)){var d,u=1,_=u/2,h=u-_,p=.01;for(d=l(e,t,n,i,a,s,o,r,h);F(d-c)>p;)d=l(e,t,n,i,a,s,o,r,h+=(d<c?1:-1)*(_/=2));return h}}function d(e,t,n,i,a,s,o,r){if(!(L(e,n)<B(a,o)||B(e,n)>L(a,o)||L(t,i)<B(s,r)||B(t,i)>L(s,r))){var l=(e-n)*(s-r)-(t-i)*(a-o);if(l){var c=((e*i-t*n)*(a-o)-(e-n)*(a*r-s*o))/l,d=((e*i-t*n)*(s-r)-(t-i)*(a*r-s*o))/l,u=+c.toFixed(2),_=+d.toFixed(2);if(!(u<+B(e,n).toFixed(2)||u>+L(e,n).toFixed(2)||u<+B(a,o).toFixed(2)||u>+L(a,o).toFixed(2)||_<+B(t,i).toFixed(2)||_>+L(t,i).toFixed(2)||_<+B(s,r).toFixed(2)||_>+L(s,r).toFixed(2)))return{x:c,y:d}}}}function u(e,n,i){var a=t.bezierBBox(e),s=t.bezierBBox(n);if(!t.isBBoxIntersect(a,s))return i?0:[];for(var o=l.apply(0,e),r=l.apply(0,n),c=L(~~(o/5),1),u=L(~~(r/5),1),_=[],h=[],p={},f=i?0:[],m=0;m<c+1;m++){var g=t.findDotsAtSegment.apply(t,e.concat(m/c));_.push({x:g.x,y:g.y,t:m/c})}for(m=0;m<u+1;m++)g=t.findDotsAtSegment.apply(t,n.concat(m/u)),h.push({x:g.x,y:g.y,t:m/u});for(m=0;m<c;m++)for(var v=0;v<u;v++){var b=_[m],y=_[m+1],w=h[v],x=h[v+1],S=F(y.x-b.x)<.001?"y":"x",T=F(x.x-w.x)<.001?"y":"x",M=d(b.x,b.y,y.x,y.y,w.x,w.y,x.x,x.y);if(M){if(p[M.x.toFixed(4)]==M.y.toFixed(4))continue;p[M.x.toFixed(4)]=M.y.toFixed(4);var C=b.t+F((M[S]-b[S])/(y[S]-b[S]))*(y.t-b.t),k=w.t+F((M[T]-w[T])/(x[T]-w[T]))*(x.t-w.t);C>=0&&C<=1.001&&k>=0&&k<=1.001&&(i?f++:f.push({x:M.x,y:M.y,t1:B(C,1),t2:B(k,1)}))}}return f}function _(e,n,i){e=t._path2curve(e),n=t._path2curve(n);for(var a,s,o,r,l,c,d,_,h,p,f=i?0:[],m=0,g=e.length;m<g;m++){var v=e[m];if("M"==v[0])a=l=v[1],s=c=v[2];else{"C"==v[0]?(a=(h=[a,s].concat(v.slice(1)))[6],s=h[7]):(h=[a,s,a,s,l,c,l,c],a=l,s=c);for(var b=0,y=n.length;b<y;b++){var w=n[b];if("M"==w[0])o=d=w[1],r=_=w[2];else{"C"==w[0]?(o=(p=[o,r].concat(w.slice(1)))[6],r=p[7]):(p=[o,r,o,r,d,_,d,_],o=d,r=_);var x=u(h,p,i);if(i)f+=x;else{for(var S=0,T=x.length;S<T;S++)x[S].segment1=m,x[S].segment2=b,x[S].bez1=h,x[S].bez2=p;f=f.concat(x)}}}}}return f}function h(e,t,n,i,a,s){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+i,this.e=+a,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+P+this.y+P+this.width+" \xd7 "+this.height}function f(e,t,n,i,a,s){function o(e){return((u*e+d)*e+c)*e}function r(e,t){var n=l(e,t);return((p*n+h)*n+_)*n}function l(e,t){var n,i,a,s,r,l;for(a=e,l=0;l<8;l++){if(s=o(a)-e,F(s)<t)return a;if(F(r=(3*u*a+2*d)*a+c)<1e-6)break;a-=s/r}if((a=e)<(n=0))return n;if(a>(i=1))return i;for(;n<i;){if(s=o(a),F(s-e)<t)return a;e>s?n=a:i=a,a=(i-n)/2+n}return a}var c=3*t,d=3*(i-t)-c,u=1-c-d,_=3*n,h=3*(a-n)-_,p=1-_-h;return r(e,1/(200*s))}function m(e,t){var n=[],i={};if(this.ms=t,this.times=1,e){for(var a in e)e[T](a)&&(i[K(a)]=e[a],n.push(K(a)));n.sort(de)}this.anim=i,this.top=n[n.length-1],this.percents=n}function g(n,i,a,s,o,r){a=K(a);var l,c,d,u,_,p,m=n.ms,g={},v={},b={};if(s)for(x=0,S=rt.length;x<S;x++){var y=rt[x];if(y.el.id==i.id&&y.anim==n){y.percent!=a?(rt.splice(x,1),d=1):c=y,i.attr(y.totalOrigin);break}}else s=+v;for(var x=0,S=n.percents.length;x<S;x++){if(n.percents[x]==a||n.percents[x]>s*n.top){a=n.percents[x],_=n.percents[x-1]||0,m=m/n.top*(a-_),u=n.percents[x+1],l=n.anim[a];break}s&&i.attr(n.anim[n.percents[x]])}if(l){if(c)c.initstatus=s,c.start=new Date-c.ms*s;else{for(var M in l)if(l[T](M)&&(ne[T](M)||i.paper.customAttributes[T](M)))switch(g[M]=i.attr(M),null==g[M]&&(g[M]=te[M]),v[M]=l[M],ne[M]){case V:b[M]=(v[M]-g[M])/m;break;case"colour":g[M]=t.getRGB(g[M]);var C=t.getRGB(v[M]);b[M]={r:(C.r-g[M].r)/m,g:(C.g-g[M].g)/m,b:(C.b-g[M].b)/m};break;case"path":var k=ze(g[M],v[M]),E=k[1];for(g[M]=k[0],b[M]=[],x=0,S=g[M].length;x<S;x++){b[M][x]=[0];for(var I=1,D=g[M][x].length;I<D;I++)b[M][x][I]=(E[x][I]-g[M][x][I])/m}break;case"transform":var P=i._,O=Fe(P[M],v[M]);if(O)for(g[M]=O.from,v[M]=O.to,b[M]=[],b[M].real=!0,x=0,S=g[M].length;x<S;x++)for(b[M][x]=[g[M][x][0]],I=1,D=g[M][x].length;I<D;I++)b[M][x][I]=(v[M][x][I]-g[M][x][I])/m;else{var z=i.matrix||new h,N={_:{transform:P.transform},getBBox:function(){return i.getBBox(1)}};g[M]=[z.a,z.b,z.c,z.d,z.e,z.f],Le(N,v[M]),v[M]=N._.transform,b[M]=[(N.matrix.a-z.a)/m,(N.matrix.b-z.b)/m,(N.matrix.c-z.c)/m,(N.matrix.d-z.d)/m,(N.matrix.e-z.e)/m,(N.matrix.f-z.f)/m]}break;case"csv":var j=R(l[M])[$](w),L=R(g[M])[$](w);if("clip-rect"==M)for(g[M]=L,b[M]=[],x=L.length;x--;)b[M][x]=(j[x]-g[M][x])/m;v[M]=j;break;default:for(j=[][A](l[M]),L=[][A](g[M]),b[M]=[],x=i.paper.customAttributes[M].length;x--;)b[M][x]=((j[x]||0)-(L[x]||0))/m}var B=l.easing,F=t.easing_formulas[B];if(!F)if((F=R(B).match(J))&&5==F.length){var q=F;F=function(e){return f(e,+q[1],+q[2],+q[3],+q[4],m)}}else F=ue;if(y={anim:n,percent:a,timestamp:p=l.start||n.start||+new Date,start:p+(n.del||0),status:0,initstatus:s||0,stop:!1,ms:m,easing:F,from:g,diff:b,to:v,el:i,callback:l.callback,prev:_,next:u,repeat:r||n.times,origin:i.attr(),totalOrigin:o},rt.push(y),s&&!c&&!d&&(y.stop=!0,y.start=new Date-m*s,1==rt.length))return ct();d&&(y.start=new Date-y.ms*s),1==rt.length&&lt(ct)}e("raphael.anim.start."+i.id,i,n)}}function v(e){for(var t=0;t<rt.length;t++)rt[t].el.paper==e&&rt.splice(t--,1)}t.is_touch_enabled=function(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e},t.version="2.3.0",t.eve=e;var b,y,w=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},S=/\{(\d+)\}/g,T="hasOwnProperty",M={doc:document,win:window},C={was:Object.prototype[T].call(M.win,"Raphael"),is:M.win.Raphael},k=function(){this.ca=this.customAttributes={}},E="apply",A="concat",I=t.is_touch_enabled(),D="",P=" ",R=String,$="split",O="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[$](P),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},N=R.prototype.toLowerCase,j=Math,L=j.max,B=j.min,F=j.abs,q=j.pow,H=j.PI,V="number",G="string",U="array",W=Object.prototype.toString,Y=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},J=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=j.round,K=parseFloat,Z=parseInt,ee=R.prototype.toUpperCase,te=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,"class":""},ne=t._availableAnimAttrs={blur:V,"clip-rect":"csv",cx:V,cy:V,fill:"colour","fill-opacity":V,"font-size":V,height:V,opacity:V,path:"path",r:V,rx:V,ry:V,stroke:"colour","stroke-opacity":V,"stroke-width":V,transform:"transform",width:V,x:V,y:V},ie=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ae={hs:1,rg:1},se=/,?([achlmqrstvxz]),?/gi,oe=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,re=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ce=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),de=function(e,t){return K(e)-K(t)},ue=function(e){return e},_e=t._rectPath=function(e,t,n,i,a){return a?[["M",e+a,t],["l",n-2*a,0],["a",a,a,0,0,1,a,a],["l",0,i-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-n,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-i],["a",a,a,0,0,1,a,-a],["z"]]:[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]]},he=function(e,t,n,i){return null==i&&(i=n),[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},pe=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return he(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return he(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return _e(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return _e(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return _e(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return _e(t.x,t.y,t.width,t.height)}},fe=t.mapPath=function(e,t){if(!t)return e;var n,i,a,s,o,r,l;for(a=0,o=(e=ze(e)).length;a<o;a++)for(s=1,r=(l=e[a]).length;s<r;s+=2)n=t.x(l[s],l[s+1]),i=t.y(l[s],l[s+1]),l[s]=n,l[s+1]=i;return e};if(t._g=M,t.type=M.win.SVGAngle||M.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var me,ge=M.doc.createElement("div");if(ge.innerHTML='<v:shape adj="1"/>',(me=ge.firstChild).style.behavior="url(#default#VML)",!me||"object"!=typeof me.adj)return t.type=D;ge=null}t.svg=!(t.vml="VML"==t.type),t._Paper=k,t.fn=y=k.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=N.call(t))?!X[T](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||W.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,i,a,s,o){if(null==s){var r=e-i,l=n-a;return r||l?(180+180*j.atan2(-l,-r)/H+360)%360:0}return t.angle(e,n,s,o)-t.angle(i,a,s,o)},t.rad=function(e){return e%360*H/180},t.deg=function(e){return Math.round(180*e/H%360*1e3)/1e3},t.snapTo=function(e,n,i){if(i=t.is(i,"finite")?i:10,t.is(e,U)){for(var a=e.length;a--;)if(F(e[a]-n)<=i)return e[a]}else{var s=n%(e=+e);if(s<i)return n-s;if(s>e-i)return n-s+e}return n};var ve,be;t.createUUID=(ve=/[xy]/g,be=function(e){var t=16*j.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(ve,be).toUpperCase()});t.setWindow=function(n){e("raphael.setWindow",t,M.win,n),M.win=n,M.doc=M.win.document,t._engine.initWin&&t._engine.initWin(M.win)};var ye=function(e){if(t.vml){var n,i=/^\s+|\s+$/g;try{var s=new ActiveXObject("htmlfile");s.write("<body>"),s.close(),n=s.body}catch(l){n=createPopup().document.body}var o=n.createTextRange();ye=a(function(e){try{n.style.color=R(e).replace(i,D);var t=o.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(l){return"none"}})}else{var r=M.doc.createElement("i");r.title="Rapha\xebl Colour Picker",r.style.display="none",M.doc.body.appendChild(r),ye=a(function(e){return r.style.color=e,M.doc.defaultView.getComputedStyle(r,D).getPropertyValue("color")})}return ye(e)},we=function(){return"hsb("+[this.h,this.s,this.b]+")"},xe=function(){return"hsl("+[this.h,this.s,this.l]+")"},Se=function(){return this.hex},Te=function(e,n,i){if(null==n&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,n=e.g,e=e.r),null==n&&t.is(e,G)){var a=t.getRGB(e);e=a.r,n=a.g,i=a.b}return(e>1||n>1||i>1)&&(e/=255,n/=255,i/=255),[e,n,i]},Me=function(e,n,i,a){var s={r:e*=255,g:n*=255,b:i*=255,hex:t.rgb(e,n,i),toString:Se};return t.is(a,"finite")&&(s.opacity=a),s};t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Se,e},t.hsb2rgb=function(e,t,n,i){var a,s,o,r,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,i=e.o,e=e.h),a=s=o=n-(l=n*t),a+=[l,r=l*(1-F((e=(e*=360)%360/60)%2-1)),0,0,r,l][e=~~e],s+=[r,l,l,r,0,0][e],o+=[0,0,r,l,l,r][e],Me(a,s,o,i)},t.hsl2rgb=function(e,t,n,i){var a,s,o,r,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),a=s=o=n-(l=2*t*(n<.5?n:1-n))/2,a+=[l,r=l*(1-F((e=(e*=360)%360/60)%2-1)),0,0,r,l][e=~~e],s+=[r,l,l,r,0,0][e],o+=[0,0,r,l,l,r][e],Me(a,s,o,i)},t.rgb2hsb=function(e,t,n){var i,a;return e=(n=Te(e,t,n))[0],t=n[1],n=n[2],{h:((0==(a=(i=L(e,t,n))-B(e,t,n))?null:i==e?(t-n)/a:i==t?(n-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:a/i,b:i,toString:we}},t.rgb2hsl=function(e,t,n){var i,a,s,o;return e=(n=Te(e,t,n))[0],t=n[1],n=n[2],i=((a=L(e,t,n))+(s=B(e,t,n)))/2,{h:((0==(o=a-s)?null:a==e?(t-n)/o:a==t?(n-e)/o+2:(e-t)/o+4)+360)%6*60/360,s:0==o?0:i<.5?o/(2*i):o/(2-2*i),l:i,toString:xe}},t._path2string=function(){return this.join(",").replace(se,"$1")};t._preload=function(e,t){var n=M.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,M.doc.body.removeChild(this)},n.onerror=function(){M.doc.body.removeChild(this)},M.doc.body.appendChild(n),n.src=e};t.getRGB=a(function(e){if(!e||(e=R(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:s};!ae[T](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=ye(e));var n,i,a,o,r,l,c=e.match(Y);return c?(c[2]&&(a=Z(c[2].substring(5),16),i=Z(c[2].substring(3,5),16),n=Z(c[2].substring(1,3),16)),c[3]&&(a=Z((r=c[3].charAt(3))+r,16),i=Z((r=c[3].charAt(2))+r,16),n=Z((r=c[3].charAt(1))+r,16)),c[4]&&(l=c[4][$](ie),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),a=K(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][$](ie),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),a=K(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),("deg"==l[0].slice(-3)||"\xb0"==l[0].slice(-1))&&(n/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),t.hsb2rgb(n,i,a,o)):c[6]?(l=c[6][$](ie),n=K(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),a=K(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),("deg"==l[0].slice(-3)||"\xb0"==l[0].slice(-1))&&(n/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),t.hsl2rgb(n,i,a,o)):((c={r:n,g:i,b:a,toString:s}).hex="#"+(16777216|a|i<<8|n<<16).toString(16).slice(1),t.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s}},t),t.hsb=a(function(e,n,i){return t.hsb2rgb(e,n,i).hex}),t.hsl=a(function(e,n,i){return t.hsl2rgb(e,n,i).hex}),t.rgb=a(function(e,t,n){function i(e){return e+.5|0}return"#"+(16777216|i(n)|i(t)<<8|i(e)<<16).toString(16).slice(1)}),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=Ce(e);if(n.arr)return Ee(n.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[];return t.is(e,U)&&t.is(e[0],U)&&(a=Ee(e)),a.length||R(e).replace(oe,function(e,t,n){var s=[],o=t.toLowerCase();if(n.replace(le,function(e,t){t&&s.push(+t)}),"m"==o&&s.length>2&&(a.push([t][A](s.splice(0,2))),o="l",t="m"==t?"l":"L"),"r"==o)a.push([t][A](s));else for(;s.length>=i[o]&&(a.push([t][A](s.splice(0,i[o]))),i[o]););}),a.toString=t._path2string,n.arr=Ee(a),a},t.parseTransformString=a(function(e){if(!e)return null;var n=[];return t.is(e,U)&&t.is(e[0],U)&&(n=Ee(e)),n.length||R(e).replace(re,function(e,t,i){var a=[];N.call(t);i.replace(le,function(e,t){t&&a.push(+t)}),n.push([t][A](a))}),n.toString=t._path2string,n},this,function(e){if(!e)return e;for(var t=[],n=0;n<e.length;n++){for(var i=[],a=0;a<e[n].length;a++)i.push(e[n][a]);t.push(i)}return t});var Ce=function(e){var t=Ce.ps=Ce.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[T](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};t.findDotsAtSegment=function(e,t,n,i,a,s,o,r,l){var c=1-l,d=q(c,3),u=q(c,2),_=l*l,h=_*l,p=d*e+3*u*l*n+3*c*l*l*a+h*o,f=d*t+3*u*l*i+3*c*l*l*s+h*r,m=e+2*l*(n-e)+_*(a-2*n+e),g=t+2*l*(i-t)+_*(s-2*i+t),v=n+2*l*(a-n)+_*(o-2*a+n),b=i+2*l*(s-i)+_*(r-2*s+i),y=c*e+l*n,w=c*t+l*i,x=c*a+l*o,S=c*s+l*r,T=90-180*j.atan2(m-v,g-b)/H;return(m>v||g<b)&&(T+=180),{x:p,y:f,m:{x:m,y:g},n:{x:v,y:b},start:{x:y,y:w},end:{x:x,y:S},alpha:T}},t.bezierBBox=function(e,n,i,a,s,o,r,l){t.is(e,"array")||(e=[e,n,i,a,s,o,r,l]);var c=Oe.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var i=t.isPointInsideBBox;return i(n,e.x,e.y)||i(n,e.x2,e.y)||i(n,e.x,e.y2)||i(n,e.x2,e.y2)||i(e,n.x,n.y)||i(e,n.x2,n.y)||i(e,n.x,n.y2)||i(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return _(e,t)},t.pathIntersectionNumber=function(e,t){return _(e,t,1)},t.isPointInsidePath=function(e,n,i){var a=t.pathBBox(e);return t.isPointInsideBBox(a,n,i)&&_(e,[["M",n,i],["H",a.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var ke=t.pathBBox=function(e){var t=Ce(e);if(t.bbox)return n(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,a=0,s=0,o=[],r=[],l=0,c=(e=ze(e)).length;l<c;l++)if("M"==(i=e[l])[0])a=i[1],s=i[2],o.push(a),r.push(s);else{var d=Oe(a,s,i[1],i[2],i[3],i[4],i[5],i[6]);o=o[A](d.min.x,d.max.x),r=r[A](d.min.y,d.max.y),a=i[5],s=i[6]}var u=B[E](0,o),_=B[E](0,r),h=L[E](0,o),p=L[E](0,r),f=h-u,m=p-_,g={x:u,y:_,x2:h,y2:p,width:f,height:m,cx:u+f/2,cy:_+m/2};return t.bbox=n(g),g},Ee=function(e){var i=n(e);return i.toString=t._path2string,i},Ae=t._pathToRelative=function(e){var n=Ce(e);if(n.rel)return Ee(n.rel);t.is(e,U)&&t.is(e&&e[0],U)||(e=t.parsePathString(e));var i=[],a=0,s=0,o=0,r=0,l=0;"M"==e[0][0]&&(o=a=e[0][1],r=s=e[0][2],l++,i.push(["M",a,s]));for(var c=l,d=e.length;c<d;c++){var u=i[c]=[],_=e[c];if(_[0]!=N.call(_[0]))switch(u[0]=N.call(_[0]),u[0]){case"a":u[1]=_[1],u[2]=_[2],u[3]=_[3],u[4]=_[4],u[5]=_[5],u[6]=+(_[6]-a).toFixed(3),u[7]=+(_[7]-s).toFixed(3);break;case"v":u[1]=+(_[1]-s).toFixed(3);break;case"m":o=_[1],r=_[2];default:for(var h=1,p=_.length;h<p;h++)u[h]=+(_[h]-(h%2?a:s)).toFixed(3)}else{u=i[c]=[],"m"==_[0]&&(o=_[1]+a,r=_[2]+s);for(var f=0,m=_.length;f<m;f++)i[c][f]=_[f]}var g=i[c].length;switch(i[c][0]){case"z":a=o,s=r;break;case"h":a+=+i[c][g-1];break;case"v":s+=+i[c][g-1];break;default:a+=+i[c][g-2],s+=+i[c][g-1]}}return i.toString=t._path2string,n.rel=Ee(i),i},Ie=t._pathToAbsolute=function(e){var n=Ce(e);if(n.abs)return Ee(n.abs);if(t.is(e,U)&&t.is(e&&e[0],U)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var i=[],a=0,s=0,r=0,l=0,c=0;"M"==e[0][0]&&(r=a=+e[0][1],l=s=+e[0][2],c++,i[0]=["M",a,s]);for(var d,u,_=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=c,p=e.length;h<p;h++){if(i.push(d=[]),(u=e[h])[0]!=ee.call(u[0]))switch(d[0]=ee.call(u[0]),d[0]){case"A":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]+a),d[7]=+(u[7]+s);break;case"V":d[1]=+u[1]+s;break;case"H":d[1]=+u[1]+a;break;case"R":for(var f=[a,s][A](u.slice(1)),m=2,g=f.length;m<g;m++)f[m]=+f[m]+a,f[++m]=+f[m]+s;i.pop(),i=i[A](o(f,_));break;case"M":r=+u[1]+a,l=+u[2]+s;default:for(m=1,g=u.length;m<g;m++)d[m]=+u[m]+(m%2?a:s)}else if("R"==u[0])f=[a,s][A](u.slice(1)),i.pop(),i=i[A](o(f,_)),d=["R"][A](u.slice(-2));else for(var v=0,b=u.length;v<b;v++)d[v]=u[v];switch(d[0]){case"Z":a=r,s=l;break;case"H":a=d[1];break;case"V":s=d[1];break;case"M":r=d[d.length-2],l=d[d.length-1];default:a=d[d.length-2],s=d[d.length-1]}}return i.toString=t._path2string,n.abs=Ee(i),i},De=function(e,t,n,i){return[e,t,n,i,n,i]},Pe=function(e,t,n,i,a,s){var o=1/3,r=2/3;return[o*e+r*n,o*t+r*i,o*a+r*n,o*s+r*i,a,s]},Re=function(e,t,n,i,s,o,r,l,c,d){var u,_=120*H/180,h=H/180*(+s||0),p=[],f=a(function(e,t,n){return{x:e*j.cos(n)-t*j.sin(n),y:e*j.sin(n)+t*j.cos(n)}});if(d)T=d[0],M=d[1],x=d[2],S=d[3];else{e=(u=f(e,t,-h)).x,t=u.y,l=(u=f(l,c,-h)).x,c=u.y;j.cos(H/180*s),j.sin(H/180*s);var m=(e-l)/2,g=(t-c)/2,v=m*m/(n*n)+g*g/(i*i);v>1&&(n*=v=j.sqrt(v),i*=v);var b=n*n,y=i*i,w=(o==r?-1:1)*j.sqrt(F((b*y-b*g*g-y*m*m)/(b*g*g+y*m*m))),x=w*n*g/i+(e+l)/2,S=w*-i*m/n+(t+c)/2,T=j.asin(((t-S)/i).toFixed(9)),M=j.asin(((c-S)/i).toFixed(9));(T=e<x?H-T:T)<0&&(T=2*H+T),(M=l<x?H-M:M)<0&&(M=2*H+M),r&&T>M&&(T-=2*H),!r&&M>T&&(M-=2*H)}var C=M-T;if(F(C)>_){var k=M,E=l,I=c;M=T+_*(r&&M>T?1:-1),l=x+n*j.cos(M),c=S+i*j.sin(M),p=Re(l,c,n,i,s,0,r,E,I,[M,k,x,S])}C=M-T;var D=j.cos(T),P=j.sin(T),R=j.cos(M),O=j.sin(M),z=j.tan(C/4),N=4/3*n*z,L=4/3*i*z,B=[e,t],q=[e+N*P,t-L*D],V=[l+N*O,c-L*R],G=[l,c];if(q[0]=2*B[0]-q[0],q[1]=2*B[1]-q[1],d)return[q,V,G][A](p);for(var U=[],W=0,Y=(p=[q,V,G][A](p).join()[$](",")).length;W<Y;W++)U[W]=W%2?f(p[W-1],p[W],h).y:f(p[W],p[W+1],h).x;return U},$e=function(e,t,n,i,a,s,o,r,l){var c=1-l;return{x:q(c,3)*e+3*q(c,2)*l*n+3*c*l*l*a+q(l,3)*o,y:q(c,3)*t+3*q(c,2)*l*i+3*c*l*l*s+q(l,3)*r}},Oe=a(function(e,t,n,i,a,s,o,r){var l,c=a-2*n+e-(o-2*a+n),d=2*(n-e)-2*(a-n),u=e-n,_=(-d+j.sqrt(d*d-4*c*u))/2/c,h=(-d-j.sqrt(d*d-4*c*u))/2/c,p=[t,r],f=[e,o];return F(_)>"1e12"&&(_=.5),F(h)>"1e12"&&(h=.5),_>0&&_<1&&(l=$e(e,t,n,i,a,s,o,r,_),f.push(l.x),p.push(l.y)),h>0&&h<1&&(l=$e(e,t,n,i,a,s,o,r,h),f.push(l.x),p.push(l.y)),c=s-2*i+t-(r-2*s+i),u=t-i,_=(-(d=2*(i-t)-2*(s-i))+j.sqrt(d*d-4*c*u))/2/c,h=(-d-j.sqrt(d*d-4*c*u))/2/c,F(_)>"1e12"&&(_=.5),F(h)>"1e12"&&(h=.5),_>0&&_<1&&(l=$e(e,t,n,i,a,s,o,r,_),f.push(l.x),p.push(l.y)),h>0&&h<1&&(l=$e(e,t,n,i,a,s,o,r,h),f.push(l.x),p.push(l.y)),{min:{x:B[E](0,f),y:B[E](0,p)},max:{x:L[E](0,f),y:L[E](0,p)}}}),ze=t._path2curve=a(function(e,t){var n=!t&&Ce(e);if(!t&&n.curve)return Ee(n.curve);for(var i=Ie(e),a=t&&Ie(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(e,t,n){var i,a,s={T:1,Q:1};if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in s)&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][A](Re[E](0,[t.x,t.y][A](e.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*t.x-t.bx,a=2*t.y-t.by):(i=t.x,a=t.y),e=["C",i,a][A](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][A](Pe(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][A](Pe(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][A](De(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][A](De(t.x,t.y,e[1],t.y));break;case"V":e=["C"][A](De(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][A](De(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)d[t]="A",a&&(u[t]="A"),e.splice(t++,0,["C"][A](n.splice(0,6)));e.splice(t,1),f=L(i.length,a&&a.length||0)}},c=function(e,t,n,s,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],f=L(i.length,a&&a.length||0))},d=[],u=[],_="",h="",p=0,f=L(i.length,a&&a.length||0);p<f;p++){i[p]&&(_=i[p][0]),"C"!=_&&(d[p]=_,p&&(h=d[p-1])),i[p]=r(i[p],s,h),"A"!=d[p]&&"C"==_&&(d[p]="C"),l(i,p),a&&(a[p]&&(_=a[p][0]),"C"!=_&&(u[p]=_,p&&(h=u[p-1])),a[p]=r(a[p],o,h),"A"!=u[p]&&"C"==_&&(u[p]="C"),l(a,p)),c(i,a,s,o,p),c(a,i,o,s,p);var m=i[p],g=a&&a[p],v=m.length,b=a&&g.length;s.x=m[v-2],s.y=m[v-1],s.bx=K(m[v-4])||s.x,s.by=K(m[v-3])||s.y,o.bx=a&&(K(g[b-4])||o.x),o.by=a&&(K(g[b-3])||o.y),o.x=a&&g[b-2],o.y=a&&g[b-1]}return a||(n.curve=Ee(i)),a?[i,a]:i},null,Ee),Ne=(t._parseDots=a(function(e){for(var n=[],i=0,a=e.length;i<a;i++){var s={},o=e[i].match(/^([^:]*):?([\d\.]*)/);if(s.color=t.getRGB(o[1]),s.color.error)return null;s.opacity=s.color.opacity,s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),n.push(s)}for(i=1,a=n.length-1;i<a;i++)if(!n[i].offset){for(var r=K(n[i-1].offset||0),l=0,c=i+1;c<a;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=a);for(var d=((l=K(l))-r)/(c-i+1);i<c;i++)r+=d,n[i].offset=r+"%"}return n}),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),je=(t._tofront=function(e,t){t.top!==e&&(Ne(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Ne(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,n){Ne(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,n){Ne(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var n=ke(e),i={_:{transform:D},getBBox:function(){return n}};return Le(i,t),i.matrix}),Le=(t.transformPath=function(e,t){return fe(e,je(e,t))},t._extractTransform=function(e,n){if(null==n)return e._.transform;n=R(n).replace(/\.{3}|\u2026/g,e._.transform||D);var i=t.parseTransformString(n),a=0,s=0,o=0,r=1,l=1,c=e._,d=new h;if(c.transform=i||[],i)for(var u=0,_=i.length;u<_;u++){var p,f,m,g,v,b=i[u],y=b.length,w=R(b[0]).toLowerCase(),x=b[0]!=w,S=x?d.invert():0;"t"==w&&3==y?x?(p=S.x(0,0),f=S.y(0,0),m=S.x(b[1],b[2]),g=S.y(b[1],b[2]),d.translate(m-p,g-f)):d.translate(b[1],b[2]):"r"==w?2==y?(v=v||e.getBBox(1),d.rotate(b[1],v.x+v.width/2,v.y+v.height/2),a+=b[1]):4==y&&(x?(m=S.x(b[2],b[3]),g=S.y(b[2],b[3]),d.rotate(b[1],m,g)):d.rotate(b[1],b[2],b[3]),a+=b[1]):"s"==w?2==y||3==y?(v=v||e.getBBox(1),d.scale(b[1],b[y-1],v.x+v.width/2,v.y+v.height/2),r*=b[1],l*=b[y-1]):5==y&&(x?(m=S.x(b[3],b[4]),g=S.y(b[3],b[4]),d.scale(b[1],b[2],m,g)):d.scale(b[1],b[2],b[3],b[4]),r*=b[1],l*=b[2]):"m"==w&&7==y&&d.add(b[1],b[2],b[3],b[4],b[5],b[6]),c.dirtyT=1,e.matrix=d}e.matrix=d,c.sx=r,c.sy=l,c.deg=a,c.dx=s=d.e,c.dy=o=d.f,1==r&&1==l&&!a&&c.bbox?(c.bbox.x+=+s,c.bbox.y+=+o):c.dirtyT=1}),Be=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Fe=t._equaliseTransform=function(e,n){n=R(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var i,a,s,o,r=L(e.length,n.length),l=[],c=[],d=0;d<r;d++){if(s=e[d]||Be(n[d]),o=n[d]||Be(s),s[0]!=o[0]||"r"==s[0].toLowerCase()&&(s[2]!=o[2]||s[3]!=o[3])||"s"==s[0].toLowerCase()&&(s[3]!=o[3]||s[4]!=o[4]))return;for(l[d]=[],c[d]=[],i=0,a=L(s.length,o.length);i<a;i++)i in s&&(l[d][i]=s[i]),i in o&&(c[d][i]=o[i])}return{from:l,to:c}};t._getContainer=function(e,n,i,a){var s;if(null!=(s=null!=a||t.is(e,"object")?e:M.doc.getElementById(e)))return s.tagName?null==n?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:n,height:i}:{container:1,x:e,y:n,width:i,height:a}},t.pathToRelative=Ae,t._engine={},t.path2curve=ze,t.matrix=function(e,t,n,i,a,s){return new h(e,t,n,i,a,s)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function i(e){var t=j.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,i,a,s){var o,r,l,c,d=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],_=[[e,n,a],[t,i,s],[0,0,1]];for(e&&e instanceof h&&(_=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),o=0;o<3;o++)for(r=0;r<3;r++){for(c=0,l=0;l<3;l++)c+=u[o][l]*_[l][r];d[o][r]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new h(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new h(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,i){null==t&&(t=e),(n||i)&&this.add(1,0,0,1,n,i),this.add(e,0,0,t,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},e.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var a=+j.cos(e).toFixed(9),s=+j.sin(e).toFixed(9);this.add(a,s,-s,a,n,i),this.add(1,0,0,1,-n,-i)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[R.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var a=[[this.a,this.c],[this.b,this.d]];e.scalex=j.sqrt(n(a[0])),i(a[0]),e.shear=a[0][0]*a[1][0]+a[0][1]*a[1][1],a[1]=[a[1][0]-a[0][0]*e.shear,a[1][1]-a[0][1]*e.shear],e.scaley=j.sqrt(n(a[1])),i(a[1]),e.shear/=e.scaley;var s=-a[0][1],o=a[1][1];return o<0?(e.rotate=t.deg(j.acos(o)),s<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(j.asin(s)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),
e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[$]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:D)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:D)+(t.rotate?"r"+[t.rotate,0,0]:D)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(h.prototype);for(var qe=function(){this.returnValue=!1},He=function(){return this.originalEvent.preventDefault()},Ve=function(){this.cancelBubble=!0},Ge=function(){return this.originalEvent.stopPropagation()},Ue=function(e){var t=M.doc.documentElement.scrollTop||M.doc.body.scrollTop,n=M.doc.documentElement.scrollLeft||M.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},We=M.doc.addEventListener?function(e,t,n,i){var a=function(e){var t=Ue(e);return n.call(i,e,t.x,t.y)};if(e.addEventListener(t,a,!1),I&&z[t]){var s=function(t){for(var a=Ue(t),s=t,o=0,r=t.targetTouches&&t.targetTouches.length;o<r;o++)if(t.targetTouches[o].target==e){(t=t.targetTouches[o]).originalEvent=s,t.preventDefault=He,t.stopPropagation=Ge;break}return n.call(i,t,a.x,a.y)};e.addEventListener(z[t],s,{passive:!0})}return function(){return e.removeEventListener(t,a,!1),I&&z[t]&&e.removeEventListener(z[t],s,!1),!0}}:M.doc.attachEvent?function(e,t,n,i){var a=function(e){e=e||M.win.event;var t=M.doc.documentElement.scrollTop||M.doc.body.scrollTop,a=M.doc.documentElement.scrollLeft||M.doc.body.scrollLeft,s=e.clientX+a,o=e.clientY+t;return e.preventDefault=e.preventDefault||qe,e.stopPropagation=e.stopPropagation||Ve,n.call(i,e,s,o)};return e.attachEvent("on"+t,a),function(){return e.detachEvent("on"+t,a),!0}}:void 0,Ye=[],Xe=function(t){for(var n,i=t.clientX,a=t.clientY,s=M.doc.documentElement.scrollTop||M.doc.body.scrollTop,o=M.doc.documentElement.scrollLeft||M.doc.body.scrollLeft,r=Ye.length;r--;){if(n=Ye[r],I&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==n.el._drag.id){i=l.clientX,a=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var d,u=n.el.node,_=u.nextSibling,h=u.parentNode,p=u.style.display;M.win.opera&&h.removeChild(u),u.style.display="none",d=n.el.paper.getElementByPoint(i,a),u.style.display=p,M.win.opera&&(_?h.insertBefore(u,_):h.appendChild(u)),d&&e("raphael.drag.over."+n.el.id,n.el,d),i+=o,a+=s,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,a-n.el._drag.y,i,a,t)}},Je=function(n){t.unmousemove(Xe).unmouseup(Je);for(var i,a=Ye.length;a--;)(i=Ye[a]).el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n);Ye=[]},Qe=t.el={},Ke=O.length;Ke--;)!function(e){t[e]=Qe[e]=function(n,i){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:We(this.shape||this.node||M.doc,e,n,i||this)})),this},t["un"+e]=Qe["un"+e]=function(n){for(var i=this.events||[],a=i.length;a--;)i[a].name!=e||!t.is(n,"undefined")&&i[a].f!=n||(i[a].unbind(),i.splice(a,1),!i.length&&delete this.events);return this}}(O[Ke]);Qe.data=function(n,i){var a=ce[this.id]=ce[this.id]||{};if(0==arguments.length)return a;if(1==arguments.length){if(t.is(n,"object")){for(var s in n)n[T](s)&&this.data(s,n[s]);return this}return e("raphael.data.get."+this.id,this,a[n],n),a[n]}return a[n]=i,e("raphael.data.set."+this.id,this,i,n),this},Qe.removeData=function(e){return null==e?delete ce[this.id]:ce[this.id]&&delete ce[this.id][e],this},Qe.getData=function(){return n(ce[this.id]||{})},Qe.hover=function(e,t,n,i){return this.mouseover(e,n).mouseout(t,i||n)},Qe.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var Ze=[];Qe.drag=function(n,i,a,s,o,r){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,d=l.clientY,u=M.doc.documentElement.scrollTop||M.doc.body.scrollTop,_=M.doc.documentElement.scrollLeft||M.doc.body.scrollLeft;if(this._drag.id=l.identifier,I&&l.touches)for(var h,p=l.touches.length;p--;)if(h=l.touches[p],this._drag.id=h.identifier,h.identifier==this._drag.id){c=h.clientX,d=h.clientY;break}this._drag.x=c+_,this._drag.y=d+u,!Ye.length&&t.mousemove(Xe).mouseup(Je),Ye.push({el:this,move_scope:s,start_scope:o,end_scope:r}),i&&e.on("raphael.drag.start."+this.id,i),n&&e.on("raphael.drag.move."+this.id,n),a&&e.on("raphael.drag.end."+this.id,a),e("raphael.drag.start."+this.id,o||s||this,this._drag.x,this._drag.y,l)}return this._drag={},Ze.push({el:this,start:l}),this.mousedown(l),this},Qe.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Qe.undrag=function(){for(var n=Ze.length;n--;)Ze[n].el==this&&(this.unmousedown(Ze[n].start),Ze.splice(n,1),e.unbind("raphael.drag.*."+this.id));!Ze.length&&t.unmousemove(Xe).unmouseup(Je),Ye=[]},y.circle=function(e,n,i){var a=t._engine.circle(this,e||0,n||0,i||0);return this.__set__&&this.__set__.push(a),a},y.rect=function(e,n,i,a,s){var o=t._engine.rect(this,e||0,n||0,i||0,a||0,s||0);return this.__set__&&this.__set__.push(o),o},y.ellipse=function(e,n,i,a){var s=t._engine.ellipse(this,e||0,n||0,i||0,a||0);return this.__set__&&this.__set__.push(s),s},y.path=function(e){e&&!t.is(e,G)&&!t.is(e[0],U)&&(e+=D);var n=t._engine.path(t.format[E](t,arguments),this);return this.__set__&&this.__set__.push(n),n},y.image=function(e,n,i,a,s){var o=t._engine.image(this,e||"about:blank",n||0,i||0,a||0,s||0);return this.__set__&&this.__set__.push(o),o},y.text=function(e,n,i){var a=t._engine.text(this,e||0,n||0,R(i));return this.__set__&&this.__set__.push(a),a},y.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new pt(e);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},y.setStart=function(e){this.__set__=e||this.set()},y.setFinish=function(){var e=this.__set__;return delete this.__set__,e},y.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},y.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},y.setViewBox=function(e,n,i,a,s){return t._engine.setViewBox.call(this,e,n,i,a,s)},y.top=y.bottom=null,y.raphael=t;var et=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,i=n.body,a=n.documentElement,s=a.clientTop||i.clientTop||0,o=a.clientLeft||i.clientLeft||0;return{y:t.top+(M.win.pageYOffset||a.scrollTop||i.scrollTop)-s,x:t.left+(M.win.pageXOffset||a.scrollLeft||i.scrollLeft)-o}};y.getElementByPoint=function(e,t){var n=this,i=n.canvas,a=M.doc.elementFromPoint(e,t);if(M.win.opera&&"svg"==a.tagName){var s=et(i),o=i.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var r=i.getIntersectionList(o,null);r.length&&(a=r[r.length-1])}if(!a)return null;for(;a.parentNode&&a!=i.parentNode&&!a.raphael;)a=a.parentNode;return a==n.canvas.parentNode&&(a=i),a=a&&a.raphael?n.getById(a.raphaelid):null},y.getElementsByBBox=function(e){var n=this.set();return this.forEach(function(i){t.isBBoxIntersect(i.getBBox(),e)&&n.push(i)}),n},y.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},y.forEach=function(e,t){for(var n=this.bottom;n;){if(!1===e.call(t,n))return this;n=n.next}return this},y.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(i){i.isPointInside(e,t)&&n.push(i)}),n},Qe.isPointInside=function(e,n){var i=this.realPath=pe[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(i=t.transformPath(i,this.attr("transform"))),t.isPointInsidePath(i,e,n)},Qe.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=pe[this.type](this),t.bboxwt=ke(this.realPath),t.bboxwt.toString=p,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=pe[this.type](this)),t.bbox=ke(fe(this.realPath,this.matrix)),t.bbox.toString=p,t.dirty=t.dirtyT=0),t.bbox)},Qe.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Qe.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,i=this.paper,a=i.set(),s=this.realPath||pe[this.type](this);s=this.matrix?fe(s,this.matrix):s;for(var o=1;o<n+1;o++)a.push(i.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*o).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return a.insertBefore(this).translate(t.offsetx,t.offsety)};var tt=function(e,n,i,a,s,o,r,d,u){return null==u?l(e,n,i,a,s,o,r,d):t.findDotsAtSegment(e,n,i,a,s,o,r,d,c(e,n,i,a,s,o,r,d,u))},nt=function(e,n){return function(i,a,s){for(var o,r,l,c,d,u="",_={},h=0,p=0,f=(i=ze(i)).length;p<f;p++){if("M"==(l=i[p])[0])o=+l[1],r=+l[2];else{if(h+(c=tt(o,r,l[1],l[2],l[3],l[4],l[5],l[6]))>a){if(n&&!_.start){if(u+=["C"+(d=tt(o,r,l[1],l[2],l[3],l[4],l[5],l[6],a-h)).start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],s)return u;_.start=u,u=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),h+=c,o=+l[5],r=+l[6];continue}if(!e&&!n)return{x:(d=tt(o,r,l[1],l[2],l[3],l[4],l[5],l[6],a-h)).x,y:d.y,alpha:d.alpha}}h+=c,o=+l[5],r=+l[6]}u+=l.shift()+l}return _.end=u,(d=e?h:n?_:t.findDotsAtSegment(o,r,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},it=nt(1),at=nt(),st=nt(0,1);t.getTotalLength=it,t.getPointAtLength=at,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return st(e,t).end;var i=st(e,n,1);return t?st(i,t).end:i},Qe.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():it(e)},Qe.getPointAtLength=function(e){var t=this.getPath();if(t)return at(t,e)},Qe.getPath=function(){var e,n=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(e=n(this)),e},Qe.getSubpath=function(e,n){var i=this.getPath();if(i)return t.getSubpath(i,e,n)};var ot=t.easing_formulas={linear:function(e){return e},"<":function(e){return q(e,1.7)},">":function(e){return q(e,.48)},"<>":function(e){var t=.48-e/1.04,n=j.sqrt(.1734+t*t),i=n-t,a=-n-t,s=q(F(i),1/3)*(i<0?-1:1)+q(F(a),1/3)*(a<0?-1:1)+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:q(2,-10*e)*j.sin(2*H*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};ot.easeIn=ot["ease-in"]=ot["<"],ot.easeOut=ot["ease-out"]=ot[">"],ot.easeInOut=ot["ease-in-out"]=ot["<>"],ot["back-in"]=ot.backIn,ot["back-out"]=ot.backOut;var rt=[],lt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},ct=function(){for(var n=+new Date,i=0;i<rt.length;i++){var a=rt[i];if(!a.el.removed&&!a.paused){var s,o,r=n-a.start,l=a.ms,c=a.easing,d=a.from,u=a.diff,_=a.to,h=(a.t,a.el),p={},f={};if(a.initstatus?(r=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*l,a.status=a.initstatus,delete a.initstatus,a.stop&&rt.splice(i--,1)):a.status=(a.prev+(a.percent-a.prev)*(r/l))/a.anim.top,!(r<0))if(r<l){var m=c(r/l);for(var v in d)if(d[T](v)){switch(ne[v]){case V:s=+d[v]+m*l*u[v];break;case"colour":s="rgb("+[dt(Q(d[v].r+m*l*u[v].r)),dt(Q(d[v].g+m*l*u[v].g)),dt(Q(d[v].b+m*l*u[v].b))].join(",")+")";break;case"path":s=[];for(var b=0,y=d[v].length;b<y;b++){s[b]=[d[v][b][0]];for(var w=1,x=d[v][b].length;w<x;w++)s[b][w]=+d[v][b][w]+m*l*u[v][b][w];s[b]=s[b].join(P)}s=s.join(P);break;case"transform":if(u[v].real)for(s=[],b=0,y=d[v].length;b<y;b++)for(s[b]=[d[v][b][0]],w=1,x=d[v][b].length;w<x;w++)s[b][w]=d[v][b][w]+m*l*u[v][b][w];else{var S=function(e){return+d[v][e]+m*l*u[v][e]};s=[["m",S(0),S(1),S(2),S(3),S(4),S(5)]]}break;case"csv":if("clip-rect"==v)for(s=[],b=4;b--;)s[b]=+d[v][b]+m*l*u[v][b];break;default:var M=[][A](d[v]);for(s=[],b=h.paper.customAttributes[v].length;b--;)s[b]=+M[b]+m*l*u[v][b]}p[v]=s}h.attr(p),function(t,n,i){setTimeout(function(){e("raphael.anim.frame."+t,n,i)})}(h.id,h,a.anim)}else{if(function(n,i,a){setTimeout(function(){e("raphael.anim.frame."+i.id,i,a),e("raphael.anim.finish."+i.id,i,a),t.is(n,"function")&&n.call(i)})}(a.callback,h,a.anim),h.attr(_),rt.splice(i--,1),a.repeat>1&&!a.next){for(o in _)_[T](o)&&(f[o]=a.totalOrigin[o]);a.el.attr(f),g(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&g(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}rt.length&&lt(ct)},dt=function(e){return e>255?255:e<0?0:e};Qe.animateWith=function(e,n,i,a,s,o){var r=this;if(r.removed)return o&&o.call(r),r;var l=i instanceof m?i:t.animation(i,a,s,o);g(l,r,l.percents[0],null,r.attr());for(var c=0,d=rt.length;c<d;c++)if(rt[c].anim==n&&rt[c].el==e){rt[d-1].start=rt[c].start;break}return r},Qe.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(e){var t=new m(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},m.prototype.repeat=function(e){var t=new m(this.anim,this.ms);return t.del=this.del,t.times=j.floor(L(e,0))||1,t},t.animation=function(e,n,i,a){if(e instanceof m)return e;!t.is(i,"function")&&i||(a=a||i||null,i=null),e=Object(e),n=+n||0;var s,o,r={};for(o in e)e[T](o)&&K(o)!=o&&K(o)+"%"!=o&&(s=!0,r[o]=e[o]);if(s)return i&&(r.easing=i),a&&(r.callback=a),new m({100:r},n);if(a){var l=0;for(var c in e){var d=Z(c);e[T](c)&&d>l&&(l=d)}!e[l+="%"].callback&&(e[l].callback=a)}return new m(e,n)},Qe.animate=function(e,n,i,a){var s=this;if(s.removed)return a&&a.call(s),s;var o=e instanceof m?e:t.animation(e,n,i,a);return g(o,s,o.percents[0],null,s.attr()),s},Qe.setTime=function(e,t){return e&&null!=t&&this.status(e,B(t,e.ms)/e.ms),this},Qe.status=function(e,t){var n,i,a=[],s=0;if(null!=t)return g(e,this,-1,B(t,1)),this;for(n=rt.length;s<n;s++)if((i=rt[s]).el.id==this.id&&(!e||i.anim==e)){if(e)return i.status;a.push({anim:i.anim,status:i.status})}return e?0:a},Qe.pause=function(t){for(var n=0;n<rt.length;n++)rt[n].el.id!=this.id||t&&rt[n].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,rt[n].anim)&&(rt[n].paused=!0);return this},Qe.resume=function(t){for(var n=0;n<rt.length;n++)if(rt[n].el.id==this.id&&(!t||rt[n].anim==t)){var i=rt[n];!1!==e("raphael.anim.resume."+this.id,this,i.anim)&&(delete i.paused,this.status(i.anim,i.status))}return this},Qe.stop=function(t){for(var n=0;n<rt.length;n++)rt[n].el.id!=this.id||t&&rt[n].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,rt[n].anim)&&rt.splice(n--,1);return this},e.on("raphael.remove",v),e.on("raphael.clear",v),Qe.toString=function(){return"Rapha\xebl\u2019s object"};var ut,_t,ht,pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,n=e.length;t<n;t++)!e[t]||e[t].constructor!=Qe.constructor&&e[t].constructor!=pt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},ft=pt.prototype;for(var mt in ft.push=function(){for(var e,t,n=0,i=arguments.length;n<i;n++)!(e=arguments[n])||e.constructor!=Qe.constructor&&e.constructor!=pt||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},ft.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ft.forEach=function(e,t){for(var n=0,i=this.items.length;n<i;n++)if(!1===e.call(t,this.items[n],n))return this;return this},Qe)Qe[T](mt)&&(ft[mt]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][E](n,t)})}}(mt));return ft.attr=function(e,n){if(e&&t.is(e,U)&&t.is(e[0],"object"))for(var i=0,a=e.length;i<a;i++)this.items[i].attr(e[i]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(e,n);return this},ft.clear=function(){for(;this.length;)this.pop()},ft.splice=function(e,t){e=e<0?L(this.length+e,0):e,t=L(0,B(this.length-e,t));var n,i=[],a=[],s=[];for(n=2;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<t;n++)a.push(this[e+n]);for(;n<this.length-e;n++)i.push(this[e+n]);var o=s.length;for(n=0;n<o+i.length;n++)this.items[e+n]=this[e+n]=n<o?s[n]:i[n-o];for(n=this.items.length=this.length-=t-o;this[n];)delete this[n++];return new pt(a)},ft.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},ft.animate=function(e,n,i,a){(t.is(i,"function")||!i)&&(a=i||null);var s,o,r=this.items.length,l=r,c=this;if(!r)return this;a&&(o=function(){!--r&&a.call(c)}),i=t.is(i,G)?i:o;var d=t.animation(e,n,i,o);for(s=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(s,d,d),this.items[l]&&!this.items[l].removed||r--;return this},ft.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ft.getBBox=function(){for(var e=[],t=[],n=[],i=[],a=this.items.length;a--;)if(!this.items[a].removed){var s=this.items[a].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),i.push(s.y+s.height)}return{x:e=B[E](0,e),y:t=B[E](0,t),x2:n=L[E](0,n),y2:i=L[E](0,i),width:n-e,height:i-t}},ft.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},ft.toString=function(){return"Rapha\xebl\u2018s set"},ft.glow=function(e){var t=this.paper.set();return this.forEach(function(n){var i=n.glow(e);null!=i&&i.forEach(function(e){t.push(e)})}),t},ft.isPointInside=function(e,t){var n=!1;return this.forEach(function(i){if(i.isPointInside(e,t))return n=!0,!1}),n},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var i in e.face)e.face[T](i)&&(t.face[i]=e.face[i]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg)for(var a in t.face["units-per-em"]=Z(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[T](a)){var s=e.glyphs[a];if(t.glyphs[a]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},s.k)for(var o in s.k)s[T](o)&&(t.glyphs[a].k[o]=s.k[o])}return e},y.getFont=function(e,n,i,a){if(a=a||"normal",i=i||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,t.fonts){var s,o=t.fonts[e];if(!o){var r=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,D)+"(\\s|$)","i");for(var l in t.fonts)if(t.fonts[T](l)&&r.test(l)){o=t.fonts[l];break}}if(o)for(var c=0,d=o.length;c<d&&((s=o[c]).face["font-weight"]!=n||s.face["font-style"]!=i&&s.face["font-style"]||s.face["font-stretch"]!=a);c++);return s}},y.print=function(e,n,i,a,s,o,r,l){o=o||"middle",r=L(B(r||0,1),-1),l=L(B(l||1,3),1);var c,d=R(i)[$](D),u=0,_=0,h=D;if(t.is(a,"string")&&(a=this.getFont(a)),a){c=(s||16)/a.face["units-per-em"];for(var p=a.face.bbox[$](w),f=+p[0],m=p[3]-p[1],g=0,v=+p[1]+("baseline"==o?m+ +a.face.descent:m/2),b=0,y=d.length;b<y;b++){if("\n"==d[b])u=0,S=0,_=0,g+=m*l;else{var x=_&&a.glyphs[d[b-1]]||{},S=a.glyphs[d[b]];u+=_?(x.w||a.w)+(x.k&&x.k[d[b]]||0)+a.w*r:0,_=1}S&&S.d&&(h+=t.transformPath(S.d,["t",u*c,g*c,"s",c,c,f,v,"t",(e-f)/c,(n-v)/c]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},y.add=function(e){if(t.is(e,"array"))for(var n,i=this.set(),a=0,s=e.length;a<s;a++)n=e[a]||{},x[T](n.type)&&i.push(this[n.type]().attr(n));return i},t.format=function(e,n){var i=t.is(n,U)?[0][A](n):arguments;return e&&t.is(e,G)&&i.length-1&&(e=e.replace(S,function(e,t){return null==i[++t]?D:i[t]})),e||D},t.fullfill=(ut=/\{([^\}]+)\}/g,_t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,ht=function(e,t,n){var i=n;return t.replace(_t,function(e,t,n,a,s){t=t||a,i&&(t in i&&(i=i[t]),"function"==typeof i&&s&&(i=i()))}),i=(null==i||i==n?e:i)+""},function(e,t){return String(e).replace(ut,function(e,n){return ht(e,n,t)})}),t.ninja=function(){if(C.was)M.win.Raphael=C.is;else{window.Raphael=undefined;try{delete window.Raphael}catch(e){}}return t},t.st=ft,e.on("raphael.DOMload",function(){b=!0}),function(e,n,i){function a(){/in/.test(e.readyState)?setTimeout(a,9):t.eve("raphael.DOMload")}null==e.readyState&&e.addEventListener&&(e.addEventListener(n,i=function(){e.removeEventListener(n,i,!1),e.readyState="complete"},!1),e.readyState="loading"),a()}(document,"DOMContentLoaded"),t}.apply(t,i))===undefined||(e.exports=a)},"./dev/raphael.svg.js":
/*!****************************!*\
  !*** ./dev/raphael.svg.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){var i,a;i=[n(/*! ./raphael.core */"./dev/raphael.core.js")],(a=function(e){if(!e||e.svg){var t="hasOwnProperty",n=String,i=parseFloat,a=parseInt,s=Math,o=s.max,r=s.abs,l=s.pow,c=/[, ]+/,d=e.eve,u="",_=" ",h="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},f={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var m=function(i,a){if(a)for(var s in"string"==typeof i&&(i=m(i)),a)a[t](s)&&("xlink:"==s.substring(0,6)?i.setAttributeNS(h,s.substring(6),n(a[s])):i.setAttribute(s,n(a[s])));else(i=e._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},g=function(t,a){var c="linear",d=t.id+a,_=.5,h=.5,p=t.node,f=t.paper,g=p.style,v=e._g.doc.getElementById(d);if(!v){if(a=(a=n(a).replace(e._radial_gradient,function(e,t,n){if(c="radial",t&&n){_=i(t);var a=2*((h=i(n))>.5)-1;l(_-.5,2)+l(h-.5,2)>.25&&(h=s.sqrt(.25-l(_-.5,2))*a+.5)&&.5!=h&&(h=h.toFixed(5)-1e-5*a)}return u})).split(/\s*\-\s*/),"linear"==c){var y=a.shift();if(y=-i(y),isNaN(y))return null;var w=[0,0,s.cos(e.rad(y)),s.sin(e.rad(y))],x=1/(o(r(w[2]),r(w[3]))||1);w[2]*=x,w[3]*=x,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(a);if(!S)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&d!=t.gradient.id&&(f.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){v=m(c+"Gradient",{id:d}),t.gradient=v,m(v,"radial"==c?{fx:_,fy:h}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),f.defs.appendChild(v);for(var T=0,M=S.length;T<M;T++)v.appendChild(m("stop",{offset:S[T].offset?S[T].offset:T?"100%":"0%","stop-color":S[T].color||"#fff","stop-opacity":isFinite(S[T].opacity)?S[T].opacity:1}))}}return m(p,{fill:b(d),opacity:1,"fill-opacity":1}),g.fill=u,g.opacity=1,g.fillOpacity=1,1},v=function(){var e=document.documentMode;return e&&(9===e||10===e)},b=function(e){if(v())return"url('#"+e+"')";var t=document.location;return"url('"+(t.protocol+"//"+t.host+t.pathname+t.search)+"#"+e+"')"},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},w=function(i,a,s){if("path"==i.type){for(var o,r,l,c,d,_=n(a).toLowerCase().split("-"),h=i.paper,g=s?"end":"start",v=i.node,b=i.attrs,y=b["stroke-width"],w=_.length,x="classic",S=3,T=3,M=5;w--;)switch(_[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":x=_[w];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":S=5;break;case"short":S=2}if("open"==x?(S+=2,T+=2,M+=2,l=1,c=s?4:1,d={fill:"none",stroke:b.stroke}):(c=l=S/2,d={fill:b.stroke,stroke:"none"}),i._.arrows?s?(i._.arrows.endPath&&f[i._.arrows.endPath]--,i._.arrows.endMarker&&f[i._.arrows.endMarker]--):(i._.arrows.startPath&&f[i._.arrows.startPath]--,i._.arrows.startMarker&&f[i._.arrows.startMarker]--):i._.arrows={},"none"!=x){var C="raphael-marker-"+x,k="raphael-marker-"+g+x+S+T+"-obj"+i.id;e._g.doc.getElementById(C)?f[C]++:(h.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[x],id:C})),f[C]=1);var E,A=e._g.doc.getElementById(k);A?(f[k]++,E=A.getElementsByTagName("use")[0]):(A=m(m("marker"),{id:k,markerHeight:T,markerWidth:S,orient:"auto",refX:c,refY:T/2}),E=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+S/2+" "+T/2+") ":u)+"scale("+S/M+","+T/M+")","stroke-width":(1/((S/M+T/M)/2)).toFixed(4)}),A.appendChild(E),h.defs.appendChild(A),f[k]=1),m(E,d);var I=l*("diamond"!=x&&"oval"!=x);s?(o=i._.arrows.startdx*y||0,r=e.getTotalLength(b.path)-I*y):(o=I*y,r=e.getTotalLength(b.path)-(i._.arrows.enddx*y||0)),(d={})["marker-"+g]="url(#"+k+")",(r||o)&&(d.d=e.getSubpath(b.path,o,r)),m(v,d),i._.arrows[g+"Path"]=C,i._.arrows[g+"Marker"]=k,i._.arrows[g+"dx"]=I,i._.arrows[g+"Type"]=x,i._.arrows[g+"String"]=a}else s?(o=i._.arrows.startdx*y||0,r=e.getTotalLength(b.path)-o):(o=0,r=e.getTotalLength(b.path)-(i._.arrows.enddx*y||0)),i._.arrows[g+"Path"]&&m(v,{d:e.getSubpath(b.path,o,r)}),delete i._.arrows[g+"Path"],delete i._.arrows[g+"Marker"],delete i._.arrows[g+"dx"],delete i._.arrows[g+"Type"],delete i._.arrows[g+"String"];for(d in f)if(f[t](d)&&!f[d]){var D=e._g.doc.getElementById(d);D&&D.parentNode.removeChild(D)}}},x={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},S=function(e,t,i){if(t=x[n(t).toLowerCase()]){for(var a=e.attrs["stroke-width"]||"1",s={round:a,square:a,butt:0}[e.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,o=[],r=t.length;r--;)o[r]=t[r]*a+(r%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}else m(e.node,{"stroke-dasharray":"none"})},T=function(i,s){var l=i.node,d=i.attrs,_=l.style.visibility;for(var p in l.style.visibility="hidden",s)if(s[t](p)){if(!e._availableAttrs[t](p))continue;var f=s[p];switch(d[p]=f,p){case"blur":i.blur(f);break;case"title":var v=l.getElementsByTagName("title");if(v.length&&(v=v[0]))v.firstChild.nodeValue=f;else{v=m("title");var b=e._g.doc.createTextNode(f);v.appendChild(b),l.appendChild(v)}break;case"href":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var T=m("a");x.insertBefore(T,l),T.appendChild(l),x=T}"target"==p?x.setAttributeNS(h,"show","blank"==f?"new":f):x.setAttributeNS(h,p,f);break;case"cursor":l.style.cursor=f;break;case"transform":i.transform(f);break;case"arrow-start":w(i,f);break;case"arrow-end":w(i,f,1);break;case"clip-rect":var M=n(f).split(c);if(4==M.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var k=m("clipPath"),E=m("rect");k.id=e.createUUID(),m(E,{x:M[0],y:M[1],width:M[2],height:M[3]}),k.appendChild(E),i.paper.defs.appendChild(k),m(l,{"clip-path":"url(#"+k.id+")"}),i.clip=E}if(!f){var A=l.getAttribute("clip-path");if(A){var I=e._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,u));I&&I.parentNode.removeChild(I),m(l,{"clip-path":u}),delete i.clip}}break;case"path":"path"==i.type&&(m(l,{d:f?d.path=e._pathToAbsolute(f):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&w(i,i._.arrows.startString),"endString"in i._.arrows&&w(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,f),i._.dirty=1,!d.fx)break;p="x",f=d.x;case"x":d.fx&&(f=-d.x-(d.width||0));case"rx":if("rx"==p&&"rect"==i.type)break;case"cx":l.setAttribute(p,f),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(p,f),i._.dirty=1,!d.fy)break;p="y",f=d.y;case"y":d.fy&&(f=-d.y-(d.height||0));case"ry":if("ry"==p&&"rect"==i.type)break;case"cy":l.setAttribute(p,f),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?m(l,{rx:f,ry:f}):l.setAttribute(p,f),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(h,"href",f);break;case"stroke-width":1==i._.sx&&1==i._.sy||(f/=o(r(i._.sx),r(i._.sy))||1),l.setAttribute(p,f),d["stroke-dasharray"]&&S(i,d["stroke-dasharray"],s),i._.arrows&&("startString"in i._.arrows&&w(i,i._.arrows.startString),"endString"in i._.arrows&&w(i,i._.arrows.endString,1));break;case"stroke-dasharray":S(i,f,s);break;case"fill":var D=n(f).match(e._ISURL);if(D){k=m("pattern");var P=m("image");k.id=e.createUUID(),m(k,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(P,{x:0,y:0,"xlink:href":D[1]}),k.appendChild(P),function(t){e._preload(D[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(P,{width:e,height:n})})}(k),i.paper.defs.appendChild(k),m(l,{fill:"url(#"+k.id+")"}),i.pattern=k,i.pattern&&y(i);break}var R=e.getRGB(f);if(R.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(f).charAt())&&g(i,f)){if("opacity"in d||"fill-opacity"in d){var $=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if($){var O=$.getElementsByTagName("stop");m(O[O.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=f,d.fill="none";break}}else delete s.gradient,delete d.gradient,!e.is(d.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(l,{opacity:d.opacity}),!e.is(d["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(l,{"fill-opacity":d["fill-opacity"]});R[t]("opacity")&&m(l,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=e.getRGB(f),l.setAttribute(p,R.hex),"stroke"==p&&R[t]("opacity")&&m(l,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity}),"stroke"==p&&i._.arrows&&("startString"in i._.arrows&&w(i,i._.arrows.startString),"endString"in i._.arrows&&w(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(f).charAt())&&g(i,f);break;case"opacity":d.gradient&&!d[t]("stroke-opacity")&&m(l,{"stroke-opacity":f>1?f/100:f});case"fill-opacity":if(d.gradient){($=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)))&&(O=$.getElementsByTagName("stop"),m(O[O.length-1],{"stop-opacity":f}));break}default:"font-size"==p&&(f=a(f,10)+"px");var z=p.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[z]=f,i._.dirty=1,l.setAttribute(p,f)}}C(i,s),l.style.visibility=_},M=1.2,C=function(i,s){if("text"==i.type&&(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y"))){var o=i.attrs,r=i.node,l=r.firstChild?a(e._g.doc.defaultView.getComputedStyle(r.firstChild,u).getPropertyValue("font-size"),10):10;if(s[t]("text")){for(o.text=s.text;r.firstChild;)r.removeChild(r.firstChild);for(var c,d=n(s.text).split("\n"),_=[],h=0,p=d.length;h<p;h++)c=m("tspan"),h&&m(c,{dy:l*M,x:o.x}),c.appendChild(e._g.doc.createTextNode(d[h])),r.appendChild(c),_[h]=c}else for(h=0,p=(_=r.getElementsByTagName("tspan")).length;h<p;h++)h?m(_[h],{dy:l*M,x:o.x}):m(_[0],{dy:0});m(r,{x:o.x,y:o.y}),i._.dirty=1;var f=i._getBBox(),g=o.y-(f.y+f.height/2);g&&e.is(g,"finite")&&m(_[0],{dy:g})}},k=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},E=function(t,n){function i(){return("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5)}this[0]=this.node=t,t.raphael=!0,this.id=i(),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},A=e.el;E.prototype=A,A.constructor=E,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var i=new E(n,t);return i.type="path",T(i,{fill:"none",stroke:"#000",path:e}),i},A.rotate=function(e,t,a){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=i(e[1]),a=i(e[2])),e=i(e[0]),null==a&&(t=a),null==t||null==a){var s=this.getBBox(1);t=s.x+s.width/2,a=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,a]])),this},A.scale=function(e,t,a,s){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=i(e[1]),a=i(e[2]),s=i(e[3])),e=i(e[0]),null==t&&(t=e),null==s&&(a=s),null==a||null==s)var o=this.getBBox(1);return a=null==a?o.x+o.width/2:a,s=null==s?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,a,s]])),this},A.translate=function(e,t){return this.removed?this:((e=n(e).split(c)).length-1&&(t=i(e[1])),e=i(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},A.transform=function(n){var i=this._;if(null==n)return i.transform;if(e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var a=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":a})}return this},A.hide=function(){return this.removed||(this.node.style.display="none"),this},A.show=function(){return this.removed||(this.node.style.display=""),this},A.remove=function(){var t=k(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var i in n.__set__&&n.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),e._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[i]="function"==typeof this[i]?e._removedFactory(i):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,n=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(n=!0,t.display="");var i={};try{i=this.node.getBBox()}catch(a){i={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{i=i||{},n&&(t.display="none")}return e&&this.hide(),i},A.attr=function(n,i){if(this.removed)return this;if(null==n){var a={};for(var s in this.attrs)this.attrs[t](s)&&(a[s]=this.attrs[s]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==i&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var o=n.split(c),r={},l=0,u=o.length;l<u;l++)(n=o[l])in this.attrs?r[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?r[n]=this.paper.customAttributes[n].def:r[n]=e._availableAttrs[n];return u-1?r:r[o[0]]}if(null==i&&e.is(n,"array")){for(r={},l=0,u=n.length;l<u;l++)r[n[l]]=this.attr(n[l]);return r}if(null!=i){var _={};_[n]=i}else null!=n&&e.is(n,"object")&&(_=n);for(var h in _)d("raphael.attr."+h+"."+this.id,this,_[h]);for(h in this.paper.customAttributes)if(this.paper.customAttributes[t](h)&&_[t](h)&&e.is(this.paper.customAttributes[h],"function")){var p=this.paper.customAttributes[h].apply(this,[].concat(_[h]));for(var f in this.attrs[h]=_[h],p)p[t](f)&&(_[f]=p[f])}return T(this,_),this},A.toFront=function(){if(this.removed)return this;var t=k(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&e._tofront(this,n),this},A.toBack=function(){if(this.removed)return this;var t=k(this.node),n=t.parentNode;n.insertBefore(t,n.firstChild),e._toback(this,this.paper);this.paper;return this},A.insertAfter=function(t){if(this.removed||!t)return this;var n=k(this.node),i=k(t.node||t[t.length-1].node);return i.nextSibling?i.parentNode.insertBefore(n,i.nextSibling):i.parentNode.appendChild(n),e._insertafter(this,t,this.paper),this},A.insertBefore=function(t){if(this.removed||!t)return this;var n=k(this.node),i=k(t.node||t[0].node);return i.parentNode.insertBefore(n,i),e._insertbefore(this,t,this.paper),this},A.blur=function(t){var n=this;if(0!=+t){var i=m("filter"),a=m("feGaussianBlur");n.attrs.blur=t,i.id=e.createUUID(),m(a,{stdDeviation:+t||1.5}),i.appendChild(a),n.paper.defs.appendChild(i),n._blur=i,m(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},e._engine.circle=function(e,t,n,i){var a=m("circle");e.canvas&&e.canvas.appendChild(a);var s=new E(a,e);return s.attrs={cx:t,cy:n,r:i,fill:"none",stroke:"#000"},s.type="circle",m(a,s.attrs),s},e._engine.rect=function(e,t,n,i,a,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var r=new E(o,e);return r.attrs={x:t,y:n,width:i,height:a,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},r.type="rect",m(o,r.attrs),r},e._engine.ellipse=function(e,t,n,i,a){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new E(s,e);return o.attrs={cx:t,cy:n,rx:i,ry:a,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,i,a,s){var o=m("image");m(o,{x:n,y:i,width:a,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(h,"href",t),e.canvas&&e.canvas.appendChild(o);var r=new E(o,e);return r.attrs={x:n,y:i,width:a,height:s,src:t},r.type="image",r},e._engine.text=function(t,n,i,a){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new E(s,t);return o.attrs={x:n,y:i,"text-anchor":"middle",text:a,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},o.type="text",T(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var i,a=t.x,s=t.y,o=t.width,r=t.height,l=m("svg"),c="overflow:hidden;";return a=a||0,s=s||0,m(l,{height:r=r||342,version:1.1,width:o=o||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(l.style.cssText=c+"position:absolute;left:"+a+"px;top:"+s+"px",e._g.doc.body.appendChild(l),i=1):(l.style.cssText=c+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),(n=new e._Paper).width=o,n.height=r,n.canvas=l,n.clear(),n._left=n._top=0,i&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,i,a){d("raphael.setViewBox",this,this._viewBox,[e,t,n,i,a]);var s,r,l=this.getSize(),c=o(n/l.width,i/l.height),u=this.top,h=a?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(c=1),delete this._vbSize,s="0 0 "+this.width+_+this.height):(this._vbSize=c,s=e+_+t+_+n+_+i),m(this.canvas,{viewBox:s,preserveAspectRatio:h});c&&u;)r="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":r}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,i,!!a],this},e.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(s){e=t.createSVGMatrix()}var i=-e.e%1,a=-e.f%1;(i||a)&&(i&&(this._left=(this._left+i)%1,n.left=this._left+"px"),a&&(this._top=(this._top+a)%1,n.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,this.desc=m("desc"),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){for(var t in d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var I=e.st;for(var D in A)A[t](D)&&!I[t](D)&&(I[D]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(D))}}.apply(t,i))===undefined||(e.exports=a)},"./dev/raphael.vml.js":
/*!****************************!*\
  !*** ./dev/raphael.vml.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){var i,a;i=[n(/*! ./raphael.core */"./dev/raphael.core.js")],(a=function(e){if(!e||e.vml){var t="hasOwnProperty",n=String,i=parseFloat,a=Math,s=a.round,o=a.max,r=a.min,l=a.abs,c="fill",d=/[, ]+/,u=e.eve,_=" progid:DXImageTransform.Microsoft",h=" ",p="",f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",y=21600,w={path:1,rect:1,image:1},x={circle:1,ellipse:1},S=function(t){var i=/[ahqstv]/gi,a=e._pathToAbsolute;if(n(t).match(i)&&(a=e._path2curve),i=/[clmz]/g,a==e._pathToAbsolute&&!n(t).match(i)){var o=n(t).replace(m,function(e,t,n){var i=[],a="m"==t.toLowerCase(),o=f[t];return n.replace(v,function(e){a&&2==i.length&&(o+=i+f["m"==t?"l":"L"],i=[]),i.push(s(e*y))}),o+i});return o}var r,l,c=a(t);o=[];for(var d=0,u=c.length;d<u;d++){r=c[d],"z"==(l=c[d][0].toLowerCase())&&(l="x");for(var _=1,g=r.length;_<g;_++)l+=s(r[_]*y)+(_!=g-1?",":p);o.push(l)}return o.join(h)},T=function(t,n,i){var a=e.matrix();return a.rotate(-t,.5,.5),{dx:a.x(n,i),dy:a.y(n,i)}},M=function(e,t,n,i,a,s){var o=e._,r=e.matrix,d=o.fillpos,u=e.node,_=u.style,p=1,f="",m=y/t,g=y/n;if(_.visibility="hidden",t&&n){if(u.coordsize=l(m)+h+l(g),_.rotation=s*(t*n<0?-1:1),s){var v=T(s,i,a);i=v.dx,a=v.dy}if(t<0&&(f+="x"),n<0&&(f+=" y")&&(p=-1),_.flip=f,u.coordorigin=i*-m+h+a*-g,d||o.fillsize){var b=u.getElementsByTagName(c);b=b&&b[0],u.removeChild(b),d&&(v=T(s,r.x(d[0],d[1]),r.y(d[0],d[1])),b.position=v.dx*p+h+v.dy*p),o.fillsize&&(b.size=o.fillsize[0]*l(t)+h+o.fillsize[1]*l(n)),u.appendChild(b)}_.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var C,k=function(e,t,i){for(var a=n(t).toLowerCase().split("-"),s=i?"end":"start",o=a.length,r="classic",l="medium",c="medium";o--;)switch(a[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=a[o];break;case"wide":case"narrow":c=a[o];break;case"long":case"short":l=a[o]}var d=e.node.getElementsByTagName("stroke")[0];d[s+"arrow"]=r,d[s+"arrowlength"]=l,d[s+"arrowwidth"]=c},E=function(a,l){a.attrs=a.attrs||{};var u=a.node,_=a.attrs,f=u.style,m=w[a.type]&&(l.x!=_.x||l.y!=_.y||l.width!=_.width||l.height!=_.height||l.cx!=_.cx||l.cy!=_.cy||l.rx!=_.rx||l.ry!=_.ry||l.r!=_.r),g=x[a.type]&&(_.cx!=l.cx||_.cy!=l.cy||_.r!=l.r||_.rx!=l.rx||_.ry!=l.ry),v=a;for(var b in l)l[t](b)&&(_[b]=l[b]);if(m&&(_.path=e._getPath[a.type](a),a._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(f.cursor=l.cursor),"blur"in l&&a.blur(l.blur),(l.path&&"path"==a.type||m)&&(u.path=S(~n(_.path).toLowerCase().indexOf("r")?e._pathToAbsolute(_.path):_.path),a._.dirty=1,"image"==a.type&&(a._.fillpos=[_.x,_.y],a._.fillsize=[_.width,_.height],M(a,1,1,0,0,0))),"transform"in l&&a.transform(l.transform),g){var T=+_.cx,E=+_.cy,I=+_.rx||+_.r||0,D=+_.ry||+_.r||0;u.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((T-I)*y),s((E-D)*y),s((T+I)*y),s((E+D)*y),s(T*y)),a._.dirty=1}if("clip-rect"in l){var P=n(l["clip-rect"]).split(d);if(4==P.length){P[2]=+P[2]+ +P[0],P[3]=+P[3]+ +P[1];var R=u.clipRect||e._g.doc.createElement("div"),$=R.style;$.clip=e.format("rect({1}px {2}px {3}px {0}px)",P),u.clipRect||($.position="absolute",$.top=0,$.left=0,$.width=a.paper.width+"px",$.height=a.paper.height+"px",u.parentNode.insertBefore(R,u),R.appendChild(u),u.clipRect=R)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(a.textpath){var O=a.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&k(v,l["arrow-start"]),"arrow-end"in l&&k(v,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var z=u.getElementsByTagName(c);if(!(z=z&&z[0])&&(z=C(c)),"image"==a.type&&l.src&&(z.src=l.src),l.fill&&(z.on=!0),null!=z.on&&"none"!=l.fill&&null!==l.fill||(z.on=!1),z.on&&l.fill){var N=n(l.fill).match(e._ISURL);if(N){z.parentNode==u&&u.removeChild(z),z.rotate=!0,z.src=N[1],z.type="tile";var j=a.getBBox(1);z.position=j.x+h+j.y,a._.fillpos=[j.x,j.y],e._preload(N[1],function(){a._.fillsize=[this.offsetWidth,this.offsetHeight]})}else z.color=e.getRGB(l.fill).hex,z.src=p,z.type="solid",e.getRGB(l.fill).error&&(v.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&A(v,l.fill,z)&&(_.fill="none",_.gradient=l.fill,z.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var L=((+_["fill-opacity"]+1||2)-1)*((+_.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);L=r(o(L,0),1),z.opacity=L,z.src&&(z.color="none")}u.appendChild(z);var B=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],F=!1;!B&&(F=B=C("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(B.on=!0),("none"==l.stroke||null===l.stroke||null==B.on||0==l.stroke||0==l["stroke-width"])&&(B.on=!1);var q=e.getRGB(l.stroke);B.on&&l.stroke&&(B.color=q.hex),L=((+_["stroke-opacity"]+1||2)-1)*((+_.opacity+1||2)-1)*((+q.o+1||2)-1);var H=.75*(i(l["stroke-width"])||1);if(L=r(o(L,0),1),null==l["stroke-width"]&&(H=_["stroke-width"]),l["stroke-width"]&&(B.weight=H),H&&H<1&&(L*=H)&&(B.weight=1),B.opacity=L,l["stroke-linejoin"]&&(B.joinstyle=l["stroke-linejoin"]||"miter"),B.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(B.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var V={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};B.dashstyle=V[t](l["stroke-dasharray"])?V[l["stroke-dasharray"]]:p}F&&u.appendChild(B)}if("text"==v.type){v.paper.canvas.style.display=p;var G=v.paper.span,U=100,W=_.font&&_.font.match(/\d+(?:\.\d*)?(?=px)/);f=G.style,_.font&&(f.font=_.font),_["font-family"]&&(f.fontFamily=_["font-family"]),_["font-weight"]&&(f.fontWeight=_["font-weight"]),_["font-style"]&&(f.fontStyle=_["font-style"]),W=i(_["font-size"]||W&&W[0])||10,f.fontSize=W*U+"px",v.textpath.string&&(G.innerHTML=n(v.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=G.getBoundingClientRect();v.W=_.w=(Y.right-Y.left)/U,v.H=_.h=(Y.bottom-Y.top)/U,v.X=_.x,v.Y=_.y+v.H/2,("x"in l||"y"in l)&&(v.path.v=e.format("m{0},{1}l{2},{1}",s(_.x*y),s(_.y*y),s(_.x*y)+1));for(var X=["x","y","text","font","font-family","font-weight","font-style","font-size"],J=0,Q=X.length;J<Q;J++)if(X[J]in l){v._.dirty=1;break}switch(_["text-anchor"]){case"start":v.textpath.style["v-text-align"]="left",v.bbx=v.W/2;break;case"end":v.textpath.style["v-text-align"]="right",v.bbx=-v.W/2;break;default:v.textpath.style["v-text-align"]="center",v.bbx=0}v.textpath.style["v-text-kern"]=!0}},A=function(t,s,o){t.attrs=t.attrs||{};t.attrs;var r=Math.pow,l="linear",c=".5 .5";if(t.attrs.gradient=s,s=(s=n(s).replace(e._radial_gradient,function(e,t,n){return l="radial",t&&n&&(t=i(t),n=i(n),r(t-.5,2)+r(n-.5,2)>.25&&(n=a.sqrt(.25-r(t-.5,2))*(2*(n>.5)-1)+.5),c=t+h+n),p})).split(/\s*\-\s*/),"linear"==l){var d=s.shift();if(d=-i(d),isNaN(d))return null}var u=e._parseDots(s);if(!u)return null;if(t=t.shape||t.node,u.length){t.removeChild(o),o.on=!0,o.method="none",o.color=u[0].color,o.color2=u[u.length-1].color;for(var _=[],f=0,m=u.length;f<m;f++)u[f].offset&&_.push(u[f].offset+h+u[f].color);o.colors=_.length?_.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-d)%360),t.appendChild(o)}return 1},I=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},D=e.el;I.prototype=D,D.constructor=I,D.transform=function(t){if(null==t)return this._.transform;var i,a=this.paper._viewBoxShift,s=a?"s"+[a.scale,a.scale]+"-1-1t"+[a.dx,a.dy]:p;a&&(i=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||p)),e._extractTransform(this,s+t);var o,r=this.matrix.clone(),l=this.skew,c=this.node,d=~n(this.attrs.fill).indexOf("-"),u=!n(this.attrs.fill).indexOf("url(");if(r.translate(1,1),u||d||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=r.split(),d&&o.noRotation||!o.isSimple){c.style.filter=r.toFilter();var _=this.getBBox(),f=this.getBBox(1),m=_.x-f.x,g=_.y-f.y;c.coordorigin=m*-y+h+g*-y,M(this,1,1,m,g,0)}else c.style.filter=p,M(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else c.style.filter=p,l.matrix=n(r),l.offset=r.offset();return null!==i&&(this._.transform=i,e._extractTransform(this,i)),this},D.rotate=function(e,t,a){if(this.removed)return this;if(null!=e){if((e=n(e).split(d)).length-1&&(t=i(e[1]),a=i(e[2])),e=i(e[0]),null==a&&(t=a),null==t||null==a){var s=this.getBBox(1);t=s.x+s.width/2,a=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,a]])),this}},D.translate=function(e,t){return this.removed?this:((e=n(e).split(d)).length-1&&(t=i(e[1])),e=i(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},D.scale=function(e,t,a,s){if(this.removed)return this;if((e=n(e).split(d)).length-1&&(t=i(e[1]),a=i(e[2]),s=i(e[3]),isNaN(a)&&(a=null),isNaN(s)&&(s=null)),e=i(e[0]),null==t&&(t=e),null==s&&(a=s),null==a||null==s)var o=this.getBBox(1);return a=null==a?o.x+o.width/2:a,s=null==s?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,a,s]])),this._.dirtyT=1,this},D.hide=function(){return!this.removed&&(this.node.style.display="none"),this},D.show=function(){return!this.removed&&(this.node.style.display=p),this},D.auxGetBBox=e.el.getBBox,D.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},n=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=n,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=n,t.width=e.width*n,t.height=e.height*n,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},D._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},D.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},D.attr=function(n,i){if(this.removed)return this;if(null==n){var a={};for(var s in this.attrs)this.attrs[t](s)&&(a[s]=this.attrs[s]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==i&&e.is(n,"string")){if(n==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=n.split(d),r={},l=0,_=o.length;l<_;l++)(n=o[l])in this.attrs?r[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?r[n]=this.paper.customAttributes[n].def:r[n]=e._availableAttrs[n];return _-1?r:r[o[0]]}if(this.attrs&&null==i&&e.is(n,"array")){for(r={},l=0,_=n.length;l<_;l++)r[n[l]]=this.attr(n[l]);return r}var h;for(var p in null!=i&&((h={})[n]=i),null==i&&e.is(n,"object")&&(h=n),h)u("raphael.attr."+p+"."+this.id,this,h[p]);if(h){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var m in this.attrs[p]=h[p],f)f[t](m)&&(h[m]=f[m])}h.text&&"text"==this.type&&(this.textpath.string=h.text),E(this,h)}return this},D.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},D.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this)},D.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},D.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},D.blur=function(t){var n=this.node.runtimeStyle,i=n.filter;return i=i.replace(g,p),0!=+t?(this.attrs.blur=t,n.filter=i+h+_+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var n=C("shape");n.style.cssText=b,n.coordsize=y+h+y,n.coordorigin=t.coordorigin;var i=new I(n,t),a={fill:"none",stroke:"#000"};e&&(a.path=e),i.type="path",i.path=[],i.Path=p,E(i,a),t.canvas&&t.canvas.appendChild(n);var s=C("skew");return s.on=!0,n.appendChild(s),i.skew=s,i.transform(p),i},e._engine.rect=function(t,n,i,a,s,o){var r=e._rectPath(n,i,a,s,o),l=t.path(r),c=l.attrs;return l.X=c.x=n,l.Y=c.y=i,l.W=c.width=a,l.H=c.height=s,c.r=o,c.path=r,l.type="rect",l},e._engine.ellipse=function(e,t,n,i,a){var s=e.path();s.attrs;return s.X=t-i,s.Y=n-a,s.W=2*i,s.H=2*a,s.type="ellipse",E(s,{cx:t,cy:n,rx:i,ry:a}),s},e._engine.circle=function(e,t,n,i){var a=e.path();a.attrs;return a.X=t-i,a.Y=n-i,a.W=a.H=2*i,a.type="circle",E(a,{cx:t,cy:n,r:i}),a},e._engine.image=function(t,n,i,a,s,o){var r=e._rectPath(i,a,s,o),l=t.path(r).attr({stroke:"none"}),d=l.attrs,u=l.node,_=u.getElementsByTagName(c)[0];return d.src=n,l.X=d.x=i,l.Y=d.y=a,l.W=d.width=s,l.H=d.height=o,d.path=r,l.type="image",_.parentNode==u&&u.removeChild(_),_.rotate=!0,_.src=n,_.type="tile",l._.fillpos=[i,a],l._.fillsize=[s,o],u.appendChild(_),M(l,1,1,0,0,0),l},e._engine.text=function(t,i,a,o){var r=C("shape"),l=C("path"),c=C("textpath");i=i||0,a=a||0,o=o||"",l.v=e.format("m{0},{1}l{2},{1}",s(i*y),s(a*y),s(i*y)+1),l.textpathok=!0,c.string=n(o),c.on=!0,r.style.cssText=b,r.coordsize=y+h+y,r.coordorigin="0 0";var d=new I(r,t),u={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:o};d.shape=r,d.path=l,d.textpath=c,d.type="text",d.attrs.text=n(o),d.attrs.x=i,d.attrs.y=a,d.attrs.w=1,d.attrs.h=1,E(d,u),r.appendChild(c),r.appendChild(l),t.canvas.appendChild(r);var _=C("skew");return _.on=!0,r.appendChild(_),d.skew=_,d.transform(p),d},e._engine.setSize=function(t,n){var i=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),i.width=t,i.height=n,i.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,i,a,s){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,i,a,s]);var o,r,l=this.getSize(),c=l.width,d=l.height;return s&&(i*(o=d/a)<c&&(t-=(c-i*o)/2/o),a*(r=c/i)<d&&(n-=(d-a*r)/2/r)),this._viewBox=[t,n,i,a,!!s],this._viewBoxShift={dx:-t,dy:-n,scale:l},this.forEach(function(e){e.transform("...")}),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),C=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){C=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,i=t.height,a=t.width,s=t.x,o=t.y;if(!n)throw new Error("VML container not found.");var r=new e._Paper,l=r.canvas=e._g.doc.createElement("div"),c=l.style;return s=s||0,o=o||0,a=a||512,i=i||342,r.width=a,r.height=i,a==+a&&(a+="px"),i==+i&&(i+="px"),r.coordsize=1e3*y+h+1e3*y,r.coordorigin="0 0",r.span=e._g.doc.createElement("span"),r.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(r.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",a,i),1==n?(e._g.doc.body.appendChild(l),c.left=s+"px",c.top=o+"px",c.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),r.renderfix=function(){},r},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var P=e.st;for(var R in D)D[t](R)&&!P[t](R)&&(P[R]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(R))}}.apply(t,i))===undefined||(e.exports=a)},"./node_modules/eve-raphael/eve.js":
/*!*****************************************!*\
  !*** ./node_modules/eve-raphael/eve.js ***!
  \*****************************************/
/*! no static exports found */function(e,t){var n,i,a,s,o,r,l,c,d,u,_,h,p,f,m,g,v;// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
o="0.5.0",r="hasOwnProperty",l=/[\.\/]/,c=/\s*,\s*/,d="*",u=function(e,t){return e-t},_={n:{}},h=function(){for(var e=0,t=this.length;e<t;e++)if("undefined"!=typeof this[e])return this[e]},p=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},f=Object.prototype.toString,m=String,g=Array.isArray||function(e){return e instanceof Array||"[object Array]"==f.call(e)},(v=function(e,t){var n,i=s,o=Array.prototype.slice.call(arguments,2),r=v.listeners(e),l=0,c=[],d={},_=[],f=a;_.firstDefined=h,_.lastDefined=p,a=e,s=0;for(var m=0,g=r.length;m<g;m++)"zIndex"in r[m]&&(c.push(r[m].zIndex),r[m].zIndex<0&&(d[r[m].zIndex]=r[m]));for(c.sort(u);c[l]<0;)if(n=d[c[l++]],_.push(n.apply(t,o)),s)return s=i,_;for(m=0;m<g;m++)if("zIndex"in(n=r[m]))if(n.zIndex==c[l]){if(_.push(n.apply(t,o)),s)break;do{if((n=d[c[++l]])&&_.push(n.apply(t,o)),s)break}while(n)}else d[n.zIndex]=n;else if(_.push(n.apply(t,o)),s)break;return s=i,a=f,_})._events=_,v.listeners=function(e){var t,n,i,a,s,o,r,c,u=g(e)?e:e.split(l),h=_,p=[h],f=[];for(a=0,s=u.length;a<s;a++){for(c=[],o=0,r=p.length;o<r;o++)for(n=[(h=p[o].n)[u[a]],h[d]],i=2;i--;)(t=n[i])&&(c.push(t),f=f.concat(t.f||[]));p=c}return f},v.separator=function(e){e?(e="["+(e=m(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",l=new RegExp(e)):l=/[\.\/]/},v.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=g(e)?g(e[0])?e:[e]:m(e).split(c),i=0,a=n.length;i<a;i++)!function(e){for(var n,i=g(e)?e:m(e).split(l),a=_,s=0,o=i.length;s<o;s++)a=(a=a.n).hasOwnProperty(i[s])&&a[i[s]]||(a[i[s]]={n:{}});for(a.f=a.f||[],s=0,o=a.f.length;s<o;s++)if(a.f[s]==t){n=!0;break}!n&&a.f.push(t)}(n[i]);return function(e){+e==+e&&(t.zIndex=+e)}},v.f=function(e){var t=[].slice.call(arguments,1);return function(){v.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},v.stop=function(){s=1},v.nt=function(e){var t=g(a)?a.join("."):a;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},v.nts=function(){return g(a)?a:a.split(l)},v.off=v.unbind=function(e,t){if(e){var n=g(e)?g(e[0])?e:[e]:m(e).split(c);if(n.length>1)for(var i=0,a=n.length;i<a;i++)v.off(n[i],t);else{n=g(e)?e:m(e).split(l);var s,o,u,h,p,f=[_];for(i=0,a=n.length;i<a;i++)for(h=0;h<f.length;h+=u.length-2){if(u=[h,1],s=f[h].n,n[i]!=d)s[n[i]]&&u.push(s[n[i]]);else for(o in s)s[r](o)&&u.push(s[o]);f.splice.apply(f,u)}for(i=0,a=f.length;i<a;i++)for(s=f[i];s.n;){if(t){if(s.f){for(h=0,p=s.f.length;h<p;h++)if(s.f[h]==t){s.f.splice(h,1);break}!s.f.length&&delete s.f}for(o in s.n)if(s.n[r](o)&&s.n[o].f){var b=s.n[o].f;for(h=0,p=b.length;h<p;h++)if(b[h]==t){b.splice(h,1);break}!b.length&&delete s.n[o].f}}else for(o in delete s.f,s.n)s.n[r](o)&&s.n[o].f&&delete s.n[o].f;s=s.n}}}else v._events=_={n:{}}},v.once=function(e,t){var n=function(){return v.off(e,n),t.apply(this,arguments)};return v.on(e,n)},v.version=o,v.toString=function(){return"You are running Eve "+o},e.exports?e.exports=v:(n=[],(i=function(){return v}.apply(t,n))===undefined||(e.exports=i))}})});var SVG_HELPER=function(e){return e.create_svg_element=function(e){return $.parseHTML("<svg>"+e+"</svg>")[0].firstChild},e}(SVG_HELPER||{}),SVG_HELPER=function(e){var t={remove:"M5.897,7.687L4.086,5.764c-1.007-1.074-1.342-1.41-1.342-2.036c0-1.118,0.85-1.812,1.678-1.812c0.805,0,1.208,0.201,1.722,0.85l1.857,2.304l1.856-2.304c0.515-0.648,0.917-0.85,1.723-0.85c0.827,0,1.678,0.693,1.678,1.812c0,0.626-0.336,0.962-1.343,2.036l-1.812,1.923l2.975,3.154c0.291,0.336,0.693,0.761,0.693,1.499c0,1.073-0.827,1.745-1.789,1.745c-0.738,0-1.141-0.426-1.544-0.896l-2.438-2.841l-2.438,2.841c-0.403,0.47-0.806,0.896-1.544,0.896c-0.962,0-1.789-0.672-1.789-1.745c0-0.738,0.402-1.163,0.693-1.499L5.897,7.687z",attachment:"M11.66,6.406l-5.241,5.243l0.043-0.039c-0.067,0.052-1.124,1.254-2.547,0.151C2.643,10.777,3.581,9.769,3.71,9.628l0.164-0.247l6.119-6.363l0,0c0.096-0.079,2.167-2.242,4.077-0.331c1.846,1.845,0.192,3.629-0.001,3.827c0.001,0-6.917,6.918-6.917,6.918l0.026-0.027c-0.11,0.095-2.765,2.32-5.061,0.026c-2.286-2.289-0.074-4.843,0.022-4.948L2.119,8.503l5.067-5.812L6.421,2.149L1.386,7.77L1.377,7.78l0.009-0.01c-1.038,1.159-2.39,4.005,0,6.395c2.385,2.384,5.275,1.058,6.471,0.025l0.014-0.013l0.014-0.013l6.921-6.92c0.914-0.915,2.093-3.199,0-5.292c-2.072-2.071-4.205-0.529-5.265,0.367l0,0l0,0L3.199,8.661c-0.947,0.823-1.908,2.449-0.393,3.922c1.601,1.558,3.469,0.5,4.302-0.163l0.022-0.018l0.021-0.021l5.241-5.243L11.66,6.406z",add:"M6,0v6h-6v4h6v6h4v-6h6V6h-6V0H6z",node_attachment:"M11.3,24.7l0-14.3c0-0.4-0.3-0.8-0.8-0.8c-0.4,0-0.8,0.3-0.8,0.8l0,14.4l0,6.2c0,2.9-1.4,4.3-4.3,4.3c-2.6-0.1-3.9-1.5-3.9-4.4l0-26.6c0-2,2-2.7,3-2.7c0.7,0,1.4,0.2,1.9,0.7c0.5,0.5,0.8,1.2,0.8,2l0,19.9c0,2.1-0.9,2.1-1.5,2.1c-0.6,0-1.6,0-1.6-1.8l0-12.5c0,0,0-0.8,0-0.8c0-0.4-0.3-0.7-0.8-0.7c-0.4,0-0.7,0.3-0.8,0.7c0,0,0,13.3,0,13.3c0,2.8,1.9,3.3,3.1,3.3c2.5,0,3.1-2.1,3.1-3.6l0-19.9c0-1.2-0.5-2.3-1.3-3.1C6.7,0.4,5.6,0,4.5,0C2.7,0,0,1.3,0,4.2l0,26.6c0,3.6,2,5.8,5.4,5.9c3.8-0.1,5.9-2.2,5.9-5.9L11.3,24.7z",resizer:"M8.88,9.907l4.431,4.43H9.37l-0.001,1.575H16v-6.63h-1.574v3.939l-4.432-4.43L8.88,9.907z M0.089,6.63h1.574V2.69l4.43,4.43l1.115-1.115l-4.43-4.43h3.941l0-1.575H0.088L0.089,6.63z",annotation_with_content:"M17.1352539,0H5.1689453L0,5.0859375v17.1879883c0,0.9443359,0.7675781,1.7109375,1.7143555,1.7109375h15.4208984c0.9433594,0,1.7128906-0.7666016,1.7128906-1.7109375V1.7128906C18.8481445,0.7680664,18.0786133,0,17.1352539,0zM5.9970703,1.7128906V5.140625c0,0.8276367-0.8037109,0.8276367-0.8037109,0.8276367H1.581543C0.3217773,5.9970703,1.2587891,5.2988281,1.2587891,5.2988281l4.1489258-4.1469727C6.15625,0.4018555,5.9970703,1.7128906,5.9970703,1.7128906z M2.9907227,8.7695313h12.40625c0.609375,0,1.1074219,0.496582,1.1074219,1.1088867c0,0.6137695-0.4980469,0.8901367-1.1074219,0.8901367h-12.40625c-0.612793,0-1.1108398-0.2763672-1.1108398-0.8901367C1.8798828,9.2661133,2.3779297,8.7695313,2.9907227,8.7695313zM9.8095703,19.2045898H2.949707c-0.6582031,0-1.1923828-0.5341797-1.1923828-1.1933594s0.5341797-0.9726563,1.1923828-0.9726563h6.8598633c0.6557617,0,1.190918,0.3134766,1.190918,0.9726563S10.465332,19.2045898,9.8095703,19.2045898z M15.4360352,15.137207H2.9907227c-0.6582031,0-1.1923828-0.5332031-1.1923828-1.1914063c0-0.6601563,0.5341797-0.9731445,1.1923828-0.9731445h12.4453125c0.6601563,0,1.1933594,0.3129883,1.1933594,0.9731445C16.6293945,14.6040039,16.0961914,15.137207,15.4360352,15.137207z",annotation_without_content:"M17.1201172,0H5.1630859L0,5.081543v17.1723633c0,0.9433594,0.7651367,1.7128906,1.7128906,1.7128906h15.4072266c0.9443359,0,1.7099609-0.7695313,1.7099609-1.7128906V1.7119141C18.8300781,0.7666016,18.0644531,0,17.1201172,0zM5.9902344,1.7119141v3.4238281c0,0.8291016-0.800293,0.8291016-0.800293,0.8291016H1.5795898C0.3208008,5.9912109,1.2568359,5.2954102,1.2568359,5.2954102l4.1469727-4.1455078C6.1513672,0.4008789,5.9902344,1.7119141,5.9902344,1.7119141z",view_document:"M7.4,3.4c-1.2,1.3-1.2,3.3,0,4.5C8,8.5,8.8,8.8,9.6,8.8c0.8,0,1.6-0.3,2.2-0.9c1.2-1.3,1.2-3.3,0-4.5C10.6,2.1,8.6,2.1,7.4,3.4z M12,7V4.2C12.5,5.1,12.5,6.2,12,7z M11.6,3.7v3.9c0,0,0,0,0,0c-1.1,1.1-2.8,1.1-3.9,0C7.5,7.4,7.3,7.3,7.2,7.1h0.2c0.1,0,0.2-0.1,0.2-0.2S7.6,6.7,7.5,6.7H7C6.9,6.3,6.8,5.8,6.8,5.4h1.6c0.1,0,0.2-0.1,0.2-0.2C8.6,5.1,8.5,5,8.4,5H6.9C7,4.5,7.2,4.1,7.6,3.7h2.6c0.1,0,0.2-0.1,0.2-0.2s-0.1-0.2-0.2-0.2H8.1c0.5-0.3,1-0.5,1.5-0.5C10.3,2.8,11,3.1,11.6,3.7C11.5,3.7,11.6,3.7,11.6,3.7z M15.8,10.9l-2.9-3c0.4-0.7,0.7-1.4,0.7-2.3c0-1.1-0.4-2.1-1.2-2.8c-0.3-0.3-0.7-0.6-1-0.7V0.2c0-0.1-0.1-0.2-0.2-0.2H2.3C2.2,0,2.2,0,2.1,0.1L0.1,2.1C0,2.2,0,2.2,0,2.3v13.5C0,15.9,0.1,16,0.2,16h11c0.1,0,0.2-0.1,0.2-0.2V9.2c0.2-0.1,0.3-0.2,0.5-0.3l2.9,3c0.1,0.1,0.3,0.2,0.5,0.2c0.2,0,0.4-0.1,0.5-0.2c0.1-0.1,0.2-0.3,0.2-0.5C16,11.2,15.9,11,15.8,10.9z M13.1,5.6c0,1-0.4,1.9-1,2.5c-1.4,1.4-3.6,1.4-5,0C6.4,7.5,6,6.6,6,5.6s0.4-1.9,1-2.5C7.8,2.4,8.7,2,9.6,2s1.8,0.4,2.5,1.1C12.8,3.8,13.1,4.7,13.1,5.6z M2.1,0.7v1.4H0.7L2.1,0.7z M11,15.6H0.4V2.5h1.9c0.1,0,0.2-0.1,0.2-0.2V0.4H11v1.5c-1.4-0.5-3-0.2-4.2,0.9C6.5,3,6.3,3.3,6.2,3.6H4.3c-0.1,0-0.2,0.1-0.2,0.2C4.1,4,4.1,4,4.3,4H6C5.8,4.3,5.8,4.6,5.7,4.9H2C1.9,4.9,1.8,5,1.8,5.1S1.9,5.3,2,5.3h3.7c0,0.1,0,0.2,0,0.3c0,0.2,0,0.3,0,0.5H3.8c-0.1,0-0.2,0.1-0.2,0.2s0.1,0.2,0.2,0.2h2C5.8,6.8,5.9,7.1,6,7.4H2c-0.1,0-0.2,0.1-0.2,0.2S1.9,7.8,2,7.8h4.3C6.4,8,6.6,8.3,6.8,8.5C6.9,8.5,6.9,8.6,7,8.6H6.3c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h1.3c0.6,0.4,1.3,0.6,2,0.6c0.5,0,0.9-0.1,1.4-0.2V15.6z M12.4,8.5c0.1-0.1,0.2-0.2,0.2-0.2l2.1,2.1l-0.5,0.5l-2.1-2.1C12.2,8.6,12.3,8.5,12.4,8.5z M15.5,11.6c-0.1,0.1-0.3,0.1-0.5,0l-0.5-0.5l0.5-0.5l0.5,0.5c0.1,0.1,0.1,0.1,0.1,0.2S15.6,11.6,15.5,11.6z M2,4h1.6C3.7,4,3.8,4,3.8,3.8S3.7,3.6,3.6,3.6H2c-0.1,0-0.2,0.1-0.2,0.2S1.9,4,2,4z M2,6.6h1.1c0.1,0,0.2-0.1,0.2-0.2S3.2,6.1,3.1,6.1H2c-0.1,0-0.2,0.1-0.2,0.2S1.9,6.6,2,6.6z M2,9.1h3.7c0.1,0,0.2-0.1,0.2-0.2c0-0.1-0.1-0.2-0.2-0.2H2c-0.1,0-0.2,0.1-0.2,0.2C1.8,9,1.9,9.1,2,9.1z M9.4,9.9H3.5c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h5.9c0.1,0,0.2-0.1,0.2-0.2C9.6,10,9.5,9.9,9.4,9.9z M2,10.3h0.9c0.1,0,0.2-0.1,0.2-0.2C3.1,10,3,9.9,2.9,9.9H2c-0.1,0-0.2,0.1-0.2,0.2C1.8,10.2,1.9,10.3,2,10.3z M9.4,12.4H5.6c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h3.8c0.1,0,0.2-0.1,0.2-0.2C9.6,12.5,9.5,12.4,9.4,12.4z M2,12.8h3c0.1,0,0.2-0.1,0.2-0.2c0-0.1-0.1-0.2-0.2-0.2H2c-0.1,0-0.2,0.1-0.2,0.2C1.8,12.7,1.9,12.8,2,12.8z M9.4,13.7H7.2c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h2.2c0.1,0,0.2-0.1,0.2-0.2C9.6,13.8,9.5,13.7,9.4,13.7z M6.6,13.7H3c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h3.6c0.1,0,0.2-0.1,0.2-0.2C6.8,13.8,6.7,13.7,6.6,13.7z M2.4,13.7H2c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h0.4c0.1,0,0.2-0.1,0.2-0.2C2.6,13.8,2.5,13.7,2.4,13.7z M9.4,11.2H8.2c-0.1,0-0.2,0.1-0.2,0.2c0,0.1,0.1,0.2,0.2,0.2h1.2c0.1,0,0.2-0.1,0.2-0.2C9.6,11.3,9.5,11.2,9.4,11.2z M2,11.6h5.5c0.1,0,0.2-0.1,0.2-0.2c0-0.1-0.1-0.2-0.2-0.2H2c-0.1,0-0.2,0.1-0.2,0.2C1.8,11.5,1.9,11.6,2,11.6z M10.2,5H9.5C9.4,5,9.3,5.1,9.3,5.2s0.1,0.2,0.2,0.2h0.7c0.1,0,0.2-0.1,0.2-0.2C10.4,5.1,10.3,5,10.2,5z M10.2,6.7H8.3c-0.1,0-0.2,0.1-0.2,0.2s0.1,0.2,0.2,0.2h1.9c0.1,0,0.2-0.1,0.2-0.2S10.3,6.7,10.2,6.7z",video_play:"M14.7,3.7c-1.3-1-4.1-1-6.7-1l0,0c-2.6,0-5.4,0-6.7,1S0,6.7,0,8s0,3.4,1.3,4.3s4.1,1,6.7,1v0c2.6,0,5.4,0,6.7-1S16,9.3,16,8S16,4.6,14.7,3.7z M10.5,8.3L10.5,8.3l-4.3,2.3c0,0,0,0-0.1,0l0,0l0,0c0,0-0.1,0-0.1,0c-0.2,0-0.3-0.1-0.3-0.3V5.7c0-0.2,0.1-0.3,0.3-0.3c0.1,0,0.1,0,0.1,0l0,0l4.4,2.4l0,0c0.1,0.1,0.2,0.2,0.2,0.3C10.7,8.1,10.6,8.2,10.5,8.3z"};return e.Icon=function(n,i,a){var s=t[i],o=n.path(s);a===undefined&&(a={}),a["stroke-width"]===undefined&&(a["stroke-width"]=1),a.stroke===undefined&&(a.stroke="#fff"),a.fill===undefined&&(a.fill="#fff");var r=a.scale?a.scale:{x:1,y:1},l=a.transform?a.transform:{x:0,y:0},c=a.rotation?a.rotation:0;o.attr(a),e.chrome_fix_stroke(o),this.get_scale=function(){return r},this.get_rotation=function(){return c};var d=0,u=0;this.set_position=function(e,t){d=l.x+e,u=l.y+t,o.transform("t"+d+","+u+"s"+r.x+","+r.y+",0,0r"+c)},this.set_position_and_scale=function(e,t,n,i){d=l.x+e,u=l.y+t,r.x=n,r.y=i,o.transform("t"+d+","+u+"s"+r.x+","+r.y+",0,0r"+c)},this.attr=function(e){o.attr(e)},this.get_path=function(){return o},this.get_svg=function(){return s},this.show=function(){o.show()},this.hide=function(){o.hide()},this.remove=function(){o.remove()},this.drag=function(e,t,n){o.drag(e,t,n)},this.animate=function(e,t,n,i){o.animate(e,t,n,i)},this.toFront=function(){o.toFront()},this.toBack=function(){o.toBack()},this.is_visible=function(){return o.is_visible()},this.hide()},e}(SVG_HELPER||{}),SVG_HELPER=function(e){return e.Paper=function(e,t,n,i){_.bindAll(this,"set_offsets","refresh"),this.$outer_container=$(".embedded_content"),this.$paper_container=$(e),this.config=t||{},this.config.offset_x=this.config.offset_x||0,this.config.offset_y=this.config.offset_y||0;var a=Raphael(this.$paper_container[0]);a.click_catcher=a.rect(0,0),a.canvas.setAttributeNS&&a.canvas.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.click_catcher.attr({fill:"#fff",opacity:0}),this.x=-1e5,this.y=-1e5,this.width=2e5,this.height=2e5,a.background=a.rect(this.x,this.y,this.width,this.height),this.paper=a,this.viewbox=n,this.image_view=i,this.set_offsets(),this.throttled_refresh=_.throttle(this.refresh,200),this.throttled_offsets=_.throttle(this.set_offsets,200),PAGE_EVENTS.on("window:resize",function(){this.throttled_offsets(),this.throttled_refresh()}.bind(this)).on("document_title_rerendered",function(){this.set_offsets(),this.refresh()}.bind(this)),this.refresh()},e.Paper.prototype={get_config:function(){return this.config},get_background_colour:function(){return{colour:this.colour,opacity:this.opacity}},set_background_colour:function(e,t){var n=_.isUndefined(t)?1:parseInt(t,10);this.colour=e,this.opacity=t,this.paper.background.attr({fill:e,"stroke-width":0,opacity:n,"fill-opacity":n})},set_offsets:function(){this.$paper_container.length>0&&(this.config.offset_x=this.$paper_container.offset().left,this.config.offset_y=this.$paper_container.offset().top)},reorder_background:function(){this.paper.click_catcher&&(this.paper.click_catcher.toBack(),this.paper.click_catcher.attr("cursor","auto")),this.paper.grid&&this.paper.grid.toBack(),this.paper.background.toBack()},refresh:function(){if(!this.image_view){this.$paper_container.length>0&&this.set_offsets();var e=this.$paper_container.parent().width(),t=0;this.$outer_container.length>0?t=this.$outer_container.height():(t=$(window).height()-this.config.offset_y,e-=this.config.offset_x),this.paper.setSize(e,t),this.old_window_height&&this.old_window_width&&this.viewbox.adjust_to_current_window(this.old_window_width,this.old_window_height,e,t),this.old_window_width=e,this.old_window_height=t,$("#save_panel").css("bottom",5)}}},e}(SVG_HELPER||{});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("dayjs")):"function"==typeof define&&define.amd?define(["dayjs"],t):e.dayjs_locale_de=t(e.dayjs)}(this,function(e){"use strict";function t(e,t,i){var a=n[i];return Array.isArray(a)&&(a=a[t?0:1]),a.replace("%d",e)}e=e&&e.hasOwnProperty("default")?e["default"]:e;var n={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]},i={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan_Feb_M\xe4rz_Apr_Mai_Juni_Juli_Aug_Sept_Okt_Nov_Dez".split("_"),ordinal:function(e){return e+"."},weekStart:1,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t}};return e.locale(i,null,!0),i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dayjs_locale_en=t()}(this,function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("dayjs")):"function"==typeof define&&define.amd?define(["dayjs"],t):e.dayjs_locale_es=t(e.dayjs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return e.locale(t,null,!0),t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("dayjs")):"function"==typeof define&&define.amd?define(["dayjs"],t):e.dayjs_locale_pt=t(e.dayjs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t={name:"pt",weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sab".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_Sa".split("_"),months:"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),ordinal:function(e){return e+"\xba"},weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"alguns segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"}};return e.locale(t,null,!0),t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dayjs_plugin_relativeTime=t()}(this,function(){"use strict";return function(e,t,n){e=e||{};var i=t.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};n.en.relativeTime=a;var s=function(t,i,s,o){for(var r,l,c,d=s.$locale().relativeTime||a,u=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=u.length,h=0;h<_;h+=1){var p=u[h];p.d&&(r=o?n(t).diff(s,p.d,!0):s.diff(t,p.d,!0));var f=(e.rounding||Math.round)(Math.abs(r));if(c=r>0,f<=p.r||!p.r){f<=1&&h>0&&(p=u[h-1]);var m=d[p.l];l="string"==typeof m?m.replace("%d",f):m(f,i,p.l,c);break}}return i?l:(c?d.future:d.past).replace("%s",l)};i.to=function(e,t){return s(e,t,this,!0)},i.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?n.utc():n()};i.toNow=function(e){return this.to(o(this),e)},i.fromNow=function(e){return this.from(o(this),e)}}});var DAYJS_HELPER=function(e,t){var n=["en","es","pt","de"],i=function(t,i){for(var a=[t,t.slice(0,2),i,i.slice(0,2),"en"],s=0;s<a.length;s++){var o=a[s];if(e.inArray(o,n)>-1)return o}};return t.date_for_locale=function(e,t,n){"undefined"==typeof dayjs.prototype.fromNow&&dayjs.extend(dayjs_plugin_relativeTime);var a=dayjs(n),s=i(e,t);return a.locale(s)},t.moment_for_locale=function(e,t){"undefined"==typeof dayjs.prototype.fromNow&&dayjs.extend(dayjs_plugin_relativeTime);var n=dayjs(),a=i(e,t);return n.locale(a)},t}(jQuery,DAYJS_HELPER||{}),SVG_HELPER=function(e){return e.SaveIndicator=function(){var e,t=function(){void 0!==e&&$("#last_saved .last_saved_time").html(e.fromNow()),setTimeout(t,3e4)};this.loading=function(){$("#last_saved").hide(),$("#loading_spinner").show()},this.saved=function(){$.active>1||(e=DAYJS_HELPER.moment_for_locale(I18n.locale,I18n.defaultLocale),$("#last_saved .last_saved_time").html(e.fromNow()),$("#loading_spinner").hide(),$("#last_saved").show())},t()},e}(SVG_HELPER||{}),SVG_HELPER=function(e){return e.round_number=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},e.chrome_fix_stroke=function(e){0===e.attr("stroke-width")?e.attr({"stroke-opacity":0}):e.attr({"stroke-opacity":1})},e.scale_stroke=function(t,n){return void 0!==t&&(n/=t.get_current_zoom(),n=e.round_number(n,2)),n},e}(SVG_HELPER||{});Number.prototype.roundTo=function(e){var t,n=Math.floor(this),i=Math.abs(n)%e;return t=i<=e/2?Math.abs(n)-i:Math.abs(n)+e-i,n<0&&(t=-t),t};var SVG_HELPER=function(e){return e.ViewBox=function(){},e}(SVG_HELPER||{});SVG_HELPER.ViewBox.prototype={config_defaults:{max_zoom_in:.3,max_zoom_out:2.2,max_pan:1e6,grid_size:1,zoom_step:.1},max_zoom_in:null,max_zoom_out:null,init:function(e,t,n,i,a){_.bindAll(this,"pan_start","pan_move","pan_end","paper_mouse_down","paper_mouse_up","paper_double_click"),this.config=_.extend({},this.config_defaults,i||{}),this.paper=e,this.paper_handler=t,this.x=-this.paper.width/2,this.y=-this.paper.height/2,this.width=this.paper.width,this.height=this.paper.height,this.container=$(n)[0],this.zoom_scale=1,this.image_view=a,this.set(this.x,this.y,this.width,this.height),this.init_zoom(),this.init_zoom_slider(),this.init_recentre_button(),this.paper.click_catcher.mousedown(this.paper_mouse_down),this.paper.click_catcher.mouseup(this.paper_mouse_up),this.paper.click_catcher.mousedown(this.pan_start),this.paper.click_catcher.mousemove(this.pan_move),this.paper.click_catcher.mouseup(this.pan_end),this.paper.click_catcher.dblclick(this.paper_double_click),this.paper.click_catcher.toFront()},set_full_viewbox_calculator:function(e){this.calculate_viewbox=e},init_recentre_button:function(){$("#recentre_canvas").off("click").on("click",function(){var e=this.calculate_viewbox();this.set(e.x,e.y,e.width,e.height,e.zoom_scale),this.update_zoom_slider()}.bind(this))},get_current_zoom:function(){return this.zoom_scale},get_attrs:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,zoom_scale:this.zoom_scale}},get_config:function(){return this.config},set:function(e,t,n,i,a){this.x=clamp(e,-this.config.max_pan,this.config.max_pan-n),this.y=clamp(t,-this.config.max_pan,this.config.max_pan-i),this.width=n,this.height=i,this.paper.setViewBox(this.x,this.y,this.width,this.height),void 0!==a&&(this.zoom_scale=a),this.paper.click_catcher.attr(this.get_attrs())},get_current_centre:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},set_grid_size:function(e){this.config.grid_size=e},get_grid_size:function(){return this.config.grid_size},set_centred_at_top:function(e,t){this.width=this.paper.width*this.zoom_scale,this.height=this.paper.height*this.zoom_scale,this.x=e-this.width/2,this.y=t-this.paper_handler.get_config().offset_y-20,this.update()},convert_local_properties_to_screen_properties:function(e){return _.extend({},e,this.convert_local_position_to_screen_position(e.x,e.y),{width:e.width*this.zoom_scale,height:e.height*this.zoom_scale})},convert_local_position_to_screen_position:function(e,t){return{x:(e-this.x)/this.zoom_scale+this.paper_handler.get_config().offset_x,y:(t-this.y)/this.zoom_scale+this.paper_handler.get_config().offset_y}},convert_local_position_to_relative_screen_position:function(e,t){return{x:(e-this.x)/this.zoom_scale,y:(t-this.y)/this.zoom_scale}},convert_screen_position_to_local_position:function(e,t){return{x:this.zoom_scale*(e-this.paper_handler.get_config().offset_x)+this.x,y:this.zoom_scale*(t-this.paper_handler.get_config().offset_y)+this.y}},pan:function(e,t){this.x=this.x-e,this.y=this.y-t,this.update()},pan_absolute:function(e,t){this.x=e,this.y=t,this.update()},centre_pan:function(){this.x=-this.paper.width/2*this.zoom_scale,this.y=-this.paper.height/2*this.zoom_scale,this.width=this.paper.width*this.zoom_scale,this.height=this.paper.height*this.zoom_scale,this.update()},reset_zoom_double_click_bools:function(){this.right_clicked=!1,this.left_clicked=!1},paper_mouse_down:function(e){if($(document).trigger("navigation:clear_popovers").trigger("navigation:close_additional_controls"),this.has_clicked_on_background=!0,MOUSE_HELPER.left_clicked(e))if(this.left_clicked){if(!this.is_user_panning){var t=MOUSE_HELPER.get_mouse_coordinates(e);this.zoom_in_to_screen_coordinate(t.x,t.y)}this.left_clicked=!1}else setTimeout(function(){this.left_clicked=!1}.bind(this),500),this.left_clicked=!0;else if(MOUSE_HELPER.right_clicked(e))if(this.right_clicked){t=MOUSE_HELPER.get_mouse_coordinates(e);this.zoom_out_to_screen_coordinate(t.x,t.y),this.right_clicked=!1}else setTimeout(function(){this.right_clicked=!1}.bind(this),500),this.right_clicked=!0;e.preventDefault()},snap_to_grid:function(e,t){var n={};return _.chain(e).pick(["x","y","width","height"]).each(function(i,a){"x"===a?i=clamp(i,-this.config.max_pan,this.config.max_pan-(e.width||0)):"y"===a&&(i=clamp(i,-this.config.max_pan,this.config.max_pan-(e.height||0))),"width"===a&&t&&e.x!==t.x&&n.x===t.x?n[a]=t.width:"height"===a&&t&&e.y!==t.y&&n.y===t.y?n[a]=t.height:"width"===a&&t&&t.x!==n.x&&e.width!==t.width?n.width=t.width+t.x-n.x:"height"===a&&t&&t.y!==n.y&&e.height!==t.height?n.height=t.height+t.y-n.y:n[a]=i.roundTo(this.config.grid_size)},this),_.isUndefined(n.width)||(n.width=Math.max(this.config.grid_size,n.width)),_.isUndefined(n.height)||(n.height=Math.max(this.config.grid_size,n.height)),n},paper_mouse_up:function(){this.has_clicked_on_background=!1,this.has_user_panned&&this.reset_zoom_double_click_bools(),this.has_user_panned=!1,this.has_user_gestured=!1},paper_double_click:function(e){var t=MOUSE_HELPER.get_mouse_coordinates(e);MOUSE_HELPER.left_clicked(e)&&this.zoom_in_to_screen_coordinate(t.x,t.y)},lock_scale:function(e){return isNaN(e)&&(e=1),clamp(e,this.max_zoom_in,this.max_zoom_out)/this.zoom_scale},general_zoom:function(e){var t=this.lock_scale(e),n=this.width,i=this.height;this.width*=t,this.height*=t,this.zoom_scale*=t,this.x=this.x-(this.width-n)/2,this.y=this.y-(this.height-i)/2,this.update()},zoom_out:function(){var e=this.lock_scale(this.zoom_scale*(1+this.config.zoom_step)),t=this.width,n=this.height;this.width*=e,this.height*=e,this.zoom_scale*=e,this.x=this.x-(this.width-t)/2,this.y=this.y-(this.height-n)/2,this.update_zoom_slider(),this.update()},zoom_in:function(){var e=this.lock_scale(this.zoom_scale*(1-this.config.zoom_step)),t=this.width,n=this.height;this.width*=e,this.height*=e,this.zoom_scale*=e,this.x=this.x-(this.width-t)/2,this.y=this.y-(this.height-n)/2,this.update_zoom_slider(),this.update()},set_to_max_zoom:function(){var e=this.config.max_zoom_in/this.zoom_scale,t=this.width,n=this.height;this.width*=e,this.height*=e,this.zoom_scale*=e,this.x=this.x-(this.width-t)/2,this.y=this.y-(this.height-n)/2,this.update_zoom_slider(),this.update()},zoom_in_to_screen_coordinate:function(e,t){var n=this.convert_screen_position_to_local_position(e,t);this.x=n.x-this.width/2,this.y=n.y-this.height/2,this.zoom_in()},zoom_out_to_screen_coordinate:function(e,t){var n=this.convert_screen_position_to_local_position(e,t);this.x=n.x-this.width/2,this.y=n.y-this.height/2,this.zoom_out()},set_zoom:function(e){var t=this.lock_scale(e);this.zoom_scale*=t;var n=this.get_current_centre();this.x=n.x-this.paper.width/2,this.y=n.y-this.paper.height/2,this.width=this.paper.width*this.zoom_scale,this.height=this.paper.height*this.zoom_scale,this.update()},set_zoom_relative_to_current_zoom:function(e){var t=this.width,n=this.height;e=this.lock_scale(this.zoom_scale/e);this.width*=e,this.height*=e,this.zoom_scale*=e,this.x=this.x-(this.width-t)/2,this.y=this.y-(this.height-n)/2,this.update()},restrict_pan_to_limits:function(){if(!this.image_view){var e=this.width>2*this.config.max_pan,t=this.height>2*this.config.max_pan;e||t?(this.x=e?-this.width/2:clamp(this.x,-this.config.max_pan,this.config.max_pan-this.width),this.y=t?-this.height/2:clamp(this.y,-this.config.max_pan,this.config.max_pan-this.height)):(this.x=clamp(this.x,-this.config.max_pan,this.config.max_pan-this.width),this.y=clamp(this.y,-this.config.max_pan,this.config.max_pan-this.height))}},update:function(){this.restrict_pan_to_limits(),this.paper.setViewBox(this.x,this.y,this.width,this.height),$(document).trigger("viewbox:update"),this.update_zoom_slider(),this.paper.click_catcher.attr(this.get_attrs())},adjust_to_current_window:function(e,t,n,i){this.x=this.x+(e-n)*this.zoom_scale/2,this.y=this.y+(t-i)*this.zoom_scale/2,this.width=this.paper.width*this.zoom_scale,this.height=this.paper.height*this.zoom_scale,this.restrict_pan_to_limits(),this.set(this.x,this.y,this.width,this.height),$(document).trigger("viewbox:update")},stop_animation:function(){this.paper.stopAnimateViewBox()},animate_to:function(e,t){this.is_animating=!0,this.paper.stopAnimateViewBox();var n=function(){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,"undefined"!=typeof e.zoom_scale&&(this.zoom_scale=e.zoom_scale),this.is_animating=!1,this.update()}.bind(this),i=100;(is_using_msie()||$.browser.webkit)&&(i=25),this.paper.animateViewBox(e.x,e.y,e.width,e.height,t,i,"<>",n)}},$(function(){var e=[];Raphael.fn.animateViewBox=function(t,n,i,a,s,o,r,l){var c=this._viewBox?this._viewBox[0]:0,d=t-c,u=this._viewBox?this._viewBox[1]:0,_=n-u,h=this._viewBox?this._viewBox[2]:this.width,p=i-h,f=this._viewBox?this._viewBox[3]:this.height,m=a-f,g=this;r=r||"linear";var v=s/(o=o||25),b=0,y=Raphael.easing_formulas[r],w=setInterval(function(){var t=b/v,n=c+d*y(t),i=u+_*y(t),a=h+p*y(t),s=f+m*y(t);if(g.setViewBox(n,i,a,s,!1),b++>=v){clearInterval(w),l&&l();var o=$.inArray(w,e);o>-1&&e.splice(o,1)}},o);e.push(w)},Raphael.fn.stopAnimateViewBox=function(){$.each(e,function(e,t){clearInterval(t)}),e=[]}}),$.extend(SVG_HELPER.ViewBox.prototype,{animate_to_node:function(e,t){return this.animate_to_parent_node(e,t,!0)},animate_to_parent_node:function(e,t,n){var i=this.calculate_viewbox_to_focus_on_parent_node(e,n);this.x=clamp(i.x,-this.config.max_pan,this.config.max_pan-i.width),this.y=clamp(i.y,-this.config.max_pan,this.config.max_pan-i.height),this.width=i.width,this.height=i.height,this.zoom_scale=i.zoom_scale,this.animate_to({x:this.x,y:this.y,width:this.width,height:this.height},t)},calculate_viewbox_to_focus_on_parent_node:function(e,t){var n=[e];t||(n=n.concat(e.childNodes));var i=1e7,a=1e7,s=-1e7,o=-1e7;$.each(n,function(e,t){var n=t.get_x(),r=t.get_y(),l=t.get_width(),c=t.get_height(),d=null;"undefined"!=typeof mm&&t.is_outline_only()&&(n-=(d=mm.cfg.default_stroke_weight_outline)/2,r-=d/2,l+=d,c+=d);n<i&&(i=n),r<a&&(a=r),n+l>s&&(s=n+l),r+c>o&&(o=r+c)});var r=(s+=25)-(i-=25),l=(o+=25)-(a-=25),c=i+r/2,d=a+l/2,u=r/this.width,_=l/this.height,h=Math.max(u,_);("undefined"==typeof speed||parseInt(speed,10)<1)&&(speed=1),h=this.lock_scale(this.zoom_scale*h);this.width,this.height;var p=this.width*h,f=this.height*h,m=this.zoom_scale*h,g=c-p/2,v=d-f/2;return e.get_x()<g?g=e.get_x():e.get_x()+e.get_width()>g+p&&(g+=e.get_x()+e.get_width()-(g+p)),{x:g,y:v,width:p,height:f,zoom_scale:m}}}),$.extend(SVG_HELPER.ViewBox.prototype,{on_wheel_zoom:function(e){e<0?this.zoom_out():this.zoom_in()},wheel_motion:function(e){if(!($(".modal.show,.study_aid_panel:visible").length>0)){var t=0;e||(e=window.event),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t&&this.on_wheel_zoom(t),e.preventDefault&&e.preventDefault(),e.returnValue=!1}},init_zoom:function(){if(window.addEventListener){var e=this.wheel_motion.bind(this);this.container.addEventListener("DOMMouseScroll",e,!1),PAGE_EVENTS.on("page:cleanup",function(){this.container.removeEventListener("DOMMouseScroll",e,!1)})}this.container.onmousewheel=this.wheel_motion.bind(this),PAGE_EVENTS.on("page:cleanup",function(){this.container.onmousewheel=undefined}),this.container.addEventListener("gesturestart",this.gesture_start.bind(this),!1),this.container.addEventListener("gesturechange",this.gesture_change.bind(this),!1),this.container.addEventListener("gestureend",this.gesture_end.bind(this),!1),this.init_pointer_events_zoom()},init_pointer_events_zoom:function(){window.PointerEvent&&(this.container.addEventListener("pointerdown",this.pointer_event_start.bind(this),!1),this.container.addEventListener("pointermove",this.pointer_event_move.bind(this),!1),this.container.addEventListener("pointerup",this.pointer_event_end.bind(this),!1),this.container.addEventListener("pointercancel",this.pointer_event_end.bind(this),!1),this.container.addEventListener("pointerout",this.pointer_event_end.bind(this),!1),this.container.addEventListener("pointerleave",this.pointer_event_end.bind(this),!1),this.container_scale=Math.sqrt(Math.pow(this.container.clientWidth,2)+Math.pow(this.container.clientHeight,2)))},pointer_event_cache:new Array,pointer_event_separation:-1,container_scale:0,pointer_event_start:function(e){this.pointer_event_cache.push(e)},
pointer_event_move:function(e){for(var t=0,n=this.pointer_event_cache.length;t<n;t++)if(e.pointerId===this.pointer_event_cache[t].pointerId){this.pointer_event_cache[t]=e;break}if(2===this.pointer_event_cache.length){var i=Math.sqrt(Math.pow(this.pointer_event_cache[0].clientX-this.pointer_event_cache[1].clientX,2)+Math.pow(this.pointer_event_cache[0].clientY-this.pointer_event_cache[1].clientY,2));if(this.pointer_event_separation<=0)this.pointer_event_separation=i;else{var a=(i-this.pointer_event_separation)/this.container_scale;a*=a>0?.05:.2,this.on_wheel_zoom(a)}}},pointer_event_end:function(e){for(var t=0,n=this.pointer_event_cache.length;t<n;t++)if(this.pointer_event_cache[t].pointerId===e.pointerId){this.pointer_event_cache.splice(t,1);break}this.pointer_event_cache.length<2&&(this.pointer_event_separation=-1)},gesture_start:function(){this.is_user_gesturing=!0,this.has_user_gestured=!0},gesture_change:function(e){var t,n=e.scale;t=n<1?(n-1)/4+1:(n-1)/10+1,this.set_zoom_relative_to_current_zoom(t)},gesture_end:function(){this.is_user_gesturing=!1}}),$.extend(SVG_HELPER.ViewBox.prototype,{pan_start:function(e){var t=MOUSE_HELPER.get_mouse_coordinates(e);MOUSE_HELPER.left_clicked(e)&&!this.is_user_gesturing&&(this.previous_x=t.x,this.previous_y=t.y,this.is_user_panning=!0)},pan_move:function(e){if(this.is_user_panning&&!this.is_user_gesturing){var t=MOUSE_HELPER.get_mouse_coordinates(e),n=t.x-this.previous_x,i=t.y-this.previous_y;if(!(0!==n||0!==i))return;this.has_user_panned||(this.paper.click_catcher&&this.paper.click_catcher.toFront(),this.has_user_panned=!0),this.pan((t.x-this.previous_x)*this.get_current_zoom(),(t.y-this.previous_y)*this.get_current_zoom()),this.previous_x=t.x,this.previous_y=t.y,this.paper.click_catcher&&this.paper.click_catcher.attr("cursor","move")}},pan_end:function(e){MOUSE_HELPER.left_clicked(e)&&(this.paper.click_catcher&&(this.paper.click_catcher.toBack(),this.paper.click_catcher.attr("cursor","auto")),this.paper.grid&&this.paper.grid.toBack(),this.paper.background.toBack(),this.is_user_panning=!1)}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,a,s;for(s=0;null!=(a=n[s]);s++)try{(i=e._data(a,"events"))&&i.remove&&e(a).triggerHandler("remove")}catch(o){}t(n)}),e.widget=function(t,n,i){var a,s,o,r={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},a=e[l][t],s=e[l][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,a,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(o=new n).options=e.widget.extend({},o.options),e.each(i,function(t,i){e.isFunction(i)?r[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function a(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=a,t=i.apply(this,arguments),this._super=n,this._superApply=s,t}}():r[t]=i}),s.prototype=e.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||t},r,{constructor:s,namespace:l,widgetName:t,widgetFullName:c}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete a._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,a,s=i.call(arguments,1),o=0,r=s.length;o<r;o++)for(n in s[o])a=s[o][n],s[o].hasOwnProperty(n)&&a!==undefined&&(e.isPlainObject(a)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],a):e.widget.extend({},a):t[n]=a);return t},e.widget.bridge=function(t,n){var a=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,r=i.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each(function(){var n,i=e.data(this,a);return"instance"===s?(l=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,r))!==i&&n!==undefined?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=undefined:(r.length&&(s=e.widget.extend.apply(null,[s].concat(r))),this.each(function(){var t=e.data(this,a);t?(t.option(s||{}),t._init&&t._init()):e.data(this,a,new n(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)a[i[s]]=a[i[s]]||{},a=a[i[s]];if(t=i.pop(),1===arguments.length)return a[t]===undefined?null:a[t];a[t]=n}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,a;for(n in t)a=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&a&&a.length&&(i=e(a.get()),this._removeClass(a,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,s){var o,r;for(r=0;r<n.length;r++)o=a.classesElementLookup[n[r]]||e(),o=t.add?e(e.unique(o.get().concat(t.element.get()))):e(o.not(t.element).get()),a.classesElementLookup[n[r]]=o,i.push(n[r]),s&&t.classes[n[r]]&&i.push(t.classes[n[r]])}var i=[],a=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,a){-1!==e.inArray(t.target,a)&&(n.classesElementLookup[i]=e(a.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var a="string"==typeof e||null===e,s={extra:a?t:n,keys:a?e:t,element:a?this.element:e,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(t,n,i){var a,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function r(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?a.on(c,d,r):n.on(c,r)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var a,s,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(a in s)a in n||(n[a]=s[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,s){var o;"string"==typeof a&&(a={effect:a});var r=a?!0===a||"number"==typeof a?n:a.effect||n:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[r]?i[t](a):r!==t&&i[r]?i[r](a.duration,a.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}}),e.widget}),
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,a=1===n.which,s=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(a&&!s&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../keycode","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,a=this.element.find(".ui-slider-handle"),s="<span tabindex='0'></span>",o=[];for(n=i.values&&i.values.length||1,a.length>n&&(a.slice(n).remove(),a=a.slice(0,n)),t=a.length;t<n;t++)o.push(s);this.handles=a.add(e(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,i,a,s,o,r,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-c.values(t));(a>n||a===n&&(t===c._lastChangedValue||c.values(t)===d.min))&&(a=n,s=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),r=s.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-s.width()/2,top:t.pageY-r.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,a,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),a=this._valueMax()-this._valueMin(),s=this._valueMin()+i*a,this._trimAlignValue(s)},_uiHash:function(e,t,n){var i={handle:this.handles[e],handleIndex:e,value:t!==undefined?t:this.value()};return this._hasMultipleValues()&&(i.value=t!==undefined?t:this.values(e),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var i,a=this.value(),s=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),a=this.values(t),2===this.options.values.length&&!0===this.options.range&&(n=0===t?Math.min(i,n):Math.max(i,n)),s[t]=n),n!==a&&!1!==this._trigger("slide",e,this._uiHash(t,n,s))&&(this._hasMultipleValues()?this.values(t,n):this.value(n))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,a,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,a=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var i,a=0;switch("range"===t&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=a-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step;(e=Math.round((e-t)/n)*n+t)>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,i,a,s,o=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,d={};this._hasMultipleValues()?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](d,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},r.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:r.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},r.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:r.animate}))),t=n}):(i=this.value(),a=this._valueMin(),s=this._valueMax(),n=s!==a?(i-a)/(s-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},r.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},r.animate))},_handleEvents:{keydown:function(t){var n,i,a,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,s)))return}switch(a=this.options.step,n=i=this._hasMultipleValues()?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-a)}this._slide(t,s,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}})}),$.extend(SVG_HELPER.ViewBox.prototype,{initialized:!1,update_zoom_slider:function(){var e=this.zoom_slide_normaliser-this.zoom_scale;this.$slider_container.slider("value",[e])},on_zoom_slide:function(e,t){var n=this.zoom_slide_normaliser-t.value,i=(Math.ceil(100*n)/100).toFixed(1);this.general_zoom(i)},scale_changed:function(e){return e&&e.max_zoom_in&&e.max_zoom_in!==this.max_zoom_in||e&&e.max_zoom_out&&e.max_zoom_out!==this.max_zoom_out},render_zoom_slider_parent:function(){var e='<span class="sliderparent hover_area"> <img src="'+"/assets/icon_resource_zoom_out_black.png"+'" width="16" height="16" class="zoom_out">  <span class="sliderzoom"></span>  <img src="'+"/assets/icon_resource_zoom_in_black.png"+'" width="16" height="16" class="zoom_in"></span>';$("#bottom_left_panel").append(e)},init_zoom_slider:function(e){if(this.initialized){if(!this.scale_changed(e))return;this.$slider_container.remove()}else this.render_zoom_slider_parent(),this.initialized=!0;this.max_zoom_in=e&&e.max_zoom_in?Math.min(e.max_zoom_in,this.config.max_zoom_in):this.config.max_zoom_in,this.max_zoom_out=e&&e.max_zoom_out?Math.max(e.max_zoom_out,this.config.max_zoom_out):this.config.max_zoom_out,this.zoom_slide_normaliser=this.max_zoom_in+this.max_zoom_out,this.$slider_container=$("<span />",{id:"zoom_slider_container",title:I18n.t("player.zoom")}),$(".sliderzoom").append(this.$slider_container),this.$slider_container.slider({min:this.max_zoom_in,max:this.max_zoom_out,step:.1,value:this.zoom_slide_normaliser-1}),this.$slider_container.off("slide").on("slide",this.on_zoom_slide.bind(this))}});var MINDMAP=function(e){return e.is_connecting=!1,e.AbstractConnector=function(t,n){var i,a=this,s=0,o=0,r=8,l=!1,c=t.circle(0,0,r),d=1;c.attr({cursor:"pointer"}),c.hide(),this.get_radius=function(){return r},this.set_color=function(e){e},this.in_progress=function(){return l},this.attr=function(e){c.attr(e)},this.attr({stroke:e.cfg.select_stroke_color}),this.set_position=function(e,t){s=e,o=t},this.get_position=function(){return[s,o]},this.get_x=function(){return s-r-d},this.get_y=function(){return o-r-d},this.get_width=function(){return 2*r},this.get_height=function(){return 2*r},this.show=function(){c.show()},this.hide=function(){c.hide()},this.remove=function(){c.remove()},this.update=function(){var t=n.get_shape().get_x_and_y_to_update_abstract_connector_position(r);s=t.x,o=t.y,this.attr({fill:n.get_lightened_color(),cx:s,cy:o,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,d)})},this.update_stroke=function(){this.attr({"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,d)})};var u,_,h=!1,p=function(t){1==MOUSE_HELPER.get_mouse_click(t)&&(h=!0),h&&(l=!0,e.is_connecting=!0,e.reconnecting_node=n,e.selector.hide_toolbar_and_resizer(),c.toBack(),i.update(),i.show())},f=function(t,n){if(h&&!isNaN(t)&&!isNaN(n)){t=void 0===t?0:t,n=void 0===n?0:n,t*=e.viewbox.get_current_zoom(),n*=e.viewbox.get_current_zoom();var a=!1;user_has_dragged_nodes=!0,void 0!==u&&void 0!==_||(u=s,_=o,a=!0),s=u+t,o=_+n,i.update(),a&&e.selector.hide_toolbar_and_resizer(),this.attr({cx:s,cy:o})}},m=function(){u=undefined,_=undefined,l=!1,h=!1,e.is_connecting=!1,e.reconnecting_node=undefined,n.update(),e.selector.update(),i.hide()};c.drag(f,p,m),(i=new e.Connector(t,a,n,e.cfg.default_abstract_connector_stroke_weight,"abstract",!1)).attr({opacity:MINDMAP_config.default_node_opacity}),i.hide()},e}(MINDMAP||{}),ADMIN_LOCK=function(e){var t='<li><a class="actionbutton admin-lock locked" id="admin-lock" title="Locked"></a></li>',n=function(){$lock_button_span.removeClass("locked").addClass("unlocked").attr("title","Unlocked")},i=function(){do_redirect(window.location.href+"?read_only=false")},a=function(){do_redirect(location.protocol+"//"+location.host+location.pathname)};return e.show_lock=function(){$(".actions_toolbar").append(t),$lock_button_span=$("#admin-lock"),"true"!==$("#is_read_only").val()&&n(),$(".actions_toolbar").on("click",".admin-lock",function(e){e.preventDefault(),"true"===$("#is_read_only").val()?confirm("Any changes made will be permanent to the user's resource. Are you sure?")&&($(document).trigger("admin:unlock"),0===$("#mind_map_id").length&&i()):($(document).trigger("admin:lock"),0===$("#mind_map_id").length&&a())})},e}(ADMIN_LOCK||{}),MINDMAP_ADMIN_LOCK=function(e){var t=function(){var e="#main_toolbar";MINDMAP.$toolbar=$(e),MAIN_TOOLBAR.init(MINDMAP,e,"MindMap"),MINDMAP.$toolbar.removeClass("disabled"),$(document).trigger("mindmap:toolbar_init")},n=function(){MINDMAP.read_only_view=!1,$.each(MINDMAP.nodes,function(e,t){t.reinit_mouse_events()}),$(".admin-lock").removeClass("locked").addClass("unlocked").attr("title","Unlocked"),$("#annotation_input").attr("contenteditable","true"),$("#annotation_input").removeClass("readonly"),t(),$("#is_read_only").val("false")},i=function(){MINDMAP.unselect_all(),MINDMAP.read_only_view=!0,MINDMAP.$toolbar.addClass("disabled"),MINDMAP.$toolbar.find(".btn-group.open").removeClass("open"),MINDMAP.$toolbar=undefined,$.each(MINDMAP.nodes,function(e,t){t.reinit_mouse_events()}),$(".admin-lock").removeClass("unlocked").addClass("locked").attr("title","Locked"),$("#annotation_input").attr("contenteditable","false"),$("#annotation_input").addClass("readonly"),$("#is_read_only").val("true")};return e.init=function(){MINDMAP.read_only_view||n(),ADMIN_LOCK.show_lock(),PAGE_EVENTS.on("admin:lock",i),PAGE_EVENTS.on("admin:unlock",n)},e}(MINDMAP_ADMIN_LOCK||{}),MINDMAP=function(e){return e.get_mind_map_id=function(){return $.trim($("#mind_map_id").val())},e.create_node_on_server_triggered_undo_button=function(t,n,i){"undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.plainBlockUI(),$.ajax({type:"POST",url:Routes.mind_map_nodes_path(e.get_mind_map_id()),data:{node:{parent_id:t.get_parent_node_id(),color:t.get_color(),text:t.get_text(),text_color:t.get_text_color(),text_size:t.get_text_size(),text_bold:t.is_bold(),text_italic:t.is_italic(),text_font:t.get_text_font_key(),x_pos:t.get_x(),y_pos:t.get_y(),width:t.get_width(),height:t.get_height(),shape:t.get_shape().get_shape(),outline:t.is_outline_only(),media_id:t.get_media_id()}},success:function(a){var s=JSON.parse(a);t.set_id(s.id),n.length&&(n.forEach(function(e){t.add_annotation(e)}),t.update_annotation_icon()),e.nodes[s.id]=t,delete e.nodes[-1],"redo"===i?e.add_to_undo_queue("create",{node_id:s.id},"mind_map_node",[],!0):"undo"===i&&e.add_to_redo_queue("create",{node_id:s.id},"mind_map_node"),s.media&&(t.set_media(s.media),t.render_media(!0),t.reinit_mouse_events(),t.update())},complete:function(){$.unblockUI(),"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html"})},e.create_node_on_server=function(t){"undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.ajax({type:"POST",url:Routes.mind_map_nodes_path(e.get_mind_map_id()),data:{node:{parent_id:t.get_parent_node_id(),color:t.get_color(),text:t.get_text(),text_color:t.get_text_color(),text_size:t.get_text_size(),text_bold:t.is_bold(),text_italic:t.is_italic(),text_font:t.get_text_font_key(),x_pos:t.get_x(),y_pos:t.get_y(),width:t.get_width(),height:t.get_height(),shape:t.get_shape().get_shape(),media_id:t.get_media_id()}},success:function(n){var i=JSON.parse(n);t.set_id(i.id),e.nodes[i.id]=t,delete e.nodes[-1],e.unselect_all(),e.selected_nodes[0]=t,e.nodes[i.id].select(),$.unblockUI(),e.selector.update(),e.selector.show(),e.is_iOS||e.text_input_handler.set_node(t),e.add_to_undo_queue("create",{node_id:i.id},"mind_map_node",arguments)},complete:function(){"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html"})},e.update_node_on_server=function(t){var n=t.get_id(),i=$.trim(t.get_text());n&&-1!=n&&("undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.ajax({type:"PUT",url:Routes.mind_map_node_path(e.get_mind_map_id(),t.get_id()),data:{node:{parent_id:t.get_parent_node_id(),color:t.get_color(),text:i,text_color:t.get_text_color(),text_size:t.get_text_size(),text_bold:t.is_bold(),text_italic:t.is_italic(),text_font:t.get_text_font_key(),x_pos:t.get_x(),y_pos:t.get_y(),width:t.get_width(),height:t.get_height(),outline:t.is_outline_only(),shape:t.get_shape().get_shape(),abstract_connected_node_ids:t.get_abstract_connected_node_ids(),is_central_node:t.is_central_node()}},success:function(t){var n=JSON.parse(t);if(typeof n.rename!==undefined){var i=e.get_root_node();0==n.rename?(i&&i.set_text&&(i.set_text(n.title),i.resize_to_text(),e.update_node_on_server(i)),$.jGrowl(I18n.t("study_aids.rename.errored"))):"undefined"!=typeof n.title&&(n.title||(n.title=I18n.t("study_aids.untitled"),n.untitled=!0),document.title=I18n.t("titles.site")+" - "+n.title,$.jGrowl(I18n.t("study_aids.rename.success")),$(document).trigger("study_aid.update_meta",[n,!0]))}},error:function(e){var t=JSON.parse(e.responseText);t.errors.mind_map_title_uniqueness&&$.jGrowl(t.errors.mind_map_title_uniqueness[0])},complete:function(){"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html"}))},e.batch_update_nodes_on_server=function(t){if(t.length){var n=[];"undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.each(t,function(e,t){var i=$.trim(t.get_text()),a=t.get_id();a&&-1!==a&&n.push({id:a,parent_id:t.get_parent_node_id(),color:t.get_color(),text:i,text_color:t.get_text_color(),text_size:t.get_text_size(),text_bold:t.is_bold(),text_italic:t.is_italic(),text_font:t.get_text_font_key(),x_pos:t.get_x(),y_pos:t.get_y(),width:t.get_width(),height:t.get_height(),outline:t.is_outline_only(),shape:t.get_shape().get_shape()})}),$.ajax({type:"PUT",url:Routes.mind_map_nodes_path(e.get_mind_map_id()),data:JSON.stringify({nodes:n}),complete:function(){"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html",contentType:"application/json"})}},e.delete_nodes_on_server=function(t){"undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.ajax({type:"DELETE",url:Routes.batch_destroy_mind_map_nodes_path(e.get_mind_map_id()),data:{ids:t},success:function(){"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html"})},e.update_config_on_server=function(t,n){"undefined"!=typeof e.save_indicator&&e.save_indicator.loading(),$.ajax({type:"POST",url:Routes.update_config_mind_map_path(t,{locale:I18n.locale}),data:{config:n},complete:function(){"undefined"!=typeof e.save_indicator&&e.save_indicator.saved()},dataType:"html"})},e}(MINDMAP||{}),MINDMAP=function(e){return e.Annotation=function(t,n){var i=n.id,a=t,s=n.content;n.author;this.get_content=function(){return s},this.get_id=function(){return i},this.set_content=function(e){s=e},this.save=function(){void 0===i?$.ajax({type:"POST",url:Routes.create_and_attach_annotation_mind_map_node_path(e.get_mind_map_id(),{id:a.get_id()}),data:{annotation:{content:s}},success:function(e){i=e.id},error:function(e){var t=JSON.parse(e.responseText),n=I18n.t("mind_maps.annotations.error_saving")+": "+t.errors.join(", ");$.jGrowl(n)},dataType:"json"}):$.ajax({type:"PUT",url:Routes.annotation_path(i),data:{annotation:{content:s}},success:function(){},error:function(e){var t=JSON.parse(e.responseText),n=I18n.t("mind_maps.annotations.error_saving")+": "+t.errors.join(", ");$.jGrowl(n)},dataType:"json"})},this.remove=function(){$.ajax({type:"DELETE",url:Routes.annotation_path(i),success:function(){},error:function(e){var t=JSON.parse(e.responseText),n=I18n.t("mind_maps.annotations.error_removing")+": "+t.errors.join(", ");$.jGrowl(n)},dataType:"json"})}},e}(MINDMAP||{});
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,i){var a,s=e.ui[t].prototype;for(a in i)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([n,i[a]])},call:function(e,t,n,i){var a,s=e.plugins[t];if(s&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<s.length;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,n)}}}),
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return t[i]>0||(t[i]=1,a=t[i]>0,t[i]=0,a)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,a,s,o=this.options,r=this;if(this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)a="ui-resizable-"+(t=e.trim(i[n])),s=e("<div>"),this._addClass(s,"ui-resizable-handle "+a),s.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var n,i,a,s;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),a=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(a,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,a=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(t){var n,i,a,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,i+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,a=this.originalMousePosition,s=this.axis,o=t.pageX-a.left||0,r=t.pageY-a.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,a,s,o,r,l,c=this.options,d=this;return this._helper&&(a=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:d.sizeDiff.height,s=i?0:d.sizeDiff.width,o={width:d.helper.width()-s,height:d.helper.height()-a},r=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,l=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(o,{top:l,left:r})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,a,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,i=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,a=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),i>s.minHeight&&(s.minHeight=i),n<s.maxWidth&&(s.maxWidth=n),a<s.maxHeight&&(s.maxHeight=a)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),s&&c&&(e.left=r-t.minWidth),i&&c&&(e.left=r-t.maxWidth),o&&d&&(e.top=l-t.minHeight),a&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(a[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,a=n._proportionallyResizeElements,s=a.length&&/textarea/i.test(a[0].nodeName),o=s&&n._hasScroll(a[0],"left")?0:n.sizeDiff.height,r=s?0:n.sizeDiff.width,l={width:n.size.width-r,height:n.size.height-o},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,d=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};a&&a.length&&e(a[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,a,s,o,r,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,_=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;_&&(l.containerElement=e(_),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(_),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,a=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(_,"left")?_.scrollWidth:s,r=l._hasScroll(_)?_.scrollHeight:a,l.parentData={element:_,left:i.left,top:i.top,width:o,height:r}))},resize:function(t){var n,i,a,s,o=e(this).resizable("instance"),r=o.options,l=o.containerOffset,c=o.position,d=o._aspectRatio||t.shiftKey,u={top:0,left:0},_=o.containerElement,h=!0;_[0]!==document&&/static/.test(_.css("position"))&&(u=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),d&&(o.size.height=o.size.width/o.aspectRatio,h=!1),o.position.left=r.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),d&&(o.size.width=o.size.height*o.aspectRatio,h=!1),o.position.top=o._helper?l.top:0),a=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),a&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-l.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-l.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,d&&(o.size.height=o.size.width/o.aspectRatio,h=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,d&&(o.size.width=o.size.height*o.aspectRatio,h=!1)),h||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,a=t.containerPosition,s=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:r.left-a.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:r.left-a.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),a=i.options,s=i.originalSize,o=i.originalPosition,r={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0};e(a.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),a={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(i[t]||0)+(r[t]||0);n&&n>=0&&(a[t]=n||null)}),t.css(a)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,a=n.size,s=n.originalSize,o=n.originalPosition,r=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,d=l[1]||1,u=Math.round((a.width-s.width)/c)*c,_=Math.round((a.height-s.height)/d)*d,h=s.width+u,p=s.height+_,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=l,g&&(h+=c),v&&(p+=d),f&&(h-=c),m&&(p-=d),/^(se|s|e)$/.test(r)?(n.size.width=h,n.size.height=p):/^(ne)$/.test(r)?(n.size.width=h,n.size.height=p,n.position.top=o.top-_):/^(sw)$/.test(r)?(n.size.width=h,n.size.height=p,n.position.left=o.left-u):((p-d<=0||h-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-d>0?(n.size.height=p,n.position.top=o.top-_):(p=d-t.height,n.size.height=p,n.position.top=o.top+s.height-p),h-c>0?(n.size.width=h,n.position.left=o.left-u):(h=c-t.width,n.size.width=h,n.position.left=o.left+s.width-h))}}),e.ui.resizable}),
/**
 * Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.1-dev
 * Build date: 20 May 2015
 */
function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}(function(){function e(e,t){var n=typeof e[t];return n==x||!(n!=w||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=w||!e[t])}function n(e,t){return typeof e[t]!=S}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function a(e){return e&&E(e,k)&&I(e,C)}function s(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function o(t){typeof console!=S&&e(console,"log")&&console.log(t)}function r(e,t){R&&t?alert(e):o(e)}function l(e){O.initialized=!0,O.supported=!1,r("Rangy is not supported in this environment. Reason: "+e,O.config.alertOnFail)}function c(e){r("Rangy warning: "+e,O.config.alertOnWarn)}function d(e){return e.message||e.description||String(e)}function u(){if(R&&!O.initialized){var t,n=!1,i=!1;e(document,"createRange")&&(t=document.createRange(),E(t,M)&&I(t,T)&&(n=!0));var r=s(document);if(r&&"body"==r.nodeName.toLowerCase())if(r&&e(r,"createTextRange")&&a(t=r.createTextRange())&&(i=!0),n||i){var c;for(var u in O.initialized=!0,O.features={implementsDomRange:n,implementsTextRange:i},P)(c=P[u])instanceof f&&c.init(c,O);for(var _=0,h=z.length;_<h;++_)try{z[_](O)}catch(p){o("Rangy init listener threw an exception. Continuing. Detail: "+d(p))}}else l("Neither Range nor TextRange are available");else l("No body element found")}}function _(e,t,n){n&&(e+=" in module "+n.name),O.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function h(e,t,n,i){e[t]=function(){return _(t,n,i),e[n].apply(e,$.toArray(arguments))}}function p(e){e=e||window,u();for(var t=0,n=N.length;t<n;++t)N[t](e)}function f(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n){var i=new f(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(O,t),t.supported=!0}catch(i){o("Module '"+e+"' failed to load: "+d(i)),i.stack&&o(i.stack)}}});return P[e]=i,i}function g(){}function v(){}var b,y,w="object",x="function",S="undefined",T=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],M=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],C=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],k=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],E=i(e),A=i(t),I=i(n),D=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,i=e.length;n<i;++n)t(e[n],n)},P={},R=typeof window!=S&&typeof document!=S,$={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:E,areHostObjects:A,areHostProperties:I,isTextRange:a,getBody:s,forEach:D},O={version:"1.3.1-dev",initialized:!1,isBrowser:R,supported:!0,util:$,features:{},modules:P,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==S||rangyAutoInitialize}};O.fail=l,O.warn=c,!{}.hasOwnProperty?l("hasOwnProperty not supported"):($.extend=b=function(e,t,n){var i,a;for(var s in t)t.hasOwnProperty(s)&&(i=e[s],a=t[s],n&&null!==i&&"object"==typeof i&&null!==a&&"object"==typeof a&&b(i,a,!0),e[s]=a);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},$.createOptions=function(e,t){var n={};return b(n,t),e&&b(n,e),n}),R||l("Rangy can only run in a browser"),function(){var e;if(R){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(i){}}e||(e=function(e){for(var t=[],n=0,i=e.length;n<i;++n)t[n]=e[n];return t}),$.toArray=e}(),R&&(e(document,"addEventListener")?y=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?y=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),$.addListener=y);var z=[];$.deprecationNotice=_,$.createAliasForDeprecatedMethod=h,O.init=u,O.addInitListener=function(e){O.initialized?e(O):z.push(e)};var N=[];O.addShimListener=function(e){N.push(e)},R&&(O.shim=O.createMissingNativeApi=p,h(O,"createMissingNativeApi","shim")),f.prototype={init:function(){for(var e,t,n=this.dependencies||[],i=0,a=n.length;i<a;++i){if(t=n[i],!((e=P[t])&&e instanceof f))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){O.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){O.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},O.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var i=m(e,n,t);O.initialized&&O.supported&&i.init()},O.createCoreModule=function(e,t,n){m(e,t,n)},O.RangePrototype=g,O.rangePrototype=new g,O.selectionPrototype=new v,O.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==D||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function a(e){for(var t=0;e=e.previousSibling;)++t;return t}function s(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function o(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(N(i,n))return n;return null}function r(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t){return r(e,t,!0)}function c(e,t,n){for(var i,a=n?e:e.parentNode;a;){if((i=a.parentNode)===t)return a;a=i}return null}function d(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function _(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function h(e,t,n){var i=e.cloneNode(!1);if(i.deleteData(0,t),e.deleteData(t,e.length-t),_(i,e),n)for(var s,o=0;s=n[o++];)s.node==e&&s.offset>t?(s.node=i,s.offset-=t):s.node==e.parentNode&&s.offset>a(e)&&++s.offset;return i}function p(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=D)return e.ownerDocument;if(typeof e.document!=D)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function f(e){var n=p(e);if(typeof n.defaultView!=D)return n.defaultView;if(typeof n.parentWindow!=D)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=D)return e.contentDocument;if(typeof e.contentWindow!=D)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function g(e){if(typeof e.contentWindow!=D)return e.contentWindow;if(typeof e.contentDocument!=D)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function v(e){return e&&P.isHostMethod(e,"setTimeout")&&P.isHostObject(e,"document")}function b(e,t,n){var i;if(e?P.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):p(e):v(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i}function y(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,i,s){var r,l,d,u,_;if(e==i)return n===s?0:n<s?-1:1;if(r=c(i,e,!0))return n<=a(r)?-1:1;if(r=c(e,i,!0))return a(r)<s?-1:1;if(!(l=o(e,i)))throw new Error("comparePoints error: nodes have no common ancestor");if((d=e===l?l:c(e,l,!0))===(u=i===l?l:c(i,l,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(_=l.firstChild;_;){if(_===d)return-1;if(_===u)return 1;_=_.nextSibling}}function x(e){try{return e.parentNode,!1}catch(t){return!0}}function S(e){if(!e)return"[No node]";if(j&&x(e))return"[Broken node]";if(d(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+a(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function T(e){for(var t,n=p(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function M(e,t,n){var i=R(e),a=e.createElement("div");a.contentEditable=""+!!n,t&&(a.innerHTML=t);var s=i.firstChild;return s?i.insertBefore(a,s):i.appendChild(a),a}function C(e){return e.parentNode.removeChild(e)}function k(e){this.root=e,this._next=e}function E(e){return new k(e)}function A(e,t){this.node=e,this.offset=t}function I(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var D="undefined",P=e.util,R=P.getBody;P.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),P.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var $=document.createElement("div");P.areHostMethods($,["insertBefore","appendChild","cloneNode"]||!P.areHostObjects($,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),P.isHostProperty($,"innerHTML")||t.fail("Element is missing innerHTML property");var O=document.createTextNode("test");P.areHostMethods(O,["splitText","deleteData","insertData","appendData","cloneNode"]||!P.areHostObjects($,["previousSibling","nextSibling","childNodes","parentNode"])||!P.areHostProperties(O,["data"]))||t.fail("Incomplete Text Node implementation");var z,N=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},j=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",j=x(n),e.features.crashyTextNodes=j}(),typeof window.getComputedStyle!=D?z=function(e,t){return f(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=D?z=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),k.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+S(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},I.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},I.prototype.toString=function(){return this.message},e.dom={arrayContains:N,isHtmlNamespace:n,parentElement:i,getNodeIndex:a,getNodeLength:s,getCommonAncestor:o,isAncestorOf:r,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:d,isTextOrCommentNode:u,insertAfter:_,splitDataNode:h,getDocument:p,getWindow:f,getIframeWindow:g,getIframeDocument:m,getBody:R,isWindow:v,getContentDocument:b,getRootContainer:y,comparePoints:w,isBrokenNode:x,inspectNode:S,getComputedStyleProperty:z,createTestElement:M,removeNode:C,fragmentFromNodeChildren:T,createIterator:E,DomPosition:A},e.DOMException=I}),O.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(B(e,t.startContainer)||B(e,t.endContainer))}function n(e){return e.document||F(e.startContainer)}function i(e){return W(e.startContainer)}function a(e){return new z(e.parentNode,L(e))}function s(e){return new z(e.parentNode,L(e)+1)}function o(e,t,n){var i=11==e.nodeType?e.firstChild:e;return j(t)?n==t.length?$.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:H(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function r(e,t,i){if(T(e),T(t),n(t)!=n(e))throw new N("WRONG_DOCUMENT_ERR");var a=q(e.startContainer,e.startOffset,t.endContainer,t.endOffset),s=q(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return i?a<=0&&s>=0:a<0&&s>0}function l(e){for(var t,i,a,s=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(a=e.getSubtreeIterator(),i.appendChild(l(a)),a.detach()),10==i.nodeType)throw new N("HIERARCHY_REQUEST_ERR");s.appendChild(i)}return s}function c(e,t,n){var i,a,s,o;for(n=n||{stop:!1};s=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(s))return void(n.stop=!0);if(c(o=e.getSubtreeIterator(),t,n),o.detach(),n.stop)return}else for(i=$.createIterator(s);a=i.next();)if(!1===t(a))return void(n.stop=!0)}function d(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(d(t=e.getSubtreeIterator()),t.detach()):e.remove()}function u(e){for(var t,i,a=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach()):e.remove(),10==t.nodeType)throw new N("HIERARCHY_REQUEST_ERR");a.appendChild(t)}return a}function _(e,t,n){var i,a=!(!t||!t.length),s=!!n;a&&(i=new RegExp("^("+t.join("|")+")$"));var o=[];return c(new p(e,!1),function(t){if((!a||i.test(t.nodeType))&&(!s||n(t))){var r=e.startContainer;if(t!=r||!j(r)||e.startOffset!=r.length){var l=e.endContainer;t==l&&j(l)&&0==e.endOffset||o.push(t)}}}),o}function h(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+$.inspectNode(e.startContainer)+":"+e.startOffset+", "+$.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&j(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||j(this.sc)?V(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||j(this.ec)?V(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(e){return function(t,n){for(var i,a=n?t:t.parentNode;a;){if(i=a.nodeType,U(e,i))return a;a=a.parentNode}return null}}function m(e,t){if(ie(e,t))throw new N("INVALID_NODE_TYPE_ERR")}function g(e,t){if(!U(t,e.nodeType))throw new N("INVALID_NODE_TYPE_ERR")}function v(e,t){if(t<0||t>(j(e)?e.length:e.childNodes.length))throw new N("INDEX_SIZE_ERR")}function b(e,t){if(te(e,!0)!==te(t,!0))throw new N("WRONG_DOCUMENT_ERR")}function y(e){if(ne(e,!0))throw new N("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new N(t)}function x(e,t){return t<=(j(e)?e.length:e.childNodes.length)}function S(e){return!!e.startContainer&&!!e.endContainer&&!(Y&&($.isBrokenNode(e.startContainer)||$.isBrokenNode(e.endContainer)))&&W(e.startContainer)==W(e.endContainer)&&x(e.startContainer,e.startOffset)&&x(e.endContainer,e.endOffset)}function T(e){if(!S(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function M(e,t){T(e);var n=e.startContainer,i=e.startOffset,a=e.endContainer,s=e.endOffset,o=n===a;j(a)&&s>0&&s<a.length&&H(a,s,t),j(n)&&i>0&&i<n.length&&(n=H(n,i,t),o?(s-=i,a=n):a==n.parentNode&&s>=L(n)&&s++,i=0),e.setStartAndEnd(n,i,a,s)}function C(e){T(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function k(e){e.START_TO_START=le,e.START_TO_END=ce,e.END_TO_END=de,e.END_TO_START=ue,e.NODE_BEFORE=_e,e.NODE_AFTER=he,e.NODE_BEFORE_AND_AFTER=pe,e.NODE_INSIDE=fe}function E(e){k(e),k(e.prototype)}function A(e,t){return function(){T(this);var n,i=this.startContainer,a=this.startOffset,o=this.commonAncestorContainer,r=new p(this,!0);i!==o&&(i=(n=s(V(i,o,!0))).node,a=n.offset),c(r,y),r.reset();var l=e(r);return r.detach(),t(this,i,a,i,a),l}}function I(n,i){function o(e,t){return function(n){g(n,J),g(W(n),Q);var i=(e?a:s)(n);(t?r:l)(this,i.node,i.offset)}}function r(e,t,n){var a=e.endContainer,s=e.endOffset;t===e.startContainer&&n===e.startOffset||(W(t)==W(a)&&1!=q(t,n,a,s)||(a=t,s=n),i(e,t,n,a,s))}function l(e,t,n){var a=e.startContainer,s=e.startOffset;t===e.endContainer&&n===e.endOffset||(W(t)==W(a)&&-1!=q(t,n,a,s)||(a=t,s=n),i(e,a,s,t,n))}var c=function(){};c.prototype=e.rangePrototype,n.prototype=new c,O.extend(n.prototype,{setStart:function(e,t){m(e,!0),v(e,t),r(this,e,t)},setEnd:function(e,t){m(e,!0),v(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],a=t,s=n;switch(e.length){case 3:s=e[2];break;case 4:a=e[2],s=e[3]}i(this,t,n,a,s)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){T(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),i(this,e,0,e,G(e))},selectNode:function(e){m(e,!1),g(e,J);var t=a(e),n=s(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:A(u,i),deleteContents:A(d,i),canSurroundContents:function(){T(this),y(this.startContainer),y(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},splitBoundaries:function(){M(this)},splitBoundariesPreservingPositions:function(e){M(this,e)},normalizeBoundaries:function(){T(this);var e,t=this.startContainer,n=this.startOffset,a=this.endContainer,s=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(a=e,s=e.length,e.appendData(t.data),X(t))},r=function(e){var i=e.previousSibling;if(i&&i.nodeType==e.nodeType){t=e;var o=e.length;if(n=i.length,e.insertData(0,i.data),X(i),t==a)s+=n,a=t;else if(a==e.parentNode){var r=L(e);s==r?(a=e,s=o):s>r&&s--}}},l=!0;if(j(a))s==a.length?o(a):0==s&&(e=a.previousSibling)&&e.nodeType==a.nodeType&&(s=e.length,t==a&&(l=!1),e.appendData(a.data),X(a),a=e);else{if(s>0){var c=a.childNodes[s-1];c&&j(c)&&o(c)}l=!this.collapsed}if(l){if(j(t))0==n?r(t):n==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(a==e&&(a=t,s+=t.length),t.appendData(e.data),X(e));else if(n<t.childNodes.length){var d=t.childNodes[n];d&&j(d)&&r(d)}}else t=a,n=s;i(this,t,n,a,s)},collapseToPoint:function(e,t){m(e,!0),v(e,t),this.setStartAndEnd(e,t)}}),E(n)}function D(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:$.getCommonAncestor(e.startContainer,e.endContainer)}function P(e,t,n,i,a){e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=a,e.document=$.getDocument(t),D(e)}function R(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,D(this)}var $=e.dom,O=e.util,z=$.DomPosition,N=e.DOMException,j=$.isCharacterDataNode,L=$.getNodeIndex,B=$.isOrIsAncestorOf,F=$.getDocument,q=$.comparePoints,H=$.splitDataNode,V=$.getClosestAncestorIn,G=$.getNodeLength,U=$.arrayContains,W=$.getRootContainer,Y=e.features.crashyTextNodes,X=$.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,j(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!j(n)||n!==this.sc&&n!==this.ec?n.parentNode&&X(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new R(n(this.range));var t=this._current,i=t,a=0,s=t,o=G(t);B(t,this.sc)&&(i=this.sc,a=this.so),B(t,this.ec)&&(s=this.ec,o=this.eo),P(e,i,a,s,o)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var J=[1,3,4,5,7,8,10],Q=[2,9,11],K=[5,6,10,12],Z=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],te=f([9,11]),ne=f(K),ie=f([6,10,12]),ae=document.createElement("style"),se=!1;try{ae.innerHTML="<b>x</b>",se=3==ae.firstChild.nodeType}catch(me){}e.features.htmlParsingConforms=se;var oe=se?function(e){var t=this.startContainer,n=F(t);if(!t)throw new N("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:j(t)&&(i=$.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&$.isHtmlNamespace(F(i).documentElement)&&$.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1)).innerHTML=e,$.fragmentFromNodeChildren(i)}:function(e){var t=n(this).createElement("body");return t.innerHTML=e,$.fragmentFromNodeChildren(t)},re=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],le=0,ce=1,de=2,ue=3,_e=0,he=1,pe=2,fe=3;O.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,i,a,s;T(this),b(this.startContainer,t.startContainer);var o=e==ue||e==le?"start":"end",r=e==ce||e==le?"start":"end";return n=this[o+"Container"],i=this[o+"Offset"],a=t[r+"Container"],s=t[r+"Offset"],q(n,i,a,s)},insertNode:function(e){if(T(this),g(e,Z),y(this.startContainer),B(e,this.startContainer))throw new N("HIERARCHY_REQUEST_ERR");var t=o(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(T(this),this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&j(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=n(this).createDocumentFragment()).appendChild(e),t;var i=new p(this,!0);return e=l(i),i.detach(),e},canSurroundContents:function(){T(this),y(this.startContainer),y(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(g(e,ee),!this.canSurroundContents())throw new N("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){T(this);for(var e,t=new R(n(this)),i=re.length;i--;)t[e=re[i]]=this[e];return t},toString:function(){T(this);var e=this.startContainer;if(e===this.endContainer&&j(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return c(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){T(this);var t=e.parentNode,n=L(e);if(!t)throw new N("NOT_FOUND_ERR");var i=this.comparePoint(t,n),a=this.comparePoint(t,n+1);return i<0?a>0?pe:_e:a>0?he:fe},comparePoint:function(e,t){return T(this),w(e,"HIERARCHY_REQUEST_ERR"),b(e,this.startContainer),q(e,t,this.startContainer,this.startOffset)<0?-1:q(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:oe,toHtml:function(){return C(this)},intersectsNode:function(e,t){if(T(this),W(e)!=i(this))return!1;var n=e.parentNode,a=L(e);if(!n)return!0;var s=q(n,a,this.endContainer,this.endOffset),o=q(n,a+1,this.startContainer,this.startOffset);return t?s<=0&&o>=0:s<0&&o>0},isPointInRange:function(e,t){return T(this),w(e,"HIERARCHY_REQUEST_ERR"),b(e,this.startContainer),q(e,t,this.startContainer,this.startOffset)>=0&&q(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return r(this,e,!1)},intersectsOrTouchesRange:function(e){return r(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=q(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=q(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==q(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==q(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new N("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==fe},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,G(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();return t.setEnd(i,i.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return T(this),_(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var i=n(this),a=e.createRange(i);t=t||$.getBody(i),a.selectNodeContents(t);var s=this.intersection(a),o=0,r=0;return s&&(a.setEnd(s.startContainer,s.startOffset),r=(o=a.toString().length)+s.toString().length),{start:o,end:r,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var i,a,s,o,r=[t],l=!1,c=!1;!c&&(i=r.pop());)if(3==i.nodeType)a=n+i.length,!l&&e.start>=n&&e.start<=a&&(this.setStart(i,e.start-n),l=!0),l&&e.end>=n&&e.end<=a&&(this.setEnd(i,e.end-n),c=!0),n=a;else for(s=(o=i.childNodes).length;s--;)r.push(o[s])},getName:function(){return"DomRange"},equals:function(e){return R.rangesEqual(this,e)},isValid:function(){return S(this)},inspect:function(){return h(this)},detach:function(){}}),I(R,P),O.extend(R,{rangeProperties:re,RangeIterator:p,copyComparisonConstants:E,createPrototypeRange:I,inspect:h,toHtml:C,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=R}),O.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,i,a=e.dom,s=e.util,o=a.DomPosition,r=e.DomRange,l=a.getBody,c=a.getContentDocument,d=a.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function i(e){for(var t,n=_.length;n--;)e[t=_[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function o(e,t,n,i,a){var s=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==i||e.endOffset!=a,r=!e.equals(e.nativeRange);(s||o||r)&&(e.setEnd(i,a),e.setStart(t,n))}var d,u,_=r.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},r.createPrototypeRange(n,o),(d=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),i(this)},d.cloneContents=function(){return this.nativeRange.cloneContents()},d.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},d.collapse=function(e){this.nativeRange.collapse(e),i(this)},d.cloneRange=function(){return new n(this.nativeRange.cloneRange())},d.refresh=function(){i(this)},d.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");l(document).appendChild(h);var p=document.createRange();p.setStart(h,0),p.setEnd(h,0);try{p.setStart(h,1),d.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},d.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},u=function(e){return function(t){this.nativeRange[e](t),i(this)}}}catch(b){d.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(b){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},d.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(b){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},u=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(b){this.nativeRange[t](n),this.nativeRange[e](n)}i(this)}}}d.setStartBefore=u("setStartBefore","setEndBefore"),d.setStartAfter=u("setStartAfter","setEndAfter"),d.setEndBefore=u("setEndBefore","setStartBefore"),d.setEndAfter=u("setEndAfter","setStartAfter"),d.selectNodeContents=function(e){this.setStartAndEnd(e,0,a.getNodeLength(e))},p.selectNodeContents(h),p.setEnd(h,3);var f=document.createRange();f.selectNodeContents(h),f.setEnd(h,4),f.setStart(h,2),-1==p.compareBoundaryPoints(p.START_TO_END,f)&&1==p.compareBoundaryPoints(p.END_TO_START,f)?d.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:d.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var g=m.firstChild,v=l(document);v.appendChild(m),p.setStart(g,1),p.setEnd(g,2),p.deleteContents(),"13"==g.data&&(d.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},d.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),v.removeChild(m),v=null,s.isHostMethod(p,"createContextualFragment")&&(d.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(h),d.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=c(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var s=n.parentElement(),o=i==s?i:a.getCommonAncestor(i,s);return o==t?o:a.getCommonAncestor(t,o)},_=function(e){return 0==e.compareEndPoints("StartToEnd",e)},h=function(e,t,n,i,s){var r=e.duplicate();r.collapse(n);var l=r.parentElement();if(a.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var c=new o(l.parentNode,a.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var u=a.getDocument(l).createElement("span");u.parentNode&&a.removeNode(u);for(var _,h,p,f,m,g=n?"StartToStart":"StartToEnd",v=s&&s.containerElement==l?s.nodeIndex:0,b=l.childNodes.length,y=b,w=y;w==b?l.appendChild(u):l.insertBefore(u,l.childNodes[w]),r.moveToElementText(u),0!=(_=r.compareEndPoints(g,e))&&v!=y;){if(-1==_){if(y==v+1)break;v=w}else y=y==v+1?v:w;w=Math.floor((v+y)/2),l.removeChild(u)}if(m=u.nextSibling,-1==_&&m&&d(m)){var x;if(r.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(m.data)){var S=r.duplicate(),T=S.text.replace(/\r\n/g,"\r").length;for(x=S.moveStart("character",T);-1==(_=S.compareEndPoints("StartToEnd",S));)x++,S.moveStart("character",1)}else x=r.text.length;f=new o(m,x)}else h=(i||!n)&&u.previousSibling,f=(p=(i||n)&&u.nextSibling)&&d(p)?new o(p,0):h&&d(h)?new o(h,h.data.length):new o(l,a.getNodeIndex(u));return a.removeNode(u),{boundaryPosition:f,nodeInfo:{nodeIndex:w,containerElement:l}}},p=function(e,t){var n,i,s,o,r=e.offset,c=a.getDocument(e.node),u=l(c).createTextRange(),_=d(e.node);return _?i=(n=e.node).parentNode:(n=r<(o=e.node.childNodes).length?o[r]:null,i=e.node),(s=c.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(s,n):i.appendChild(s),u.moveToElementText(s),u.collapse(!t),i.removeChild(s),_&&u[t?"moveStart":"moveEnd"]("character",r),u};(i=function(e){this.textRange=e,this.refresh()}).prototype=new r(document),i.prototype.refresh=function(){var e,t,n,i=u(this.textRange);_(this.textRange)?t=e=h(this.textRange,i,!0,!0).boundaryPosition:(e=(n=h(this.textRange,i,!0,!1)).boundaryPosition,t=h(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},r.copyComparisonConstants(i);var f=function(e){if(e.collapsed)return p(new o(e.startContainer,e.startOffset),!0);var t=p(new o(e.startContainer,e.startOffset),!0),n=p(new o(e.endContainer,e.endOffset),!1),i=l(r.getRangeDocument(e)).createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=f,i.prototype.toTextRange=function(){return f(this)},e.WrappedTextRange=i,!e.features.implementsDomRange||e.config.preferTextRange){var m=Function("return this;")()
;"undefined"==typeof m.Range&&(m.Range=i),e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=i}}e.createRange=function(n){return n=c(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=c(e,t,"createRangyRange"),new r(e)},s.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),s.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),O.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function i(e,n){if(e){if(E.isWindow(e))return e;if(e instanceof g)return e.win;var i=E.getContentDocument(e,t,n);return E.getWindow(i)}return window}function a(e){return i(e,"getWinSelection").getSelection()}function s(e){return i(e,"getDocSelection").document.selection}function o(e){var t=!1;return e.anchorNode&&(t=1==E.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function r(e,t,n){var i=n?"end":"start",a=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[a+"Container"],e.focusOffset=t[a+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function d(t){var n;return t instanceof D?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof P?n=t.nativeRange:O.implementsDomRange&&t instanceof E.getWindow(t.startContainer).Range&&(n=t),n}function u(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!E.isAncestorOf(e[0],e[t]))return!1;return!0}function _(e){var n=e.getNodes();if(!u(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function h(e){return!!e&&"undefined"!=typeof e.text}function p(e,t){var n=new P(t);e._ranges=[n],r(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function f(t){if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else{var n=t.docSelection.createRange();if(h(n))p(t,n);else{t.rangeCount=n.length;for(var i,a=N(n.item(0)),s=0;s<t.rangeCount;++s)(i=e.createRange(a)).selectNode(n.item(s)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,n){for(var i=e.docSelection.createRange(),a=_(n),s=N(i.item(0)),o=j(s).createControlRange(),r=0,l=i.length;r<l;++r)o.add(i.item(r));try{o.add(a)}catch(c){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),f(e)}function g(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function b(e,t){for(var n,i,a=te.length;a--;)if(i=(n=te[a]).selection,"deleteAll"==t)v(i);else if(n.win==e)return"delete"==t?(te.splice(a,1),!0):i;return"deleteAll"==t&&(te.length=0),null}function y(e,n){for(var i,a=N(n[0].startContainer),s=j(a).createControlRange(),o=0,r=n.length;o<r;++o){i=_(n[o]);try{s.add(i)}catch(l){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}s.select(),f(e)}function w(e,t){if(e.win.document!=N(t))throw new R("WRONG_DOCUMENT_ERR")}function x(t){return function(n,i){var a;this.rangeCount?(a=this.getRangeAt(0))["set"+(t?"Start":"End")](n,i):(a=e.createRange(this.win.document)).setStartAndEnd(n,i),this.setSingleRange(a,this.isBackward())}}function S(e){var t=[],n=new $(e.anchorNode,e.anchorOffset),i=new $(e.focusNode,e.focusOffset),a="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var s=0,o=e.rangeCount;s<o;++s)t[s]=D.inspect(e.getRangeAt(s));return"["+a+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.config.checkSelectionRanges=!0;var T,M,C="boolean",k="number",E=e.dom,A=e.util,I=A.isHostMethod,D=e.DomRange,P=e.WrappedRange,R=e.DOMException,$=E.DomPosition,O=e.features,z="Control",N=E.getDocument,j=E.getBody,L=D.rangesEqual,B=I(window,"getSelection"),F=A.isHostObject(document,"selection");O.implementsWinGetSelection=B,O.implementsDocSelection=F;var q=F&&(!B||e.config.preferTextRange);if(q)T=s,e.isSelectionValid=function(e){var t=i(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||N(n.createRange().parentElement())==t};else{if(!B)return t.fail("Neither document.selection or window.getSelection() detected."),!1;T=a,e.isSelectionValid=function(){return!0}}e.getNativeSelection=T;var H=T();if(!H)return t.fail("Native selection was null (possibly issue 138?)"),!1;var V=e.createNativeRange(document),G=j(document),U=A.areHostProperties(H,["anchorNode","focusNode","anchorOffset","focusOffset"]);O.selectionHasAnchorAndFocus=U;var W=I(H,"extend");O.selectionHasExtend=W;var Y=typeof H.rangeCount==k;O.selectionHasRangeCount=Y;var X=!1,J=!0,Q=W?function(t,n){var i=D.getRangeDocument(n),a=e.createRange(i);a.collapseToPoint(n.endContainer,n.endOffset),t.addRange(d(a)),t.extend(n.startContainer,n.startOffset)}:null;A.areHostMethods(H,["addRange","getRangeAt","removeAllRanges"])&&typeof H.rangeCount==k&&O.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,i=n>1,a=[],s=o(t),r=0;r<n;++r)a[r]=t.getRangeAt(r);var l=E.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("\xa0\xa0\xa0")),d=document.createRange();if(d.setStart(c,1),d.collapse(!0),t.removeAllRanges(),t.addRange(d),J=1==t.rangeCount,t.removeAllRanges(),!i){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)X=!1;else{var _=d.cloneRange();d.setStart(c,0),_.setEnd(c,3),_.setStart(c,2),t.addRange(d),t.addRange(_),X=2==t.rangeCount}}for(E.removeNode(l),t.removeAllRanges(),r=0;r<n;++r)0==r&&s?Q?Q(t,a[r]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(a[r])):t.addRange(a[r])}}(),O.selectionSupportsMultipleRanges=X,O.collapsedNonEditableSelectionsSupported=J;var K,Z,ee=!1;G&&I(G,"createControlRange")&&(K=G.createControlRange(),A.areHostProperties(K,["item","add"])&&(ee=!0)),O.implementsControlRange=ee,M=U?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},I(H,"getRangeAt")?Z=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:U&&(Z=function(t){var n=N(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),g.prototype=e.selectionPrototype;var te=[],ne=function(e){if(e&&e instanceof g)return e.refresh(),e;var t=b(e=i(e,"getNativeSelection")),n=T(e),a=F?s(e):null;return t?(t.nativeSelection=n,t.docSelection=a,t.refresh()):(t=new g(n,a,e),te.push({win:e,selection:t})),t};e.getSelection=ne,A.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var ie,ae=g.prototype;if(!q&&U&&A.areHostMethods(H,["removeAllRanges","addRange"])){ae.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var se=function(e,t){Q(e.nativeSelection,t),e.refresh()};ae.addRange=Y?function(t,i){if(ee&&F&&this.docSelection.type==z)m(this,t);else if(n(i)&&W)se(this,t);else{var a;X?a=this.rangeCount:(this.removeAllRanges(),a=0);var s=d(t).cloneRange();try{this.nativeSelection.addRange(s)}catch(l){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==a+1){if(e.config.checkSelectionRanges){var o=Z(this.nativeSelection,this.rangeCount-1);o&&!L(o,t)&&(t=new P(o))}this._ranges[this.rangeCount-1]=t,r(this,t,oe(this.nativeSelection)),this.isCollapsed=M(this)}else this.refresh()}}:function(e,t){n(t)&&W?se(this,e):(this.nativeSelection.addRange(d(e)),this.refresh())},ae.setRanges=function(e){if(ee&&F&&e.length>1)y(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(I(H,"empty")&&I(V,"select")&&ee&&q))return t.fail("No means of selecting a Range or TextRange was found"),!1;ae.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=N(this.anchorNode);else if(this.docSelection.type==z){var t=this.docSelection.createRange();t.length&&(e=N(t.item(0)))}if(e)j(e).createTextRange().select(),this.docSelection.empty()}}catch(n){}c(this)},ae.addRange=function(t){this.docSelection.type==z?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,t,!1))},ae.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?y(this,e):t&&this.addRange(e[0])}}if(ae.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new R("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},q)ie=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=j(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==z?f(t):h(n)?p(t,n):c(t)};else if(I(H,"getRangeAt")&&typeof H.rangeCount==k)ie=function(t){if(ee&&F&&t.docSelection.type==z)f(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;n<i;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],oe(t.nativeSelection)),t.isCollapsed=M(t)}else c(t)};else{if(!U||typeof H.isCollapsed!=C||typeof V.collapsed!=C||!O.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ie=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=Z(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=M(e)):c(e)}}ae.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(ie(this),e){var a=t.length;if(a!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;a--;)if(!L(t[a],this._ranges[a]))return!0;return!1}};var oe,re=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var i=0,a=n.length;i<a;++i)L(t,n[i])||e.addRange(n[i]);e.rangeCount||c(e)};ae.removeRange=ee&&F?function(e){if(this.docSelection.type==z){for(var t=this.docSelection.createRange(),n=_(e),i=N(t.item(0)),a=j(i).createControlRange(),s=!1,o=0,r=t.length;o<r;++o)t.item(o)!==n||s?a.add(t.item(o)):s=!0;a.select(),f(this)}else re(this,e)}:function(e){re(this,e)},!q&&U&&O.implementsDomRange?(oe=o,ae.isBackward=function(){return oe(this)}):oe=ae.isBackward=function(){return!1},ae.isBackwards=ae.isBackward,ae.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},ae.collapse=function(t,n){w(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},ae.collapseToStart=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ae.collapseToEnd=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ae.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},ae.deleteFromDocument=function(){if(ee&&F&&this.docSelection.type==z){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),E.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,a=n.length;i<a;++i)n[i].deleteContents();this.addRange(n[a-1])}}},ae.eachRange=function(e,t){for(var n=0,i=this._ranges.length;n<i;++n)if(e(this.getRangeAt(n)))return t},ae.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ae.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ae.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(i){n.push(i[e].apply(i,t||[]))}),n},ae.setStart=x(!0),ae.setEnd=x(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},ae.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ae.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},ae.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ae.moveToBookmark=function(t){for(var n,i,a=[],s=0;n=t.rangeBookmarks[s++];)(i=e.createRange(this.win)).moveToBookmark(n),a.push(i);t.backward?this.setSingleRange(a[0],"backward"):this.setRanges(a)},ae.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ae.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},ae.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(D.toHtml(t))}),e.join("")},O.implementsTextRange&&(ae.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(h(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ae.getName=function(){return"WrappedSelection"},ae.inspect=function(){return S(this)},ae.detach=function(){b(this.win,"delete"),v(this)},g.detachAll=function(){b(null,"deleteAll")},g.inspect=S,g.isDirectionBackward=n,e.Selection=g,e.selectionPrototype=ae,e.addShimListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})});var j=!1,L=function(){j||(j=!0,!O.initialized&&O.config.autoInitialize&&u())};return R&&("complete"==document.readyState?L():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",L,!1),y(window,"load",L))),O},this),
/**
 * Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.1-dev
 * Build date: 20 May 2015
 */
function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function i(e,t){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=p.getDocument(e.startContainer),s=e.cloneRange();return s.collapse(t),(n=a.createElement("span")).id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(a.createTextNode(g)),s.insertNode(n),n}function a(e,i,a,s){var o=n(a,e);o?(i[s?"setStartBefore":"setEndBefore"](o),f(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function s(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function o(t,n){var a,s=e.DomRange.getRangeDocument(t),o=t.toString(),r=m(n);return t.collapsed?{document:s,markerId:(a=i(t,!1)).id,collapsed:!0}:(a=i(t,!1),{document:s,startMarkerId:i(t,!0).id,endMarkerId:a.id,collapsed:!1,backward:r,toString:function(){return"original text: '"+o+"', new text: '"+t.toString()+"'"}})}function r(i,s){var o=i.document;void 0===s&&(s=!0);var r=e.createRange(o);if(i.collapsed){var l=n(i.markerId,o);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(f(l),r.collapseToPoint(c,c.length)):(r.collapseBefore(l),f(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else a(o,r,i.startMarkerId,!0),a(o,r,i.endMarkerId,!1);return s&&r.normalizeBoundaries(),r}function l(t,i){var a,r,l=[],c=m(i);(t=t.slice(0)).sort(s);for(var d=0,u=t.length;d<u;++d)l[d]=o(t[d],c);for(d=u-1;d>=0;--d)a=t[d],r=e.DomRange.getRangeDocument(a),a.collapsed?a.collapseAfter(n(l[d].markerId,r)):(a.setEndBefore(n(l[d].endMarkerId,r)),a.setStartAfter(n(l[d].startMarkerId,r)));return l}function c(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var i=e.getSelection(n),a=i.getAllRanges(),s=1==a.length&&i.isBackward(),o=l(a,s);return s?i.setSingleRange(a[0],s):i.setRanges(a),{win:n,rangeInfos:o,restored:!1}}function d(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=r(e[n],!0);return t}function u(t,n){if(!t.restored){var i=t.rangeInfos,a=e.getSelection(t.win),s=d(i);1==i.length&&n&&e.features.selectionHasExtend&&i[0].backward?(a.removeAllRanges(),a.addRange(s[0],!0)):a.setRanges(s),t.restored=!0}}function _(e,t){var i=n(t,e);i&&f(i)}function h(e){for(var t,n=e.rangeInfos,i=0,a=n.length;i<a;++i)(t=n[i]).collapsed?_(e.doc,t.markerId):(_(e.doc,t.startMarkerId),_(e.doc,t.endMarkerId))}var p=e.dom,f=p.removeNode,m=e.Selection.isDirectionBackward,g="\ufeff";e.util.extend(e,{saveRange:o,restoreRange:r,saveRanges:l,restoreRanges:d,saveSelection:c,restoreSelection:u,removeMarkerElement:_,removeMarkers:h})}),e},this);var MINDMAP=function(e){var t,n,i,a,s,o,r,l,c,d=.5,u=.8,_=1e4,h=-1,p=200,f=300,m=120,g=50,v=180,b=80,y=24,w=30;return $(document).on("mind_map:annotation_init",function(){t=$("#annotation_viewer"),n=t.find("#annotation_input"),c=t.find("#annotation_display"),i=t.find(".annotation_nav_next"),a=t.find(".annotation_nav_prev"),s=t.find(".annotation_nav_label"),o=t.find("#annotation_measure_area"),l=$("#hidden_text_field"),n.hide(),c.show(),c.click(function(){e.read_only_view||(c.hide(),n.show(),n.focus())}),n.blur(function(){c.html(n.html()),MathJax.Hub.Queue(["Typeset",MathJax.Hub,c[0]]),n.hide(),c.show()}),r=$("#link_preview"),n.on("mouseup keyup",function(){if(!e.read_only_view){var t=window.getSelection().anchorNode.parentNode;t&&"A"===t.nodeName?$(document).trigger("annotations:linkhighlighted",{left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight,url:t.getAttribute("href")}):$(document).trigger("annotations:linkunhighlighted")}e.text_input_handler.is_active()&&e.text_input_handler.finish_input()});var d=function(){r.hide();var e=rangy.saveSelection();n.find("a").each(function(){var e=$(this).contents();$(this).replaceWith(e)}),n.urlToLink().hashToLink(),rangy.restoreSelection(e)};n.on("keyup",function(e){if(e){var t=e.keyCode||e.which;8!==t&&32!==t&&46!==t||d()}}),n.on("mouseup",function(){if(!e.read_only_view){var t=window.getSelection().anchorNode.parentNode;t&&"A"===t.nodeName||d()}});var u=function(e,t){r.html('<a href="'+t.url+'" target="_blank">'+I18n.t("mind_maps.annotations.go_to_link")+"</a>"),r.css({top:n.offset().top+t.top+t.height+2,left:n.offset().left+t.left}),r.show()},h=function(){r.hide()};$(document).on("annotations:linkhighlighted",u),$(document).on("annotations:linkunhighlighted",h),t.resizable({minWidth:m,minHeight:g,maxWidth:f,maxHeight:p}),t.on("resizestart",function(){r.hide()});var v=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].next_annotation()},b=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].previous_annotation()},y=function(n){var i=t.attr("data-node-id");""!==i&&e.nodes[i]&&e.nodes[i].annotation_input(n)},w=function(){n.find("div").each(function(){var e=$(this).text();$(this).replaceWith("<br>"+e+"<br>")}),n.find("p").each(function(){var e=$(this).text();$(this).replaceWith("<br>"+e+"<br>")}),n.find("*").not("br").each(function(){var e=$(this).contents();$(this).replaceWith(e)}),n.text().length>_&&n.html(n.text().substring(0,_)),d()},x=function(){setTimeout(w,0)},S=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].annotation_window_scroll_fix()};i.on("click",v),a.on("click",b),n.on("keydown keyup input paste",y),n.on("paste",x),n.on("focus",function(){setTimeout(S,0)});var T=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].annotation_update_position()},M=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].close_annotation()},C=function(){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&e.nodes[n].delete_current_annotation()};$(document).on("viewbox:update",T),$(document).on("mindmap_toolbar_button_clicked",M),$(".delete_annotation").on("click",C)}),e.AnnotationsIcon=function(f,m){var g,x,S=this,T={"stroke-width":0,fill:"#999"},M=new SVG_HELPER.Icon(f,"annotation_with_content",T),C=new SVG_HELPER.Icon(f,"annotation_without_content",T),k=C,E=d;M.hide(),C.hide();var A=f.rect(0,0,w,w);A.attr({fill:"#fff",opacity:0,cursor:"pointer"}),A.hide();var I=!1,D={x:10,y:-5},P=!1,R=function(){m.has_annotations()?(k=M,E=u):(k=C,E=d)},O=function(){var t=m.get_annotations().length;s.find(".current").text(h+1),s.find(".total").text(t),h+1>t?(s.find(".nav_numbers").hide(),s.find(".new_annotation").show()):(s.find(".nav_numbers").show(),s.find(".new_annotation").hide()),h+1>=t?e.read_only_view?(i.find(".new_button").hide(),i.find(".next_button").show(),i.addClass("inactive")):(i.find(".new_button").show(),i.find(".next_button").hide(),""===$.trim(n.text())?i.addClass("inactive"):i.removeClass("inactive")):(i.removeClass("inactive"),i.find(".new_button").hide(),i.find(".next_button").show()),0===h?a.addClass("inactive"):a.removeClass("inactive")},z=function(){var e=m.get_annotations();if(r.hide(),h<e.length){var t=e[h].get_content().replace(/\r|\n/g,"<br>");n.html(t),c.html(t),MathJax.Hub.Queue(["Typeset",MathJax.Hub,c[0]])}else undefined,n.text(""),c.click();c.urlToLink().hashToLink(),n.urlToLink().hashToLink(),k.hide(),R(),j(),k.show(),O()};this.next=function(){if(!i.hasClass("inactive")){var t=!1;e.read_only_view||""!==$.trim(n.text())||(t=!0),H(),t||(h+=1),z()}},this.previous=function(){h>0&&(H(),h-=1),z()};var N=function(){var e=n.html();o.css({width:n.innerWidth()}),o.html(e);var i=n.height(),a=o.height()+18;a>i&&(a>p&&(a=p),t.css({height:a}))};this.window_scroll_fix=function(){0===$(window).scrollLeft()&&0===$(window).scrollTop()||($(window).scrollTo(0,0),e.viewbox.set_centred_at_top(g+50,x+50))},this.on_input=function(e){S.window_scroll_fix();var t=m.get_annotations().length,a=e.keyCode||e.which;if(n.text().length>=_&&8!==a&&46!==a&&!(a>=37&&a<=40))return 0===$(".jGrowl-notification:visible").length&&$.jGrowl(I18n.t("mind_maps.annotations.max_length")),void e.preventDefault();h+1>t&&(""===$.trim(n.text())?i.addClass("inactive"):i.removeClass("inactive")),N()};var j=function(){var e=m.get_shape().get_x_and_y_to_update_icon_annotation_position(w,y);g=e.x,x=e.y;var t=g,n=x-(w-y);I&&(g+=D.x,x+=D.y),k.set_position(g,x),A.transform("t"+t+","+n)};this.update=function(){k.get_path().stop(),A.stop(),k.hide(),R(),j(),O(),e.image_view||(e.read_only_view?m.has_annotations()&&m.is_revealed()&&(k.attr({opacity:E}),A.show(),k.show()):e.is_user_moving_node||(m.has_annotations()||m.is_selected()&&1===e.selected_nodes.length)&&(k.attr({opacity:E}),A.show(),k.show()))},this.reveal=function(){(m.has_annotations()||m.is_selected()&&1===e.selected_nodes.length)&&(e.is_iOS?(k.set_position(g,x),k.attr({opacity:E}),A.show(),k.show()):(k.set_position(g-16,x+16),k.attr({opacity:E}),A.show(),k.show(),k.animate({opacity:E,transform:"t"+g+","+x},100)))},this.update_position=function(){var n=e.viewbox.convert_local_position_to_relative_screen_position(g+27,x);t.css({top:n.y,left:n.x}),r.hide()};var L=function(){if(!I){var e=g,t=x-(w-y);g+=D.x,x+=D.y,k.animate({opacity:1,transform:"t"+g+","+x},300,"linear"),A.animate({transform:"t"+e+","+t},300,"linear"),I=!0}},B=function(){if(I){g-=D.x,x-=D.y;var e=g,t=x-(w-y);k.animate({opacity:E,transform:"t"+g+","+x},300,"linear"),A.animate({transform:"t"+e+","+t},300,"linear"),I=!1}},F=function(){"undefined"!=typeof e.player&&e.player.is_playing()||L()},q=function(){P||B()};this.delete_current_annotation=function(){m.remove_annotation(h);var e=m.get_annotations().length;h>=e&&0!==h&&(h=m.get_annotations().length-1),z()};var H=function(){if(!e.read_only_view&&-1!==h&&parseInt(t.attr("data-node-id"),10)===parseInt(m.get_id(),10)){var i=m.get_annotations();n.find("div").each(function(){var e=$(this).text();$(this).replaceWith("<br>"+e+"<br>")}),n.find("p").each(function(){var e=$(this).text();$(this).replaceWith("<br>"+e+"<br>")}),n.find("*").not("br").each(function(){var e=$(this).contents();$(this).replaceWith(e)});var a=$.trim(n.html().replace(/\<br\>/gi,"\r"));if(h+1>i.length)""!==a&&m.add_annotation(a);else{var s=i[h];if(""===a)S.delete_current_annotation();else a!==s.get_content()&&(s.set_content(a),s.save())}M.hide(),C.hide(),R(),j(),E=1,k.attr({opacity:E}),k.show()}},V=function(){t.attr("data-node-id",m.get_id())};this.open=function(){V(),P=!0,I=!0,h=0;m.get_annotations();z(),S.update_position(),t.css({width:v,height:b}),t.stop(!0),t.fadeTo("fast",1),E=1,k.attr({opacity:E}),n.scrollTo(0,0),""===n.text()&&c.click()},this.close=function(e){t.fadeOut(),n.blur(),l.focus(),r.hide(),H(),R(),void 0!==e&&e&&B(),h=-1,P=!1};var G=function(){if("undefined"==typeof e.player||!e.player.is_playing())if(e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),P)S.close();else{if(e.read_only_view){var n=t.attr("data-node-id");""!==n&&e.nodes[n]&&""+n!=""+m.get_id()&&e.nodes[n].close_annotation()}e.read_only_view||m.is_selected()&&!(e.selected_nodes.length>1)||(e.unselect_all(),e.selected_nodes[0]=m,m.select(),e.selector.update(),e.selector.show()),S.open()}};A.click(G),A.mouseover(F),A.mouseout(q),this.hide=function(){H(),h=-1,R(),k.attr({opacity:E}),m.has_annotations()?(t.fadeOut(),B()):(k.hide(),A.hide(),I=!1,t.hide()),P=!1,n.blur(),l.focus(),r.hide()},this.force_hide=function(){k.hide(),A.hide()},this.get_icon_path=function(){return k.get_path()},this.remove=function(){k.remove()},this.toFront=function(){k.toFront()},$(document).on("annotation:mousewheel",function(){r.hide()})},e}(MINDMAP||{}),MINDMAP=function(e){var t,n,i=function(e){"cancel"==e&&a(),"ok"==e&&s()},a=function(){SEARCH_RESULTS.unselect_resources(),hide_popup()},s=function(){var i=SEARCH_RESULTS.get_selected_resources();if(i.length>0){var a=_.last(i);$.each(i,function(s,o){var r="/study_aids/"+t+"/"+n+"/attach";$.ajax({type:"POST",url:r,data:{study_aid_id:o}}).always(function(){}).done(function(s){a==o&&(e.view_attachments(e.nodes[n]),SEARCH_RESULTS.unselect_resources(),$(".add_attachment_modal").modal("hide"),s.push(i.length),$(document).trigger("attachment_added:"+t,s))})})}};return e.init_search=function(e,a,s,o){n=a,t=s,SEARCH_RESULTS.init({search_field_selector:".shared_resource_search input[name='q']",select_callback:i,select_only_one:!1,disable_from_selection:o.split(","),resource_id:e,resource_search_modal:!0})},$(document).on("keypress","#full-search",function(e){13===e.which&&e.preventDefault()}),e}(MINDMAP||{}),MODAL_STACK=function(e){$(function(){e.study_aid_modal_stack=[]});var t=function(e){if(e){var t;$(".modal-backdrop").remove();try{t="undefined"==typeof window.top.NOTES}catch(a){t=!0}var i=Routes.embed_popup_public_path({id:e,controls:!t,_options:!0});MODAL.create("embed_study_aid",i,["large_modal"]).on("hidden.bs.modal",n)}},n=function(){if(e.study_aid_modal_stack.pop(),0!==e.study_aid_modal_stack.length){var n=e.study_aid_modal_stack[e.study_aid_modal_stack.length-1];t(n)}};e.show_study_aid_modal=function(n){e.study_aid_modal_stack.push(n),t(n)};var i=function(e,t,i){i.on("hidden.bs.modal",n)};return $(document).off("preview_loaded",i).on("preview_loaded",i),e}(MODAL_STACK||{});$(document).on("view_attachment:init",function(){var e=function(e,t,n){$.ajax({type:"PUT",url:"/study_aids/nodes/"+e+"/detach",data:{study_aid_id:t},success:n,dataType:"html"})};$("span.detach_resource").click(function(){var t=$(this),n=t.parents(".node_area").find("input.node_id").val(),i=t.find("input").val(),a=n,s=t.parents(".node_area").find("input#attachment_count").val(),o=t.data("type");e(n,i,function(){n=t.parents("tr:first").fadeOut("slow"),MINDMAP.nodes[a].attachment_numbers[o+"_no"]-=1,s&&(s-=1,t.parents(".node_area").find("input#attachment_count").val(s))})})});var MINDMAP=function(e){e.build_attachment_namespace=function(e){var t=e.attachment_numbers||{};_.extend(e.attachment_numbers,{mind_maps_no:t.mind_maps_no||0,flash_card_decks_no:t.flash_card_decks_no||0,notes_no:t.notes_no||0,quizzes_no:t.quizzes_no||0,slide_sets_no:t.slide_sets_no||0,flowcharts_no:t.flowcharts_no||0})},e.has_any_attachments=function(){var t=!1;return $.each(e.nodes,function(e,n){n.has_attachments&&(t=!0)}),t},e.attachment_icon_clicked=function(t){e.view_attachments(t)},e.AttachmentsIcon=function(t,n){var i={x:.67,y:.67},a=30,s="#000",o="#333",r=25,l=n.circle(5,17,24);l.attr({fill:"#eee","stroke-width":0,opacity:0});var c=new SVG_HELPER.Icon(n,"node_attachment",{"stroke-width":0,fill:s,scale:i,rotation:a}),d=n.rect(-8,0,20,25);d.attr({fill:"white",opacity:0,cursor:"pointer"}),d.toFront(),d.click(function(){e.attachment_icon_clicked(t)}),t.has_attachments||c.hide(),this.update=function(){var n=c.get_scale(),i=t.get_shape().get_x_and_y_to_update_icon_attachment_position(r),a=i.x,u=i.y;c.set_position(a,u),d.transform("t"+a+","+u),l.transform("t"+a+","+u+"s"+n.x+","+n.y+",0,0"),l.hide(),t.has_attachments&&!e.image_view?(c.attr({fill:s}),d.show(),c.show()):!e.image_view&&t.is_selected()&&1===e.selected_nodes.length?(c.attr({fill:o}),d.show(),c.show()):(d.hide(),c.hide())},d.mouseover(function(){l.show(),l.stop(),l.attr({fill:t.get_lightened_color()}),l.animate({opacity:.8},200,"linear"),c.get_path().stop(),t.has_attachments||c.animate({fill:s},200,"linear")}),d.mouseout(function(){l.show(),l.stop(),l.animate({opacity:0},200,"linear"),c.get_path().stop(),t.has_attachments||c.animate({fill:o},200,"linear")}),this.hide=function(){c.hide(),l.hide(),d.hide()},this.get_icon_path=function(){return c.get_path()},this.get_click_rect=function(){return d},this.remove=function(){l.remove(),c.remove(),d.remove()},this.toFront=function(){l.toFront(),c.toFront(),d.toFront()}},e.add_attachment_to_node_id=function(e){MODAL.create("add_attachment_modal",Routes.popup_attachments_path("nodes",e,{locale:I18n.locale}),["add_attachment_popup","link_loader"])},e.add_attachment=function(t){e.add_attachment_to_node_id(t.get_id())},e.view_attachments=function(n){var i=Routes.view_node_public_path(n.get_id()),a=function(){if($(document).trigger("view_attachment:init"),e.read_only_view){var n=$(".view_attachment_modal").find(".attachment_popup_resource").map(function(){return $(this).data("id")}).get();1==n.length&&t(_.first(n))}else $(".view_attachment_modal .detach").css("visibility","visible"),$(".view_attachment_modal .attach_to_node_btn").removeClass("hidden"),$(".view_attachment_modal").find(".icon_slim_play").parents("td").addClass("with_preview");e.read_only_view||$(".view_attachments_popup.modal").on("hide.bs.modal",function(){var t=$("input#attachment_count"),n=$("input.node_id"),i=t.val(),a=n.val();i!==undefined&&a!==undefined&&"0"===i&&(e.nodes[a].set_attachments(!1),e.select_node(e.nodes[a]))})};e.read_only_view||e.get_attachment_number(n),MODAL.create_with_callback("view_attachment_modal",i,["view_attachments_popup","link_loader"],a,e)},e.get_attachment_number=function(t){var n=Routes.attachment_numbers_mind_map_node_path(e.get_mind_map_id(),{id:t.get_id()});$.getJSON(n,function(e){t.attachment_numbers=e})};var t=function(e){var t;$(".modal").modal("hide");try{t="undefined"==typeof window.top.MODAL_STACK}catch(i){t=!0}if(t){var n=window;try{for(;"undefined"!=typeof n.parent.MODAL_STACK&&n!==window.top;)n=n.parent}catch(i){}n.MODAL_STACK.show_study_aid_modal(e)}else window.top.MODAL_STACK.show_study_aid_modal(e)},n=function(e,t){switch($.trim(t).toLowerCase()){case"flash_card_deck":e.attachment_numbers.flash_card_decks_no++;break;case"note":e.attachment_numbers.notes_no++;break;case"quiz":e.attachment_numbers.quizzes_no++;break;case"mind_map":e.attachment_numbers.mind_maps_no++}};return e.attachment_added=function(t,i,a,s,o){var r=e.nodes[s.id];null!=r&&(r.set_attachments(!0),e.build_attachment_namespace(r),n(r,a),1===o?$.jGrowl(I18n.t("mind_maps.attach_"+a+"_success")):$.jGrowl(I18n.t("mind_maps.attach_multiple_success",{count:o})),e.select_node(r))},$(document).on("attachment_added:nodes",e.attachment_added),$(document).on("click",".attach_to_node_btn",function(){$(".modal").modal("hide"),track_resource_search_modal(),e.add_attachment_to_node_id($(this).attr("data-id"))}),$(document).on("click",".attachment_popup_resource",function(e){t($(this).data("id")),e.preventDefault()}),e}(MINDMAP||{});!function(e){function t(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in n)e==i&&(e=n[i]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],s=0;s<a.length;s++){var o=a[s].re,r=a[s].process,l=o.exec(e);l&&(channels=r(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n},this.getHelpXML=function(){for(var e=new Array,i=0;i<a.length;i++)for(var s=a[i].example,o=0;o<s.length;o++)e[e.length]=s[o];for(var r in n)e[e.length]=r;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(i=0;i<e.length;i++)try{var c=document.createElement("li"),d=new t(e[i]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+d.toHex()+"; color:"+d.toHex(),u.appendChild(document.createTextNode("test"));var _=document.createTextNode(" "+e[i]+" -> "+d.toRGB()+" -> "+d.toHex());c.appendChild(u),c.appendChild(_),l.appendChild(c)}catch(h){}return l}}"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports&&(module.exports=t),e.RGBColor=t}("undefined"!=typeof window?window:this),function(e,t){"use strict";"undefined"!=typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],t):"undefined"!=typeof module&&module.exports&&(module.exports=t(require("rgbcolor"),require("stackblur"))),e.canvg=t(e.RGBColor,e.stackBlur)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=[0,0,0],n=function(n,i){var a=e.match(n);null!=a&&(t[i]+=a.length,e=e.replace(n," "))};return e=(e=e.replace(/:not\(([^\)]*)\)/g,"     $1 ")).replace(/{[^]*/gm," "),n(r,1),n(l,0),n(c,1),n(d,2),n(u,1),n(_,1),e=(e=e.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),n(h,2),t.join("")}function a(a){var o={opts:a,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,log:function(){}};1==o.opts.log&&"undefined"!=typeof console&&(o.log=function(e){console.log(e)}),o.init=function(e){var t=0;o.UniqueId=function(){return"canvg"+ ++t},o.Definitions={},o.Styles={},o.StylesSpecificity={},o.Animations=[],o.Images=[],o.ctx=e,o.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(e){return null!=e&&"number"==typeof e?e:"x"==e?this.width():"y"==e?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},o.init(),o.ImagesLoaded=function(){for(var e=0;e<o.Images.length;e++)if(!o.Images[e].loaded)return!1;return!0},o.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},o.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")},o.ajax=function(e){var t;return(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(t.open("GET",e,!1),t.send(null),t.responseText):null},o.parseXml=function(e){if(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/g,"")).replace('xmlns:NS1=""',"")).replace('NS1:xmlns:xlink="http://www.w3.org/1999/xlink"',"")).replace('NS1:xmlns:xml="http://www.w3.org/XML/1998/namespace"',"")).replace('xmlns:xml="http://www.w3.org/XML/1998/namespace"',"")).replace(/\&nbsp;/g," ")).replace(/[^\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF]/g,"")).replace(/\&shy;/g,"")).replace(/ns\+?\d+:href/g,"xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href"),"undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var t=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,t.loadXml(e,n),t}return window.DOMParser?(new DOMParser).parseFromString(e,"text/xml"):(e=e.replace(/<!DOCTYPE svg[^>]*>/,""),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e),t)},o.Property=function(e,t){this.name=e,this.value=t},o.Property.prototype.getValue=function(){return this.value},o.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},o.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);return(this.value+"").match(/%$/)&&(e/=100),e},o.Property.prototype.valueOrDefault=function(e){return this.hasValue()?this.value:e},o.Property.prototype.numValueOrDefault=function(e){return this.hasValue()?this.numValue():e},o.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new e(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new o.Property(this.name,n)},o.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),o.Definitions[e]},o.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},o.Property.prototype.getFillStyleDefinition=function(e,t){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(o.ctx,e,t);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var i=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),i.hasValue()&&(n.attribute("patternTransform",!0).value=i.value)}return n.createPattern(o.ctx,e)}return null},o.Property.prototype.getDPI=function(){return 96},o.Property.prototype.getEM=function(e){var t=12,n=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);return n.hasValue()&&(t=n.toPixels(e)),t},o.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},o.Property.prototype.toPixels=function(e,t){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/em$/))return this.numValue()*this.getEM(e);if(n.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(e);if(n.match(/%$/))return this.numValue()*o.ViewPort.ComputeSize(e);var i=this.numValue();return t&&i<1?i*o.ViewPort.ComputeSize(e):i},o.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/s$/)?1e3*this.numValue():(e.match(/ms$/),this.numValue())},o.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";return e.match(/deg$/)?this.numValue()*(Math.PI/180):e.match(/grad$/)?this.numValue()*(Math.PI/200):e.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var r={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return o.Property.prototype.toTextBaseline=function(){return this.hasValue()?r[this.value]:null},o.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,t,n,i,a,s){var r=null!=s?this.Parse(s):this.CreateFont("","","","","",o.ctx.font);return{fontFamily:a||r.fontFamily,fontSize:i||r.fontSize,fontStyle:e||r.fontStyle,fontWeight:n||r.fontWeight,fontVariant:t||r.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(t){for(var n={},i=o.trim(o.compressSpaces(t||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",r=0;r<i.length;r++)a.fontStyle||-1==e.Styles.indexOf(i[r])?a.fontVariant||-1==e.Variants.indexOf(i[r])?a.fontWeight||-1==e.Weights.indexOf(i[r])?a.fontSize?"inherit"!=i[r]&&(s+=i[r]):("inherit"!=i[r]&&(n.fontSize=i[r].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=i[r]&&(n.fontWeight=i[r]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=i[r]&&(n.fontVariant=i[r]),a.fontStyle=a.fontVariant=!0):("inherit"!=i[r]&&(n.fontStyle=i[r]),a.fontStyle=!0);return""!=s&&(n.fontFamily=s),n}},o.ToNumberArray=function(e){for(var t=o.trim(o.compressSpaces((e||"").replace(/,/g," "))).split(" "),n=0;n<t.length;n++)t[n]=parseFloat(t[n]);return t},o.Point=function(e,t){this.x=e,this.y=t},o.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)},o.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4],n=this.x*e[1]+this.y*e[3]+e[5];this.x=t,this.y=n},o.CreatePoint=function(e){var t=o.ToNumberArray(e);return new o.Point(t[0],t[1])},o.CreatePath=function(e){for(var t=o.ToNumberArray(e),n=[],i=0;i<t.length;i+=2)n.push(new o.Point(t[i],t[i+1]));return n},o.BoundingBox=function(e,t,n,a){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},this.addX=function(e){this.addPoint(e,null)},this.addY=function(e){this.addPoint(null,e)},this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1),this.addPoint(e.x2,e.y2)},this.addQuadraticCurve=function(e,t,n,i,a,s){var o=e+2/3*(n-e),r=t+2/3*(i-t),l=o+1/3*(a-e),c=r+1/3*(s-t);this.addBezierCurve(e,t,o,l,r,c,a,s)},this.addBezierCurve=function(e,t,n,a,s,o,r,l){var c=[e,t],d=[n,a],u=[s,o],_=[r,l];for(this.addPoint(c[0],c[1]),this.addPoint(_[0],_[1]),i=0;i<=1;i++){var h=function(e){return Math.pow(1-e,3)*c[i]+3*Math.pow(1-e,2)*e*d[i]+3*(1-e)*Math.pow(e,2)*u[i]+Math.pow(e,3)*_[i]},p=6*c[i]-12*d[i]+6*u[i],f=-3*c[i]+9*d[i]-9*u[i]+3*_[i],m=3*d[i]-3*c[i];if(0!=f){var g=Math.pow(p,2)-4*m*f;if(!(g<0)){var v=(-p+Math.sqrt(g))/(2*f);0<v&&v<1&&(0==i&&this.addX(h(v)),1==i&&this.addY(h(v)));var b=(-p-Math.sqrt(g))/(2*f);0<b&&b<1&&(0==i&&this.addX(h(b)),1==i&&this.addY(h(b)))}}else{if(0==p)continue;var y=-m/p;0<y&&y<1&&(0==i&&this.addX(h(y)),1==i&&this.addY(h(y)))}}},this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2},this.addPoint(e,t),this.addPoint(n,a)},o.Transform=function(e){var t=this;this.Type={},this.Type.translate=function(e){this.p=o.CreatePoint(e),this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)},this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(e){
e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var t=o.ToNumberArray(e);this.angle=new o.Property("angle",t[0]),this.cx=t[1]||0,this.cy=t[2]||0,this.apply=function(e){e.translate(this.cx,this.cy),e.rotate(this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.unapply=function(e){e.translate(this.cx,this.cy),e.rotate(-1*this.angle.toRadians()),e.translate(-this.cx,-this.cy)},this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),e.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]),e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=o.CreatePoint(e),this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=o.ToNumberArray(e),this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(e){var t=this.m[0],n=this.m[2],i=this.m[4],a=this.m[1],s=this.m[3],o=this.m[5],r=0,l=0,c=1,d=1/(t*(s*c-o*l)-n*(a*c-o*r)+i*(a*l-s*r));e.transform(d*(s*c-o*l),d*(o*r-a*c),d*(i*l-n*c),d*(t*c-i*r),d*(n*o-i*s),d*(i*a-t*o))},this.applyToPoint=function(e){e.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=t.Type.matrix,this.base(e),this.angle=new o.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(e){this.base=t.Type.SkewBase,this.base(e),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(e){this.base=t.Type.SkewBase,this.base(e),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(e)},this.unapply=function(e){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(e)},this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(e)};for(var n=o.trim(o.compressSpaces(e)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<n.length;i++){var a=o.trim(n[i].split("(")[0]),s=n[i].split("(")[1].replace(")",""),r=new this.Type[a](s);r.type=a,this.transforms.push(r)}},o.AspectRatio=function(e,t,n,i,a,s,r,l,c,d){var u=(t=(t=o.compressSpaces(t)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",_=t.split(" ")[1]||"meet",h=n/i,p=a/s,f=Math.min(h,p),m=Math.max(h,p);"meet"==_&&(i*=f,s*=f),"slice"==_&&(i*=m,s*=m),c=new o.Property("refX",c),d=new o.Property("refY",d),c.hasValue()&&d.hasValue()?e.translate(-f*c.toPixels("x"),-f*d.toPixels("y")):(u.match(/^xMid/)&&("meet"==_&&f==p||"slice"==_&&m==p)&&e.translate(n/2-i/2,0),u.match(/YMid$/)&&("meet"==_&&f==h||"slice"==_&&m==h)&&e.translate(0,a/2-s/2),u.match(/^xMax/)&&("meet"==_&&f==p||"slice"==_&&m==p)&&e.translate(n-i,0),u.match(/YMax$/)&&("meet"==_&&f==h||"slice"==_&&m==h)&&e.translate(0,a-s)),"none"==u?e.scale(h,p):"meet"==_?e.scale(f,f):"slice"==_&&e.scale(m,m),e.translate(null==r?0:-r,null==l?0:-l)},o.Element={},o.EmptyProperty=new o.Property("EMPTY",""),o.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(e,t){var n=this.attributes[e];return null!=n?n:(1==t&&(n=new o.Property(e,""),this.attributes[e]=n),n||o.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if("href"==e||e.match(/:href$/))return this.attributes[e];return o.EmptyProperty},this.style=function(e,t,n){var i=this.styles[e];if(null!=i)return i;var a=this.attribute(e);if(null!=a&&a.hasValue())return this.styles[e]=a,a;if(1!=n){var s=this.parent;if(null!=s){var r=s.style(e);if(null!=r&&r.hasValue())return r}}return 1==t&&(i=new o.Property(e,""),this.styles[e]=i),i||o.EmptyProperty},this.render=function(e){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(e.save(),this.style("mask").hasValue()){var t=this.style("mask").getDefinition();null!=t&&t.apply(e,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(e,this)}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(e){for(var t=0;t<this.children.length;t++)this.children[t].render(e)},this.addChild=function(e,t){var n=e;t&&(n=o.CreateElement(e)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var t in o.Styles)if("@"!=t[0]&&s(e,t)){var n=o.Styles[t],i=o.StylesSpecificity[t];if(null!=n)for(var a in n){var r=this.stylesSpecificity[a];void 0===r&&(r="000"),i>r&&(this.styles[a]=n[a],this.stylesSpecificity[a]=i)}}},null!=e&&1==e.nodeType){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t];this.attributes[n.nodeName]=new o.Property(n.nodeName,n.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue()){var i=this.attribute("style").value.split(";");for(t=0;t<i.length;t++)if(""!=o.trim(i[t])){var a=i[t].split(":"),r=o.trim(a[0]),l=o.trim(a[1]);this.styles[r]=new o.Property(r,l)}}this.attribute("id").hasValue()&&null==o.Definitions[this.attribute("id").value]&&(o.Definitions[this.attribute("id").value]=this);for(t=0;t<e.childNodes.length;t++){var c=e.childNodes[t];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var d=c.value||c.text||c.textContent||"";""!=o.compressSpaces(d)&&this.addChild(new o.Element.tspan(c),!1)}}}},o.Element.RenderedElementBase=function(e){this.base=o.Element.ElementBase,this.base(e),this.setContext=function(e){var t;if(this.style("fill").isUrlDefinition())null!=(t=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(e.fillStyle=t);else if(this.style("fill").hasValue()){var n;"currentColor"==(n=this.style("fill")).value&&(n.value=this.style("color").value),"inherit"!=n.value&&(e.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}this.style("fill-opacity").hasValue()&&(n=(n=new o.Property("fill",e.fillStyle)).addOpacity(this.style("fill-opacity")),e.fillStyle=n.value);if(this.style("stroke").isUrlDefinition())null!=(t=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")))&&(e.strokeStyle=t);else if(this.style("stroke").hasValue()){var i;"currentColor"==(i=this.style("stroke")).value&&(i.value=this.style("color").value),"inherit"!=i.value&&(e.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}this.style("stroke-opacity").hasValue()&&(i=(i=new o.Property("stroke",e.strokeStyle)).addOpacity(this.style("stroke-opacity")),e.strokeStyle=i.value);if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();e.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=o.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof e.setLineDash?e.setLineDash(s):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=s:"undefined"==typeof e.mozDash||1==s.length&&0==s[0]||(e.mozDash=s);var r=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=r:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=r:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=r)}("undefined"!=typeof e.font&&(e.font=o.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue())&&new o.Transform(this.style("transform",!1,!0).value).apply(e);if(this.style("clip-path",!1,!0).hasValue()){var l=this.style("clip-path",!1,!0).getDefinition();null!=l&&l.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},o.Element.RenderedElementBase.prototype=new o.Element.ElementBase,o.Element.PathElementBase=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new o.BoundingBox},this.renderChildren=function(e){this.path(e),o.Mouse.checkPath(this,e),""!=e.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?e.fill(this.style("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var t=this.getMarkers();if(null!=t){if(this.style("marker-start").isUrlDefinition())(n=this.style("marker-start").getDefinition()).render(e,t[0][0],t[0][1]);if(this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),i=1;i<t.length-1;i++)n.render(e,t[i][0],t[i][1]);if(this.style("marker-end").isUrlDefinition())(n=this.style("marker-end").getDefinition()).render(e,t[t.length-1][0],t[t.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},o.Element.PathElementBase.prototype=new o.Element.RenderedElementBase,o.Element.svg=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),o.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,"undefined"!=typeof e.font&&"undefined"!=typeof window.getComputedStyle&&(e.font=window.getComputedStyle(e.canvas).getPropertyValue("font")),this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var t=o.ViewPort.width(),n=o.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){t=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");var i=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(e.beginPath(),e.moveTo(i,a),e.lineTo(t,a),e.lineTo(t,n),e.lineTo(i,n),e.closePath(),e.clip())}if(o.ViewPort.SetCurrent(t,n),this.attribute("viewBox").hasValue()){var s=o.ToNumberArray(this.attribute("viewBox").value),r=s[0],l=s[1];t=s[2],n=s[3],o.AspectRatio(e,this.attribute("preserveAspectRatio").value,o.ViewPort.width(),t,o.ViewPort.height(),n,r,l,this.attribute("refX").value,this.attribute("refY").value),o.ViewPort.RemoveCurrent(),o.ViewPort.SetCurrent(s[2],s[3])}}},o.Element.svg.prototype=new o.Element.RenderedElementBase,o.Element.rect=function(e){this.base=o.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(r=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=r),s=Math.min(s,i/2),r=Math.min(r,a/2),null!=e&&(e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+r),e.lineTo(t+i,n+a-r),e.quadraticCurveTo(t+i,n+a,t+i-s,n+a),e.lineTo(t+s,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+s,n),e.closePath()),new o.BoundingBox(t,n,t+i,n+a)}},o.Element.rect.prototype=new o.Element.PathElementBase,o.Element.circle=function(e){this.base=o.Element.PathElementBase,this.base(e),this.path=function(e){var t=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(t,n,i,0,2*Math.PI,!0),e.closePath()),new o.BoundingBox(t-i,n-i,t+i,n+i)}},o.Element.circle.prototype=new o.Element.PathElementBase,o.Element.ellipse=function(e){this.base=o.Element.PathElementBase,this.base(e),this.path=function(e){var t=(Math.sqrt(2)-1)/3*4,n=this.attribute("rx").toPixels("x"),i=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(a,s-i),e.bezierCurveTo(a+t*n,s-i,a+n,s-t*i,a+n,s),e.bezierCurveTo(a+n,s+t*i,a+t*n,s+i,a,s+i),e.bezierCurveTo(a-t*n,s+i,a-n,s+t*i,a-n,s),e.bezierCurveTo(a-n,s-t*i,a-t*n,s-i,a,s-i),e.closePath()),new o.BoundingBox(a-n,s-i,a+n,s+i)}},o.Element.ellipse.prototype=new o.Element.PathElementBase,o.Element.line=function(e){this.base=o.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new o.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new o.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var t=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y)),new o.BoundingBox(t[0].x,t[0].y,t[1].x,t[1].y)},this.getMarkers=function(){var e=this.getPoints(),t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}},o.Element.line.prototype=new o.Element.PathElementBase,o.Element.polyline=function(e){this.base=o.Element.PathElementBase,this.base(e),this.points=o.CreatePath(this.attribute("points").value),this.path=function(e){var t=new o.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)t.addPoint(this.points[n].x,this.points[n].y),null!=e&&e.lineTo(this.points[n].x,this.points[n].y);return t},this.getMarkers=function(){for(var e=[],t=0;t<this.points.length-1;t++)e.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return e.push([this.points[this.points.length-1],e[e.length-1][1]]),e}},o.Element.polyline.prototype=new o.Element.PathElementBase,o.Element.polygon=function(e){this.base=o.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(e){var t=this.basePath(e);return null!=e&&(e.lineTo(this.points[0].x,this.points[0].y),e.closePath()),t}},o.Element.polygon.prototype=new o.Element.polyline,o.Element.path=function(e){this.base=o.Element.PathElementBase,this.base(e);var t=this.attribute("d").value;t=t.replace(/,/gm," ");for(var n=0;n<2;n++)t=t.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");t=(t=t.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2");for(n=0;n<2;n++)t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=o.compressSpaces(t),t=o.trim(t),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new o.Point(0,0),this.control=new o.Point(0,0),this.current=new o.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new o.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var e=this.getPoint();return this.control=e,e},this.getAsCurrentPoint=function(){var e=this.getPoint();return this.current=e,e},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new o.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(e){return this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y),e},this.addMarker=function(e,t,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(e,null==t?null:t.angleTo(e))},this.addMarkerAngle=function(e,t){this.points.push(e),this.angles.push(t)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++)if(null==this.angles[e])for(var t=e+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[e]=this.angles[t];break}return this.angles}}(t),this.path=function(e){var t=this.PathParser;t.reset();var n=new o.BoundingBox;for(null!=e&&e.beginPath();!t.isEnd();)switch(t.nextCommand(),t.command){case"M":case"m":var i=t.getAsCurrentPoint();for(t.addMarker(i),n.addPoint(i.x,i.y),null!=e&&e.moveTo(i.x,i.y),t.start=t.current;!t.isCommandOrEnd();){i=t.getAsCurrentPoint();t.addMarker(i,t.start),n.addPoint(i.x,i.y),null!=e&&e.lineTo(i.x,i.y)}break;case"L":case"l":for(;!t.isCommandOrEnd();){var a=t.current;i=t.getAsCurrentPoint();t.addMarker(i,a),n.addPoint(i.x,i.y),null!=e&&e.lineTo(i.x,i.y)}break;case"H":case"h":for(;!t.isCommandOrEnd();){var s=new o.Point((t.isRelativeCommand()?t.current.x:0)+t.getScalar(),t.current.y);t.addMarker(s,t.current),t.current=s,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"V":case"v":for(;!t.isCommandOrEnd();){s=new o.Point(t.current.x,(t.isRelativeCommand()?t.current.y:0)+t.getScalar());t.addMarker(s,t.current),t.current=s,n.addPoint(t.current.x,t.current.y),null!=e&&e.lineTo(t.current.x,t.current.y)}break;case"C":case"c":for(;!t.isCommandOrEnd();){var r=t.current,l=t.getPoint(),c=t.getAsControlPoint(),d=t.getAsCurrentPoint();t.addMarker(d,c,l),n.addBezierCurve(r.x,r.y,l.x,l.y,c.x,c.y,d.x,d.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,d.x,d.y)}break;case"S":case"s":for(;!t.isCommandOrEnd();){r=t.current,l=t.getReflectedControlPoint(),c=t.getAsControlPoint(),d=t.getAsCurrentPoint();t.addMarker(d,c,l),n.addBezierCurve(r.x,r.y,l.x,l.y,c.x,c.y,d.x,d.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,d.x,d.y)}break;case"Q":case"q":for(;!t.isCommandOrEnd();){r=t.current,c=t.getAsControlPoint(),d=t.getAsCurrentPoint();t.addMarker(d,c,c),n.addQuadraticCurve(r.x,r.y,c.x,c.y,d.x,d.y),null!=e&&e.quadraticCurveTo(c.x,c.y,d.x,d.y)}break;case"T":case"t":for(;!t.isCommandOrEnd();){r=t.current,c=t.getReflectedControlPoint();t.control=c;d=t.getAsCurrentPoint();t.addMarker(d,c,c),n.addQuadraticCurve(r.x,r.y,c.x,c.y,d.x,d.y),null!=e&&e.quadraticCurveTo(c.x,c.y,d.x,d.y)}break;case"A":case"a":for(;!t.isCommandOrEnd();){r=t.current;var u=t.getScalar(),_=t.getScalar(),h=t.getScalar()*(Math.PI/180),p=t.getScalar(),f=t.getScalar(),m=(d=t.getAsCurrentPoint(),new o.Point(Math.cos(h)*(r.x-d.x)/2+Math.sin(h)*(r.y-d.y)/2,-Math.sin(h)*(r.x-d.x)/2+Math.cos(h)*(r.y-d.y)/2)),g=Math.pow(m.x,2)/Math.pow(u,2)+Math.pow(m.y,2)/Math.pow(_,2);g>1&&(u*=Math.sqrt(g),_*=Math.sqrt(g));var v=(p==f?-1:1)*Math.sqrt((Math.pow(u,2)*Math.pow(_,2)-Math.pow(u,2)*Math.pow(m.y,2)-Math.pow(_,2)*Math.pow(m.x,2))/(Math.pow(u,2)*Math.pow(m.y,2)+Math.pow(_,2)*Math.pow(m.x,2)));isNaN(v)&&(v=0);var b=new o.Point(v*u*m.y/_,v*-_*m.x/u),y=new o.Point((r.x+d.x)/2+Math.cos(h)*b.x-Math.sin(h)*b.y,(r.y+d.y)/2+Math.sin(h)*b.x+Math.cos(h)*b.y),w=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},x=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(w(e)*w(t))},S=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(x(e,t))},T=S([1,0],[(m.x-b.x)/u,(m.y-b.y)/_]),M=[(m.x-b.x)/u,(m.y-b.y)/_],C=[(-m.x-b.x)/u,(-m.y-b.y)/_],k=S(M,C);x(M,C)<=-1&&(k=Math.PI),x(M,C)>=1&&(k=0);var E=1-f?1:-1,A=T+E*(k/2),I=new o.Point(y.x+u*Math.cos(A),y.y+_*Math.sin(A));if(t.addMarkerAngle(I,A-E*Math.PI/2),t.addMarkerAngle(d,A-E*Math.PI),n.addPoint(d.x,d.y),null!=e){x=u>_?u:_;var D=u>_?1:u/_,P=u>_?_/u:1;e.translate(y.x,y.y),e.rotate(h),e.scale(D,P),e.arc(0,0,x,T,T+k,1-f),e.scale(1/D,1/P),e.rotate(-h),e.translate(-y.x,-y.y)}}break;case"Z":case"z":null!=e&&e.closePath(),t.current=t.start}return n},this.getMarkers=function(){for(var e=this.PathParser.getMarkerPoints(),t=this.PathParser.getMarkerAngles(),n=[],i=0;i<e.length;i++)n.push([e[i],t[i]]);return n}},o.Element.path.prototype=new o.Element.PathElementBase,o.Element.pattern=function(e){this.base=o.Element.ElementBase,this.base(e),this.createPattern=function(e){var t=this.attribute("width").toPixels("x",!0),n=this.attribute("height").toPixels("y",!0),i=new o.Element.svg;i.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),i.attributes.width=new o.Property("width",t+"px"),i.attributes.height=new o.Property("height",n+"px"),i.attributes.transform=new o.Property("transform",this.attribute("patternTransform").value),i.children=this.children;var a=document.createElement("canvas");a.width=t,a.height=n;var s=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var r=-1;r<=1;r++)for(var l=-1;l<=1;l++)s.save(),i.attributes.x=new o.Property("x",r*a.width),i.attributes.y=new o.Property("y",l*a.height),i.render(s),s.restore();return e.createPattern(a,"repeat")}},o.Element.pattern.prototype=new o.Element.ElementBase,o.Element.marker=function(e){this.base=o.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,t,n){e.translate(t.x,t.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var i=new o.Element.svg;i.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),i.attributes.refX=new o.Property("refX",this.attribute("refX").value),i.attributes.refY=new o.Property("refY",this.attribute("refY").value),i.attributes.width=new o.Property("width",this.attribute("markerWidth").value),i.attributes.height=new o.Property("height",this.attribute("markerHeight").value),i.attributes.fill=new o.Property("fill",this.attribute("fill").valueOrDefault("black")),i.attributes.stroke=new o.Property("stroke",this.attribute("stroke").valueOrDefault("none")),i.children=this.children,i.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-n),e.translate(-t.x,-t.y)}},o.Element.marker.prototype=new o.Element.ElementBase,o.Element.defs=function(e){this.base=o.Element.ElementBase,this.base(e),this.render=function(){}},o.Element.defs.prototype=new o.Element.ElementBase,o.Element.GradientBase=function(e){this.base=o.Element.ElementBase,this.base(e),this.stops=[];for(var t=0;t<this.children.length;t++){var n=this.children[t];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(e){for(var t=0;t<this.attributesToInherit.length;t++){var n=this.attributesToInherit[t];!this.attribute(n).hasValue()&&e.attribute(n).hasValue()&&(this.attribute(n,!0).value=e.attribute(n).value)}},this.createGradient=function(e,t,n){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=function(e){return n.hasValue()?new o.Property("color",e).addOpacity(n).value:e},s=this.getGradient(e,t);if(null==s)return a(i.stops[i.stops.length-1].color);for(var r=0;r<i.stops.length;r++)s.addColorStop(i.stops[r].offset,a(i.stops[r].color));if(this.attribute("gradientTransform").hasValue()){var l=o.ViewPort.viewPorts[0],c=new o.Element.rect;c.attributes.x=new o.Property("x",-o.MAX_VIRTUAL_PIXELS/3),c.attributes.y=new o.Property("y",-o.MAX_VIRTUAL_PIXELS/3),c.attributes.width=new o.Property("width",o.MAX_VIRTUAL_PIXELS),c.attributes.height=new o.Property("height",o.MAX_VIRTUAL_PIXELS);var d=new o.Element.g;d.attributes.transform=new o.Property("transform",this.attribute("gradientTransform").value),d.children=[c];var u=new o.Element.svg;u.attributes.x=new o.Property("x",0),u.attributes.y=new o.Property("y",0),u.attributes.width=new o.Property("width",l.width),u.attributes.height=new o.Property("height",l.height),u.children=[d];var _=document.createElement("canvas");_.width=l.width,_.height=l.height;var h=_.getContext("2d");return h.fillStyle=s,u.render(h),h.createPattern(_,"no-repeat")}return s}},o.Element.GradientBase.prototype=new o.Element.ElementBase,o.Element.linearGradient=function(e){this.base=o.Element.GradientBase,this.base(e),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(e,t){var n="objectBoundingBox"==this.gradientUnits()?t.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),a="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),s="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==s&&a==o?null:e.createLinearGradient(i,a,s,o)}},o.Element.linearGradient.prototype=new o.Element.GradientBase,o.Element.radialGradient=function(e){this.base=o.Element.GradientBase,this.base(e),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(e,t){var n=t.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),a="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),s=i,o=a;this.attribute("fx").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var r="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(s,o,0,i,a,r)}},o.Element.radialGradient.prototype=new o.Element.GradientBase,o.Element.stop=function(e){this.base=o.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var t=this.style("stop-color",!0);""===t.value&&(t.value="#000"),this.style("stop-opacity").hasValue()&&(t=t.addOpacity(this.style("stop-opacity"))),this.color=t.value},o.Element.stop.prototype=new o.Element.ElementBase,o.Element.AnimateBase=function(e){this.base=o.Element.ElementBase,this.base(e),o.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var e=this.attribute("attributeType").value,t=this.attribute("attributeName").value;return"CSS"==e?this.parent.style(t,!0):this.parent.attribute(t,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(e){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+e;var t=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue())n=this.attribute("type").value+"("+n+")";this.getProperty().value=n,t=!0}return t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var t=e.progress*(this.values.value.length-1),n=Math.floor(t),i=Math.ceil(t);e.from=new o.Property("from",parseFloat(this.values.value[n])),e.to=new o.Property("to",parseFloat(this.values.value[i])),e.progress=(t-n)/(i-n)}else e.from=this.from,e.to=this.to;return e}},o.Element.AnimateBase.prototype=new o.Element.ElementBase,o.Element.animate=function(e){this.base=o.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress();return e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress+this.initialUnits}},o.Element.animate.prototype=new o.Element.AnimateBase,o.Element.animateColor=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),n=new e(t.from.value),i=new e(t.to.value);if(n.ok&&i.ok){var a=n.r+(i.r-n.r)*t.progress,s=n.g+(i.g-n.g)*t.progress,o=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(a,10)+","+parseInt(s,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},o.Element.animateColor.prototype=new o.Element.AnimateBase,o.Element.animateTransform=function(e){this.base=o.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),t=o.ToNumberArray(e.from.value),n=o.ToNumberArray(e.to.value),i="",a=0;a<t.length;a++)i+=t[a]+(n[a]-t[a])*e.progress+" ";return i}},o.Element.animateTransform.prototype=new o.Element.animate,o.Element.font=function(e){this.base=o.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var t=0;t<this.children.length;t++){var n=this.children[t];"font-face"==n.type?(this.fontFace=n,n.style("font-family").hasValue()&&(o.Definitions[n.style("font-family").value]=this)):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},o.Element.font.prototype=new o.Element.ElementBase,o.Element.fontface=function(e){this.base=o.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},o.Element.fontface.prototype=new o.Element.ElementBase,o.Element.missingglyph=function(e){this.base=o.Element.path,this.base(e),this.horizAdvX=0},o.Element.missingglyph.prototype=new o.Element.path,o.Element.glyph=function(e){this.base=o.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},o.Element.glyph.prototype=new o.Element.path,o.Element.text=function(e){this.captureTextNodes=!0,
this.base=o.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e);var t=this.style("dominant-baseline").toTextBaseline();null==t&&(t=this.style("alignment-baseline").toTextBaseline()),null!=t&&(e.textBaseline=t)},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize);return new o.BoundingBox(e,t-n,e+Math.floor(2*n/3)*this.children[0].getText().length,t)},this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(e,this,t)},this.getAnchorDelta=function(e,t,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var a=0,s=n;s<t.children.length;s++){var o=t.children[s];if(s>n&&o.attribute("x").hasValue())break;a+=o.measureTextRecursive(e)}return-1*("end"==i?a:a/2)}return 0},this.renderChild=function(e,t,n){var i=t.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+t.getAnchorDelta(e,t,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(i.attribute("dx").hasValue()&&(t.x+=i.attribute("dx").toPixels("x")),i.x=t.x),t.x=i.x+i.measureText(e),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(i.attribute("dy").hasValue()&&(t.y+=i.attribute("dy").toPixels("y")),i.y=t.y),t.y=i.y,i.render(e);for(n=0;n<i.children.length;n++)t.renderChild(e,i,n)}},o.Element.text.prototype=new o.Element.RenderedElementBase,o.Element.TextElementBase=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.getGlyph=function(e,t,n){var i=t[n],a=null;if(e.isArabic){var s="isolated";(0==n||" "==t[n-1])&&n<t.length-2&&" "!=t[n+1]&&(s="terminal"),n>0&&" "!=t[n-1]&&n<t.length-2&&" "!=t[n+1]&&(s="medial"),n>0&&" "!=t[n-1]&&(n==t.length-1||" "==t[n+1])&&(s="initial"),"undefined"!=typeof e.glyphs[i]&&null==(a=e.glyphs[i][s])&&"glyph"==e.glyphs[i].type&&(a=e.glyphs[i])}else a=e.glyphs[i];return null==a&&(a=e.missingGlyph),a},this.renderChildren=function(e){var t=this.parent.style("font-family").getDefinition();if(null==t)""!=e.fillStyle&&e.fillText(o.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(o.compressSpaces(this.getText()),this.x,this.y);else{var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(o.Font.Parse(o.ctx.font).fontStyle),a=this.getText();t.isRTL&&(a=a.split("").reverse().join(""));for(var s=o.ToNumberArray(this.parent.attribute("dx").value),r=0;r<a.length;r++){var l=this.getGlyph(t,a,r),c=n/t.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(c,-c);var d=e.lineWidth;e.lineWidth=e.lineWidth*t.fontFace.unitsPerEm/n,"italic"==i&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==i&&e.transform(1,0,-.4,1,0,0),e.lineWidth=d,e.scale(1/c,-1/c),e.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||t.horizAdvX)/t.fontFace.unitsPerEm,"undefined"==typeof s[r]||isNaN(s[r])||(this.x+=s[r])}}},this.getText=function(){},this.measureTextRecursive=function(e){for(var t=this.measureText(e),n=0;n<this.children.length;n++)t+=this.children[n].measureTextRecursive(e);return t},this.measureText=function(e){var t=this.parent.style("font-family").getDefinition();if(null!=t){var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),i=0,a=this.getText();t.isRTL&&(a=a.split("").reverse().join(""));for(var s=o.ToNumberArray(this.parent.attribute("dx").value),r=0;r<a.length;r++){i+=(this.getGlyph(t,a,r).horizAdvX||t.horizAdvX)*n/t.fontFace.unitsPerEm,"undefined"==typeof s[r]||isNaN(s[r])||(i+=s[r])}return i}var l=o.compressSpaces(this.getText());if(!e.measureText)return 10*l.length;e.save(),this.setContext(e);var c=e.measureText(l).width;return e.restore(),c}},o.Element.TextElementBase.prototype=new o.Element.RenderedElementBase,o.Element.tspan=function(e){this.captureTextNodes=!0,this.base=o.Element.TextElementBase,this.base(e),this.text=o.compressSpaces(e.value||e.text||e.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},o.Element.tspan.prototype=new o.Element.TextElementBase,o.Element.tref=function(e){this.base=o.Element.TextElementBase,this.base(e),this.getText=function(){var e=this.getHrefAttribute().getDefinition();if(null!=e)return e.children[0].getText()}},o.Element.tref.prototype=new o.Element.TextElementBase,o.Element.a=function(e){this.base=o.Element.TextElementBase,this.base(e),this.hasText=e.childNodes.length>0;for(var t=0;t<e.childNodes.length;t++)3!=e.childNodes[t].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var t=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);o.Mouse.checkBoundingBox(this,new o.BoundingBox(this.x,this.y-t.toPixels("y"),this.x+this.measureText(e),this.y))}else if(this.children.length>0){var n=new o.Element.g;n.children=this.children,n.parent=this,n.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){o.ctx.canvas.style.cursor="pointer"}},o.Element.a.prototype=new o.Element.TextElementBase,o.Element.image=function(e){this.base=o.Element.RenderedElementBase,this.base(e);var t=this.getHrefAttribute().value;if(""!=t){var n=t.match(/\.svg$/);if(o.Images.push(this),this.loaded=!1,n)this.img=o.ajax(t),this.loaded=!0;else{var i=this.attributes["data-fallback-href"],a=function(){o.log('ERROR: image "'+t+'" not found'),this.loaded=!0}.bind(this);this.img=document.createElement("img"),o.opts.useCORS?(this.img.crossOrigin="Anonymous",this.img.onerror=i?function(){this.img.src=i.value,this.img.onerror=a}.bind(this):a):this.img.onerror=a,this.img.onload=function(){this.loaded=!0}.bind(this),this.img.src=t}this.renderChildren=function(e){var t=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0!=a&&0!=s){if(e.save(),n)e.drawSvg(this.img,t,i,a,s);else{e.translate(t,i),o.AspectRatio(e,this.attribute("preserveAspectRatio").value,a,this.img.width,s,this.img.height,0,0);try{e.drawImage(this.img,0,0)}catch(r){o.log("FAILED TO DRAW IMAGE",r)}}e.restore()}},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");return new o.BoundingBox(e,t,e+n,t+i)}}},o.Element.image.prototype=new o.Element.RenderedElementBase,o.Element.g=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new o.BoundingBox,t=0;t<this.children.length;t++)e.addBoundingBox(this.children[t].getBoundingBox());return e}},o.Element.g.prototype=new o.Element.RenderedElementBase,o.Element.symbol=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.render=function(){}},o.Element.symbol.prototype=new o.Element.RenderedElementBase,o.Element.style=function(e){this.base=o.Element.ElementBase,this.base(e);for(var t="",i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].data;t=t.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");var a=(t=o.compressSpaces(t)).split("}");for(i=0;i<a.length;i++)if(""!=o.trim(a[i]))for(var s=a[i].split("{"),r=s[0].split(","),l=s[1].split(";"),c=0;c<r.length;c++){var d=o.trim(r[c]);if(""!=d){for(var u=o.Styles[d]||{},_=0;_<l.length;_++){var h=l[_].indexOf(":"),p=l[_].substr(0,h),f=l[_].substr(h+1,l[_].length-h);null!=p&&null!=f&&(u[o.trim(p)]=new o.Property(o.trim(p),o.trim(f)))}if(o.Styles[d]=u,o.StylesSpecificity[d]=n(d),"@font-face"==d)for(var m=u["font-family"].value.replace(/"/g,""),g=u.src.value.split(","),v=0;v<g.length;v++)if(g[v].indexOf('format("svg")')>0)for(var b=g[v].indexOf("url"),y=g[v].indexOf(")",b),w=g[v].substr(b+5,y-b-6),x=o.parseXml(o.ajax(w)).getElementsByTagName("font"),S=0;S<x.length;S++){var T=o.CreateElement(x[S]);o.Definitions[m]=T}}}},o.Element.style.prototype=new o.Element.ElementBase,o.Element.use=function(e){this.base=o.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){this.baseSetContext(e),this.attribute("x").hasValue()&&e.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&e.translate(0,this.attribute("y").toPixels("y"))};var t=this.getHrefAttribute().getDefinition();this.path=function(e){null!=t&&t.path(e)},this.getBoundingBox=function(){if(null!=t)return t.getBoundingBox()},this.renderChildren=function(e){if(null!=t){var n=t;"symbol"==t.type&&((n=new o.Element.svg).type="svg",n.attributes.viewBox=new o.Property("viewBox",t.attribute("viewBox").value),n.attributes.preserveAspectRatio=new o.Property("preserveAspectRatio",t.attribute("preserveAspectRatio").value),n.attributes.overflow=new o.Property("overflow",t.attribute("overflow").value),n.children=t.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new o.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new o.Property("height",this.attribute("height").value)));var i=n.parent;n.parent=null,n.render(e),n.parent=i}}},o.Element.use.prototype=new o.Element.RenderedElementBase,o.Element.mask=function(e){this.base=o.Element.ElementBase,this.base(e),this.apply=function(e,t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==a&&0==s){for(var r=new o.BoundingBox,l=0;l<this.children.length;l++)r.addBoundingBox(this.children[l].getBoundingBox());n=Math.floor(r.x1),i=Math.floor(r.y1),a=Math.floor(r.width()),s=Math.floor(r.height())}var c=t.attribute("mask").value;t.attribute("mask").value="";var d=document.createElement("canvas");d.width=n+a,d.height=i+s;var u=d.getContext("2d");this.renderChildren(u);var _=document.createElement("canvas");_.width=n+a,_.height=i+s;var h=_.getContext("2d");t.render(h),h.globalCompositeOperation="destination-in",h.fillStyle=u.createPattern(d,"no-repeat"),h.fillRect(0,0,n+a,i+s),e.fillStyle=h.createPattern(_,"no-repeat"),e.fillRect(0,0,n+a,i+s),t.attribute("mask").value=c},this.render=function(){}},o.Element.mask.prototype=new o.Element.ElementBase,o.Element.clipPath=function(e){this.base=o.Element.ElementBase,this.base(e),this.apply=function(e){var t=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var n=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},t.call(e);for(var i=0;i<this.children.length;i++){var a=this.children[i];if("undefined"!=typeof a.path){var s=null;a.style("transform",!1,!0).hasValue()&&(s=new o.Transform(a.style("transform",!1,!0).value)).apply(e),a.path(e),CanvasRenderingContext2D.prototype.closePath=n,s&&s.unapply(e)}}n.call(e),e.clip(),CanvasRenderingContext2D.prototype.beginPath=t,CanvasRenderingContext2D.prototype.closePath=n},this.render=function(){}},o.Element.clipPath.prototype=new o.Element.ElementBase,o.Element.filter=function(e){this.base=o.Element.ElementBase,this.base(e),this.apply=function(e,t){var n=t.getBoundingBox(),i=Math.floor(n.x1),a=Math.floor(n.y1),s=Math.floor(n.width()),o=Math.floor(n.height()),r=t.style("filter").value;t.style("filter").value="";for(var l=0,c=0,d=0;d<this.children.length;d++){var u=this.children[d].extraFilterDistance||0;l=Math.max(l,u),c=Math.max(c,u)}var _=document.createElement("canvas");_.width=s+2*l,_.height=o+2*c;var h=_.getContext("2d");h.translate(-i+l,-a+c),t.render(h);for(d=0;d<this.children.length;d++)"function"==typeof this.children[d].apply&&this.children[d].apply(h,0,0,s+2*l,o+2*c);e.drawImage(_,0,0,s+2*l,o+2*c,i-l,a-c,s+2*l,o+2*c),t.style("filter",!0).value=r},this.render=function(){}},o.Element.filter.prototype=new o.Element.ElementBase,o.Element.feMorphology=function(e){this.base=o.Element.ElementBase,this.base(e),this.apply=function(){}},o.Element.feMorphology.prototype=new o.Element.ElementBase,o.Element.feComposite=function(e){this.base=o.Element.ElementBase,this.base(e),this.apply=function(){}},o.Element.feComposite.prototype=new o.Element.ElementBase,o.Element.feColorMatrix=function(e){function t(e,t,n,i,a,s){return e[n*i*4+4*t+s]}function n(e,t,n,i,a,s,o){e[n*i*4+4*t+s]=o}function i(e,t){var n=a[e];return n*(n<0?t-255:t)}this.base=o.Element.ElementBase,this.base(e);var a=o.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=a[0];a=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var r=a[0]*Math.PI/180,l=function(e,t,n){return e+Math.cos(r)*t+Math.sin(r)*n};a=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(e,a,s,o,r){var l=e.getImageData(0,0,o,r);for(s=0;s<r;s++)for(a=0;a<o;a++){var c=t(l.data,a,s,o,r,0),d=t(l.data,a,s,o,r,1),u=t(l.data,a,s,o,r,2),_=t(l.data,a,s,o,r,3);n(l.data,a,s,o,r,0,i(0,c)+i(1,d)+i(2,u)+i(3,_)+i(4,1)),n(l.data,a,s,o,r,1,i(5,c)+i(6,d)+i(7,u)+i(8,_)+i(9,1)),n(l.data,a,s,o,r,2,i(10,c)+i(11,d)+i(12,u)+i(13,_)+i(14,1)),n(l.data,a,s,o,r,3,i(15,c)+i(16,d)+i(17,u)+i(18,_)+i(19,1))}e.clearRect(0,0,o,r),e.putImageData(l,0,0)}},o.Element.feColorMatrix.prototype=new o.Element.ElementBase,o.Element.feGaussianBlur=function(e){this.base=o.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,n,i,a,s){"undefined"!=typeof t.canvasRGBA?(e.canvas.id=o.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),t.canvasRGBA(e.canvas.id,n,i,a,s,this.blurRadius),document.body.removeChild(e.canvas)):o.log("ERROR: StackBlur.js must be included for blur to work")}},o.Element.feGaussianBlur.prototype=new o.Element.ElementBase,o.Element.title=function(){},o.Element.title.prototype=new o.Element.ElementBase,o.Element.desc=function(){},o.Element.desc.prototype=new o.Element.ElementBase,o.Element.MISSING=function(e){o.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")},o.Element.MISSING.prototype=new o.Element.ElementBase,o.CreateElement=function(e){var t=e.nodeName.replace(/^[^:]+:/,"");t=t.replace(/\-/g,"");var n=null;return(n="undefined"!=typeof o.Element[t]?new o.Element[t](e):new o.Element.MISSING(e)).type=e.nodeName,n},o.load=function(e,t){o.loadXml(e,o.ajax(t))},o.loadXml=function(e,t){o.loadXmlDoc(e,o.parseXml(t))},o.loadXmlDoc=function(e,t){o.init(e);var n=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=o.opts.ignoreMouse&&(e.canvas.onclick=function(e){var t=n(new o.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));o.Mouse.onclick(t.x,t.y)},e.canvas.onmousemove=function(e){var t=n(new o.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));o.Mouse.onmousemove(t.x,t.y)});var i=o.CreateElement(t.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var a=!0,s=function(){o.ViewPort.Clear(),e.canvas.parentNode&&o.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=o.opts.ignoreDimensions&&(i.style("width").hasValue()&&(e.canvas.width=i.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),i.style("height").hasValue()&&(e.canvas.height=i.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var n=e.canvas.clientWidth||e.canvas.width,s=e.canvas.clientHeight||e.canvas.height;if(1==o.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(n=i.style("width").toPixels("x"),s=i.style("height").toPixels("y")),o.ViewPort.SetCurrent(n,s),null!=o.opts.offsetX&&(i.attribute("x",!0).value=o.opts.offsetX),null!=o.opts.offsetY&&(i.attribute("y",!0).value=o.opts.offsetY),null!=o.opts.scaleWidth||null!=o.opts.scaleHeight){var r=null,l=null,c=o.ToNumberArray(i.attribute("viewBox").value);null!=o.opts.scaleWidth&&(i.attribute("width").hasValue()?r=i.attribute("width").toPixels("x")/o.opts.scaleWidth:isNaN(c[2])||(r=c[2]/o.opts.scaleWidth)),null!=o.opts.scaleHeight&&(i.attribute("height").hasValue()?l=i.attribute("height").toPixels("y")/o.opts.scaleHeight:isNaN(c[3])||(l=c[3]/o.opts.scaleHeight)),null==r&&(r=l),null==l&&(l=r),i.attribute("width",!0).value=o.opts.scaleWidth,i.attribute("height",!0).value=o.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/r+","+1/l+")"}1!=o.opts.ignoreClear&&e.clearRect(0,0,n,s),i.render(e),a&&(a=!1,"function"==typeof o.opts.renderCallback&&o.opts.renderCallback(t))},r=!0;o.ImagesLoaded()&&(r=!1,s()),o.intervalID=setInterval(function(){var e=!1;if(r&&o.ImagesLoaded()&&(r=!1,e=!0),1!=o.opts.ignoreMouse&&(e|=o.Mouse.hasEvents()),1!=o.opts.ignoreAnimation)for(var t=0;t<o.Animations.length;t++)e|=o.Animations[t].update(1e3/o.FRAMERATE);"function"==typeof o.opts.forceRedraw&&1==o.opts.forceRedraw()&&(e=!0),e&&(s(),o.Mouse.runEvents())},1e3/o.FRAMERATE)},o.stop=function(){o.intervalID&&clearInterval(o.intervalID)},o.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(e){e.onclick&&e.onclick()}})},this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(e){e.onmousemove&&e.onmousemove()}})},this.eventElements=[],this.checkPath=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInPath&&t.isPointInPath(i.x,i.y)&&(this.eventElements[n]=e)}},this.checkBoundingBox=function(e,t){for(var n=0;n<this.events.length;n++){var i=this.events[n];t.isPointInBox(i.x,i.y)&&(this.eventElements[n]=e)}},this.runEvents=function(){o.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var t=this.events[e],n=this.eventElements[e];n;)t.run(n),n=n.parent;this.events=[],this.eventElements=[]}},o}var s,o=function(e,t,n){if(null!=e||null!=t||null!=n){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var i=a(n||{});1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=i);var s=e.getContext("2d");"undefined"!=typeof t.documentElement?i.loadXmlDoc(s,t):"<"==t.substr(0,1)?i.loadXml(s,t):i.load(s,t)}else for(var r=document.querySelectorAll("svg"),l=0;l<r.length;l++){var c=r[l],d=document.createElement("canvas");d.width=c.clientWidth,d.height=c.clientHeight,c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c);var u=document.createElement("div");u.appendChild(c),o(d,u.innerHTML)}};"undefined"!=typeof Element.prototype.matches?s=function(e,t){return e.matches(t)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?s=function(e,t){return e.webkitMatchesSelector(t)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?s=function(e,t){return e.mozMatchesSelector(t)}:"undefined"!=typeof Element.prototype.msMatchesSelector?s=function(e,t){return e.msMatchesSelector(t)}:"undefined"!=typeof Element.prototype.oMatchesSelector?s=function(e,t){return e.oMatchesSelector(t)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(s=function(e,t){return $(e).is(t)}),void 0===s&&(s=Sizzle.matchesSelector));var r=/(\[[^\]]+\])/g,l=/(#[^\s\+>~\.\[:]+)/g,c=/(\.[^\s\+>~\.\[:]+)/g,d=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:[\w-]+\([^\)]*\))/gi,_=/(:[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(e,t,n,i,a){o(this.canvas,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:n,scaleWidth:i,scaleHeight:a})}),o});var StudyAidPlayer=Backbone.View.extend({events:{"click .player_play:not(.disabled)":"play","click .player_next:not(.disabled)":"next","click .player_prev:not(.disabled)":"prev","click .player_check_answer":"check_answer","click .player_pause":"pause","click .embed_click_overlay":"pause","click .player_progress_container":"seek","click .full_screen":"full_screen","click .player_prev":"prev_click","click .player_next":"next_click"},initialize:function(){_.bindAll(this,"update_progress_bar","adjust_speed"),this.reset(),this.controls_locked=!1},reset:function(){this.start_frame=0,this.frame=this.start_frame,this.previous_frame=0,this.number_of_frames=0,this.PLAY_SPEEDS=[2e3,1500,1e3,800,600],this.initial_play_speed=1e3,this.play_speed=this.initial_play_speed,this.animation_speed=600,this.has_been_played=!1,this.playing=!1,this.enable_seek=!0},init_slider:function(){var e=this;this.$(".play_speed_adjust").slider({min:0,max:this.PLAY_SPEEDS.length-1,step:1,change:e.adjust_speed,value:$.inArray(this.play_speed,this.PLAY_SPEEDS)}),this.$(".play_speed_adjust").attr("title",I18n.t("player.speed"));var t=_.throttle(e.update_progress_bar,200);PAGE_EVENTS.on("window:resize",t)},adjust_speed:function(e,t){this.play_speed=this.PLAY_SPEEDS[t.value]},adjust_speed_and_update_slider:function(e){this.play_speed=this.PLAY_SPEEDS[e],this.$(".play_speed_adjust").slider("value",0)},play:function(){var e=this;if(0!==this.number_of_frames){this.playing=!0,this.has_been_played=!0,this.$(".player_play").hide(),this.$(".player_pause").show(),this.frame+1!==this.number_of_frames&&this.frame!==this.start_frame||this.restart(),this.trigger("play");var t=function(){e.playing&&(e.next({keep_playing:!0}),e.play_cycle=setTimeout(t,e.play_speed))};t(),this.$(".embed_click_overlay").show(),track_event("view_resource",this._get_action("play"))}},prev_click:function(){this.trigger("prev_click"),track_event("view_resource",this._get_action("prev"))},next_click:function(){this.trigger("next_click"),track_event("view_resource",this._get_action("next"))},restart:function(){"undefined"!=typeof this.play_cycle&&clearTimeout(this.play_cycle),this.set_frame(this.start_frame),this.trigger("restart")},stop_playing:function(e){var t=this.playing;this.playing=!1,"undefined"!=typeof this.play_cycle&&clearTimeout(this.play_cycle),this.$(".player_pause").hide(),this.$(".player_play").show(),this.$(".embed_click_overlay").hide(),void 0!==e&&e.quiet||t&&this.$(".player_pause_overlay").attr("style","").show().animate({opacity:0,"font-size":"120px"},350,function(){self.$(".player_pause_overlay").attr("style","").hide()})},pause:function(e){this.stop_playing(e),this.set_frame(this.frame),this.trigger("pause"),track_event("view_resource",this._get_action("pause"))},next:_.debounce(function(e){if(!this.has_been_played)return this.set_frame(this.start_frame+1),this.trigger("restart"),this.trigger("next"),void(this.has_been_played=!0);e&&e.keep_playing?this.frame+1<this.number_of_frames?(this.set_frame(this.frame+1),this.trigger("next")):this.playing&&this.pause({quiet:!0}):(this.stop_playing({quiet:!0}),this.frame+1<this.number_of_frames&&(this.set_frame(this.frame+1),this.trigger("next")))},500,!0),submit:function(){this.frame+1<this.number_of_frames&&(this.set_frame(this.frame+1),this.trigger("submit"))},prev:_.debounce(function(){if(!this.has_been_played)return this.set_frame(this.start_frame),this.trigger("restart"),void(this.has_been_played=!0);this.stop_playing({quiet:!0}),this.frame>this.start_frame&&(this.set_frame(this.frame-1),this.trigger("prev"))},500,!0),check_answer:function(){this.trigger("check_answer")},get_animation_speed:function(){return this.animation_speed},get_frame:function(){return this.frame},get_previous_frame:function(){return this.previous_frame},get_playing:function(){return this.playing},get_start_frame:function(){return this.start_frame},skip_to_last_frame:function(){this.set_frame(this.number_of_frames-1),this.trigger("last:frame")},update_progress_bar:function(e){var t=(this.frame-this.start_frame)/(this.number_of_frames-(1+this.start_frame))*this.$(".player_progress_container").width(),n=this.$(".player_progress");void 0!==e&&e.animate?n.animate({width:t+"px"},{duration:this.play_speed,easing:"linear"}):(n.stop(!0,!0),n.width(t))},skip_to_frame:function(e){this.stop_playing({quiet:!0}),this.set_frame(e),this.trigger("seek")},set_frame:function(e){var t;e!=this.frame&&(this.previous_frame=this.frame),this.frame=e,this.playing&&this.frame!==this.start_frame&&(t={animate:!0}),this.update_progress_bar(t),this.update_buttons()},update_buttons:function(){this.enable_prev(),this.enable_next(),this.enable_play(),this.frame===this.start_frame&&this.disable_prev(),this.frame===this.number_of_frames-1&&this.disable_next(),0===this.number_of_frames&&this.disable_play()},disable_seek:function(){this.enable_seek=!1},disable_prev:function(){this.$(".player_prev").addClass("disabled")},enable_prev:function(){this.$(".player_prev").removeClass("disabled")},disable_next:function(){this.$(".player_next").addClass("disabled")},enable_next:function(){this.$(".player_next").removeClass("disabled")},disable_play:function(){this.$(".player_play").addClass("disabled")},enable_play:function(){this.$(".player_play").removeClass("disabled")},seek:function(e){if(this.enable_seek){this.has_been_played=!0;var t=this.$(".player_progress_container"),n=t.width(),i=this.pageX(e)-t.offset().left,a=n/(this.number_of_frames-(1+this.start_frame))/2,s=parseInt((i+a)/n*(this.number_of_frames-(1+this.start_frame)),10)+this.start_frame;this.stop_playing(),this.set_frame(s),this.trigger("seek"),track_event("view_resource",this._get_action("seek"))}},pageX:function(e){return e.pageX?e.pageX:e.originalEvent instanceof TouchEvent?e.originalEvent.changedTouches[0].pageX:void 0},set_start_frame:function(e){this.start_frame=e,this.frame=this.start_frame},set_number_of_frames:function(e){this.number_of_frames=e,this.update_buttons()},is_last_frame:function(){return this.frame+1===this.number_of_frames},is_first_frame:function(){return this.frame===this.start_frame},reset_player_controls:function(){this.$(".player_pause").hide(),this.$(".player_play").show()},full_screen:function(){this.trigger("full_screen_toggle"),track_event("view_resource",this._get_action("full_screen"))},_get_action:function(e){return _.compact([$("#study_aid_meta_details #study_aid_type").html(),e]).join(":")}}),STUDY_AID_PLAYER=new StudyAidPlayer;$(document).on("quiz_viewer:init flash_card_viewer:init mind_map:init slide_set:init notes:init",function(){$(".player_controls").length>0&&(STUDY_AID_PLAYER.off(),STUDY_AID_PLAYER.reset(),STUDY_AID_PLAYER.setElement($(".public_frame, .frame_body")),STUDY_AID_PLAYER.init_slider())});var COMPLETION_MARKER=function(e){this.get_completable=function(){return e};var t=null,n=null,i=!1;this.get_id=function(){return t},this.set_id=function(e){t=e},this.is_completed=function(){return!!this.get_id()},this.get_locked=function(){return i},this.set_locked=function(e){i=e},this.get_completion_marker_checkbox=function(){return n},this.render=function(e){n=a(this,e)},this.get_completion_marker_checkbox_object_set=function(){var e=this,t=this.get_completable().get_paper().set();return t.push(e.get_completion_marker_checkbox(),e.get_completion_marker_checkbox().path),t},this.show=function(){this.get_completion_marker_checkbox().visible()},this.hide=function(){this.get_completion_marker_checkbox().not_visible()},this.toggle_completion_marker=function(e){this.set_id(e),this.set_locked(!1),s(this)},this.apply_node_changes=function(){var e=hsl(0,0,83),t=STUDY_AID_PLAYER.get_animation_speed(),n=this.is_completed()?MINDMAP_config.completed_node_opacity:MINDMAP_config.default_node_opacity,i=this.get_completable(),a=this.is_completed()?e:i.get_original_color(),s=this;this.get_completion_marker_checkbox_object_set().animate({opacity:n},t,"linear",function(){s.get_completion_marker_checkbox().attr({stroke:a}),s.get_completion_marker_checkbox().path.attr({stroke:a})}),i.is_media()||i.get_object_set().animate({opacity:n},t,"linear",function(){var e=s.get_completable().get_connector();void 0!==e&&e.attr({opacity:n}),i.set_color(a)})},this.remove_node_changes=function(){var e=MINDMAP_config.default_node_opacity,t=this.get_completable(),n=this;t.is_media()||(t.set_color(t.get_original_color()),t.get_object_set().animate({opacity:e},STUDY_AID_PLAYER.get_animation_speed(),"linear",function(){var t=n.get_completable().get_connector();void 0!==t&&t.attr({opacity:e})}))};var a=function(t,n){var i=25,a=t.get_completable().get_color();if(e.is_media()){var s=t.get_completable().get_x()-i-1,o=t.get_completable().get_y()-i-1;a="#BDBDBD"}else{e.is_central_node()&&(i=30);var r=e.get_shape().get_x_and_y_to_update_completion_marker_position(i);s=r.x,o=r.y}var l=n.CheckBox({x:s,y:o,dim:i,rounded_corners:3,color:a,isChecked:t.is_completed()});return l.change=function(){e.is_playing()||t.get_locked()?l.check(t.is_completed()):(t.set_locked(!0),t.is_completed()?COMPLETION_MARKER_AJAX_CALLS.destroy_completion_marker_on_server(t):COMPLETION_MARKER_AJAX_CALLS.create_completion_marker_on_server(t,1))},l},s=function(e){e.get_completion_marker_checkbox().check(e.is_completed()),e.apply_node_changes(),e.get_completable().is_revealed()||e.hide()}},COMPLETION_MARKER_AJAX_CALLS=new function(){this.get_completion_markers_and_render=function(){var e,t=$.query_string("uid");e=t?Routes.completion_markers_path({study_aid_id:MINDMAP.id,uid:t}):Routes.completion_markers_path({study_aid_id:MINDMAP.id}),$.ajax({type:"GET",dataType:"json",url:e,success:function(e){a(e),s(e),COMPLETION_MARKER_BAR.update_tracking_panel()}})},this.create_completion_marker_on_server=function(e,t){var i={completion_marker:{completed:t,completable_id:e.get_completable().get_id(),completable_type:e.get_completable().get_completable_type()},study_aid_id:e.get_completable().get_study_aid_id()},a=$.query_string("uid");a&&(i.uid=a),$.ajax({type:"POST",dataType:"json",url:Routes.completion_markers_path(),data:i,success:function(t){n(e,t.id,t.total,t.completed)}})},this.destroy_completion_marker_on_server=function(e){var t={study_aid_id:e.get_completable().get_study_aid_id()},i=$.query_string("uid");i&&(t.uid=i),$.ajax({type:"DELETE",dataType:"json",url:Routes.completion_marker_path(e.get_id()),data:t,success:function(t){n(e,null,t.total,t.completed)}})},this.batch_create_completion_marker_on_server=function(t,n){var i=0,a=[];$.each(t,function(e,t){i=t.get_study_aid_id(),a.push({completed:n,completable_id:t.get_id(),completable_type:t.get_completable_type()})});var s,o=$.query_string("uid");s=o?JSON.stringify({completion_markers:a,study_aid_id:i,uid:o}):JSON.stringify({completion_markers:a,study_aid_id:i}),$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:Routes.batch_create_completion_markers_path(),data:s,success:function(n){e(t,n.completion_markers_created,n.total,n.completed)}})},this.batch_destroy_completion_marker_on_server=function(e){var n=0,i=[];$.each(e,function(e,t){n=t.get_study_aid_id(),i.push({id:t.get_completion_marker().get_id()})});var a,s=$.query_string("uid");a=s?JSON.stringify({completion_markers:i,study_aid_id:n,uid:s}):JSON.stringify({completion_markers:i,study_aid_id:n}),$.ajax({type:"DELETE",dataType:"json",contentType:"application/json",url:Routes.batch_destroy_completion_markers_path(),data:a,success:function(n){t(e,n.total,n.completed)}})},this.batch_create_all_completion_marker_on_server=function(t,n,i){var a,s=$.query_string("uid");a=s?JSON.stringify({study_aid_id:n,completed:i,uid:s}):JSON.stringify({study_aid_id:n,completed:i}),$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:Routes.batch_create_all_completion_markers_path(),data:a,success:function(n){e(t,n.completion_markers_created,n.total,n.completed)}})},this.batch_destroy_all_completion_marker_on_server=function(e,n){var i,a=$.query_string("uid");i=a?JSON.stringify({study_aid_id:n,uid:a}):JSON.stringify({study_aid_id:n}),$.ajax({type:"DELETE",dataType:"json",contentType:"application/json",url:Routes.batch_destroy_all_completion_markers_path(),data:i,success:function(n){t(e,n.total,n.completed)}})
};var e=function(e,t,n,i){var a=JSON.parse(t);if(a.length>0){var s=new Array;$.each(a,function(e,t){t.completed&&(s[t.completable_id]=t.id)}),$.each(e,function(e,t){t.get_completion_marker().toggle_completion_marker(s[t.get_id()])}),COMPLETION_MARKER_BAR.update_tracking_panel(n,i)}},t=function(e,t,n){$.each(e,function(e,t){t.get_completion_marker().toggle_completion_marker(null)}),COMPLETION_MARKER_BAR.update_tracking_panel(t,n)},n=function(e,t,n,a){e.toggle_completion_marker(t);var s=[];i(e,e.get_completable(),s),s.length>0?e.is_completed()?COMPLETION_MARKER_AJAX_CALLS.batch_create_completion_marker_on_server(s,1):COMPLETION_MARKER_AJAX_CALLS.batch_destroy_completion_marker_on_server(s):COMPLETION_MARKER_BAR.update_tracking_panel(n,a)},i=function(e,t,n){var a=t.childNodes;a.length>0&&$.each(a,function(t,a){e.is_completed()?a.get_completion_marker().is_completed()||n.push(a):a.get_completion_marker().is_completed()&&n.push(a),i(e,a,n)})},a=function(e){$.each(MINDMAP.nodes,function(t,n){n.get_completion_marker()||n.render_completion_marker(e[n.get_id()])})},s=function(e){$.each(MINDMAP.nodes,function(t,n){e[n.get_id()]&&n.get_completion_marker().set_id(e[n.get_id()]),n.is_revealed()&&(n.get_completion_marker().apply_node_changes(),n.get_completion_marker().show())})}};
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)}}),
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",t)&&n._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),a=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&a[0]===this.element[0]&&this._setPositionRelative(),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,a=this.options,s=this.document[0];this.relativeContainer=null,a.containment?"window"!==a.containment?"document"!==a.containment?a.containment.constructor!==Array?("parent"===a.containment&&(a.containment=this.helper[0].parentNode),(i=(n=e(a.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=a.containment:this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,a,s,o=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),o.grid&&(a=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-o.grid[1]:a+o.grid[1]:a,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var a=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,a))})},stop:function(t,n,i){var a=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,a))})},drag:function(t,n,i){e.each(i.sortables,function(){var a=!1,s=this;s.positionAbs=i.positionAbs,s.helperProportions=i.helperProportions,s.offset.click=i.offset.click,s._intersectsWith(s.containerCache)&&(a=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(a=!1),a})),a?(s.isOver||(s.isOver=1,i._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=i.offset.click.top,s.offset.click.left=i.offset.click.left,s.offset.parent.left-=i.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=i.offset.parent.top-s.offset.parent.top,i._trigger("toSortable",t),i.dropped=s.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,s.fromOutside=i),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var a=e("body"),s=i.options;a.css("cursor")&&(s._cursor=a.css("cursor")),a.css("cursor",s.cursor)},stop:function(t,n,i){var a=i.options;a._cursor&&e("body").css("cursor",a._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var a=e(n.helper),s=i.options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(t,n,i){var a=i.options;a._opacity&&e(n.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var a=i.options,s=!1,o=i.scrollParentNotHidden[0],r=i.document[0];o!==r&&"HTML"!==o.tagName?(a.axis&&"x"===a.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<a.scrollSensitivity?o.scrollTop=s=o.scrollTop+a.scrollSpeed:t.pageY-i.overflowOffset.top<a.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<a.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+a.scrollSpeed:t.pageX-i.overflowOffset.left<a.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(r).scrollTop()<a.scrollSensitivity?s=e(r).scrollTop(e(r).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<a.scrollSensitivity&&(s=e(r).scrollTop(e(r).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(r).scrollLeft()<a.scrollSensitivity?s=e(r).scrollLeft(e(r).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<a.scrollSensitivity&&(s=e(r).scrollLeft(e(r).scrollLeft()+a.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var a=i.options;i.snapElements=[],e(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var a,s,o,r,l,c,d,u,_,h,p=i.options,f=p.snapTolerance,m=n.offset.left,g=m+i.helperProportions.width,v=n.offset.top,b=v+i.helperProportions.height;for(_=i.snapElements.length-1;_>=0;_--)c=(l=i.snapElements[_].left-i.margins.left)+i.snapElements[_].width,u=(d=i.snapElements[_].top-i.margins.top)+i.snapElements[_].height,g<l-f||m>c+f||b<d-f||v>u+f||!e.contains(i.snapElements[_].item.ownerDocument,i.snapElements[_].item)?(i.snapElements[_].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[_].item})),i.snapElements[_].snapping=!1):("inner"!==p.snapMode&&(a=Math.abs(d-b)<=f,s=Math.abs(u-v)<=f,o=Math.abs(l-g)<=f,r=Math.abs(c-m)<=f,a&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),h=a||s||o||r,"outer"!==p.snapMode&&(a=Math.abs(d-v)<=f,s=Math.abs(u-b)<=f,o=Math.abs(l-m)<=f,r=Math.abs(c-g)<=f,a&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[_].snapping&&(a||s||o||r||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[_].item})),i.snapElements[_].snapping=a||s||o||r||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var a,s=i.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(a=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",a+t)}),this.css("zIndex",a+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var a=e(n.helper),s=i.options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(t,n,i){var a=i.options;a._zIndex&&e(n.helper).css("zIndex",a._zIndex)}}),e.ui.draggable});var COMPLETION_MARKER_BAR=function(e){var t='<div class="tracking_bar"><div class="check_boxes_wrapper"><span id="track_all">'+I18n.t("study_aids.user_performance.completion_markers.track_all_label")+'<i class="icon-check-empty"></i></span><span id="untrack_all" style="display:none;">'+I18n.t("study_aids.user_performance.completion_markers.untrack_all_label")+'<i class="icon-check"></i></span></div><div class="plot_wrapper"><canvas id="plot" height="40" width="40"></canvas><span class="tracking_percentage"></span></div></div>',n=function(){i($(".tracking_bar #untrack_all").is(":visible"))},i=function(e){e?($(".tracking_bar #untrack_all").hide(),$(".tracking_bar #track_all").show()):($(".tracking_bar #track_all").hide(),$(".tracking_bar #untrack_all").show())},a=function(e,t){$(".tracking_bar .tracking_percentage").html((e>0?Math.round(100*t/e):"100")+"%")},s=function(e,t){var n=1,i=0;e>0&&(n=t,i=e-t);var a=$(".tracking_bar #plot").get(0).getContext("2d");new Chart(a).Pie([{value:n,color:"#c4d564"},{value:i,color:"#f76161"}],{animationSteps:50,animateScale:!0,animationEasing:"easeOutSine",segmentShowStroke:!1})},o=function(){return MINDMAP.total_nodes()},r=function(){var e=0;return $.each(MINDMAP.nodes,function(t,n){n.get_completion_marker().is_completed()&&e++}),e},l=function(e){var t=[];$.each(MINDMAP.nodes,function(n,i){e?i.get_completion_marker().is_completed()||t.push(i):i.get_completion_marker().is_completed()&&t.push(i)}),t.length>0&&(e?COMPLETION_MARKER_AJAX_CALLS.batch_create_completion_marker_on_server(t,e):COMPLETION_MARKER_AJAX_CALLS.batch_destroy_completion_marker_on_server(t))},c=function(){$("#tracking_panel").fadeIn()},d=function(){$("#tracking_panel").fadeOut()};return e.init=function(){$("#tracking_panel").prepend(t),$("#tracking_panel").draggable({containment:"#canvas_container"})},e.update_tracking_panel=function(e,t){void 0===e&&(e=o()),void 0===t&&(t=r()),a(e,t),s(e,t),e===t?i(!1):0===t&&i(!0)},e.stop_tracking=function(){$(".btn.tracking.on").hide(),$(".btn.tracking.off").show(),d(),$.each(MINDMAP.nodes,function(e,t){t.get_completion_marker().remove_node_changes(),t.get_completion_marker().hide()})},e.start_tracking=function(){$(".btn.tracking.on").show(),$(".btn.tracking.off").hide(),c(),COMPLETION_MARKER_AJAX_CALLS.get_completion_markers_and_render()},$(document).on("click",".tracking_bar #track_all",function(e){e.preventDefault(),n(),l(!0)}),$(document).on("click",".tracking_bar #untrack_all",function(e){e.preventDefault(),n(),l(!1)}),$(document).on("click",".btn.tracking",function(t){t.preventDefault(),MINDMAP.tracking_mode=!MINDMAP.tracking_mode,MINDMAP.tracking_mode?e.start_tracking():e.stop_tracking()}),e}(COMPLETION_MARKER_BAR||{}),MINDMAP_config={debug_text_rect:!1,offset_x:0,offset_y:0,controls_height:55,central_node_default_text_size:40,default_shape:"rounded_rectangle",default_corner_radius:21,default_stroke_weight:0,default_stroke_weight_outline:2,default_node_width:100,default_node_height:42,default_node_fill_color:"hsl(197, 64, 59)",default_stroke_color:"hsl(0,0,0)",default_text_font:"OpenSans",default_text_font_key:"sans_two",default_text_size:16,default_text_color:"hsl(0,0,0)",new_node_text_color:"hsl(178, 0%, 45%)",hover_stroke_color:"hsl(0,0,50)",hover_stroke_weight:2,select_stroke_color:"hsl(0,0,30)",select_stroke_weight:2,select_outline_stroke_weight:5,image_hover_stroke_color:"hsl(0,0,60)",image_hover_stroke_weight:2,image_select_stroke_color:"hsl(0,0,30)",image_select_stroke_weight:2,default_node_opacity:1,completed_node_opacity:.5,dummy_new_node_id:-1,min_node_width:36,min_node_height:36,min_image_width:20,min_image_height:20,node_padding:20,color_palette_saturation:75,color_palette_lightness:50,maximum_color_lightness:90,level_lightness_step:8,default_text:I18n.t("mind_maps.default_text"),image_folder:"/assets/",default_connector_stroke_weight:4,default_abstract_connector_stroke_weight:1,newNodeButtonImage:"/assets/icon_add.png",toolbars:new function(){this.general_icon_size=24,this.new_node_icon_size=26,this.spacing_between_buttons=4,this.inner_padding=5,this.default_height=this.general_icon_size+2*this.inner_padding,this.offset_from_node=2,this.background_opacity=.3,this.fade_out_time=150,this.slider_toolbar_width=120,this.color_picker_height=4,this.color_picker_hue_range=340,this.min_text_size=16,this.max_text_size=26,this.text_size_range=this.max_text_size-this.min_text_size,this.central_node_min_text_size=32,this.central_node_max_text_size=50,this.central_node_text_size_range=this.central_node_max_text_size-this.central_node_min_text_size,this.button_color="#333",this.button_color_highlighted="#000",this.button_dimmed_color="#888",this.button_disabled_color="#AAA"}};!function(e){function t(e,i){if("object"==typeof(e=e||"")&&e.hasOwnProperty("_tc_id"))return e;var s=n(e),r=s.r,c=s.g,d=s.b,u=parseFloat(s.a),_=x(100*u)/100,h=s.format;return r<1&&(r=x(r)),c<1&&(c=x(c)),d<1&&(d=x(d)),{ok:s.ok,format:h,_tc_id:y++,alpha:u,toHsv:function(){var e=o(r,c,d);return{h:360*e.h,s:e.s,v:e.v,a:u}},toHsvString:function(){var e=o(r,c,d),t=x(360*e.h),n=x(100*e.s),i=x(100*e.v);return 1==u?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+_+")"},toHsl:function(){var e=a(r,c,d);return{h:360*e.h,s:e.s,l:e.l,a:u}},toHslString:function(){var e=a(r,c,d),t=x(360*e.h),n=x(100*e.s),i=x(100*e.l);return 1==u?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+_+")"},toHex:function(){return l(r,c,d)},toHexString:function(){return"#"+l(r,c,d)},toRgb:function(){return{r:x(r),g:x(c),b:x(d),a:u}},toRgbString:function(){return 1==u?"rgb("+x(r)+", "+x(c)+", "+x(d)+")":"rgba("+x(r)+", "+x(c)+", "+x(d)+", "+_+")"},toName:function(){return I[l(r,c,d)]||!1},toFilter:function(){var e=secondHex=l(r,c,d),n=secondAlphaHex=Math.round(255*parseFloat(u)).toString(16),a=i&&i.gradientType?"GradientType = 1, ":"";if(secondColor){var s=t(secondColor);secondHex=s.toHex(),secondAlphaHex=Math.round(255*parseFloat(s.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr=#"+f(n)+e+",endColorstr=#"+f(secondAlphaHex)+secondHex+")"},toString:function(e){var t=!1;return"rgb"===(e=e||this.format)&&(t=this.toRgbString()),"hex"===e&&(t=this.toHexString()),"name"===e&&(t=this.toName()),"hsl"===e&&(t=this.toHslString()),"hsv"===e&&(t=this.toHsvString()),t||this.toHexString()}}}function n(e){var t={r:255,g:255,b:255},n=1,a=!1,o=!1;if("string"==typeof e&&(e=g(e)),"object"==typeof e){if(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b"))t=i(e.r,e.g,e.b),a=!0,o="rgb";else if(e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v"))e.s=m(e.s),e.v=m(e.v),t=r(e.h,e.s,e.v),a=!0,o="hsv";else if(e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")){e.s=m(e.s),e.l=m(e.l);t=s(e.h,e.s,e.l);a=!0,o="hsl"}e.hasOwnProperty("a")&&(n=e.a)}return{ok:a,format:e.format||o,r:S(255,T(t.r,0)),g:S(255,T(t.g,0)),b:S(255,T(t.b,0)),a:n}}function i(e,t,n){return{r:255*d(e,255),g:255*d(t,255),b:255*d(n,255)}}function a(e,t,n){e=d(e,255),t=d(t,255),n=d(n,255);var i,a,s=T(e,t,n),o=S(e,t,n),r=(s+o)/2;if(s==o)i=a=0;else{var l=s-o;switch(a=r>.5?l/(2-s-o):l/(s+o),s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,l:r}}function s(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var a,s,o;if(e=d(e,360),t=d(t,100),n=d(n,100),0==t)a=s=o=n;else{var r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;a=i(l,r,e+1/3),s=i(l,r,e),o=i(l,r,e-1/3)}return{r:255*a,g:255*s,b:255*o}}function o(e,t,n){e=d(e,255),t=d(t,255),n=d(n,255);var i,a,s=T(e,t,n),o=S(e,t,n),r=s,l=s-o;if(a=0==s?0:l/s,s==o)i=0;else{switch(s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,v:r}}function r(e,t,n){e=6*d(e,360),t=d(t,100),n=d(n,100);var i=w.floor(e),a=e-i,s=n*(1-t),o=n*(1-a*t),r=n*(1-(1-a)*t),l=i%6;return{r:255*[n,o,s,s,r,n][l],g:255*[r,n,n,o,s,s][l],b:255*[s,s,r,n,n,o][l]}}function l(e,t,n){var i=[f(x(e).toString(16)),f(x(t).toString(16)),f(x(n).toString(16))];return i[0][0]==i[0][1]&&i[1][0]==i[1][1]&&i[2][0]==i[2][1]?i[0][0]+i[1][0]+i[2][0]:i.join("")}function c(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function d(e,t){h(e)&&(e="100%");var n=p(e);return e=S(t,T(0,parseFloat(e))),n&&(e=parseInt(e*t)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function u(e){return S(1,T(0,e))}function _(e){return parseInt(e,16)}function h(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function p(e){return"string"==typeof e&&-1!=e.indexOf("%")}function f(e){return 1==e.length?"0"+e:""+e}function m(e){return e<=1&&(e=100*e+"%"),e}function g(e){e=e.replace(v,"").replace(b,"").toLowerCase();var t,n=!1;if(A[e])e=A[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0};return(t=D.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=D.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=D.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=D.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=D.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=D.hex6.exec(e))?{r:_(t[1]),g:_(t[2]),b:_(t[3]),format:n?"name":"hex"}:!!(t=D.hex3.exec(e))&&{r:_(t[1]+""+t[1]),g:_(t[2]+""+t[2]),b:_(t[3]+""+t[3]),format:n?"name":"hex"}}var v=/^[\s,#]+/,b=/\s+$/,y=0,w=Math,x=w.round,S=w.min,T=w.max,M=w.random;t.fromRatio=function(e){if("object"==typeof e){var n={};for(var i in e)n[i]=m(e[i]);e=n}return t(e)},t.equals=function(e,n){return!(!e||!n)&&t(e).toRgbString()==t(n).toRgbString()},t.random=function(){return t.fromRatio({r:M(),g:M(),b:M()})},t.desaturate=function(e,n){var i=t(e).toHsl();return i.s-=(n||10)/100,i.s=u(i.s),t(i)},t.saturate=function(e,n){var i=t(e).toHsl();return i.s+=(n||10)/100,i.s=u(i.s),t(i)},t.greyscale=function(e){return t.desaturate(e,100)},t.lighten=function(e,n){var i=t(e).toHsl();return i.l+=(n||10)/100,i.l=u(i.l),t(i)},t.darken=function(e,n){var i=t(e).toHsl();return i.l-=(n||10)/100,i.l=u(i.l),t(i)},t.complement=function(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)},t.triad=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+120)%360,s:n.s,l:n.l}),t({h:(i+240)%360,s:n.s,l:n.l})]},t.tetrad=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+90)%360,s:n.s,l:n.l}),t({h:(i+180)%360,s:n.s,l:n.l}),t({h:(i+270)%360,s:n.s,l:n.l})]},t.splitcomplement=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+72)%360,s:n.s,l:n.l}),t({h:(i+216)%360,s:n.s,l:n.l})]},t.analogous=function(e,n,i){n=n||6,i=i||30;var a=t(e).toHsl(),s=360/i,o=[t(e)];for(a.h=(a.h-(s*n>>1)+720)%360;--n;)a.h=(a.h+s)%360,o.push(t(a));return o},t.monochromatic=function(e,n){n=n||6;for(var i=t(e).toHsv(),a=i.h,s=i.s,o=i.v,r=[],l=1/n;n--;)r.push(t({h:a,s:s,v:o})),o=(o+l)%1;return r},t.readable=function(e,n){var i=t(e).toRgb(),a=t(n).toRgb();return(a.r-i.r)*(a.r-i.r)+(a.g-i.g)*(a.g-i.g)+(a.b-i.b)*(a.b-i.b)>10404};var C,k,E,A=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=t.hexNames=c(A),D=(k="[\\s|\\(]+("+(C="(?:"+"[-\\+]?\\d*\\.\\d+%?"+")|(?:"+"[-\\+]?\\d+%?"+")")+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?",E="[\\s|\\(]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?",{rgb:new RegExp("rgb"+k),rgba:new RegExp("rgba"+E),hsl:new RegExp("hsl"+k),hsla:new RegExp("hsla"+E),hsv:new RegExp("hsv"+k),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});"undefined"!=typeof module&&module.exports?module.exports=t:e.tinycolor=t}(this);var MINDMAP=function(e){var t={standard:1,abstract:2};return e.Connector=function(n,i,a,s,o,r){var l,c,d,u,h,p,f,m,g,v=this,b=["top","right","bottom","left"],y=["star","triangle"];e.read_only_view&&(r=!1),u=t[o]||t.standard;var w=function(e,t){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},x=function(e){if(!e.hasOwnProperty("get_shape")){var t=[]
;return t[0]=[e.get_x()+e.get_width()/2,e.get_y()],t[1]=[e.get_x()+e.get_width(),e.get_y()+e.get_height()/2],t[2]=[e.get_x()+e.get_width()/2,e.get_y()+e.get_height()],t[3]=[e.get_x(),e.get_y()+e.get_height()/2],t}return e.get_shape().calculate_edges()};p=new e.Reparenter(n,v,i),r&&(m=new e.ConnectorRemover(n,v,a,i));var S=function(){var e;e=p.in_progress()?[p.get_position()]:x(a);var t=x(i),n=null,s=null;return $.each(e,function(e,i){$.each(t,function(t,a){var o=w(i,a);src_edge=b[e],dest_edge=b[t],!(null==n||o<n)||"left"===src_edge&&a[0]>=i[0]||"right"===src_edge&&a[0]<=i[0]||"left"===dest_edge&&i[0]>=a[0]||"right"===dest_edge&&i[0]<=a[0]||src_edge===dest_edge||(n=o,s=[i,a],c=b[e],d=b[t])})}),s},T=function(){var n,i=S(),a=i[0][0],o=i[0][1],m=i[0][0],v=i[0][1],b=i[1][0],w=i[1][1],x=i[1][0],T=i[1][1];"left"===d?b-=(b-a)/2:"right"===d?b+=(a-b)/2:"top"===d?w-=(w-o)/2:"bottom"===d&&(w+=(o-w)/2),-1===y.indexOf(n)&&("left"===c?(m-=(m-x)/2,o-=parseInt(s/2,10)):"right"===c?(m+=(x-m)/2,o-=parseInt(s/2,10)):"top"===c?(v-=(v-T)/2,a-=parseInt(s/2,10)):"bottom"===c&&(v+=(T-v)/2,a-=parseInt(s/2,10))),(l=[])[0]=[["M",a,o],["C",m,v,b,w,x,T]];var M=p.get_radius(),C=M/2-2;if(f={x:a,y:o},-1===y.indexOf(n)&&("left"===c?f={x:a-M,y:(o+=s)-C}:"right"===c?f={x:a+M,y:(o+=s)-C}:"top"===c?f={x:(a+=s)-C,y:o-M}:"bottom"===c&&(f={x:(a+=s)-C,y:o+M})),r){var k=Math.max(a,x),E=Math.min(a,x),A=Math.max(o,T),I=Math.min(o,T);g=_.contains(["left","right"],c)&&_.contains(["left","right"],d)||_.contains(["top","bottom"],c)&&_.contains(["top","bottom"],d)?{x:E+(k-E)/2,y:I+(A-I)/2}:_.contains(["top","bottom"],d)?{x:m+.675*(b-m),y:w}:{x:b+.675*(m-b),y:v}}l[1]=[["M",a,o],["C",m,v,b,w,x,T]],(e.connector_filter||u===t.abstract)&&(h=180*Math.atan2(T-o,x-a)/Math.PI)};T();var M,C,k=[];n.setStart(),k[0]=n.path(l[0]),k[1]=n.path(l[1]),M=n.setFinish(),u===t.abstract&&$([k[0].node,k[1].node]).attr("stroke-dasharray","10,10"),this.get_paths=function(){return k};var E,A,I,D,P=function(){C=void 0!==i&&i.get_lightened_color?i.get_lightened_color():a.get_lightened_color()};P();var R=function(){if(e.connector_filter&&i.get_id){if($.browser.mozilla&&u===t.abstract){var s=Math.abs(h%90);if(s>=89||s<=1)return}var o=tinycolor(a.get_lightened_color()).toHexString(),r=tinycolor(i.get_lightened_color()).toHexString();if(A===o&&I===r&&h===D)return k[0].strokeLinearGradient(E),void k[1].strokeLinearGradient(E);var l="grad-"+i.get_id()+"-"+a.get_id()+"-"+(new Date).getTime();$.browser.edge?$("#"+E).remove():$("#"+E).attr("id",l),E=l,A=o,I=r,D=h,n.defineLinearGradient(E,[{id:"s1",offset:"0",style:"stop-color:"+A+";stop-opacity:1;"},{id:"s2",offset:"1",style:"stop-color:"+I+";stop-opacity:1;"}],h,{x:.5,y:.5}),k[0].strokeLinearGradient(E),k[1].strokeLinearGradient(E)}};M.attr({stroke:C,"stroke-width":s,"stroke-linecap":"round"}),r&&m.toBack(),M.toBack(),n.click_catcher.toBack(),n.background.toBack(),M.mousedown(function(e){e.preventDefault()}),M.mousedown(e.viewbox.pan_start),M.mousemove(e.viewbox.pan_move),M.mouseup(e.viewbox.pan_end),this.set_parent=function(e){a=e,v.update()},this.get_parent_node=function(){return a},this.get_child_node=function(){return i},this.show_reparenter=function(){p.show()},this.hide_reparenter=function(){p.hide()},this.update=function(){P(),T();var t={path:l,stroke:C,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,s)};M.attr(t),R();var n=2;e.is_reparenting&&(n=0),p.set_position(f.x,f.y);var i=e.connector_filter?a.get_color():C;p.attr({cx:f.x,cy:f.y,fill:i,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,n)}),r&&(m.set_position(g.x,g.y),m.update())},this.update_stroke=function(){var t=2;e.is_reparenting&&(t=0),M.attr({"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,s)}),p.attr({"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,t)})},this.animate_stroke_width=function(e,t){var n=s/e;n=SVG_HELPER.round_number(n,2),M.animate({"stroke-width":n},t)},this.update_color=function(){P(),M.attr({stroke:C}),p.attr({fill:C}),R()},this.hide=function(){p.hide(),M.hide()},this.show=function(){M.show()},this.remove=function(){p.remove(),p=undefined,M.remove(),r&&(m.remove(),m=undefined)},this.attr=function(e){M.attr(e)},this.animate=function(e,t){M.animate(e,t)},this.get_destination_edge=function(){return d},this.reveal=function(t){if(!this.is_revealed()){var n=MINDMAP_config.default_node_opacity;e.is_iOS?(this.attr({opacity:n}),this.show()):(this.attr({opacity:0}),this.show(),this.animate({opacity:n},t))}},this.is_revealed=function(){return"none"!==k[0].node.style.display&&0!==k[0].attr("opacity")}},e}(MINDMAP||{}),MINDMAP=function(e){return e.is_reparenting=!1,e.ConnectorRemover=function(t,n,i,a){var s,o,r=this,l=12,c="#000",d=!1,u=t.circle(0,0,l),_=new SVG_HELPER.Icon(t,"remove"),h=t.circle(0,0,3*l);u.attr({opacity:0}),_.hide(),h.attr({cursor:"pointer",opacity:0}),this.set_color=function(e){c=e},this.attr=function(e){u.attr(e)},this.set_position=function(e,t){s=e,o=t},this.toBack=function(){h.toBack(),_.toBack(),u.toBack()},this.show=function(){u.show(),_.show(),h.show()},this.hide=function(){u.hide(),_.hide()},this.remove=function(){u.remove(),h.remove(),_.remove()},this.update=function(){u.attr({cx:s,cy:o,fill:c,opacity:0}),_.set_position(s-8,o-8),h.attr({cx:s,cy:o,fill:"#ff0000",opacity:0})},h.mouseover(function(){e.is_reparenting||e.is_connecting||(_.show(),u.attr({opacity:1}),d=!0)}),h.mouseout(function(){_.hide(),u.attr({opacity:0}),d=!1}),h.mousedown(function(e){1==MOUSE_HELPER.get_mouse_click(e)&&d&&(i.remove_abstract_connection(a),r.remove())})},e}(MINDMAP||{});jQuery.fn.isOver=function(e,t){var n=this.offset(),i=this.height(),a=this.width();return e>n.left&&e<n.left+a&&t>n.top&&t<n.top+i};var MINDMAP=function(e){return $(document).bind("contextmenu",function(e){if($("#canvas_container").length>0&&$("#canvas_container").isOver(e.pageX,e.pageY))return!1}),document.addEventListener("touchmove",function(e){0!==$("#canvas_container").length&&$("#canvas_container").isOver(e.pageX,e.pageY)&&e.preventDefault()}),e.mouseDown=function(e){return!!e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,$(document).trigger("mind_map:canvas_click"),!1)},e.mouseUp=function(t){1==MOUSE_HELPER.get_mouse_click(t)&&(e.is_user_resizing=!1,e.viewbox.is_user_panning=!1,e.paper.click_catcher.toBack(),e.paper.click_catcher.attr("cursor","auto"),e.paper.background.toBack())},e}(MINDMAP||{}),MINDMAP=function(e){return e.round_number=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},e}(MINDMAP||{}),MINDMAP_PROMPTS=function(e){return $(document).on("mind_map:init",function(){$(document).off("mindmap:loaded").on("mindmap:loaded",e.init)}),e.init=function(){if(MINDMAP.read_only_view||MINDMAP.image_view)return!1;var e=MINDMAP.get_root_node();if(e&&e.childNodes&&0==e.childNodes.length){e.select(),MINDMAP.selected_nodes.push(e),MINDMAP.selector.show(),_.defer(MINDMAP.selector.update),e.update();MINDMAP.new_mindmap_prompts.show()}},e}(MINDMAP_PROMPTS||{}),MINDMAP=function(e){return e.initialise_icons=function(t){e.icons={},e.icons.attachment=new SVG_HELPER.Icon(t,"attachment",{"stroke-width":0}),e.icons.new_node=new SVG_HELPER.Icon(t,"add"),e.icons.node_attachment=new SVG_HELPER.Icon(t,"node_attachment",{"stroke-width":0,scale:{x:.2,y:.2}}),e.icons.resizer=new SVG_HELPER.Icon(t,"resizer",{"stroke-width":0,fill:"#000",cursor:"nw-resize"}),e.icons.annotation_with_content=new SVG_HELPER.Icon(t,"annotation_with_content"),e.icons.annotation_without_content=new SVG_HELPER.Icon(t,"annotation_without_content")},e}(MINDMAP||{}),MINDMAP=function(e){var t=function(t,n){var i={id:n.id,x_pos:parseInt(n.x_pos,10),y_pos:parseInt(n.y_pos,10),width:parseInt(n.width,10),height:parseInt(n.height,10),color:n.color,text_color:n.text_color,media:n.media},a=new e.Node(t,i);a.refresh_color(),a.update(),e.nodes[n.id]=a,e.unselect_all(),e.selected_nodes[0]=a,e.nodes[n.id].select(),e.selector.update(),e.selector.show(),e.add_to_undo_queue("create",{node_id:n.id},"mind_map_node",arguments)};return e.ImageUploadHandler=function(n){PAGE_EVENTS.on("media_library:insert",function(i,a){var s=a.ids,o=e.viewbox.get_current_centre();$.ajax({method:"POST",url:Routes.mind_map_nodes_path($("#mind_map_id").val()),data:{node:{media_id:s[0],x_pos:o.x,y_pos:o.y}},success:function(e){t(n,e),$(document).trigger("media_library:insert_success")},error:function(){}})})},e}(MINDMAP||{}),MINDMAP=function(e){return e.Key_Handler=function(t){var n=!1;this.is_shift_pressed=function(){return n};var i=function(i){var a=i.keyCode||i.which;if(16!==a&&17!==a||(n=!0),t.length>0&&(i.ctrlKey&&(66===i.keyCode&&(e.toggle_selected_nodes_bold(),s(i)),73===i.keyCode&&(e.toggle_selected_nodes_italic(),s(i))),!e.text_input_handler.is_active()))switch(a){case 46:e.text_input_handler.is_active()||0!==$(".modal:visible").length||0!==$("#annotation_viewer:visible").length||$(i.target).closest(".search_field_container").length||e.delete_currently_selected_nodes()}},a=function(e){var t=e.keyCode||e.which;16!==t&&17!==t||(n=!1)},s=function(e){e.preventDefault?e.preventDefault():(e.returnValue=!1,e.keyCode=0)};PAGE_EVENTS.on("keydown",i).on("keyup",a)},e}(MINDMAP||{}),MINDMAP=function(e){var t=function(){if("undefined"!=typeof e.$toolbar){var t=!0,n=!0,i=!0,a=!0,s=!0;if(0===e.selected_nodes.length)t=!1,n=!1,a=!1,i=!1;else if(1===e.selected_nodes.length&&e.selected_nodes[0].is_central_node())i=!1;else{s=!0;var o=!0;_.each(e.selected_nodes,function(e){e.is_non_document_media()||(s=!1),e.is_document()||(o=!1)}),s&&(t=!1,n=!1,a=!1),o&&(n=!1,a=!1)}e.$toolbar.trigger("text_controls:enabled",n),e.$toolbar.trigger("node_controls:enabled",t),e.$toolbar.trigger("shape:enabled",a),e.$toolbar.trigger("action_controls:enabled",i)}};$(document).on("mind_map:selector_update",t),e.select_all=function(){e.total_nodes()===e.selected_nodes.length?e.unselect_all():(e.unselect_all(),$.each(e.nodes,function(t,n){e.selected_nodes.push(n),n.select(),n.hide_reparenter()}),e.selector.update(),e.selector.show())};var n=function(){if("undefined"!=typeof e.$toolbar){var t=e.total_nodes()===e.selected_nodes.length,n=e.$toolbar.find("#select_all");t?(n.find(".check").show(),n.find(".check-empty").hide()):(n.find(".check").hide(),n.find(".check-empty").show())}};$(document).on("mind_map:selector_update",n),e.text_bold=function(){e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes},"text_bold",arguments),e.toggle_selected_nodes_bold()},e.text_italic=function(){e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes},"text_italic",arguments),e.toggle_selected_nodes_italic()},e.text_size=function(t){var n,i=t.value,a=t.range;$.each(e.selected_nodes,function(t,s){var o=s.is_central_node()?e.cfg.toolbars.central_node_min_text_size:e.cfg.toolbars.min_text_size,r=s.is_central_node()?e.cfg.toolbars.central_node_text_size_range:e.cfg.toolbars.text_size_range,l=parseInt(r/a*i+o,10);n=l,s.set_text_size(l),s.resize_to_text()&&e.selector.fade_multi_select_rect()}),e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes,text_size:n},"text_size",arguments)},e.text_size_stop=function(){e.batch_update_nodes_on_server(e.selected_nodes)},e.set_slider_text_size=function(t){if(0!==e.selected_nodes.length){var n=t.range,i=e.selected_nodes[0],a=i.get_text_size(),s=i.is_central_node()?e.cfg.toolbars.central_node_min_text_size:e.cfg.toolbars.min_text_size,o=i.is_central_node()?e.cfg.toolbars.central_node_text_size_range:e.cfg.toolbars.text_size_range;return parseInt((a-s)/o*n,10)}},e.text_font=function(t){e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes,font_key:t.font_key,font:t.font},"text_font",arguments),$.each(e.selected_nodes,function(e,n){n.set_text_font_key(t.font_key),n.set_text_font(t.font)}),e.batch_update_nodes_on_server(e.selected_nodes)},e.delete_node=function(){e.delete_currently_selected_nodes()};var i=function(){var t={},n=(t={},null),i=!0,a=!0;$.each(e.selected_nodes,function(e,t){var s=t.get_color();if(null!==n||t.is_non_document_media()){if(n!==s||t.is_non_document_media())return i=!1,!1}else n=s;t.is_document()||(a=!1)}),e.selected_nodes.length>0&&i?(n=tinycolor(n).toHslString(),t.color=n,t.multi=!1):t.multi=!0,t.documents=a,"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("node_colour:update",t)};$(document).on("mind_map:selector_update",i),e.node_colour=function(t){var n=e.selected_nodes,a=get_values_from_hsl(t.color),s="hsl("+a.h+","+a.s+","+a.l+")",o={selected_nodes:e.selected_nodes,include_children:t.node_colour_children,color:s};e.add_to_undo_queue("change",o,"colour",arguments),$.each(e.selected_nodes,function(e,i){i.set_color(s,{include_children:t.node_colour_children,outline_only:t.node_outline_only}),t.node_colour_children&&(n=n.concat(i.get_descendants()))}),e.batch_update_nodes_on_server(n),i(),e.toolbars.set_color(s)},e.node_colour_lightness_filter=function(t){e.set_lightness_filter(t.checked)},e.node_colour_connector_filter=function(t){e.set_connector_filter(t.checked)};var a=function(){"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("node_colour_lightness_filter:update",e.lightness_filter)},s=function(){"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("node_colour_connector_filter:update",e.connector_filter)},o=function(){"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("palette:update",e.palette)};$(document).on("mindmap:toolbar_init",function(){a(),s(),o(),e.update_bg_colour_on_toolbar(e.background_color)}),e.node_outline_only=function(t){var n=t.checked,i=t.$el.parents(".colour_picker_dropdown").find('input[name="node_colour_children"]').is(":checked"),a=e.selected_nodes,s={selected_nodes:e.selected_nodes,include_children:i,outline_only:n};e.add_to_undo_queue("change",s,"outline_only",arguments),$.each(e.selected_nodes,function(e,t){t.set_outline_only(n,{update:!0,include_children:i}),i&&(a=a.concat(t.get_descendants()))}),$.each(a,function(e,t){t.update()}),e.batch_update_nodes_on_server(a)};var r=function(){var t=!0;$.each(e.selected_nodes,function(e,n){if(!n.is_outline_only())return t=!1,!1}),"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("node_outline_only:update",t)};$(document).on("mind_map:selector_update",r);var l=function(){var t={},n=null,i=!0;$.each(e.selected_nodes,function(e,t){var a=t.get_text_color();if(null!==n||t.is_media()){if(n!==a||t.is_media())return i=!1,!1}else n=a}),e.selected_nodes.length>0&&i?("hsl"!==n.substr(0,3)&&(n=tinycolor(n).toHslString()),(n=get_values_from_hsl(n)).h*=360,n.s*=100,n.l*=100,n="hsl("+n.h+","+n.s+","+n.l+")",n=tinycolor(n).toHslString(),t.color=n,t.multi=!1):t.multi=!0,"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("text_colour:update",t)};$(document).on("mind_map:selector_update",l),e.text_colour=function(t){var n=e.selected_nodes,i=get_values_from_hsl(t.color),a="hsl("+parseFloat(i.h/360).toFixed(4)+","+parseFloat(i.s/100).toFixed(4)+","+parseFloat(i.l/100).toFixed(4)+")",s={selected_nodes:e.selected_nodes,include_children:t.text_colour_children,text_color:a};e.add_to_undo_queue("change",s,"text_colour",arguments),$.each(e.selected_nodes,function(e,i){i.set_text_color(a,t.text_colour_children),i.update(),t.text_colour_children&&(n=n.concat(i.get_descendants()))}),e.batch_update_nodes_on_server(n),l()};var c=function(){var t=null,n=null;if(1===e.selected_nodes.length)t=e.selected_nodes[0].get_text_font_key(),n=e.selected_nodes[0].get_text_font();else if(e.selected_nodes.length>1){var i=[];$.each(e.selected_nodes,function(e,t){i.push(t.get_text_font_key())}),1===jQuery.unique(i).length&&(t=e.selected_nodes[0].get_text_font_key(),n=e.selected_nodes[0].get_text_font())}"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("font_text:update",{text_font_key:t,text_font:n})};$(document).on("mind_map:selector_update",c),e.bg_colour=function(t){var n=get_values_from_hsl(t.color),i="hsl("+n.h+","+n.s+","+n.l+")",a="undefined"!=typeof t.opacity?t.opacity:1,s={obj:e,background_color:i,background_opacity:a};e.add_to_undo_queue("change",s,"bg_colour",arguments),e.set_background_color(i,a),e.update_bg_colour_on_toolbar(i,a)},e.update_bg_colour_on_toolbar=function(t,n){var i={color:tinycolor(t).toHslString(),multi:!1,opacity:void 0===n?1:n};"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("bg_colour:update",i)},$(document).on("mind_map:canvas_click",function(){"undefined"!=typeof e.$toolbar&&e.$toolbar.find(".btn-group .dropdown-toggle").dropdown("hide")});var d=function(){var t=null;if(1===e.selected_nodes.length)t=e.selected_nodes[0].get_shape().get_shape();else if(e.selected_nodes.length>1){var n=[];$.each(e.selected_nodes,function(e,t){n.push(t.get_shape().get_shape())}),1===jQuery.unique(n).length&&(t=e.selected_nodes[0].get_shape().get_shape())}"undefined"!=typeof e.$toolbar&&e.$toolbar.trigger("shape:update",t)};return $(document).on("mind_map:selector_update",d),e.shape=function(t){e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes,shape:t.shape},"shape",arguments),$.each(e.selected_nodes,function(e,n){n.transform_shape(t.shape)}),e.batch_update_nodes_on_server(e.selected_nodes)},e.colour_palette_select=function(t){e.set_palette(t)},e}(MINDMAP||{}),RenderQueue=function(){this.busy=!1,this.queue=[]};RenderQueue.prototype={requestFrame:function(){var e=function(e){setTimeout(e,1e3/60)},t=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e};try{return window.self===window.top||window.parent===window.top?t():e}catch(n){t()}}(),add:function(e,t){var n=[e,t];this.queue.push(n),this.shift()},shift:function(){this.busy||0===this.queue.length||(this.busy=!0,this.requestFrame.call(window,function(){var e=this.queue.shift();this.busy=!1,this.shift(),e&&e[0].apply(window,e[1])}.bind(this)))}};var JSON_SCRIPT_TAG_PARSE=function(e){return e.parse=function(e){return JSON.parse(_.unescape(e.html()))},e}(JSON_SCRIPT_TAG_PARSE||{}),MINDMAP=function(e){return e.cfg=MINDMAP_config,e.selected_nodes=[],e.is_user_resizing=!1,e.is_user_moving_node=!1,e.is_user_sizing_text=!1,e.is_iOS=!1,e.image_view=!1,e.read_only_view=!1,e.tracking_mode=!1,e.root_node={},e.id,(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&(e.is_iOS=!0),$(document).on("mind_map:init",function(t,n){e.is_mobile_device=!!n,e.selected_nodes=[],e.render_queue=new RenderQueue;var i=$("#node_input_text");i.hide(),e.text_input_handler=new e.Text_Input_Handler(i),i.bind("propertychange keydown keyup input paste",e.text_input_handler.update),e.mind_map_nodes_parsed=JSON_SCRIPT_TAG_PARSE.parse($("#mind_map_nodes")),e.config_parsed=JSON_SCRIPT_TAG_PARSE.parse($("#mind_map_config")),$("#mind_map_nodes").remove(),$("#mind_map_config").remove();var a,s,o,r,l=$("#canvas_container")[0];e.viewbox=new e.MindMapViewBox,e.paper_handler=new SVG_HELPER.Paper(l,e.cfg,e.viewbox,e.image_view),e.paper=e.paper_handler.paper,e.image_view&&(e.crop_box={},e.calculate_crop_box(),e.paper.setSize(e.crop_box.width,e.crop_box.height)),a="undefined"!=typeof e.config_parsed.background_color&&null!==e.config_parsed.background_color?e.config_parsed.background_color:"hsl(0,0,100)",s="undefined"!=typeof e.config_parsed.background_opacity&&null!==e.config_parsed.background_opacity?e.config_parsed.background_opacity:0,o="undefined"==typeof e.config_parsed.lightness_filter||null===e.config_parsed.lightness_filter||e.config_parsed.lightness_filter,r="undefined"!=typeof e.config_parsed.connector_filter&&null!==e.config_parsed.connector_filter&&e.config_parsed.connector_filter,e.background_color=a,e.background_opacity=s,e.lightness_filter=o,e.connector_filter=!e.image_view&&r,e.palette=e.config_parsed.palette,e.paper_handler.set_background_colour(a,s),e.paper.canvas.onmousedown=e.mouseDown,e.paper.canvas.onmouseup=e.mouseUp,e.nodes={},e.initialise_icons(e.paper),e.selector=new e.Selector(e.selected_nodes,e.paper),e.viewbox.init(e.paper,e.paper_handler,l,_.extend({},e.cfg,{zoom_step:e.is_mobile_device?.05:.1}),e.image_view),e.initialise_nodes(e.paper,e.nodes),e.initialise_toolbars(e.paper),e.key_handler=new e.Key_Handler(e.selected_nodes),e.image_view||is_touch_device()||PAGE_EVENTS.on("window:resize",_.throttle(function(){e.text_input_handler.is_active()&&e.text_input_handler.finish_input()},200)),e.image_view&&e.viewbox.crop_to_mind_map(),e.root_node=e.get_root_node(),e.new_mindmap_prompts=new e.NewMindmapPrompts(e.paper,e.root_node),$(document).trigger("mindmap:loaded"),e.image_view||e.viewbox.centre_on_root_node(),e.save_indicator=new SVG_HELPER.SaveIndicator,e.image_upload_handler=new e.ImageUploadHandler(e.paper),e.player=new e.Player,$(document).trigger("application_ready");var c=function(e){e.is_new_central_node()?e.resize_to_text():e.wrap_text()},d=function(e){e.rerender_text_object()},u=function(t){$.each(e.nodes,function(t,n){e.render_queue.add(c,[n])}),_.isFunction(t)&&e.render_queue.add(t,[])},h=$.Deferred(),p=$.Deferred(),f=function(t){!e.image_view&&e.read_only_view&&$.each(e.nodes,function(t,n){e.render_queue.add(d,[n])}),u(t),e.paper_handler.refresh()};if(e.on_text_loaded=function(e){$.when(h,p).done(function(){f(e)})},$(document).ready(function(){h.resolve()}),PAGE_EVENTS.on("fonts_loaded",function(){setTimeout(function(){p.resolve()},1e3)}),e.image_view||$.when(h,p).done(f),e.read_only_view&&(COMPLETION_MARKER_BAR.init(),e.tracking_mode&&COMPLETION_MARKER_BAR.start_tracking()),e.init_rename_handling(),$("body.mind_map").on("click","#examtime_footer, .mind_map_action_bar, #examtime_header",function(){"undefined"!=typeof e.text_input_handler&&e.text_input_handler.is_active()&&e.text_input_handler.finish_input()}),!e.read_only_view){var m="#main_toolbar";e.$toolbar=$(m),MAIN_TOOLBAR.init(e,m,"MindMap"),$(document).trigger("mindmap:toolbar_init")}u(),WINDOW_MESSAGING.listen("public_view:session_reset",function(){STUDY_AID_PLAYER.pause()})}),e.set_background_color=function(t,n){void 0===n&&(n=1),e.paper.background.attr({fill:t,opacity:n,"fill-opacity":n}),e.update_config_on_server(e.id,{background_color:t,background_opacity:n}),e.background_color=t,e.background_opacity=n,$.each(e.nodes,function(e,t){t.update()})},e.set_lightness_filter=function(t){e.lightness_filter=t,$.each(e.nodes,function(e,t){t.refresh_color(),t.update()}),e.update_config_on_server(e.id,{lightness_filter:t})},e.set_connector_filter=function(t){e.connector_filter=t,$.each(e.nodes,function(e,t){t.refresh_color(),t.update()}),e.update_config_on_server(e.id,{connector_filter:t})},e.set_palette=function(t){e.palette=t,e.update_config_on_server(e.id,{palette:t})},e.get_root_node=function(){return _.find(e.nodes,function(e){return e.is_central_node()})},e.calculate_crop_box=function(){var t=1e7,n=1e7,i=-1e7,a=-1e7,s=e.cfg.default_stroke_weight_outline;$.each(e.mind_map_nodes_parsed,function(e,o){var r=JSON.parse(o),l=r.x_pos,c=r.y_pos,d=r.width,u=r.height;r.outline&&(l-=s/2,c-=s/2,d+=s,u+=s),l<t&&(t=l),c<n&&(n=c),l+d>i&&(i=l+d),c+u>a&&(a=c+u)});var o=t,r=n,l=i-t,c=a-n,d=11.7/8.3*1.2;!$("#for_png").val()&&c*d>l&&(l=parseInt(d*c+1,10)),e.crop_box.x=o,e.crop_box.y=r,e.crop_box.width=l,e.crop_box.height=c},e.use_dmz_for_images_when_exporting=function(){return!!$.browser.edge},e.initialise_nodes=function(t,n){$.each(e.mind_map_nodes_parsed,function(i,a){var s=JSON.parse(a);e.image_view&&s.media&&"image"===s.media.type&&s.media.url&&e.use_dmz_for_images_when_exporting()&&(s.media.url=window_location_object(s.media.url)),n[s.id]=new e.Node(t,s)}),$.each(n,function(e,t){t.init_parent_node(),t.init_abstract_connections()}),$(".abstract_connection").attr("stroke-dasharray","10,10");var i=e.get_root_node();i.refresh_color(),i.propagate_colors(),$.each(n,function(t,n){n.update(),n.is_document()&&n.refresh_color(),!n.requires_resave()||e.read_only_view||e.image_view||e.update_node_on_server(n)}),e.mind_map_nodes_parsed.length=0},e.showGreyCloak=function(){$("#cloak").fadeTo("fast","0.3")},e.hideGreyCloak=function(){$("#cloak").fadeOut("fast")},e.unselect_all=function(){$.each(e.selected_nodes,function(e,t){t.unselect()}),e.selected_nodes.length=0,e.selector.update()},e.init_rename_handling=function(){PAGE_EVENTS.on("study_aid.update_meta",function(t,n,i){if(!i){var a=e.get_central_node(),s=$.trim(a.get_text().replace(/(\r\n|\n|\r)/gm," "));s=s.replace(/  +/g," ");var o=$.trim(n.title).replace(/  +/g," ");n.untitled&&s!==e.cfg.default_text?a.set_text(""):n.untitled||o===s||(s===e.cfg.default_text&&a.get_text_color()==e.cfg.new_node_text_color&&a.set_text_color(e.cfg.default_text_color,!1),a.set_text(o),a.resize_to_text(),e.text_input_handler.wrap_bulk_inserted_text(a,!0),$(window).trigger("resize"),e.update_node_on_server(a))}})},e.total_nodes=function(){return Object.keys(e.nodes).length},e}(MINDMAP||{}),MINDMAP_TOOLTIPS=function(e){var t,n,i,a,s=!1,o=[],r=650,l=function(e){e&&(i=e.clientX,a=e.clientY),t.is(":visible")&&t.css("left",i+10).css("top",a-60)};$(document).on("mind_map:init",function(){MINDMAP.image_view||(t=$("#mind_map_tooltip"),n=SMT["mind_maps/tooltip"],$(document).on("mindmap:hoveredOn",e.toolTipOn),$(document).on("mindmap:hoveredOff",e.toolTipOff),$(document).on("mindmap:nodeClicked",e.hoveredNodeSelected),$("#canvas_container").on("mousemove",l))}),e.hoveredNodeSelected=function(t,n){e.toolTipOff(t,n)};var c=function(e){if(s=!0,e.attachment_numbers===undefined){var i=Routes.attachment_numbers_mind_map_node_path(MINDMAP.get_mind_map_id(),{id:e.get_id()});$.getJSON(i,function(i){e.attachment_numbers=i,t.html(n({mind_maps_no:i.mind_maps_no,has_mind_maps:i.mind_maps_no>0,mind_maps_text:I18n.t("study_aids.attachments.mind_maps"),flash_card_decks_no:i.flash_card_decks_no,has_flash_card_decks:i.flash_card_decks_no>0,flash_card_decks_text:I18n.t("study_aids.attachments.flash_card_decks"),quizzes_no:i.quizzes_no,has_quizzes:i.quizzes_no>0,quizzes_text:I18n.t("study_aids.attachments.quizzes"),slide_sets_no:i.slide_sets_no,has_slide_sets:i.slide_sets_no>0,slide_sets_text:I18n.t("study_aids.attachments.slide_sets"),notes_no:i.notes_no,has_notes:i.notes_no>0,notes_text:I18n.t("study_aids.attachments.notes"),flowcharts_no:i.flowcharts_no,has_flowcharts:i.flowcharts_no>0,flowcharts_text:I18n.t("study_aids.attachments.flowcharts")})),s&&(t.show(),l())})}else t.html(n(e.attachment_numbers)),t.show(),l()};return e.toolTipOn=function(e,t){t.has_attachments&&o.push(_.delay(c,r,t))},e.toolTipOff=function(){_.each(o,function(){window.clearTimeout(o.shift())}),t.hide(),s=!1},e}(MINDMAP_TOOLTIPS||{}),MINDMAP=function(e){return e.NewMindmapPrompts=function(t,n){var i,a,s,o,r,l,c,d,u,_,h,p,f=this,m=!1,g="#666",v={"font-size":"16px","font-family":"'Coming Soon', cursive","line-height":"120%","font-weight":"bold",fill:g},b={fill:g,"stroke-width":"0"},y="M34.6,7.6c10.2-4.2,49.8-12.3,50.9-4c0.8,5.7-8.3-1.6-34.9,5.7c-4,1.1-7.4,2.7-12.9,4.9c-7.1,2.9-18.6,10-20.4,18.5c-1.5,7.3,0.7,19.7,4,26.6c3.3,6.8,7.8,11.9,12.9,16.2c1.1,0.9,4.5,2.5,4.8,3.2c1.3,3-2.2,5,0,6.9c1.2-9.7,2.6-23.4,5.9-34.5c1.3-4.4,2.3-14.5,8.5-9.4C53.1,51,49,56.7,46.9,65C47,72.5,46,79.5,46,86.9c0.1,1.1,0.8,0.8,1,1.7c-0.7,2.5-0.8,5.2-3.3,6.8C37.5,93,29.3,88,20.8,84.7c-3.8-1.5-7.4-2.6-11.2-4.2c-3.9-1.7-11.7-2.3-9.1-8.6c4-2.3,8,0.4,12.6,2.5c3.1,1.4,6.5,3.2,9.2,4.1c2.5,0.9,4.8,1.2,7.4,2.7c0.3-0.6-1.4-2.4-2.7-1.9c-0.2-2.6-3-4.3-4.7-6.5c-14-18.5-17.8-51.8,6.4-61.1c0.7-1.5,4.4-3.9,6.3-3C35.5,8.3,34.7,8.3,34.6,7.6z",w=98,x={x:n.get_x()+n.get_width()/2,y:n.get_y()+n.get_height()/2};(i=t.path(y)).attr(b),(s=t.path(y)).attr(b),(a=t.text(0,0,I18n.t("mind_maps.prompts.edit_text_prompt"))).attr(v),a.attr({"text-anchor":"start"}),(o=t.text(0,0,I18n.t("mind_maps.prompts.create_prompt"))).attr(v),o.attr({"text-anchor":"end"});var S=t.set();S.push(i,s,a,o),S.hide(),this.show=function(){e.read_only_view||e.image_view?m=!1:(S.stop(),S.attr({opacity:1}),S.show(),m=!0)},this.hide=function(){m&&(m=!1,S.animate({opacity:0},300,"linear",function(){S.hide()}))},this.update=function(){x={x:n.get_x()+n.get_width()/2,y:n.get_y()+n.get_height()/2},r=x.x-w/2,l=x.y-w/2,i.transform("t"+r+","+l),i.transform("...s0.5t0,-"+(n.get_height()+50)),u=x.x-w/2,_=x.y-w/2,s.transform("t"+u+","+_),s.transform("...s0.5t25,"+(n.get_height()+120)+"r180"),c=x.x+20,d=x.y-n.get_height()/2-47,a.transform("t"+c+","+d),h=x.x-20,p=x.y+n.get_height()/2+80,o.transform("t"+h+","+p)},f.update()},e}(MINDMAP||{}),MINDMAP=function(e){return e.NewNodeButton=function(t,n,i){this.identifier=t;var a,s=0,o=0,r=e.is_mobile_device?32:e.cfg.toolbars.new_node_icon_size,l=r,c=r,d=i.corner_radius;this.get_x=function(){return s},this.get_y=function(){return o},this.get_width=function(){return l},this.get_height=function(){return c};var u=n.rect(s,o,l,c,d);u.attr({fill:e.cfg.toolbars.button_color,"stroke-width":0}),SVG_HELPER.chrome_fix_stroke(u),this.get_width=function(){return l},this.set_node=function(e){a=e,this.enable()},this.set_parent_toolbar=function(e){e},this.set_position=function(t){u.stop(),s=t.x,o=t.y,o-=parseInt((r-e.cfg.toolbars.general_icon_size)/2,10),u.attr({x:s,y:o,width:l,height:c,r:d}),g?f.set_position(s+l/2-8,o+c/2-8):v!==undefined&&v.attr({x:s+l/2-8,y:o+c/2-8})},this.set_color=function(){},this.get_color=function(){var e=undefined;return a!==undefined&&(e=a.get_color()),e};var _=!0;this.enable=function(){_=!0,u.attr({fill:e.cfg.toolbars.button_color})},this.disable=function(){_=!1,u.attr({fill:e.cfg.toolbars.button_disabled_color})};var h=!1;this.dim=function(t){_&&(t?(u.attr({fill:e.cfg.toolbars.button_dimmed_color}),h=!0):(u.attr({fill:e.cfg.toolbars.button_color}),h=!1))};var p=!1,f=i.icon?i.icon:undefined,m=i.image_path?i.image_path:undefined,g=!1,v=undefined;f!==undefined?g=!0:m!==undefined&&(v=n.image(m,0,0,16,16));var b=n.set();b.push(u),g?b.push(f.get_path()):v!==undefined&&b.push(v),this.objects=b,this.is_active=function(){return!1},this.show=function(){b.show()},this.hide=function(){p||b.hide()},this.fadeOut=function(){p||b.animate({opacity:0},150,"linear")},b.mouseover(function(){_&&!p&&u.animate({x:s-2,y:o-2,width:l+4,height:c+4,fill:e.cfg.toolbars.button_color_highlighted},200,"linear")}),b.mouseout(function(){var t;_&&(t=h?e.cfg.toolbars.button_dimmed_color:e.cfg.toolbars.button_color,p||u.animate({x:s,y:o,width:l,height:c,fill:t},200,"linear"))});var y=this,w=undefined,x=function(){y.hide();var t,i=e.cfg.default_node_width;switch(a.get_shape().get_shape()){case"think_bubble":case"hexagon":case"pentagon":case"star":t=i;break;case"speech_bubble_round":case"speech_bubble_rounded_oblong":case"triangle":t=parseInt(.8*i,10);break;default:t=e.cfg.default_node_height}e.create_a_new_node(s,o,i,t,a,n),w.remove(),w=undefined,p=!1},S=!1,T=function(e,t,n){if(!_)return!1;y.ox=s,y.oy=o,1==MOUSE_HELPER.get_mouse_click(n)&&(S=!0)},M=function(t,i){if(!S||!_||isNaN(t)||isNaN(i))return!1;if(t*=e.viewbox.get_current_zoom(),i*=e.viewbox.get_current_zoom(),p){s=y.ox+t,o=y.oy+i;var r=e.viewbox.convert_screen_position_to_local_position(0,e.cfg.offset_y),d=e.viewbox.convert_screen_position_to_local_position($(window).width()-l,$(window).height()-c);s=clamp(s,r.x,d.x),o=clamp(o,r.y,d.y),u.attr({x:s,y:o}),g?f.set_position(s+(l+4)/2-8,o+(c+4)/2-8):v!==undefined&&v.attr({x:s+(l+4)/2-8,y:o+(c+4)/2-8}),w.update()}else e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),e.new_mindmap_prompts.hide(),w=new e.Connector(n,y,a,e.cfg.default_connector_stroke_weight),p=!0,e.toolbars.hide(),e.selector.hide_resizer(),u.stop(),u.attr({width:l+4,height:c+4,fill:e.cfg.toolbars.button_color_highlighted})},C=function(){if(!_||!S)return!1;if(p){$.plainBlockUI(),u.attr({fill:a.get_lightened_color()}),s-=e.cfg.default_node_width/2-l/2,o-=e.cfg.default_node_height/2-c/2;var t,n=!0;switch(a.get_shape().get_shape()){case"rounded_rectangle":t=e.cfg.default_corner_radius;break;case"rectangle":t=0;break;case"ellipse":t=65;break;default:n=!1}n?u.animate({x:s,y:o,width:e.cfg.default_node_width,height:e.cfg.default_node_height,"stroke-width":e.cfg.default_stroke_weight,r:t},200,">",x):x(),SVG_HELPER.chrome_fix_stroke(u),e.unselect_all(),g?f.hide():v.hide()}else $.jGrowl(I18n.t("mind_maps.drag_instructions"));S=!1};b.drag(M,T,C),this.toFront=function(){b.toFront()},this.remove=function(){u&&(u.remove(),u=undefined),v&&(v.remove(),v=undefined),f&&(f.remove(),f=undefined),w&&(w.remove(),w=undefined)};var k=function(){u.animate({transform:"s1"},1e3,"linear")};this.pulse=function(){u.animate({transform:"s1.5",callback:k},1e3,"linear")},this.hide()},e}(MINDMAP||{}),MINDMAP=function(e){return e.Node=function(t,n){var i,a,s,o,r=this;this.is_node=function(){return!0},this.is_media=function(){return X},this.is_video=function(){return U&&("video"===U.type||"embed_media"===U.type)},this.is_document=function(){return U&&"pdf_media"===U.type},this.is_non_document_media=function(){return this.is_media()&&!this.is_document()},this.get_x=function(){return i},
this.get_y=function(){return a},this.set_x=function(t){i=clamp(i=parseInt(t,10),-e.viewbox.config.max_pan,e.viewbox.config.max_pan-f)},this.set_y=function(t){a=clamp(a=parseInt(t,10),-e.viewbox.config.max_pan,e.viewbox.config.max_pan-m)},"undefined"!=typeof n.x_pos&&this.set_x(Math.round(n.x_pos)),n.y_pos!==undefined&&this.set_y(Math.round(n.y_pos)),this.has_attachments=n["has_attachments?"],this.get_attachments_icon=function(){return o};var l=function(){void 0!==o&&o.update()};this.hide_attachments_icon=function(){void 0!==o&&o.hide()};var c=[];n.annotations&&$.each(n.annotations,function(t,n){c[t]=new e.Annotation(r,n)});var d=new e.AnnotationsIcon(t,r);this.has_annotations=function(){return c.length>0},this.get_annotations=function(){return c},this.add_annotation=function(t){var n=new e.Annotation(r,{content:t});n.save(),c.push(n)},this.remove_annotation=function(e){var t=c[e];void 0!==t&&(t.remove(),c.splice(e,1))},this.save_current_annotation=function(){d.save_current_annotation()},this.next_annotation=function(){d.next()},this.previous_annotation=function(){d.previous()},this.close_annotation=function(){d.close(!0)},this.delete_current_annotation=function(){d.delete_current_annotation()},this.annotation_input=function(e){d.on_input(e)},this.annotation_finish_input=function(){d.finish_input()},this.annotation_update_position=function(){d.update_position()},this.update_annotation_icon=function(){r.is_media()||d.update()},this.hide_annotation_icon=function(){d.hide()},this.force_hide_annotation_icon=function(){d.force_hide()},this.annotation_window_scroll_fix=function(){d.window_scroll_fix()};var u=!1;n.width&&n.height||(u=!0),this.transform_shape=function(t){if(!r.is_media()){var n=W.get_shape_raphael_object();W.transform(t)&&(this.remove_events(oe),oe.exclude(n),n.remove(),oe.push(W.get_shape_raphael_object()),this.refresh_events(oe),te.toFront(),o.toFront(),this.resize_to_text(),this.update(),e.selector.update(),e.reset_all_nodes_depth())}};var h,p,f=n.width?Math.round(n.width):e.cfg.default_node_width,m=n.height?Math.round(n.height):e.cfg.default_node_height;this.get_width=function(){return f},this.get_height=function(){return m},this.set_width=function(e){f=parseInt(e,10)},this.set_height=function(e){m=parseInt(e,10)},this.get_centre_position=function(){return{x:i+f/2,y:a+m/2}},this.set_position=function(e,t){isNaN(e)||isNaN(t)||(r.set_x(e),r.set_y(t))},this.translate=function(e,t){isNaN(e)||isNaN(t)||(i=parseInt(i+e,10),a=parseInt(a+t,10))};var g="null";this.get_parent_node=function(){return p},this.get_parent_node_id=function(){return g},this.set_parent_node=function(e){p=e,g=e.get_id(),h.set_parent(e)},this.init_parent_node=function(){this.parent_node=e.nodes[n.parent_id],p="undefined"!=typeof this.parent_node?this.parent_node:undefined,g=void 0!==p?p.get_id():"null",void 0!==p&&(p.add_child(r),(h=new e.Connector(t,r,p,e.cfg.default_connector_stroke_weight)).attr({opacity:MINDMAP_config.default_node_opacity}))};var v=[],b=[],y=[],w=n.abstract_connected_node_ids;this.init_abstract_connections=function(){v=[],y=[],$.each(w,function(t,n){var i=e.nodes[n];void 0!==i&&r.create_abstract_connection(i,{update_on_server:!1,add_to_undo_queue:!1})})},this.create_abstract_connection=function(n,i){var a=new e.Connector(t,n,r,e.cfg.default_abstract_connector_stroke_weight,"abstract",!0),s=i||{};n.register_abstract_connection(r),v.push(n),y.push(a),(_.isUndefined(s.update_on_server)||s.update_on_server)&&e.update_node_on_server(r),n.update(),(_.isUndefined(s.add_to_undo_queue)||s.add_to_undo_queue)&&e.add_to_undo_queue("change",{from_connection:r,to_connection:n},"create_abstract_connection",arguments)},this.remove_abstract_connection=function(t,n){var i=n||{};r.remove_abstract_connectors_to_node(t),t.remove_abstract_connectors_to_node(r),(_.isUndefined(i.update_on_server)||i.update_on_server)&&e.update_node_on_server(r),(_.isUndefined(i.add_to_undo_queue)||i.add_to_undo_queue)&&e.add_to_undo_queue("change",{from_connection:r,to_connection:t},"remove_abstract_connection",arguments)},this.get_abstract_connected_nodes=function(){return v},this.get_connected_node_connectors=function(){return y},this.get_abstract_connecting_nodes=function(){return b},this.get_all_abstract_connected_nodes=function(){return b.concat(v)},this.has_abstract_connection=function(e,t){var n=_.contains(v,e),i=!1;return t&&(i=e.has_abstract_connection(r,!1)),n||i},this.register_abstract_connection=function(e){b.push(e)},this.get_abstract_connected_node_ids=function(){return _.map(v,function(e){return e.get_id()})},this.get_connector=function(){return h},this.refresh_color=function(){k(),E()};var x=[];this.add_child=function(e){x.push(e)},this.remove_child=function(e){$.each(x,function(t,n){n==e&&x.splice(t,1)})},this.orphan=function(){void 0!==p&&p.remove_child(r),p=undefined,g="null"},this.adopt_child=function(t,n){var i;t.orphan(),x.push(t),i="object"==typeof n&&n.hasOwnProperty("get_id")?n:r,t.set_parent_node(i),t.has_abstract_connection(i,!1)?t.remove_abstract_connection(i,{update_on_server:!1,add_to_undo_queue:!0}):i.has_abstract_connection(t,!1)&&i.remove_abstract_connection(t,{update_on_server:!0,add_to_undo_queue:!0}),e.update_node_on_server(t)},this.get_descendants=function(){var e=[];return $.each(x,function(t,n){e.push(n),e=e.concat(n.get_descendants())}),e},this.is_descendant_of=function(e){var t=e.get_descendants();return $.inArray(r,t)>-1},this.has_child=function(e){return $.inArray(e,x)>-1},this.is_direct_child_of=function(e){return e.has_child(r)};var S=!1;n.is_central_node&&(S=!0),this.is_central_node=function(){return S},this.get_map_level=function(){var e=0;return void 0!==p&&(e=p.get_map_level()+1),e};var T=n.color?n.color:e.cfg.default_node_fill_color,M=T;this.set_color=function(e,t){r.is_non_document_media()||(T=e,k(),E(),t&&"undefined"!=typeof t.outline_only&&this.set_outline_only(t.outline_only),this.update_color(),t&&t.include_children&&$.each(x,function(n,i){i.set_color(e,t)}),this.update_connector(),this.is_document()&&this.update_media(),ce(),SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object()))},this.get_color=function(){return T},this.get_original_color=function(){return M},this.propagate_colors=function(){$.each(x,function(e,t){t.refresh_color(),t.propagate_colors()})};var C="#fff",k=function(){if(e.lightness_filter||r.is_document()){var t=get_values_from_hsl(T),n=e.cfg.color_palette_lightness;if(void 0!==p){var i=p.get_lightened_color();void 0===i&&(i="hsl(0,0,0)");var a=100-get_values_from_hsl(i).l;n=clamp(100-(n=parseInt(.78*a,10)),e.cfg.color_palette_lightness,e.cfg.maximum_color_lightness)}r.is_document()&&(n=clamp(100-(n=parseInt(.8*t.l,10)),e.cfg.color_palette_lightness,e.cfg.maximum_color_lightness)),C=hsl(t.h,t.s,n)}else C=T};this.get_lightened_color=function(){return C};var E=function(){var t=get_values_from_hsl(C),n=hsl(t.h,t.s,e.cfg.maximum_color_lightness);"90-"+C+"-"+n},A=n.stroke_color?n.stroke_color:e.cfg.default_stroke_color;this.set_stroke_color=function(e){A=e,this.update()},this.get_stroke_color=function(){return A},this.hide=function(){d.force_hide(),void 0!==h&&h.hide(),oe.stop(),oe.hide(),this.hide_abstract_connections(),e.tracking_mode&&void 0!==s&&s.hide()},this.reveal=function(t){if(!r.is_revealed()){var n=MINDMAP_config.default_node_opacity;e.is_iOS?(void 0!==h&&(h.attr({opacity:n}),h.show()),oe.attr({opacity:n}),oe.show(),d.reveal(),e.tracking_mode&&void 0!==s&&s.show()):(void 0!==h&&(h.attr({opacity:0}),h.show(),h.animate({opacity:n},t)),oe.attr({opacity:0}),oe.show(),oe.animate({opacity:n},t,"linear",function(){this.is_revealed()&&d.reveal(),e.tracking_mode&&void 0!==s&&s.show()}.bind(this))),r.has_attachments||void 0===o||o.hide()}},this.is_revealed=function(){return"none"!==W.get_shape_raphael_object().node.style.display&&0!==W.get_shape_raphael_object().attr("opacity")};var I="undefined"!=typeof n.text&&null!==n.text?n.text:"";I=(I=(I=(I=I.replace(/&quot;/g,'"')).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">"),this.get_text=function(){return I},this.set_text=function(t){I=t,this.update_text_object(),void 0===p&&e.paper_handler.set_offsets()},this.get_stripped_text=function(){return $.trim(I.replace(/[\s\n\r]+/g," "))},this.finish_input=function(t){this.set_text(t),this.show_text(),e.update_node_on_server(this)};var D="undefined"!=typeof n.id&&n.id?n.id:e.cfg.dummy_new_node_id;this.get_id=function(){return D},this.set_id=function(e){D=e};var P="undefined"!=typeof n.previous_ids&&n.previous_ids.length>0?n.previous_ids:[];this.get_previous_ids=function(){return P};var R=n.stroke_weight?n.stroke_weight:e.cfg.default_stroke_weight;this.get_stroke_weight=function(){return R},this.set_stroke_weight=function(e){R=e,this.update()};var O=!!n.outline&&n.outline;r.is_media()&&(O=!1),this.set_outline_only=function(t,n){O=t,r.is_media()?(O=!1,R=0):O?(A=T,R=e.cfg.default_stroke_weight_outline):R=e.cfg.default_stroke_weight,void 0!==n&&(n.include_children&&$.each(x,function(e,i){i.set_outline_only(t,n)}),n.update&&this.update())},this.is_outline_only=function(){return O},this.set_outline_only(O);var z=n.text_font_value?n.text_font_value:e.cfg.default_text_font;this.get_text_font=function(){return z},this.set_text_font=function(e){z=e,this.update_text_object(),this.resize_to_text()};var N,j=n.text_font?n.text_font:e.cfg.default_text_font_key;this.get_text_font_key=function(){return j},this.set_text_font_key=function(e){j=e},N=S?e.cfg.central_node_default_text_size:e.cfg.default_text_size;var L=n.text_size?n.text_size:N;this.get_text_size=function(){return L},this.set_text_size=function(e){L=e,this.update_text_object()};var B=this.get_text()!=e.cfg.default_text?e.cfg.default_text_color:e.cfg.new_node_text_color,F=n.text_color||B;this.set_text_color=function(e,t){F=e,this.update_text_object(),t&&$.each(x,function(e,t){t.set_text_color(F,!0)})},this.set_default_text_attributes=function(){return F=e.cfg.default_text_color,H=!1,this.update_text_object(),!0},this.get_text_color=function(){return F};var q=!0===n.text_bold;this.set_bold=function(e){q=e,this.update_text_object()},this.toggle_bold=function(){q=!q,this.update_text_object(),this.resize_to_text()},this.is_bold=function(){return q};var H=!0===n.text_italic||S&&"undefined"==typeof n.text_italic;this.set_italic=function(e){H=e,this.update_text_object()},this.toggle_italic=function(){H=!H,this.update_text_object(),this.resize_to_text()},this.is_italic=function(){return H};var V=new e.AbstractConnector(t,r),G=!1;n.dummy_node&&(G=!0);var U,W=new e.Shape(t,this,n.shape);this.get_shape=function(){return W},W.get_shape_raphael_object().toFront(),this.set_media=function(e){U=e},n.media&&!U&&this.set_media(n.media),this.get_media_id=function(){return U&&U.id||n.media_id||undefined};var Y,X=!!U||!!n.media_id;X&&(I="",W.get_shape_raphael_object().attr({r:0}),Y=n.media.dmz_url);var J,Q,K,Z,ee,te=t.text(i+f/2,a+m/2,I),ne=q?"bold":"normal",ie=H?"italic":"normal";te.attr({"font-size":L,"font-family":z,fill:F,"font-weight":ne,"font-style":ie,"line-height":"120%"}),te.toFront(),this.rerender_text_object=function(){var e=te;(te=t.text(i+f/2,a+m/2,I)).attr({"font-size":L,"font-family":z,fill:F,"font-weight":ne,"font-style":ie,"line-height":"120%"}),r.is_media()?te.attr({opacity:0}):te.attr({opacity:MINDMAP_config.default_node_opacity}),e.is_visible()||te.hide(),te.insertAfter(e),oe.exclude(e),e.remove(),oe.push(te),void 0!==o&&o.toFront(),this.update_text_object(),this.refresh_events(oe)},this.get_image_object=function(){return J},this.render_media=function(n){if(U){var s;W.get_shape_raphael_object().attr({"fill-opacity":0,"border-radius":0}),te.attr({opacity:0});var o=!1;(s="video"===U.type||"embed_media"===U.type?U.thumb_url:"pdf_media"===U.type?null:U.url)&&Y&&e.image_view&&$.browser.edge?s=Y:s&&(s+="?version=cors",o=!0),s&&(J=t.image("",i,a,f,m),o&&J.node.setAttribute("crossorigin","anonymous"),J.attr({"stroke-width":0,src:s}),R=0,Y&&J.node.setAttribute("data-fallback-href",Y)),r.is_video()?((K=t.rect(0,0,24,24)).attr({fill:"#fff"}),Q=new SVG_HELPER.Icon(t,"video_play",{"stroke-width":0,fill:"#29ABE2",scale:{x:3,y:3}}),K.show(),Q.show(),Z=48):r.is_document()&&(ee=new SVG_HELPER.Icon(t,"view_document",{"stroke-width":0,fill:"#000"})).show(),n&&(J&&oe.push(J),r.is_document()?oe.push(ee.get_path()):r.is_video()&&(oe.push(K),oe.push(Q.get_path())))}},this.render_media(),this.use_image_dmz_path=function(){X&&Y&&(J.node.href.baseVal=Y)},this.get_study_aid_id=function(){return n.mind_map_id};var ae,se=!1;(this.is_selected=function(){return se},this.get_shape_settings=function(){return W.get_text_settings()},this.get_text_object=function(){return te},e.cfg.debug_text_rect)&&(ae=t.rect(0,0,0,0)).attr({stroke:"#ff0000","stroke-width":2});this.update_text_object=function(){var t=q?"bold":"normal",n=H?"italic":"normal",s=W.get_text_settings(),o=i+f/2+(s.offset_x||0),r=a+m/2+(s.offset_y||0);if(e.is_user_moving_node?te.attr({x:o,y:r}):te.attr({text:I,"font-size":L,"font-family":z,fill:F,"font-weight":t,"font-style":n,x:o,y:r}),e.cfg.debug_text_rect){var l={x:i+s.padding_x/2,y:a+s.padding_y/2+(s.offset_y||0),width:f-s.padding_x,height:m-s.padding_y};ae.attr(l),ae.toFront()}},this.show_text=function(){te.show()},this.hide_text=function(){te.hide()},this.resize_to_text=function(){var t=te.getBBox(),n=Math.ceil(t.width),s=Math.ceil(t.height),o=!1,l=W.get_text_settings(),c=l.padding_x,d=l.padding_y;if(f-c<n){var u=f;f=n+c,i-=parseInt((f-u)/2,10),o=!0}if(m-d<s){var _=m;m=s+d,a-=parseInt((m-_)/2,10),o=!0}return o&&(r.update(),e.selector.update()),o},this.wrap_text=function(){for(var e=I.replace(/(\n)/gm," "),t=(e=e.replace(/ +(?= )/g,"")).split(" "),n="",i=W.get_text_settings(),a=i.padding_x,s=i.padding_y,o=0;o<t.length;o++){var r;r=0===o?t[o]:n+" "+t[o],te.attr({text:r}),te.getBBox().width*le+a>f&&o>0?n+="\n"+t[o]:n=r}te.attr({text:n}),te.getBBox().height+s>m&&(m=te.getBBox().height+s),I=n,this.resize_to_text(),this.update()};var oe,re=e.paper.text(),le=43.921875/re.getBBox().width;re.remove(),this.update_image=function(){J.attr({x:i,y:a,width:f,height:m})},this.update_media=function(){this.is_video()&&(K.attr({x:i+f/2-Z/4,y:a+m/2-Z/4}),Q.set_position(i+f/2-Z/2,a+m/2-Z/2)),this.is_document()&&(ee.set_position_and_scale(i,a,f/16,m/16),ee.attr({fill:T}))},this.update_abstract_connections=function(){$.each(y,function(e,t){t.update()})},this.hide_abstract_connections=function(){$.each(y,function(e,t){t.hide()})},this.update=function(){W.get_shape_raphael_object().attr(W.get_attributes_to_update_node()),this.update_color(),ce(),SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object()),void 0!==J&&this.update_image(),this.is_media()&&this.update_media(),this.update_text_object(),void 0!==p&&h.update(),$.each(x,function(e,t){t.update_connector()}),this.update_abstract_connections(),$.each(b,function(e,t){t.update_abstract_connections()}),V.update(),l(),this.update_annotation_icon()},this.childNodes=x,this.update_color=function(){O&&(A=C);var t,n=O?e.background_color:C;t=r.is_media()?0:O&&e.image_view?e.background_opacity:1,W.get_shape_raphael_object().attr({stroke:A,fill:n,"fill-opacity":t,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,R)}),$.each(x,function(e,t){t.update_connector_color()}),V.update()},this.update_connector=function(){void 0!==p&&h.update(),this.update_abstract_connections(),$.each(b,function(e,t){t.update_abstract_connections()})},this.get_connected_edge=function(){if(void 0!==h)return h.get_destination_edge()},this.update_strokes=function(){ce(),void 0!==p&&h.update_stroke(),$.each(y,function(e,t){t.update_stroke()}),V.update_stroke()},this.animate_stroke_width=function(e,t){if(O){var n=R/e;n=SVG_HELPER.round_number(n,2),W.get_shape_raphael_object().animate({"stroke-width":n},t)}void 0!==p&&h.animate_stroke_width(e,t)},this.update_connector_color=function(){void 0!==p&&h.update_color()},this.get_full_font_style=function(){var e="";return q&&(e+="bold "),H&&(e+="italic "),e+=L+"px "+z},this.get_full_font_style_scaled_to_zoom=function(){var t="";return q&&(t+="bold "),H&&(t+="italic "),t+=L/e.viewbox.get_current_zoom()+"px "+z},this.set_highlighted=function(t){var n=A,i=R;se||(t&&(i=r.is_media()?e.cfg.image_hover_stroke_weight:e.cfg.hover_stroke_weight,n=e.cfg.hover_stroke_color,e.is_reparenting&&(r.is_descendant_of(e.selected_nodes[0])||r.is_media())&&oe.attr({cursor:"url(/assets/cursor-notallowed.png), pointer"})),W.get_shape_raphael_object().attr({stroke:n,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,i)}),SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object())),t||oe.attr({cursor:"pointer"})},this.remove_abstract_connectors_to_node=function(e){y=_.reject(y,function(t){if(t.get_child_node()===e)return t.remove(),!0}),v=_.reject(v,function(t){return t===e}),b=_.reject(b,function(t){return t===e})},this.remove_objects=function(){te.remove(),W.get_shape_raphael_object().remove(),void 0!==J&&J.remove(),void 0!==h&&(h.remove(),h=undefined),void 0!==o&&(o.remove(),o=undefined),void 0!==d&&(d.remove(),d=undefined),void 0!==V&&(V.remove(),V=undefined),_.each(y,function(e){e.remove(),e=undefined}),y=undefined,_.each(v,function(e){r.remove_abstract_connection(e,{update_on_server:!1,add_to_undo_queue:!0})}),_.each(b,function(e){e.remove_abstract_connection(r,{update_on_server:!1,add_to_undo_queue:!0})}),this.is_video()&&(Q.remove(),Q=undefined,K&&(K.remove(),K=undefined)),this.is_document()&&(ee.remove(),ee=undefined),oe.clear()};var ce=function(){var t,n;!e.image_view||O?(se?r.is_media()?(t=e.cfg.image_select_stroke_color,n=e.cfg.image_select_stroke_weight):O?(t=A,n=e.cfg.select_outline_stroke_weight):(t=e.cfg.select_stroke_color,n=e.cfg.select_stroke_weight):(t=A,n=R),W.get_shape_raphael_object().attr({stroke:t,"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,n)})):$(W.get_shape_raphael_object().node).removeAttr("stroke").removeAttr("stroke-width").removeAttr("style")};this.select=function(){se=!0,ce(),$("#annotation_viewer").fadeOut(),this.update_annotation_icon(),l(),oe.attr({cursor:"move"}),SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object()),void 0!==p&&(h.update(),h.show_reparenter(),V.show())},this.hide_reparenter=function(){V.hide(),void 0!==h&&h.hide_reparenter()},this.unselect=function(){this.set_highlighted(!1),oe.attr({cursor:"pointer"}),se=!1,W.get_shape_raphael_object().attr({stroke:r.get_stroke_color(),"stroke-width":SVG_HELPER.scale_stroke(e.viewbox,R)}),$("#annotation_viewer").fadeOut(),d.hide(),l(),SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object()),V.hide(),void 0!==p&&h.hide_reparenter()},SVG_HELPER.chrome_fix_stroke(W.get_shape_raphael_object());var de=function(){e.is_user_moving_node||e.is_user_resizing||r.set_highlighted(!0)},ue=function(t){e.read_only_view&&e.viewbox.pan_move(t)},_e=function(){r.set_highlighted(!1)},he=function(){r.is_video()&&Q.attr({fill:"#1988b8"}),r.is_document()&&ee.attr({fill:C})},pe=function(){r.is_video()&&Q.attr({fill:"#29ABE2"}),r.is_document()&&ee.attr({fill:T})},fe=!1,me=!1;e.beingClicked=me;var ge=!1,ve=function(t){e.read_only_view?e.viewbox.pan_end(t):($(document).trigger("mindmap:nodeClicked"),1==MOUSE_HELPER.get_mouse_click(t)&&(se&&(me=!0),e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),e.key_handler.is_shift_pressed()?(se||(e.selected_nodes.push(r),r.select()),e.selected_nodes.length>1&&$.each(e.selected_nodes,function(e,t){t.hide_annotation_icon(),t.has_attachments||t.hide_attachments_icon(),t.hide_reparenter()})):se||(e.unselect_all(),e.selected_nodes[0]=r,r.select())))},be=function(t){if(e.read_only_view)e.viewbox.pan_end(t);else if($(document).trigger("mindmap:nodeLeft"),1==MOUSE_HELPER.get_mouse_click(t)){if(e.is_reparenting){if("undefined"!=typeof e.reparenting_node){var n=e.reparenting_node;if(n.get_parent_node()!==r&&n!==r&&!r.is_descendant_of(n)&&!r.is_media()){var i=n.get_parent_node();r.adopt_child(n),e.add_to_undo_queue("change",{old_parent:r,parent:i,child:n},"adopt_child",arguments)}n.update(),e.reparenting_node=undefined,oe.attr({cursor:"pointer"})}e.is_reparenting=!1}if(e.is_connecting){if("undefined"!=typeof e.reconnecting_node){var a=e.reconnecting_node;a.get_parent_node()===r||a===r||r.is_direct_child_of(a)||r.is_media()||r.has_abstract_connection(a,!0)?a.update():r.create_abstract_connection(a,{update_on_server:!0,add_to_undo_queue:!0}),e.reconnecting_node=undefined,oe.attr({cursor:"pointer"})}e.is_connecting=!1}if(ge&&!fe)return ye(t),void(ge=!1);setTimeout(function(){ge=!1},500),ge=!0,!fe&&e.key_handler.is_shift_pressed()&&me&&($.each(e.selected_nodes,function(t,n){n==r&&e.selected_nodes.splice(t,1)}),r.unselect()),me=!1,fe=!1}},ye=function(t){1!=MOUSE_HELPER.get_mouse_click(t)||e.key_handler.is_shift_pressed()||r.is_media()||e.selected_nodes.length<=1&&e.text_input_handler.set_node(r)},we=function(){(r.is_video()||r.is_document())&&VIDEO_HELPER.create_popup({id:U.id,study_aid_context_id:n.mind_map_id})},xe=function(){r.has_attachments&&$(document).trigger("mindmap:hoveredOn",this)},Se=function(){$(document).trigger("mindmap:hoveredOff",this)};(oe=t.set()).push(W.get_shape_raphael_object(),te,J),this.is_video()&&(oe.push(K),oe.push(Q.get_path())),this.is_document()&&oe.push(ee.get_path()),this.get_object_set=function(){return oe},oe.attr({opacity:MINDMAP_config.default_node_opacity}),G&&oe.attr({opacity:"0.2"});var Te=!1,Me=function(t,n,i){1==MOUSE_HELPER.get_mouse_click(i)&&(Te=!0),Te&&(r.is_selected()&&d.hide(),e.selector.hide_toolbar_and_resizer())},Ce=function(t,n){var i=10;if(!(!Te||isNaN(t)||isNaN(n)||Math.abs(t)<i&&Math.abs(n)<i)){e.is_user_moving_node=!0,t=void 0===t?0:t,n=void 0===n?0:n,t*=e.viewbox.get_current_zoom(),n*=e.viewbox.get_current_zoom();var a=!1;fe=!0,$.each(e.selected_nodes,function(e,i){"undefined"!=typeof i.ox&&"undefined"!=typeof i.oy||(i.ox=i.get_x(),i.oy=i.get_y(),a=!0),i.set_x(i.ox+t),i.set_y(i.oy+n),i.update()}),a&&e.selector.hide_toolbar_and_resizer(),e.selected_nodes.length>1&&e.selector.update_multi_select_box_for_drag(t,n)}};this.finish_drag=function(){e.is_user_moving_node&&(e.add_to_undo_queue("change",{selected_nodes:e.selected_nodes},"position",arguments),$.each(e.selected_nodes,function(e,t){t.ox=undefined,t.oy=undefined}),e.batch_update_nodes_on_server(e.selected_nodes)),e.is_user_moving_node=!1,Te=!1,e.viewbox.is_user_gesturing||($.each(e.selected_nodes,function(e,t){t.update_annotation_icon()}),e.selector.update(),e.selector.show())};var ke=function(){Te&&r.finish_drag()};r.is_media()||((o=new e.AttachmentsIcon(r,t)).toFront(),oe.push(o.get_icon_path()),o.get_icon_path().attr({cursor:"move"})),this.set_attachments=function(e){r.has_attachments=e,r.update()},this.refresh_events=function(t){r.remove_events(t),t.mousedown(ve),t.mousemove(ue),t.mouseup(be),e.read_only_view&&(r.is_video()||r.is_document())?(t.click(we),t.mouseover(he),t.mouseout(pe),t.attr({cursor:"pointer"})):e.read_only_view||(t.drag(Ce,Me,ke),t.mouseover(de),t.mouseout(_e),t.dblclick(ye),t.attr({cursor:"pointer"}),void 0!==o&&o.get_click_rect().hover(xe,Se,this))},this.remove_events=function(e){e.undrag,e.unmousedown(ve),e.unmouseover(de),e.unmousemove(ue),e.unmouseup(be),e.unmouseout(_e),e.undblclick(ye),e.unclick(we),e.unmouseover(he),e.unmouseout(pe),e.attr({cursor:"auto"}),void 0!==o&&o.get_click_rect().unhover(xe,Se)},this.refresh_events(oe),this.reinit_mouse_events=function(){e.read_only_view?this.remove_events(oe):this.refresh_events(oe)};var Ee=S&&this.get_stripped_text()===e.cfg.default_text&&z===e.cfg.default_text_font&&F===B;if(Ee){var Ae=te.getBBox().width;te.attr({"font-family":"Arial"}),Ae>te.getBBox().width?te.attr("font-family",z):te.attr("font-size",L+2)}if(this.is_new_central_node=function(){return Ee},Ee){var Ie=this.resize_to_text();u||(u=Ie)}this.update(),Ee&&te.attr({"font-family":z,"font-size":L}),this.requires_resave=function(){return u},e.read_only_view&&(this.is_playing=function(){var t=!1;return"undefined"!=typeof e.player&&e.player.is_playing()&&(t=!0),t},this.get_completable_type=function(){return"Node"},this.get_paper=function(){return e.paper}),this.render_completion_marker=function(e){(s=new COMPLETION_MARKER(r)).set_id(e),s.render(t)},this.get_completion_marker=function(){return s}},e}(MINDMAP||{}),MINDMAP=function(e){return e.delete_currently_selected_nodes=function(){if(e.selected_nodes.length&&(1!==e.selected_nodes.length||!e.selected_nodes[0].is_central_node())){var t="";t=1===e.selected_nodes.length&&e.selected_nodes[0].is_media()?I18n.t("mind_maps.nodes.confirm_delete_image"):I18n.t("mind_maps.nodes.confirm_delete_node"),$("#delete_node_popup .delete_prompt").text(t),$("#delete_node_popup").off("shown.bs.modal").on("shown.bs.modal",function(){$(this).find("#delete-node").focus()}),$("#delete_node_popup").modal("show"),$("#delete_node_popup #delete-node").off("click").on("click",function(t){$("#annotation_viewer").hide(),$("#delete_node_popup").modal("hide");var n=[];$.each(e.selected_nodes,function(e,t){t===undefined||t.is_central_node()||n.push(t.get_id())}),e.delete_nodes_on_server(n),$.each(e.selected_nodes,function(t,n){n===undefined||n.is_central_node()?n!==undefined&&n.is_central_node()&&n.unselect():(e.delete_node_from_local_array(n),e.add_to_undo_queue("delete",{node:n},"mind_map_node",arguments))}),e.selected_nodes.length=0,e.selector.update(),t.preventDefault()})}},e.delete_node_from_local_array=function(t){t.remove_objects();var n=t.get_id();$.each(e.nodes,function(t,i){var a=i;a.get_parent_node_id()===n&&(e.delete_node_from_local_array(a),e.add_to_undo_queue("delete",{node:a},"mind_map_node",arguments),delete a)}),$.each(e.selected_nodes,function(n,i){i==t&&(e.selected_nodes[n]=undefined)}),void 0!==t.get_parent_node()&&t.get_parent_node().remove_child(t),delete e.nodes[n]},e.create_a_new_node_triggered_undo_button=function(t,n,i){for(var a=-1;e.nodes[a]!==undefined;)a--;t.id=a;var s=e.get_node_from_previous_ids(t.id_parent);if(!_.isUndefined(s)||!_.isUndefined(t.media_id)){_.isUndefined(s)||(t.parent_id=s.get_id());var o=t.annotations,r=new e.Node(n,_.omit(t,"annotations"));r.init_parent_node(),r.refresh_color(),r.update(),e.nodes[a]=r,e.create_node_on_server_triggered_undo_button(r,o,i)}},e.create_a_new_node=function(t,n,i,a,s,o){var r=s.get_text_color(),l=s.get_stripped_text();s.is_central_node()&&l===e.cfg.default_text&&r==e.cfg.new_node_text_color&&(r=e.cfg.default_text_color);for(var c=-1;e.nodes[c]!==undefined;)c--;var d={id:c,parent_id:s.get_id(),x_pos:parseInt(t,10),y_pos:parseInt(n,10),width:parseInt(i,10),height:parseInt(a,10),color:s.get_color(),text_color:r,text_font_value:s.get_text_font(),text_font:s.get_text_font_key(),outline:s.is_outline_only(),shape:s.get_shape().get_shape()},u=new e.Node(o,d);u.init_parent_node(),u.refresh_color(),u.update(),e.nodes[c]=u,track_event("edit_resource","create_node"),e.create_node_on_server(u)},e.select_node=function(t){e.unselect_all(),e.selected_nodes[0]=t,t.select(),e.selector.update(),e.selector.show()},e.get_central_node=function(){var t;return $.each(e.nodes,function(e,n){if(n.is_central_node())return t=n,!1}),t},e.reset_all_nodes_depth=function(){$.each(e.nodes,function(e,t){t.get_shape().get_shape_raphael_object().toFront(),t.is_non_document_media()?t.get_image_object().toFront():t.is_media()||(t.get_text_object().toFront(),t.get_attachments_icon().toFront())})},e}(MINDMAP||{}),MINDMAP=function(e){return e.toggle_selected_nodes_bold=function(){var t=0;$.each(e.selected_nodes,function(e,n){n.is_bold()&&t++}),0!==t&&t<e.selected_nodes.length&&$.each(e.selected_nodes,function(e,t){t.set_bold(!1)}),$.each(e.selected_nodes,function(e,t){t.toggle_bold()}),e.batch_update_nodes_on_server(e.selected_nodes)},e.toggle_selected_nodes_italic=function(){var t=0;$.each(e.selected_nodes,function(e,n){n.is_italic()&&t++}),0!==t&&t<e.selected_nodes.length&&$.each(e.selected_nodes,function(e,t){t.set_italic(!1)}),$.each(e.selected_nodes,function(e,t){t.toggle_italic()}),e.batch_update_nodes_on_server(e.selected_nodes)},e}(MINDMAP||{}),MINDMAP=function(e){return e.Player=function(){var t,n,i,a=this,s=function(){function a(e,t,n){var i=t.get_centre_position(),a=n.get_centre_position(),s=e.get_centre_position();switch(e.get_connected_edge()){case"left":if(i.y-s.y>=0&&a.y-s.y<0)return 1;if(a.y-s.y>=0&&i.y-s.y<0)return-1;break;case"right":if(i.y-s.y>=0&&a.y-s.y<0)return-1;if(a.y-s.y>=0&&i.y-s.y<0)return 1;break;case"top":if(i.x-s.x>=0&&a.x-s.x<0)return-1;if(a.x-s.x>=0&&i.x-s.x<0)return 1;break;case"bottom":if(i.x-s.x>=0&&a.x-s.x<0)return 1;if(a.x-s.x>=0&&i.x-s.x<0)return-1;break;default:if(i.y-s.y>=0&&a.y-s.y<0)return 1;if(a.y-s.y>=0&&i.y-s.y<0)return-1}if(i.x-s.x==0&&a.x-s.x==0)return i.y-s.y-(a.y-s.y);var o=(i.x-s.x)*(a.y-s.y)-(a.x-s.x)*(i.y-s.y);return o<0?1:o>0?-1:(i.x-s.x)*(i.x-s.x)+(i.y-s.y)*(i.y-s.y)-((a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y))}function s(){var i=[];$.each(e.nodes,function(e,t){t.is_media()&&i.push(t)}),i.sort(function(e,n){return a(t,e,n)}),n=n.concat(i)}function o(e){n.push(e);var t=e.childNodes;t.sort(function(t,n){return a(e,t,n)}),(n=n.concat(t)).push(e),$.each(t,function(t,i){i.childNodes.length>0&&(o(i),n.push(e))})}n=[],o(t),n.pop(),s(),n.push(t),i=_.chain(n).map(function(e){return e.get_connected_node_connectors()}).flatten().value();var r=n.length;i.length>0&&(r+=1),STUDY_AID_PLAYER.set_number_of_frames(r)};this.next=function(){e.unselect_all();var t=STUDY_AID_PLAYER.get_frame(),s=n[t],o=(i[t-n.length],STUDY_AID_PLAYER.get_animation_speed());if(_.isUndefined(s))a.reveal_connectors(o);else{var r=s.is_revealed();if(s.reveal(o),t===n.length-1){var l=e.zoom_calculator.get_viewbox_for_fit_to_window();e.viewbox.animate_to(l,parseInt(.8*o,10))}else r||s.is_media()||s.is_central_node()?e.viewbox.animate_to_parent_node(s,parseInt(.8*o,10)):e.viewbox.animate_to_include_node(s,parseInt(.8*o,10))}},this.reveal_connectors=function(e){_.each(i,function(t){t.reveal(e)})},this.show_connectors=function(){_.each(i,function(e){e.show()})},this.skip_to_frame=function(){var t=STUDY_AID_PLAYER.get_frame();$.each(n,function(e,t){t.hide()}),t===STUDY_AID_PLAYER.get_start_frame()&&(e.viewbox.centre_on_root_node(),e.viewbox.set_to_max_zoom());for(var i=n[t],s=n[t+1],o=0;o<=Math.min(t,n.length-1);o+=1)n[o].reveal();if(t>=n.length-1){var r=e.zoom_calculator.get_viewbox_for_fit_to_window();e.viewbox.set(r.x,r.y,r.width,r.height,r.zoom_scale),e.viewbox.update(),t===n.length&&a.show_connectors()}else{if(void 0===i)return;i.is_central_node()||i.is_media()||void 0!==i&&s.is_descendant_of(i)?e.viewbox.focus_on_node_and_children(i):e.viewbox.focus_on_node_and_children(i.get_parent_node())}},this.is_playing=function(){return STUDY_AID_PLAYER.playing},this.start_play=function(){e.tracking_mode&&(e.tracking_mode=!1,COMPLETION_MARKER_BAR.stop_tracking());var t=$("#annotation_viewer").attr("data-node-id");e.nodes[t]&&e.nodes[t].close_annotation(),$("#recentre_canvas").addClass("disabled")},this.pause_play=function(){$("#recentre_canvas").removeClass("disabled")},STUDY_AID_PLAYER.set_start_frame(-1),STUDY_AID_PLAYER.on("prev seek",a.skip_to_frame),STUDY_AID_PLAYER.on("next",a.next),STUDY_AID_PLAYER.on("restart",a.skip_to_frame),STUDY_AID_PLAYER.on("play",a.start_play),STUDY_AID_PLAYER.on("pause prev_click next_click seek",a.pause_play),STUDY_AID_PLAYER.on("full_screen_toggle",function(){setTimeout(function(){var t=STUDY_AID_PLAYER.get_playing();e.viewbox.stop_animation(),STUDY_AID_PLAYER.pause({quiet:!0}),setTimeout(function(){!t&&STUDY_AID_PLAYER.is_first_frame()?(STUDY_AID_PLAYER.skip_to_frame(n.length-1),STUDY_AID_PLAYER.set_frame(-1)):STUDY_AID_PLAYER.skip_to_frame(STUDY_AID_PLAYER.get_frame()),t&&!STUDY_AID_PLAYER.is_last_frame()&&STUDY_AID_PLAYER.play()},101)},100)}),t=e.get_central_node(),s()},e}(MINDMAP||{});Raphael.el.is_visible=function(){return"none"!==this.node.style.display},Raphael.el.set_node_attributes=function(e){return $(this.node).attr(e),this},Raphael.st.set_node_attributes=function(e){return _.invoke(this.items,"set_node_attributes",e),this},Raphael.fn.CheckBox=function(e){var t=(e=e==undefined?{}:e).x==undefined?100:e.x,n=e.y==undefined?100:e.y,i=e.dim==undefined?20:e.dim,a=e.rounded_corners==undefined?0:e.rounded_corners,s=e.color==undefined?"#000":e.color,o=e.isChecked!=undefined&&e.isChecked,r=e.rectAttrs==undefined?{}:e.rectAttrs,l=e.pathAttrs==undefined?{}:e.pathAttrs,c=this.rect(t,n,i,i,a).attr({fill:"#FFF",stroke:s}).attr(r);return c.x=t,c.y=n,c.dim=i,c.rounded_corners=a,c.color=s,c.isChecked=o,c.path=this.path([["M",c.x+.2*c.dim,c.y+.4*c.dim],["l",.2*c.dim,.3*c.dim],["l",.4*c.dim,-.5*c.dim]]).attr({"stroke-width":1.5,stroke:c.color}).attr(l),c.isChecked||c.path.hide(),c.cover=this.rect(t,n,i,i,a).attr({fill:"#000",opacity:0}),c.cover.checkBox=c,c.cover.click(function(){c.is_visible()&&(this.checkBox.check(!this.checkBox.isChecked),
this.checkBox.change())}),c.change=function(){},c.check=function(e){(e=e==undefined||e)?(this.path.show(),this.isChecked=!0):(this.path.hide(),this.isChecked=!1)},c.uncheck=function(){this.check(!1)},c.visible=function(){this.isChecked&&this.path.show(),this.show()},c.not_visible=function(){this.path.hide(),this.hide()},c},function(){if(Raphael.vml)Raphael.el.strokeLinearGradient=function(){return this};else{var e=function(e,t){var n;if(!t)return document.createElementNS("http://www.w3.org/2000/svg",e);for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return null},t=function(t,n,i,a){var s,o,r=document.getElementById(t)||e("linearGradient");for(r.id=t;r.firstChild;)r.removeChild(r.firstChild);for(s=0,o=n.length;s<o;s+=1){var l=e("stop"),c=n[s];e(l,c),r.appendChild(l)}return void 0!==a&&void 0!==i?r.setAttribute("gradientTransform","rotate("+i+" "+a.x+" "+a.y+")"):void 0!==i&&r.setAttribute("gradientTransform","rotate("+i+")"),r};Raphael.el.strokeLinearGradient=function(t){return e(this.node,{stroke:"url(#"+t+")"}),this},Raphael.st.strokeLinearGradient=function(e){return this.forEach(function(t){t.strokeLinearGradient(e)})},Raphael.fn.defineLinearGradient=function(e,n,i,a){this.defs.appendChild(t(e,n,i,a))}}}();var MINDMAP=function(e){return e.is_reparenting=!1,e.Reparenter=function(t,n,i){var a,s,o=8,r=!1,l=t.circle(0,0,o);l.attr({cursor:"pointer"}),l.hide(),this.get_radius=function(){return o},this.set_color=function(e){e},this.in_progress=function(){return r},this.attr=function(e){l.attr(e)},this.set_position=function(e,t){a=e,s=t},this.get_position=function(){return[a,s]},this.show=function(){l.show(),l.toFront()},this.hide=function(){l.hide()},this.remove=function(){l.remove()};var c,d,u=!1,_=function(t){1==MOUSE_HELPER.get_mouse_click(t)&&(u=!0),u&&(r=!0,e.is_reparenting=!0,e.reparenting_node=i,e.selector.hide_toolbar_and_resizer(),l.toBack())},h=function(t,i){if(u&&!isNaN(t)&&!isNaN(i)){t=void 0===t?0:t,i=void 0===i?0:i,t*=e.viewbox.get_current_zoom(),i*=e.viewbox.get_current_zoom();var o=!1;user_has_dragged_nodes=!0,void 0!==c&&void 0!==d||(c=a,d=s,o=!0),a=c+t,s=d+i,n.update(),o&&e.selector.hide_toolbar_and_resizer()}},p=function(){c=undefined,d=undefined,r=!1,u=!1,e.is_reparenting=!1,e.reparenting_node=undefined,i.update(),l.toFront(),e.selector.update()};l.drag(h,_,p)},e}(MINDMAP||{}),MINDMAP=function(e){return e.Selector=function(t,n){var i=this,a=16,s=0,o=0,r=e.is_mobile_device?28:16,l=e.icons.resizer,c=0,d=0,u=r,_=r,h=n.rect(c,d,u,_);h.attr({fill:"#fff",opacity:0,cursor:"nw-resize"}),h.hide(),l.hide();var p,f,m,g,v=n.rect(0,0,1,1);v.hide(),this.update=function(){if(e.is_user_moving_node&&(i.hide_toolbar(),i.hide_resizer()),e.selected_nodes.length>0){var t=9999999,n=9999999,r=-9999999,c=-9999999;if($.each(e.selected_nodes,function(e,i){i.get_x()<t&&(t=i.get_x()),i.get_y()<n&&(n=i.get_y()),i.get_x()+i.get_width()>r&&(r=i.get_x()+i.get_width()),i.get_y()+i.get_height()>c&&(c=i.get_y()+i.get_height())}),e.selected_nodes.length>1?(v.is_visible()||(v.toFront(),v.show()),m=t,g=n,p=r-t,f=c-n,v.attr({x:m,y:g,width:p,height:f,"stroke-width":2,stroke:"#000","stroke-opacity":.5,"stroke-dasharray":"-"}),s=t-a,o=n-a):(v.is_visible()&&v.hide(),s=t-a/2,o=n-a/2),a,a,e.is_user_moving_node||1!=e.selected_nodes.length)l.is_visible()&&(l.hide(),h.hide());else{if(e.selected_nodes[0].is_media())l.set_position(s-9,o-9),h.attr({x:s-9,y:o-9});else{var d=e.selected_nodes[0].get_shape().get_x_and_y_to_update_icon_resizer_position(s,o,u,_),b=d.x,y=d.y;l.set_position(b,y),h.attr({x:b,y:y})}l.show(),h.show(),l.toFront(),h.toFront()}e.is_user_sizing_text||i.update_toolbar_position()}else i.hide();$(document).trigger("mind_map:selector_update")},this.update_multi_select_box_for_drag=function(e,t){v.attr({x:m+e,y:g+t})},this.show=function(){i.update(),i.show_toolbar()},this.hide=function(){l.hide(),h.hide(),v.is_visible()&&v.hide(),i.hide_toolbar()},this.fade_multi_select_rect=function(){v.attr({"stroke-opacity":.2})},this.show_toolbar=function(){if(e.toolbars.hide(),0!==e.selected_nodes.length)if(1==e.selected_nodes.length){var t=e.selected_nodes[0];e.toolbars.set_node(t),t.is_media()||(t.is_central_node()&&e.root_node.childNodes&&0==e.root_node.childNodes.length&&(e.new_mindmap_prompts.update(),e.new_mindmap_prompts.show()),i.update_toolbar_position(),e.toolbars.main.show())}else e.toolbars.main.hide()},this.update_toolbar_position=function(){if(1==e.selected_nodes.length){var t=e.selected_nodes[0];t.is_media()||e.toolbars.main.set_position({x:t.get_x()+t.get_width()/2,y:t.get_y()+t.get_height()+e.cfg.toolbars.default_height/2+e.cfg.toolbars.offset_from_node})}else e.selected_nodes.length>1&&e.toolbars.main.set_position({x:m+p/2,y:g+f+e.cfg.toolbars.default_height/2+e.cfg.toolbars.offset_from_node})},this.hide_toolbar=function(){e.toolbars.hide(),"undefined"!=typeof e.new_mindmap_prompts&&e.new_mindmap_prompts.hide()},this.hide_resizer=function(){l.hide(),h.hide()},this.hide_toolbar_and_resizer=function(){i.hide_toolbar(),i.hide_resizer()};var b=[],y=[],w=[],x=[],S=[],T=[],M=!1,C=!1,k=function(t,n,a){var s=MOUSE_HELPER.get_mouse_click(a);if(C=e.key_handler.is_shift_pressed(),1!=s)return!1;M=!0,i.hide_toolbar(),$.each(e.selected_nodes,function(t,n){n.ox=n.get_x(),n.oy=n.get_y(),e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),e.is_user_resizing=!0,b[t]=n.get_x(),y[t]=n.get_y(),w[t]=n.get_width(),x[t]=n.get_height()})},E=function(t,n){!M||isNaN(t)||isNaN(n)||(t*=e.viewbox.get_current_zoom(),n*=e.viewbox.get_current_zoom(),C=e.key_handler.is_shift_pressed(),$.each(e.selected_nodes,function(a,s){var o=0,r=0;if(!s.is_media()){var l=s.get_shape().get_text_settings();o=l.padding_x,r=l.padding_y}var c,d,u=s.get_text_object().getBBox().width;c=s.is_media()?e.cfg.min_image_width:Math.max(e.cfg.min_node_width,u+o),S[a]=c;var _=w[a]-t,h=x[a]-n,p=w[a]/x[a],f=s.is_media()&&!C;f&&(_=h<=T[a]?parseInt(T[a]*p,10):parseInt(h*p,10)),_>=S[a]?(f?s.set_x(s.ox-(_-w[a])):s.set_x(s.ox+t),s.set_width(_),s.wrap_text()):(s.set_x(s.ox+t),s.set_width(_),s.wrap_text(),s.set_x(b[a]+w[a]-S[a]),s.set_width(S[a]),f&&(h=parseInt(_/p,10)));var m=s.get_text_object().getBBox().height;d=s.is_media()?e.cfg.min_image_height:Math.max(e.cfg.min_node_height,m+r),T[a]=d,h>=T[a]?(s.set_y(s.oy+n),s.set_height(h)):(s.set_y(y[a]+x[a]-T[a]),s.set_height(T[a])),s.update(),i.update()}))},A=function(){if(M){var t={selected_nodes:e.selected_nodes,x:b,y:y,width:w,height:x};e.add_to_undo_queue("change",t,"resize",arguments),$.each(e.selected_nodes,function(e,t){t.select(),t.ox=undefined,t.oy=undefined}),e.batch_update_nodes_on_server(e.selected_nodes),e.viewbox.update(),e.is_user_resizing=!1,b=[],y=[],w=[],x=[],S=[],T=[],M=!1,i.show_toolbar()}};h.drag(E,k,A)},e}(MINDMAP||{}),MINDMAP=function(e){return e.Shape=function(t,n,i){var a=null,s=null;this.get_shape=function(){return a},this.get_shape_raphael_object=function(){return s.get_raphael_object()},this.transform=function(e){return a!==e&&(o(e),r(),!0)},this.get_text_settings=function(){return s.hasOwnProperty("get_text_settings")?s.get_text_settings():{padding_x:0,padding_y:0,offset_x:0,offset_y:0}},this.get_max_width_to_bulk_text_insert=function(){return s.hasOwnProperty("get_max_width_to_bulk_text_insert")?s.get_max_width_to_bulk_text_insert():800},this.get_attributes_to_update_node=function(){return s.hasOwnProperty("get_attributes_to_update_node")?s.get_attributes_to_update_node():e.set_position(s.get_raphael_object(),n)},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){return s.hasOwnProperty("get_x_and_y_to_update_icon_annotation_position")?s.get_x_and_y_to_update_icon_annotation_position(e,t):{x:n.get_x()+n.get_width()-t,y:n.get_y()}},this.get_x_and_y_to_update_icon_attachment_position=function(e){return s.hasOwnProperty("get_x_and_y_to_update_icon_attachment_position")?s.get_x_and_y_to_update_icon_attachment_position(e):{x:n.get_x()+n.get_width()-1.75*e,y:n.get_y()}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,n,i){return s.hasOwnProperty("get_x_and_y_to_update_icon_resizer_position")?s.get_x_and_y_to_update_icon_resizer_position(e,t,n,i):{x:e,y:t}},this.get_x_and_y_to_update_completion_marker_position=function(e){return s.hasOwnProperty("get_x_and_y_to_update_completion_marker_position")?s.get_x_and_y_to_update_completion_marker_position(e):{x:n.get_x()-e,y:n.get_y()-e}},this.get_x_and_y_to_update_abstract_connector_position=function(e){return s.hasOwnProperty("get_x_and_y_to_update_abstract_connector_position")?s.get_x_and_y_to_update_abstract_connector_position(e):{x:n.get_x()+n.get_width()-e+1,y:n.get_y()+n.get_height()-e+1}},this.calculate_edges=function(){if(!s.hasOwnProperty("calculate_edges")){var e=[];return e[0]=[n.get_x()+n.get_width()/2,n.get_y()],e[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x(),n.get_y()+n.get_height()/2],e}return s.calculate_edges()};var o=function(e){a=e},r=function(){s=new e[a](t,n)};(function(){o(i||e.cfg.default_shape),r()})()},e}(MINDMAP||{}),MINDMAP_shape_config={base_scale:"s0.0625,0.0625,0,0",triangle:"M8,0L0,16h16L8,0",star:"M8,0l2.6,5L16,6.1l-3.7,4.2l0.7,5.7L8,13.6L3.1,16l0.7-5.7L0,6.1L5.4,5L8,0",hexagon:"M0,12l0-8l8-4l8,4l0,8l-8,4L0,12z",diamond:"M16,8l-8,8L0,8l8-8L16,8z",pentagon:"M8,0l8,6.1L12.9,16H3.1L0,6.1L8,0z",think_bubble:"M0.7,5.3C-0.8,4.5,0.3,2,2.2,2.1C2,1,4.3-0.7,6.3,0.9c0.2-1.2,3.9-1.4,4.5,0.5c0.6-1.4,4.8-0.6,3.8,1.8c1.7-0.4,2.4,3.8-0.3,4c0.7,1.5-2,2.9-3.1,1.9c0.1,1.3-3.8,2.4-4.6,0.4c-0.3,1.3-4.3,0.4-3.7-1.3C1.7,8.9-0.7,6.8,0.7,5.3zM3.9,12.9c-0.3,0.4-0.1,1.2,0.8,0.6c0.1,0.6,1.3,0.7,1.5,0c0.6,0.4,1.2-0.1,0.8-0.8c0.7-0.1,0.4-1.4-0.5-0.9c0.2-0.5-1.2-1.1-1.4-0.2C4.8,11.1,4,11.1,4,11.9C3.5,11.7,3,12.9,3.9,12.9z M2.7,15.6c-0.2,0.4,0.7,0.6,0.8,0C4.1,15.8,4.3,15.3,4,15c0.3-0.5-0.4-0.8-0.7-0.4c-0.3-0.5-1,0-0.7,0.4C2,15.3,2.4,15.8,2.7,15.6z",speech_bubble_rounded_oblong:"M13.4,0H2.6C1.1,0,0,1.6,0,3.6v5.5c0,2,1.1,3.6,2.6,3.6h8.8L10.8,16l1.9-3.4h0.7c1.4,0,2.6-1.6,2.6-3.6V3.6C16,1.6,14.9,0,13.4,0z",speech_bubble_round:"M16,6.5C16,2.9,12.4,0,8,0C3.6,0,0,2.9,0,6.5c0,3.1,2.6,5.6,6.1,6.3C5.9,14,5.4,15.3,4.6,16c1.4,0,2.9-1.6,3.9-3C12.7,12.8,16,10,16,6.5z"},MINDMAP=function(e){return e.diamond=function(t,n){var i=null;this.get_raphael_object=function(){return i},this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/2.1),padding_y:Math.round(n.get_height()/2.1)}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(n.get_width()/2),a=Math.round(n.get_height()/2),s=n.get_x()+i,o=n.get_y();return{x:(s+(n.get_x()+n.get_width()))/2,y:(o+(n.get_y()+a))/2-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/2),a=n.get_x()+t,s=n.get_y(),o=n.get_x()+n.get_width(),r=n.get_y()+i,l=(s+r)/2-e/5;return{x:(l-s)/((s-r)/(a-o))+a,y:l-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:(e+Math.round(n.get_width()/2)+e)/2-i/2,y:(t+(t+Math.round(n.get_height()/2)))/2-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/2),a=n.get_x()+t,s=n.get_y();return{x:(a+n.get_x())/2-e,y:(s+(n.get_y()+i))/2-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(n.get_width()/2),t=Math.round(n.get_height()/2),i=n.get_x()+e,a=n.get_y()+n.get_height();return{x:(i+(n.get_x()+n.get_width()))/2,y:(a+(n.get_y()+t))/2}},this.calculate_edges=function(){var e=[],t=Math.round(.05*n.get_width()),i=Math.round(.05*n.get_height());return e[0]=[n.get_x()+n.get_width()/2,n.get_y()+i],e[1]=[n.get_x()+n.get_width()-t,n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()-i],e[3]=[n.get_x()+t,n.get_y()+n.get_height()/2],e},i=t.path(MINDMAP_shape_config.diamond),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.ellipse=function(t,n){var i=null;this.get_raphael_object=function(){return i},this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/3.5),padding_y:Math.round(n.get_height()/3.5)}},this.get_attributes_to_update_node=function(){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/2);return e.is_user_moving_node?{cx:n.get_x()+t,cy:n.get_y()+i,rx:t,ry:i}:{cx:n.get_x()+t,cy:n.get_y()+i,rx:t,ry:i,width:n.get_width(),height:n.get_height()}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=315*Math.PI/180,a=Math.round(n.get_width()/2),s=Math.round(n.get_height()/2),o=n.get_x()+a,r=n.get_y()+s;return{x:o+a*Math.cos(i),y:r+s*Math.sin(i)-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=305*Math.PI/180,i=Math.round(n.get_width()/2),a=Math.round(n.get_height()/2),s=n.get_x()+i,o=n.get_y()+a;return{x:s+i*Math.cos(t),y:o+a*Math.sin(t)-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){var s=225*Math.PI/180,o=Math.round(n.get_width()/2),r=Math.round(n.get_height()/2),l=t+r;return{x:e+o+o*Math.cos(s)-i/2,y:l+r*Math.sin(s)-a/2}},this.get_max_width_to_bulk_text_insert=function(){return 700},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=225*Math.PI/180,i=Math.round(n.get_width()/2),a=Math.round(n.get_height()/2),s=n.get_x()+i,o=n.get_y()+a;return{x:s+i*Math.cos(t)-e,y:o+a*Math.sin(t)-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=225*Math.PI/180,t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/2),a=n.get_x()+t,s=n.get_y()+i;return{x:a-t*Math.cos(e),y:s-i*Math.sin(e)}},this.calculate_edges=function(){var e=[];return e[0]=[n.get_x()+n.get_width()/2,n.get_y()],e[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x(),n.get_y()+n.get_height()/2],e},a=Math.round(n.get_width()/2),s=Math.round(n.get_height()/2),i=t.ellipse(n.get_x()+a,n.get_y()+s,a,s);var a,s},e}(MINDMAP||{}),MINDMAP=function(e){return e.hexagon=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/20),padding_y:10+Math.round(n.get_height()/5)}},this.get_raphael_object=function(){return i},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(n.get_width()/2),a=Math.round(n.get_height()/4),s=n.get_x()+i,o=n.get_y();return{x:(s+(n.get_x()+n.get_width()))/2,y:(o+(n.get_y()+a))/2-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/4),a=n.get_x()+t,s=n.get_y(),o=n.get_x()+n.get_width(),r=n.get_y()+i,l=(s+r)/2-e/5;return{x:(l-s)/((s-r)/(a-o))+a,y:l-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:(e+Math.round(n.get_width()/2)+e)/2-i/2,y:(t+(t+Math.round(n.get_height()/4)))/2-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/4),a=n.get_x()+t,s=n.get_y();return{x:(a+n.get_x())/2-e,y:(s+(n.get_y()+i))/2-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(n.get_width()/2),t=Math.round(n.get_height()/4),i=n.get_x()+e,a=n.get_y()+n.get_height();return{x:(i+(n.get_x()+n.get_width()))/2,y:(a+(n.get_y()+n.get_height()-t))/2}},this.calculate_edges=function(){var e=[];return e[0]=[n.get_x()+n.get_width()/2,n.get_y()],e[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x(),n.get_y()+n.get_height()/2],e},i=t.path(MINDMAP_shape_config.hexagon),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.pentagon=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/3.5),padding_y:Math.round(n.get_height()/5),offset_y:Math.round(n.get_height()/20)}},this.get_raphael_object=function(){return i},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(n.get_width()/2),a=Math.round(n.get_height()/3),s=Math.round(.05*n.get_height()),o=n.get_x()+i,r=n.get_y();return{x:(o+(n.get_x()+n.get_width()))/2,y:(r+(n.get_y()+a+s))/2-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/3),a=Math.round(.05*n.get_height()),s=n.get_x()+t,o=n.get_y(),r=n.get_x()+n.get_width(),l=n.get_y()+i+a,c=(o+l)/2-e/5;return{x:(c-o)/((o-l)/(s-r))+s,y:c-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:(e+Math.round(n.get_width()/2)+e)/2-i/2,y:(t+(t+Math.round(n.get_height()/3)+Math.round(.05*n.get_height())))/2-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(n.get_width()/2),i=Math.round(n.get_height()/3),a=Math.round(.05*n.get_height()),s=n.get_x()+t,o=n.get_y();return{x:(s+n.get_x())/2-e,y:(o+(n.get_y()+i+a))/2-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(n.get_height()/3),t=Math.round(.2*n.get_width()),i=Math.round(.05*n.get_height()),a=n.get_x()+n.get_width()-t,s=n.get_y()+n.get_height();return{x:(a+(n.get_x()+n.get_width()))/2,y:(s+(n.get_y()+e+i))/2}},this.calculate_edges=function(){var e=Math.round(.12*n.get_height()),t=Math.round(.05*n.get_width()),i=[];return i[0]=[n.get_x()+n.get_width()/2,n.get_y()],i[1]=[n.get_x()+n.get_width()-t,n.get_y()+n.get_height()/2-e],i[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],i[3]=[n.get_x()+t,n.get_y()+n.get_height()/2-e],i},i=t.path(MINDMAP_shape_config.pentagon),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.rectangle=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:20,padding_y:20}},this.get_raphael_object=function(){return i},this.get_attributes_to_update_node=function(){return e.is_user_moving_node?{x:n.get_x(),y:n.get_y()}:{x:n.get_x(),y:n.get_y(),width:n.get_width(),height:n.get_height()}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){return{x:n.get_x()+n.get_width()-t/2,y:n.get_y()-t/3}},this.get_x_and_y_to_update_icon_attachment_position=function(e){return{x:n.get_x()+n.get_width()-e,y:n.get_y()-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,n,i){return{x:e-n/2,y:t-i/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=n.get_x(),i=n.get_y();return n.is_central_node()&&(t-=3),{x:t-e,y:i-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){return{x:n.get_x()+n.get_width(),y:n.get_y()+n.get_height()}},this.calculate_edges=function(){var e=[];return e[0]=[n.get_x()+n.get_width()/2,n.get_y()],e[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x(),n.get_y()+n.get_height()/2],e},i=t.rect(n.get_x(),n.get_y(),n.get_width(),n.get_height(),0)},e}(MINDMAP||{}),MINDMAP=function(e){return e.rounded_rectangle=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:20,padding_y:20}},this.get_raphael_object=function(){return i},this.get_attributes_to_update_node=function(){return e.is_user_moving_node?{x:n.get_x(),y:n.get_y()}:{x:n.get_x(),y:n.get_y(),width:n.get_width(),height:n.get_height()}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){return{x:n.get_x()+n.get_width()-t/2,y:n.get_y()-t/3}},this.get_x_and_y_to_update_icon_attachment_position=function(e){return{x:n.get_x()+n.get_width()-e,y:n.get_y()-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,n,i){return{x:e-n/8,y:t-i/8}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=n.get_x(),i=n.get_y();return n.is_central_node()&&(t-=3),{x:t-e/1.4,y:i-e/1.375}},this.get_x_and_y_to_update_abstract_connector_position=function(e){return{x:n.get_x()+n.get_width()-e+1,y:n.get_y()+n.get_height()-e+1}},this.calculate_edges=function(){var e=[];return e[0]=[n.get_x()+n.get_width()/2,n.get_y()],e[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x(),n.get_y()+n.get_height()/2],e},i=t.rect(n.get_x(),n.get_y(),n.get_width(),n.get_height(),e.cfg.default_corner_radius)},e}(MINDMAP||{}),MINDMAP=function(e){return e.set_position=function(e,t){e.transform("t"+t.get_x()+","+t.get_y()+MINDMAP_shape_config.base_scale+"s"+t.get_width()+","+t.get_height()+",0,0")},e}(MINDMAP||{}),MINDMAP=function(e){return e.speech_bubble_round=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/5),padding_y:Math.round(n.get_height()/3.5),offset_y:Math.round(-n.get_height()/10)}},this.get_raphael_object=function(){return i},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=315*Math.PI/180,a=Math.round(.8*n.get_height()),s=Math.round(n.get_width()/2),o=Math.round(a/2),r=n.get_x()+s,l=n.get_y()+o;return{x:r+s*Math.cos(i),y:l+o*Math.sin(i)-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=305*Math.PI/180,i=Math.round(.8*n.get_height()),a=Math.round(n.get_width()/2),s=Math.round(i/2),o=n.get_x()+a,r=n.get_y()+s;return{x:o+a*Math.cos(t),y:r+s*Math.sin(t)-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){var s=225*Math.PI/180,o=Math.round(.8*n.get_height()),r=Math.round(n.get_width()/2),l=Math.round(o/2),c=t+l;return{x:e+r+r*Math.cos(s)-i/2,y:c+l*Math.sin(s)-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=225*Math.PI/180,i=Math.round(.8*n.get_height()),a=Math.round(n.get_width()/2),s=Math.round(i/2),o=n.get_x()+a,r=n.get_y()+s;return{x:o+a*Math.cos(t)-e,y:r+s*Math.sin(t)-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=225*Math.PI/180,t=Math.round(.8*n.get_height()),i=Math.round(n.get_width()/2),a=Math.round(t/2),s=n.get_x()+i,o=n.get_y()+a;return{x:s-i*Math.cos(e),y:o-a*Math.sin(e)}},this.calculate_edges=function(){var e=Math.round(.2*n.get_width()),t=Math.round(.1*n.get_height()),i=[];return i[0]=[n.get_x()+n.get_width()/2,n.get_y()],i[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2-t],i[2]=[n.get_x()+n.get_width()/2-e,n.get_y()+n.get_height()],i[3]=[n.get_x(),n.get_y()+n.get_height()/2-t],i},i=t.path(MINDMAP_shape_config.speech_bubble_round),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.speech_bubble_rounded_oblong=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:20,padding_y:Math.round(n.get_height()/3.5),offset_y:Math.round(-n.get_height()/10)}},this.get_raphael_object=function(){return i},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(.035*n.get_width()),a=Math.round(.05*n.get_height());return{x:n.get_x()+n.get_width()-i-t/2,y:n.get_y()+a-t/3}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(.03*n.get_width()),i=Math.round(.025*n.get_height());return{x:n.get_x()+n.get_width()-t-e,y:n.get_y()+i-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:e+Math.round(.055*n.get_width())-i/2,y:t+Math.round(.0525*n.get_height())-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(.055*n.get_width()),i=Math.round(.0525*n.get_height());return{x:n.get_x()+t-e,y:n.get_y()+i-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(.05*n.get_width()),t=Math.round(.275*n.get_height());return{x:n.get_x()+n.get_width()-e,y:n.get_y()+n.get_height()-t}},this.calculate_edges=function(){var e=Math.round(.1825*n.get_width()),t=Math.round(.1*n.get_height()),i=[];return i[0]=[n.get_x()+n.get_width()/2,n.get_y()],i[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2-t],i[2]=[n.get_x()+n.get_width()/2+e,n.get_y()+n.get_height()],i[3]=[n.get_x(),n.get_y()+n.get_height()/2-t],i},i=t.path(MINDMAP_shape_config.speech_bubble_rounded_oblong),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.star=function(t,n){var i=null;this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/4),padding_y:Math.round(n.get_height()/4)}},this.get_raphael_object=function(){return i},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(.0925*n.get_width()),a=Math.round(.35*n.get_height());return{x:n.get_x()+n.get_width()-i-t/2,y:n.get_y()+a-t/3}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(.1*n.get_width()),i=Math.round(.35*n.get_height());return{x:n.get_x()+n.get_width()-t-e,y:n.get_y()+i-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:e-i/2,y:t+Math.round(.38*n.get_height())-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(.3*n.get_width()),i=Math.round(.3*n.get_height());return{x:n.get_x()+t-e,y:n.get_y()+i-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(.19*n.get_width()),t=Math.round(.015*n.get_height());return{x:n.get_x()+n.get_width()-e,y:n.get_y()+n.get_height()-t}},this.calculate_edges=function(){var e=Math.round(.31*n.get_width()),t=Math.round(.12*n.get_height()),i=[];return i[0]=[n.get_x()+n.get_width()/2,n.get_y()],i[1]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2-t],i[2]=[n.get_x(),n.get_y()+n.get_height()/2-t],i[3]=[n.get_x()+n.get_width()/2-e,n.get_y()+n.get_height()],i[4]=[n.get_x()+n.get_width()/2+e,n.get_y()+n.get_height()],i},i=t.path(MINDMAP_shape_config.star),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.think_bubble=function(t,n){var i=null;this.get_raphael_object=function(){return i},this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/5),padding_y:Math.round(n.get_height()/2),offset_y:Math.round(-n.get_height()/5.2)}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(.0925*n.get_width()),a=Math.round(.08*n.get_height());return{x:n.get_x()+n.get_width()-i-t/2,y:n.get_y()+a-t/3}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(.1*n.get_width()),i=Math.round(.06*n.get_height());return{x:n.get_x()+n.get_width()-t-e,y:n.get_y()+i-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:e-i/2,y:t+Math.round(.245*n.get_height())-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(.245*n.get_height());return{x:n.get_x()-e,y:n.get_y()+t-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){var e=Math.round(.35*n.get_height());return{x:n.get_x()+n.get_width(),y:n.get_y()+e}},this.calculate_edges=function(){var e=Math.round(.31*n.get_width()),t=Math.round(.25*n.get_height()),i=Math.round(.175*n.get_height()),a=Math.round(.05*n.get_height()),s=[];return s[0]=[n.get_x()+n.get_width()/2,n.get_y()],s[1]=[n.get_x(),n.get_y()+n.get_height()/2-t],s[2]=[n.get_x()+n.get_width()/2-e,n.get_y()+n.get_height()-a],s[3]=[n.get_x()+n.get_width(),n.get_y()+n.get_height()/2-i],s},i=t.path(MINDMAP_shape_config.think_bubble),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.triangle=function(t,n){var i=null;this.get_raphael_object=function(){return i},this.get_text_settings=function(){return{padding_x:Math.round(n.get_width()/2),padding_y:Math.round(n.get_height()/4),offset_y:Math.round(n.get_height()/8)}},this.get_x_and_y_to_update_icon_annotation_position=function(e,t){var i=Math.round(n.get_width()/2),a=n.get_x()+i,s=n.get_y();return{x:(a+(n.get_x()+n.get_width()))/2,y:(s+(n.get_y()+n.get_height()))/2-(e-t)}},this.get_x_and_y_to_update_icon_attachment_position=function(e){var t=Math.round(n.get_width()/2),i=n.get_x()+t,a=n.get_y(),s=n.get_x()+n.get_width(),o=n.get_y()+n.get_height(),r=(a+o)/2-e/4;return{x:(r-a)/((a-o)/(i-s))+i,y:r-e/2}},this.get_x_and_y_to_update_icon_resizer_position=function(e,t,i,a){return{x:(e+Math.round(n.get_width()/2)+e)/2-i/2,y:(t+(t+n.get_height()))/2-a/2}},this.get_x_and_y_to_update_completion_marker_position=function(e){var t=Math.round(n.get_width()/2),i=n.get_x()+t,a=n.get_y();return{x:(i+n.get_x())/2-e,y:(a+(n.get_y()+n.get_height()))/2-e}},this.get_x_and_y_to_update_abstract_connector_position=function(){return{x:n.get_x()+n.get_width(),y:n.get_y()+n.get_height()}},this.calculate_edges=function(){var e=[],t=2,i=3;return e[0]=[n.get_x()+n.get_width()/2,n.get_y()+t],e[1]=[n.get_x()+i,n.get_y()+n.get_height()-t],e[2]=[n.get_x()+n.get_width()/2,n.get_y()+n.get_height()],e[3]=[n.get_x()+n.get_width()-i,n.get_y()+n.get_height()-t],e},i=t.path(MINDMAP_shape_config.triangle),e.set_position(i,n)},e}(MINDMAP||{}),MINDMAP=function(e){return e.Text_Input_Handler=function(t){var n,i=this,a={};this.set_node=function(s){a={x:(n=s).get_x(),y:n.get_y(),width:n.get_width(),height:n.get_height(),text:n.get_text()},n.hide_text();var o=n.get_text();t.val(o),i.update_input_field_size();var r=n.get_stripped_text()===e.cfg.default_text;!r||n.get_text_color()!==e.cfg.new_node_text_color||n.parent_node&&n.parent_node.get_stripped_text()!==e.cfg.default_text||n.set_default_text_attributes();var l=get_values_from_hsl(n.get_text_color()),c=l.h,d=l.s,u=l.l,_=Raphael.hsl(c,d,u);t.css("color",_),t.show(),r&&t.val(""),t.focus()};var s=function(e){return e.is_central_node()?255:1e3};this.update=function(e){var a=undefined;if(e!==undefined&&(a=e.keyCode||e.which),13!=a){var o=t.val();if(n!==undefined&&n.get_text()!==o){var r=s(n);o.length>r&&t.val(o.substring(0,r)),n.set_text(o),n.resize_to_text(),i.update_input_field_size()}}else i.finish_input()},this.is_active=function(){return n!==undefined},this.update_input_field_size=function(){if(n!==undefined){var i=50,a=n.get_width()/e.viewbox.get_current_zoom(),s=n.get_text().split(/\r\n|\r|\n/).length,o=n.get_text_size()*s*1.2;0===o&&(o=1.2*n.get_text_size());var r=1.2*o/e.viewbox.get_current_zoom(),l=0,c=(n.get_height()-o)/e.viewbox.get_current_zoom(),d=e.viewbox.convert_local_position_to_screen_position(n.get_x()+(n.get_shape_settings().offset_x||0),n.get_y()+(n.get_shape_settings().offset_y||0));d.x+a>$(window).width()?a=$(window).width()-d.x:d.x+a+i<=$(window).width()&&(a+=i,d.x=d.x-i/2),d.y+r>$(window).height()&&(r=$(window).height()-d.y),t.width(a),t.height(r),navigator.userAgent.match(/MSIE 9.0/i)&&(c-=.05*r);var u=null!==window.chrome&&window.chrome!==undefined&&"Google Inc."===window.navigator.vendor?"121%":"120%";t.css({left:d.x,top:d.y,"padding-left":Math.round(l/2),"padding-right":Math.round(l/2),"padding-top":Math.round(c/2),"padding-bottom":Math.round(c/2),font:n.get_full_font_style_scaled_to_zoom(),"line-height":u,overflow:"hidden"})}},this.finish_input=function(){n!==undefined&&(a.text!==t.val()&&e.add_to_undo_queue("change",{node:n,node_before_text_change:a},"text",arguments),n.finish_input(t.val()),t.blur(),t.hide(),n=undefined)},this.wrap_bulk_inserted_text=function(n,a){var o=n.get_width(),r=n.get_height(),l=e.cfg.node_padding,c=s(n),d=n.get_shape().get_max_width_to_bulk_text_insert();if(e.text_input_handler.is_active()){var u=t.val().replace(/(\n)/gm," ");u=(u=u.replace(/ +(?= )/g,"")).substring(0,c),t.val(u),n.set_text(u)}if(n.get_text_object().getBBox().width+l>d){var _=n.get_x(),h=n.get_y();n.set_width(d),n.set_x(_+(o-d)/2),n.wrap_text();var p=n.get_text_object().getBBox().height+l;n.set_y(h+(r-p)/2),n.set_height(p),n.update(),e.text_input_handler.is_active()?(i.update_input_field_size(),e.selector.update(),t.val(n.get_text())):a||e.update_node_on_server(n)}n.is_central_node()&&e.root_node.childNodes&&0==e.root_node.childNodes.length&&(e.new_mindmap_prompts.update(),e.new_mindmap_prompts.show())},t.on("paste",function(){n.is_central_node()&&e.new_mindmap_prompts.hide(),setTimeout(function(){i.wrap_bulk_inserted_text(n)},0)}),e.is_mobile_device&&window.visualViewport&&window.visualViewport.addEventListener("resize",function(){if(n){t.css("opacity",0);window.setTimeout(function(){e.viewbox.animate_to_node(n,200)},20),window.setTimeout(function(){i.update_input_field_size(),t.css("opacity",1)},400)}})},e}(MINDMAP||{}),MINDMAP=function(e){return e.Toolbar=function(t,n){var i=this;i.buttons=n;var a=!1,s=e.cfg.toolbars.spacing_between_buttons,o=0;$.each(n,function(e,t){o+=t.get_width()+s,t.set_parent_toolbar(i)}),o-=e.cfg.toolbars.spacing_between_buttons,o+=2*e.cfg.toolbars.inner_padding,this.get_width=function(){return o};var r=e.cfg.toolbars.default_height,l=undefined,c=t.rect(0,0,o,r,16);c.attr({fill:"#fff","stroke-width":0,opacity:e.cfg.toolbars.background_opacity}),c.mousedown(function(e){e.preventDefault()}),SVG_HELPER.chrome_fix_stroke(c),this.set_node=function(e){var t;t=(l=e).is_media()?"#fff":l.get_color(),c.attr({fill:t}),$.each(n,function(e,t){t.set_node(l)})},this.set_background_color=function(e){c.attr({fill:e})},this.disable_button=function(e){n[e].disable()},this.enable_button=function(e){
n[e].enable()},this.is_active=function(){return a},this.set_color=function(e){c.attr({fill:e})},this.set_position=function(t){var i=t.x,a=t.y;i=parseInt(i-o/2,10),a=parseInt(a-r/2,10),c.attr({x:i,y:a});var l=0;$.each(n,function(t,n){n.set_position({x:i+l+e.cfg.toolbars.inner_padding,y:a+e.cfg.toolbars.inner_padding}),l+=n.get_width()+s})},this.show=function(t){t!==undefined&&i.set_position(t),c.toFront(),c.attr({opacity:e.cfg.toolbars.background_opacity}),c.show(),$.each(n,function(e,t){t.dim(!1),t.toFront(),t.show()}),a=!0},this.toggle=function(e){a?i.hide():i.show(e)},this.hide=function(){$.each(n,function(e,t){t.hide()}),c.hide()},this.fadeOut=function(){$.each(n,function(e,t){t.fadeOut()}),c.animate({opacity:0},e.cfg.toolbars.fade_out_time,"linear")},this.remove=function(){button!==undefined&&($.each(n,function(e,t){t.remove()}),button=undefined),c!==undefined&&(c.remove(),c=undefined)},this.hide()},e}(MINDMAP||{}),MINDMAP=function(e){return e.ToolbarButton=function(t,n,i,a){var s=this;s.identifier=t||"";var o=i.id!==undefined?i.id:undefined;this.get_id=function(){return o};var r=!1,l=0,c=0,d=parseInt(e.cfg.toolbars.general_icon_size/2,10);this.get_width=function(){return 2*d};var u=n.circle(l,c,d),_=i.image_path?i.image_path:undefined,h=i.icon?i.icon:undefined,p=undefined,f=!1,m=undefined;h!==undefined?f=!0:_!==undefined&&(m=n.image(_,0,0,16,16));undefined;this.set_parent_toolbar=function(e){e},this.set_node=function(e){p=e,this.enable()};var g=!0;this.enable=function(){g=!0},this.disable=function(){g=!1},this.get_node=function(){return p},this.set_position=function(e){u.stop(),l=e.x+d,c=e.y+d,u.attr({cx:l,cy:c}),f?h.set_position(l-8,c-8):m!==undefined&&m.attr({x:l-8,y:c-8})};var v=function(){g&&u.animate({fill:e.cfg.toolbars.button_color_highlighted,r:d+2},150,"linear")},b=function(){var t;t=g?r?e.cfg.toolbars.button_color_highlighted:w?e.cfg.toolbars.button_dimmed_color:e.cfg.toolbars.button_color:e.cfg.toolbars.button_disabled_color,u.animate({fill:t,r:d},150,"linear")},y=n.set();y.push(u),f?y.push(h.get_path()):m!==undefined&&y.push(m),y.mouseover(v),y.mouseout(b),y.attr("cursor","pointer");var w=!1;this.dim=function(t){g&&(t?(u.attr({fill:e.cfg.toolbars.button_dimmed_color}),w=!0):(u.attr({fill:e.cfg.toolbars.button_color}),w=!1))},y.mousedown(function(t){1==MOUSE_HELPER.get_mouse_click(t)&&g&&(e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),$(document).trigger("mindmap_toolbar_button_clicked"))}),y.mouseup(function(e){if(1==MOUSE_HELPER.get_mouse_click(e)&&g){if(document.activeElement&&("annotation_input"===document.activeElement.id||"node_input_text"===document.activeElement.id))return;"function"==typeof a?a(s.get_node()):"object"==typeof a&&toggle_associated_toolbar(),e.preventDefault()}}),this.hide=function(){y.hide()},this.fadeOut=function(){y.animate({opacity:0},e.cfg.toolbars.fade_out_time,"linear")},this.show=function(){y.attr({opacity:1}),y.show()},this.toFront=function(){y.toFront()},this.remove=function(){y.remove()}},e}(MINDMAP||{}),MINDMAP=function(e){return e.toolbars=new function(){var e=this;this.toolbars=[],this.refresh_toolbar_array=function(){this.toolbars.length=0,this.toolbars.push(e.main)},this.set_node=function(e){e!==undefined&&$.each(this.toolbars,function(t,n){n.set_node(e)})},this.set_color=function(e){$.each(this.toolbars,function(t,n){n.set_color(e)})},this.fadeOut=function(){$.each(this.toolbars,function(e,t){t.fadeOut()})},this.hide=function(){$.each(this.toolbars,function(e,t){t.hide()})}},e.initialise_toolbars=function(t){var n=[];n[0]=new e.NewNodeButton("button_new_node",t,{corner_radius:14,icon:e.icons.new_node,id:2}),e.toolbars.main=new e.Toolbar(t,n),e.toolbars.refresh_toolbar_array()},e}(MINDMAP||{}),UNDO_REDO=function(e){var t,n=[],i=[],a={undo:[],redo:[]},s=function(){return 0===n.length},o=function(){return 0===i.length},r=function(){s()?MAIN_TOOLBAR.disable_button("undo"):MAIN_TOOLBAR.enable_button("undo"),o()?MAIN_TOOLBAR.disable_button("redo"):MAIN_TOOLBAR.enable_button("redo")},l=function(e){_.each(a[e],function(e){e()})};return e.clean_queue=function(e){"undo"===e?(n=[],MAIN_TOOLBAR.disable_button("undo")):"redo"===e&&(i=[],MAIN_TOOLBAR.disable_button("redo"))},e.clean_all_queues=function(){e.clean_queue("undo"),e.clean_queue("redo")},e.get_undo_queue=function(){return n},e.get_redo_queue=function(){return i},e.add_to_undo_queue=function(e,t){n.push({action:e,objs:t}),r()},e.add_to_redo_queue=function(e,t){i.push({action:e,objs:t}),r()},e.undo=function(){if(!s()){var e=n.pop();if(void 0!==e){var i="undo_"+e.action;"function"==typeof t[i]&&(t[i](e.objs,"undo"),r(),l("undo"))}}},e.redo=function(){if(!o()){var e=i.pop();if(void 0!==e){var n="undo_"+e.action;"function"==typeof t[n]&&(t[n](e.objs,"redo"),r(),l("redo"))}}},e.remove_from_undo_queue=function(){n=_.reject(n,function(e){return"undefined"!=typeof e.remove}),r()},e.remove_from_redo_queue=function(){i=_.reject(i,function(e){return"undefined"!=typeof e.remove}),r()},e.on=function(t,n){return a[t].push(n),e},e.init=function(e){n=[],i=[],a.undo=[],a.redo=[],t=e},e}(UNDO_REDO||{}),MINDMAP=function(e){return e.undo_change=function(t,n){var i=[];e.unselect_all(),$.each(t,function(a,s){if(s.hasOwnProperty("id")){var o=e.nodes[s.id];if(void 0===o&&(o=e.get_node_from_previous_ids(s.id)),void 0!==o){var r={};"undo"===n&&s.hasOwnProperty("undo_attributes")?r=s.undo_attributes:"redo"===n&&s.hasOwnProperty("redo_attributes")&&(r=s.redo_attributes),$.each(r,function(t,n){$.each(n,function(n,i){i.hasOwnProperty("is_node")&&_.isUndefined(e.nodes[i.get_id()])&&(r[t][n]=e.get_node_from_previous_ids(i.get_id()))})}),$.each(r,function(e,t){t.push(!1),o[e].apply(o,t)}),i.push(o)}}else if(s.hasOwnProperty("object")){var l=s.object;r={};"undo"===n&&s.hasOwnProperty("undo_attributes")?r=s.undo_attributes:"redo"===n&&s.hasOwnProperty("redo_attributes")&&(r=s.redo_attributes),$.each(r,function(e,t){t.push(!1),l[e].apply(l,t)}),"undo"===n?UNDO_REDO.add_to_redo_queue("change",t):"redo"===n&&UNDO_REDO.add_to_undo_queue("change",t)}}),i.length>0&&("undo"===n?UNDO_REDO.add_to_redo_queue("change",t):"redo"===n&&UNDO_REDO.add_to_undo_queue("change",t),e.batch_update_nodes_on_server(i))},e.undo_create=function(t,n){e.unselect_all(),$.each(t,function(t,i){var a=e.nodes[i.id];void 0===a&&(a=e.get_node_from_previous_ids(i.id)),void 0===a||a.is_central_node()||("redo"===n?e.add_to_undo_queue("delete",{node:a},"mind_map_node",[],!0):"undo"===n&&e.add_to_redo_queue("delete",{node:a},"mind_map_node"),e.delete_nodes_on_server([a.get_id()]),e.delete_node_from_local_array(a))})},e.undo_delete=function(t,n){e.unselect_all(),$.each(t,function(t,i){e.create_a_new_node_triggered_undo_button(i,e.paper,n)})},e.add_to_undo_queue=function(t,n,i,a,s){var o=t+"_"+i;"function"==typeof e[o]&&(a.length>0&&!a[a.length-1]||(UNDO_REDO.add_to_undo_queue(t,e[o](n)),void 0!==s&&s||UNDO_REDO.clean_queue("redo")))},e.add_to_redo_queue=function(t,n,i){var a=t+"_"+i;"function"==typeof e[a]&&UNDO_REDO.add_to_redo_queue(t,e[a](n))},e.get_node_from_previous_ids=function(t){var n;return $.each(e.nodes,function(e,i){void 0===n&&(e>0&&parseInt(e)===parseInt(t)?n=i:jQuery.inArray(t,i.get_previous_ids())>-1&&(n=i))}),n},e.create_mind_map_node=function(e){return[{id:e.node_id}]},e.delete_mind_map_node=function(e){var t=function(e){var t=[],n=e.get_annotations();return n.length&&n.forEach(function(e){t.push(e.get_content())}),t};return[{previous_ids:e.node.get_previous_ids().concat([e.node.get_id()]),id_parent:e.node.get_parent_node_id(),x_pos:parseInt(e.node.get_x(),10),y_pos:parseInt(e.node.get_y(),10),width:parseInt(e.node.get_width(),10),height:parseInt(e.node.get_height(),10),color:e.node.get_color(),text:e.node.get_text(),text_color:e.node.get_text_color(),text_bold:e.node.is_bold(),text_italic:e.node.is_italic(),text_size:e.node.get_text_size(),text_font:e.node.get_text_font_key(),text_font_value:e.node.get_text_font(),shape:e.node.get_shape().get_shape(),outline:e.node.is_outline_only(),annotations:t(e.node),media_id:e.node.get_media_id()}]},e.change_shape=function(e){var t=[];return $.each(e.selected_nodes,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_x:[i.get_x()],set_y:[i.get_y()],set_width:[i.get_width()],set_height:[i.get_height()],transform_shape:[i.get_shape().get_shape()]},redo_attributes:{transform_shape:[e.shape]}})}),t},e.change_position=function(e){var t=[];return $.each(e.selected_nodes,function(e,n){t.push({id:n.get_id(),undo_attributes:{set_position:[n.ox,n.oy],update:[]},redo_attributes:{set_position:[n.get_x(),n.get_y()],update:[]}})}),t},e.change_resize=function(e){var t=[];return $.each(e.selected_nodes,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_x:[e.x[n]],set_y:[e.y[n]],set_width:[e.width[n]],set_height:[e.height[n]],wrap_text:[],update:[]},redo_attributes:{set_x:[i.get_x()],set_y:[i.get_y()],set_width:[i.get_width()],set_height:[i.get_height()],wrap_text:[],update:[]}})}),t},e.change_colour=function(e){var t=[],n=e.selected_nodes;return $.each(e.selected_nodes,function(t,i){e.include_children&&(n=n.concat(i.get_descendants()))}),$.each(n,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_color:[i.get_color(),{include_children:!1,outline_only:i.is_outline_only()}]},redo_attributes:{set_color:[e.color,{include_children:!1,outline_only:i.is_outline_only()}]}})}),t},e.change_outline_only=function(e){var t=[],n=e.selected_nodes;return $.each(e.selected_nodes,function(t,i){e.include_children&&(n=n.concat(i.get_descendants()))}),$.each(n,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_outline_only:[i.is_outline_only(),{update:!0,include_children:!1}]},redo_attributes:{set_outline_only:[e.outline_only,{update:!0,include_children:!1}]}})}),t},e.change_text_bold=function(e){var t=[];return $.each(e.selected_nodes,function(e,n){t.push({id:n.get_id(),undo_attributes:{set_bold:[n.is_bold()]},redo_attributes:{set_bold:[!n.is_bold()]}})}),t},e.change_text_italic=function(e){var t=[];return $.each(e.selected_nodes,function(e,n){t.push({id:n.get_id(),undo_attributes:{set_italic:[n.is_italic()]},redo_attributes:{set_italic:[!n.is_italic()]}})}),t},e.change_text_size=function(e){var t=[];return $.each(e.selected_nodes,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_x:[i.get_x()],set_y:[i.get_y()],set_width:[i.get_width()],set_height:[i.get_height()],set_text_size:[i.get_text_size()],update:[]},redo_attributes:{set_text_size:[e.text_size],resize_to_text:[],update:[]}})}),t},e.change_text_font=function(e){var t=[];return $.each(e.selected_nodes,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_text_font_key:[i.get_text_font_key()],set_text_font:[i.get_text_font()]},redo_attributes:{set_text_font_key:[e.font_key],set_text_font:[e.font]}})}),t},e.change_text_colour=function(e){var t=[],n=e.selected_nodes;return $.each(e.selected_nodes,function(t,i){e.include_children&&(n=n.concat(i.get_descendants()))}),$.each(n,function(n,i){t.push({id:i.get_id(),undo_attributes:{set_text_color:[i.get_text_color(),!1]},redo_attributes:{set_text_color:[e.text_color,!1]}})}),t},e.change_text=function(e){var t=[];return t.push({id:e.node.get_id(),undo_attributes:{set_x:[e.node_before_text_change.x],set_y:[e.node_before_text_change.y],set_width:[e.node_before_text_change.width],set_height:[e.node_before_text_change.height],finish_input:[e.node_before_text_change.text],update:[]},redo_attributes:{finish_input:[e.node.get_text()],resize_to_text:[],update:[]}}),t},e.change_adopt_child=function(e){var t=[];return t.push({id:e.parent.get_id(),undo_attributes:{adopt_child:[e.child]},redo_attributes:{adopt_child:[e.child,e.old_parent]}}),t},e.change_create_abstract_connection=function(e){var t=[];return t.push({id:e.from_connection.get_id(),undo_attributes:{remove_abstract_connection:[e.to_connection,{update_on_server:!0,add_to_undo_queue:!1}]},redo_attributes:{create_abstract_connection:[e.to_connection,{update_on_server:!0,add_to_undo_queue:!1}]}}),t},e.change_remove_abstract_connection=function(e){var t=[];return t.push({id:e.from_connection.get_id(),undo_attributes:{create_abstract_connection:[e.to_connection,{update_on_server:!0,add_to_undo_queue:!1}]},redo_attributes:{remove_abstract_connection:[e.to_connection,{update_on_server:!0,add_to_undo_queue:!1}]}}),t},e.change_bg_colour=function(e){var t=[];return t.push({object:e.obj,undo_attributes:{set_background_color:[e.obj.background_color,e.obj.background_opacity],update_bg_colour_on_toolbar:[e.obj.background_color,e.obj.background_opacity]},redo_attributes:{set_background_color:[e.background_color,e.background_opacity],update_bg_colour_on_toolbar:[e.background_color,e.background_opacity]}}),t},e}(MINDMAP||{}),MOUSE_HELPER=function(e){return e.get_mouse_click=function(e){if(!e)return!1;var t=1;return e.which?t=e.which:e.button&&(1&e.button?t=1:4&e.button?t=2:2&e.button&&(t=3)),e.touches&&e.touches.length>1&&(t=4),t},e.get_mouse_coordinates=function(e){var t=0,n=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}},e.left_clicked=function(t){return 1===e.get_mouse_click(t)},e.middle_clicked=function(t){return 2===e.get_mouse_click(t)},e.right_clicked=function(t){return 3===e.get_mouse_click(t)},e}(MOUSE_HELPER||{}),MINDMAP=function(e){var t=function(){$.each(e.nodes,function(e,t){t.update_strokes()})},n=_.throttle(t,50);e.MindMapViewBox=function(){};var i=extend(e.MindMapViewBox,SVG_HELPER.ViewBox);return $.extend(e.MindMapViewBox.prototype,{crop_to_mind_map:function(){var t=e.crop_box.x,n=e.crop_box.y,i=e.crop_box.width,a=e.crop_box.height;this.set(t,n,i,a)},centre_on_root_node:function(){var t=e.root_node.get_centre_position().x-this.paper.width/2*this.zoom_scale,n=e.root_node.get_centre_position().y-this.paper.height/2*this.zoom_scale,i=this.paper.width*this.zoom_scale,a=this.paper.height*this.zoom_scale;this.set(t,n,i,a)},update:function(e){var t=this.paper._viewBox[2]!==this.width||this.paper._viewBox[3]!==this.height;i.update.call(this,e),t&&n()},set:function(){i.set.apply(this,arguments),t()},animate_to:function(t,n){var a=this.zoom_scale;$.each(e.nodes,function(e,i){var s=a;t.zoom_scale&&(s=t.zoom_scale),i.animate_stroke_width(s,n)}),i.animate_to.apply(this,arguments)},focus_on_node_and_children:function(e){var t=this.calculate_viewbox_to_focus_on_parent_node(e);this.set(t.x,t.y,t.width,t.height,t.zoom_scale),this.update()},animate_to_include_node:function(e,t){var n=0,i=0;e.get_x()<this.x&&(n=e.get_x()-this.x),e.get_x()+e.get_width()>this.x+this.width&&(n=e.get_x()+e.get_width()-(this.x+this.width)),e.get_y()<this.y&&(i=e.get_y()-this.y),e.get_y()+e.get_height()>this.y+this.height&&(i=e.get_y()+e.get_height()-(this.y+this.height)),0===n&&0===i||(this.x+=n,this.y+=i,this.animate_to({x:this.x,y:this.y,width:this.width,height:this.height},t))},on_wheel_zoom:function(){e.is_user_moving_node||e.is_reparenting||e.is_connecting||"undefined"!=typeof e.player&&e.player.is_playing()||(i.on_wheel_zoom.apply(this,arguments),e.text_input_handler.is_active()&&e.text_input_handler.finish_input())},wheel_motion:function(e){var t=$("#canvas_container");e||(e=window.event),0!==t.length&&t.isOver(e.pageX,e.pageY)&&(document.activeElement&&"annotation_input"===document.activeElement.id?$(document).trigger("annotation:mousewheel"):i.wheel_motion.apply(this,arguments))},gesture_start:function(){e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),$.each(e.selected_nodes,function(e,t){t.finish_drag()}),i.gesture_start.apply(this,arguments)},gesture_end:function(){i.gesture_end.apply(this,arguments)},on_zoom_slide:function(){"undefined"!=typeof MINDMAP.player&&MINDMAP.player.is_playing()||(MINDMAP.text_input_handler.is_active()&&MINDMAP.text_input_handler.finish_input(),i.on_zoom_slide.apply(this,arguments))},paper_mouse_down:function(t){e.text_input_handler.is_active()&&e.text_input_handler.finish_input(),1===MOUSE_HELPER.get_mouse_click(t)&&e.is_user_resizing&&(this.left_clicked=!1),i.paper_mouse_down.apply(this,arguments)},paper_mouse_up:function(){if(this.has_clicked_on_background&&!this.has_user_panned&&!this.has_user_gestured&&(e.unselect_all(),e.read_only_view)){var t=$("#annotation_viewer").attr("data-node-id");e.nodes[t]&&e.nodes[t].close_annotation()}i.paper_mouse_up.apply(this,arguments)}}),e}(MINDMAP||{}),MINDMAP=function(e){return e.ZoomCalculator=function(){var t=null,n=null,i=null,a=null,s=function(){t=null,n=null,i=null,a=null,$.each(e.nodes,function(s,o){var r=o.get_y(),l=o.get_x()+o.get_width(),c=o.get_y()+o.get_height(),d=o.get_x(),u=e.cfg.default_stroke_weight_outline;o.is_outline_only()&&(r-=u/2,d-=u/2,l+=u,c+=u),(null===t||r<t)&&(t=r),(null===n||l>n)&&(n=l),(null===i||c>i)&&(i=c),(null===a||d<a)&&(a=d)})};this.zoom_to_window_size=function(){s();var o=$("#canvas_container").width(),r=$("#canvas_container").height(),l=(n+a)/2,c=(t+i)/2;e.viewbox.pan_absolute(l-o/2,c-r/2);var d=(n-a+50)/o,u=(i-t+50)/r,h=d>u?d:u;h<e.viewbox.config.max_zoom_in?e.viewbox.init_zoom_slider({max_zoom_in:h}):h>e.viewbox.config.max_zoom_out&&e.viewbox.init_zoom_slider({max_zoom_out:h}),e.viewbox.general_zoom(h),_.defer(function(){$(document).trigger("viewbox:update_zoom",[h])})},this.get_viewbox_for_fit_to_window=function(){s();var o=$("#canvas_container").width(),r=$("#canvas_container").height(),l=(n-a+50)/o,c=(i-t+50)/r,d=l>c?l:c;d<e.viewbox.config.max_zoom_in&&(d=e.viewbox.config.max_zoom_in),d>e.viewbox.config.max_zoom_out&&(d=e.viewbox.config.max_zoom_out);var u=o*d,_=r*d;return{x:(n+a)/2-u/2,y:(t+i)/2-_/2,width:u,height:_,zoom_scale:d}}},$(document).on("mind_map:init",function(){if(e.image_view)return!1;var t=$.query_string("zoom"),n=$.query_string("x"),i=$.query_string("y"),a=_.map(e.nodes,function(e){return e}).length;e.zoom_calculator=new e.ZoomCalculator,null!==t&&null!==n&&null!==i?(e.viewbox.general_zoom(t),e.viewbox.pan(n,i)):a>1&&e.zoom_calculator.zoom_to_window_size(),e.viewbox.set_full_viewbox_calculator(e.zoom_calculator.get_viewbox_for_fit_to_window),$(document).trigger("mindmap:calculated_initial_view")}),WINDOW_MESSAGING.listen("public_view:session_initialized:log_view",function(){_.defer(function(){$("#recentre_canvas").click()})}),WINDOW_MESSAGING.listen("canonical:frame_revealed",function(){_.defer(function(){$("#recentre_canvas").click()})}),e}(MINDMAP||{});
/*!
 * jQuery UI Touch Punch 0.2.2.1
 *
 * version 0.2.2.1 (28th January 2020) Change criteria for detecting touch devices.
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(e){function t(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}function n(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch=t(),e.support.touch){var i,a=e.ui.mouse.prototype,s=a._mouseInit;a._touchStart=function(e){var t=this;!i&&t._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,t._touchMoved=!1,n(e,"mouseover"),n(e,"mousemove"),n(e,"mousedown"))},a._touchMove=function(e){i&&(this._touchMoved=!0,n(e,"mousemove"))},a._touchEnd=function(e){i&&(n(e,"mouseup"),n(e,"mouseout"),this._touchMoved||n(e,"click"),i=!1)},a._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),s.call(t)}}}(jQuery);var CKEDITOR_CONFIG=function(e){var t,n,i,a=[],s=_.extend({},Backbone.Events),o={fore_color:{element:"span",attributes:{"class":"wysiwyg-color-#(color)"},overrides:[{element:"span",attributes:{"class":/^wysiwyg-color-/}}]},font_size:{element:"span",attributes:{"class":"wysiwyg-font-size-#(size)"},overrides:[{element:"span",attributes:{"class":/^wysiwyg-font-size-/}}]},insert_link:{element:"a",attributes:{href:"#(href)",target:"_blank",rel:"nofollow"}}},r=function(e,t){a.forEach(function(i){if(n||i.fire("select_all"),"foreColor"===e)i.applyStyle(new CKEDITOR.style(o.fore_color,{color:t}));else if("fontSize"===e)i.applyStyle(new CKEDITOR.style(o.font_size,{size:t}));else if("insertLink"===e){var a=new CKEDITOR.style(o.insert_link,{href:t}),s=i.getSelection().getRanges();a.type=CKEDITOR.STYLE_INLINE;for(var r=0;r<s.length;r++){if(s[r].collapsed){var l=new CKEDITOR.dom.text(t);s[r].insertNode(l),s[r].selectNodeContents(l)}i.applyStyle(a)}}else i.execCommand(e);n||(i.getSelection().removeAllRanges(),$(i.editable().$).blur())}),s.trigger("update",a)},l=function(e){var t=e.find("#insert_link_btn");if(t.length){var n=".modal#insert_link",i=n+" #insert_link_form",s=i+" input#user_insert_link",o=i+" .popup_error",l=function(){$(s).removeClass("invalid"),$(o).text("")};t.off("click").on("click",function(){a.forEach(function(){t.hasClass("wysiwyg-command-active")?r("unlink"):$(n).modal("show")},this)}),$(i).off("submit").on("submit",function(){var e=$.trim($(s).val());return e?(-1===e.toLowerCase().indexOf("://")&&(e="http://"+e),a.forEach(function(){r("insertLink",e)}),$(n).modal("hide"),!1):($(s).addClass("invalid"),$(o).text(I18n.t("notes.link.error")),!1)}),$(s).off("keydown").on("keydown",function(){l()}),$(n).off("show.bs.modal").on("show.bs.modal",function(){t.parent(".btn-group").addClass("open"),$(s).val("")}),$(n).off("hide.bs.modal").on("hide.bs.modal",function(){t.parent(".btn-group").removeClass("open"),l(),1===a.length&&a[0]&&a[0].focus()})}},c=function(e){var t=(i={},e.find("#font-size-indicators").children().each(function(e,t){var n=$(t).attr("data-wysiwyg-command-value");i["wysiwyg-font-size-"+n]=n}),_.values(i).reverse());e.find("#font-size-slider").slider({orientation:"vertical",range:"min",min:0,max:t.length-1,value:t.length-1,step:1,slide:function(e,n){r("fontSize",t[n.value])}}),e.find("#font-size-slider span.ui-slider-handle").removeAttr("tabindex"),e.find("#font-size-dropdown").off("mousedown").on("mousedown",function(e){e.preventDefault()})},d=function(e){e.find("a").off("mousedown").on("mousedown",function(e){e.preventDefault()}),e.find("[data-wysiwyg-command]").off("click").on("click",function(){r($(this).attr("data-wysiwyg-command"),$(this).attr("data-wysiwyg-command-value"))}),c(e),l(e)},u=function(e,t){var n=["bold","italic","underline","bulletedlist","numberedlist","justifyleft","justifycenter","justifyright","justifyblock","unlink"];e.on("instanceReady",function(){d(t),e.$toolbar=t,n.map(function(t){return e.getCommand(t)}).forEach(function(t){t.on("state",function(){"unlink"===this.name?e.$toolbar.find("#insert_link_btn").toggleClass("wysiwyg-command-active",this.state===CKEDITOR.TRISTATE_OFF):e.$toolbar.find('[data-wysiwyg-command="'+this.name+'"]').toggleClass("wysiwyg-command-active",this.state===CKEDITOR.TRISTATE_ON)})}),$(e.editable().$).addClass("wysiwyg-editor"),e.on("selectionChange",function(t){var n=t.data.path.elements.map(function(e){return $(e).attr("class")}).filter(function(e){return e&&e.match(/^wysiwyg-font-size-(.+)/g)})[0];n||(n=_.keys(i)[0]),e.$toolbar.find("#font-size-slider").slider("value",$.inArray(n,_.keys(i).reverse()))})}),e.on("blur",function(){$(document).trigger("ckeditor:contenteditable:blur",$(":focus")),e.$toolbar.find("#insert_link_btn").removeClass("wysiwyg-command-active"),e.$toolbar.find("[data-wysiwyg-command]").removeClass("wysiwyg-command-active")}),e.on("select_all",function(){e.execCommand("selectAll")}),e.on("dialogShow",function(){CKEDITOR.dialog.getCurrent().hide()})};return e.editor=function(e,t){var n=CKEDITOR.inline(e,{language:"en",customConfig:"",removePlugins:"magicline",disableNativeSpellChecker:!1,disableAutoInline:!0,title:!1,enableContextMenu:!1,tabSpaces:3,toolbar:[[]],dialog_backgroundCoverColor:"transparent",justifyClasses:["wysiwyg-text-align-left","wysiwyg-text-align-center","wysiwyg-text-align-right","wysiwyg-text-align-justify"],allowedContent:"p b strong i em u ul ol li; a[!href];",extraAllowedContent:"span(!wysiwyg-font-size-*);div(!wysiwyg-text-align-*);p(!wysiwyg-text-align-*);span(!wysiwyg-color-*)"});return u(n,t),n},e.queue=function(e){t?e():PAGE_EVENTS.on("ckeditor:ready",e)},e.destroy=function(e){var t=CKEDITOR.instances[e];if(t)try{t.focusManager.blur(!0),t.destroy()}catch(n){}},e.on=function(e,t){s.on(e,t)},$(document).on("flowchart_editor:init notes_editor:init slide_set_editor:init course_editor:init",function(){a=[],s.off(),t?_.keys(CKEDITOR.instances).forEach(function(t){e.destroy(t)}):$.ajax({dataType:"script",cache:!0,url:"https://cdn.ckeditor.com/4.18.0/full-all/ckeditor.js"}).done(function(){t=!0,$(document).trigger("ckeditor:ready")})}),$(document).on("editor_focus copy_1_focus copy_2_focus",function(e,t){n=!0,a=[t]}),$(document).on("editor_select",function(){n=!1,a=Array.prototype.slice.call(arguments,1)}),$(document).on("ckeditor:contenteditable:blur",function(e,t){$.browser.webkit&&t&&"function"==typeof t.setSelectionRange&&(t.setSelectionRange($(t).val().length,$(t).val().length),t.focus())}),e}(CKEDITOR_CONFIG||{}),MAIN_TOOLBAR=function(e){var t,n,i=function(){var e=t.find(".toolbar_section");_.each(e,function(e){var n=$(e).attr("id");t.on(n+":enabled",function(t,n){n?$(e).removeClass("disabled"):$(e).addClass("disabled")})});var n=t.find(".btn");_.each(n,function(e){var n=$(e).attr("id");t.on(n+":enabled",function(t,n){n?$(e).removeClass("disabled"):$(e).addClass("disabled")})})},a=function(){var n=10;$(".dropdown-slider").slider({orientation:"vertical",range:"min",min:0,max:n,value:1,step:1,slide:function(t,i){e.perform_action($(this).attr("id"),{value:n-i.value,range:n})},stop:function(t,i){e.perform_action($(this).attr("id")+"_stop",{value:n-i.value,range:n})}}),t.find(".dropdown-slider").parents(".dropdown-slider-container").find("a.ui-slider-handle").bind("mousedown",function(e){e.preventDefault()}),t.find(".dropdown-slider-toggle").click(function(){var t=$(this).attr("data-slider"),i=e.perform_action("set_slider_"+t,{range:n});void 0!==i&&$(this).parents(".btn-group").find(".dropdown-slider").slider("value",n-i)})},s=function(e,t){var n=e.parents(".colour_picker_group").find(".colour_picker_dropdown");n.find("a.colour_select").removeClass("active"),t.multi?(e.find(".multi").show(),e.find(".one").hide()):(e.find(".one").css("background-color",t.color),"undefined"!=typeof t.opacity&&0===parseInt(t.opacity,10)?n.find("a.transparent").addClass("active"):n.find('a[data-color="'+t.color+'"]').addClass("active"),e.find(".multi").hide(),e.find(".one").show()),n.find(".addn_option").toggleClass("disabled",!!t.documents)},o=function(){_.each(t.find(".colour_picker_btn"),function(n){var i=$(n),a=i.parents(".colour_picker_group").find(".colour_picker_dropdown"),o=i.attr("id"),r=a.find('.addn_option input[type="checkbox"]');a.off("click","a.colour_select").on("click","a.colour_select",function(t){t.preventDefault();var n={color:$(this).attr("data-color"),opacity:$(this).attr("data-opacity")};_.each(r,function(e){n[$(e).attr("id")]=$(e).is(":checked")}),e.perform_action(o,n)}),t.on(o+":update",function(e,t){s($("#"+o),t)}),_.each(r,function(e){var n=$(e),i=n.attr("id");t.on(i+":update",function(e,t){t?n.prop("checked",!0):n.prop("checked",!1)})})});var n=function(e){t.find(".colour_picker").hide(),t.find(".colour_picker."+e).show(),t.find(".colour_palette_select").val(e)};t.on("change",".colour_palette_select",function(){var t=$(this).val();n(t),e.perform_action("colour_palette_select",t)}),t.on("palette:update",function(e,t){$('.colour_palette_select option[value="'+t+'"]').length>0&&n(t)})},r=function(){var n=t.find(".font_picker"),i=function(){n.find(".font_select").removeClass("selected")},a=function(e){e.addClass("selected")},s=function(e){i(),n.find(".font_select").each(function(){$(this).attr("data-text-font-key")===e.text_font_key&&a($(this))})};n.off("click","a.font_select").on("click","a.font_select",function(t){t.preventDefault(),i(),a($(this)),e.perform_action($(this).attr("id"),{font_key:$(this).attr("data-text-font-key"),font:$(this).attr("data-text-font")})}),t.on("font_text:update",function(e,t){s(t)})},l=function(n){var i=t.find(n),a=function(e){var t=i.find(".shape_picker_btn .shape_selected.shape"),n=i.find(".shape_picker_btn .shape_selected.default_shape"),a=i.find(".shape_select.selected");e.attr("data-shape-key")!==a.attr("data-shape-key")?(n.hide(),t.html(e.html()).show()):(t.hide(),n.show())},s=function(){i.find(".shape_select").removeClass("selected")},o=function(e){e.addClass("selected")},r=function(e){s(),i.find(".shape_select").each(function(){var t=$(this);t.attr("data-shape-key")===e&&(a(t),o(t))})};return i.off("click","a.shape_select").on("click","a.shape_select",function(t){var n=$(this);t.preventDefault(),r(n.attr("data-shape-key")),e.perform_action(i.attr("data-action"),{shape:n.attr("data-shape-key")})}),{update_shape_picker:r}};return e.perform_action=function(e,t){return n[e]?n[e](t):null},e.enable_button=function(e){var n=t.find("#"+e);n.hasClass("disabled")&&n.removeClass("disabled")},e.disable_button=function(e){var n=t.find("#"+e);n.hasClass("disabled")||n.addClass("disabled")},e.update_controls=function(n){$.each(n,function(n,i){t.find("#"+n).find(".btn").each(function(){i?e.enable_button($(this).attr("id")):e.disable_button($(this).attr("id"))})})},e.trigger=function(e,n){t.trigger(e,n)},e.init=function(s,c,d){if(n=s,(t=$(c)).off(),UNDO_REDO.init(n),t.on("click","#undo",UNDO_REDO.undo),t.on("click","#redo",UNDO_REDO.redo),void 0!==d)if(t.on("click",".toolbar_section",function(e){$(this).hasClass("disabled")&&e.stopPropagation()}),t.on("click",".dropdown-menu",function(e){$(this).hasClass("close_on_click")||e.stopPropagation()}),"MindMap"===d){t.on("change",'input[type="checkbox"]',function(){e.perform_action($(this).attr("id"),{checked:$(this).is(":checked"),$el:$(this)})}),t.on("controls:update",function(t,n){e.update_controls(n)}),e.update_controls({node_controls:!0,text_controls:!0,action_controls:!0}),i(),a(),o(),r();var u=l(".node_shape_picker");t.on("shape:update",function(e,t){u.update_shape_picker(t)}),t.on("click",".btn.action",function(t){t.preventDefault(),e.perform_action($(this).attr("id"),{$el:$(this)})})}else if("Note"===d)t.on("click",".action",function(t){t.preventDefault(),e.perform_action($(this).attr("id"),{$el:$(this)})});else if("FlashCardDeck"===d||"Quiz"===d)t.on("controls:update",function(t,n){e.update_controls(n)}),t.on("click",".btn.action",function(t){t.preventDefault(),e.perform_action($(this).attr("id"),{$el:$(this)})});else if("Flowchart"===d){o();var _=l(".arrow_shape_picker"),h=l(".path_shape_picker");t.on("arrow_shape:update",function(e,t){_.update_shape_picker(t)}),t.on("path_shape:update",function(e,t){h.update_shape_picker(t)}),t.on("click",".btn.action",function(t){t.preventDefault(),e.perform_action($(this).attr("id"),{$el:$(this)})}),CKEDITOR_CONFIG.on("update",function(e){n.trigger_event("wysiwyg:update",e)})}},e}(MAIN_TOOLBAR||{}),MOBILE_EDIT_MODE=function(e){var t=null,n=null,i=null,a=!1;e.init=function(){a||(t=document.getElementById("main_toolbar"),n=document.getElementById("toolbar_2"),i=document.getElementById("flash_card_edit_container"),onClickOrTap(t.querySelector("#expand_collapse_secondary .btn.action"),s),a=!0)};var s=function(){n.classList.toggle("hidden"),t.querySelector("#expand_collapse_secondary .btn.action").classList.toggle("expanded"),i&&i.classList.toggle("secondary_toolbar_visible")};return e}(MOBILE_EDIT_MODE||{});$(document).on("flash_card_editor:init edit_mode:init",function(){document.body.classList.contains("mobile")&&MOBILE_EDIT_MODE.init()});